<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLES 12 SP4 | Docker Open Source Engine Guide | Docker Open Source Engine Installation</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Docker Open Source Engine Installation | SLES 12 SP4"/>
<meta name="description" content="Prepare the host as described below. Before installing…"/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="12 SP4"/>
<meta name="book-title" content="Docker Open Source Engine Guide"/>
<meta name="chapter-title" content="Chapter 2. Docker Open Source Engine Installation"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE Linux Enterprise Server 12 SP4"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Docker Open Source Engine Installation | SLES 12 SP4"/>
<meta property="og:description" content="Prepare the host as described below. Before installing any Docker-related packages, you need to enable the container module:"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Docker Open Source Engine Installation | SLES 12 SP4"/>
<meta name="twitter:description" content="Prepare the host as described below. Before installing any Docker-related packages, you need to enable the container module:"/>
<link rel="prev" href="cha-docker-overview.html" title="Chapter 1. Docker Open Source Engine Overview"/><link rel="next" href="cha-sle2docker-installation.html" title="Chapter 3. Installing sle2docker"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/docker_installation.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Docker Open Source Engine Guide</a><span> / </span><a class="crumb" href="cha-docker-installation.html">Docker Open Source Engine Installation</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Docker Open Source Engine Guide</div><ol><li><a href="cha-docker-overview.html" class=" "><span class="title-number">1 </span><span class="title-name">Docker Open Source Engine Overview</span></a></li><li><a href="cha-docker-installation.html" class=" you-are-here"><span class="title-number">2 </span><span class="title-name">Docker Open Source Engine Installation</span></a></li><li><a href="cha-sle2docker-installation.html" class=" "><span class="title-number">3 </span><span class="title-name">Installing <code class="literal">sle2docker</code></span></a></li><li><a href="cha-registry-installation.html" class=" "><span class="title-number">4 </span><span class="title-name">Storing Images</span></a></li><li><a href="docker-building-images.html" class=" "><span class="title-number">5 </span><span class="title-name">Creating Custom Images</span></a></li><li><a href="docker-dockerizing-application.html" class=" "><span class="title-number">6 </span><span class="title-name">Creating Docker Images of Applications</span></a></li><li><a href="cha-working-with-containers.html" class=" "><span class="title-number">7 </span><span class="title-name">Working with Containers</span></a></li><li><a href="app-docker-docupdates.html" class=" "><span class="title-number">A </span><span class="title-name">Documentation Updates</span></a></li><li><a href="bk11apb.html" class=" "><span class="title-number">B </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section xml:lang="en" class="chapter" id="cha-docker-installation" data-id-title="Docker Open Source Engine Installation"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">12 SP4</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">2 </span><span class="title-name">Docker Open Source Engine Installation</span></span> <a title="Permalink" class="permalink" href="cha-docker-installation.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/docker_installation.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect1" id="Preparation" data-id-title="General Preparation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.1 </span><span class="title-name">General Preparation</span></span> <a title="Permalink" class="permalink" href="cha-docker-installation.html#Preparation">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/docker_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Prepare the host as described below. Before installing any
    Docker-related packages, you need to enable the container module:
   </p><div id="id-1.13.3.2.3" data-id-title="Built-in Docker Orchestration Support" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Built-in Docker Orchestration Support</div><p>
         Starting with Docker Open Source Engine 1.12, the container orchestration is now an
         integral part of the Docker Open Source Engine. Even though this feature is
         available in SLESSP1 and in SLESSP2, it is not supported and is
         only a technical preview. Use Kubernetes for Docker container
         orchestration, for details refer to the <a class="link" href="http://kubernetes.io/docs/getting-started-guides/kubeadm/" target="_blank">Kubernetes
         documentation</a>.
        </p></div><div class="procedure" id="id-1.13.3.2.4" data-id-title="Enabling the Container Module Using YaST"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 2.1: </span><span class="title-name">Enabling the Container Module Using YaST </span></span><a title="Permalink" class="permalink" href="cha-docker-installation.html#id-1.13.3.2.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/docker_installation.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start YaST, and select <span class="guimenu">Software</span> › <span class="guimenu"> Software Repositories</span>.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Add</span> to open the add-on dialog.
     </p></li><li class="step"><p>
      Select <span class="guimenu">Extensions and Modules from Registration
      Server</span> and click <span class="guimenu">Next</span>.
     </p></li><li class="step"><p>
      From the list of available extensions and modules, select
      <span class="guimenu">Container Module 12 x86_64</span> and click
      <span class="guimenu">Next</span>.
     </p><p>
      The containers module and its repositories will be added to your
      system.
     </p></li><li class="step"><p> If you use Subscription Management Tool, update the list of repositories on the
            SMT server. </p></li></ol></div></div><div class="procedure" id="id-1.13.3.2.5" data-id-title="Enabling the Container Module Using SUSEConnect"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 2.2: </span><span class="title-name">Enabling the Container Module Using SUSEConnect </span></span><a title="Permalink" class="permalink" href="cha-docker-installation.html#id-1.13.3.2.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/docker_installation.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ul class="procedure"><li class="step"><p>
      The Container Module can be added also with the following command:
     </p><div class="verbatim-wrap"><pre class="screen">$ sudo SUSEConnect -p sle-module-containers/12/x86_64 -r ''</pre></div><div id="id-1.13.3.2.5.2.3" data-id-title="Note about the SUSEConnect syntax" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Note about the SUSEConnect syntax</div><p>
       The <code class="option">-r ''</code> flag is required to avoid a known
       limitation of SUSEConnect.
      </p></div></li></ul></div></div><div class="procedure" id="id-1.13.3.2.6" data-id-title="Installing and Setting Up Docker Open Source Engine"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 2.3: </span><span class="title-name">Installing and Setting Up Docker Open Source Engine </span></span><a title="Permalink" class="permalink" href="cha-docker-installation.html#id-1.13.3.2.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/docker_installation.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Install the <code class="systemitem">docker</code> package:
     </p><div class="verbatim-wrap"><pre class="screen">sudo zypper install docker</pre></div></li><li class="step"><p>
      To automatically start the Docker service at boot time:
     </p><div class="verbatim-wrap"><pre class="screen">sudo systemctl enable docker.service</pre></div><p>
      This will automatically enable docker.socket in consequence.
     </p></li><li class="step"><p>
    In case you will use Portus and an SSL secured registry, open the <code class="filename">/etc/sysconfig/docker</code> file. Search for the parameter
     <em class="parameter">DOCKER_OPTS</em> and add
     <code class="literal">--insecure-registry <em class="replaceable">ADDRESS_OF_YOUR_REGISTRY</em></code>.
    </p></li><li class="step"><p>
    In the production environment when using the SSL secured registry with Portus, add CA certificates to the directory <code class="filename">/etc/docker/certs.d/&lt;registry address&gt;</code> and copy the CA certificates to your system:
    </p><div class="verbatim-wrap"><pre class="screen">    sudo cp CA /etc/pki/trust/anchors/ &amp;&amp; update-ca-certificates</pre></div></li><li class="step"><p>
      Start the Docker service:
     </p><div class="verbatim-wrap"><pre class="screen">sudo systemctl start docker.service</pre></div><p>
      This will automatically start docker.socket in consequence.
     </p></li></ol></div></div><p>
    The Docker daemon listens on a local socket which is accessible only by
    the <code class="systemitem">root</code> user and by the
    members of the <code class="systemitem">docker</code> group.
    The <code class="systemitem">docker</code> group is
    automatically created at package installation time. To allow a certain
    user to connect to the local Docker daemon, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen">sudo /usr/sbin/usermod -aG docker <em class="replaceable">USERNAME</em></pre></div><p>
    The user can communicate with the local Docker daemon upon his next
    login.
   </p></section><section class="sect1" id="sec-docker-setup-net" data-id-title="Networking"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.2 </span><span class="title-name">Networking</span></span> <a title="Permalink" class="permalink" href="cha-docker-installation.html#sec-docker-setup-net">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/docker_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      If you want your containers to be able to access the external
      network, you must enable the <code class="option">ipv4 ip_forward</code>
      rule. This can be done using YaST by browsing to <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span> › <span class="guimenu">Routing</span> menu and ensuring
      <code class="option">Enable IPv4 Forwarding</code> is checked.
    </p><p> This option cannot be changed when networking is handled by
        the Network Manager. In such cases the
          <code class="filename">/etc/sysconfig/SuSEfirewall2</code> file needs
        to be edited manually to ensure the <code class="option">FW_ROUTE</code>
        flag is set to <code class="option">yes</code>:
    </p><div class="verbatim-wrap"><pre class="screen">FW_ROUTE="yes"</pre></div><section class="sect2" id="sec-docker-setup-net-power" data-id-title="Networking Limitations on Power Architecture"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.1 </span><span class="title-name">Networking Limitations on Power Architecture</span></span> <a title="Permalink" class="permalink" href="cha-docker-installation.html#sec-docker-setup-net-power">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/docker_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Currently Docker networking has two limitations on the POWER architecture.
      </p><p>
        The first limitation is about iptables. SLE 12 machines cannot
        run Docker Open Source Engine with the iptables support enabled. An update of the kernel
        is going to solve this issue. In the meantime the <span class="package">docker</span>
        package for POWER has iptables support disabled via a dedicated
        directive inside of <code class="filename">/etc/sysconfig/docker</code>.
      </p><p>
        As a result of this limitation Docker containers will not have
        access to the outer network. A possible workaround is to share the same
        network namespace between the host and the containers.
        This however reduces the isolation of the containers.
      </p><p>
        The network namespace of the host can be shared on a per-container basis
        by adding <code class="option">--net=host</code> to the
        <code class="option">docker run</code> command.
      </p><div id="id-1.13.3.3.5.6" data-id-title="iptables support on SLE 12 SP1" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: iptables support on SLE 12 SP1 </div><p>
          SLE 12 SP1 hosts are not affected by this limitation but, given they
          use the same SLE 12 package, they will have iptables
          support disabled. This can be changed by removing the
          <code class="option">-iptables=false</code> setting inside of
          <code class="filename">/etc/sysconfig/docker</code>.
        </p></div><p>
        The second limitation is about network isolation between the containers
        and the host. Currently it is not possible to prevent containers from
        probing or accessing arbitrary ports of each other.
      </p></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-docker-overview.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 1 </span>Docker Open Source Engine Overview</span></a> </div><div><a class="pagination-link next" href="cha-sle2docker-installation.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 3 </span>Installing <code class="literal">sle2docker</code></span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-docker-installation.html#Preparation"><span class="title-number">2.1 </span><span class="title-name">General Preparation</span></a></span></li><li><span class="sect1"><a href="cha-docker-installation.html#sec-docker-setup-net"><span class="title-number">2.2 </span><span class="title-name">Networking</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>