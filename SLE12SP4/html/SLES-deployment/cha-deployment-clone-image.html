<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLES 12 SP4 | Deployment Guide | Cloning Disk Images</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Cloning Disk Images | SLES 12 SP4"/>
<meta name="description" content="If SUSE Linux Enterprise Server is installed in a virt…"/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="12 SP4"/>
<meta name="book-title" content="Deployment Guide"/>
<meta name="chapter-title" content="Chapter 7. Cloning Disk Images"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE Linux Enterprise Server 12 SP4"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Cloning Disk Images | SLES 12 SP4"/>
<meta property="og:description" content="If SUSE Linux Enterprise Server is installed in a virtualized environment, cloning an existing installation may be the faste…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cloning Disk Images | SLES 12 SP4"/>
<meta name="twitter:description" content="If SUSE Linux Enterprise Server is installed in a virtualized environment, cloning an existing installation may be the faste…"/>
<link rel="prev" href="cha-inst.html" title="Chapter 6. Installation with YaST"/><link rel="next" href="part-installserver.html" title="Part III. Setting Up an Installation Server"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/deployment_image.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Deployment Guide</a><span> / </span><a class="crumb" href="part-mandeploy.html">The Installation Workflow</a><span> / </span><a class="crumb" href="cha-deployment-clone-image.html">Cloning Disk Images</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Deployment Guide</div><ol><li><a href="preface-deployment.html" class=" "><span class="title-number"> </span><span class="title-name">About This Guide</span></a></li><li><a href="cha-planning.html" class=" "><span class="title-number">1 </span><span class="title-name">Planning for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span></a></li><li><a href="part-prep.html" class="has-children "><span class="title-number">I </span><span class="title-name">Installation Preparation</span></a><ol><li><a href="cha-x86.html" class=" "><span class="title-number">2 </span><span class="title-name">Installation on AMD64 and Intel 64</span></a></li><li><a href="cha-power.html" class=" "><span class="title-number">3 </span><span class="title-name">Installation on IBM POWER</span></a></li><li><a href="cha-zseries.html" class=" "><span class="title-number">4 </span><span class="title-name">Installation on IBM IBM Z</span></a></li><li><a href="cha-aarch64.html" class=" "><span class="title-number">5 </span><span class="title-name">Installation on Arm AArch64</span></a></li></ol></li><li class="active"><a href="part-mandeploy.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">The Installation Workflow</span></a><ol><li><a href="cha-inst.html" class=" "><span class="title-number">6 </span><span class="title-name">Installation with YaST</span></a></li><li><a href="cha-deployment-clone-image.html" class=" you-are-here"><span class="title-number">7 </span><span class="title-name">Cloning Disk Images</span></a></li></ol></li><li><a href="part-installserver.html" class="has-children "><span class="title-number">III </span><span class="title-name">Setting Up an Installation Server</span></a><ol><li><a href="cha-deployment-instserver.html" class=" "><span class="title-number">8 </span><span class="title-name">Setting Up the Server Holding the Installation Sources</span></a></li><li><a href="cha-deployment-prep-boot.html" class=" "><span class="title-number">9 </span><span class="title-name">Preparing the Boot of the Target System</span></a></li></ol></li><li><a href="part-remoteinstall.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Remote Installation</span></a><ol><li><a href="cha-deployment-remoteinst.html" class=" "><span class="title-number">10 </span><span class="title-name">Remote Installation</span></a></li></ol></li><li><a href="part-sysconfig.html" class="has-children "><span class="title-number">V </span><span class="title-name">Initial System Configuration</span></a><ol><li><a href="cha-y2-hw.html" class=" "><span class="title-number">11 </span><span class="title-name">Setting Up Hardware Components with YaST</span></a></li><li><a href="cha-advdisk.html" class=" "><span class="title-number">12 </span><span class="title-name">Advanced Disk Setup</span></a></li><li><a href="cha-y2-sw.html" class=" "><span class="title-number">13 </span><span class="title-name">Installing or Removing Software</span></a></li><li><a href="cha-add-ons.html" class=" "><span class="title-number">14 </span><span class="title-name">Installing Modules, Extensions, and Third Party Add-On Products</span></a></li><li><a href="cha-tuning-multikernel.html" class=" "><span class="title-number">15 </span><span class="title-name">Installing Multiple Kernel Versions</span></a></li><li><a href="cha-y2-userman.html" class=" "><span class="title-number">16 </span><span class="title-name">Managing Users with YaST</span></a></li><li><a href="cha-y2-lang.html" class=" "><span class="title-number">17 </span><span class="title-name">Changing Language and Country Settings with YaST</span></a></li></ol></li><li><a href="part-update.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Updating and Upgrading SUSE Linux Enterprise</span></a><ol><li><a href="cha-update-background.html" class=" "><span class="title-number">18 </span><span class="title-name">Life Cycle and Support</span></a></li><li><a href="cha-update-sle.html" class=" "><span class="title-number">19 </span><span class="title-name">Upgrading SUSE Linux Enterprise</span></a></li><li><a href="cha-update-offline.html" class=" "><span class="title-number">20 </span><span class="title-name">Upgrading Offline</span></a></li><li><a href="cha-update-online.html" class=" "><span class="title-number">21 </span><span class="title-name">Upgrading Online</span></a></li><li><a href="cha-update-backporting.html" class=" "><span class="title-number">22 </span><span class="title-name">Backporting Source Code</span></a></li></ol></li><li><a href="app-deployment-docupdates.html" class=" "><span class="title-number">A </span><span class="title-name">Documentation Updates</span></a></li><li><a href="bk02apb.html" class=" "><span class="title-number">B </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-deployment-clone-image" data-id-title="Cloning Disk Images"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">12 SP4</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">7 </span><span class="title-name">Cloning Disk Images</span></span> <a title="Permalink" class="permalink" href="cha-deployment-clone-image.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/deployment_image.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  If <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is installed in a virtualized environment, cloning an
  existing installation may be the fastest way to deploy further machines.
  <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> provides a script to clean up configuration that is unique
  to each installation. With the introduction of systemd, unique system
  identifiers are used and set in different locations and files. Therefore,
  cloning is no longer the recommended way to build system images.
  Images can be created with KIWI NG, see
  <a class="link" href="https://doc.opensuse.org/projects/kiwi/doc/" target="_blank">https://doc.opensuse.org/projects/kiwi/doc/</a>.
 </p><p>
  To clone disks of machines, refer to the documentation of your
  virtualization environment.
 </p><section class="sect1" id="sec-deployment-clone-image-clean" data-id-title="Cleaning Up Unique System Identifiers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.1 </span><span class="title-name">Cleaning Up Unique System Identifiers</span></span> <a title="Permalink" class="permalink" href="cha-deployment-clone-image.html#sec-deployment-clone-image-clean">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/deployment_image.xml" title="Edit source document"> </a></div></div></div></div></div><div id="id-1.4.5.3.5.2" data-id-title="Important Configuration Loss" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Important Configuration Loss</div><p>
    Executing the following procedure permanently deletes important
    system configuration data. If the source system for the clone is
    used in production, run the clean up script on the cloned image.
   </p></div><p>
   To clean all unique system identifiers, execute the following procedure
   before or after cloning a disk image. If run on the clone, this procedure
   needs to be run on each clone. Therefore, we recommend to create a
   <code class="literal">golden image</code> that is not used in production and only
   serves as a source for new clones. The golden image is already cleaned
   up and clones can be used immediately.
  </p><p>
   The <code class="command">clone-master-clean-up</code> command for example removes: 
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Swap files</p></li><li class="listitem"><p>Zypper repositories</p></li><li class="listitem"><p>SSH host and client keys</p></li><li class="listitem"><p>Temporary directories, like <code class="filename">/tmp/*</code></p></li><li class="listitem"><p>Postfix data</p></li><li class="listitem"><p>HANA firewall script</p></li><li class="listitem"><p>systemd journal</p></li></ul></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Use <code class="command">zypper</code> to install <span class="package">clone-master-clean-up</span>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">zypper</code> install clone-master-clean-up</pre></div></li><li class="step"><p>
     Configure the behavior of <code class="command">clone-master-clean-up</code> by
     editing <code class="filename">/etc/sysconfig/clone-master-clean-up</code>.
     This configuration file defines whether users with a UID larger than 1000,
     the <code class="filename">/etc/sudoers</code> file, Zypper repositories and
     Btrfs snapshots should be removed.
    </p></li><li class="step"><p>
     Remove existing configuration and unique identifiers by running the script:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">clone-master-clean-up</code></pre></div></li></ol></div></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-inst.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 6 </span>Installation with YaST</span></a> </div><div><a class="pagination-link next" href="part-installserver.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Part III </span>Setting Up an Installation Server</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-deployment-clone-image.html#sec-deployment-clone-image-clean"><span class="title-number">7.1 </span><span class="title-name">Cleaning Up Unique System Identifiers</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>