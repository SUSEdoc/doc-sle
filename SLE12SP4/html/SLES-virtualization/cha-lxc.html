<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLES 12 SP4 | Virtualization Guide | Linux Containers</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Linux Containers | SLES 12 SP4"/>
<meta name="description" content=""/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="12 SP4"/>
<meta name="book-title" content="Virtualization Guide"/>
<meta name="chapter-title" content="Chapter 31. Linux Containers"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE Linux Enterprise Server 12 SP4"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Linux Containers | SLES 12 SP4"/>
<meta property="og:description" content=""/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux Containers | SLES 12 SP4"/>
<meta name="twitter:description" content=""/>
<link rel="prev" href="part-virt-lxc.html" title="Part VI. Managing Virtual Machines with LXC"/><link rel="next" href="cha-lxc2libvirt.html" title="Chapter 32. Migration from LXC to libvirt-lxc"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Virtualization Guide</a><span> / </span><a class="crumb" href="part-virt-lxc.html">Managing Virtual Machines with LXC</a><span> / </span><a class="crumb" href="cha-lxc.html">Linux Containers</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Virtualization Guide</div><ol><li><a href="cha-kvm.html" class=" "><span class="title-number"> </span><span class="title-name">About This Manual</span></a></li><li><a href="part-virt-intro.html" class="has-children "><span class="title-number">I </span><span class="title-name">Introduction</span></a><ol><li><a href="chap-virtualization-introduction.html" class=" "><span class="title-number">1 </span><span class="title-name">Virtualization Technology</span></a></li><li><a href="cha-xen-basics.html" class=" "><span class="title-number">2 </span><span class="title-name">Introduction to Xen Virtualization</span></a></li><li><a href="cha-kvm-intro.html" class=" "><span class="title-number">3 </span><span class="title-name">Introduction to KVM Virtualization</span></a></li><li><a href="cha-containers-intro.html" class=" "><span class="title-number">4 </span><span class="title-name">Introduction to Linux Containers</span></a></li><li><a href="cha-tools-intro.html" class=" "><span class="title-number">5 </span><span class="title-name">Virtualization Tools</span></a></li><li><a href="cha-vt-installation.html" class=" "><span class="title-number">6 </span><span class="title-name">Installation of Virtualization Components</span></a></li><li><a href="cha-virt-support.html" class=" "><span class="title-number">7 </span><span class="title-name">Supported Guests, Hosts and Features</span></a></li></ol></li><li><a href="part-virt-libvirt.html" class="has-children "><span class="title-number">II </span><span class="title-name">Managing Virtual Machines with <code class="systemitem">libvirt</code></span></a><ol><li><a href="cha-libvirt-overview.html" class=" "><span class="title-number">8 </span><span class="title-name">Starting and Stopping <code class="systemitem">libvirtd</code></span></a></li><li><a href="cha-kvm-inst.html" class=" "><span class="title-number">9 </span><span class="title-name">Guest Installation</span></a></li><li><a href="cha-libvirt-managing.html" class=" "><span class="title-number">10 </span><span class="title-name">Basic VM Guest Management</span></a></li><li><a href="cha-libvirt-connect.html" class=" "><span class="title-number">11 </span><span class="title-name">Connecting and Authorizing</span></a></li><li><a href="cha-libvirt-storage.html" class=" "><span class="title-number">12 </span><span class="title-name">Managing Storage</span></a></li><li><a href="cha-libvirt-networks.html" class=" "><span class="title-number">13 </span><span class="title-name">Managing Networks</span></a></li><li><a href="cha-libvirt-config.html" class=" "><span class="title-number">14 </span><span class="title-name">Configuring Virtual Machines</span></a></li></ol></li><li><a href="part-virt-common.html" class="has-children "><span class="title-number">III </span><span class="title-name">Hypervisor-Independent Features</span></a><ol><li><a href="cha-cachemodes.html" class=" "><span class="title-number">15 </span><span class="title-name">Disk Cache Modes</span></a></li><li><a href="sec-kvm-managing-clock.html" class=" "><span class="title-number">16 </span><span class="title-name">VM Guest Clock Settings</span></a></li><li><a href="chap-guestfs.html" class=" "><span class="title-number">17 </span><span class="title-name">libguestfs</span></a></li></ol></li><li><a href="part-virt-xen.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Managing Virtual Machines with Xen</span></a><ol><li><a href="cha-xen-vhost.html" class=" "><span class="title-number">18 </span><span class="title-name">Setting Up a Virtual Machine Host</span></a></li><li><a href="cha-xen-network.html" class=" "><span class="title-number">19 </span><span class="title-name">Virtual Networking</span></a></li><li><a href="cha-xen-manage.html" class=" "><span class="title-number">20 </span><span class="title-name">Managing a Virtualization Environment</span></a></li><li><a href="cha-xen-vbd.html" class=" "><span class="title-number">21 </span><span class="title-name">Block Devices in Xen</span></a></li><li><a href="cha-xen-config.html" class=" "><span class="title-number">22 </span><span class="title-name">Virtualization: Configuration Options and Settings</span></a></li><li><a href="cha-xen-admin.html" class=" "><span class="title-number">23 </span><span class="title-name">Administrative Tasks</span></a></li><li><a href="cha-xen-xenstore.html" class=" "><span class="title-number">24 </span><span class="title-name">XenStore: Configuration Database Shared between Domains</span></a></li><li><a href="cha-xen-ha.html" class=" "><span class="title-number">25 </span><span class="title-name">Xen as a High-Availability Virtualization Host</span></a></li></ol></li><li><a href="part-virt-qemu.html" class="has-children "><span class="title-number">V </span><span class="title-name">Managing Virtual Machines with QEMU</span></a><ol><li><a href="cha-qemu-overview.html" class=" "><span class="title-number">26 </span><span class="title-name">QEMU Overview</span></a></li><li><a href="cha-qemu-host.html" class=" "><span class="title-number">27 </span><span class="title-name">Setting Up a KVM VM Host Server</span></a></li><li><a href="cha-qemu-guest-inst.html" class=" "><span class="title-number">28 </span><span class="title-name">Guest Installation</span></a></li><li><a href="cha-qemu-running.html" class=" "><span class="title-number">29 </span><span class="title-name">Running Virtual Machines with qemu-system-ARCH</span></a></li><li><a href="cha-qemu-monitor.html" class=" "><span class="title-number">30 </span><span class="title-name">Virtual Machine Administration Using QEMU Monitor</span></a></li></ol></li><li class="active"><a href="part-virt-lxc.html" class="has-children you-are-here"><span class="title-number">VI </span><span class="title-name">Managing Virtual Machines with LXC</span></a><ol><li><a href="cha-lxc.html" class=" you-are-here"><span class="title-number">31 </span><span class="title-name">Linux Containers</span></a></li><li><a href="cha-lxc2libvirt.html" class=" "><span class="title-number">32 </span><span class="title-name">Migration from LXC to <code class="systemitem">libvirt-lxc</code></span></a></li></ol></li><li><a href="gloss-vt-glossary.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="app-vmdp-driver.html" class=" "><span class="title-number">A </span><span class="title-name">Virtual Machine Drivers</span></a></li><li><a href="app-kvm.html" class=" "><span class="title-number">B </span><span class="title-name">Appendix</span></a></li><li><a href="cha-xmtoxl.html" class=" "><span class="title-number">C </span><span class="title-name">XM, XL Tool Stacks and Libvirt framework</span></a></li><li><a href="app-virt-docupdates.html" class=" "><span class="title-number">D </span><span class="title-name">Documentation Updates</span></a></li><li><a href="bk10ape.html" class=" "><span class="title-number">E </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-lxc" data-id-title="Linux Containers"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">12 SP4</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">31 </span><span class="title-name">Linux Containers</span></span> <a title="Permalink" class="permalink" href="cha-lxc.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect1" id="sec-lxc-setup-container" data-id-title="Setting Up LXC Distribution Containers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.1 </span><span class="title-name">Setting Up LXC Distribution Containers</span></span> <a title="Permalink" class="permalink" href="cha-lxc.html#sec-lxc-setup-container">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A container is a kind of <span class="quote">“<span class="quote">virtual machine</span>”</span> that can be
   started, stopped, frozen, or cloned (to name but a few tasks). To set up
   an LXC container, you first need to create a root file system
   containing the guest distribution:
  </p><div class="procedure" id="pro-lxc-create-rootfs" data-id-title="Creating a Root File System"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 31.1: </span><span class="title-name">Creating a Root File System </span></span><a title="Permalink" class="permalink" href="cha-lxc.html#pro-lxc-create-rootfs">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
    There is currently no GUI to create a root file system. You will thus
    need to open a terminal and use <code class="command">virt-create-rootfs</code> as
    root to populate the new root file system. In the following steps, the
    new <code class="systemitem">root</code> file system will be created in
    <em class="replaceable">/path/to/rootfs</em>.
   </p><div id="id-1.12.8.2.4.3.3" data-id-title="Registration Code Needed" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Registration Code Needed</div><p>
    <code class="command">virt-create-rootfs</code> needs a registration
    code to set up a <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> root file system.
    </p></div><ol class="procedure" type="1"><li class="step"><p>
     Run the <code class="command">virt-create-rootfs</code> command:
    </p><div class="verbatim-wrap"><pre class="screen">virt-create-rootfs --root <em class="replaceable">/PATH/TO/ROOTFS</em> --distro SLES-12.0 -c <em class="replaceable">REGISTRATION_CODE</em></pre></div></li><li class="step"><p>
     Change the root path to the root file system with the
     <code class="command">chroot</code> command:
    </p><div class="verbatim-wrap"><pre class="screen">chroot <em class="replaceable">/path/to/rootfs</em></pre></div></li><li class="step"><p>
     Change the password for user <code class="systemitem">root</code> with
     <code class="command">passwd</code>.
    </p></li><li class="step"><p>
     Create an <code class="systemitem">operator</code> user
     without <code class="systemitem">root</code> privileges:
    </p><div class="verbatim-wrap"><pre class="screen">useradd -m operator</pre></div></li><li class="step"><p>
     Change the operator's password:
    </p><div class="verbatim-wrap"><pre class="screen">passwd operator</pre></div></li><li class="step"><p>
     Leave the chroot environment with <code class="command">exit</code>.
    </p></li></ol></div></div><div class="procedure" id="pro-lxc-define-gui" data-id-title="Defining the Container"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 31.2: </span><span class="title-name">Defining the Container </span></span><a title="Permalink" class="permalink" href="cha-lxc.html#pro-lxc-define-gui">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Start Virtual Machine Manager.
    </p></li><li class="step"><p><span class="step-optional">(Optional)</span> 
     If not already present, add a local LXC connection by clicking
     <span class="guimenu">File</span> › <span class="guimenu">Add Connection</span>.
    </p><p>
     Select <span class="guimenu">LXC (Linux Containers)</span> as the hypervisor and
     click <span class="guimenu">Connect</span>.
    </p></li><li class="step"><p>
     Select the <span class="guimenu">localhost (LXC)</span> connection and click
     <span class="guimenu">File</span> <span class="guimenu">New Virtual Machine</span> menu.
    </p></li><li class="step"><p>
     Activate <span class="guimenu">Operating system container</span> and
     click <span class="guimenu">Forward</span>.
    </p></li><li class="step"><p>
     Type the path to the root file system from
     <a class="xref" href="cha-lxc.html#pro-lxc-create-rootfs" title="Creating a Root File System">Procedure 31.1, “Creating a Root File System”</a> and click the
     <span class="guimenu">Forward</span> button.
    </p></li><li class="step"><p>
     Choose the maximum amount of memory and CPUs to allocate to the
     container. Then click the <span class="guimenu">Forward</span> button.
    </p></li><li class="step"><p>
     Type in a name for the container. This name will be used for all
     <code class="command">virsh</code> commands on the container.
    </p><p>
     Click <span class="guimenu">Advanced options</span>. Select the network to
     connect the container to and click the <span class="guimenu">Finish</span>
     button: the container will then be created and started. A console will
     also be automatically opened.
    </p></li></ol></div></div><div class="procedure" id="pro-lxc-ip-network" data-id-title="Configuring IP Addresses for Network Interfaces"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 31.3: </span><span class="title-name">Configuring IP Addresses for Network Interfaces </span></span><a title="Permalink" class="permalink" href="cha-lxc.html#pro-lxc-ip-network">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
    Network devices and hostdev devices with network capabilities can
    be provided with one or more IP addresses to set on the network device in the
    guest. However, some hypervisors or network device types will simply ignore
    them or only use the first one.
   </p><ol class="procedure" type="1"><li class="step"><p>
   Edit the container XML configuration using virsh:
  </p><div class="verbatim-wrap"><pre class="screen">virsh -c lxc:/// edit <em class="replaceable">MYCONTAINER</em></pre></div></li><li class="step"><p>
   The following example shows how to set one or multiple IP addresses:
  </p><div class="verbatim-wrap"><pre class="screen">[...]
&lt;devices&gt;
 &lt;interface type='network'&gt;
  &lt;source network='default'/&gt;
  &lt;target dev='vnet0'/&gt;
  &lt;ip address='192.168.122.5' prefix='24'/&gt;
  &lt;ip address='192.168.122.5' prefix='24' peer<span class="callout" id="co-lxc-netw-peer">1</span>='10.0.0.10'/&gt;
   &lt;route family<span class="callout" id="co-lxc-netw-family">2</span>='ipv4' address<span class="callout" id="co-lxc-netw-addr">3</span>='192.168.122.0' prefix<span class="callout" id="co-lxc-netw-prefix">4</span>='24'
          gateway<span class="callout" id="co-lxc-netw-gateway">5</span>='192.168.122.1'/&gt;
   &lt;route family<a class="xref" href="cha-lxc.html#co-lxc-netw-family"><span class="callout">2</span></a>='ipv4' address<a class="xref" href="cha-lxc.html#co-lxc-netw-addr"><span class="callout">3</span></a>='192.168.122.8' gateway<a class="xref" href="cha-lxc.html#co-lxc-netw-gateway"><span class="callout">5</span></a>='192.168.122.1'/&gt;
 &lt;/interface&gt;
 [...]
 &lt;hostdev mode='capabilities' type='net'&gt;
  &lt;source&gt;
   &lt;interface&gt;eth0&lt;/interface&gt;
  &lt;/source&gt;
  &lt;ip address='192.168.122.6' prefix='24'/&gt;
  &lt;route family='ipv4' address='192.168.122.0' prefix='24' gateway='192.168.122.1'/&gt;
  &lt;route family='ipv4' address='192.168.122.8' gateway='192.168.122.1'/&gt;
 &lt;/hostdev&gt;
&lt;/devices&gt;
[...]</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-lxc-netw-peer"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     Optional attribute. Holds the IP address of the other end of a point-to-point
     network device.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-lxc-netw-family"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     Can be set to either <code class="literal">ipv4</code> or <code class="literal">ipv6</code>.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-lxc-netw-addr"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     Contains the IP address.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-lxc-netw-prefix"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     Optional parameter (will be automatically set if not specified). Defines the
     number of 1 bits in the netmask. For IPv4, the default prefix is determined
     according to the network <span class="quote">“<span class="quote">class</span>”</span> (<code class="literal">A</code>,
     <code class="literal">B</code>, or <code class="literal">C</code>). For IPv6, the default prefix
     is <code class="literal">64</code>.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-lxc-netw-gateway"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     If you do not specify a default gateway in the XML file, none will be set.
    </p></td></tr></table></div></li><li class="step"><p>
     You can also add route elements to define IP routes to add in the guest.
     This is used by the LXC driver.
    </p><div class="verbatim-wrap"><pre class="screen">[...]
&lt;devices&gt;
 &lt;interface type<span class="callout" id="co-lxc-netw-ethernet">1</span>='ethernet'&gt;
  &lt;source/&gt;<span class="callout" id="co-lxc-netw-source">2</span>
   &lt;ip address<span class="callout" id="co-lxc-netw-ip1">3</span>='192.168.123.1' prefix='24'/&gt;
   &lt;ip address<span class="callout" id="co-lxc-netw-ip2">4</span>='10.0.0.10' prefix='24' peer='192.168.122.5'/&gt;
   &lt;route<span class="callout" id="co-lxc-netw-route">5</span> family='ipv4' address='192.168.42.0' prefix='24'
            gateway='192.168.123.4'/&gt;
  &lt;source/&gt;
  [...]
 &lt;/interface&gt;
 [...]
&lt;/devices&gt;
[...]</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-lxc-netw-ethernet"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Network devices of type <code class="literal">ethernet</code> can optionally be
       provided with one or multiple IP addresses (<a class="xref" href="cha-lxc.html#co-lxc-netw-ip1"><span class="callout">3</span></a>, <a class="xref" href="cha-lxc.html#co-lxc-netw-ip2"><span class="callout">4</span></a>) and with one or multiple routes (<a class="xref" href="cha-lxc.html#co-lxc-netw-route"><span class="callout">5</span></a>)
       to set on the host side of the network device.
      </p><p>
     These are configured as subelements of the <code class="literal">source</code> element
     (<a class="xref" href="cha-lxc.html#co-lxc-netw-source"><span class="callout">2</span></a>) of the interface. They have the same
     attributes as the similarly named elements used to configure the guest side
     of the interface (see the step above).
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-lxc-netw-ip1"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     First IP address for the network device of type <code class="literal">ethernet</code>.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-lxc-netw-ip2"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     Second IP address for the network device of type <code class="literal">ethernet</code>.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-lxc-netw-route"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     Route to set on the host side of the network device.
    </p></td></tr></table></div><p>
   Find further details about the attributes of this element at <a class="link" href="http://libvirt.org/formatnetwork.html#elementsStaticroute" target="_blank">http://libvirt.org/formatnetwork.html#elementsStaticroute</a>.
  </p></li><li class="step"><p>
   Save the changes and exit the editor.
  </p></li></ol></div></div><div id="id-1.12.8.2.4.6" data-id-title="Container Network" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Container Network</div><p>
    To configure the container network, edit the
    <code class="filename">/etc/sysconfig/network/ifcfg-*</code> files.
   </p></div></section><section class="sect1" id="sec-lxc-setup-container-app" data-id-title="Setting Up LXC Application Containers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.2 </span><span class="title-name">Setting Up LXC Application Containers</span></span> <a title="Permalink" class="permalink" href="cha-lxc.html#sec-lxc-setup-container-app">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Libvirt also allows to run single applications instead of full blown
   Linux distributions in containers. In this example,
   <code class="command">bash</code> will be started in its own container.
  </p><div class="procedure" id="pro-lxc-define-app-gui" data-id-title="Defining an Application Container Using YaST"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 31.4: </span><span class="title-name">Defining an Application Container Using YaST </span></span><a title="Permalink" class="permalink" href="cha-lxc.html#pro-lxc-define-app-gui">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Start Virtual Machine Manager.
    </p></li><li class="step"><p><span class="step-optional">(Optional)</span> 
     If not already present, add a local LXC connection by clicking
     <span class="guimenu">File</span> › <span class="guimenu">Add Connection</span>.
    </p><p>
     Select <span class="guimenu">LXC (Linux Containers)</span> as the hypervisor and
     click <span class="guimenu">Connect</span>.
    </p></li><li class="step"><p>
     Select the <span class="guimenu">localhost (LXC)</span> connection and click
     <span class="guimenu">File</span> <span class="guimenu">New Virtual Machine</span> menu.
    </p></li><li class="step"><p>
     Activate <span class="guimenu">Application container</span> and
     click <span class="guimenu">Forward</span>.
    </p><p>
     Set the path to the application to be launched. As an example, the
     field is filled with <code class="command">/bin/sh</code>, which is fine to
     create a first container. Click <span class="guimenu">Forward</span>.
    </p></li><li class="step"><p>
     Choose the maximum amount of memory and CPUs to allocate to the
     container. Click <span class="guimenu">Forward</span>.
    </p></li><li class="step"><p>
     Type in a name for the container. This name will be used for all
     <code class="command">virsh</code> commands on the container.
    </p><p>
     Click <span class="guimenu">Advanced options</span>. Select the network to
     connect the container to and click <span class="guimenu">Finish</span>. The
     container will be created and started. A console will be opened
     automatically.
    </p><p>
     Note that the container will be destroyed after the application has
     finished running.
    </p></li></ol></div></div></section><section class="sect1" id="sec-lxc-config-apparmor" data-id-title="Securing a Container Using AppArmor"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.3 </span><span class="title-name">Securing a Container Using <span class="phrase">AppArmor</span></span></span> <a title="Permalink" class="permalink" href="cha-lxc.html#sec-lxc-config-apparmor">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   By default, containers are not secured using <span class="phrase">AppArmor</span> or SELinux. There
   is no graphical user interface to change the security model for a libvirt
   domain, but <code class="command">virsh</code> will help.
  </p><div class="procedure" id="pro-lxc-setup-apparmor"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Edit the container XML configuration using virsh:
    </p><div class="verbatim-wrap"><pre class="screen">virsh -c lxc:/// edit <em class="replaceable">MYCONTAINER</em></pre></div></li><li class="step"><p>
     Add the following to the XML configuration, save it and exit the
     editor.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;domain&gt;
    ...
    &lt;seclabel type="dynamic" model="apparmor"/&gt;
    ...
&lt;/domain&gt;</pre></div></li><li class="step"><p>
     With this configuration, an <span class="phrase">AppArmor</span> profile for the container will be
     created in the <code class="filename">/etc/apparmor.d/libvirt</code>
     directory. The default profile only allows the minimum applications to
     run in the container. This can be changed by modifying the
     <code class="filename">libvirt-<em class="replaceable">CONTAINER-uuid</em></code>
     file: this file is not overwritten by libvirt.
    </p></li></ol></div></div></section><section class="sect1" id="lxc-diff" data-id-title="Differences Between the libvirt LXC Driver and LXC"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.4 </span><span class="title-name">Differences Between the libvirt LXC Driver and LXC</span></span> <a title="Permalink" class="permalink" href="cha-lxc.html#lxc-diff">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <span class="phrase">SUSE Linux Enterprise Server 11 SP3 was</span> shipping LXC,
   while <span class="phrase">SUSE Linux Enterprise Server 12</span> comes with the libvirt LXC driver, sometimes named libvirt-lxc
   to avoid confusion. The containers are not managed or configured in the same
   way in these tools.  Here is a non-exhaustive list of differences.
  </p><p>
   The main difference is that domain configuration in libvirt is an XML file,
   while LXC configuration is a properties file.  Most of the LXC properties
   can be mapped to the domain XML. The properties that cannot be migrated are:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <span class="emphasis"><em>lxc.network.script.up</em></span>: this script can be
     implemented using the <code class="filename">/etc/libvirt/hooks/network</code>
     libvirt hook, though the script will need to be adapted.
    </p></li><li class="listitem"><p>
     <span class="emphasis"><em>lxc.network.ipv*</em></span>: libvirt cannot set the container
     network configuration from the domain configuration.
    </p></li><li class="listitem"><p>
     <span class="emphasis"><em>lxc.network.name</em></span>: libvirt cannot set the container
     network card name.
    </p></li><li class="listitem"><p>
     <span class="emphasis"><em>lxc.devttydir</em></span>: libvirt does not allow changing the
     location of the console devices.
    </p></li><li class="listitem"><p>
     <span class="emphasis"><em>lxc.console</em></span>: there is currently no way to log the
     output of the console into a file on the host for libvirt LXC
     containers.
    </p></li><li class="listitem"><p>
     <span class="emphasis"><em>lxc.pivotdir</em></span>: libvirt does not allow to fine-tune
     the directory used for the <code class="command">pivot_root</code>.
     <code class="filename">/.olroot</code> is used.
    </p></li><li class="listitem"><p>
     <span class="emphasis"><em>lxc.rootfs.mount</em></span>: libvirt does not allow to
     fine-tune this.
    </p></li></ul></div><p>
   LXC VLAN networks automatically create the VLAN interface on the
   host and then move it into the guest namespace. libvirt-lxc configuration
   can mention a VLAN tag ID only for <span class="productname">Open vSwitch</span> tap devices or PCI
   pass-through of SR-IOV VF. The conversion tool actually needs the user to
   manually create the VLAN interface on the host side.
  </p><p>
   LXC rootfs can also be an image file, but LXC brute-forces the mount
   to try to detect the proper file system format. libvirt-lxc can mount
   image files of several formats, but the 'auto' value for the format
   parameter is explicitly not supported. This means that the generated
   configuration will need to be tweaked by the user to get a proper match
   in that case.
  </p><p>
   LXC can support any cgroup configuration, even future ones, while
   libvirt domain configuration, needs to map each of them.
  </p><p>
   LXC can mount block devices in the rootfs, but it cannot
   mount raw partition files: the file needs to be manually attached to a
   loop device. On the other hand libvirt-lxc can mount block devices, but
   also partition files of any format.
  </p></section><section class="sect1" id="sec-lxc-namespaces" data-id-title="Sharing Namespaces Across Containers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.5 </span><span class="title-name">Sharing Namespaces Across Containers</span></span> <a title="Permalink" class="permalink" href="cha-lxc.html#sec-lxc-namespaces">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Like Docker Open Source Engine, libvirt allows you to inherit the namespace from containers
   or processes to share the network namespace. The following example shows how
   to share required namespaces.
   </p><div class="verbatim-wrap"><pre class="screen">&lt;domain type='lxc' xmlns:lxc='http://libvirt.org/schemas/domain/lxc/1.0'&gt;
 [...]
 &lt;lxc:namespace&gt;
  &lt;lxc:sharenet type='netns' value='red'/&gt;
  &lt;lxc:shareuts type='name' value='<em class="replaceable">CONTAINER_1</em>'/&gt;
  &lt;lxc:shareipc type='pid' value='<em class="replaceable">12345</em>'/&gt;
 &lt;/lxc:namespace&gt;
 &lt;/domain&gt;</pre></div><p>
     The <code class="option">netns</code> option is specific to <code class="literal">sharenet</code>.
     Use it to use an existing network namespace (instead of creating a
     new network namespace for the container). In this case, the
     <code class="option">privnet</code> option will be ignored.
    </p></section><section class="sect1" id="sec-lxc-moreinfo" data-id-title="For More Information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.6 </span><span class="title-name">For More Information</span></span> <a title="Permalink" class="permalink" href="cha-lxc.html#sec-lxc-moreinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE12SP4/xml/lxc.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.12.8.2.9.2.1"><span class="term">LXC Container Driver</span></dt><dd><p>
      <a class="link" href="http://libvirt.org/drvlxc.html" target="_blank">http://libvirt.org/drvlxc.html</a>
     </p></dd></dl></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="part-virt-lxc.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Part VI </span>Managing Virtual Machines with LXC</span></a> </div><div><a class="pagination-link next" href="cha-lxc2libvirt.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 32 </span>Migration from LXC to <code class="systemitem">libvirt-lxc</code></span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-lxc.html#sec-lxc-setup-container"><span class="title-number">31.1 </span><span class="title-name">Setting Up LXC Distribution Containers</span></a></span></li><li><span class="sect1"><a href="cha-lxc.html#sec-lxc-setup-container-app"><span class="title-number">31.2 </span><span class="title-name">Setting Up LXC Application Containers</span></a></span></li><li><span class="sect1"><a href="cha-lxc.html#sec-lxc-config-apparmor"><span class="title-number">31.3 </span><span class="title-name">Securing a Container Using <span class="phrase">AppArmor</span></span></a></span></li><li><span class="sect1"><a href="cha-lxc.html#lxc-diff"><span class="title-number">31.4 </span><span class="title-name">Differences Between the libvirt LXC Driver and LXC</span></a></span></li><li><span class="sect1"><a href="cha-lxc.html#sec-lxc-namespaces"><span class="title-number">31.5 </span><span class="title-name">Sharing Namespaces Across Containers</span></a></span></li><li><span class="sect1"><a href="cha-lxc.html#sec-lxc-moreinfo"><span class="title-number">31.6 </span><span class="title-name">For More Information</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>