<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLES 15 SP6 | Security and Hardening Guide | Getting started</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Getting started | SLES 15 SP6"/>
<meta name="description" content="Prepare a successful deployment of AppArmor on your system by carefully considering the following items:"/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="15 SP6"/>
<meta name="book-title" content="Security and Hardening Guide"/>
<meta name="chapter-title" content="Chapter 32. Getting started"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Server 15 SP6"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Security and Hardening Guide"/>
<meta property="og:description" content="Implement system security and hardening for SLES"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Security and Hardening Guide"/>
<meta name="twitter:description" content="Implement system security and hardening for SLES"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Getting started",
  
    "description": "Getting started",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-06-26T00:00+02:00",
      
    "datePublished": "2024-06-26T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-apparmor-intro.html" title="Chapter 31. Introducing AppArmor"/><link rel="next" href="cha-apparmor-concept.html" title="Chapter 33. Immunizing programs"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/apparmor_start.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Security and Hardening Guide</a><span> / </span><a class="crumb" href="part-apparmor.html">Confining privileges with AppArmor</a><span> / </span><a class="crumb" href="cha-apparmor-start.html">Getting started</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Security and Hardening Guide</div><ol><li><a href="preface-security.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="cha-security.html" class=" "><span class="title-number">1 </span><span class="title-name">Security and confidentiality</span></a></li><li><a href="part-auth.html" class="has-children "><span class="title-number">I </span><span class="title-name">Authentication</span></a><ol><li><a href="cha-pam.html" class=" "><span class="title-number">2 </span><span class="title-name">Authentication with PAM</span></a></li><li><a href="cha-nis.html" class=" "><span class="title-number">3 </span><span class="title-name">Using NIS</span></a></li><li><a href="cha-security-auth.html" class=" "><span class="title-number">4 </span><span class="title-name">Setting up authentication clients using YaST</span></a></li><li><a href="cha-security-ldap.html" class=" "><span class="title-number">5 </span><span class="title-name">LDAP with 389 Directory Server</span></a></li><li><a href="cha-security-kerberos.html" class=" "><span class="title-number">6 </span><span class="title-name">Network authentication with Kerberos</span></a></li><li><a href="cha-security-ad.html" class=" "><span class="title-number">7 </span><span class="title-name">Active Directory support</span></a></li><li><a href="cha-security-freeradius.html" class=" "><span class="title-number">8 </span><span class="title-name">Setting up a freeRADIUS server</span></a></li></ol></li><li><a href="part-local-security.html" class="has-children "><span class="title-number">II </span><span class="title-name">Local security</span></a><ol><li><a href="cha-physical-security.html" class=" "><span class="title-number">9 </span><span class="title-name">Physical security</span></a></li><li><a href="sec-sec-software-management.html" class=" "><span class="title-number">10 </span><span class="title-name">Software management</span></a></li><li><a href="sec-sec-file-management.html" class=" "><span class="title-number">11 </span><span class="title-name">File management</span></a></li><li><a href="cha-security-cryptofs.html" class=" "><span class="title-number">12 </span><span class="title-name">Encrypting partitions and files</span></a></li><li><a href="cha-configure-cryptctl.html" class=" "><span class="title-number">13 </span><span class="title-name">Storage encryption for hosted applications with cryptctl</span></a></li><li><a href="sec-sec-user-management.html" class=" "><span class="title-number">14 </span><span class="title-name">User management</span></a></li><li><a href="cha-sec-cron-at.html" class=" "><span class="title-number">15 </span><span class="title-name">Restricting <code class="systemitem">cron</code> and <code class="systemitem">at</code></span></a></li><li><a href="cha-spectre.html" class=" "><span class="title-number">16 </span><span class="title-name">Spectre/Meltdown checker</span></a></li><li><a href="cha-security-yast-security.html" class=" "><span class="title-number">17 </span><span class="title-name">Configuring security settings with YaST</span></a></li><li><a href="cha-security-polkit.html" class=" "><span class="title-number">18 </span><span class="title-name">The Polkit authentication framework</span></a></li><li><a href="cha-security-acls.html" class=" "><span class="title-number">19 </span><span class="title-name">Access control lists in Linux</span></a></li><li><a href="cha-aide.html" class=" "><span class="title-number">20 </span><span class="title-name">Intrusion detection with AIDE</span></a></li></ol></li><li><a href="part-network-security.html" class="has-children "><span class="title-number">III </span><span class="title-name">Network security</span></a><ol><li><a href="cha-xauth.html" class=" "><span class="title-number">21 </span><span class="title-name">X Window System and X authentication</span></a></li><li><a href="cha-ssh.html" class=" "><span class="title-number">22 </span><span class="title-name">Securing network operations with OpenSSH</span></a></li><li><a href="cha-security-firewall.html" class=" "><span class="title-number">23 </span><span class="title-name">Masquerading and firewalls</span></a></li><li><a href="cha-security-vpnserver.html" class=" "><span class="title-number">24 </span><span class="title-name">Configuring a VPN server</span></a></li><li><a href="cha-security-xca.html" class=" "><span class="title-number">25 </span><span class="title-name">Managing a PKI with XCA, X certificate and key manager</span></a></li><li><a href="cha-sec-sysctl.html" class=" "><span class="title-number">26 </span><span class="title-name">Improving network security with <code class="command">sysctl</code> variables</span></a></li></ol></li><li><a href="part-compliance.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Regulations and compliance</span></a><ol><li><a href="cha-common-criteria.html" class=" "><span class="title-number">27 </span><span class="title-name">Common Criteria</span></a></li><li><a href="cha-security-fips.html" class=" "><span class="title-number">28 </span><span class="title-name">Enabling compliance with FIPS 140-3</span></a></li><li><a href="cha-security-pci-dss.html" class=" "><span class="title-number">29 </span><span class="title-name">Payment Card Industry Data Security Standard (PCI DSS)</span></a></li><li><a href="cha-security-stig.html" class=" "><span class="title-number">30 </span><span class="title-name">Hardening SUSE Linux Enterprise with STIG</span></a></li></ol></li><li class="active"><a href="part-apparmor.html" class="has-children you-are-here"><span class="title-number">V </span><span class="title-name">Confining privileges with <span class="phrase">AppArmor</span></span></a><ol><li><a href="cha-apparmor-intro.html" class=" "><span class="title-number">31 </span><span class="title-name">Introducing <span class="phrase">AppArmor</span></span></a></li><li><a href="cha-apparmor-start.html" class=" you-are-here"><span class="title-number">32 </span><span class="title-name">Getting started</span></a></li><li><a href="cha-apparmor-concept.html" class=" "><span class="title-number">33 </span><span class="title-name">Immunizing programs</span></a></li><li><a href="cha-apparmor-profiles.html" class=" "><span class="title-number">34 </span><span class="title-name">Profile components and syntax</span></a></li><li><a href="cha-apparmor-repos.html" class=" "><span class="title-number">35 </span><span class="title-name"><span class="phrase">AppArmor</span> profile repositories</span></a></li><li><a href="cha-apparmor-yast.html" class=" "><span class="title-number">36 </span><span class="title-name">Building and managing profiles with YaST</span></a></li><li><a href="cha-apparmor-commandline.html" class=" "><span class="title-number">37 </span><span class="title-name">Building profiles from the command line</span></a></li><li><a href="cha-apparmor-hat.html" class=" "><span class="title-number">38 </span><span class="title-name">Profiling your Web applications using ChangeHat</span></a></li><li><a href="cha-apparmor-pam.html" class=" "><span class="title-number">39 </span><span class="title-name">Confining users with <code class="systemitem">pam_apparmor</code></span></a></li><li><a href="cha-apparmor-managing.html" class=" "><span class="title-number">40 </span><span class="title-name">Managing profiled applications</span></a></li><li><a href="cha-apparmor-support.html" class=" "><span class="title-number">41 </span><span class="title-name">Support</span></a></li><li><a href="cha-apparmor-glossary.html" class=" "><span class="title-number">42 </span><span class="title-name"><span class="phrase">AppArmor</span> glossary</span></a></li></ol></li><li><a href="part-selinux.html" class="has-children "><span class="title-number">VI </span><span class="title-name">SELinux</span></a><ol><li><a href="cha-selinux.html" class=" "><span class="title-number">43 </span><span class="title-name">Configuring SELinux</span></a></li></ol></li><li><a href="part-audit.html" class="has-children "><span class="title-number">VII </span><span class="title-name">The Linux Audit Framework</span></a><ol><li><a href="cha-audit-comp.html" class=" "><span class="title-number">44 </span><span class="title-name">Understanding Linux audit</span></a></li><li><a href="cha-audit-setup.html" class=" "><span class="title-number">45 </span><span class="title-name">Setting up the Linux audit framework</span></a></li><li><a href="cha-audit-scenarios.html" class=" "><span class="title-number">46 </span><span class="title-name">Introducing an audit rule set</span></a></li><li><a href="cha-audit-moreinfo.html" class=" "><span class="title-number">47 </span><span class="title-name">Useful resources</span></a></li></ol></li><li><a href="bk06apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-apparmor-start" data-id-title="Getting started"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP6</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">32 </span><span class="title-name">Getting started</span></span> <a title="Permalink" class="permalink" href="cha-apparmor-start.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apparmor_start.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Prepare a successful deployment of <span class="phrase">AppArmor</span> on your system by carefully
  considering the following items:
 </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    Determine the applications to profile. Read more on this in
    <a class="xref" href="cha-apparmor-start.html#sec-apparmor-start-choose" title="32.3. Choosing applications to profile">Section 32.3, “Choosing applications to profile”</a>.
   </p></li><li class="step"><p>
    Build the needed profiles as roughly outlined in
    <a class="xref" href="cha-apparmor-start.html#sec-apparmor-start-build" title="32.4. Building and modifying profiles">Section 32.4, “Building and modifying profiles”</a>. Check the results and adjust
    the profiles when necessary.
   </p></li><li class="step"><p>
    Update your profiles whenever your environment changes or you need to
    react to security events logged by the reporting tool of <span class="phrase">AppArmor</span>. Refer
    to <a class="xref" href="cha-apparmor-start.html#sec-apparmor-start-update" title="32.5. Updating your profiles">Section 32.5, “Updating your profiles”</a>.
   </p></li></ol></div></div><section class="sect1" id="sec-apparmor-start-install" data-id-title="Installing AppArmor"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">32.1 </span><span class="title-name">Installing <span class="phrase">AppArmor</span></span></span> <a title="Permalink" class="permalink" href="cha-apparmor-start.html#sec-apparmor-start-install">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apparmor_start.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <span class="phrase">AppArmor</span> is installed and running on any installation of
   <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> by default, regardless of what patterns are
   installed. The packages listed below are needed for a fully functional
   instance of <span class="phrase">AppArmor</span>:
  </p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p>
     <code class="systemitem">apparmor-docs</code>
    </p></li><li class="listitem"><p>
     <code class="systemitem">apparmor-parser</code>
    </p></li><li class="listitem"><p>
     <code class="systemitem">apparmor-profiles</code>
    </p></li><li class="listitem"><p>
     <code class="systemitem">apparmor-utils</code>
    </p></li><li class="listitem"><p>
     <code class="systemitem">audit</code>
    </p></li><li class="listitem"><p>
     <code class="systemitem">libapparmor1</code>
    </p></li><li class="listitem"><p>
     <code class="systemitem">perl-libapparmor</code>
    </p></li><li class="listitem"><p>
     <code class="systemitem">yast2-apparmor</code>
    </p></li></ul></div><div id="id-1.8.8.3.5.4" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
    If <span class="phrase">AppArmor</span> is not installed on your system, install the pattern
    <code class="systemitem">apparmor</code> for a complete
    <span class="phrase">AppArmor</span> installation. Either use the YaST Software Management
    module for installation, or use Zypper on the command line:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper in -t pattern apparmor</pre></div></div></section><section class="sect1" id="sec-apparmor-start-enable" data-id-title="Enabling and disabling AppArmor"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">32.2 </span><span class="title-name">Enabling and disabling <span class="phrase">AppArmor</span></span></span> <a title="Permalink" class="permalink" href="cha-apparmor-start.html#sec-apparmor-start-enable">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apparmor_start.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <span class="phrase">AppArmor</span> is configured to run by default on any fresh installation of

   <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. There are two ways of toggling the status of <span class="phrase">AppArmor</span>:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.8.3.6.3.1"><span class="term">Using YaST services manager</span></dt><dd><p>
      Disable or enable <span class="phrase">AppArmor</span> by removing or adding its boot script to the
      sequence of scripts executed on system boot. Status changes are
      applied on reboot.
     </p></dd><dt id="id-1.8.8.3.6.3.2"><span class="term">Using <span class="phrase">AppArmor</span> configuration window</span></dt><dd><p>
      Toggle the status of <span class="phrase">AppArmor</span> in a running system by switching it off
      or on using the YaST <span class="phrase">AppArmor</span> Control Panel. Changes made here are
      applied instantaneously. The Control Panel triggers a stop or start
      event for <span class="phrase">AppArmor</span> and removes or adds its boot script in the system's
      boot sequence.
     </p></dd></dl></div><p>
   To disable <span class="phrase">AppArmor</span> permanently (by removing it from the sequence of
   scripts executed on system boot) proceed as follows:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Start YaST.
    </p></li><li class="step"><p>
     Select <span class="guimenu">System</span> › <span class="guimenu">Services
     Manager</span>.
    </p></li><li class="step"><p>
     Mark <code class="literal">apparmor</code> by clicking its row in the list of
     services, then click <span class="guimenu">Enable/Disable</span> in the lower
     part of the window. Check that <span class="guimenu">Enabled</span> changed to
     <span class="guimenu">Disabled</span> in the <code class="literal">apparmor</code> row.
    </p></li><li class="step"><p>
     Confirm with <span class="guimenu">OK</span>.
    </p></li></ol></div></div><p>
   <span class="phrase">AppArmor</span> is not initialized on reboot and stays inactive until you
   re-enable it. Re-enabling a service using the YaST
   <span class="guimenu">Services Manager</span> tool is similar to disabling it.
  </p><p>
   Toggle the status of <span class="phrase">AppArmor</span> in a running system by using the <span class="phrase">AppArmor</span>
   Configuration window. These changes take effect when you apply them
   and survive a reboot of the system. To toggle the status of <span class="phrase">AppArmor</span>,
   proceed as follows:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Start YaST, select <span class="guimenu"><span class="phrase">AppArmor</span> Configuration</span>, and
     click <span class="guimenu">Settings</span> in the main window.
    </p></li><li class="step"><p>
     Enable <span class="phrase">AppArmor</span> by checking <span class="guimenu">Enable <span class="phrase">AppArmor</span></span> or disable
     <span class="phrase">AppArmor</span> by deselecting it.
    </p></li><li class="step"><p>
     Click <span class="guimenu">Done</span> in the <span class="guimenu"><span class="phrase">AppArmor</span>
     Configuration</span> window.
    </p></li></ol></div></div></section><section class="sect1" id="sec-apparmor-start-choose" data-id-title="Choosing applications to profile"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">32.3 </span><span class="title-name">Choosing applications to profile</span></span> <a title="Permalink" class="permalink" href="cha-apparmor-start.html#sec-apparmor-start-choose">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apparmor_start.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You need to protect the programs that are exposed to attacks in your
   particular setup, so use profiles for those applications you
   run. Use the following list to determine the candidates:
  </p><table style="border: 0; " class="simplelist"><tr><td>Network Agents</td></tr><tr><td>Web Applications</td></tr><tr><td>Cron Jobs</td></tr></table><p>
   To find out which processes are currently running with open network ports
   and might need a profile to confine them, run
   <code class="command">aa-unconfined</code> as <code class="systemitem">root</code>.
  </p><div class="example" id="ex-unconfined" data-id-title="Output of aa-unconfined"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 32.1: </span><span class="title-name">Output of <code class="command">aa-unconfined</code> </span></span><a title="Permalink" class="permalink" href="cha-apparmor-start.html#ex-unconfined">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apparmor_start.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">19848 /usr/sbin/cupsd not confined
19887 /usr/sbin/sshd not confined
19947 /usr/lib/postfix/master not confined
1328 /usr/sbin/smbd confined by '/usr/sbin/smbd (enforce)'</pre></div></div></div><p>
   Each of the processes in the above example labeled <code class="literal">not
   confined</code> might need a custom profile to confine it. Those
   labeled <code class="literal">confined by</code> are already protected by <span class="phrase">AppArmor</span>.
  </p><div id="id-1.8.8.3.7.7" data-id-title="More information" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: More information</div><p>
    For more information about choosing the right applications to profile,
    refer to <a class="xref" href="cha-apparmor-concept.html#sec-apparmor-concept-determine" title="33.2. Determining programs to immunize">Section 33.2, “Determining programs to immunize”</a>.
   </p></div></section><section class="sect1" id="sec-apparmor-start-build" data-id-title="Building and modifying profiles"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">32.4 </span><span class="title-name">Building and modifying profiles</span></span> <a title="Permalink" class="permalink" href="cha-apparmor-start.html#sec-apparmor-start-build">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apparmor_start.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <span class="phrase">AppArmor</span> on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> ships with a preconfigured set of profiles
   for the most important applications. Additionally, you can use <span class="phrase">AppArmor</span> to
   create your own profiles for any application you want.
  </p><p>
   There are two ways of managing profiles. One is to use the graphical
   front-end provided by the YaST <span class="phrase">AppArmor</span> modules and the other is to
   use the command-line tools provided by the <span class="phrase">AppArmor</span> suite itself. The main
   difference is that YaST supports basic functionality for
   <span class="phrase">AppArmor</span> profiles, while the command-line tools let you update/tune the
   profiles in a more fine-grained way.
  </p><p>
   For each application, perform the following steps to create a profile:
  </p><div class="procedure" id="proc-genprof"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step" id="st-genprof1"><p>
     As <code class="systemitem">root</code>, let <span class="phrase">AppArmor</span> create a rough outline of the
     application's profile by running <code class="command">aa-genprof</code>
     <em class="replaceable">PROGRAM_NAME</em>.
    </p><p>
     <span class="emphasis"><em>or</em></span>
    </p><p>

     Outline the basic profile by running <span class="guimenu">YaST</span> › <span class="guimenu">Security and Users</span> › <span class="guimenu"><span class="phrase">AppArmor</span> Configuration</span> › <span class="guimenu">Manually Add
     Profile</span> and specifying the complete path to the
     application you want to profile.
    </p><p>
     A new basic profile is outlined and put into learning mode, which means
     that it logs any activity of the program you are executing, but does
     not yet restrict it.
    </p></li><li class="step" id="st-genprof2"><p>
     Run the full range of the application's actions to let <span class="phrase">AppArmor</span> get a
     specific picture of its activities.
    </p></li><li class="step" id="st-genprof3"><p>
     Let <span class="phrase">AppArmor</span> analyze the log files generated in
     <a class="xref" href="cha-apparmor-start.html#st-genprof2" title="Step 2">Step 2</a> by typing <span class="keycap">S</span> in
     aa-genprof.
    </p><p>
     <span class="phrase">AppArmor</span> scans the logs it recorded during the application's run and
     asks you to set the access rights for each event that was logged.
     Either set them for each file or use globbing.
    </p></li><li class="step"><p>
     Depending on the complexity of your application, it might be necessary
     to repeat <a class="xref" href="cha-apparmor-start.html#st-genprof2" title="Step 2">Step 2</a> and
     <a class="xref" href="cha-apparmor-start.html#st-genprof3" title="Step 3">Step 3</a>. Confine the application, exercise it
     under the confined conditions, and process any new log events. To
     properly confine the full range of an application's capabilities, you
     might be required to repeat this procedure often.
    </p></li><li class="step" id="st-genprof4"><p>
     When you finish <code class="command">aa-genprof</code>, your profile is set to
     enforce mode. The profile is applied and <span class="phrase">AppArmor</span> restricts the
     application according to it.
    </p><p>
     If you started <code class="command">aa-genprof</code> on an application that had
     an existing profile that was in complain mode, this profile remains in
     learning mode upon exit of this learning cycle. For more information
     about changing the mode of a profile, refer to
     <a class="xref" href="cha-apparmor-commandline.html#sec-apparmor-commandline-profiling-summary-complain" title="37.7.3.2. aa-complain—entering complain or learning mode">Section 37.7.3.2, “aa-complain—entering complain or learning mode”</a>
     and
     <a class="xref" href="cha-apparmor-commandline.html#sec-apparmor-commandline-profiling-summary-enforce" title="37.7.3.6. aa-enforce—entering enforce mode">Section 37.7.3.6, “aa-enforce—entering enforce mode”</a>.
    </p></li></ol></div></div><p>
   Test your profile settings by performing every task you need with the
   application you confined. Normally, the confined program runs smoothly
   and you do not notice <span class="phrase">AppArmor</span> activities. If you notice
   certain misbehavior with your application, check the system logs and see
   if <span class="phrase">AppArmor</span> is too tightly confining your application. Depending on the
   log mechanism used on your system, there are several places to look for
   <span class="phrase">AppArmor</span> log entries:
  </p><table style="border: 0; " class="simplelist"><tr><td><code class="filename">/var/log/audit/audit.log</code>
   </td></tr><tr><td>The command <code class="command">journalctl | grep -i apparmor</code>
   </td></tr><tr><td>The command <code class="command">dmesg -T</code>
   </td></tr></table><p>
   To adjust the profile, analyze the log messages relating to this
   application again as described in
   <a class="xref" href="cha-apparmor-commandline.html#sec-apparmor-commandline-profiling-summary-logprof" title="37.7.3.9. aa-logprof—scanning the system log">Section 37.7.3.9, “aa-logprof—scanning the system log”</a>.
   Determine the access rights or restrictions when prompted.
  </p><div id="id-1.8.8.3.8.9" data-id-title="More information" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: More information</div><p>
    For more information about profile building and modification, refer to
    <a class="xref" href="cha-apparmor-profiles.html" title="Chapter 34. Profile components and syntax">Chapter 34, <em>Profile components and syntax</em></a>,
    <a class="xref" href="cha-apparmor-yast.html" title="Chapter 36. Building and managing profiles with YaST">Chapter 36, <em>Building and managing profiles with YaST</em></a>, and
    <a class="xref" href="cha-apparmor-commandline.html" title="Chapter 37. Building profiles from the command line">Chapter 37, <em>Building profiles from the command line</em></a>.
   </p></div></section><section class="sect1" id="sec-apparmor-start-update" data-id-title="Updating your profiles"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">32.5 </span><span class="title-name">Updating your profiles</span></span> <a title="Permalink" class="permalink" href="cha-apparmor-start.html#sec-apparmor-start-update">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apparmor_start.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Software and system configurations change over time. As a result, your
   profile setup for <span class="phrase">AppArmor</span> might need certain fine-tuning from time to time.
   <span class="phrase">AppArmor</span> checks your system log for policy violations or other <span class="phrase">AppArmor</span>
   events and lets you adjust your profile set accordingly. Any application
   behavior that is outside of any profile definition can be addressed by
   <code class="command">aa-logprof</code>. For more information, see
   <a class="xref" href="cha-apparmor-commandline.html#sec-apparmor-commandline-profiling-summary-logprof" title="37.7.3.9. aa-logprof—scanning the system log">Section 37.7.3.9, “aa-logprof—scanning the system log”</a>.
  </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-apparmor-intro.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 31 </span>Introducing <span class="phrase">AppArmor</span></span></a> </div><div><a class="pagination-link next" href="cha-apparmor-concept.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 33 </span>Immunizing programs</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-apparmor-start.html#sec-apparmor-start-install"><span class="title-number">32.1 </span><span class="title-name">Installing <span class="phrase">AppArmor</span></span></a></span></li><li><span class="sect1"><a href="cha-apparmor-start.html#sec-apparmor-start-enable"><span class="title-number">32.2 </span><span class="title-name">Enabling and disabling <span class="phrase">AppArmor</span></span></a></span></li><li><span class="sect1"><a href="cha-apparmor-start.html#sec-apparmor-start-choose"><span class="title-number">32.3 </span><span class="title-name">Choosing applications to profile</span></a></span></li><li><span class="sect1"><a href="cha-apparmor-start.html#sec-apparmor-start-build"><span class="title-number">32.4 </span><span class="title-name">Building and modifying profiles</span></a></span></li><li><span class="sect1"><a href="cha-apparmor-start.html#sec-apparmor-start-update"><span class="title-number">32.5 </span><span class="title-name">Updating your profiles</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>