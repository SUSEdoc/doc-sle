<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLES 15 SP6 | Virtualization Guide | Xen to KVM migration guide</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Xen to KVM migration guide | SLES 15 SP6"/>
<meta name="description" content="As the KVM virtualization solution is becoming more and more popular among server administrators, many of them need a path to migrate their existing …"/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="15 SP6"/>
<meta name="book-title" content="Virtualization Guide"/>
<meta name="chapter-title" content="Chapter 18. Xen to KVM migration guide"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Server 15 SP6"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Virtualization Guide"/>
<meta property="og:description" content="Learn all about virtualization and VM management"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Virtualization Guide"/>
<meta name="twitter:description" content="Learn all about virtualization and VM management"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Xen to KVM migration guide",
  
    "description": "Xen to KVM migration guide",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-06-26T00:00+02:00",
      
    "datePublished": "2024-06-26T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="sec-libvirt-admin-migrate.html" title="Chapter 17. Migrating VM Guests"/><link rel="next" href="part-virt-common.html" title="Part III. Hypervisor-independent features"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Virtualization Guide</a><span> / </span><a class="crumb" href="part-virt-libvirt.html">Managing virtual machines with libvirt</a><span> / </span><a class="crumb" href="xen2kvm-migration.html">Xen to KVM migration guide</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Virtualization Guide</div><ol><li><a href="cha-kvm.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="part-virt-intro.html" class="has-children "><span class="title-number">I </span><span class="title-name">Introduction</span></a><ol><li><a href="chap-virtualization-introduction.html" class=" "><span class="title-number">1 </span><span class="title-name">Virtualization technology</span></a></li><li><a href="cha-virtualization-scenarios.html" class=" "><span class="title-number">2 </span><span class="title-name">Virtualization scenarios</span></a></li><li><a href="cha-xen-basics.html" class=" "><span class="title-number">3 </span><span class="title-name">Introduction to Xen virtualization</span></a></li><li><a href="cha-kvm-intro.html" class=" "><span class="title-number">4 </span><span class="title-name">Introduction to KVM virtualization</span></a></li><li><a href="cha-tools-intro.html" class=" "><span class="title-number">5 </span><span class="title-name">Virtualization tools</span></a></li><li><a href="cha-vt-installation.html" class=" "><span class="title-number">6 </span><span class="title-name">Installation of virtualization components</span></a></li><li><a href="cha-virt-support.html" class=" "><span class="title-number">7 </span><span class="title-name">Virtualization limits and support</span></a></li></ol></li><li class="active"><a href="part-virt-libvirt.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Managing virtual machines with <code class="systemitem">libvirt</code></span></a><ol><li><a href="cha-libvirt-overview.html" class=" "><span class="title-number">8 </span><span class="title-name"><code class="systemitem">libvirt</code> daemons</span></a></li><li><a href="cha-libvirt-host.html" class=" "><span class="title-number">9 </span><span class="title-name">Preparing the VM Host Server</span></a></li><li><a href="cha-kvm-inst.html" class=" "><span class="title-number">10 </span><span class="title-name">Guest installation</span></a></li><li><a href="cha-libvirt-managing.html" class=" "><span class="title-number">11 </span><span class="title-name">Basic VM Guest management</span></a></li><li><a href="cha-libvirt-connect.html" class=" "><span class="title-number">12 </span><span class="title-name">Connecting and authorizing</span></a></li><li><a href="cha-libvirt-storage.html" class=" "><span class="title-number">13 </span><span class="title-name">Advanced storage topics</span></a></li><li><a href="cha-libvirt-config-gui.html" class=" "><span class="title-number">14 </span><span class="title-name">Configuring virtual machines with Virtual Machine Manager</span></a></li><li><a href="cha-libvirt-config-virsh.html" class=" "><span class="title-number">15 </span><span class="title-name">Configuring virtual machines with <code class="command">virsh</code></span></a></li><li><a href="cha-vm-security.html" class=" "><span class="title-number">16 </span><span class="title-name">Enhancing virtual machine security with AMD SEV-SNP</span></a></li><li><a href="sec-libvirt-admin-migrate.html" class=" "><span class="title-number">17 </span><span class="title-name">Migrating VM Guests</span></a></li><li><a href="xen2kvm-migration.html" class=" you-are-here"><span class="title-number">18 </span><span class="title-name">Xen to KVM migration guide</span></a></li></ol></li><li><a href="part-virt-common.html" class="has-children "><span class="title-number">III </span><span class="title-name">Hypervisor-independent features</span></a><ol><li><a href="cha-cachemodes.html" class=" "><span class="title-number">19 </span><span class="title-name">Disk cache modes</span></a></li><li><a href="sec-kvm-managing-clock.html" class=" "><span class="title-number">20 </span><span class="title-name">VM Guest clock settings</span></a></li><li><a href="chap-guestfs.html" class=" "><span class="title-number">21 </span><span class="title-name">libguestfs</span></a></li><li><a href="cha-qemu-ga.html" class=" "><span class="title-number">22 </span><span class="title-name">QEMU guest agent</span></a></li><li><a href="tpm.html" class=" "><span class="title-number">23 </span><span class="title-name">Software TPM emulator</span></a></li><li><a href="virt-crash-dump.html" class=" "><span class="title-number">24 </span><span class="title-name">Creating crash dumps of a VM Guest</span></a></li></ol></li><li><a href="part-virt-xen.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Managing virtual machines with Xen</span></a><ol><li><a href="cha-xen-vhost.html" class=" "><span class="title-number">25 </span><span class="title-name">Setting up a virtual machine host</span></a></li><li><a href="cha-xen-network.html" class=" "><span class="title-number">26 </span><span class="title-name">Virtual networking</span></a></li><li><a href="cha-xen-manage.html" class=" "><span class="title-number">27 </span><span class="title-name">Managing a virtualization environment</span></a></li><li><a href="cha-xen-vbd.html" class=" "><span class="title-number">28 </span><span class="title-name">Block devices in Xen</span></a></li><li><a href="cha-xen-config.html" class=" "><span class="title-number">29 </span><span class="title-name">Virtualization: configuration options and settings</span></a></li><li><a href="cha-xen-admin.html" class=" "><span class="title-number">30 </span><span class="title-name">Administrative tasks</span></a></li><li><a href="cha-xen-xenstore.html" class=" "><span class="title-number">31 </span><span class="title-name">XenStore: configuration database shared between domains</span></a></li><li><a href="cha-xen-ha.html" class=" "><span class="title-number">32 </span><span class="title-name">Xen as a high-availability virtualization host</span></a></li><li><a href="pv-to-fv.html" class=" "><span class="title-number">33 </span><span class="title-name">Xen: converting a paravirtual (PV) guest into a fully virtual (FV/HVM) guest</span></a></li></ol></li><li><a href="part-virt-qemu.html" class="has-children "><span class="title-number">V </span><span class="title-name">Managing virtual machines with QEMU</span></a><ol><li><a href="cha-qemu-overview.html" class=" "><span class="title-number">34 </span><span class="title-name">QEMU overview</span></a></li><li><a href="cha-qemu-host.html" class=" "><span class="title-number">35 </span><span class="title-name">Setting up a KVM VM Host Server</span></a></li><li><a href="cha-qemu-guest-inst.html" class=" "><span class="title-number">36 </span><span class="title-name">Guest installation</span></a></li><li><a href="cha-qemu-running.html" class=" "><span class="title-number">37 </span><span class="title-name">Running virtual machines with qemu-system-ARCH</span></a></li><li><a href="cha-qemu-monitor.html" class=" "><span class="title-number">38 </span><span class="title-name">Virtual machine administration using QEMU monitor</span></a></li></ol></li><li><a href="part-virt-troubleshoot.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Troubleshooting</span></a><ol><li><a href="cha-virt-help.html" class=" "><span class="title-number">39 </span><span class="title-name">Integrated help and package documentation</span></a></li><li><a href="cha-virt-logs.html" class=" "><span class="title-number">40 </span><span class="title-name">Gathering system information and logs</span></a></li></ol></li><li><a href="gloss-vt-glossary.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="app-vmdp-driver.html" class=" "><span class="title-number">A </span><span class="title-name">Virtual machine drivers</span></a></li><li><a href="app-gpu-passthru.html" class=" "><span class="title-number">B </span><span class="title-name">Configuring GPU Pass-Through for NVIDIA cards</span></a></li><li><a href="cha-xmtoxl.html" class=" "><span class="title-number">C </span><span class="title-name">XM, XL toolstacks, and the <code class="systemitem">libvirt</code> framework</span></a></li><li><a href="bk10apd.html" class=" "><span class="title-number">D </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="xen2kvm-migration" data-id-title="Xen to KVM migration guide"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP6</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">18 </span><span class="title-name">Xen to KVM migration guide</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    As the KVM virtualization solution is becoming more and more popular
    among server administrators, many of them need a path to migrate their
    existing Xen based environments to KVM. As of now, there are no mature
    tools to automatically convert Xen VMs to KVM. There is, however, a
    technical solution that helps convert Xen virtual machines to KVM. The
    following information and procedures help you to perform such a migration.
  </p><div id="id-1.12.4.12.3" data-id-title="Migration procedure not supported" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Migration procedure not supported</div><p>
      The migration procedure described in this document is not fully supported
      by SUSE. We provide it as a guidance only.
    </p></div><section class="sect1" id="x2k-v2v" data-id-title="Migration to KVM using virt-v2v"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">18.1 </span><span class="title-name">Migration to KVM using <code class="command">virt-v2v</code></span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#x2k-v2v">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      This section contains information to help you import virtual machines
      from foreign hypervisors (such as Xen) to KVM managed by <code class="systemitem">libvirt</code>.
    </p><div id="id-1.12.4.12.4.3" data-id-title="Microsoft Windows guests" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Microsoft Windows guests</div><p>
        This section is focused on converting Linux guests. Converting
        Microsoft Windows guests using <code class="command">virt-v2v</code> is the same
        as converting Linux guests, except with regard to handling the Virtual
        Machine Driver Pack (VMDP). Additional details on converting Windows
        guests with the VMDP can be found separately at
        <a class="link" href="https://documentation.suse.com/sle-vmdp/" target="_blank">Virtual
        Machine Driver Pack documentation</a>.
      </p></div><section class="sect2" id="x2k-v2v-intro" data-id-title="Introduction to virt-v2v"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.1.1 </span><span class="title-name">Introduction to <code class="command">virt-v2v</code></span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#x2k-v2v-intro">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        <code class="command">virt-v2v</code> is a command-line tool to convert
        VM Guests from a foreign hypervisor to run on KVM managed by
        <code class="systemitem">libvirt</code>. It enables paravirtualized virtio drivers in the converted
        virtual machine if possible. A list of supported operating systems and
        hypervisors follows:
      </p><div class="itemizedlist"><div class="title-container"><div class="itemizedlist-title-wrap"><div class="itemizedlist-title"><span class="title-number-name"><span class="title-name">Supported guest operating systems </span></span><a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.4.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div><ul class="itemizedlist"><li class="listitem"><p>
            SUSE Linux Enterprise Server
          </p></li><li class="listitem"><p>
            openSUSE
          </p></li><li class="listitem"><p>
            Red Hat Enterprise Linux
          </p></li><li class="listitem"><p>
            Fedora
          </p></li><li class="listitem"><p>
            Microsoft Windows Server 2003 and 2008
          </p></li></ul></div><div class="itemizedlist"><div class="title-container"><div class="itemizedlist-title-wrap"><div class="itemizedlist-title"><span class="title-number-name"><span class="title-name">Supported source hypervisor </span></span><a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.4.4.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div><ul class="itemizedlist"><li class="listitem"><p>
            Xen
          </p></li></ul></div><div class="itemizedlist"><div class="title-container"><div class="itemizedlist-title-wrap"><div class="itemizedlist-title"><span class="title-number-name"><span class="title-name">Supported target hypervisor </span></span><a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.4.4.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div><ul class="itemizedlist"><li class="listitem"><p>
            KVM (managed by <code class="systemitem">libvirt</code>)
          </p></li></ul></div></section><section class="sect2" id="x2k-v2v-install" data-id-title="Installing virt-v2v"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.1.2 </span><span class="title-name">Installing <code class="command">virt-v2v</code></span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#x2k-v2v-install">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The installation of <code class="command">virt-v2v</code> is simple:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install virt-v2v</pre></div><p>
        Remember that <code class="command">virt-v2v</code> requires <code class="systemitem">root</code>
        privileges, so you need to run it either as <code class="systemitem">root</code>, or via
        <code class="command">sudo</code>.
      </p></section><section class="sect2" id="x2k-v2v-convert" data-id-title="Converting virtual machines to run under KVM managed by libvirt"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.1.3 </span><span class="title-name">Converting virtual machines to run under KVM managed by <code class="systemitem">libvirt</code></span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#x2k-v2v-convert">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        <code class="command">virt-v2v</code> converts virtual machines from the Xen
        hypervisor to run under KVM managed by <code class="systemitem">libvirt</code>. To learn more about
        <code class="systemitem">libvirt</code> and <code class="command">virsh</code>, see
        <a class="xref" href="part-virt-libvirt.html" title="Part II. Managing virtual machines with libvirt">Part II, “Managing virtual machines with <code class="systemitem">libvirt</code>”</a>. Additionally, all
        <code class="command">virt-v2v</code> command line options are explained in the
        <code class="command">virt-v2v</code> man page (<code class="command">man 1
        virt-v2v</code>).
      </p><p>
        Before converting a virtual machine, make sure to complete the
        following steps:
      </p><div class="procedure" id="id-1.12.4.12.4.6.4" data-id-title="Preparing the environment for the conversion"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 18.1: </span><span class="title-name">Preparing the environment for the conversion </span></span><a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.4.6.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Create a new local storage pool.
          </p><p>
            <code class="command">virt-v2v</code> copies the storage of the source
            virtual machine to a local storage pool managed by <code class="systemitem">libvirt</code> (the
            original disk image remains unchanged). You can create the pool
            either with Virtual Machine Manager or <code class="command">virsh</code>. For more
            information, see <a class="xref" href="cha-libvirt-host.html#sec-libvirt-storage-vmm" title="9.2.2. Managing storage with Virtual Machine Manager">Section 9.2.2, “Managing storage with Virtual Machine Manager”</a> and
            <a class="xref" href="cha-libvirt-host.html#sec-libvirt-storage-virsh" title="9.2.1. Managing storage with virsh">Section 9.2.1, “Managing storage with <code class="command">virsh</code>”</a>.
          </p></li><li class="step"><p>
            Prepare the local network interface.
          </p><p>
            Check that the converted virtual machine can use a local network
            interface on the VM Host Server. It is normally a network bridge and if
            it is not yet defined, create it with
            <span class="guimenu">YaST</span> › <span class="guimenu">System</span> › <span class="guimenu">Network
            Settings</span> › <span class="guimenu">Add</span> › <span class="guimenu">Bridge</span>.
          </p><div id="id-1.12.4.12.4.6.4.3.3" data-id-title="Mappings of network devices" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Mappings of network devices</div><p>
              Network devices on the source Xen host can be mapped during the
              conversion process to corresponding network devices on the KVM
              target host. For example, the Xen bridge <code class="literal">br0</code>
              can be mapped to the default KVM network device. Sample mappings
              can be found in <code class="filename">/etc/virt-v2v.conf</code>. To enable
              these mappings, modify the XML rule and ensure the section is not
              commented out with
              <code class="literal">&lt;!--</code> and <code class="literal">--&gt;</code> markers.
              For example:
            </p><div class="verbatim-wrap"><pre class="screen"> &lt;network type='bridge' name='br0'&gt;
   &lt;network type='network' name='default'/&gt;
 &lt;/network&gt;</pre></div></div><div id="id-1.12.4.12.4.6.4.3.4" data-id-title="No network bridge" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: No network bridge</div><p>
              If there is no network bridge available, Virtual Machine Manager can optionally
              create it.
            </p></div></li></ol></div></div><p>
        <code class="command">virt-v2v</code> has the following basic command syntax:
      </p><div class="verbatim-wrap"><pre class="screen">virt-v2v -i <em class="replaceable">INPUT_METHOD</em> -os <em class="replaceable">STORAGE_POOL</em> <em class="replaceable">SOURCE_VM</em></pre></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.12.4.12.4.6.7.1"><span class="term">input_method</span></dt><dd><p>
              There are two input methods: <code class="literal">libvirt</code> or
              <code class="literal">libvirtxml</code>. See the
              <em class="replaceable">SOURCE_VM</em> parameter for more
              information.
            </p></dd><dt id="id-1.12.4.12.4.6.7.2"><span class="term">storage_pool</span></dt><dd><p>
              The storage pool you already prepared for the target virtual
              machine.
            </p></dd><dt id="id-1.12.4.12.4.6.7.3"><span class="term">source_vm</span></dt><dd><p>
              The source virtual machine to convert. It depends on the
              <em class="replaceable">INPUT_METHOD</em> parameter: for
              <code class="literal">libvirt</code>, specify the name of a libvirt domain.
              For <code class="literal">libvirtxml</code>, specify the path to an XML
              file containing a libvirt domain specification.
            </p></dd></dl></div><div id="id-1.12.4.12.4.6.8" data-id-title="Conversion time" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Conversion time</div><p>
          Conversion of a virtual machine takes a lot of system resources,
          mainly for copying the whole disk image for a virtual machine.
          Converting a single virtual machine typically takes up to 10
          minutes.Virtual machines using large disk images can take much
          longer.
        </p></div><section class="sect3" id="x2k-v2v-convert-xml" data-id-title="Conversion based on the libvirt XML description file"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.1.3.1 </span><span class="title-name">Conversion based on the <code class="systemitem">libvirt</code> XML description file</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#x2k-v2v-convert-xml">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          This section describes how to convert a local Xen virtual machine
          using the <code class="systemitem">libvirt</code> XML configuration file. This method is suitable
          if the host is already running the KVM hypervisor. Make sure that
          the <code class="systemitem">libvirt</code> XML file of the source virtual machine, and the
          <code class="systemitem">libvirt</code> storage pool referenced from it are available on the local
          host.
        </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
              Obtain the <code class="systemitem">libvirt</code> XML description of the source virtual
              machine.
            </p><div id="id-1.12.4.12.4.6.9.3.1.2" data-id-title="Obtaining the XML files" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Obtaining the XML files</div><p>
                To obtain the <code class="systemitem">libvirt</code> XML files of the source virtual
                machine, you must run the host OS under the Xen kernel. If
                you already rebooted the host to the KVM-enabled environment,
                reboot back to the Xen kernel, dump the <code class="systemitem">libvirt</code> XML file,
                and then reboot back to the KVM environment.
              </p></div><p>
              First identify the source virtual machine under virsh:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>virsh list
 Id    Name                           State
----------------------------------------------------
[...]
  2     sles12_xen                     running
[...]</pre></div><p>
              <code class="literal">sles12_xen</code> is the source virtual machine to
              convert. Now export its XML and save it to
              <code class="filename">sles12_xen.xml</code>:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>virsh dumpxml sles12_xen &gt; sles12_xen.xml</pre></div></li><li class="step"><p>
              Verify that all disk image paths are correct from the KVM
              host's perspective. This is not a problem when converting on one
              machine, but may require manual changes when converting using an
              XML dump from another host.
            </p><div class="verbatim-wrap"><pre class="screen">&lt;source file='/var/lib/libvirt/images/XenPool/SLES.qcow2'/&gt;</pre></div><div id="id-1.12.4.12.4.6.9.3.2.3" data-id-title="Copying images" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Copying images</div><p>
                To avoid copying an image twice, manually copy the disk image
                or images directly to the <code class="systemitem">libvirt</code> storage pool. Update the
                source file entries in the XML description file. The
                <code class="command">virt-v2v</code> process detects the existing disks
                and converts them in place.
              </p></div></li><li class="step"><p>
              Run <code class="command">virt-v2v</code> to convert to KVM virtual
              machine:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>virt-v2v sles12_xen.xml<span class="callout" id="v2v-xml">1</span> \
-i <em class="replaceable">LIBVIRTXML</em><span class="callout" id="v2v-method">2</span> \
-os <em class="replaceable">remote_host.example.com:/exported_dir</em><span class="callout" id="v2v-pool">3</span> \
--bridge <em class="replaceable">br0</em><span class="callout" id="v2v-bridge">4</span> \
-on <em class="replaceable">sles12_kvm</em><span class="callout" id="v2v-name">5</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#v2v-xml"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  The XML description of the source Xen-based virtual
                  machine.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#v2v-method"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  <code class="command">virt-v2v</code> reads the information about the
                  source virtual machine from a <code class="systemitem">libvirt</code> XML file.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#v2v-pool"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  Storage pool where the target virtual machine disk image is
                  placed. In this example, the image is placed on an NFS share
                  <code class="filename">/exported_dir</code> on the
                  <code class="literal">remote_host.example.com</code> server.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#v2v-bridge"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  The target KVM-based virtual machine uses the network
                  bridge <code class="literal">br0</code> on the host.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#v2v-name"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  The target virtual machine is renamed to
                  <code class="literal">sles12_kvm</code> to prevent name collision with
                  the existing virtual machine of the same name.
                </p></td></tr></table></div></li></ol></div></div></section><section class="sect3" id="x2k-v2v-convert-domain" data-id-title="Conversion based on the libvirt domain name"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.1.3.2 </span><span class="title-name">Conversion based on the <code class="systemitem">libvirt</code> domain name</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#x2k-v2v-convert-domain">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          This method is useful if you are still running <code class="systemitem">libvirt</code> under Xen,
          and plan to reboot to the KVM hypervisor later.
        </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
              Find the <code class="systemitem">libvirt</code> domain name of the virtual machine you want to
              convert.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>virsh list
 Id    Name                           State
----------------------------------------------------
[...]
  2     sles12_xen                     running
[...]</pre></div><p>
              <code class="literal">sles12_xen</code> is the source virtual machine to
              convert.
            </p></li><li class="step"><p>
              Run <code class="command">virt-v2v</code> to convert to KVM virtual
              machine:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>virt-v2v sles12_xen<span class="callout" id="v2v-domain">1</span> \
-i <em class="replaceable">libvirt</em><span class="callout" id="v2v-method1">2</span> \
-os <em class="replaceable">storage_pool</em><span class="callout" id="v2v-pool1">3</span> \
--network <em class="replaceable">eth0</em><span class="callout" id="v2v-net">4</span> \
-of qcow2<span class="callout" id="v2v-qcow">5</span> \
-oa sparse<span class="callout" id="v2v-sparse">6</span> \
-on <em class="replaceable">sles12_kvm</em></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#v2v-domain"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  The domain name of the Xen-based virtual machine.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#v2v-method1"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  <code class="command">virt-v2v</code> reads the information about the
                  source virtual machine directly from the active <code class="systemitem">libvirt</code>
                  connection.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#v2v-pool1"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  The target disk image is placed in a local <code class="systemitem">libvirt</code> storage
                  pool.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#v2v-net"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  All guest bridges (or networks) are connected to a locally
                  managed network.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#v2v-qcow"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  Format for the disk image of the target virtual machine.
                  Supported options are <code class="option">raw</code> or
                  <code class="option">qcow2</code>.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#v2v-sparse"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  Whether the converted guest disk space is
                  <code class="option">sparse</code> or <code class="option">preallocated</code>.
                </p></td></tr></table></div></li></ol></div></div></section><section class="sect3" id="x2k-v2v-convert-remote" data-id-title="Converting a remote Xen virtual machine"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.1.3.3 </span><span class="title-name">Converting a remote Xen virtual machine</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#x2k-v2v-convert-remote">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          This method is useful if you need to convert a Xen virtual machine
          running on a remote host. As <code class="command">virt-v2v</code> connects to
          the remote host via <code class="command">ssh</code>, ensure the SSH service is
          running on the host.
        </p><div id="id-1.12.4.12.4.6.11.3" data-id-title="Passwordless SSH access" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Passwordless SSH access</div><p>
            <code class="command">virt-v2v</code> requires a
            passwordless SSH connection to the remote host. This means a
            connection using an SSH key added to the ssh-agent. See
            <code class="command">man ssh-keygen</code> and <code class="command">man
            ssh-add</code> for more details on this. More information is
            also available at <span class="intraxref">Book “Security and Hardening Guide”, Chapter 22 “Securing network operations with OpenSSH”</span>.
          </p></div><p>
          To connect to a remote <code class="systemitem">libvirt</code> connection, construct a valid
          connection URI relevant for your remote host. In the following
          example, the remote host name is
          <code class="literal">remote_host.example.com</code>, and the user name for the
          connection is <code class="systemitem">root</code>. The connection URI then looks as follows:
        </p><div class="verbatim-wrap"><pre class="screen">xen+ssh://root@remote_host.example.com/</pre></div><p>
          For more information on <code class="systemitem">libvirt</code> connection URIs, see
          <a class="link" href="https://libvirt.org/uri.html" target="_blank">https://libvirt.org/uri.html</a>.
        </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
              Find the <code class="systemitem">libvirt</code> domain name of the remote virtual machine you
              want to convert.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>virsh -c xen+ssh://root@remote_host.example.com/ list
 Id    Name                           State
----------------------------------------------------
  1     sles12_xen                     running
[...]</pre></div><p>
              <code class="literal">sles12_xen</code> is the source virtual machine to
              convert.
            </p></li><li class="step"><p>
              The <code class="command">virt-v2v</code> command for the remote connection
              looks like this:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>virt-v2v sles12_xen \
-i <em class="replaceable">libvirt</em> \
-ic <em class="replaceable">xen+ssh://root@remote_host.example.com/</em> \
-os <em class="replaceable">local_storage_pool</em> \
--bridge <em class="replaceable">br0</em></pre></div></li></ol></div></div></section></section><section class="sect2" id="x2k-v2v-run" data-id-title="Running converted virtual machines"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.1.4 </span><span class="title-name">Running converted virtual machines</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#x2k-v2v-run">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        After <code class="command">virt-v2v</code> completes successfully, a new
        <code class="systemitem">libvirt</code> domain is created with the name specified with the
        <code class="option">-on</code> option. If you did not specify
        <code class="option">-on</code>, the same name as the source virtual machine is
        used. The new guest can be managed with standard <code class="systemitem">libvirt</code> tools, such
        as <code class="command">virsh</code> or Virtual Machine Manager.
      </p><div id="id-1.12.4.12.4.7.3" data-id-title="Rebooting the machine" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Rebooting the machine</div><p>
          If you completed the conversion under Xen as described in
          <a class="xref" href="xen2kvm-migration.html#x2k-v2v-convert-domain" title="18.1.3.2. Conversion based on the libvirt domain name">Section 18.1.3.2, “Conversion based on the <code class="systemitem">libvirt</code> domain name”</a>, you may need to reboot
          the host machine and boot with the non-Xen kernel.
        </p></div></section></section><section class="sect1" id="id-1.12.4.12.5" data-id-title="Xen to KVM manual migration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">18.2 </span><span class="title-name">Xen to KVM manual migration</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.5">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect2" id="id-1.12.4.12.5.3" data-id-title="General outline"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.1 </span><span class="title-name">General outline</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.5.3">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The preferred solution to manage virtual machines is based on
        <code class="systemitem">libvirt</code>; for more information, see
        <a class="link" href="https://libvirt.org/" target="_blank">https://libvirt.org/</a>. It has several
        advantages over the manual way of defining and running virtual
        machines—<code class="systemitem">libvirt</code> is cross-platform, supports many hypervisors,
        has secure remote management, has virtual networking, and, most of all,
        provides a unified abstract layer to manage virtual machines. Therefore
        the main focus of this article is on the <code class="systemitem">libvirt</code> solution.
      </p><p>
        Generally, the Xen to KVM migration consists of the following basic
        steps:
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Make a backup copy of the original Xen VM Guest.
          </p></li><li class="step"><p>
            Optionally, apply changes specific to paravirtualized guests.
          </p></li><li class="step"><p>
            Obtain information about the original Xen VM Guest and update it
            to KVM equivalents.
          </p></li><li class="step"><p>
            Shut down the guest on the Xen host, and run the new one under
            the KVM hypervisor.
          </p></li></ol></div></div><div id="id-1.12.4.12.5.3.5" data-id-title="No live migration" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: No live migration</div><p>
          The Xen to KVM migration cannot be done live while the source
          VM Guest is running. Before running the new KVM-ready VM Guest,
          you are advised to shut down the original Xen VM Guest.
        </p></div></section><section class="sect2" id="id-1.12.4.12.5.4" data-id-title="Back up the Xen VM Guest"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.2 </span><span class="title-name">Back up the Xen VM Guest</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.5.4">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        To back up your Xen VM Guest, follow these steps:
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Identify the relevant Xen guest you want to migrate, and remember
            its ID/name.
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh list --all
Id Name                 State
----------------------------------
 0 Domain-0             running
 1 SLES15SP3            running
[...]</pre></div></li><li class="step"><p>
            Shut down the guest. You can do this either by shutting down the
            guest OS, or with <code class="command">virsh</code>:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh shutdown SLES11SP3</pre></div></li><li class="step"><p>
            Back up its configuration to an XML file.
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh dumpxml SLES11SP3 &gt; sles11sp3.xml</pre></div></li><li class="step"><p>
            Back up its disk image file. Use the <code class="command">cp</code> or
            <code class="command">rsync</code> commands to create the backup copy.
            Remember that it is always a good idea to check the copy with the
            <code class="command">md5sum</code> command.
          </p></li><li class="step"><p>
            After the image file is backed up, you can start the guest again
            with
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh start SLES11SP3</pre></div></li></ol></div></div></section><section class="sect2" id="id-1.12.4.12.5.5" data-id-title="Changes specific to paravirtualized guests"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.3 </span><span class="title-name">Changes specific to paravirtualized guests</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.5.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Apply the following changes if you are migrating a paravirtualized
        Xen guest. You can do it either on the running guest, or on the
        stopped guest using <code class="literal">guestfs-tools</code>.
        
      </p><div id="id-1.12.4.12.5.5.3" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
          After applying the changes described in this section, the image file
          related to the migrated VM Guest is not usable under Xen anymore.
        </p></div><section class="sect3" id="id-1.12.4.12.5.5.4" data-id-title="Install the default kernel"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.2.3.1 </span><span class="title-name">Install the default kernel</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.5.5.4">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><div id="id-1.12.4.12.5.5.4.2" data-id-title="No booting" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: No booting</div><p>
            After installing the default kernel, the system fails to boot the
            Xen guest.
          </p></div><p>
          Before cloning the Xen guest disk image for use under the KVM
          hypervisor, make sure it is bootable <span class="emphasis"><em>without</em></span> the
          Xen hypervisor. This is crucial for paravirtualized Xen guests as
          they normally contain a special Xen kernel, and often do not have a
          complete GRUB 2 boot loader installed.
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              For SLES 11, update the
              <code class="filename">/etc/sysconfig/kernel</code> file. Change the
              <code class="literal">INITRD_MODULES</code> parameter by removing all Xen
              drivers and replacing them with virtio drivers. Replace
            </p><div class="verbatim-wrap"><pre class="screen">INITRD_MODULES="xenblk xennet"</pre></div><p>
              with
            </p><div class="verbatim-wrap"><pre class="screen">INITRD_MODULES="virtio_blk virtio_pci virtio_net virtio_balloon"</pre></div><p>
              For SLES 12, 15 and openSUSE, search for <code class="literal">xenblk xennet</code> in
              <code class="filename">/etc/dracut.conf.d/*.conf</code> and replace them
              with <code class="literal">virtio_blk virtio_pci virtio_net
              virtio_balloon</code>
            </p></li><li class="listitem"><p>
              Paravirtualized Xen guests run a specific Xen kernel. To run
              the guest under KVM, you need to install the default kernel.
            </p><div id="id-1.12.4.12.5.5.4.4.2.2" data-id-title="Default kernel is already installed" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Default kernel is already installed</div><p>
                You do not need to install the default kernel for a fully
                virtualized guest, as it is already installed.
              </p></div><p>
              Enter <code class="command">rpm -q kernel-default</code> on the Xen guest
              to find out whether the default kernel is installed. If not,
              install it with <code class="command">zypper in kernel-default</code>.
            </p><p>
              The kernel we are going to use to boot the guest under KVM must
              have <span class="emphasis"><em>virtio</em></span> (paravirtualized) drivers
              available. Run the following command to find out. Do not forget
              to replace <code class="literal">6.4.0-150600.9</code> with your kernel version:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> sudo find /lib/modules/6.4.0-150600.9-default/kernel/drivers/ -name virtio*
/lib/modules/6.4.0-150600.9-default/kernel/drivers/block/virtio_blk.ko.zst
/lib/modules/6.4.0-150600.9-default/kernel/drivers/bluetooth/virtio_bt.ko.zst
/lib/modules/6.4.0-150600.9-default/kernel/drivers/char/hw_random/virtio-rng.ko.zst
/lib/modules/6.4.0-150600.9-default/kernel/drivers/crypto/virtio
/lib/modules/6.4.0-150600.9/kernel/drivers/block/virtio_blk.ko
...</pre></div></li><li class="listitem"><p>
              Update <code class="filename">/etc/fstab</code>. Change any storage
              devices from <code class="literal">xvda</code> to <code class="literal">vda</code>.
            </p></li><li class="listitem"><p>
              Update the boot loader configuration. Enter <code class="command">rpm -q
              grub2</code> on the Xen guest to find out whether GRUB 2 is
              already installed. If not, install it with <code class="command">zypper in
              grub2</code>.
            </p><p>
              Now make the newly installed default kernel the default for
              booting the OS. Also remove/update the kernel command line
              options that may refer to Xen-specific devices. You can do it
              either with YaST
              (<span class="guimenu">System</span> › <span class="guimenu">Boot
              Loader</span>), or manually:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                  Find the preferred Linux boot menu entry by listing them all:
                </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>cat /boot/grub2/grub.cfg | grep 'menuentry '</pre></div><p>
                  Remember the order number (counted from zero) of the one you
                  newly installed.
                </p></li><li class="listitem"><p>
                  Set it as the default boot menu entry:
                </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> grub2-set-default <em class="replaceable">N</em></pre></div><p>
                  Replace <em class="replaceable">N</em> with the number of the
                  boot menu entry you previously discovered.
                </p></li><li class="listitem"><p>
                  Open <code class="filename">/etc/default/grub</code>for editing, and
                  look for the <code class="option">GRUB_CMDLINE_LINUX_DEFAULT</code> and
                  <code class="option">GRUB_CMDLINE_LINUX_RECOVERY</code> options. Remove
                  or update any reference to Xen-specific devices. In the
                  following example, you can replace
                </p><div class="verbatim-wrap"><pre class="screen">root=/dev/xvda1 disk=/dev/xvda console=xvc</pre></div><p>
                  with
                </p><div class="verbatim-wrap"><pre class="screen">root=/dev/vda1 disk=/dev/vda</pre></div><p>
                  Do not forget to remove all references to
                  <code class="literal">xvc</code>-type consoles (such as
                  <code class="literal">xvc0</code>).
                </p></li></ul></div></li><li class="listitem"><p>
              Update <code class="filename">device.map</code> in either the
              <code class="filename">/boot/grub2</code> or
              <code class="filename">/boot/grub2-efi</code> directory, whichever that VM
              uses. Change any storage devices from <code class="literal">xvda</code> to
              <code class="literal">vda</code>.
            </p></li><li class="listitem"><p>
              To import new default settings, run
            </p><div class="verbatim-wrap"><pre class="screen">grub2-mkconfig -o /boot/grub2/grub.cfg</pre></div></li></ol></div></section><section class="sect3" id="id-1.12.4.12.5.5.5" data-id-title="Update the guest for boot under KVM"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.2.3.2 </span><span class="title-name">Update the guest for boot under KVM</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.5.5.5">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              Update the system to use the default serial console. List the
              configured consoles, and remove symbolic links to
              <code class="literal">xvc?</code> ones.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ls -l /etc/systemd/system/getty.target.wants/
getty@tty1.service -&gt; /usr/lib/systemd/system/getty@.service
getty@xvc0.service -&gt; /usr/lib/systemd/system/getty@xvc0.service
getty@xvc1.service -&gt; /usr/lib/systemd/system/getty@xvc1.service

# rm /etc/systemd/system/getty.target.wants/getty@xvc?.service</pre></div></li><li class="listitem"><p>
              Update the <code class="filename">/etc/securetty</code> file. Replace
              <code class="literal">xvc0</code> with <code class="literal">ttyS0</code>.
            </p></li></ol></div></section></section><section class="sect2" id="id-1.12.4.12.5.6" data-id-title="Update the Xen VM Guest configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.4 </span><span class="title-name">Update the Xen VM Guest configuration</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.5.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        This section describes how to export the configuration of the original
        Xen VM Guest, and what particular changes to apply to it so it can
        be imported as a KVM guest into <code class="systemitem">libvirt</code>.
      </p><section class="sect3" id="id-1.12.4.12.5.6.3" data-id-title="Export the Xen VM Guest configuration"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.2.4.1 </span><span class="title-name">Export the Xen VM Guest configuration</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.5.6.3">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          First export the configuration of the guest and save it to a file.
          For example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh dumpxml SLES11SP3
&lt;domain type='xen'&gt;
  &lt;name&gt;SLES11SP3&lt;/name&gt;
  &lt;uuid&gt;fa9ea4d7-8f95-30c0-bce9-9e58ffcabeb2&lt;/uuid&gt;
  &lt;memory&gt;524288&lt;/memory&gt;
  &lt;currentMemory&gt;524288&lt;/currentMemory&gt;
  &lt;vcpu&gt;1&lt;/vcpu&gt;
  &lt;bootloader&gt;/usr/bin/pygrub&lt;/bootloader&gt;
  &lt;os&gt;
    &lt;type&gt;linux&lt;/type&gt;
  &lt;/os&gt;
  &lt;clock offset='utc'/&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;restart&lt;/on_crash&gt;
  &lt;devices&gt;
    &lt;emulator&gt;/usr/lib/xen/bin/qemu-dm&lt;/emulator&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='file'/&gt;
      &lt;source file='/var/lib/libvirt/images/SLES_11_SP2_JeOS.x86_64-0.0.2_para.raw'/&gt;
      &lt;target dev='xvda' bus='xen'/&gt;
    &lt;/disk&gt;
    &lt;interface type='bridge'&gt;
      &lt;mac address='00:16:3e:2d:91:c3'/&gt;
      &lt;source bridge='br0'/&gt;
      &lt;script path='vif-bridge'/&gt;
    &lt;/interface&gt;
    &lt;console type='pty'&gt;
      &lt;target type='xen' port='0'/&gt;
    &lt;/console&gt;
    &lt;input type='mouse' bus='xen'/&gt;
    &lt;graphics type='vnc' port='-1' autoport='yes' keymap='en-us'/&gt;
  &lt;/devices&gt;
&lt;/domain&gt;</pre></div><p>
          You can find detailed information on the libvirt XML format for
          VM Guest description at
          <a class="link" href="https://libvirt.org/formatdomain.html" target="_blank">https://libvirt.org/formatdomain.html</a>.
        </p></section><section class="sect3" id="id-1.12.4.12.5.6.4" data-id-title="General changes to the guest configuration"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.2.4.2 </span><span class="title-name">General changes to the guest configuration</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.5.6.4">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          You need to make a few general changes to the exported Xen guest
          XML configuration to run it under the KVM hypervisor. The following
          applies to both fully virtualized and paravirtualized guests. The
          following XML elements are just an example and do not need to be in
          your specific configuration.
        </p><div id="id-1.12.4.12.5.6.4.3" data-id-title="Conventions used" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Conventions used</div><p>
            To refer to a node in the XML configuration file, an XPath syntax
            is used throughout this document. For example, to refer to a
            <code class="literal">&lt;name&gt;</code> inside the
            <code class="literal">&lt;domain&gt;</code> tag
          </p><div class="verbatim-wrap"><pre class="screen">&lt;domain&gt;
  &lt;name&gt;sles11sp3&lt;/name&gt;
&lt;/domain&gt;</pre></div><p>
            an XPath equivalent <code class="literal">/domain/name</code> is used.
          </p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              Change the <code class="literal">type</code> attribute of the
              <code class="literal">/domain</code> element from <code class="literal">xen</code>to
              <code class="literal">kvm</code>.
            </p></li><li class="listitem"><p>
              Remove the <code class="literal">/domain/bootloader</code> element section.
            </p></li><li class="listitem"><p>
              Remove the <code class="literal">/domain/bootloader_args</code> element
              section.
            </p></li><li class="listitem"><p>
              Change the <code class="literal">/domain/os/type</code> element value from
              <code class="literal">linux</code> to <code class="literal">hvm</code>.
            </p></li><li class="listitem"><p>
              Add <code class="literal">&lt;boot dev="hd"/&gt;</code> under the
              <code class="literal">/domain/os</code> element.
            </p></li><li class="listitem"><p>
              Add the <code class="literal">arch</code> attribute to the
              <code class="literal">/domain/os/type</code> element. Acceptable values are
              <code class="literal">arch=”x86_64”</code> or
              <code class="literal">arch=”i686”</code>
            </p></li><li class="listitem"><p>
              Change the <code class="literal">/domain/devices/emulator</code> element
              from <code class="literal">/usr/lib/xen/bin/qemu-dm'</code> to
              <code class="literal">/usr/bin/qemu-kvm</code>.
            </p></li><li class="listitem"><p>
              For each disk associated with the paravirtualized (PV) guest,
              change the following:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                  Change the <code class="literal">name</code> attribute of the
                  <code class="literal">/domain/devices/disk/driver</code> element from
                  <code class="literal">file</code> to <code class="literal">qemu</code>, and add a
                  <code class="literal">type</code> attribute for the disk type. For
                  example, valid options include <code class="literal">raw</code> and
                  <code class="literal">qcow2</code>.
                </p></li><li class="listitem"><p>
                  Change the <code class="literal">dev</code> attribute of the
                  <code class="literal">/domain/devices/disk/target</code> element from
                  <code class="literal">xvda</code> to <code class="literal">vda</code>.
                </p></li><li class="listitem"><p>
                  Change the <code class="literal">bus</code> attribute of the
                  <code class="literal">/domain/devices/disk/target</code> element from
                  <code class="literal">xen</code> to <code class="literal">virtio</code>.
                </p></li></ul></div></li><li class="listitem"><p>
              For each network interface card, make the following changes:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                  If there is a <code class="literal">model</code> defined in
                  <code class="literal">/domain/devices/interface</code>, change its
                  <code class="literal">type</code> attribute value to
                  <code class="literal">virtio</code>
                </p><div class="verbatim-wrap"><pre class="screen">&lt;model type=”virtio”&gt;</pre></div></li><li class="listitem"><p>
                  Delete all
                  <code class="literal">/domain/devices/interface/script</code> sections.
                </p></li><li class="listitem"><p>
                  Delete all
                  <code class="literal">/domain/devices/interface/target</code> elements
                  if the <code class="literal">dev</code> attribute starts with
                  <code class="literal">vif</code> or <code class="literal">vnet</code> or
                  <code class="literal">veth</code>. If using a custom network then
                  change the <code class="literal">dev</code> value to that target.
                </p></li></ul></div></li><li class="listitem"><p>
              Remove the <code class="literal">/domain/devices/console</code> element
              section if it exists.
            </p></li><li class="listitem"><p>
              Remove the <code class="literal">/domain/devices/serial</code> element
              section if it exists.
            </p></li><li class="listitem"><p>
              Change the <code class="literal">bus</code> attribute on the
              <code class="literal">/domain/devices/input</code> element from
              <code class="literal">xen</code> to <code class="literal">ps2</code>.
            </p></li><li class="listitem"><p>
              Add the following element for memory ballooning features under
              the <code class="literal">/domain/devices</code> element.
            </p><div class="verbatim-wrap"><pre class="screen">&lt;memballoon model="virtio"/&gt;</pre></div></li></ol></div><div id="id-1.12.4.12.5.6.4.5" data-id-title="Device name" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Device name</div><p>
            <code class="literal">&lt;target dev='hda' bus='ide'/&gt;</code> controls the
            device under which the disk is exposed to the guest OS. The
            <code class="literal">dev</code> attribute indicates the
            <span class="quote">“<span class="quote">logical</span>”</span> device name. The actual device name
            specified is not guaranteed to map to the device name in the guest
            OS. Therefore you may need to change the disk mapping on the boot
            loader command line. For example, if the boot loader expects a root
            disk to be <code class="literal">hda2</code> but KVM still sees it as
            <code class="literal">sda2</code>, change the boot loader command line from
          </p><div class="verbatim-wrap"><pre class="screen">[...] root=/dev/hda2 resume=/dev/hda1 [...]</pre></div><p>
            to
          </p><div class="verbatim-wrap"><pre class="screen">[...] root=/dev/sda2 resume=/dev/sda1 [...]</pre></div><p>
            For paravirtualized <code class="literal">xvda</code> devices, change it to:
          </p><div class="verbatim-wrap"><pre class="screen">[...] root=/dev/vda2 resume=/dev/vda1 [...]</pre></div><p>
            Otherwise the VM Guest refuses to boot in the KVM environment.
          </p></div></section><section class="sect3" id="id-1.12.4.12.5.6.5" data-id-title="The target KVM guest configuration"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.2.4.3 </span><span class="title-name">The target KVM guest configuration</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.5.6.5">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          After having applied all the modifications mentioned above, you end
          up with the following configuration for your KVM guest:
        </p><div class="verbatim-wrap"><pre class="screen">&lt;domain type='kvm'&gt;
  &lt;name&gt;SLES11SP3&lt;/name&gt;
  &lt;uuid&gt;fa9ea4d7-8f95-30c0-bce9-9e58ffcabeb2&lt;/uuid&gt;
  &lt;memory&gt;524288&lt;/memory&gt;
  &lt;currentMemory&gt;524288&lt;/currentMemory&gt;
  &lt;vcpu cpuset='0-3'&gt;1&lt;/vcpu&gt;
  &lt;os&gt;
    &lt;type arch=”x86_64”&gt;hvm&lt;/type&gt;
    &lt;boot dev="hd"/&gt;
  &lt;/os&gt;
  &lt;clock offset='utc'/&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;restart&lt;/on_crash&gt;
  &lt;devices&gt;
    &lt;emulator&gt;/usr/bin/qemu-kvm&lt;/emulator&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type="raw"/&gt;
      &lt;source file='/var/lib/libvirt/images/SLES_11_SP2_JeOS.x86_64-0.0.2_para.raw'/&gt;
      &lt;target dev='vda' bus='virtio'/&gt;
    &lt;/disk&gt;
    &lt;interface type='bridge'&gt;
      &lt;mac address='00:16:3e:2d:91:c3'/&gt;
      &lt;source bridge='br0'/&gt;
    &lt;/interface&gt;
    &lt;input type='mouse' bus='usb'/&gt;
    &lt;graphics type='vnc' port='5900' autoport='yes' keymap='en-us'/&gt;
    &lt;memballoon model="virtio"/&gt;
  &lt;/devices&gt;
&lt;/domain&gt;</pre></div><p>
          Save the configuration to a file in your home directory, as
          <code class="filename">SLES11SP3.xml</code>, for example. It gets copied to
          the default <code class="filename">/etc/libvirt/qemu</code> directory after
          the import.
        </p></section></section><section class="sect2" id="id-1.12.4.12.5.7" data-id-title="Migrate the VM Guest"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.5 </span><span class="title-name">Migrate the VM Guest</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.5.7">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        After you updated the VM Guest configuration, and applied necessary
        changes to the guest OS, shut down the original Xen guest, and run
        its clone under the KVM hypervisor.
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Shut down the guest on the Xen host by running <code class="command">shutdown
            -h now</code> as <code class="systemitem">root</code> from the console.
          </p></li><li class="step"><p>
            Copy the disk images associated with the VM Guest if needed. A
            default configuration requires the Xen disk files to be copied
            from <code class="filename">/var/lib/xen/images</code> to
            <code class="filename">/var/lib/kvm/images</code>. The
            <code class="filename">/var/lib/kvm/images</code> directory may need to be
            created (as <code class="systemitem">root</code>) if you have not previously created a
            VM Guest.
          </p></li><li class="step"><p>
            Create the new domain, and register it with <code class="systemitem">libvirt</code>:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh define SLES11SP3.xml
 Domain SLES11SP3 defined from SLES11SP3.xml</pre></div></li><li class="step"><p>
            Verify that the new guest is seen in the KVM configuration:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>virsh list –all</pre></div></li><li class="step"><p>
            After the domain is created, you can start it:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh start SLES11SP3
 Domain SLES11SP3 started</pre></div></li></ol></div></div></section></section><section class="sect1" id="id-1.12.4.12.6" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">18.3 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="xen2kvm-migration.html#id-1.12.4.12.6">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen2kvm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      For more information on libvirt, see
      <a class="link" href="https://libvirt.org" target="_blank">https://libvirt.org</a>.
    </p><p>
      You can find more details on the <code class="systemitem">libvirt</code> XML format at
      <a class="link" href="https://libvirt.org/formatdomain.html" target="_blank">https://libvirt.org/formatdomain.html</a>.
    </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="sec-libvirt-admin-migrate.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 17 </span>Migrating VM Guests</span></a> </div><div><a class="pagination-link next" href="part-virt-common.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Part III </span>Hypervisor-independent features</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="xen2kvm-migration.html#x2k-v2v"><span class="title-number">18.1 </span><span class="title-name">Migration to KVM using <code class="command">virt-v2v</code></span></a></span></li><li><span class="sect1"><a href="xen2kvm-migration.html#id-1.12.4.12.5"><span class="title-number">18.2 </span><span class="title-name">Xen to KVM manual migration</span></a></span></li><li><span class="sect1"><a href="xen2kvm-migration.html#id-1.12.4.12.6"><span class="title-number">18.3 </span><span class="title-name">More information</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>