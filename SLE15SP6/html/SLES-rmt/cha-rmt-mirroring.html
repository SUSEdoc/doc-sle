<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLES 15 SP6 | Repository Mirroring Tool Guide | Mirroring repositories on the RMT server</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Mirroring repositories on the RMT server | SLES 15 SP6"/>
<meta name="description" content="You can mirror the installation and update repositories on the RMT server. This way, you do not need to download updates on each machine, which saves…"/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="15 SP6"/>
<meta name="book-title" content="Repository Mirroring Tool Guide"/>
<meta name="chapter-title" content="Chapter 4. Mirroring repositories on the RMT server"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="taroth@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Server 15 SP6"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Repository Mirroring Tool Guide"/>
<meta property="og:description" content="Use RMT, a proxy system for SUSE Customer Center"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Repository Mirroring Tool Guide"/>
<meta name="twitter:description" content="Use RMT, a proxy system for SUSE Customer Center"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Mirroring repositories on the RMT server",
  
    "description": "Mirroring repositories on the RMT server",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-06-26T00:00+02:00",
      
    "datePublished": "2024-06-26T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-rmt-migrate.html" title="Chapter 3. Migrate from SMT to RMT"/><link rel="next" href="cha-rmt-client.html" title="Chapter 5. Configuring clients to use RMT"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/rmt_mirroring.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">RMT Guide</a><span> / </span><a class="crumb" href="cha-rmt-mirroring.html">Mirroring repositories on the RMT server</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">RMT Guide</div><ol><li><a href="rmt-preface.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="rmt-overview.html" class=" "><span class="title-number">1 </span><span class="title-name">Overview</span></a></li><li><a href="cha-rmt-installation.html" class=" "><span class="title-number">2 </span><span class="title-name">RMT installation and configuration</span></a></li><li><a href="cha-rmt-migrate.html" class=" "><span class="title-number">3 </span><span class="title-name">Migrate from SMT to RMT</span></a></li><li><a href="cha-rmt-mirroring.html" class=" you-are-here"><span class="title-number">4 </span><span class="title-name">Mirroring repositories on the RMT server</span></a></li><li><a href="cha-rmt-client.html" class=" "><span class="title-number">5 </span><span class="title-name">Configuring clients to use RMT</span></a></li><li><a href="cha-rmt-tools.html" class=" "><span class="title-number">6 </span><span class="title-name">RMT tools and configuration files</span></a></li><li><a href="cha-rmt-backup.html" class=" "><span class="title-number">7 </span><span class="title-name">Backing up an RMT server</span></a></li><li><a href="cha-manage-certificates.html" class=" "><span class="title-number">8 </span><span class="title-name">Managing TLS/SSL certificates</span></a></li><li><a href="rmt-public-cloud.html" class=" "><span class="title-number">9 </span><span class="title-name">Deploying a SUSE Linux Enterprise Server instance to support RMT in the public cloud</span></a></li><li><a href="bk08apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-rmt-mirroring" data-id-title="Mirroring repositories on the RMT server"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP6</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">4 </span><span class="title-name">Mirroring repositories on the RMT server</span></span> <a title="Permalink" class="permalink" href="cha-rmt-mirroring.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rmt_mirroring.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can mirror the installation and update repositories on the RMT
    server. This way, you do not need to download updates on each machine,
    which saves time and capacity.
  </p><p>
    In its default configuration, RMT mirrors enabled product repositories
    automatically once every night.
  </p><p>
    By default, the mirrored repositories are stored in
    <code class="filename">/var/lib/rmt/public/repo</code>.
  </p><div id="id-1.10.6.6" data-id-title="Change the default location of the mirrored repositories" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Change the default location of the mirrored repositories</div><p>
      To change the default location of the mirrored repositories, point the
      <code class="filename">/usr/share/rmt/public/repo</code> symbolic link to the
      desired directory. This can be done using the command:
    </p><p>
      <code class="command">ln -sfn <em class="replaceable">TARGET</em>
      /usr/share/rmt/public/repo</code>
    </p><p>
      (Replace <code class="literal">TARGET</code> with the desired destination). Make
      sure that the target has read and write permissions for the
      <code class="literal">rmt</code> user and <code class="literal">nginx</code> group.
    </p></div><p>
    When enabled repositories are fully mirrored, you can register your client
    systems against RMT by running <code class="command">SUSEConnect --url
    https://<em class="replaceable">RMT_HOSTNAME</em></code> on the client
    machine. After successful registration, the repositories from the RMT
    server are used by Zypper on the client machine.
  </p><div id="id-1.10.6.8" data-id-title="SUSE Linux Enterprise Server 11 clients" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: SUSE Linux Enterprise Server 11 clients</div><p>
      RMT does not support clients with SUSE Linux Enterprise Server versions 11 and older.
    </p></div><section class="sect1" id="sec-rmt-mirroring-credentials" data-id-title="Mirroring credentials"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.1 </span><span class="title-name">Mirroring credentials</span></span> <a title="Permalink" class="permalink" href="cha-rmt-mirroring.html#sec-rmt-mirroring-credentials">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rmt_mirroring.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      You need organization credentials to create a local mirror of
       the SUSE Linux Enterprise repositories. You can obtain the credentials from SUSE Customer Center.
    </p><p>
      To get the credentials from SUSE Customer Center, follow these steps:
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
          Visit SUSE Customer Center at <a class="link" href="https://scc.suse.com" target="_blank">https://scc.suse.com</a> and log in.
        </p></li><li class="step"><p>
          If you are a member of multiple organizations, select the
          organization you want to work with from the sidebar on the left.
        </p></li><li class="step"><p>
          Select <span class="guimenu">Proxies</span> in the top menu.
        </p></li><li class="step"><p>
          The credentials are displayed in the top right corner.
        </p></li><li class="step"><p>
          To see the password, click the <span class="inlinemediaobject"><a href="images/scc_eye_icon.png"><img src="images/scc_eye_icon.png" width="14" alt="Eye icon" title="Eye icon"/></a></span> icon.
        </p></li></ol></div></div><p>
      The obtained credentials should be set with the YaST RMT Server
      Configuration module or added directly to the
      <code class="filename">/etc/rmt.conf</code> file. For more information about the
      <code class="filename">/etc/rmt.conf</code> file, see
      <a class="xref" href="cha-rmt-tools.html#sec-rmt-config-rmtconf" title="6.3.1. /etc/rmt.conf">Section 6.3.1, “/etc/rmt.conf”</a>.
    </p></section><section class="sect1" id="sec-rmt-mirroring-synchronization" data-id-title="Synchronizing repository metadata"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.2 </span><span class="title-name">Synchronizing repository metadata</span></span> <a title="Permalink" class="permalink" href="cha-rmt-mirroring.html#sec-rmt-mirroring-synchronization">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rmt_mirroring.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The local RMT database needs to be updated periodically with the
      information downloaded from SUSE Customer Center. This includes information about
      available products and repositories.
    </p><p>
      The synchronization is activated by the <code class="systemitem">systemd</code> timer
      <code class="literal">rmt-server-sync.timer</code>. To view its status, for
      example, the next running time, use <code class="command">systemctl status</code>.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl status rmt-server-sync.timer</code>
● rmt-server-sync.timer - RMT Sync timer
   Loaded: loaded (/usr/lib/systemd/system/rmt-server-sync.timer; enabled; vendor preset: disabled)
   Active: active (waiting) since Fri 2018-06-22 04:22:34 EDT; 2h 34min ago
  Trigger: Sat 2018-06-23 03:53:00 EDT; 20h left

Jun 22 04:22:34 d31 systemd[1]: Started RMT Sync timer.</pre></div><p>
      If the timer is not enabled or started, start it manually.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl enable --now rmt-server-sync.timer</code></pre></div><p>
      To update the RMT database manually, use the <code class="command">rmt-cli
      sync</code> command. For details, see
      <a class="xref" href="cha-rmt-tools.html#sec-rmt-tools-rmt-cli-sync" title="6.1.2. sync">Section 6.1.2, “<code class="command">sync</code>”</a>.
    </p></section><section class="sect1" id="sec-rmt-mirroring-mirroring" data-id-title="Mirroring packages"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.3 </span><span class="title-name">Mirroring packages</span></span> <a title="Permalink" class="permalink" href="cha-rmt-mirroring.html#sec-rmt-mirroring-mirroring">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rmt_mirroring.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Packages for enabled repositories are mirrored on your RMT server.
      Packages are downloaded periodically once a day. But the download can
      also be triggered manually at any time.
    </p><p>
      The periodic mirroring is activated by the <code class="systemitem">systemd</code> timer
      <code class="literal">rmt-server-mirror.timer</code>. To show its status, for
      example, the next running time, use <code class="command">systemctl status</code>.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">systemctl status rmt-server-mirror.timer</code>
● rmt-server-mirror.timer - RMT Mirror timer
   Loaded: loaded (/usr/lib/systemd/system/rmt-server-mirror.timer; enabled; vendor preset: disabled)
   Active: active (waiting) since Fri 2018-06-22 04:22:34 EDT; 2h 34min ago
  Trigger: Sat 2018-06-23 02:17:57 EDT; 19h left

Jun 22 04:22:34 d31 systemd[1]: Started RMT Mirror timer.</pre></div><p>
      If the timer is not enabled or started, start it manually.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl enable --now rmt-server-mirror.timer</code></pre></div><p>
      To update the mirrored packages manually, use the <code class="command">rmt-cli
      mirror</code> command. For details, see
      <a class="xref" href="cha-rmt-tools.html#sec-rmt-tools-rmt-cli-mirror" title="6.1.6. mirror">Section 6.1.6, “<code class="command">mirror</code>”</a>.
    </p></section><section class="sect1" id="sec-rmt-mirroring-enable-disable" data-id-title="Enabling and disabling mirroring of repositories"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.4 </span><span class="title-name">Enabling and disabling mirroring of repositories</span></span> <a title="Permalink" class="permalink" href="cha-rmt-mirroring.html#sec-rmt-mirroring-enable-disable">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rmt_mirroring.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      You can enable or disable the mirroring of repositories individually or
      by product. You can specify one or more repositories or products at once.
      When repositories are enabled, their packages are downloaded and updated
      during the mirroring process. To enable or disable mirroring of
      repositories, you either need the product string or ID, or the repository
      name or ID. Enabling or disabling a product is desired, because this
      automatically enables or disables all repositories associated with the
      product.
    </p><section class="sect2" id="sec-rmt-mirroring-enable-disable-product" data-id-title="Using products"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.4.1 </span><span class="title-name">Using products</span></span> <a title="Permalink" class="permalink" href="cha-rmt-mirroring.html#sec-rmt-mirroring-enable-disable-product">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rmt_mirroring.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        To enable or disable all repositories of a product, use the
        <code class="command">rmt-cli products enable
        <em class="replaceable">ID</em></code> and <code class="command">rmt-cli products
        disable <em class="replaceable">ID</em></code> commands. To retrieve
        an ID for an enabled product, use the <code class="command">rmt-cli products
        list</code> command. To get the ID of a disabled
        product that is still available, run the <code class="command">rmt-cli products list --all</code>
        command.
      </p><p>
        Example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">rmt-cli products list --all</code>
+------+----------------------+---------+--------+--------------+---------------
| ID   | Product              | Version | Arch   | Mirror?      | Last mirrored
+------+----------------------+---------+--------+--------------+---------------
[...]
| 1743 | SUSE Package Hub     | 15      | x86_64 | Don't Mirror |
|      | PackageHub/15/x86_64 |         |        |              |
[...]

<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">rmt-cli products enable 1743</code>
Found product by target 1743: SUSE Package Hub 15 x86_64.
Enabling SUSE Package Hub 15 x86_64:
  SUSE Package Hub 15 x86_64:
    Enabled repository SLE-Module-Packagehub-Subpackages15-Pool.
    Enabled repository SLE-Module-Packagehub-Subpackages15-Updates.
    Enabled repository SUSE-PackageHub-15-Pool.
    Enabled repository SUSE-PackageHub-15-Standard-Pool..

<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">rmt-cli products disable 1743</code>
Found product by target 1743: SUSE Package Hub 15 x86_64.
Disabling SUSE Package Hub 15 x86_64:
  SUSE Package Hub 15 x86_64:
    Disabled repository SLE-Module-Packagehub-Subpackages15-Pool.
    Disabled repository SLE-Module-Packagehub-Subpackages15-Updates.
    Disabled repository SUSE-PackageHub-15-Pool.
    Disabled repository SUSE-PackageHub-15-Standard-Pool.

 To clean up downloaded files, run 'rmt-cli repos clean'</pre></div><div id="id-1.10.6.12.3.5" data-id-title="Enabling and disabling multiple products at once" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Enabling and disabling multiple products at once</div><p>
          To enable or disable multiple products at once, specify a
          space-delimited list of their IDs or product strings, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">rmt-cli products enable 1743 SLES/15/x86_64 SLES/12</code>
Found product by target 1743: SUSE Package Hub 15 x86_64.
Enabling SUSE Package Hub 15 x86_64:
  SUSE Package Hub 15 x86_64:
    Enabled repository SLE-Module-Packagehub-Subpackages15-Pool.
    Enabled repository SLE-Module-Packagehub-Subpackages15-Updates.
    Enabled repository SUSE-PackageHub-15-Pool.
    Enabled repository SUSE-PackageHub-15-Standard-Pool.
Found product by target SLES/15/x86_64: SUSE Linux Enterprise Server 15 x86_64.
Enabling SUSE Linux Enterprise Server 15 x86_64:
  SUSE Linux Enterprise Server 15 x86_64:
    Enabled repository SLE-Product-SLES15-Pool.
    Enabled repository SLE-Product-SLES15-Updates.
    Enabled repository SLE15-Installer-Updates.
  Basesystem Module 15 x86_64:
    Enabled repository SLE-Module-Basesystem15-Pool.
    Enabled repository SLE-Module-Basesystem15-Updates.
  Server Applications Module 15 x86_64:
    Enabled repository SLE-Module-Server-Applications15-Pool.
    Enabled repository SLE-Module-Server-Applications15-Updates.
Found product by target SLES/12: SUSE Linux Enterprise Server 12 x86_64.
Enabling SUSE Linux Enterprise Server 12 x86_64:
  SUSE Linux Enterprise Server 12 x86_64:
    Enabled repository SLES12-Pool.
    Enabled repository SLES12-Updates.</pre></div></div></section><section class="sect2" id="sec-rmt-mirroring-enable-disable-repository" data-id-title="Using repositories"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.4.2 </span><span class="title-name">Using repositories</span></span> <a title="Permalink" class="permalink" href="cha-rmt-mirroring.html#sec-rmt-mirroring-enable-disable-repository">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rmt_mirroring.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        To enable or disable mirroring of specific repositories, use the
        <code class="command">rmt-cli repos enable <em class="replaceable">ID</em></code>
        and <code class="command">rmt-cli repos disable
        <em class="replaceable">ID</em></code> commands. To retrieve an ID for
        an enabled repository, use the <code class="command">rmt-cli repos
        list</code>command. If you need to get the ID of a disabled
        but accessible repository, execute the command
        <code class="command">rmt-cli repos list --all</code>.
      </p><p>
        Example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">rmt-cli repos list --all</code>
+--------+-------------------------+-------------------------------------------+
| ID     | Name                    | Description                               |
+--------+-------------------------+-------------------------------------------+
[...]
| 3061   | SUSE-PackageHub-15-Pool | SUSE-PackageHub-15-Pool for sle-15-x86_64 |
[...]
+--------+-------------------------+-------------------------------------------+

<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">rmt-cli repos enable 3061</code>
Repository by ID 3061 successfully enabled.

<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">rmt-cli repos disable 3061</code>
Repository by ID 3061 successfully disabled.

To clean up downloaded files, please run 'rmt-cli repos clean'</pre></div><div id="id-1.10.6.12.4.5" data-id-title="Enabling and disabling multiple repositories at once" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Enabling and disabling multiple repositories at once</div><p>
          To enable or disable multiple repositories at once, specify a
          space-delimited list of their IDs, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">rmt-cli repos enable 2526 3263</code>
Repository by ID 2526 successfully enabled.
Repository by ID 3263 successfully enabled.

<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">rmt-cli repos disable 2526 3263</code>
Repository by ID 2526 successfully disabled.
Repository by ID 3263 successfully disabled.

To clean up downloaded files, run 'rmt-cli repos clean'</pre></div></div></section></section><section class="sect1" id="sec-rmt-mirroring-delete" data-id-title="Deleting mirrored data"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.5 </span><span class="title-name">Deleting mirrored data</span></span> <a title="Permalink" class="permalink" href="cha-rmt-mirroring.html#sec-rmt-mirroring-delete">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rmt_mirroring.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      After you disable the mirroring of a repository or product as described
      in <a class="xref" href="cha-rmt-mirroring.html#sec-rmt-mirroring-enable-disable" title="4.4. Enabling and disabling mirroring of repositories">Section 4.4, “Enabling and disabling mirroring of repositories”</a>, the mirrored data
      remains on your local hard disk. This includes the mirrored RPM
      packages.
    </p><p>
      To delete disabled repository data, use the command <code class="command">rmt-cli
      repos clean</code>. With this command, RMT verifies that only enabled
      repositories are mirrored and provides a way to delete invalid data.
    </p><p>
      Before removing any data, the command lists the affected repositories and
      requires the user to input <code class="literal">yes</code> to continue.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">rmt-cli repos clean</code>
RMT found locally mirrored files from the following repositories which are not marked to be mirrored:

SLE-Product-SLES15-Updates for sle-15-x86_64
SLE-Product-SLES15-Pool for sle-15-x86_64
SLE15-Installer-Updates for sle-15-x86_64

Would you like to continue and remove the locally mirrored files of these repositories?
Only 'yes' will be accepted.

Enter a value:  yes

Deleted locally mirrored files from repository 'SLE-Product-SLES15-Updates for sle-15-x86_64'.
Deleted locally mirrored files from repository 'SLE-Product-SLES15-Pool for sle-15-x86_64'.
Deleted locally mirrored files from repository 'SLE15-Installer-Updates for sle-15-x86_64'.

Clean finished. An estimated 157 MB were removed.</pre></div><div id="id-1.10.6.13.6" data-id-title="Manually remove repository data" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Manually remove repository data</div><p>
        To delete disabled repository data, manually remove its corresponding
        directory:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">rm -r /usr/share/rmt/public/repo/SUSE/Products/<em class="replaceable">PRODUCT</em>/<em class="replaceable">VERSION</em>/<em class="replaceable">ARCHITECTURE</em>/</code></pre></div></div></section><section class="sect1" id="sec-rmt-mirroring-custom-repository" data-id-title="Adding custom repositories"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.6 </span><span class="title-name">Adding custom repositories</span></span> <a title="Permalink" class="permalink" href="cha-rmt-mirroring.html#sec-rmt-mirroring-custom-repository">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rmt_mirroring.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      You can mirror custom repositories with the RMT server. These
      repositories are not provided by SUSE Customer Center. Repositories can be provided
      by, for example, the Open Build Service, third-party vendors, or created with
      <code class="command">createrepo</code>.
    </p><p>
      Custom repositories can either be stand-alone, or you can attach them to
      products. This allows you to connect multiple repositories with one
      command on a client registered to the RMT server.
    </p><p>
      The following example procedure illustrates the mirroring of a
      third-party repository.
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
          Add the remote repository to the RMT server. Replace
          <em class="replaceable">URL</em> with the URL to the repository.
          Replace <em class="replaceable">NAME</em> with a name of your choice
          for the repository.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">rmt-cli repos custom add <em class="replaceable">URL</em> <em class="replaceable">NAME</em></code></pre></div></li><li class="step"><p>
          List all custom repositories to get the ID of the new repository.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">rmt-cli repos custom list</code></pre></div></li><li class="step"><p>
          Optionally attach the new custom repository to a product. For
          example, if the new custom repository is required by all desktop
          clients, it can be attached to the <code class="literal">SUSE Linux Enterprise Desktop</code> product.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">rmt-cli repos custom attach <em class="replaceable">REPOSITORY_ID</em> <em class="replaceable">PRODUCT_ID</em></code></pre></div><p>
          Replace <em class="replaceable">REPOSITORY_ID</em> with the ID of the
          new custom repository. Replace <em class="replaceable">PRODUCT_ID</em>
          with the ID of a product you want the repository to be attached to.
          If you need to retrieve the <em class="replaceable">PRODUCT_ID</em>,
          use the command <code class="command">rmt-cli products list --all</code>.
        </p><div id="id-1.10.6.14.5.3.4" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
            When custom repositories are associated with a product, clients
            registering with that product see it as disabled. To enable the
            repository, find its ID with the command <code class="command">zypper
            lr</code> and run:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>zypper mr -e <em class="replaceable">REPO_ID</em></pre></div></div></li><li class="step"><p>
          Enable mirroring of the new custom repository.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">rmt-cli repos custom enable <em class="replaceable">REPOSITORY_ID</em></code></pre></div></li></ol></div></div><p>
      To get a list of all available custom repositories commands, see
      <a class="xref" href="cha-rmt-tools.html#sec-rmt-tools-rmt-cli-repos" title="6.1.4. repos">Section 6.1.4, “<code class="command">repos</code>”</a>.
    </p></section><section class="sect1" id="sec-rmt-mirroring-export-import" data-id-title="Exporting and importing repositories"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.7 </span><span class="title-name">Exporting and importing repositories</span></span> <a title="Permalink" class="permalink" href="cha-rmt-mirroring.html#sec-rmt-mirroring-export-import">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rmt_mirroring.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      RMT has built-in functions to import and export data about available
      repositories and the mirrored packages. For example, this can be used to
      speed up the setup of a new RMT server by locally copying already
      mirrored RPM packages.
    </p><p>
      Another use case is the <span class="emphasis"><em>offline mode</em></span>. It allows the
      transfer of data to a disconnected RMT server, for example, to provide
      updates to computers in an air-gapped network.
    </p><p>
      The following procedure describes the transfer of data and mirrored RPMs
      between two RMT servers with a USB drive. The server
      <code class="literal">sun</code> is connected to SUSE Customer Center, while
      <code class="literal">sirius</code> is a server in an air-gapped network.
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
          Log in on the server <code class="literal">sun</code>.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root@sun # </code><code class="command">rmt-cli sync</code>
<code class="prompt root">root@sun # </code><code class="command">rmt-cli mirror</code></pre></div></li><li class="step"><p>
          Connect a USB drive, assumed to be <code class="filename">/dev/sdb</code> and
          mount it, for example, in <code class="filename">/mnt/external</code>.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root@sun # </code><code class="command">mount /dev/sdb1 /mnt/external</code></pre></div></li><li class="step"><ol type="a" class="substeps"><li class="step"><p>
              Export the data about available repositories and products.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root@sun # </code><code class="command">rmt-cli export data /mnt/external/</code></pre></div></li><li class="step"><p>
              Export the list of enabled repositories. The exported file is
              required for exporting the repositories in the next step.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root@sun # </code><code class="command">rmt-cli export settings /mnt/external/</code></pre></div></li><li class="step"><p>
              Export mirrored RPM packages. Depending on the size of mirrored
              repositories, this can take a long time.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root@sun # </code><code class="command">rmt-cli export repos /mnt/external/</code></pre></div></li></ol></li><li class="step"><p>
          Unmount and unplug the disk from <code class="literal">sun</code> and go to
          <code class="literal">sirius</code>.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root@sun # </code><code class="command">umount /mnt/external</code></pre></div></li><li class="step"><p>
          If not yet done, set up RMT on <code class="literal">sirius</code> by running
          the <code class="command">yast2 rmt</code>. In case of an offline RMT setup,
          select <span class="guimenu">Skip</span> on the <span class="guimenu">Organization
          Credentials</span> screen.
        </p></li><li class="step"><p>
          Connect the USB drive to <code class="literal">sirius</code> and mount it in
          <code class="filename">/mnt/external</code>.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root@sirius # </code><code class="command">mount /dev/sdb1 /mnt/external</code></pre></div></li><li class="step"><ol type="a" class="substeps"><li class="step"><p>
              Import the metadata about available repositories and products.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root@sirius # </code><code class="command">rmt-cli import data /mnt/external/</code></pre></div></li><li class="step"><p>
              Import mirrored RPM packages. Depending on the size of mirrored
              repositories, this can take a long time.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root@sirius # </code><code class="command">rmt-cli import repos /mnt/external/</code></pre></div></li></ol></li><li class="step"><p>
          Enable repositories as required on the <code class="literal">sirius</code>. For
          details, see
          <a class="xref" href="cha-rmt-mirroring.html#sec-rmt-mirroring-enable-disable" title="4.4. Enabling and disabling mirroring of repositories">Section 4.4, “Enabling and disabling mirroring of repositories”</a>.
        </p></li></ol></div></div><div id="id-1.10.6.15.6" data-id-title="Exporting enabled settings from air-gapped server" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Exporting enabled settings from air-gapped server</div><p>
        If your air-gapped server (<code class="literal">sirius</code>) has many enabled
        repositories, or if the enabled repositories change frequently, we
        recommend exporting the repository settings from this server.
      </p><p>
        The server connected to SUSE Customer Center (<code class="literal">sun</code>) can then
        import the exported settings. This ensures that <code class="literal">sun</code>
        downloads all data required by <code class="literal">sirius</code>.
      </p></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-rmt-migrate.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 3 </span>Migrate from SMT to RMT</span></a> </div><div><a class="pagination-link next" href="cha-rmt-client.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 5 </span>Configuring clients to use RMT</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-rmt-mirroring.html#sec-rmt-mirroring-credentials"><span class="title-number">4.1 </span><span class="title-name">Mirroring credentials</span></a></span></li><li><span class="sect1"><a href="cha-rmt-mirroring.html#sec-rmt-mirroring-synchronization"><span class="title-number">4.2 </span><span class="title-name">Synchronizing repository metadata</span></a></span></li><li><span class="sect1"><a href="cha-rmt-mirroring.html#sec-rmt-mirroring-mirroring"><span class="title-number">4.3 </span><span class="title-name">Mirroring packages</span></a></span></li><li><span class="sect1"><a href="cha-rmt-mirroring.html#sec-rmt-mirroring-enable-disable"><span class="title-number">4.4 </span><span class="title-name">Enabling and disabling mirroring of repositories</span></a></span></li><li><span class="sect1"><a href="cha-rmt-mirroring.html#sec-rmt-mirroring-delete"><span class="title-number">4.5 </span><span class="title-name">Deleting mirrored data</span></a></span></li><li><span class="sect1"><a href="cha-rmt-mirroring.html#sec-rmt-mirroring-custom-repository"><span class="title-number">4.6 </span><span class="title-name">Adding custom repositories</span></a></span></li><li><span class="sect1"><a href="cha-rmt-mirroring.html#sec-rmt-mirroring-export-import"><span class="title-number">4.7 </span><span class="title-name">Exporting and importing repositories</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>