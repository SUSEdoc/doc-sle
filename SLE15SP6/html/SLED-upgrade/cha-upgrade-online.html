<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLED 15 SP6 | Upgrade Guide | Upgrading online</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Upgrading online | SLED 15 SP6"/>
<meta name="description" content="SUSE offers an intuitive graphical and a simple command-line tool to upgrade a running system to a new service pack. Both provide support for rollbac…"/>
<meta name="product-name" content="SUSE Linux Enterprise Desktop"/>
<meta name="product-number" content="15 SP6"/>
<meta name="book-title" content="Upgrade Guide"/>
<meta name="chapter-title" content="Chapter 5. Upgrading online"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Desktop 15 SP6"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Upgrade Guide"/>
<meta property="og:description" content="Perform a SLED upgrade"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Upgrade Guide"/>
<meta name="twitter:description" content="Perform a SLED upgrade"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Upgrading online",
  
    "description": "SUSE offers an intuitive graphical and a simple command-line tool to upgrade a running system to a new service pack. Both provide support for rollbac…",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-06-26T00:00+02:00",
      
    "datePublished": "2024-06-26T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-upgrade-offline.html" title="Chapter 4. Upgrading offline"/><link rel="next" href="cha-upgrade-finish.html" title="Chapter 6. Finishing the upgrade"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/sle_update_online.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Upgrade Guide</a><span> / </span><a class="crumb" href="cha-upgrade-online.html">Upgrading online</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Upgrade Guide</div><ol><li><a href="preface-upgrade.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="cha-upgrade-background.html" class=" "><span class="title-number">1 </span><span class="title-name">Lifecycle and support</span></a></li><li><a href="cha-upgrade-paths.html" class=" "><span class="title-number">2 </span><span class="title-name">Upgrade paths and methods</span></a></li><li><a href="cha-update-preparation.html" class=" "><span class="title-number">3 </span><span class="title-name">Preparing the upgrade</span></a></li><li><a href="cha-upgrade-offline.html" class=" "><span class="title-number">4 </span><span class="title-name">Upgrading offline</span></a></li><li><a href="cha-upgrade-online.html" class=" you-are-here"><span class="title-number">5 </span><span class="title-name">Upgrading online</span></a></li><li><a href="cha-upgrade-finish.html" class=" "><span class="title-number">6 </span><span class="title-name">Finishing the upgrade</span></a></li><li><a href="cha-update-backport.html" class=" "><span class="title-number">7 </span><span class="title-name">Backports of source code</span></a></li><li><a href="bk03apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-upgrade-online" data-id-title="Upgrading online"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP6</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">5 </span><span class="title-name">Upgrading online</span></span> <a title="Permalink" class="permalink" href="cha-upgrade-online.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/sle_update_online.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    SUSE offers an intuitive graphical and a simple command-line tool to
    upgrade a running system to a new service pack. Both provide support for
    <span class="quote">“<span class="quote">rollback</span>”</span> of service packs and more. This chapter provides
    step-by-step instructions on how to perform a service pack upgrade using
    these tools.
   </p></div></div></div></div><section class="sect1" id="sec-upgrade-online-conceptual-overview" data-id-title="Conceptual overview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.1 </span><span class="title-name">Conceptual overview</span></span> <a title="Permalink" class="permalink" href="cha-upgrade-online.html#sec-upgrade-online-conceptual-overview">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/sle_update_online.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   SUSE releases new service packs for the SUSE Linux Enterprise family at regular intervals.
   To make it easy for customers to migrate to a new service pack and minimize
   downtime, SUSE supports migrating online while the system is running.
  </p><p>
   Starting with SLE 12, YaST Wagon has been replaced by YaST
   migration (GUI) and Zypper migration (command line). This has the following
   advantages:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     The system is always in a defined state until the first RPM is updated.
    </p></li><li class="listitem"><p>
     Canceling is possible until the first RPM is updated.
    </p></li><li class="listitem"><p>
     Simple recovery if there is an error.
    </p></li><li class="listitem"><p>
     It is possible to do a <span class="quote">“<span class="quote">rollback</span>”</span> via system tools—no
     backup or restore needed.
    </p></li><li class="listitem"><p>
     Use of all active repositories.
    </p></li><li class="listitem"><p>
     The ability to skip a service pack
    </p></li></ul></div><div id="id-1.5.7.3.5" data-id-title="Online migration not supported for major releases" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Online migration not supported for major releases</div><p>
    The online migration is <span class="emphasis"><em>only</em></span> supported for migrating
    between service packs. Online migration is <span class="emphasis"><em>not
    supported</em></span> for upgrading to new major releases. For details, see
    <a class="xref" href="cha-upgrade-paths.html" title="Chapter 2. Upgrade paths and methods">Chapter 2, <em>Upgrade paths and methods</em></a>.
   </p><p>
    Use the offline migration to upgrade to a new major release. For details,
    see <a class="xref" href="cha-upgrade-offline.html" title="Chapter 4. Upgrading offline">Chapter 4, <em>Upgrading offline</em></a>.
   </p></div><div id="id-1.5.7.3.6" data-id-title="Upgrading SUSE Manager clients" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Upgrading SUSE Manager clients</div><p>
    If the system to upgrade is a SUSE Manager client, it cannot be upgraded by
    YaST online migration or <code class="command">zypper migration</code>. Use the
    <em class="citetitle">Client Migration</em> procedure instead. It is described
    in the <a class="link" href="https://documentation.suse.com/suma/" target="_blank">
    <em class="citetitle">SUSE Manager Upgrade Guide</em></a>.
   </p></div></section><section class="sect1" id="sec-upgrade-online-workflow" data-id-title="Service pack migration workflow"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.2 </span><span class="title-name">Service pack migration workflow</span></span> <a title="Permalink" class="permalink" href="cha-upgrade-online.html#sec-upgrade-online-workflow">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/sle_update_online.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A service pack migration can be executed by either YaST,
   <code class="command">zypper</code>, or AutoYaST.
  </p><p>
   Before you can start a service pack migration, your system must be
   registered at the SUSE Customer Center or a local RMT server. SUSE Manager can also be
   used.
  </p><p>
   Regardless of the method, a service pack migration consists of the following
   steps:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
     Find possible migration targets on your registered systems.
    </p></li><li class="listitem"><p>
     Select one migration target.
    </p></li><li class="listitem"><p>
     Request and enable new repositories.
    </p></li><li class="listitem"><p>
     Run the migration.
    </p></li></ol></div><p>
   The list of migration targets depends on the products you have installed and
   registered. If you have an extension installed for which the new SP is not
   yet available, it could be that no migration target is offered to you.
  </p><p>
   The list of migration targets available for your host will always be
   retrieved from the SUSE Customer Center and depend on products or extensions installed.
  </p></section><section class="sect1" id="sec-upgrade-online-cancel" data-id-title="Canceling service pack migration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.3 </span><span class="title-name">Canceling service pack migration</span></span> <a title="Permalink" class="permalink" href="cha-upgrade-online.html#sec-upgrade-online-cancel">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/sle_update_online.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A service pack migration can only be canceled at specific stages during the
   migration process:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
     Until the package upgrade starts, there are only minimal changes on the
     system, such as changes to services and repositories. Restore
     <code class="filename">/etc/zypp/repos.d/*</code> to revert to the previous state.
    </p></li><li class="listitem"><p>
     After the package upgrade starts, you can revert to the previous state by
     using a Snapper snapshot (see <span class="intraxref">Book “Administration Guide”, Chapter 10 “System recovery and snapshot management with Snapper”</span>).
    </p></li><li class="listitem"><p>
     After the migration target was selected, SUSE Customer Center changes the repository
     data. To revert this state manually, use <code class="command">SUSEConnect</code>
     <code class="option">--rollback</code>.
    </p></li></ol></div></section><section class="sect1" id="sec-upgrade-online-yast" data-id-title="Upgrading with the online migration tool (YaST)"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.4 </span><span class="title-name">Upgrading with the online migration tool (YaST)</span></span> <a title="Permalink" class="permalink" href="cha-upgrade-online.html#sec-upgrade-online-yast">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/sle_update_online.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To perform a service pack migration with YaST, use the <span class="guimenu">Online
   Migration</span> tool. By default, YaST does not install any packages
   from a third-party repository. If a package was installed from a third-party
   repository, YaST prevents packages from being replaced with the same
   package coming from SUSE.
  </p><div id="id-1.5.7.6.3" data-id-title="Reduce installation size" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Reduce installation size</div><p>
    When performing the Service Pack migration, YaST will install all recommended
    packages. Especially in the case of custom minimal installations, this may
    increase the installation size of the system significantly.
   </p><p>
    To change this default behavior and allow only required packages,
    adjust the <code class="option">solver.onlyRequires</code> option in
    <code class="filename">/etc/zypp/zypp.conf</code>.
   </p><div class="verbatim-wrap"><pre class="screen">solver.onlyRequires = true</pre></div><p>
    Additionally, edit the file <code class="filename">/etc/zypp/zypper.conf</code> and
    change the <code class="option">installRecommends</code> option.
   </p><div class="verbatim-wrap"><pre class="screen">installRecommends=false</pre></div><p>
    This changes the behavior of all package operations, such as the
    installation of patches or new packages. To change the behavior of Zypper
    for a single invocation, use the parameter <code class="option">--no-recommends</code>.
  </p></div><p>
   To start the service pack migration, do the following:
  </p><div class="procedure" id="pro-upgrade-online-yast"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Deactivate all unused extensions on your registration server to avoid
     future dependency conflicts. If you forget an extension, YaST will later
     detect unused extension repositories and deactivate them.
    </p></li><li class="step"><p>
     If you are logged in to a GNOME session running on the machine you are
     going to update, switch to a text console. Running the update from within
     a GNOME session is not recommended. Note that this does not apply when
     being logged in from a remote machine (unless you are running a VNC
     session with GNOME).
    </p></li><li class="step"><p>
     Run YaST online update to get the latest package updates for your
     system.
    </p></li><li class="step"><p>
     Install the package <span class="package">yast2-migration</span> and its
     dependencies (in YaST under <span class="guimenu">Software</span> › <span class="guimenu">Software Management</span>).
    </p></li><li class="step"><p>
     Restart YaST, otherwise the newly installed module will not be shown in
     the control center.
    </p></li><li class="step"><p>
     In YaST, choose <span class="guimenu">Online Migration</span> (depending on the
     version of <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> that you are upgrading from, this module is
     categorized under either <span class="guimenu">System</span> or
     <span class="guimenu">Software</span>). YaST will show possible migration targets
     and a summary. If more than one migration target is available for your
     system, select one from the list.
    </p></li><li class="step"><p>
     Select one migration target from the list and proceed with
     <span class="guimenu">Next</span>.
    </p></li><li class="step"><p>
     If the migration tool offers update repositories, it is recommended
     to proceed with <span class="guimenu">Yes</span>.
    </p></li><li class="step"><p>
     
     If the online migration tool finds obsolete repositories from DVD or a
     local server, it is highly recommended to disable them. Obsolete
     repositories are for a previous service pack. Old repositories from SUSE Customer Center
     or RMT are removed automatically.
    </p><p>
     If the registration server does not offer migrations for a module or
     extension, its repository configuration will remain unchanged. This usually
     happens with 3rd party repositories such as the <span class="guimenu">NVIDIA Compute
      Module</span> that are not specific to a product version or service
     pack. If necessary, you can manually check the repository configuration
     after the migration.
    </p></li><li class="step"><p>
     Check the summary and proceed with the migration by clicking
     <span class="guimenu">Next</span>. Confirm with <span class="guimenu">Start Update</span>.
    </p></li><li class="step"><p>
     After the successful migration restart your system.
    </p></li></ol></div></div></section><section class="sect1" id="sec-upgrade-online-zypper" data-id-title="Upgrading with Zypper"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.5 </span><span class="title-name">Upgrading with Zypper</span></span> <a title="Permalink" class="permalink" href="cha-upgrade-online.html#sec-upgrade-online-zypper">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/sle_update_online.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To perform a service pack migration with Zypper, use the command line tool
   <code class="command">zypper</code> <code class="option">migration</code> from the package
   <span class="package">zypper-migration-plugin</span>.
  </p><div id="id-1.5.7.7.3" data-id-title="Reduce installation size" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Reduce installation size</div><p>
    When performing the Service Pack migration, YaST will install all recommended
    packages. Especially in the case of custom minimal installations, this may
    increase the installation size of the system significantly.
   </p><p>
    To change this default behavior and allow only required packages,
    adjust the <code class="option">solver.onlyRequires</code> option in
    <code class="filename">/etc/zypp/zypp.conf</code>.
   </p><div class="verbatim-wrap"><pre class="screen">solver.onlyRequires = true</pre></div><p>
    Additionally, edit the file <code class="filename">/etc/zypp/zypper.conf</code> and
    change the <code class="option">installRecommends</code> option.
   </p><div class="verbatim-wrap"><pre class="screen">installRecommends=false</pre></div><p>
    This changes the behavior of all package operations, such as the
    installation of patches or new packages. To change the behavior of Zypper
    for a single invocation, use the parameter <code class="option">--no-recommends</code>.
  </p></div><p>
   To start the service pack migration, do the following:
  </p><div class="procedure" id="pro-upgrade-online-zypper"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     If you are logged in to a GNOME session running on the machine you are
     going to update, switch to a text console. Running the update from within
     a GNOME session is not recommended. Note that this does not apply when
     being logged in from a remote machine (unless you are running a VNC
     session with GNOME).
    </p></li><li class="step"><p>
     Register your SUSE Linux Enterprise machine if you have not done so:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">SUSEConnect</code> --regcode <em class="replaceable">YOUR_REGISTRATION_CODE</em></pre></div></li><li class="step"><p>
     Start the migration:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">zypper migration</code></pre></div><p>
     Some notes about the migration process:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       If more than one migration target is available for your system, Zypper
       allows you to select one SP from the list. This is the same as skipping
       one or more SPs. Keep in mind, online migration for base products
       (SLES, SLED) remains available only between the SPs of a major
       version.
      </p></li><li class="listitem"><p>
       By default, Zypper uses the option
       <code class="option">--no-allow-vendor-change</code> which is passed to
       <code class="command">zypper</code> <code class="option">dup</code>. If a package was
       installed from a third-party repository, this option prevents packages
       from being replaced with the same package coming from SUSE.
      </p></li><li class="listitem"><p>
       
       If Zypper finds obsolete repositories coming from DVD or a local server,
       it is highly recommended to disable them. Old SUSE Customer Center or RMT
       repositories are removed automatically.
      </p></li></ul></div></li><li class="step"><p>
     Review all the changes, especially the packages that are going to be
     removed. Proceed by typing <code class="literal">y</code> (the exact number of
     packages to upgrade can vary on your system):
    </p><div class="verbatim-wrap"><pre class="screen">266 packages to upgrade, 54 to downgrade, 17 new, 8 to reinstall, 5 to remove, 1 to change arch.
Overall download size: 285.1 MiB. Already cached: 0 B  After the operation, additional 139.8 MiB will be used.
Continue? [y/n/? shows all options] (y):</pre></div><p>
     Use the <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Page ↑</span> or <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Page ↓</span> keys to scroll in your shell.
    </p></li><li class="step"><p>
     After successful migration restart your system.
    </p></li></ol></div></div></section><section class="sect1" id="sec-upgrade-online-zypper-plain" data-id-title="Upgrading with plain Zypper"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.6 </span><span class="title-name">Upgrading with plain Zypper</span></span> <a title="Permalink" class="permalink" href="cha-upgrade-online.html#sec-upgrade-online-zypper-plain">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/sle_update_online.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If your system is not registered because you do not have access to the
   Internet or a registration server, migrating to a new service pack is not
   possible with YaST Migration or <code class="command">zypper migration</code>. In
   this case you can still migrate to a new service pack with plain Zypper and
   some manual interactions.
  </p><div id="id-1.5.7.8.3" data-id-title="For unregistered systems only" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: For unregistered systems only</div><p>
    This migration path to a new service pack is <span class="emphasis"><em>only</em></span>
    supported for unregistered systems that do not have access to the Internet
    or a registration server. This may, for example, be the case for machines
    in a specially protected network. If you have a registered system, use
    YaST or Zypper migration.
   </p></div><div id="id-1.5.7.8.4" data-id-title="Installation sources" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Installation sources</div><p>
    This migration path requires that the system you are going to migrate has
    access to the installation sources. For example, this can be done by setting up
    an RMT server or an SLP server.
   </p><p>
    It is also required that the system has access to an up-to-date update
    repository for the installed product version.
   </p></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     If you are logged in to a graphical session running on the machine you are
     going to migrate, log out of that session and switch to a text console.
     Running the update from within a graphical session is not recommended.
     Note that this does not apply when being logged in from a remote machine
     (unless you are running a VNC session with X).
    </p></li><li class="step"><p>
     Update the package management tools with the old SUSE Linux Enterprise repositories:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">zypper</code> patch --updatestack-only</pre></div></li><li class="step"><p>
     Get a list of packages that currently do not have a repository assigned to
     them (orphaned packages). These packages will not be migrated and there is
     no guarantee that they will work after the migration (because other
     packages they rely on may have changed in such a way that they are no
     longer compatible). To get the list, run:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper packages --orphaned</pre></div><p>
     Carefully review the list and remove all orphaned packages that are no
     longer needed. Make a note of all remaining orphaned packages, you will
     need it later for comparison.
    </p></li><li class="step"><p>
     Get a list of all repositories that the system is currently subscribed to
     by running:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper repos -u</pre></div><p>
     Update each repository URL so that its product version number is
     <code class="literal">15-SP6</code>. For example, if the URL of
     a repository is
    </p><div class="verbatim-wrap"><pre class="screen">http://rmt.example.com/repo/SUSE/Products/SLE-15-SP2-Product-SLES/x86_64/product/</pre></div><p>
     change it to
    </p><div class="verbatim-wrap"><pre class="screen">http://rmt.example.com/repo/SUSE/Products/SLE-15-SP3-Product-SLES/x86_64/product/</pre></div><p>
     This needs to be done with all repositories that are enabled. You may want
     to consider also doing this for repositories that are currently disabled,
     to avoid having wrong installation sources in the system when activating
     them at a later point in time.
    </p><p>
     To change the repository URLs you have the following options:
    </p><ol type="a" class="substeps"><li class="step"><p>
       Using <span class="guimenu">YaST</span> › <span class="guimenu">Software</span> › <span class="guimenu">Software Repositories</span>. Select a
       repository and click <span class="guimenu">Edit</span> to make the required
       change. Repeat this for all repositories.
      </p></li><li class="step"><p>
       Using Zypper. Remove the old repository by running
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper removerepo <em class="replaceable">OLD_REPO_ID</em></pre></div><p>
       Then add the corresponding new repository by running
      </p><div class="verbatim-wrap"><pre class="screen"> <code class="prompt user">&gt; </code><code class="command">sudo</code> zypper addrepo -f <em class="replaceable">URL</em> <em class="replaceable">NAME</em>-15-SP6</pre></div></li><li class="step"><p>
       By editing repository configuration files in
       <code class="filename">/etc/zypp/repos.d</code>. Each repository is represented
       by one configuration file. Changing the value for the
       <code class="literal">baseurl</code> parameter is required in each file.
      </p></li></ol></li><li class="step"><p>
     Review your changes by running <code class="command">zypper repos -u</code> and
     update the repositories by running:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper refresh -f -s</pre></div><p>
     In case updating a repository fails, double-check whether you entered the
     wrong URL. If the problem cannot be fixed, it is recommended to disable
     the failing repository.
    </p><p>
     If all repositories are correctly configured, run
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper refresh -f -s</pre></div><p>
     again, to make sure <span class="emphasis"><em>all</em></span> repositories are up-to-date.
    </p></li><li class="step"><p>
     Before starting the migration it is recommended do a test run first:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper dup -D --no-allow-vendor-change --no-recommends</pre></div><p>
     The parameter <code class="option">-D</code> will perform a dry run that simulates
     the migration without actually changing the system. If problems occur, fix
     them before proceeding. In case the test run succeeds, perform the real
     migration by running:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper dup --no-allow-vendor-change --no-recommends</pre></div><p>
     <code class="option">-no-allow-vendor-change</code> ensures that third-party RPMs
     will not overwrite RPMs from the base system. The option
     <code class="option">--no-recommends</code> ensures that packages deselected during
     initial installation will not be added again.
    </p></li><li class="step"><p>
     When the migration has finished and the system has booted into the new
     service pack version, run the check for orphaned packages again:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper packages --orphaned</pre></div><p>
     Compare the new list with the one you generated before starting the
     migration. If new packages appear in the list, it may be because they were
     moved to a different module in the new service pack. If you did not have
     that module in the previous installation, the package did not get updated.
    </p><p>
     You can check to which module a package belongs at
     <a class="link" href="https://scc.suse.com/packages" target="_blank">https://scc.suse.com/packages</a>. Add the missing
     modules using <code class="command">zypper addrepo</code> or the YaST Software
     Repositories module, and update the orphaned packages afterwards by
     running:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install --no-recommends <em class="replaceable">LIST OF PACKAGES</em></pre></div></li><li class="step"><p>
     You have successfully migrated to a new service pack!
    </p></li></ol></div></div></section><section class="sect1" id="sec-upgrade-online-rollback" data-id-title="Rolling back a service pack"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.7 </span><span class="title-name">Rolling back a service pack</span></span> <a title="Permalink" class="permalink" href="cha-upgrade-online.html#sec-upgrade-online-rollback">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/sle_update_online.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If a service pack does not work for you, SUSE Linux Enterprise supports reverting the system
   to the state before the service pack migration was started. Prerequisite is
   a Btrfs root partition with snapshots enabled (this has been the default
   since SLES 12). See <span class="intraxref">Book “Administration Guide”, Chapter 10 “System recovery and snapshot management with Snapper”</span> for details.
  </p><div class="procedure" id="pro-upgrade-online-rollback"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Get a list of all Snapper snapshots:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper list</pre></div><p>
     Review the output to locate the snapshot that was created immediately
     before the service pack migration was started. The column
     <span class="guimenu">Description</span> contains a corresponding statement and the
     snapshot is marked as <code class="literal">important</code> in the column
     <span class="guimenu">Userdata</span>. Memorize the snapshot number from the column
     <span class="guimenu">#</span> and its date from the column <span class="guimenu">Date</span>.
    </p></li><li class="step"><p>
     Reboot the system. From the boot menu, select <span class="guimenu">Start boot loader
     from a read-only snapshot</span> and then choose the snapshot with the
     date and number you memorized in the previous step. A second boot menu
     (the one from the snapshot) is loaded. Select the entry starting with
     SLES <span class="productnumber"><span class="phrase">15 SP6</span></span> and boot it.
    </p></li><li class="step"><p>
     The system boots into the previous state with the system partition mounted
     read-only. Log in as <code class="systemitem">root</code> and check whether you have chosen the
     correct snapshot. Also make sure everything works as expected. Note that
     since the root file system is mounted read-only, restrictions in
     functionality may apply.
    </p><p>
     In case of problems or if you have booted the wrong snapshot, reboot and
     choose a different snapshot to boot from—up to this point no
     permanent changes have been made. If the snapshot is correct and works as
     expected, make the change permanent by running the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper rollback</pre></div><p>
     Reboot the machine. On the boot screen, choose the default boot entry to
     reboot into the reinstated system.
    </p></li><li class="step"><p>
     Check if the repository configuration has been properly reset.
     Furthermore, check if all products are properly registered. If either one
     is not the case, updating the system at a later point in time may no
     longer work, or the system may be updated using the wrong package
     repositories.
    </p><p>
     Make sure the system can access the Internet before starting this
     procedure.
    </p><ol type="a" class="substeps"><li class="step"><p>
       Refresh services and repositories by running
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper ref -fs</pre></div></li><li class="step"><p>
       Get a list of active repositories by running
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper lr</pre></div><p>
       Carefully check the output of this command. No services and repositories
       that were added for the update should be listed. For example, if you are
       rolling back from SLES <span class="productnumber"><span class="phrase">15 SP6</span></span> to SLES15 GA,
       the list must contain the <code class="literal">SLES15-GA</code>
       repositories, and not the
       <code class="literal">SLES15-SP6</code> repositories.
      </p><p>
       If wrong repositories are listed, delete them and, if necessary, replace
       them with the versions matching your product or service pack version.
       For a list of repositories for the supported migration paths refer to
       <a class="xref" href="cha-upgrade-background.html#sec-upgrade-background-modules" title="1.3. Module dependencies and lifecycles">Section 1.3, “Module dependencies and lifecycles”</a>. (Note that manual
       intervention should not be necessary, as the repositories should be
       updated automatically, but it is a best practice to verify and make any
       necessary corrections.)
      </p></li><li class="step"><p>
       Last, check the registration status for all products installed by
       running
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> SUSEConnect --status</pre></div><p>
       All products should be reported as being <code class="literal">Registered</code>.
       If this is not the case, repair the registration by running
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> SUSEConnect --rollback</pre></div></li></ol></li></ol></div></div><p>
   Now you have successfully reverted the system to the state that was captured
   immediately before the service pack migration was started.
  </p></section><section class="sect1" id="sec-upgrade-online-manager" data-id-title="Upgrading with SUSE Manager"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.8 </span><span class="title-name">Upgrading with SUSE Manager</span></span> <a title="Permalink" class="permalink" href="cha-upgrade-online.html#sec-upgrade-online-manager">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/sle_update_online.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   SUSE Manager is a server solution for providing updates, patches, and security
   fixes for SUSE Linux Enterprise clients. It comes with a set of tools and a Web-based user
   interface for management tasks. See
   <a class="link" href="https://www.suse.com/products/suse-manager/" target="_blank">https://www.suse.com/products/suse-manager/</a> for more
   information about SUSE Manager.
  </p><p>
   SP Migration allows migrating from one Service Pack (SP) to another within
   one major version (for example, from SLES 15 GA to
   SLES 15 SP6).
  </p><p>
  If your machine is managed by SUSE Manager, update it as described in the
  SUSE Manager documentation. The <em class="citetitle">Client Migration</em>
  procedure is described in the <em class="citetitle">SUSE Manager Upgrade Guide</em>,
  available at <a class="link" href="https://documentation.suse.com/suma/" target="_blank">https://documentation.suse.com/suma/</a>.
 </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-upgrade-offline.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 4 </span>Upgrading offline</span></a> </div><div><a class="pagination-link next" href="cha-upgrade-finish.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 6 </span>Finishing the upgrade</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-upgrade-online.html#sec-upgrade-online-conceptual-overview"><span class="title-number">5.1 </span><span class="title-name">Conceptual overview</span></a></span></li><li><span class="sect1"><a href="cha-upgrade-online.html#sec-upgrade-online-workflow"><span class="title-number">5.2 </span><span class="title-name">Service pack migration workflow</span></a></span></li><li><span class="sect1"><a href="cha-upgrade-online.html#sec-upgrade-online-cancel"><span class="title-number">5.3 </span><span class="title-name">Canceling service pack migration</span></a></span></li><li><span class="sect1"><a href="cha-upgrade-online.html#sec-upgrade-online-yast"><span class="title-number">5.4 </span><span class="title-name">Upgrading with the online migration tool (YaST)</span></a></span></li><li><span class="sect1"><a href="cha-upgrade-online.html#sec-upgrade-online-zypper"><span class="title-number">5.5 </span><span class="title-name">Upgrading with Zypper</span></a></span></li><li><span class="sect1"><a href="cha-upgrade-online.html#sec-upgrade-online-zypper-plain"><span class="title-number">5.6 </span><span class="title-name">Upgrading with plain Zypper</span></a></span></li><li><span class="sect1"><a href="cha-upgrade-online.html#sec-upgrade-online-rollback"><span class="title-number">5.7 </span><span class="title-name">Rolling back a service pack</span></a></span></li><li><span class="sect1"><a href="cha-upgrade-online.html#sec-upgrade-online-manager"><span class="title-number">5.8 </span><span class="title-name">Upgrading with SUSE Manager</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>