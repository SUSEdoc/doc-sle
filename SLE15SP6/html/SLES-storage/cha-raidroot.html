<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLES 15 SP6 | Storage Administration Guide | Configuring software RAID for the root partition</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Configuring software RAID for the root partition | SLE…"/>
<meta name="description" content="In SUSE Linux Enterprise Server, the Device Mapper RAID tool has been integrated into the YaST Partitioner. You can use the partitioner at install ti…"/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="15 SP6"/>
<meta name="book-title" content="Storage Administration Guide"/>
<meta name="chapter-title" content="Chapter 8. Configuring software RAID for the root partition"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Server 15 SP6"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Storage Administration Guide"/>
<meta property="og:description" content="Administer storage devices on SLES"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Storage Administration Guide"/>
<meta name="twitter:description" content="Administer storage devices on SLES"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Configuring software RAID for the root partition",
  
    "description": "Configuring software RAID for the root partition",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-06-26T00:00+02:00",
      
    "datePublished": "2024-06-26T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-raid.html" title="Chapter 7. Software RAID configuration"/><link rel="next" href="cha-raid10.html" title="Chapter 9. Creating software RAID 10 devices"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/storage_raidroot.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Storage Administration Guide</a><span> / </span><a class="crumb" href="part-software-raid.html">Software RAID</a><span> / </span><a class="crumb" href="cha-raidroot.html">Configuring software RAID for the root partition</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Storage Administration Guide</div><ol><li><a href="storage-preface.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="part-filesystems.html" class="has-children "><span class="title-number">I </span><span class="title-name">File systems and mounting</span></a><ol><li><a href="cha-filesystems.html" class=" "><span class="title-number">1 </span><span class="title-name">Overview of file systems in Linux</span></a></li><li><a href="cha-resize-fs.html" class=" "><span class="title-number">2 </span><span class="title-name">Resizing file systems</span></a></li><li><a href="cha-uuid.html" class=" "><span class="title-number">3 </span><span class="title-name">Mounting storage devices</span></a></li><li><a href="cha-multitiercache.html" class=" "><span class="title-number">4 </span><span class="title-name">Multi-tier caching for block device operations</span></a></li></ol></li><li><a href="part-lvm.html" class="has-children "><span class="title-number">II </span><span class="title-name">Logical volumes (LVM)</span></a><ol><li><a href="cha-lvm.html" class=" "><span class="title-number">5 </span><span class="title-name">LVM configuration</span></a></li><li><a href="cha-lvm-snapshots.html" class=" "><span class="title-number">6 </span><span class="title-name">LVM volume snapshots</span></a></li></ol></li><li class="active"><a href="part-software-raid.html" class="has-children you-are-here"><span class="title-number">III </span><span class="title-name">Software RAID</span></a><ol><li><a href="cha-raid.html" class=" "><span class="title-number">7 </span><span class="title-name">Software RAID configuration</span></a></li><li><a href="cha-raidroot.html" class=" you-are-here"><span class="title-number">8 </span><span class="title-name">Configuring software RAID for the root partition</span></a></li><li><a href="cha-raid10.html" class=" "><span class="title-number">9 </span><span class="title-name">Creating software RAID 10 devices</span></a></li><li><a href="cha-raid-degraded.html" class=" "><span class="title-number">10 </span><span class="title-name">Creating a degraded RAID array</span></a></li><li><a href="cha-raid-resize.html" class=" "><span class="title-number">11 </span><span class="title-name">Resizing software RAID arrays with mdadm</span></a></li><li><a href="cha-raid-leds.html" class=" "><span class="title-number">12 </span><span class="title-name">Storage enclosure LED utilities for MD software RAIDs</span></a></li><li><a href="cha-raidtroubleshooting.html" class=" "><span class="title-number">13 </span><span class="title-name">Troubleshooting software RAIDs</span></a></li></ol></li><li><a href="part-net-storage.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Network storage</span></a><ol><li><a href="cha-isns.html" class=" "><span class="title-number">14 </span><span class="title-name">iSNS for Linux</span></a></li><li><a href="cha-iscsi.html" class=" "><span class="title-number">15 </span><span class="title-name">Mass storage over IP networks: iSCSI</span></a></li><li><a href="cha-fcoe.html" class=" "><span class="title-number">16 </span><span class="title-name">Fibre Channel storage over Ethernet networks: FCoE</span></a></li><li><a href="cha-nvmeof.html" class=" "><span class="title-number">17 </span><span class="title-name">NVMe-oF</span></a></li><li><a href="cha-multipath.html" class=" "><span class="title-number">18 </span><span class="title-name">Managing multipath I/O for devices</span></a></li><li><a href="cha-nfs.html" class=" "><span class="title-number">19 </span><span class="title-name">Sharing file systems with NFS</span></a></li><li><a href="cha-samba.html" class=" "><span class="title-number">20 </span><span class="title-name">Samba</span></a></li><li><a href="cha-autofs.html" class=" "><span class="title-number">21 </span><span class="title-name">On-demand mounting with autofs</span></a></li></ol></li><li><a href="bk09apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section xml:lang="en" class="chapter" id="cha-raidroot" data-id-title="Configuring software RAID for the root partition"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP6</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">8 </span><span class="title-name">Configuring software RAID for the root partition</span></span> <a title="Permalink" class="permalink" href="cha-raidroot.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/storage_raidroot.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  In <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, the Device Mapper RAID tool has been integrated into the
  YaST Partitioner. You can use the partitioner at install time to create a
  software RAID for the system device that contains your root
  (<code class="filename">/</code>) partition. The <code class="filename">/boot</code> partition
  cannot be stored on a RAID partition unless it is RAID 1.
 </p><div id="id-1.11.5.3.4" data-id-title="/boot/efi on RAID 1 might not boot" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: <code class="filename">/boot/efi</code> on RAID 1 might not boot</div><p>
   When creating the <code class="filename">/boot/efi</code> partition on
   RAID, keep in mind that in some cases the firmware might not 
   recognize the boot partition on RAID. The firmware then
   refuses to boot.
  </p></div><section class="sect1" id="sec-raidroot-require" data-id-title="Prerequisites for using a software RAID device for the root partition"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8.1 </span><span class="title-name">Prerequisites for using a software RAID device for the root partition</span></span> <a title="Permalink" class="permalink" href="cha-raidroot.html#sec-raidroot-require">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/storage_raidroot.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Ensure that your configuration meets the following requirements:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     You need two hard disks to create the RAID 1 mirror device. The hard
     disks should be similarly sized. The RAID assumes the size of the smaller
     drive. The block storage devices can be any combination of local (in or
     directly attached to the machine), Fibre Channel storage subsystems, or
     iSCSI storage subsystems.
    </p></li><li class="listitem"><p>
     A separate partition for <code class="filename">/boot</code> is not required if you
     install the boot loader in the MBR. If installing the boot loader in the
     MBR is not an option, <code class="filename">/boot</code> needs to reside on a
     separate partition.
    </p></li><li class="listitem"><p>
     For UEFI machines, you need to set up a dedicated
     <code class="filename">/boot/efi</code> partition. It needs to be VFAT-formatted,
     and may reside on the RAID 1 device to prevent booting problems in case
     the physical disk with <code class="filename">/boot/efi</code> fails.
    </p></li><li class="listitem"><p>
     If you are using hardware RAID devices, do not attempt to run software
     RAIDs on top of it.
    </p></li><li class="listitem"><p>
     If you are using iSCSI target devices, you need to enable the iSCSI
     initiator support before you create the RAID device.
    </p></li><li class="listitem"><p>
     If your storage subsystem provides multiple I/O paths between the server
     and its directly attached local devices, Fibre Channel devices, or iSCSI
     devices that you want to use in the software RAID, you need to enable the
     multipath support before you create the RAID device.
    </p></li></ul></div></section><section class="sect1" id="sec-raidroot-setup" data-id-title="Setting up the system with a software RAID device for the root (/) partition"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8.2 </span><span class="title-name">Setting up the system with a software RAID device for the root (<code class="filename">/</code>) partition</span></span> <a title="Permalink" class="permalink" href="cha-raidroot.html#sec-raidroot-setup">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/storage_raidroot.xml" title="Edit source document"> </a></div></div></div></div></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Start the installation with YaST and proceed as described in
     <span class="intraxref">Book “Deployment Guide”, Chapter 9 “Installation steps”</span> until you reach the <span class="guimenu">Suggested
     Partitioning</span> step.
    </p></li><li class="step"><p>
     Click <span class="guimenu">Expert Partitioner</span> to open the custom
     partitioning tool. You can use the suggested proposal, or you can use the
     existing proposal.
    </p></li><li class="step"><p>
     (Optional) If there are iSCSI target devices that you want to use, you
     need to enable the iSCSI Initiator software by choosing
     <span class="guimenu">System</span> › <span class="guimenu">Configure</span> › <span class="guimenu">Configure iSCSI</span> from the upper-left
     section of the screen. Refer to <a class="xref" href="cha-iscsi.html" title="Chapter 15. Mass storage over IP networks: iSCSI">Chapter 15, <em>Mass storage over IP networks: iSCSI</em></a> for further
     details.
    </p></li><li class="step"><p>
     (Optional) If there are FCoE target devices that you want to use, you need
     to configure the interface by clicking
     <span class="guimenu">System</span> › <span class="guimenu">Configure</span> › <span class="guimenu">Configure FCoE</span> from the upper left
     section of the screen.
    </p></li><li class="step"><p>
     (Optional) If you need to discard the partitioning changes, click
     <span class="guimenu">System</span> › <span class="guimenu">Rescan
     Devices</span>.
    </p></li><li class="step"><p>
     Set up the <span class="guimenu">Linux RAID</span> format for each of the devices
     you want to use for the software RAID. You should use RAID for
     <code class="filename">/</code>, <code class="filename">/boot/efi</code>, or swap
     partitions.
    </p><ol type="a" class="substeps"><li class="step"><p>
       In the left panel, select <span class="guimenu">Hard Disks</span> and select the
       device you want to use, then click <span class="guimenu">Add Partition</span>.
      </p></li><li class="step"><p>
       Under <span class="guimenu">New Partition Size</span>, specify the size to use,
       then click <span class="guimenu">Next</span>.
      </p></li><li class="step"><p>
       Under <span class="guimenu">Role</span>, choose <span class="guimenu">Raw Volume
       (unformatted)</span>.
      </p></li><li class="step"><p>
       Select <span class="guimenu">Do not format</span> and <span class="guimenu">Do not
       mount</span> and set the <span class="guimenu">Partition ID</span> to
       <span class="guimenu">Linux RAID</span>.
      </p></li><li class="step"><p>
       Click <span class="guimenu">Next</span> and repeat these instructions for the
       second partition.
      </p><div class="informalfigure"><div class="mediaobject"><a href="images/raid_yast_install2_a.png"><img src="images/raid_yast_install2_a.png" width="100%" alt="Image" title="Image"/></a></div></div></li></ol></li><li class="step"><p>
     Create the RAID device for the <code class="filename">/</code> partition.
    </p><ol type="a" class="substeps"><li class="step"><p>
       In the left panel, select <span class="guimenu">RAID</span> and then <span class="guimenu">Add
       RAID</span>.
      </p></li><li class="step"><p>
       Set the desired <span class="guimenu">RAID Type</span> for the
       <code class="filename">/</code> partition and the <span class="guimenu">RAID name</span> to
       <code class="literal">system</code>.
      </p></li><li class="step"><p>
       Select the two RAID devices you prepared in the previous step from the
       <span class="guimenu">Available Devices</span> section and <span class="guimenu">Add</span>
       them.
      </p><div class="informalfigure"><div class="mediaobject"><a href="images/raid_yast_install3_a.png"><img src="images/raid_yast_install3_a.png" width="100%" alt="Image" title="Image"/></a></div></div><p>
       Proceed with <span class="guimenu">Next</span>.
      </p></li><li class="step"><p>
       Select the chunk size from the drop-down box. Sticking with the default
       is a safe choice.
      </p></li><li class="step"><p>
       In the left panel, click the <span class="guimenu">RAID</span>. In the
       <span class="guimenu">Device Overview</span> tab, select your new RAID and click
       <span class="guimenu">Edit</span>.
      </p><div class="informalfigure"><div class="mediaobject"><a href="images/raid_yast_install_editraid.png"><img src="images/raid_yast_install_editraid.png" width="100%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
       Under <span class="guimenu">Role</span>, select <span class="guimenu">Operating
       System</span> and proceed with <span class="guimenu">Next</span>.
      </p></li><li class="step"><p>
       Select the <span class="guimenu">File System</span> and set the mount point to
       <code class="filename">/</code>. Leave the dialog with <code class="filename">Next</code>.
      </p><div class="informalfigure"><div class="mediaobject"><a href="images/raid_yast_install_filesystem.png"><img src="images/raid_yast_install_filesystem.png" width="100%" alt="Image" title="Image"/></a></div></div></li></ol></li><li class="step"><p>
     The software RAID device is managed by Device Mapper, and creates a device
     under the <code class="filename">/dev/md/system</code> path.
    </p></li><li class="step"><p>
     Optionally, you can create a swap partition in RAID. Use similar steps to
     those described above, but under <span class="guimenu">Role</span>, select
     <span class="guimenu">swap</span>. Select the file system and mount point as shown
     below. Click <span class="guimenu">Next</span>.
    </p><div class="informalfigure"><div class="mediaobject"><a href="images/raid_yast_install_swap.png"><img src="images/raid_yast_install_swap.png" width="100%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
     Optionally, for UEFI machines, use similar steps to create the
     <code class="filename">/boot/efi</code> mounted partition. Remember that only
     RAID 1 is supported for <code class="filename">/boot/efi</code>, and the
     partition needs to be formatted with the FAT32 file system.
    </p><div class="informalfigure"><div class="mediaobject"><a href="images/raid_yast_install_boot.png"><img src="images/raid_yast_install_boot.png" width="100%" alt="Image" title="Image"/></a></div></div><p>
     The partitioning then looks as follows:
    </p><div class="informalfigure"><div class="mediaobject"><a href="images/raid_yast_install3_b.png"><img src="images/raid_yast_install3_b.png" width="70%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
     Click <span class="guimenu">Accept</span> to leave the partitioner.
    </p><p>
     The new proposal appears on the <span class="guimenu">Suggested Partitioning</span>
     page.
    </p></li><li class="step"><p>
     Continue with the installation. For UEFI machines with a separate
     <code class="filename">/boot/efi</code> partition, click <span class="guimenu">Booting</span>
     on the <span class="guimenu">Installation Settings</span> screen and set
     <span class="guimenu">GRUB2 for EFI</span> as the <span class="guimenu">Boot Loader</span>.
     Check that the <span class="guimenu">Enable Secure Boot Support</span> option is
     activated.
    </p><p>
     Whenever you reboot your server, Device Mapper is started at boot time so
     that the software RAID is automatically recognized, and the operating
     system on the root (<code class="literal">/</code>) partition can be started.
    </p></li></ol></div></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-raid.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 7 </span>Software RAID configuration</span></a> </div><div><a class="pagination-link next" href="cha-raid10.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 9 </span>Creating software RAID 10 devices</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-raidroot.html#sec-raidroot-require"><span class="title-number">8.1 </span><span class="title-name">Prerequisites for using a software RAID device for the root partition</span></a></span></li><li><span class="sect1"><a href="cha-raidroot.html#sec-raidroot-setup"><span class="title-number">8.2 </span><span class="title-name">Setting up the system with a software RAID device for the root (<code class="filename">/</code>) partition</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>