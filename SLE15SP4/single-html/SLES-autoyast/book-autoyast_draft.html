<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><title>SLES 15 SP4 | AutoYaST Guide</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="AutoYaST Guide | SLES 15 SP4"/>
<meta name="description" content="How to prepare, install and configure a SLES system with AutoYaST"/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="15 SP4"/>
<meta name="book-title" content="AutoYaST Guide"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Server 15 SP4"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="AutoYaST Guide"/>
<meta property="og:description" content="Automate SLES installation with AutoYaST"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="AutoYaST Guide"/>
<meta name="twitter:description" content="Automate SLES installation with AutoYaST"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "AutoYaST Guide",
  
    "description": "How to prepare, install and configure a SLES system with AutoYaST",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-06-05T00:00+02:00",
      
    "datePublished": "2022-06-21T00:00+02:00",
      

    "about": [
      {
        "@type": "Thing",
        "name": "Automation"
      },
      {
        "@type": "Thing",
        "name": "Configuration"
      },
      {
        "@type": "Thing",
        "name": "Deployment"
      },
      {
        "@type": "Thing",
        "name": "Installation"
      }
    ],
  
    "mentions": [
      
      { "@type": "SoftwareApplication",
        "name": "SUSE Linux Enterprise Server",
        "softwareVersion": "15 SP4",
        "applicationCategory": "Operating System",
        "operatingSystem": "Linux"
      }
      
    ],
    
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/book_autoyast.xml"/></head><body class="draft single normal offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="#book-autoyast">AutoYaST Guide</a></div></div><main id="_content"><nav class="side-toc placebo" id="_side-toc-overall"> </nav><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section xml:lang="en" class="book" id="book-autoyast" data-id-title="AutoYaST Guide"><div class="titlepage"><div><div class="big-version-info"><span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP4</span></span></span></div><div class="title-container"><h1 class="title">AutoYaST Guide</h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_autoyast.xml" title="Edit source document"> </a></div></div><div class="abstract"><p>
    AutoYaST is a system for unattended mass deployment 
     of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> systems. It uses an AutoYaST profile that contains installation
     and configuration data. The book guides you through the basic steps of
     auto-installation: preparation, installation, and configuration.
   </p></div><div><div class="titlepage-revhistory"><a aria-label="Revision History" hreflang="en" href="rh-book-autoyast.html" target="_blank">Revision History: AutoYaST Guide</a></div></div><div class="date"><span class="imprint-label">Publication Date: </span>October 10, 2024
</div></div></div><div class="toc"><ul><li><span class="preface"><a href="#ay-preface"><span class="title-name">Preface</span></a></span><ul><li><span class="sect1"><a href="#id-1.7.2.3"><span class="title-name">Available documentation</span></a></span></li><li><span class="sect1"><a href="#id-1.7.2.4"><span class="title-name">Improving the documentation</span></a></span></li><li><span class="sect1"><a href="#id-1.7.2.5"><span class="title-name">Documentation conventions</span></a></span></li><li><span class="sect1"><a href="#id-1.7.2.6"><span class="title-name">Support</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-intro-to-autoyast"><span class="title-number">1 </span><span class="title-name">Introduction to AutoYaST</span></a></span><ul><li><span class="sect1"><a href="#motiv"><span class="title-number">1.1 </span><span class="title-name">Motivation</span></a></span></li><li><span class="sect1"><a href="#overviewandconcept"><span class="title-number">1.2 </span><span class="title-name">Overview and concept</span></a></span></li></ul></li><li><span class="part"><a href="#part-control"><span class="title-number">I </span><span class="title-name">Understanding and creating the AutoYaST control file</span></a></span><ul><li><span class="chapter"><a href="#cha-autoyast-control-file"><span class="title-number">2 </span><span class="title-name">The AutoYaST control file</span></a></span><ul><li><span class="sect1"><a href="#Profile-Intro"><span class="title-number">2.1 </span><span class="title-name">Introduction</span></a></span></li><li><span class="sect1"><a href="#Profile-Format"><span class="title-number">2.2 </span><span class="title-name">Format</span></a></span></li><li><span class="sect1"><a href="#Profile-Structure"><span class="title-number">2.3 </span><span class="title-name">Structure</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-autoyast-create-control-file"><span class="title-number">3 </span><span class="title-name">Creating an AutoYaST control file</span></a></span><ul><li><span class="sect1"><a href="#Autoinstallation-collectInfo"><span class="title-number">3.1 </span><span class="title-name">Collecting information</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-CMS"><span class="title-number">3.2 </span><span class="title-name">Using the configuration management system (CMS)</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Manual"><span class="title-number">3.3 </span><span class="title-name">Creating/editing a control file manually</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-XSLT"><span class="title-number">3.4 </span><span class="title-name">Creating a control file via script with XSLT</span></a></span></li><li><span class="sect1"><a href="#check-profile"><span class="title-number">3.5 </span><span class="title-name">Checking a control file</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#part-configuration"><span class="title-number">II </span><span class="title-name">AutoYaST configuration examples</span></a></span><ul><li><span class="chapter"><a href="#cha-configuration-installation-options"><span class="title-number">4 </span><span class="title-name">Configuration and installation options</span></a></span><ul><li><span class="sect1"><a href="#CreateProfile-General"><span class="title-number">4.1 </span><span class="title-name">General options</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Reporting"><span class="title-number">4.2 </span><span class="title-name">Reporting</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Register"><span class="title-number">4.3 </span><span class="title-name">System registration and extension selection</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Bootloader"><span class="title-number">4.4 </span><span class="title-name">The boot loader</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Partitioning"><span class="title-number">4.5 </span><span class="title-name">Partitioning</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Iscsi-client"><span class="title-number">4.6 </span><span class="title-name">iSCSI initiator overview</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-fcoe-client"><span class="title-number">4.7 </span><span class="title-name">Fibre channel over Ethernet configuration (FCoE)</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Country"><span class="title-number">4.8 </span><span class="title-name">Country settings</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Software"><span class="title-number">4.9 </span><span class="title-name">Software</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-upgrade"><span class="title-number">4.10 </span><span class="title-name">Upgrade</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Services"><span class="title-number">4.11 </span><span class="title-name">Services and targets</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Network"><span class="title-number">4.12 </span><span class="title-name">Network configuration</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-Proxy"><span class="title-number">4.13 </span><span class="title-name">Proxy</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-NIS"><span class="title-number">4.14 </span><span class="title-name">NIS client and server</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-NIS-Server"><span class="title-number">4.15 </span><span class="title-name">NIS server</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-Host"><span class="title-number">4.16 </span><span class="title-name">Hosts definition</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-Samba-client"><span class="title-number">4.17 </span><span class="title-name">Windows domain membership</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-Samba-server"><span class="title-number">4.18 </span><span class="title-name">Samba server</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-Auth"><span class="title-number">4.19 </span><span class="title-name">Authentication client</span></a></span></li><li><span class="sect1"><a href="#ay-nfs"><span class="title-number">4.20 </span><span class="title-name">NFS client and server</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-Ntp"><span class="title-number">4.21 </span><span class="title-name">NTP client</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-Sendmail"><span class="title-number">4.22 </span><span class="title-name">Mail server configuration</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-apache"><span class="title-number">4.23 </span><span class="title-name">Apache HTTP server configuration</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-Squid"><span class="title-number">4.24 </span><span class="title-name">Squid server</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-Ftp"><span class="title-number">4.25 </span><span class="title-name">FTP server</span></a></span></li><li><span class="sect1"><a href="#Configuration-Network-Tftp"><span class="title-number">4.26 </span><span class="title-name">TFTP server</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Firstboot"><span class="title-number">4.27 </span><span class="title-name">Firstboot workflow</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Security"><span class="title-number">4.28 </span><span class="title-name">Security settings</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Security-laf"><span class="title-number">4.29 </span><span class="title-name">Linux audit framework (LAF)</span></a></span></li><li><span class="sect1"><a href="#Configuration-Security-users-and-groups"><span class="title-number">4.30 </span><span class="title-name">Users and groups</span></a></span></li><li><span class="sect1"><a href="#createprofile-scripts"><span class="title-number">4.31 </span><span class="title-name">Custom user scripts</span></a></span></li><li><span class="sect1"><a href="#createprofile-sysconfig"><span class="title-number">4.32 </span><span class="title-name">System variables (sysconfig)</span></a></span></li><li><span class="sect1"><a href="#createprofile-completeconf"><span class="title-number">4.33 </span><span class="title-name">Adding complete configurations</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Ask"><span class="title-number">4.34 </span><span class="title-name">Ask the user for values during installation</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-kdump"><span class="title-number">4.35 </span><span class="title-name">Kernel dumps</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-dns-server"><span class="title-number">4.36 </span><span class="title-name">DNS server</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-dhcp-server"><span class="title-number">4.37 </span><span class="title-name">DHCP server</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-firewall"><span class="title-number">4.38 </span><span class="title-name">Firewall configuration</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-Hardware"><span class="title-number">4.39 </span><span class="title-name">Miscellaneous hardware and system components</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-SSHKeysAndConfig"><span class="title-number">4.40 </span><span class="title-name">Importing SSH keys and configuration</span></a></span></li><li><span class="sect1"><a href="#CreateProfile-ConfigurationManagement"><span class="title-number">4.41 </span><span class="title-name">Configuration management</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#part-dynamic-profiles"><span class="title-number">III </span><span class="title-name">Managing mass installations with dynamic profiles</span></a></span><ul><li><span class="chapter"><a href="#dynamic-profiles"><span class="title-number">5 </span><span class="title-name">Supported approaches to dynamic profiles</span></a></span></li><li><span class="chapter"><a href="#rulesandclass"><span class="title-number">6 </span><span class="title-name">Rules and classes</span></a></span><ul><li><span class="sect1"><a href="#rules"><span class="title-number">6.1 </span><span class="title-name">Rule-based automatic installation</span></a></span></li><li><span class="sect1"><a href="#classes"><span class="title-number">6.2 </span><span class="title-name">Classes</span></a></span></li><li><span class="sect1"><a href="#mixinfrulesclasses"><span class="title-number">6.3 </span><span class="title-name">Mixing rules and classes</span></a></span></li><li><span class="sect1"><a href="#merging"><span class="title-number">6.4 </span><span class="title-name">Merging of rules and classes</span></a></span></li></ul></li><li><span class="chapter"><a href="#erb-templates"><span class="title-number">7 </span><span class="title-name">ERB templates</span></a></span><ul><li><span class="sect1"><a href="#erb"><span class="title-number">7.1 </span><span class="title-name">What is ERB?</span></a></span></li><li><span class="sect1"><a href="#erb-helpers"><span class="title-number">7.2 </span><span class="title-name">Template helpers</span></a></span></li><li><span class="sect1"><a href="#erb-running-helpers"><span class="title-number">7.3 </span><span class="title-name">Running ERB helpers</span></a></span></li><li><span class="sect1"><a href="#erb-rendering-profile"><span class="title-number">7.4 </span><span class="title-name">Rendering ERB profiles</span></a></span></li><li><span class="sect1"><a href="#erb-debugging-erb"><span class="title-number">7.5 </span><span class="title-name">Debugging ERB profiles</span></a></span></li><li><span class="sect1"><a href="#erb-comparison"><span class="title-number">7.6 </span><span class="title-name">ERB compared to rules and classes</span></a></span></li></ul></li><li><span class="chapter"><a href="#pre-scripts"><span class="title-number">8 </span><span class="title-name">Combining ERB templates and scripts</span></a></span><ul><li><span class="sect1"><a href="#erb-and-scripts"><span class="title-number">8.1 </span><span class="title-name">Embedding ERB in your scripts</span></a></span></li><li><span class="sect1"><a href="#erb-helpers-in-scripts"><span class="title-number">8.2 </span><span class="title-name">Accessing ERB helpers from Ruby scripts</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#id-1.7.7"><span class="title-number">IV </span><span class="title-name">Understanding the auto-installation process</span></a></span><ul><li><span class="chapter"><a href="#Invoking"><span class="title-number">9 </span><span class="title-name">The auto-installation process</span></a></span><ul><li><span class="sect1"><a href="#Installation-process"><span class="title-number">9.1 </span><span class="title-name">Introduction</span></a></span></li><li><span class="sect1"><a href="#bootmedium"><span class="title-number">9.2 </span><span class="title-name">Choosing the right boot medium</span></a></span></li><li><span class="sect1"><a href="#invoking-autoinst"><span class="title-number">9.3 </span><span class="title-name">Invoking the auto-installation process</span></a></span></li><li><span class="sect1"><a href="#System-Configuration"><span class="title-number">9.4 </span><span class="title-name">System configuration</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#id-1.7.8"><span class="title-number">V </span><span class="title-name">Uses for AutoYaST on installed systems</span></a></span><ul><li><span class="chapter"><a href="#InstalledSystem"><span class="title-number">10 </span><span class="title-name">Running AutoYaST in an installed system</span></a></span></li></ul></li><li><span class="part"><a href="#id-1.7.9"><span class="title-number">VI </span><span class="title-name">Appendixes</span></a></span><ul><li><span class="appendix"><a href="#handlingrules"><span class="title-number">A </span><span class="title-name">Handling rules</span></a></span></li><li><span class="appendix"><a href="#app-ay-faq"><span class="title-number">B </span><span class="title-name">AutoYaST FAQ—frequently asked questions</span></a></span></li><li><span class="appendix"><a href="#appendix-linuxrc"><span class="title-number">C </span><span class="title-name">Advanced <code class="command">linuxrc</code> options</span></a></span><ul><li><span class="sect1"><a href="#ay-cmd-parameters"><span class="title-number">C.1 </span><span class="title-name">Passing parameters to <code class="command">linuxrc</code></span></a></span></li><li><span class="sect1"><a href="#info-file-format"><span class="title-number">C.2 </span><span class="title-name"><code class="filename">info</code> file format</span></a></span></li><li><span class="sect1"><a href="#ay-adv-network"><span class="title-number">C.3 </span><span class="title-name">Advanced network setup</span></a></span></li></ul></li><li><span class="appendix"><a href="#appendix-ay-12vs15"><span class="title-number">D </span><span class="title-name">Differences between AutoYaST profiles in SLE 12 and 15</span></a></span><ul><li><span class="sect1"><a href="#sec-ay-12vs15-product-selection"><span class="title-number">D.1 </span><span class="title-name">Product selection</span></a></span></li><li><span class="sect1"><a href="#sec-ay-12vs15-software"><span class="title-number">D.2 </span><span class="title-name">Software</span></a></span></li><li><span class="sect1"><a href="#sec-ay-12vs15-registration"><span class="title-number">D.3 </span><span class="title-name">Registration of module and extension dependencies</span></a></span></li><li><span class="sect1"><a href="#sec-ay-12vs15-partitioning"><span class="title-number">D.4 </span><span class="title-name">Partitioning</span></a></span></li><li><span class="sect1"><a href="#sec-ay-12vs15-firewall"><span class="title-number">D.5 </span><span class="title-name">Firewall configuration</span></a></span></li><li><span class="sect1"><a href="#sec-ay-12vs15-ntp"><span class="title-number">D.6 </span><span class="title-name">NTP configuration</span></a></span></li><li><span class="sect1"><a href="#sec-ay-12vs15-2nd-stage"><span class="title-number">D.7 </span><span class="title-name">AutoYaST packages are needed for the second stage</span></a></span></li><li><span class="sect1"><a href="#sec-ay-12vs15-ca"><span class="title-number">D.8 </span><span class="title-name">The CA management module has been dropped</span></a></span></li><li><span class="sect1"><a href="#sec-ay-12vs15-upgrade"><span class="title-number">D.9 </span><span class="title-name">Upgrade</span></a></span></li></ul></li><li><span class="appendix"><a href="#id-1.7.9.6"><span class="title-number">E </span><span class="title-name">GNU licenses</span></a></span><ul><li><span class="sect1"><a href="#id-1.7.9.6.4"><span class="title-number">E.1 </span><span class="title-name">GNU Free Documentation License</span></a></span></li></ul></li></ul></li></ul></div><div class="list-of-figures"><div class="toc-title">List of Figures</div><ul><li><span class="figure"><a href="#id-1.7.4.3.4.4"><span class="number">3.1 </span><span class="name">Configuration system</span></a></span></li><li><span class="figure"><a href="#partitioning-keep1"><span class="number">4.1 </span><span class="name">Keeping partitions</span></a></span></li><li><span class="figure"><a href="#rules-fig1"><span class="number">6.1 </span><span class="name">Rules</span></a></span></li><li><span class="figure"><a href="#id-1.7.6.3.7.9"><span class="number">6.2 </span><span class="name">Defining classes</span></a></span></li><li><span class="figure"><a href="#rulesflow"><span class="number">A.1 </span><span class="name">Rules retrieval process</span></a></span></li></ul></div><div class="list-of-tables"><div class="toc-title">List of Tables</div><ul><li><span class="table"><a href="#id-1.7.6.3.6.18.4"><span class="number">6.1 </span><span class="name">System attributes</span></a></span></li><li><span class="table"><a href="#id-1.7.9.4.9.7"><span class="number">C.1 </span><span class="name">Advanced <code class="command">linuxrc</code> keywords</span></a></span></li><li><span class="table"><a href="#id-1.7.9.5.7.4"><span class="number">D.1 </span><span class="name">AutoYaST firewall configuration in SLE 15: backward compatibility</span></a></span></li><li><span class="table"><a href="#id-1.7.9.5.7.8.3"><span class="number">D.2 </span><span class="name">Mapping of SuSEfirewall2 and <code class="systemitem">firewalld</code> zones</span></a></span></li></ul></div><div class="list-of-examples"><div class="toc-title">List of Examples</div><ul><li><span class="example"><a href="#id-1.7.4.2.4.5"><span class="number">2.1 </span><span class="name">AutoYaST control file (profile)</span></a></span></li><li><span class="example"><a href="#id-1.7.4.2.5.3"><span class="number">2.2 </span><span class="name">Control file container</span></a></span></li><li><span class="example"><a href="#id-1.7.4.2.5.6.4"><span class="number">2.3 </span><span class="name">Nested resources</span></a></span></li><li><span class="example"><a href="#id-1.7.4.2.5.7.4"><span class="number">2.4 </span><span class="name">An empty map</span></a></span></li><li><span class="example"><a href="#id-1.7.4.3.6.4"><span class="number">3.1 </span><span class="name">Example file for replacing the host name/domain by script</span></a></span></li><li><span class="example"><a href="#ex-general-common"><span class="number">4.1 </span><span class="name">General options</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.7.5"><span class="number">4.2 </span><span class="name">Reporting behavior</span></a></span></li><li><span class="example"><a href="#example-lvm-guided"><span class="number">4.3 </span><span class="name">LVM-based guided partitioning</span></a></span></li><li><span class="example"><a href="#example-partitioning"><span class="number">4.4 </span><span class="name">Creating <code class="literal">/</code>, <code class="literal">/home</code> and <code class="literal">swap</code> partitions</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.8.10.4"><span class="number">4.5 </span><span class="name">Using a whole disk as a file system</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.8.11.3"><span class="number">4.6 </span><span class="name">Automated partitioning on selected drives</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.8.11.5"><span class="number">4.7 </span><span class="name">Installing on multiple drives</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.9.4.7"><span class="number">4.8 </span><span class="name">Mount options</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.9.5.5"><span class="number">4.9 </span><span class="name">Keeping partitions</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.9.5.9"><span class="number">4.10 </span><span class="name">Auto-detection of partitions to be kept.</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.10.3"><span class="number">4.11 </span><span class="name">Create LVM physical volume</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.10.4"><span class="number">4.12 </span><span class="name">LVM logical volumes</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.11.9"><span class="number">4.13 </span><span class="name">RAID10 configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.11.11"><span class="number">4.14 </span><span class="name">RAID10 without partitions</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.11.12.6"><span class="number">4.15 </span><span class="name">Old style RAID10 configuration</span></a></span></li><li><span class="example"><a href="#multipath-example"><span class="number">4.16 </span><span class="name">Using multipath devices</span></a></span></li><li><span class="example"><a href="#multipath-ll-output"><span class="number">4.17 </span><span class="name">Listing multipath devices</span></a></span></li><li><span class="example"><a href="#multipath-wwid-example"><span class="number">4.18 </span><span class="name">Using the WWID to identify a multipath device</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.13.6"><span class="number">4.19 </span><span class="name"><code class="systemitem">bcache</code> definition</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.14.6"><span class="number">4.20 </span><span class="name">Multi-device Btrfs configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.15.4"><span class="number">4.21 </span><span class="name">NFS share definition</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.10.16.3"><span class="number">4.22 </span><span class="name"><code class="literal">tmpfs</code> definition</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.11.4"><span class="number">4.23 </span><span class="name">iSCSI client</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.12.4"><span class="number">4.24 </span><span class="name">FCoE configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.13.4"><span class="number">4.25 </span><span class="name">Language</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.13.8"><span class="number">4.26 </span><span class="name">Time zone</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.13.10"><span class="number">4.27 </span><span class="name">Keyboard</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.14.4.5"><span class="number">4.28 </span><span class="name">Explicit product selection</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.14.5.3"><span class="number">4.29 </span><span class="name">Package selection in the control file with patterns and packages sections</span></a></span></li><li><span class="example"><a href="#ay-packages-selection-using-a-regexp"><span class="number">4.30 </span><span class="name">Packages selection using a regular expression</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.14.6.5"><span class="number">4.31 </span><span class="name">Creating a package database with the additional package inst-source-utils.rpm</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.14.6.10"><span class="number">4.32 </span><span class="name"><code class="filename">add_on_products.xml</code>
     </span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.14.6.15"><span class="number">4.33 </span><span class="name">Adding the SDK extension and a user defined repository</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.14.7.4"><span class="number">4.34 </span><span class="name">Kernel selection in the control file</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.14.8.4"><span class="number">4.35 </span><span class="name">Package selection in control file</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.15.6"><span class="number">4.36 </span><span class="name">Upgrade and backup</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.16.8"><span class="number">4.37 </span><span class="name">Configuring services and targets</span></a></span></li><li><span class="example"><a href="#ex-ay-network-config-general"><span class="number">4.38 </span><span class="name">Network configuration</span></a></span></li><li><span class="example"><a href="#ex-ay-network-config-bond"><span class="number">4.39 </span><span class="name">Bonding interface configuration</span></a></span></li><li><span class="example"><a href="#ex-ay-network-config-bridge"><span class="number">4.40 </span><span class="name">Bridge interface configuration</span></a></span></li><li><span class="example"><a href="#ex-ay-network-config-aliases"><span class="number">4.41 </span><span class="name">Multiple IP Addresses</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.17.7.5"><span class="number">4.42 </span><span class="name">Assigning a persistent name using the MAC address</span></a></span></li><li><span class="example"><a href="#ex-ay-network-routing"><span class="number">4.43 </span><span class="name">Network routing configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.18.5"><span class="number">4.44 </span><span class="name">Network configuration: proxy</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.19.4"><span class="number">4.45 </span><span class="name">Network configuration: NIS</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.20.4"><span class="number">4.46 </span><span class="name">NIS server configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.21.4"><span class="number">4.47 </span><span class="name">/etc/hosts</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.22.4"><span class="number">4.48 </span><span class="name">Samba client configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.23.4"><span class="number">4.49 </span><span class="name">Samba server configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.25.6"><span class="number">4.50 </span><span class="name">Network configuration: NFS client</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.25.7"><span class="number">4.51 </span><span class="name">Network configuration: NFS server</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.26.5"><span class="number">4.52 </span><span class="name">Network configuration: NTP client</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.27.4"><span class="number">4.53 </span><span class="name">Mail configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.28.5"><span class="number">4.54 </span><span class="name">HTTP server configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.29.4"><span class="number">4.55 </span><span class="name">Squid server configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.30.4"><span class="number">4.56 </span><span class="name">FTP server configuration:</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.31.6"><span class="number">4.57 </span><span class="name">TFTP server configuration:</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.32.4"><span class="number">4.58 </span><span class="name">Enabling firstboot workflow</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.33.5"><span class="number">4.59 </span><span class="name">Security configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.33.11.7"><span class="number">4.60 </span><span class="name">Select the <span class="orgname">Defense Information Systems Agency</span> Security Technical Implementation Guide</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.34.4"><span class="number">4.61 </span><span class="name">LAF configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.35.3.3"><span class="number">4.62 </span><span class="name">Minimal user configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.35.3.5"><span class="number">4.63 </span><span class="name">Complex user configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.35.5.3"><span class="number">4.64 </span><span class="name">Group configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.35.6.3"><span class="number">4.65 </span><span class="name">Enabling autologin and password-less login</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.36.13.2"><span class="number">4.66 </span><span class="name">Script configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.37.5"><span class="number">4.67 </span><span class="name">Sysconfig configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.38.9"><span class="number">4.68 </span><span class="name">Dumping files into the installed system</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.38.11"><span class="number">4.69 </span><span class="name">Dumping files into the installed system</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.40.8"><span class="number">4.70 </span><span class="name">Kdump configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.40.10"><span class="number">4.71 </span><span class="name">Disabled Kdump configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.40.11.8"><span class="number">4.72 </span><span class="name">Kdump memory reservation with multiple values</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.41.5"><span class="number">4.73 </span><span class="name">Basic DNS server settings</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.41.8"><span class="number">4.74 </span><span class="name">Configuring DNS server zones and advanced settings</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.42.5"><span class="number">4.75 </span><span class="name">Example dhcp-server section</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.43.8.3"><span class="number">4.76 </span><span class="name">Example firewall section</span></a></span></li><li><span class="example"><a href="#printer-conf"><span class="number">4.77 </span><span class="name">Printer configuration</span></a></span></li><li><span class="example"><a href="#id-1.7.5.2.44.6.3"><span class="number">4.78 </span><span class="name">Sound configuration</span></a></span></li><li><span class="example"><a href="#import-ssh"><span class="number">4.79 </span><span class="name">Importing SSH keys and configuration from /dev/sda2</span></a></span></li><li><span class="example"><a href="#configuration-management-manual-authentication"><span class="number">4.80 </span><span class="name">Client/server with manual authentication</span></a></span></li><li><span class="example"><a href="#configuration-management-preseed-keys"><span class="number">4.81 </span><span class="name">Client/server with preseed keys</span></a></span></li><li><span class="example"><a href="#configuration-management-masterless"><span class="number">4.82 </span><span class="name">Stand-alone mode</span></a></span></li><li><span class="example"><a href="#id-1.7.6.3.6.13.2"><span class="number">6.1 </span><span class="name">Simple rules file</span></a></span></li><li><span class="example"><a href="#id-1.7.6.3.6.13.7"><span class="number">6.2 </span><span class="name">Simple rules file</span></a></span></li><li><span class="example"><a href="#simple-erb"><span class="number">7.1 </span><span class="name">Including a file using ERB</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.5.6"><span class="number">7.2 </span><span class="name">Running commands with Ruby</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.5.8"><span class="number">7.3 </span><span class="name">Using Ruby structures</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.6.3.3"><span class="number">7.4 </span><span class="name">Configuring the boot loader</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.6.4.5"><span class="number">7.5 </span><span class="name">Using the largest disk</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.6.5.5"><span class="number">7.6 </span><span class="name">Configure the connected network cards</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.6.6.5"><span class="number">7.7 </span><span class="name">Reusing the same profile for different distributions</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.6.7.3"><span class="number">7.8 </span><span class="name">Filtering USB devices</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.7.3"><span class="number">7.9 </span><span class="name">Running helpers</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.8.3"><span class="number">7.10 </span><span class="name">Rendering profile</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.9.3"><span class="number">7.11 </span><span class="name">Preparing the debug environment</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.9.5"><span class="number">7.12 </span><span class="name">Adding a breakpoint</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.10.3"><span class="number">7.13 </span><span class="name">Rules and classes</span></a></span></li><li><span class="example"><a href="#id-1.7.6.4.10.4"><span class="number">7.14 </span><span class="name">ERB</span></a></span></li><li><span class="example"><a href="#combining-erb-and-scripts"><span class="number">8.1 </span><span class="name">Using the MAC address to get the profile</span></a></span></li><li><span class="example"><a href="#ruby-script-erb-helpers"><span class="number">8.2 </span><span class="name">Accessing ERB helpers from a Ruby script</span></a></span></li><li><span class="example"><a href="#id-1.7.7.2.5.3.25"><span class="number">9.1 </span><span class="name">Determine HEX code for an IP address</span></a></span></li><li><span class="example"><a href="#id-1.7.7.2.5.5.4"><span class="number">9.2 </span><span class="name"><code class="command">linuxrc</code> Options in the AutoYaST control file</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-software-scc"><span class="number">D.1 </span><span class="name">Adding modules and extensions (online)</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-software-packagemedia"><span class="number">D.2 </span><span class="name">Adding modules and extensions (offline)</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-partitioning-default-subvolume"><span class="number">D.3 </span><span class="name">Specifying the Btrfs default subvolume name</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-partitioning-disabling-btrfs-subvolumes"><span class="number">D.4 </span><span class="name">Disabling Btrfs subvolumes</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-firewall-zones-default-deprecated"><span class="number">D.5 </span><span class="name">Assigning zones: default configuration (deprecated syntax)</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-firewall-zones-default-supported"><span class="number">D.6 </span><span class="name">Assigning zones: default configuration (SLE 15 syntax)</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-firewall-masq-deprecated"><span class="number">D.7 </span><span class="name">Masquerading and protecting internal zones (deprecated syntax)</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-firewall-masq-supported"><span class="number">D.8 </span><span class="name">Masquerading and protecting internal zones (SLE 15 syntax)</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-firewall-ports-deprecated"><span class="number">D.9 </span><span class="name">Opening ports (deprecated syntax)</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-firewall-ports-supported"><span class="number">D.10 </span><span class="name">Opening ports (SLE 15 syntax)</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-firewall-services-deprecated"><span class="number">D.11 </span><span class="name">
     Opening Services (Deprecated Syntax)
    </span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-firewall-services-supported"><span class="number">D.12 </span><span class="name">Opening services (SLE 15 syntax)</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-ntp"><span class="number">D.13 </span><span class="name">NTP configuration (SLE 15 syntax)</span></a></span></li><li><span class="example"><a href="#ex-ay-12vs15-minimal-registration"><span class="number">D.14 </span><span class="name">Minimal registration configuration for upgrade</span></a></span></li></ul></div><div><div xml:lang="en" class="legalnotice" id="id-1.7.1.5"><p>
  Copyright © 2006–2024

  SUSE LLC and contributors. All rights reserved.
 </p><p>
  Permission is granted to copy, distribute and/or modify this document under
  the terms of the GNU Free Documentation License, Version 1.2 or (at your
  option) version 1.3; with the Invariant Section being this copyright notice
  and license. A copy of the license version 1.2 is included in the section
  entitled <span class="quote">“<span class="quote">GNU Free Documentation License</span>”</span>.
 </p><p>
  For SUSE trademarks, see
  <a class="link" href="https://www.suse.com/company/legal/" target="_blank">https://www.suse.com/company/legal/</a>. All
  third-party trademarks are the property of their respective owners. Trademark
  symbols (®, ™ etc.) denote trademarks of SUSE and its affiliates.
  Asterisks (*) denote third-party trademarks.
 </p><p>
  All information found in this book has been compiled with utmost attention to
  detail. However, this does not guarantee complete accuracy. Neither
  SUSE LLC, its affiliates, the authors nor the translators shall be
  held liable for possible errors or the consequences thereof.
 </p></div></div><section class="preface" id="ay-preface" data-id-title="Preface"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number"> </span><span class="title-name">Preface</span></span> <a title="Permalink" class="permalink" href="#ay-preface">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_intro.xml" title="Edit source document"> </a></div></div></div></div></div><section xml:lang="en" class="sect1" id="id-1.7.2.3" data-id-title="Available documentation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1 </span><span class="title-name">Available documentation</span></span> <a title="Permalink" class="permalink" href="#id-1.7.2.3">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_available_doc.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.2.3.3.1"><span class="term">Online documentation</span></dt><dd><p>
     Our documentation is available online at <a class="link" href="https://documentation.suse.com" target="_blank">https://documentation.suse.com</a>.
     Browse or download the documentation in various formats.
    </p><div id="id-1.7.2.3.3.1.2.2" data-id-title="Latest updates" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Latest updates</div><p>
      The latest updates are usually available in the English-language version of this documentation.
     </p></div></dd><dt id="id-1.7.2.3.3.2"><span class="term">SUSE Knowledgebase</span></dt><dd><p>
     If you have run into an issue, also check out the Technical Information
     Documents (TIDs) that are available online at <a class="link" href="https://www.suse.com/support/kb/" target="_blank">https://www.suse.com/support/kb/</a>.
     Search the SUSE Knowledgebase for known solutions driven by customer need.
     </p></dd><dt id="id-1.7.2.3.3.3"><span class="term">Release notes</span></dt><dd><p>
     For release notes, see
     <a class="link" href="https://www.suse.com/releasenotes/" target="_blank">https://www.suse.com/releasenotes/</a>.
    </p></dd><dt id="id-1.7.2.3.3.4"><span class="term">In your system</span></dt><dd><p>
      For offline use, the release notes are also available under
      <code class="filename">/usr/share/doc/release-notes</code> on your system.
      The documentation for individual packages is available at
      <code class="filename">/usr/share/doc/packages</code>.
    </p><p>
      Many commands are also described in their <span class="emphasis"><em>manual
      pages</em></span>. To view them, run <code class="command">man</code>, followed
      by a specific command name. If the <code class="command">man</code> command is
      not installed on your system, install it with <code class="command">sudo zypper
      install man</code>.
    </p></dd></dl></div></section><section xml:lang="en" class="sect1" id="id-1.7.2.4" data-id-title="Improving the documentation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2 </span><span class="title-name">Improving the documentation</span></span> <a title="Permalink" class="permalink" href="#id-1.7.2.4">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_feedback.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Your feedback and contributions to this documentation are welcome.
  The following channels for giving feedback are available:
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.2.4.4.1"><span class="term">Service requests and support</span></dt><dd><p>
     For services and support options available for your product, see
     <a class="link" href="https://www.suse.com/support/" target="_blank">https://www.suse.com/support/</a>.
    </p><p>
     To open a service request, you need a SUSE subscription registered at
     SUSE Customer Center.
     Go to <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a>, log
     in, and click <span class="guimenu">Create New</span>.
    </p></dd><dt id="id-1.7.2.4.4.2"><span class="term">Bug reports</span></dt><dd><p>
     Report issues with the documentation at <a class="link" href="https://bugzilla.suse.com/" target="_blank">https://bugzilla.suse.com/</a>.
    </p><p>
     To simplify this process, click the <span class="guimenu">Report
     an issue</span> icon next to a headline in the HTML
     version of this document. This preselects the right product and
     category in Bugzilla and adds a link to the current section.
     You can start typing your bug report right away.
    </p><p>
     A Bugzilla account is required.
    </p></dd><dt id="id-1.7.2.4.4.3"><span class="term">Contributions</span></dt><dd><p>
     To contribute to this documentation, click the <span class="guimenu">Edit source
     document</span> icon next to a headline in the HTML version of
     this document. This will take you to the source code on GitHub, where you
     can open a pull request.</p><p>
     A GitHub account is required.
    </p><div id="id-1.7.2.4.4.3.2.3" data-id-title="Edit source document only available for English" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: <span class="guimenu">Edit source document</span> only available for English</div><p>
      The <span class="guimenu">Edit source document</span> icons are only available for the
      English version of each document. For all other languages, use the
      <span class="guimenu">Report an issue</span> icons instead.
     </p></div><p>
     For more information about the documentation environment used for this
     documentation, see the repository's README.
    </p></dd><dt id="id-1.7.2.4.4.4"><span class="term">Mail</span></dt><dd><p>
     You can also report errors and send feedback concerning the
     documentation to &lt;<a class="email" href="mailto:doc-team@suse.com">doc-team@suse.com</a>&gt;. Include the
     document title, the product version, and the publication date of the
     document. Additionally, include the relevant section number and title (or
     provide the URL) and provide a concise description of the problem.
    </p></dd></dl></div></section><section xml:lang="en" class="sect1" id="id-1.7.2.5" data-id-title="Documentation conventions"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Documentation conventions</span></span> <a title="Permalink" class="permalink" href="#id-1.7.2.5">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_convention.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The following notices and typographic conventions are used in this
  document:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    <code class="filename">/etc/passwd</code>: Directory names and file names
   </p></li><li class="listitem"><p>
    <em class="replaceable">PLACEHOLDER</em>: Replace
    <em class="replaceable">PLACEHOLDER</em> with the actual value
   </p></li><li class="listitem"><p>
    <code class="envar">PATH</code>: An environment variable
   </p></li><li class="listitem"><p>
    <code class="command">ls</code>, <code class="option">--help</code>: Commands, options, and
    parameters
   </p></li><li class="listitem"><p>
    <code class="systemitem">user</code>: The name of a user or group
   </p></li><li class="listitem"><p>
    <span class="package">package_name</span>: The name of a software package
   </p></li><li class="listitem"><p>
    <span class="keycap">Alt</span>, <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>: A key to press or a key combination. Keys
    are shown in uppercase as on a keyboard.
   </p></li><li class="listitem"><p>
    <span class="guimenu">File</span>, <span class="guimenu">File</span> › <span class="guimenu">Save
    As</span>: menu items, buttons
   </p></li><li class="listitem"><p><strong class="arch-arrow-start">AMD/Intel</strong>
    This paragraph is only relevant for the AMD64/Intel 64 architectures. The
    arrows mark the beginning and the end of the text block.
   <strong class="arch-arrow-end"> </strong></p><p><strong class="arch-arrow-start">IBM Z, POWER</strong>
    This paragraph is only relevant for the architectures
    <code class="literal">IBM Z</code> and <code class="literal">POWER</code>. The arrows
    mark the beginning and the end of the text block.
   <strong class="arch-arrow-end"> </strong></p></li><li class="listitem"><p>
    <em class="citetitle">Chapter 1, <span class="quote">“<span class="quote">Example chapter</span>”</span></em>:
    A cross-reference to another chapter in this guide.
   </p></li><li class="listitem"><p>
    Commands that must be run with <code class="systemitem">root</code> privileges. You can also
    prefix these commands with the <code class="command">sudo</code> command to run them
    as a non-privileged user:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">command</code>
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">command</code></pre></div></li><li class="listitem"><p>
    Commands that can be run by non-privileged users:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">command</code></pre></div></li><li class="listitem"><p>
    Commands can be split into two or multiple lines by a backslash character
    (<code class="literal">\</code>) at the end of a line. The backslash informs the shell that
    the command invocation will continue after the line's end:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">echo</code> a b \
c d</pre></div></li><li class="listitem"><p>
     A code block that shows both the command (preceded by a prompt)
     and the respective output returned by the shell:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">command</code>
output</pre></div></li><li class="listitem"><p>
    Notices
   </p><div id="id-1.7.2.5.4.15.2" data-id-title="Warning notice" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Warning notice</div><p>
     Vital information you must be aware of before proceeding. Warns you about
     security issues, potential loss of data, damage to hardware, or physical
     hazards.
    </p></div><div id="id-1.7.2.5.4.15.3" data-id-title="Important notice" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Important notice</div><p>
     Important information you should be aware of before proceeding.
    </p></div><div id="id-1.7.2.5.4.15.4" data-id-title="Note notice" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Note notice</div><p>
     Additional information, for example about differences in software
     versions.
    </p></div><div id="id-1.7.2.5.4.15.5" data-id-title="Tip notice" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Tip notice</div><p>
     Helpful information, like a guideline or a piece of practical advice.
    </p></div></li><li class="listitem"><p>
    Compact Notices
   </p><div id="id-1.7.2.5.4.16.2" class="admonition note compact"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><p>
     Additional information, for example about differences in software
     versions.
    </p></div><div id="id-1.7.2.5.4.16.3" class="admonition tip compact"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><p>
     Helpful information, like a guideline or a piece of practical advice.
    </p></div></li></ul></div></section><section xml:lang="en" class="sect1" id="id-1.7.2.6" data-id-title="Support"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4 </span><span class="title-name">Support</span></span> <a title="Permalink" class="permalink" href="#id-1.7.2.6">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Find the support statement for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> and general information about
  technology previews below.
  For details about the product lifecycle, see
  <a class="link" href="https://www.suse.com/lifecycle" target="_blank">https://www.suse.com/lifecycle</a>.
 </p><p>
  If you are entitled to support, find details on how to collect information
  for a support ticket at
  <a class="link" href="https://documentation.suse.com/sles-15/html/SLES-all/cha-adm-support.html" target="_blank">https://documentation.suse.com/sles-15/html/SLES-all/cha-adm-support.html</a>.
 </p><section class="sect2" id="id-1.7.2.6.5" data-id-title="Support statement for SUSE Linux Enterprise Server"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1 </span><span class="title-name">Support statement for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span></span> <a title="Permalink" class="permalink" href="#id-1.7.2.6.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To receive support, you need an appropriate subscription with SUSE.
   To view the specific support offers available to you, go to
   <a class="link" href="https://www.suse.com/support/" target="_blank">https://www.suse.com/support/</a> and select your product.
  </p><p>
   The support levels are defined as follows:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.2.6.5.4.1"><span class="term">L1</span></dt><dd><p>
      Problem determination, which means technical support designed to provide
      compatibility information, usage support, ongoing maintenance,
      information gathering and basic troubleshooting using available
      documentation.
     </p></dd><dt id="id-1.7.2.6.5.4.2"><span class="term">L2</span></dt><dd><p>
      Problem isolation, which means technical support designed to analyze
      data, reproduce customer problems, isolate a problem area and provide a
      resolution for problems not resolved by Level 1 or prepare for
      Level 3.
     </p></dd><dt id="id-1.7.2.6.5.4.3"><span class="term">L3</span></dt><dd><p>
      Problem resolution, which means technical support designed to resolve
      problems by engaging engineering to resolve product defects which have
      been identified by Level 2 Support.
     </p></dd></dl></div><p>
   For contracted customers and partners, <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is delivered with L3
   support for all packages, except for the following:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Technology previews.
    </p></li><li class="listitem"><p>
     Sound, graphics, fonts, and artwork.
    </p></li><li class="listitem"><p>
     Packages that require an additional customer contract.
    </p></li><li class="listitem"><p>
     Some packages shipped as part of the module <span class="emphasis"><em>Workstation
     Extension</em></span> are L2-supported only.
    </p></li><li class="listitem"><p>
     Packages with names ending in <span class="package">-devel</span> (containing header
     files and similar developer resources) will only be supported together
     with their main packages.
    </p></li></ul></div><p>
   SUSE will only support the usage of original packages.
   That is, packages that are unchanged and not recompiled.
  </p></section><section class="sect2" id="id-1.7.2.6.6" data-id-title="Technology previews"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.2 </span><span class="title-name">Technology previews</span></span> <a title="Permalink" class="permalink" href="#id-1.7.2.6.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Technology previews are packages, stacks, or features delivered by SUSE
   to provide glimpses into upcoming innovations.
   Technology previews are included for your convenience to give you a chance
   to test new technologies within your environment.
   We would appreciate your feedback.
   If you test a technology preview, please contact your SUSE representative
   and let them know about your experience and use cases.
   Your input is helpful for future development.
  </p><p>
   Technology previews have the following limitations:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Technology previews are still in development.
     Therefore, they may be functionally incomplete, unstable, or otherwise
     <span class="emphasis"><em>not</em></span> suitable for production use.
    </p></li><li class="listitem"><p>
     Technology previews are <span class="emphasis"><em>not</em></span> supported.
    </p></li><li class="listitem"><p>
     Technology previews may only be available for specific hardware
     architectures.
    </p></li><li class="listitem"><p>
     Details and functionality of technology previews are subject to change.
     As a result, upgrading to subsequent releases of a technology preview may
     be impossible and require a fresh installation.
    </p></li><li class="listitem"><p>
     SUSE may discover that a preview does not meet customer or market needs,
     or does not comply with enterprise standards.
     Technology previews can be removed from a product at any time.
     SUSE does not commit to providing a supported version of such
     technologies in the future.
    </p></li></ul></div><p>
   For an overview of technology previews shipped with your product, see the
   release notes at <a class="link" href="https://www.suse.com/releasenotes" target="_blank">https://www.suse.com/releasenotes</a>.
  </p></section></section></section><section class="chapter" id="cha-intro-to-autoyast" data-id-title="Introduction to AutoYaST"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">1 </span><span class="title-name">Introduction to AutoYaST</span></span> <a title="Permalink" class="permalink" href="#cha-intro-to-autoyast">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_introduction.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect1" id="motiv" data-id-title="Motivation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.1 </span><span class="title-name">Motivation</span></span> <a title="Permalink" class="permalink" href="#motiv">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_introduction.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Standard installations of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> are based on a wizard workflow. This
   is user-friendly and efficient when installing on few machines. However, it
   becomes repetitive and time-consuming when installing on many machines.
  </p><p>
   To avoid this, you could do mass deployments by copying the hard disk of the
   first successful installation. Unfortunately, that leads to the issue that
   even minute configuration changes between each machine need to later be
   dealt with individually. For example, when using static IP addresses, these
   IP addresses would need to be reset for each machine.
  </p><p>
   A regular installation of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is semi-automated by default. The
   user is prompted to select the necessary information at the beginning of the
   installation (usually language only). YaST then generates a proposal for
   the underlying system depending on different factors and system parameters.
   Usually—and especially for new systems—such a proposal can be
   used to install the system and provides a usable installation. The steps
   following the proposal are fully automated.
  </p><p>
   AutoYaST can be used where no user intervention is required or where
   customization is required. Using an AutoYaST profile, YaST prepares the system
   for a custom installation and does not interact with the user, unless
   specified in the file controlling the installation.
  </p><p>
   AutoYaST is not an automated GUI system. This means that usually many screens
   will be skipped—you will never see the language selection interface,
   for example. AutoYaST will simply pass the language parameter to the sub-system
   without displaying any language related interface.
  </p></section><section class="sect1" id="overviewandconcept" data-id-title="Overview and concept"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.2 </span><span class="title-name">Overview and concept</span></span> <a title="Permalink" class="permalink" href="#overviewandconcept">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_introduction.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Using AutoYaST, multiple systems can easily be installed in parallel and
   quickly. They need to share the same environment and similar, but not
   necessarily identical, hardware. The installation is defined by an XML
   configuration file (usually named <code class="filename">autoinst.xml</code>) called
   the <span class="quote">“<span class="quote">AutoYaST profile</span>”</span>. You can create this using existing
   configuration resources, and easily tailor it for any specific environment.
  </p><p>
   AutoYaST is fully integrated and provides various options for installing and
   configuring a system. The main advantage over other auto-installation
   systems is the ability to configure a computer by using existing
   modules, and avoid using custom scripts which are normally executed at
   the end of the installation.
  </p><p>
   This document will guide you through the three steps of auto-installation:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Preparation: All relevant information about the target system is collected
     and turned into the appropriate directives in the profile. The profile is
     transferred onto the target system where its directives will be parsed and
     fed into YaST.
    </p></li><li class="listitem"><p>
     Installation: YaST performs the installation and basic configuration
     (for example, partitioning, networking, firewall) of the target system
     using the data from the AutoYaST profile.
    </p></li><li class="listitem"><p>
     Post-configuration: After the installation and configuration of the
     basic system, the system can run a second stage to perform any
     additional configurations that require the target system to be
     already running, such as post-installation scripts, third party
     modules, or some YaST modules.
    </p></li></ul></div><div id="id-1.7.3.4.6" data-id-title="Second stage" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Second stage</div><p>
    A regular installation of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP4</span></span> is performed in a
    single stage. The auto-installation process, however, is divided into two
    stages. After the installation and main configuration of the basic system,
    it is booted into a second stage to perform any post-installation
    configuration steps.
   </p><p>
    The packages <code class="literal">autoyast2</code> and
    <code class="literal">autoyast2-installation</code> need to be installed to run the
    second stage in the installed system correctly. Otherwise an error will be
    shown before booting into the installed system.
   </p><p>
    The second stage runs only if it is strictly necessary, and the second
    stage can be turned off completely with the <code class="literal">second_stage</code>
    parameter:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;mode&gt;
    &lt;confirm config:type="boolean"&gt;false&lt;/confirm&gt;
    &lt;second_stage config:type="boolean"&gt;false&lt;/second_stage&gt;
  &lt;/mode&gt;
&lt;/general&gt;</pre></div></div></section></section><div class="part" id="part-control" data-id-title="Understanding and creating the AutoYaST control file"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part I </span><span class="title-name">Understanding and creating the AutoYaST control file </span></span><a title="Permalink" class="permalink" href="#part-control">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_autoyast.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#cha-autoyast-control-file"><span class="title-number">2 </span><span class="title-name">The AutoYaST control file</span></a></span></li><dd class="toc-abstract"><p>
   A <span class="emphasis"><em>control file</em></span>, also known as a
   <span class="emphasis"><em>profile</em></span>, is a configuration description for a single
   system. It consists of sets of resources with properties including support
   for complex structures such as lists, records, trees and large embedded or
   referenced objects.
  </p></dd><li><span class="chapter"><a href="#cha-autoyast-create-control-file"><span class="title-number">3 </span><span class="title-name">Creating an AutoYaST control file</span></a></span></li><dd class="toc-abstract"><p>
   To create the control file, you need to collect information about the
   systems you are going to install. This includes hardware data and network
   information among other things. Make sure you have the following information
   about the machines you want to install:
  </p></dd></ul></div><section class="chapter" id="cha-autoyast-control-file" data-id-title="The AutoYaST control file"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">2 </span><span class="title-name">The AutoYaST control file</span></span> <a title="Permalink" class="permalink" href="#cha-autoyast-control-file">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect1" id="Profile-Intro" data-id-title="Introduction"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.1 </span><span class="title-name">Introduction</span></span> <a title="Permalink" class="permalink" href="#Profile-Intro">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A <span class="emphasis"><em>control file</em></span>, also known as a
   <span class="emphasis"><em>profile</em></span>, is a configuration description for a single
   system. It consists of sets of resources with properties including support
   for complex structures such as lists, records, trees and large embedded or
   referenced objects.
  </p><div id="id-1.7.4.2.3.3" data-id-title="Control files from OS releases older than SLES 12 GA and openSUSE 42.0 are incompatible" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Control files from OS releases older than SLES 12 GA and openSUSE 42.0 are incompatible</div><p>
    Many major changes were introduced with SLES 12 and openSUSE Leap 42.0,
    such as the switch to systemd and GRUB 2. These changes also required
    fundamental changes in AutoYaST Therefore you cannot use AutoYaST control files
    created on SLES 11 to install <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP4</span></span>, and vice
    versa.
   </p></div></section><section class="sect1" id="Profile-Format" data-id-title="Format"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.2 </span><span class="title-name">Format</span></span> <a title="Permalink" class="permalink" href="#Profile-Format">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The XML configuration format provides a consistent file structure, which is
   easy to learn and to remember when attempting to configure a new system.
  </p><p>
   The AutoYaST control file uses XML to describe the system installation and
   configuration. XML is a commonly used markup, and many users are familiar
   with the concepts of the language and the tools used to process XML files.
   If you edit an existing control file, or create a new control file, it
   is strongly recommended to validate the control
   file. This can be done using a validating XML parser such as
   <code class="literal">xmllint</code> or <code class="literal">jing</code>, for example (see
   <a class="xref" href="#CreateProfile-Manual" title="3.3. Creating/editing a control file manually">Section 3.3, “Creating/editing a control file manually”</a>).
  </p><p>
   The following example shows a control file in XML format:
  </p><div class="example" id="id-1.7.4.2.4.5" data-id-title="AutoYaST control file (profile)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 2.1: </span><span class="title-name">AutoYaST control file (profile) </span></span><a title="Permalink" class="permalink" href="#id-1.7.4.2.4.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_control_file.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile
  xmlns="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;partitioning config:type="list"&gt;
    &lt;drive&gt;
      &lt;device&gt;/dev/sda&lt;/device&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;btrfs&lt;/filesystem&gt;
          &lt;size&gt;10G&lt;/size&gt;
          &lt;mount&gt;/&lt;/mount&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;xfs&lt;/filesystem&gt;
          &lt;size&gt;120G&lt;/size&gt;
          &lt;mount&gt;/data&lt;/mount&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
    &lt;/drive&gt;
  &lt;/partitioning&gt;
  &lt;scripts&gt;
    &lt;pre-scripts&gt;
      &lt;script&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;filename&gt;start.sh&lt;/filename&gt;
        &lt;source&gt;
        &lt;![CDATA[
#!/bin/sh
echo "Starting installation"
exit 0

]]&gt;

        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/pre-scripts&gt;
  &lt;/scripts&gt;
&lt;/profile&gt;</pre></div></div></div></section><section class="sect1" id="Profile-Structure" data-id-title="Structure"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.3 </span><span class="title-name">Structure</span></span> <a title="Permalink" class="permalink" href="#Profile-Structure">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Below is an example of a basic control file container, the actual content of
   which is explained later on in this chapter.
  </p><div class="example" id="id-1.7.4.2.5.3" data-id-title="Control file container"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 2.2: </span><span class="title-name">Control file container </span></span><a title="Permalink" class="permalink" href="#id-1.7.4.2.5.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_control_file.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile
  xmlns="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;!-- RESOURCES --&gt;
&lt;/profile&gt;</pre></div></div></div><p>
   The <code class="literal">&lt;profile&gt;</code> element (root node) contains one or
   more distinct resource elements. The permissible resource elements are
   specified in the schema files
  </p><section class="sect2" id="Profile-Format-ressources" data-id-title="Resources and properties"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.3.1 </span><span class="title-name">Resources and properties</span></span> <a title="Permalink" class="permalink" href="#Profile-Format-ressources">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    A resource element either contains multiple and distinct property and
    resource elements, or multiple instances of the same resource element, or
    it is empty. The permissible content of a resource element is specified in
    the schema files.
   </p><p>
    A property element is either empty or contains a literal value. The
    permissible property elements and values in each resource element are
    specified in the schema files
   </p><p>
    An element can be either a container of other elements (a resource) or it
    has a literal value (a property); it can never be both. This restriction is
    specified in the schema files. A configuration component with more than one
    value must either be represented as an embedded list in a property value or
    as a nested resource.
   </p><p>
    An empty element, such as <code class="literal">&lt;foo&gt;&lt;/foo&gt;</code> or
    <code class="literal">&lt;bar/&gt;</code>, will <span class="emphasis"><em>not</em></span> be in the
    parsed data model. Usually this is interpreted as wanting a sensible
    default value. In cases where you need an explicitly empty string instead,
    use a CDATA section:
    <code class="literal">&lt;foo&gt;&lt;![CDATA[]]&gt;&lt;/foo&gt;</code>.
   </p></section><section class="sect2" id="Profile-Format-ressources-nested" data-id-title="Nested resources"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.3.2 </span><span class="title-name">Nested resources</span></span> <a title="Permalink" class="permalink" href="#Profile-Format-ressources-nested">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Nested resource elements allow a tree-like structure of configuration
    components to be built to any level.
   </p><p>
    There are two kinds of nested resources: maps and lists. Maps, also known
    as associative arrays, hashes, or dictionaries, contain mixed contents,
    identified by their tag names. Lists, or arrays, have all items of the same
    type.
   </p><div class="example" id="id-1.7.4.2.5.6.4" data-id-title="Nested resources"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 2.3: </span><span class="title-name">Nested resources </span></span><a title="Permalink" class="permalink" href="#id-1.7.4.2.5.6.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_control_file.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">...
&lt;drive&gt;
  &lt;device&gt;/dev/sda&lt;/device&gt;
  &lt;partitions config:type="list"&gt;
     &lt;partition&gt;
        &lt;size&gt;10G&lt;/size&gt;
        &lt;mount&gt;/&lt;/mount&gt;
     &lt;/partition&gt;
     &lt;partition&gt;
        &lt;size&gt;1G&lt;/size&gt;
        &lt;mount&gt;/tmp&lt;/mount&gt;
     &lt;/partition&gt;
  &lt;/partitions&gt;
&lt;/drive&gt;
....</pre></div></div></div><p>
    In the example above, the <code class="literal">drive</code> resource is a map
    consisting of a <code class="literal">device</code> property and a
    <code class="literal">partitions</code> resource. The <code class="literal">partitions</code>
    resource is a list containing multiple instances of the
    <code class="literal">partition</code> resource. Each <code class="literal">partition</code>
    resource is a map containing a <code class="literal">size</code> and
    <code class="literal">mount</code> property.
   </p><p>
    The default type of a nested resource is map, although you can specify it
    as you want. Lists must be marked as such using the
    <code class="literal">config:type="list"</code> attribute.
   </p><div id="id-1.7.4.2.5.6.7" data-id-title="Using shorter type annotations" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Using shorter type annotations</div><p>
     Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="phrase">15 SP3</span>
     , it is
     possible to use the attribute <code class="literal">t</code> instead of
     <code class="literal">config:type</code> to specify the element type.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;mode t="boolean"&gt;true&lt;/mode&gt;</pre></div></div></section><section class="sect2" id="Profile-Format-attributes" data-id-title="Attributes"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.3.3 </span><span class="title-name">Attributes</span></span> <a title="Permalink" class="permalink" href="#Profile-Format-attributes">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Global attributes are used to define metadata on resources and properties.
    Attributes are used to define context switching. They are also used for
    naming and typing properties as shown in the previous sections. Attributes
    are in a separate namespace so they do not need to be treated as reserved
    words in the default namespace.
   </p><p>
    The <code class="literal">config:type</code> attribute determines the type of the
    resource or property in the parsed data model. For resources, lists need a
    <code class="literal">list</code> type whereas a map is the default type that does
    not need an attribute. There is one exception. When the map is empty, it
    needs to be marked as a map so it does not get confused with a simple
    string value.
   </p><div class="example" id="id-1.7.4.2.5.7.4" data-id-title="An empty map"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 2.4: </span><span class="title-name">An empty map </span></span><a title="Permalink" class="permalink" href="#id-1.7.4.2.5.7.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_control_file.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;general t="map" /&gt;</pre></div></div></div><p>
    For properties, <code class="literal">boolean</code>, <code class="literal">symbol</code>, and
    <code class="literal">integer</code> can be used, the default being a string.
   </p><p>
    Except for map and string values, as explained before, attributes are not
    optional. It may appear that attributes are optional, because various parts
    of the schema are not very consistent in their usage of data types. In some
    places an enumeration is represented by a symbol, elsewhere a string is
    required. One resource needs <code class="literal">config:type="integer"</code>,
    another will parse the number from a string property. Some resources use
    <code class="literal">config:type="boolean"</code>, others want
    <code class="literal">yes</code> or even <code class="literal">1</code>. If in doubt, consult
    the schema file.
   </p></section></section></section><section class="chapter" id="cha-autoyast-create-control-file" data-id-title="Creating an AutoYaST control file"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Creating an AutoYaST control file</span></span> <a title="Permalink" class="permalink" href="#cha-autoyast-create-control-file">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect1" id="Autoinstallation-collectInfo" data-id-title="Collecting information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.1 </span><span class="title-name">Collecting information</span></span> <a title="Permalink" class="permalink" href="#Autoinstallation-collectInfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To create the control file, you need to collect information about the
   systems you are going to install. This includes hardware data and network
   information among other things. Make sure you have the following information
   about the machines you want to install:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Hard disk types and sizes
    </p></li><li class="listitem"><p>
     Graphical interface and attached monitor, if any
    </p></li><li class="listitem"><p>
     Network interface and MAC address if known (for example, when using DHCP)
    </p></li></ul></div><p>
   Also verify that both <span class="package">autoyast2-installation</span> and
   <span class="package">autoyast2</span> are installed.
  </p></section><section class="sect1" id="CreateProfile-CMS" data-id-title="Using the configuration management system (CMS)"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.2 </span><span class="title-name">Using the configuration management system (CMS)</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-CMS">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To create the control file for one or more computers, a configuration
   interface based on YaST is provided. This system depends on existing
   modules which are usually used to configure a computer in regular operation
   mode, for example, after <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is installed.
  </p><p>
   The configuration management system lets you easily create control files and
   manage a repository of configurations for use in a networked environment
   with multiple clients.
  </p><div class="figure" id="id-1.7.4.3.4.4"><div class="figure-contents"><div class="mediaobject"><a href="images/autoyast2-maindialog.png"><img src="images/autoyast2-maindialog.png" alt="Configuration system" title="Configuration system"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 3.1: </span><span class="title-name">Configuration system </span></span><a title="Permalink" class="permalink" href="#id-1.7.4.3.4.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div><section class="sect2" id="CreateProfile-CMS-new" data-id-title="Creating a new control file"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.2.1 </span><span class="title-name">Creating a new control file</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-CMS-new">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The easiest way to create an AutoYaST profile is to use an existing
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> system as a template. On an already installed system, launch
    <span class="guimenu">YaST</span> › <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation Configuration</span>. Then select
    <span class="guimenu">Tools</span> › <span class="guimenu">Create Reference
    Profile</span> from the menu. Choose the system components
    you want to include in the profile. Alternatively, create a profile
    containing the complete system configuration by launching
    <span class="guimenu">YaST</span> › <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation Cloning System</span> or running
    <code class="command">sudo yast clone_system</code> from the command line.
   </p><p>
    Both methods will create the file <code class="filename">/root/autoinst.xml</code>.
    The cloned profile can be used to set up an identical clone of the system
    it was created from. However, you will usually want to adjust the file to
    allow for installing multiple machines that are very similar, but not
    identical. This can be done by adjusting the profile with your favorite
    text/XML editor.
   </p><div id="id-1.7.4.3.4.5.4" data-id-title="Sensitive data in profiles" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Sensitive data in profiles</div><p>
     Be aware that the profile might contain sensitive information such as
     password hashes and registration keys.
    </p><p>
     Carefully review the exported profiles and make sure to keep file
     permissions restrictive.
    </p></div><p>
    With some exceptions, almost all resources of the control file can be
    configured using the configuration management system. The system offers
    flexibility and the configuration of some resources is identical to the one
    available in the YaST control center. In addition to the existing and
    familiar modules new interfaces were created for special and complex
    configurations, for example for partitioning, general options and software.
   </p><p>
    Furthermore, using a CMS guarantees the validity of the resulting control
    file and its direct use for starting automated installation.
   </p><p>
    Make sure the configuration system is installed (package
    <code class="systemitem">autoyast2</code>) and call it using the
    YaST control center or as root with the following command (make sure the
    <code class="envar">DISPLAY</code> variable is set correctly to start the graphical
    user interface instead of the text-based one):
   </p><div class="verbatim-wrap"><pre class="screen">/sbin/yast2 autoyast</pre></div></section></section><section class="sect1" id="CreateProfile-Manual" data-id-title="Creating/editing a control file manually"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.3 </span><span class="title-name">Creating/editing a control file manually</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Manual">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If editing the control file manually, make sure it has a valid syntax. To
   check the syntax, use the tools already available on the distribution. For
   example, to verify that the file is well-formed (has a valid XML structure),
   use the utility <code class="command">xmllint</code> available with the
   <code class="systemitem">libxml2</code> package:
  </p><div class="verbatim-wrap"><pre class="screen">xmllint &lt;control file&gt;</pre></div><p>
   If the control file is not well formed, for example, if a tag is not closed,
   <code class="command">xmllint</code> will report the errors.
  </p><p>
   To validate the control file, use the tool <code class="command">jing</code> from the
   package with the same name. During validation, misplaced or missing tags and
   attributes and wrong attribute values are detected. <span class="phrase">The
   <span class="package">jing</span> package is provided with the SUSE Software Development Kit.</span>
  </p><div class="verbatim-wrap"><pre class="screen">jing /usr/share/YaST2/schema/autoyast/rng/profile.rng &lt;control file&gt;</pre></div><p>
   <code class="literal">/usr/share/YaST2/schema/autoyast/rng/profile.rng</code> is
   provided by the package <code class="literal">yast2-schema-default</code>. This
   file describes the syntax and classes of an AutoYaST profile.
  </p><div id="id-1.7.4.3.5.8" data-id-title="Schema extensions" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Schema extensions</div><p>
    AutoYaST can be extended by other products and modules, but the schema does not
    contain the specification for those extensions. As a consequence, when AutoYaST
    is given a profile that uses one of those extensions, it might report the
    profile as invalid.
   </p><p>
    Thus, starting in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
    <span class="phrase">SP3</span>,
    AutoYaST does not validate top-level unknown sections, and ignores them. For
    example, in the example below, <code class="literal">&lt;sap-inst&gt;</code> is not
    validated. The rest is validated as usual.
   </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;mode&gt;
    &lt;confirm config:type="boolean"&gt;true&lt;/confirm&gt;
  &lt;/mode&gt;
&lt;/general&gt;

&lt;sap-inst&gt;
  &lt;!-- this section is not validated --&gt;&gt;
&lt;/sap-inst&gt;</pre></div></div><p>
   Before going on with the autoinstallation, fix any errors resulting from
   such checks. The autoinstallation process cannot be started with an invalid
   and not well-formed control file.
  </p><p>
   You can use any XML editor available on your system or any text editor
   with XML support (for example, Emacs, Vim).
   <span class="phrase">However,
   it is not optimal to create the control file manually for multiple
   machines, and it should only be seen as an interface between the
   autoinstallation engine and the Configuration Management System (CMS)</span>.
  </p><div id="id-1.7.4.3.5.11" data-id-title="Using Emacs as an XML editor" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Using Emacs as an XML editor</div><p>
    The built-in nxml-mode turns Emacs into a fully-fledged XML editor with
    automatic tag completion and validation. Refer to the Emacs help for
    instructions on how to set up nxml-mode.
   </p></div></section><section class="sect1" id="CreateProfile-XSLT" data-id-title="Creating a control file via script with XSLT"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.4 </span><span class="title-name">Creating a control file via script with XSLT</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-XSLT">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If you have a template and want to change a few things via script or command
   line, use an XSLT processor like <code class="literal">xsltproc</code>. For example,
   if you have an AutoYaST control file and want to fill out the host name via
   script for any reason. (If doing this often, you should consider scripting
   it.)
  </p><p>
   First, create an XSL file:
  </p><div class="example" id="id-1.7.4.3.6.4" data-id-title="Example file for replacing the host name/domain by script"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 3.1: </span><span class="title-name">Example file for replacing the host name/domain by script </span></span><a title="Permalink" class="permalink" href="#id-1.7.4.3.6.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:y2="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"
  xmlns="http://www.suse.com/1.0/yast2ns"
  version="1.0"&gt;
  &lt;xsl:output method="xml" encoding="UTF-8" indent="yes" omit-xml-declaration="no" cdata-section-elements="source"/&gt;

  &lt;!-- the parameter names --&gt;
  &lt;xsl:param name="hostname"/&gt;
  &lt;xsl:param name="domain"/&gt;

  &lt;xsl:template match="/"&gt;
    &lt;xsl:apply-templates select="@*|node()"/&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="y2:dns"&gt;
    &lt;xsl:copy&gt;
      &lt;!-- where to copy the parameters --&gt;
      &lt;domain&gt;&lt;xsl:value-of select="string($domain)"/&gt;&lt;/domain&gt;
      &lt;hostname&gt;&lt;xsl:value-of select="string($hostname)"/&gt;&lt;/hostname&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;


  &lt;xsl:template match="@*|node()" &gt;
    &lt;xsl:copy&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</pre></div></div></div><p>
   This file expects the host name and the domain name as parameters from the
   user.
  </p><div class="verbatim-wrap"><pre class="screen">&lt;xsl:param name="hostname"/&gt;
&lt;xsl:param name="domain"/&gt;</pre></div><p>
   There will be a copy of those parameters in the DNS section of the control
   file. This means that if there already is a domain element in the DNS
   section, you will get a second one, which will cause conflicts.
  </p><p>
   For more information about XSLT, go to the official Web page
   <a class="link" href="http://www.w3.org/TR/xslt" target="_blank">www.w3.org/TR/xslt</a>
  </p></section><section class="sect1" id="check-profile" data-id-title="Checking a control file"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.5 </span><span class="title-name">Checking a control file</span></span> <a title="Permalink" class="permalink" href="#check-profile">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Depending on the use case, creating an AutoYaST profile can be difficult,
   especially if you build a dynamic profile using rules/classes, ERB templates
   or pre-scripts. For more information, see
   <a class="xref" href="#part-dynamic-profiles" title="Part III. Managing mass installations with dynamic profiles">Part III, “Managing mass installations with dynamic profiles”</a>.
  </p><p>
   Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
   <span class="phrase">15
   SP3</span>, AutoYaST validates the profile
   during the installation, reporting any problem found to the user. Although
   it is recommended to check whether the profile is correct or not, you can
   disable this behavior by setting the
   <code class="literal">YAST_SKIP_XML_VALIDATION</code> boot parameter to
   <code class="literal">1</code>.
  </p><p>
   Moreover, to simplify the testing and debugging process, AutoYaST offers the
   <code class="literal">check-profile</code> command, which takes care of fetching,
   building and, optionally, importing the profile to detect any potential
   problem.
  </p><div id="id-1.7.4.3.7.5" data-id-title="Results may vary" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Results may vary</div><p>
    Although this command uses the same approach as the installation, the
    results may vary depending on the differences between the current system
    and installation media: YaST package versions, architecture, etc.
   </p></div><div id="id-1.7.4.3.7.6" data-id-title="Use only trusted profiles" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Use only trusted profiles</div><p>
    You must be careful when running this command because pre-installation
    scripts and ERB code would run as the <code class="literal">root</code> user. Use
    only profiles that you trust.
   </p></div><section class="sect2" id="sec-basic-checks" data-id-title="Basic checks"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.5.1 </span><span class="title-name">Basic checks</span></span> <a title="Permalink" class="permalink" href="#sec-basic-checks">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The simplest way to use this command is just to read and validate the
    profile:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=autoinst.xml output=result.xml</pre></div><p>
    The <code class="filename">result.xml</code> file contains the result of evaluating
    the profile. Bear in mind that, even if you do not use any advanced
    feature, the content of <code class="filename">autoinst.xml</code> and
    <code class="filename">result.xml</code> may differ. The reason is that AutoYaST does
    some cleaning up when it processes the profile.
   </p><p>
    <code class="literal">check-profile</code> can deal with remote files too:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=http://192.168.1.100/autoinst.xml output=result.xml</pre></div></section><section class="sect2" id="sec-running-pre-scripts" data-id-title="Running pre-scripts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.5.2 </span><span class="title-name">Running pre-scripts</span></span> <a title="Permalink" class="permalink" href="#sec-running-pre-scripts">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Optionally, AutoYaST can run the scripts that are included in the profile,
    reporting any error found during the execution. This is especially relevant
    if you are using a pre-installation script to modify the profile. To enable
    this feature, you need to set the <code class="literal">run-scripts</code> option to
    <code class="literal">true</code>.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=http://192.168.1.100/autoinst.xml output=result.xml run-scripts=true</pre></div><div id="id-1.7.4.3.7.8.4" data-id-title="Scripts run as root" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Scripts run as root</div><p>
     You must be careful when enabling the <code class="literal">run-scripts</code>
     option, because the scripts will run as root and they may affect the
     current system.
    </p></div></section><section class="sect2" id="sec-importing-profile" data-id-title="Importing the profile"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.5.3 </span><span class="title-name">Importing the profile</span></span> <a title="Permalink" class="permalink" href="#sec-importing-profile">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    It is possible to face some problems when importing a valid profile, even
    if it is correct. The reason is that AutoYaST does not perform any logic check
    when fetching, building and validating the profile.
   </p><p>
    To anticipate such problems, the <code class="literal">check-profile</code> command
    imports the profile and reports problems that it has detected. As it may
    take a while, you can disable this behavior by setting the
    <code class="literal">import-all</code> option to <code class="literal">false</code>.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=http://192.168.1.100/autoinst.xml output=result.xml import-all=false</pre></div><p>
    Importing the profile is a safe operation and does not alter the underlying
    system in any way.
   </p></section></section></section></div><div class="part" id="part-configuration" data-id-title="AutoYaST configuration examples"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part II </span><span class="title-name">AutoYaST configuration examples </span></span><a title="Permalink" class="permalink" href="#part-configuration">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_autoyast.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#cha-configuration-installation-options"><span class="title-number">4 </span><span class="title-name">Configuration and installation options</span></a></span></li><dd class="toc-abstract"><p>
    This section contains configuration examples for services, registration,
    user and group management, upgrades, partitioning, configuration
    management, SSH key management, firewall configuration, and other
    installation options.
   </p></dd></ul></div><section class="chapter" id="cha-configuration-installation-options" data-id-title="Configuration and installation options"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">4 </span><span class="title-name">Configuration and installation options</span></span> <a title="Permalink" class="permalink" href="#cha-configuration-installation-options">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_configuration_installation_options.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    This section contains configuration examples for services, registration,
    user and group management, upgrades, partitioning, configuration
    management, SSH key management, firewall configuration, and other
    installation options.
   </p></div></div></div></div><p>
  This chapter introduces important parts of a control file for standard
  purposes. To learn about other available options, use the configuration
  management system.
 </p><p>
  Note that for some configuration options to work, additional packages need to
  be installed, depending on the software selection you have configured. If you
  choose to install a minimal system then some packages might be missing and
  need to be added to the individual package selection.
 </p><p>
  YaST will install packages required in the second phase of the installation
  and before the post-installation phase of AutoYaST has started. However, if
  necessary YaST modules are not available in the system, important
  configuration steps will be skipped. For example, no security settings will
  be configured if <code class="systemitem">yast2-security</code> is
  not installed.
 </p><section class="sect1" id="CreateProfile-General" data-id-title="General options"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.1 </span><span class="title-name">General options</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-General">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_general_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The general section includes all settings that influence the installation
  workflow. The overall structure of this section looks like the following:
 </p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns"
 xmlns:config="http://www.suse.com/1.0/configns"&gt;
 &lt;general&gt;
  &lt;ask-list&gt;<span class="callout" id="co-ay-general-ask">1</span>
   ...
  &lt;/ask-list&gt;
  &lt;cio_ignore&gt;<span class="callout" id="co-ay-general-cio-ignore">2</span>
   ...
  &lt;/cio_ignore&gt;
  &lt;mode&gt;<span class="callout" id="co-ay-general-mode">3</span>
   ...
  &lt;/mode&gt;
  &lt;proposals&gt;<span class="callout" id="co-ay-general-proposal">4</span>
   ...
  &lt;/proposals&gt;
  <span class="phrase">&lt;self_update&gt;</span><span class="callout" id="co-ay-general-self-update">5</span>
  <span class="phrase">...
 &lt;/self_update&gt;
  &lt;self_update_url&gt;
   ...
  &lt;/self_update_url&gt;</span>
  &lt;semi-automatic config:type="list"&gt;<span class="callout" id="co-ay-general-semi">6</span>
  ...
  &lt;/semi-automatic&gt;
  &lt;signature-handling&gt;<span class="callout" id="co-ay-general-signature">7</span>
   ...
  &lt;/signature-handling&gt;
  &lt;storage&gt;<span class="callout" id="co-ay-general-storage">8</span>
   ...
  &lt;/storage&gt;
  <span class="phrase">&lt;wait&gt;</span><span class="callout" id="co-ay-general-wait">9</span>
   ...
  <span class="phrase">&lt;/wait&gt;</span>
 &lt;/general&gt;
&lt;profile&gt;</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-general-ask"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
    
    <a class="xref" href="#CreateProfile-Ask" title="4.34. Ask the user for values during installation">Section 4.34, “Ask the user for values during installation”</a>
   </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-general-cio-ignore"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
    
    <a class="xref" href="#CreateProfile-General-cio-ignore" title="4.1.7. Ignoring unused devices on IBM Z">Section 4.1.7, “Ignoring unused devices on IBM Z”</a>
   </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-general-mode"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
    
    <a class="xref" href="#CreateProfile-General-mode" title="4.1.1. The mode section">Section 4.1.1, “The mode section”</a>
   </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-general-proposal"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
    
    <a class="xref" href="#CreateProfile-General-proposal" title="4.1.2. Configuring the installation settings screen">Section 4.1.2, “Configuring the installation settings screen”</a>
   </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-general-self-update"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
    
    <a class="xref" href="#CreateProfile-General-self-update" title="4.1.3. The self-update section">Section 4.1.3, “The self-update section”</a>
   </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-general-semi"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
    
    <a class="xref" href="#CreateProfile-General-semi-automatic" title="4.1.4. The semi-automatic section">Section 4.1.4, “The semi-automatic section”</a>
   </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-general-signature"><span class="callout">7</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
    
    <a class="xref" href="#CreateProfile-General-signature" title="4.1.5. The signature handling section">Section 4.1.5, “The signature handling section”</a>
   </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-general-storage"><span class="callout">8</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
    
    <a class="xref" href="#CreateProfile-Partitioning" title="4.5. Partitioning">Section 4.5, “Partitioning”</a>
   </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-general-wait"><span class="callout">9</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
    
    <a class="xref" href="#CreateProfile-General-wait" title="4.1.6. The wait section">Section 4.1.6, “The wait section”</a>
   </p></td></tr></table></div><section class="sect2" id="CreateProfile-General-mode" data-id-title="The mode section"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1.1 </span><span class="title-name">The mode section</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-General-mode">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_general_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The mode section configures the behavior of AutoYaST with regard to user
   confirmations and rebooting. The following elements are allowed in the
   <code class="sgmltag-element">mode</code> section:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.6.6.3.1"><span class="term"><code class="sgmltag-element">activate_systemd_default_target</code></span></dt><dd><p>
      If you set this entry to <code class="literal">false</code>, the default
      <code class="systemitem">systemd</code> target will not be
      activated via the call <code class="command">systemctl isolate</code>. Setting this
      value is optional. The default is <code class="literal">true</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;mode&gt;
  &lt;activate_systemd_default_target config:type="boolean"&gt;
   true
  &lt;/activate_systemd_default_target&gt;
 &lt;/mode&gt;
 ...
&lt;/general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.6.3.2"><span class="term"><code class="sgmltag-element">confirm</code></span></dt><dd><p>
      By default, the installation stops at the <span class="guimenu">Installation
      Settings</span> screen. Up to this point, no changes have been made to
      the system and settings may be changed on this screen. To proceed and
      finally start the installation, the user needs to confirm the settings.
      By setting this value to <code class="literal">false</code> the settings are
      automatically accepted and the installation starts. Only set to
      <code class="literal">false</code> to carry out a fully unattended installation.
      Setting this value is optional. The default is <code class="literal">true</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;mode&gt;
  &lt;confirm config:type="boolean"&gt;true&lt;/confirm&gt;
 &lt;/mode&gt;
 ...
&lt;/general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.6.3.3"><span class="term"><code class="sgmltag-element">confirm_base_product_license</code></span></dt><dd><p>
      If you set this to <code class="literal">true</code>, the EULA of the base product
      will be shown. The user needs to accept this license. Otherwise the
      installation will be canceled. Setting this value is optional. The
      default is <code class="literal">false</code>. <span class="phrase">This
      setting applies to the base product license only. Use the flag
      <code class="literal">confirm_license</code> in the <code class="literal">add-on</code>
      section for additional licenses (see
      <a class="xref" href="#Software-Selections-additional" title="4.9.3. Installing additional/customized packages or products">Section 4.9.3, “Installing additional/customized packages or products”</a> for
      details).</span>
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;mode&gt;
  &lt;confirm_base_product_license config:type="boolean"&gt;
   false
  &lt;/confirm_base_product_license&gt;
 &lt;/mode&gt;
 ...
&lt;/general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.6.3.4"><span class="term"><code class="sgmltag-element">final_halt</code></span></dt><dd><p>
      When set to <code class="literal">true</code>, the machine shuts down after
      everything is installed and configured<span class="phrase"> at
      the end of the second stage</span>. If you enable
      <code class="literal">final_halt</code>, you do not need to set the
      <code class="literal">final_reboot</code> option to <code class="literal">true</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;mode&gt;
  &lt;final_halt config:type="boolean"&gt;false&lt;/final_halt&gt;
 &lt;/mode&gt;
 ...
&lt;/general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.6.3.5"><span class="term"><code class="sgmltag-element">final_reboot</code></span></dt><dd><p>
      When set to <code class="literal">true</code>, the machine reboots after everything
      is installed and configured<span class="phrase"> at the end of
      the second stage</span>. If you enable <code class="literal">final_reboot</code>,
      you do not need to set the <code class="literal">final_halt</code> option to
      <code class="literal">true</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;mode&gt;
  &lt;final_reboot config:type="boolean"&gt;true&lt;/final_reboot&gt;
 &lt;/mode&gt;
 ...
&lt;/general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.6.3.6"><span class="term"><code class="sgmltag-element">final_restart_services</code></span></dt><dd><p>
      If you set this entry to <code class="literal">false</code>, services will
      <span class="emphasis"><em>not</em></span> be restarted at the end of the installation
      (when everything is installed and configured<span class="phrase">
      at the end of the second stage</span>). Setting this value is optional.
      The default is <code class="literal">true</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;mode&gt;
  &lt;final_restart_services config:type="boolean"&gt;
   true
  &lt;/final_restart_services&gt;
 &lt;/mode&gt;
 ...
&lt;/general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.6.3.7"><span class="term"><code class="sgmltag-element">halt</code></span></dt><dd><p>
      Shuts down the machine after the first stage. All packages and the boot
      loader have been installed and all your chroot scripts have run.
      <span class="phrase">Instead of rebooting into stage two, the
      machine is turned off. If you turn it on again, the machine boots and the
      second stage of the autoinstallation
      starts.</span> Setting this
      value is optional. The default is <code class="literal">false</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;mode&gt;
  &lt;halt config:type="boolean"&gt;false&lt;/halt&gt;
 &lt;/mode&gt;
 ...
&lt;/general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.6.3.8"><span class="term"><code class="sgmltag-element">max_systemd_wait</code></span></dt><dd><p>
      Specifies how long AutoYaST waits (in seconds) at most for
      <code class="systemitem">systemd</code> to set up the
      default target. Setting this value is optional and should not normally be
      required. The default is <code class="literal">30</code> (seconds).
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;mode&gt;
  &lt;max_systemd_wait config:type="integer"&gt;30&lt;/max_systemd_wait&gt;
 &lt;/mode&gt;
 ...
&lt;/general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.6.3.9"><span class="term"><code class="sgmltag-element">ntp_sync_time_before_installation</code></span></dt><dd><p>
      Specify the NTP server with which to synchronize time before starting the
      installation. Time synchronization will only occur if this option is set.
      Keep in mind that you need a network connection and access to a time
      server. Setting this value is optional. By default no time
      synchronization will occur.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
     &lt;mode&gt;
      &lt;ntp_sync_time_before_installation&gt;
       &amp;ntpname;
      &lt;/ntp_sync_time_before_installation&gt;
     &lt;/mode&gt;
     ...
    &lt;/general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.6.3.10"><span class="term"><code class="sgmltag-element">second_stage</code></span></dt><dd><p>
      A regular installation of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is performed in a single stage.
      The auto-installation process, however, is divided into two stages. After
      the installation of the basic system the system boots into the second
      stage where the system configuration is done. Set this option to
      <code class="literal">false</code> to disable the second stage. Setting this value
      is optional. The default is <code class="literal">true</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;mode&gt;
  &lt;second_stage config:type="boolean"&gt;true&lt;/second_stage&gt;
 &lt;/mode&gt;
 ...
&lt;/general&gt;</pre></div></dd></dl></div></section><section class="sect2" id="CreateProfile-General-proposal" data-id-title="Configuring the installation settings screen"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1.2 </span><span class="title-name">Configuring the installation settings screen</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-General-proposal">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_general_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   AutoYaST allows you to configure the <span class="guimenu">Installation Settings</span>
   screen, which shows a summary of the installation settings. On this screen,
   the user can change the settings before confirming them to start the
   installation. Using the <code class="sgmltag-element">proposal</code> tag, you can
   control which settings (<span class="quote">“<span class="quote">proposals</span>”</span>) are shown in the
   installation screen. A list of valid proposals for your products is
   available from the <code class="filename">/control.xml</code> file on the
   installation medium. This setting is optional. By default all configuration
   options will be shown.
  </p><div class="verbatim-wrap"><pre class="screen">&lt;proposals config:type="list"&gt;
 &lt;proposal&gt;partitions_proposal&lt;/proposal&gt;
 &lt;proposal&gt;timezone_proposal&lt;/proposal&gt;
 &lt;proposal&gt;software_proposal&lt;/proposal&gt;
&lt;/proposals&gt;</pre></div></section><section class="sect2" id="CreateProfile-General-self-update" data-id-title="The self-update section"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1.3 </span><span class="title-name">The self-update section</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-General-self-update">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_general_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   During the installation, YaST can update itself to solve bugs in the
   installer that were discovered after the release. Refer to the Deployment Guide for
   further information about this feature.
  </p><div id="id-1.7.5.2.6.8.3" data-id-title="Quarterly media update: self-update disabled" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Quarterly media update: self-update disabled</div><p>
    The installer self-update is only available if you use the
    <code class="literal">GM</code> images of the Unified Installer and Packages ISOs. If you
    install from the ISOs published as quarterly updates (they can be
    identified by the string <code class="literal">QU</code> in the name), the installer
    cannot update itself, because this feature has been disabled in the update
    media.
   </p></div><p>
   Use the following tags to configure the YaST self-update:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.6.8.5.1"><span class="term"><code class="sgmltag-element">self_update</code></span></dt><dd><p>
      If set to <code class="literal">true</code> or <code class="literal">false</code>, this
      option enables or disables the YaST self-update feature. Setting this
      value is optional. The default is <code class="literal">true</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;self_update config:type="boolean"&gt;true&lt;/self_update&gt;
 ...
&lt;/general&gt;</pre></div><p>
      Alternatively, you can specify the boot parameter
      <code class="literal">self_update=1</code> on the kernel command line.
     </p></dd><dt id="id-1.7.5.2.6.8.5.2"><span class="term"><code class="sgmltag-element">self_update_url</code></span></dt><dd><p>
      Location of the update repository to use during the
      YaST self-update. For more information, refer to
      <span class="intraxref">Book “Deployment Guide”, Chapter 8 “Installation steps”, Section 8.2.2 “Custom self-update repositories”</span>.
     </p><div id="id-1.7.5.2.6.8.5.2.2.2" data-id-title="Installer self-update repository only" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Installer self-update repository only</div><p>
       The <code class="option">self_update_url</code> parameter expects only the
       installer self-update repository URL. Do not supply any other repository
       URL—for example the URL of the software update repository.
      </p></div><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;self_update_url&gt;
  http://example.com/updates/$arch
 &lt;/self_update_url&gt;
 ...
&lt;/general&gt;</pre></div><p>
      The URL may contain the variable <code class="envar">$arch</code>. It will be
      replaced by the system's architecture, such as <code class="literal">x86_64</code>,
      <code class="literal">s390x</code>, etc.
     </p><p>
      Alternatively, you can specify the boot parameter
      <code class="literal">self_update=1</code> together with
      <code class="literal">self_update=<em class="replaceable">URL</em></code> on the
      kernel command line.
     </p></dd></dl></div></section><section class="sect2" id="CreateProfile-General-semi-automatic" data-id-title="The semi-automatic section"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1.4 </span><span class="title-name">The semi-automatic section</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-General-semi-automatic">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_general_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   AutoYaST offers to start some YaST modules during the installation. This
   gives administrators installing the machine the ability to
   manually configure some aspects of the installation, while also
   automating the rest of the installation. Within the semi-automatic
   section, you can start the following YaST modules:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     The network settings module (<code class="literal">networking</code>)
    </p></li><li class="listitem"><p>
     The partitioner (<code class="literal">partitioning</code>)
    </p></li><li class="listitem"><p>
     The registration module (<code class="literal">scc</code>)
    </p></li></ul></div><p>
   The following example starts all three supported YaST modules during the
   installation:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;semi-automatic config:type="list"&gt;
  &lt;semi-automatic_entry&gt;networking&lt;/semi-automatic_entry&gt;
  &lt;semi-automatic_entry&gt;scc&lt;/semi-automatic_entry&gt;
  &lt;semi-automatic_entry&gt;partitioning&lt;/semi-automatic_entry&gt;
 &lt;/semi-automatic&gt;
&lt;/general&gt;</pre></div></section><section class="sect2" id="CreateProfile-General-signature" data-id-title="The signature handling section"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1.5 </span><span class="title-name">The signature handling section</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-General-signature">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_general_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   By default AutoYaST will only install signed packages from sources with known
   GPG keys. Use this section to overwrite the default settings.
  </p><div id="id-1.7.5.2.6.10.3" data-id-title="Overwriting the signature handling defaults" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Overwriting the signature handling defaults</div><p>
    Installing unsigned packages, packages with failing checksum checks, or
    packages from sources you do not trust is a major security risk. Packages
    may have been modified and may install malicious software on your machine.
    Only overwrite the defaults in this section if you are sure the repository
    and packages can be trusted. SUSE is not responsible for any problems
    arising from software installed with integrity checks disabled.
   </p></div><p>
   Default values for all options are false. If an option is set to false and a
   package or repository fails the respective test, it is silently ignored and
   will not be installed.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.6.10.5.1"><span class="term"><code class="sgmltag-element">accept_unsigned_file</code></span></dt><dd><p>
      If set to <code class="literal">true</code>, AutoYaST will accept unsigned files like
      the content file.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;signature-handling&gt;
  &lt;accept_unsigned_file config:type="boolean"&gt;
   false
  &lt;/accept_unsigned_file&gt;
 &lt;/signature-handling&gt;
 ...
&lt;general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.10.5.2"><span class="term"><code class="sgmltag-element">accept_file_without_checksum</code></span></dt><dd><p>
      If set to <code class="literal">true</code>, AutoYaST will accept files without a
      checksum in the content file.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;signature-handling&gt;
  &lt;accept_file_without_checksum config:type="boolean"&gt;
   false
  &lt;/accept_file_without_checksum&gt;
 &lt;/signature-handling&gt;
 ...
&lt;general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.10.5.3"><span class="term"><code class="sgmltag-element">accept_verification_failed</code></span></dt><dd><p>
      If set to <code class="literal">true</code>, AutoYaST will accept signed files even
      when the signature verification fails.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;signature-handling&gt;
  &lt;accept_verification_failed config:type="boolean"&gt;
   false
  &lt;/accept_verification_failed&gt;
 &lt;/signature-handling&gt;
 ...
&lt;general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.10.5.4"><span class="term"><code class="sgmltag-element">accept_unknown_gpg_key</code></span></dt><dd><p>
      If set to <code class="literal">true</code>, AutoYaST will accept new GPG keys of the
      installation sources, for example the key used to sign the content file.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;signature-handling&gt;
  &lt;accept_unknown_gpg_key config:type="boolean"&gt;
   false
  &lt;/accept_unknown_gpg_key&gt;
 &lt;/signature-handling&gt;
 ...
&lt;general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.10.5.5"><span class="term"><code class="sgmltag-element">accept_non_trusted_gpg_key</code></span></dt><dd><p>
      Set this option to <code class="literal">true</code> to accept known keys you have
      not yet trusted.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;signature-handling&gt;
  &lt;accept_non_trusted_gpg_key config:type="boolean"&gt;
   false
  &lt;/accept_non_trusted_gpg_key&gt;
 &lt;/signature-handling&gt;
 ...
&lt;general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.10.5.6"><span class="term"><code class="sgmltag-element">import_gpg_key</code></span></dt><dd><p>
      If set to <code class="literal">true</code>, AutoYaST will accept and import new GPG
      keys on the installation source in its database.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;signature-handling&gt;
  &lt;import_gpg_key config:type="boolean"&gt;
   false
  &lt;/import_gpg_key&gt;
 &lt;/signature-handling&gt;
 ...
&lt;general&gt;</pre></div></dd></dl></div></section><section class="sect2" id="CreateProfile-General-wait" data-id-title="The wait section"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1.6 </span><span class="title-name">The wait section</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-General-wait">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_general_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In the second stage of the installation the system is configured by running
   modules, for example the network configuration. Within the
   <code class="sgmltag-element">wait</code> section you can define scripts that will
   get executed before and after a specific module has run. You can also
   configure a span of time in which the system is inactive
   (<span class="quote">“<span class="quote">sleeps</span>”</span>) before and after each module.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.6.11.3.1"><span class="term"><code class="sgmltag-element">pre-modules</code></span></dt><dd><p>
      Defines scripts and sleep time executed before a configuration module
      starts. The following code shows an example setting the sleep time to ten
      seconds and executing an echo command before running the network
      configuration module.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;wait&gt;
  &lt;pre-modules config:type="list"&gt;
   &lt;module&gt;
    &lt;name&gt;networking&lt;/name&gt;
    &lt;sleep&gt;
     &lt;time config:type="integer"&gt;10&lt;/time&gt;
     &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
    &lt;/sleep&gt;
    &lt;script&gt;
     &lt;source&gt;echo foo&lt;/source&gt;
     &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
    &lt;/script&gt;
   &lt;/module&gt;
  &lt;/pre-modules&gt;
  ...
 &lt;/wait&gt;
&lt;general&gt;</pre></div></dd><dt id="id-1.7.5.2.6.11.3.2"><span class="term"><code class="sgmltag-element">post-modules</code></span></dt><dd><p>
      Defines scripts and sleep time executed after a configuration module
      starts. The following code shows an example setting the sleep time to ten
      seconds and executing an echo command after running the network
      configuration module.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;wait&gt;
  &lt;post-modules config:type="list"&gt;
   &lt;module&gt;
    &lt;name&gt;networking&lt;/name&gt;
    &lt;sleep&gt;
     &lt;time config:type="integer"&gt;10&lt;/time&gt;
     &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
    &lt;/sleep&gt;
    &lt;script&gt;
     &lt;source&gt;echo foo&lt;/source&gt;
     &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
    &lt;/script&gt;
   &lt;/module&gt;
  &lt;/post-modules&gt;
  ...
 &lt;/wait&gt;
&lt;general&gt;</pre></div></dd></dl></div></section><section class="sect2" id="CreateProfile-General-cio-ignore" data-id-title="Ignoring unused devices on IBM Z"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1.7 </span><span class="title-name">Ignoring unused devices on IBM Z</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-General-cio-ignore">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_general_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   On IBM Z, you can prevent the kernel from looking at unused hardware
   devices by running <code class="command">cio_ignore</code> and ignoring them. This
   is done by setting the AutoYaST parameter with the same name to
   <code class="literal">true</code>. Setting this value is optional and only applies to
   installations on IBM Z hardware. The default is
   <code class="literal">true</code>.
  </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;cio_ignore config:type="boolean"&gt;true&lt;/cio_ignore&gt;
 ...
&lt;general&gt;</pre></div></section><section class="sect2" id="CreateProfile-General-example-common" data-id-title="Examples for the general section"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1.8 </span><span class="title-name">Examples for the <code class="sgmltag-element">general</code> section</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-General-example-common">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_general_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Find examples covering several use cases in this section.
  </p><div class="complex-example"><div class="example" id="ex-general-common" data-id-title="General options"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.1: </span><span class="title-name">General options </span></span><a title="Permalink" class="permalink" href="#ex-general-common">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_general_options.xml" title="Edit source document"> </a></div></div><div class="example-contents"><p>
    This example shows the most commonly used options in the general section.
    The scripts in the pre- and post-modules sections are only dummy scripts
    illustrating the concept.
   </p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns"
 xmlns:config="http://www.suse.com/1.0/configns"&gt;
 &lt;general&gt;
  &lt;mode&gt;
   &lt;halt config:type="boolean"&gt;false&lt;/halt&gt;
   &lt;forceboot config:type="boolean"&gt;false&lt;/forceboot&gt;
   &lt;final_reboot config:type="boolean"&gt;false&lt;/final_reboot&gt;
   &lt;final_halt config:type="boolean"&gt;false&lt;/final_halt&gt;
   &lt;confirm_base_product_license config:type="boolean"&gt;
    false
   &lt;/confirm_base_product_license&gt;
   &lt;confirm config:type="boolean"&gt;true&lt;/confirm&gt;
   &lt;second_stage config:type="boolean"&gt;true&lt;/second_stage&gt;
  &lt;/mode&gt;
  &lt;proposals config:type="list"&gt;
   &lt;proposal&gt;partitions_proposal&lt;/proposal&gt;
  &lt;/proposals&gt;
  &lt;self_update config:type="boolean"&gt;true&lt;/self_update&gt;
  &lt;self_update_url&gt;http://example.com/updates/$arch&lt;/self_update_url&gt;
  &lt;signature-handling&gt;
   &lt;accept_unsigned_file config:type="boolean"&gt;
    true
   &lt;/accept_unsigned_file&gt;
   &lt;accept_file_without_checksum config:type="boolean"&gt;
    true
   &lt;/accept_file_without_checksum&gt;
   &lt;accept_verification_failed config:type="boolean"&gt;
    true
   &lt;/accept_verification_failed&gt;
   &lt;accept_unknown_gpg_key config:type="boolean"&gt;
    true
   &lt;/accept_unknown_gpg_key&gt;
   &lt;import_gpg_key config:type="boolean"&gt;true&lt;/import_gpg_key&gt;
   &lt;accept_non_trusted_gpg_key config:type="boolean"&gt;
   true
   &lt;/accept_non_trusted_gpg_key&gt;
  &lt;/signature-handling&gt;
  &lt;wait&gt;
   &lt;pre-modules config:type="list"&gt;
    &lt;module&gt;
     &lt;name&gt;networking&lt;/name&gt;
     &lt;sleep&gt;
      &lt;time config:type="integer"&gt;10&lt;/time&gt;
      &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
     &lt;/sleep&gt;
     &lt;script&gt;
     &lt;source&gt;&amp;gt;![CDATA[
echo "Sleeping 10 seconds"
      ]]&amp;gt;&lt;/source&gt;
     &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
     &lt;/script&gt;
    &lt;/module&gt;
   &lt;/pre-modules&gt;
   &lt;post-modules config:type="list"&gt;
    &lt;module&gt;
     &lt;name&gt;networking&lt;/name&gt;
     &lt;sleep&gt;
      &lt;time config:type="integer"&gt;10&lt;/time&gt;
      &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
     &lt;/sleep&gt;
     &lt;script&gt;
      &lt;source&gt;&amp;gt;![CDATA[
echo "Sleeping 10 seconds"
      ]]&amp;gt;&lt;/source&gt;
      &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
     &lt;/script&gt;
    &lt;/module&gt;
   &lt;/post-modules&gt;
  &lt;/wait&gt;
 &lt;/general&gt;
&lt;/profile&gt;</pre></div></div></div></div></section></section><section class="sect1" id="CreateProfile-Reporting" data-id-title="Reporting"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.2 </span><span class="title-name">Reporting</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Reporting">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_reporting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The <code class="literal">report</code> resource manages three types of pop-ups that
  may appear during installation:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    message pop-ups (usually non-critical, informative messages),
   </p></li><li class="listitem"><p>
    warning pop-ups (if something might go wrong),
   </p></li><li class="listitem"><p>
    error pop-ups (in case an error occurs).
   </p></li></ul></div><div class="example" id="id-1.7.5.2.7.5" data-id-title="Reporting behavior"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.2: </span><span class="title-name">Reporting behavior </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.7.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_reporting.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;report&gt;
  &lt;errors&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;0&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/errors&gt;
  &lt;warnings&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/warnings&gt;
  &lt;messages&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/messages&gt;
  &lt;yesno_messages&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/yesno_messages&gt;
&lt;/report&gt;</pre></div></div></div><p>
  Depending on your experience, you can skip, log and show (with timeout) those
  messages. It is recommended to show all <code class="literal">messages</code> with
  timeout. Warnings can be skipped in some places but should not be ignored.
 </p><p>
  The default setting in auto-installation mode is to show errors without
  timeout and to show all warnings/messages with a timeout of 10 seconds.
 </p><div id="id-1.7.5.2.7.8" data-id-title="Critical system messages" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Critical system messages</div><p>
   Note that not all messages during installation are controlled by the
   <code class="literal">report</code> resource. Some critical messages concerning
   package installation and partitioning will show up ignoring your settings in
   the <code class="literal">report</code> section. Usually those messages will need to
   be answered with <span class="guimenu">Yes</span> or <span class="guimenu">No</span>.
  </p></div></section><section class="sect1" id="CreateProfile-Register" data-id-title="System registration and extension selection"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.3 </span><span class="title-name">System registration and extension selection</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Register">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_registration_extensions.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Registering the system with the registration server can be configured within
  the <code class="literal">suse_register</code> resource. The following example
  registers the system with the SUSE Customer Center. In case your organization provides its
  own registration server, you need to specify the required data with the
  <code class="literal">reg_server*</code> properties. Refer to the list below for
  details.
 </p><div class="verbatim-wrap"><pre class="screen">&lt;suse_register&gt;
  &lt;do_registration config:type="boolean"&gt;true&lt;/do_registration&gt;
  &lt;email&gt;tux@example.com&lt;/email&gt;
  &lt;reg_code&gt;<em class="replaceable">MY_SECRET_REGCODE</em>&lt;/reg_code&gt;
  &lt;install_updates config:type="boolean"&gt;true&lt;/install_updates&gt;
  &lt;slp_discovery config:type="boolean"&gt;false&lt;/slp_discovery&gt;
  <span class="phrase">&lt;--! optionally register some add-ons --&gt;
  &lt;addons config:type="list"&gt;
    &lt;addon&gt;
      &lt;name&gt;sle-module-basesystem&lt;/name&gt;
      &lt;version&gt;15.4&lt;/version&gt;
      &lt;arch&gt;<em class="replaceable">x86_64</em>&lt;/arch&gt;
    &lt;/addon&gt;
  &lt;/addons&gt;</span>
&lt;/suse_register&gt;</pre></div><p>
  It is recommended to at least register the Basesystem Module to have access
  to the updates for the base system (the Linux kernel, the system libraries
  and services).
 </p><p>
  As an alternative to the fully automated registration, AutoYaST can also be
  configured to start the YaST registration module during the installation.
  This offers the possibility to enter the registration data manually. The
  following XML code is required:
 </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
 &lt;semi-automatic config:type="list"&gt;
   &lt;semi-automatic_entry&gt;scc&lt;/semi-automatic_entry&gt;
 &lt;/semi-automatic&gt;
&lt;/general&gt;</pre></div><div id="id-1.7.5.2.8.8" data-id-title="Using the installation network settings" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Using the installation network settings</div><p>
   In case you need to use the same network settings that were used for the
   installation, AutoYaST needs to run the network setup in stage 1 right before
   the registration is started:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;networking&gt;
  &lt;setup_before_proposal config:type="boolean"&gt;true&lt;/setup_before_proposal&gt;
&lt;/networking&gt;</pre></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name"><code class="literal">suse_register Values</code> </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.8.9">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_registration_extensions.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.8.9.2"><span class="term">do_registration</span></dt><dd><p>
     Boolean
    </p><div class="verbatim-wrap"><pre class="screen">&lt;do_registration config:type="boolean"&gt;true&lt;/do_registration&gt;</pre></div><p>
     Specify whether the system should be registered or not. If set to
     <code class="literal">false</code> all other options are ignored and the system is
     not registered.
    </p></dd><dt id="id-1.7.5.2.8.9.3"><span class="term">e-mail</span></dt><dd><p>
     E-mail address
    </p><div class="verbatim-wrap"><pre class="screen">&lt;email&gt;tux@example.com&lt;/email&gt;</pre></div><p>
     Optional. The e-mail address matching the registration code.
    </p></dd><dt id="id-1.7.5.2.8.9.4"><span class="term">reg_code</span></dt><dd><p>
     Text
    </p><div class="verbatim-wrap"><pre class="screen">&lt;reg_code&gt;<em class="replaceable">SECRET_REGCODE</em>&lt;/reg_code&gt;</pre></div><p>
     Required. Registration code.
    </p></dd><dt id="id-1.7.5.2.8.9.5"><span class="term">install_updates</span></dt><dd><p>
     Boolean
    </p><div class="verbatim-wrap"><pre class="screen">&lt;install_updates config:type="boolean"&gt;true&lt;/install_updates&gt;</pre></div><p>
     Optional. Determines if updates from the Updates channels should be
     installed. The default value is to not install them
     (<code class="literal">false</code>).
    </p></dd><dt id="id-1.7.5.2.8.9.6"><span class="term">slp_discovery</span></dt><dd><p>
     Boolean
    </p><div class="verbatim-wrap"><pre class="screen">&lt;slp_discovery config:type="boolean"&gt;true&lt;/slp_discovery&gt;</pre></div><p>
     Optional. Search for a registration server via SLP. The default value is
     <code class="literal">false</code>.
    </p><p>
     Expects to find a single server. If more than one server is found, the
     installation will fail. In case there is more than one registration server
     available, you need to specify one with <code class="literal">reg_server</code>.
    </p><p>
     If neither <code class="literal">slp_discovery</code> nor
     <code class="literal">reg_server</code> are set, the system is registered with the
     SUSE Customer Center.
    </p><p>
     This setting also affects the self-update feature: If it is disabled, no
     SLP search will be performed.
    </p></dd><dt id="id-1.7.5.2.8.9.7"><span class="term">reg_server</span></dt><dd><p>
     URL
    </p><div class="verbatim-wrap"><pre class="screen">&lt;reg_server&gt;https://smt.example.com&lt;/reg_server&gt;</pre></div><p>
     Optional. RMT server URL. If neither <code class="literal">slp_discovery</code>
     nor <code class="literal">reg_server</code> are set, the system is registered with
     the SUSE Customer Center.
    </p><p>
     The RMT server is queried for a URL of the self-update repository. So if
     <code class="literal">self_update_url</code> is not set, the RMT server influences
     where the self-updates are downloaded from.<span class="phrase"> Check the Deployment Guide to find
     further information about this feature.</span>
    </p></dd><dt id="id-1.7.5.2.8.9.8"><span class="term">reg_server_cert_fingerprint_type</span></dt><dd><p>
     <code class="literal">SHA1</code> or <code class="literal">SHA256</code>
    </p><div class="verbatim-wrap"><pre class="screen">&lt;reg_server_cert_fingerprint_type&gt;SHA1&lt;/reg_server_cert_fingerprint_type&gt;</pre></div><p>
     Optional. Requires a checksum value provided with
     <code class="literal">reg_server_cert_fingerprint</code>. Using the fingerprint is
     recommended, since it ensures the SSL certificate is verified. The
     matching certificate will be automatically imported when the SSL
     communication fails because of a verification error.
    </p></dd><dt id="id-1.7.5.2.8.9.9"><span class="term">reg_server_cert_fingerprint</span></dt><dd><p>
     Server Certificate Fingerprint value in hexadecimal notion
     (case-insensitive).
    </p><div class="verbatim-wrap"><pre class="screen">&lt;reg_server_cert_fingerprint&gt;<em class="replaceable">01:AB...:EF</em>&lt;/reg_server_cert_fingerprint&gt;</pre></div><p>
     Optional. Requires a fingerprint type value provided with
     <code class="literal">reg_server_cert_fingerprint_type</code>. Using the fingerprint
     is recommended, since it ensures the SSL certificate is verified. The
     matching certificate will be automatically imported when SSL communication
     fails because of a verification error.
    </p></dd><dt id="id-1.7.5.2.8.9.10"><span class="term">reg_server_cert</span></dt><dd><p>
     URL
    </p><div class="verbatim-wrap"><pre class="screen">&lt;reg_server_cert&gt;http://smt.example.com/smt.crt&lt;/reg_server_cert&gt;</pre></div><p>
     Optional. URL of the SSL certificate on the server. Using this option is
     not recommended, since the certificate that is downloaded is not verified.
     Use <code class="literal">reg_server_cert_fingerprint</code> instead.
    </p></dd><dt id="id-1.7.5.2.8.9.11"><span class="term">addons</span></dt><dd><p>
     Add-ons list
    </p><p>
     Specify an extension from the registration server that should be added to
     the installation repositories. See
     <a class="xref" href="#CreateProfile-Register-Extension" title="4.3.1. Extensions">Section 4.3.1, “Extensions”</a> for details.
    </p></dd></dl></div><div id="id-1.7.5.2.8.10" data-id-title="Obtaining a server certificate fingerprint" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Obtaining a server certificate fingerprint</div><p>
   To obtain a server certificate fingerprint for use with the
   <code class="literal">reg_server_cert_fingerprint</code> entry, run the following
   command on the SMT server (edit the default path to the
   <code class="filename">smt.crt</code> file, if needed):
  </p><div class="verbatim-wrap"><pre class="screen">openssl x509 -noout -in /srv/www/htdocs/smt.crt -fingerprint -sha256</pre></div><p>
   To retrieve a fingerprint from the SMT server, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen">curl --insecure -v https://scc.suse.com/smt.crt 2&gt; /dev/null | openssl \
      x509 -noout -fingerprint -sha256</pre></div><p>
   Replace <code class="literal">scc.suse.com</code> with your server.
  </p><p>
   <span class="emphasis"><em>Note:</em></span> This can be used in a trusted network only! In a
   non-trusted network, for example the Internet, you should get the
   fingerprint directly from the server by other means. Fingerprints can be
   fetched via SSH, a saved server configuration and other sources.
   Alternatively, you can verify that the downloaded certificate is identical
   on the server.
  </p></div><section class="sect2" id="CreateProfile-Register-Extension" data-id-title="Extensions"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.3.1 </span><span class="title-name">Extensions</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Register-Extension">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_registration_extensions.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The SUSE Customer Center provides several extensions, such as
   <code class="literal">sle-module-development-tools</code> (Development Tools Module)
   that can be included as additional sources during the installation.
   Extensions can be added via the <code class="literal">addons</code> property within
   the <code class="literal">suse_register</code> block.
  </p><div id="id-1.7.5.2.8.11.3" data-id-title="Availability of extensions" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Availability of extensions</div><p>
    The availability of extensions is product and architecture dependent, not
    all extensions are available on all architectures.
   </p><p>
    Some extensions, such as <code class="literal">sle-ha</code>, require a registration
    code. Depending on your subscription, either use a dedicated registration
    code for the extension, or restate the code for the base product.
   </p></div><p>
   With <code class="command">SUSEConnect --list-extensions</code> you can list all
   available extensions in a registered system, and the commands to activate
   and disable them.
  </p><p>
   The following example shows which extensions are already activated, and
   labels the extensions that require their own registration codes:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> SUSEConnect --list-extensions
AVAILABLE EXTENSIONS AND MODULES

    Basesystem Module 15 SP 4 x86_64 (Activated)
    Deactivate with: SUSEConnect -d -p sle-module-basesystem/15.4/x86_64

        Containers Module 15 SP 4 x86_64
        Activate with: SUSEConnect -p sle-module-containers/15.4/x86_64

        Desktop Applications Module 15 SP 4 x86_64 (Activated)
        Deactivate with: SUSEConnect -d -p sle-module-desktop-applications/
        15.4/x86_64

            SUSE Linux Enterprise Workstation Extension 15 SP 4 x86_64 (BETA)
            Activate with: SUSEConnect -p sle-we/15.4/x86_64 -r ADDITIONAL REGCODE             
            [...]</pre></div><p>
   The <code class="option">-p</code> argument (in the above example) displays the
   <em class="replaceable">NAME/VERSION/ARCH</em> values that can be used in the
   AutoYaST profile.
  </p><p>
   The following example shows how to configure a list of extensions. These go
   in the <code class="literal">suse_register</code> block:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;suse_register&gt;
  &lt;do_registration config:type="boolean"&gt;true&lt;/do_registration&gt;
  &lt;email&gt;tux@example.com&lt;/email&gt;
  &lt;reg_code&gt;MY_SECRET_REGCODE&lt;/reg_code&gt;
  &lt;install_updates config:type="boolean"&gt;true&lt;/install_updates&gt;
  &lt;slp_discovery config:type="boolean"&gt;false&lt;/slp_discovery&gt;
  
  &lt;--! optionally register some add-ons --&gt;   
 &lt;addons config:type="list"&gt;
   &lt;addon&gt;
    &lt;!-- Development Tools Module --&gt;
    &lt;!-- Depends on: Desktop Applications Module --&gt;     
    &lt;name&gt;sle-module-development-tools&lt;/name&gt;
    &lt;version&gt;15.3&lt;/version&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
   &lt;/addon&gt;
 
   &lt;addon&gt;
    &lt;!-- SUSE CaaS Platform (BETA) --&gt;
    &lt;!-- Depends on: Containers Module --&gt;
    &lt;name&gt;caasp&lt;/name&gt;
    &lt;version&gt;4.0&lt;/version&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
    &lt;reg_code&gt;REG_CODE_REQUIRED&lt;/reg_code&gt;
   &lt;/addon&gt;

   &lt;addon&gt;
    &lt;!-- SUSE Enterprise Storage --&gt;
    &lt;!-- Depends on: Server Applications Module --&gt;
    &lt;name&gt;ses&lt;/name&gt;
    &lt;version&gt;6&lt;/version&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
    &lt;reg_code&gt;REG_CODE_REQUIRED&lt;/reg_code&gt;
   &lt;/addon&gt;

   &lt;addon&gt;
    &lt;!-- SUSE Linux Enterprise High Availability Extension --&gt;
    &lt;!-- Depends on: Server Applications Module --&gt;
    &lt;name&gt;sle-ha&lt;/name&gt;
    &lt;version&gt;15.3&lt;/version&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
    &lt;reg_code&gt;REG_CODE_REQUIRED&lt;/reg_code&gt;
   &lt;/addon&gt; 
 &lt;/addons&gt;
&lt;/suse_register&gt;</pre></div><p>
   You may also see all available modules and extensions at
   <a class="link" href="https://scc.suse.com/packages" target="_blank">https://scc.suse.com/packages</a>. Select your product and
   architecture, then click the In Module form to see a list of all extensions.
  </p><div id="id-1.7.5.2.8.11.11" data-id-title="Extension dependencies" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Extension dependencies</div><p>
    Since SLES 15, AutoYaST automatically reorders the extensions according to
    their dependencies during registration. This means the order of the
    extensions in the AutoYaST profile is not important.
   </p><p>
    Also AutoYaST automatically registers the dependent extensions even though they
    are missing in the profile. This means you are not required to fill the
    extensions list completely.
   </p><p>
    However, if the dependent extension requires a registration key, this must
    be specified in the profile, including the registration key. Otherwise the
    registration would fail.
   </p><p>
    The architecture and version of an extension are not mandatory. The
    registration workflow will evaluate the right one.
   </p></div></section></section><section class="sect1" id="CreateProfile-Bootloader" data-id-title="The boot loader"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.4 </span><span class="title-name">The boot loader</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Bootloader">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_bootloader.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This documentation is for <code class="command">yast2-bootloader</code> and applies
    to GRUB 2. For older product versions shipping with legacy GRUB, refer to
    the documentation that comes with your distribution in
    <code class="filename">/usr/share/doc/packages/autoyast2/</code>
  </p><p>
    By default, AutoYaST proposes the same booting mechanism as used by the booting
    medium. For example, if you boot using EFI, the GRUB 2 for EFI is
    installed. Therefore, you can omit this section unless you have specific
    requirements. As the EFI boot requires specific partitioning, we
    recommend using the automatic partitioning as described in
    <a class="xref" href="#CreateProfile-Automatic-Partitioning" title="4.5.1. Automatic partitioning">Section 4.5.1, “Automatic partitioning”</a>, which will create
    all needed partitions automatically.
  </p><p>
    If you need to adapt the default, use the
    <code class="literal">&lt;bootloader&gt;</code> part. Its general structure
    looks like the following snippet:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;bootloader&gt;
  &lt;loader_type&gt;
    &lt;!-- boot loader type (grub2 or grub2-efi) --&gt;
  &lt;/loader_type&gt;
  &lt;global&gt;
    &lt;!--
      entries defining the installation settings for GRUB 2 and
      the generic boot code
    --&gt;
  &lt;/global&gt;
  &lt;device_map config:type="list"&gt;
    &lt;!-- entries defining the order of devices --&gt;
  &lt;/device_map&gt;
 &lt;/bootloader&gt;</pre></div><p>
    It is not necessary to fill in all settings, you can specify only those you need to change. AutoYaST will then merge the default values with those specified in the profile.
 </p><section class="sect2" id="CreateProfile-Bootloader-type" data-id-title="Loader type"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.4.1 </span><span class="title-name">Loader type</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Bootloader-type">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_bootloader.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   This defines which boot loader (UEFI or BIOS/legacy) to use. Not all
   architectures support both legacy and EFI variants of the boot loader. The
   safest (<code class="literal">default</code>) option is to leave the decision up to
   the installer.
  </p><div class="verbatim-wrap"><pre class="screen">&lt;loader_type&gt;<em class="replaceable">LOADER_TYPE</em>&lt;/loader_type&gt;</pre></div><p>
   Possible values for <em class="replaceable">LOADER_TYPE</em> are:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <code class="literal">default</code>: The installer chooses the correct boot loader.
     This is the default when no option is defined.
    </p></li><li class="listitem"><p>
     <code class="literal">grub2</code>: Use the legacy BIOS boot loader.
    </p></li><li class="listitem"><p>
     <code class="literal">grub2-efi</code>: Use the EFI boot loader.
    </p></li><li class="listitem"><p>
     <code class="literal">none</code>: The boot process is not managed and configured by
     the installer.
    </p></li></ul></div></section><section class="sect2" id="CreateProfile-Bootloader-globals" data-id-title="Globals"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.4.2 </span><span class="title-name">Globals</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Bootloader-globals">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_bootloader.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   This is an important if optional part. Define here where to install GRUB 2
   and how the boot process will work. Again,
   <code class="command">yast2-bootloader</code> proposes a configuration if you do not
   define one. Usually the AutoYaST control file includes only this part and all
   other parts are added automatically during installation by
   <code class="command">yast2-bootloader</code>. Unless you have some special
   requirements, do not specify the boot loader configuration in the XML file.
  </p><div id="id-1.7.5.2.9.9.3" data-id-title="Hibernation" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Hibernation</div><p>
     If there is a need for specific hibernation settings, then
     <code class="literal">resume</code> or <code class="literal">noresume</code> in the
     <code class="literal">append</code> configuration can be used.
    </p><p>
      To disable hibernation regardless of what the installer proposes,
      specify <code class="literal">noresume</code> as a kernel parameter in the
      <code class="literal">append</code> section.
    </p><p>
      To specify the hibernation device, use the <code class="literal">resume</code>
      key with the device path. The recommended way to get stable results is
      configuring your own partitioning, and having a swap device with a
      label:
    </p><div class="verbatim-wrap"><pre class="screen">        &lt;append&gt;quiet resume=/dev/disk/by-label/my_swap&lt;/append&gt;</pre></div><p>
      If you do not use <code class="literal">resume</code> or
      <code class="literal">noresume</code>, or if <code class="literal">resume</code> specifies
      a device that will not exist on the installed system, then
      the installer may propose a correct value for
      <code class="literal">resume</code>, or it may remove the hibernation parameter
      completely, depending on installer logic.
    </p></div><div class="verbatim-wrap"><pre class="screen">&lt;global&gt;
  &lt;activate&gt;true&lt;/activate&gt;
  &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
  &lt;terminal&gt;gfxterm&lt;/terminal&gt;
  &lt;gfxmode&gt;1280x1024x24&lt;/gfxmode&gt;
&lt;/global&gt;</pre></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Boot loader global options </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.9.9.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_bootloader.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.9.9.5.2"><span class="term">activate</span></dt><dd><p>
      Set the boot flag on the boot partition. The boot partition can be
      <code class="filename">/</code> if there is no separate <code class="filename">/boot</code>
      partition. If the boot partition is on a logical partition, the boot flag
      is set to the extended partition.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;activate&gt;true&lt;/activate&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.3"><span class="term">append</span></dt><dd><p>
      Kernel parameters added at the end of boot entries for normal and
      recovery mode.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;append&gt;nomodeset vga=0x317&lt;/append&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.4"><span class="term">boot_boot</span></dt><dd><p>
      Write GRUB 2 to a separate <code class="filename">/boot</code> partition. If no
      separate <code class="filename">/boot</code> partition exists, GRUB 2 will be
      written to <code class="filename">/</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;boot_boot&gt;false&lt;/boot_boot&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.5"><span class="term">boot_custom</span></dt><dd><p>
      Write GRUB 2 to a custom device.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;boot_custom&gt;/dev/sda3&lt;/boot_custom&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.6"><span class="term">boot_extended</span></dt><dd><p>
      Write GRUB 2 to the extended partition (important if you want to use
      generic boot code and the <code class="filename">/boot</code> partition is
      logical). Note: if the boot partition is logical, you should use
      <code class="literal">boot_mbr</code> (write GRUB 2 to MBR) rather than
      <code class="literal">generic_mbr</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;boot_extended&gt;false&lt;/boot_extended&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.7"><span class="term">boot_mbr</span></dt><dd><p>
      Write GRUB 2 to the MBR of the first disk in the order.
      (<code class="filename">device.map</code> includes the order of the disks.)
     </p><div class="verbatim-wrap"><pre class="screen">&lt;boot_mbr&gt;false&lt;/boot_mbr&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.8"><span class="term">boot_root</span></dt><dd><p>
      Write GRUB 2 to <code class="filename">/</code> partition.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;boot_root&gt;false&lt;/boot_root&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.9"><span class="term">cpu_mitigations</span></dt><dd><p>
      Allows choosing a default setting of kernel boot command line parameters
      for CPU mitigation (and at the same time strike a balance between
      security and performance).
     </p><p>
      Possible values are:
     </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.9.9.5.9.2.3.1"><span class="term">auto</span></dt><dd><p>
   Enables all mitigations required for your CPU model, but does
   not protect against cross-CPU thread attacks. This setting may impact
   performance to some degree, depending on the workload.
  </p></dd><dt id="id-1.7.5.2.9.9.5.9.2.3.2"><span class="term">nosmt</span></dt><dd><p>
    Provides the full set of available security mitigations. Enables all
    mitigations required for your CPU model. In addition, it disables
    Simultaneous Multithreading (SMT) to avoid side-channel attacks across
    multiple CPU threads. This setting may further impact performance,
    depending on the workload.
    </p></dd><dt id="id-1.7.5.2.9.9.5.9.2.3.3"><span class="term">off</span></dt><dd><p>
    Disables all mitigations. Side-channel attacks against your CPU
    are possible, depending on the CPU model. This setting has no impact
    on performance.
   </p></dd><dt id="id-1.7.5.2.9.9.5.9.2.3.4"><span class="term">manual</span></dt><dd><p>
    Does not set any mitigation level. Specify your CPU mitigations manually
    by using the kernel command line options.
   </p></dd></dl></div><div class="verbatim-wrap"><pre class="screen">&lt;cpu_mitigations&gt;auto&lt;/cpu_mitigations&gt;</pre></div><p>
      If not set in AutoYaST, the respective settings can be changed via kernel
      command line. By default, the (product-specific) settings in the
      <code class="filename">/control.xml</code> file on the installation medium are
      used (if nothing else is specified).
     </p></dd><dt id="id-1.7.5.2.9.9.5.10"><span class="term">generic_mbr</span></dt><dd><p>
      Write generic boot code to the MBR (will be ignored if
      <code class="literal">boot_mbr</code> is set to <code class="literal">true</code>).
     </p><div class="verbatim-wrap"><pre class="screen">&lt;generic_mbr config:type="boolean"&gt;false&lt;/generic_mbr&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.11"><span class="term">gfxmode</span></dt><dd><p>
      Graphical resolution of the GRUB 2 screen (requires &lt;terminal&gt; to
      be set to <code class="literal">gfxterm</code>).
     </p><p>
      Valid entries are <code class="literal">auto</code>, <code class="literal"><em class="replaceable">
      HORIZONTAL</em>x<em class="replaceable">VERTICAL</em></code>,
      or <code class="literal"><em class="replaceable">HORIZONTAL</em>x<em class="replaceable">VERTICAL
      </em>x<em class="replaceable">COLOR DEPTH</em></code>. You can
      see the screen resolutions supported by GRUB 2 on a particular system by
      using the <code class="command">vbeinfo</code> command at the GRUB 2 command line
      in the running system.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;gfxmode&gt;1280x1024x24&lt;/gfxmode&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.12"><span class="term">os_prober</span></dt><dd><p>
      If set to <code class="literal">true</code>, automatically searches for operating
      systems already installed and generates boot entries for them during the
      installation.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;os_prober&gt;false&lt;/os_prober&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.13"><span class="term">password</span></dt><dd><p>
      If this is defined, it protects the boot loader with a password. The
      system will not boot until the password is entered.
    </p><p>
      It has three subelements: <code class="literal">value</code>,
      <code class="literal">encrypted</code>, and <code class="literal">unrestricted</code>.
    </p><p>
      <code class="literal">value</code> holds the password. It can be either
      plain text, which YaST will encrypt, or a password already encrypted
      with <code class="command">grub-mkpasswd-pbkdf2</code>. Set
      <code class="literal">encrypted</code> to <code class="literal">true</code> when you use
      an already encrypted password.
    </p><p>
     When <code class="literal">unrestricted</code> is set to
     <code class="literal">false</code>, users need the password defined by the <code class="literal">value</code> subelement to boot or edit GRUB 2 menu
     entries (by pressing <span class="keycap">E</span> on a selected boot menu item).
     When it is set to <code class="literal">true</code>, users can boot the
     system without a password, but need a password to edit GRUB 2 menu
     entries. If the option is omitted, it defaults to
     <code class="literal">true</code>.
    </p><p><span class="phrase">For more information on managing boot
      passwords, see <span class="intraxref">Book “Administration Guide”, Chapter 18 “The boot loader GRUB 2” Protect Boot Loader with Password
     </span>.</span>
     </p><div class="verbatim-wrap"><pre class="screen">&lt;password&gt;&lt;value&gt;my_strong_password&lt;/value&gt;&lt;encrypted&gt;false&lt;/encrypted&gt;&lt;unrestricted&gt;false&lt;/unrestricted&gt;&lt;/password&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.14"><span class="term">suse_btrfs</span></dt><dd><p>
      Obsolete and no longer used. Booting from Btrfs snapshots is
      automatically enabled.
     </p></dd><dt id="id-1.7.5.2.9.9.5.15"><span class="term">serial</span></dt><dd><p>
      Command to execute if the GRUB 2 terminal mode is set to
      <code class="literal">serial</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;serial&gt;serial --speed=115200 --unit=0 --word=8 --parity=no --stop=1&lt;/serials&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.16"><span class="term">secure_boot</span></dt><dd><p>
      If set to <code class="literal">false</code>, then UEFI secure boot is disabled.
      Works only for <code class="literal">grub2-efi</code> boot loader.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;secure_boot&gt;false&lt;/secure_boot&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.17"><span class="term">terminal</span></dt><dd><p>
      Specify the GRUB 2 terminal mode to use. Valid entries are
      <code class="literal">console</code>, <code class="literal">gfxterm</code>, and
      <code class="literal">serial</code>. If set to <code class="literal">serial</code>, the
      serial command needs to be specified with &lt;serial&gt;, too.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;terminal&gt;serial&lt;/terminal&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.18"><span class="term">timeout</span></dt><dd><p>
      The timeout in seconds until the default boot entry is booted
      automatically.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.19"><span class="term">trusted_boot</span></dt><dd><p>
      If set to <code class="literal">true</code>, then Trusted GRUB is used. Trusted
      GRUB supports Trusted Platform Module (TPM). Works only for
      <code class="literal">grub2</code> boot loader.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;trusted_boot"&gt;true&lt;/trusted_boot&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.20"><span class="term">update_nvram</span></dt><dd><p>
      If set to <code class="literal">true</code>, then AutoYaST adds an NVRAM entry for the
      boot loader in the firmware. This is the desirable behavior unless you
      want to preserve a specific setting or you need to work around
      firmware issues.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;update_nvram&gt;true&lt;/update_nvram&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.21"><span class="term">vgamode</span></dt><dd><p>
      Adds the kernel parameter <code class="literal">vga=<em class="replaceable">VALUE</em>
      </code> to the boot entries.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;vgamode&gt;0x317&lt;/vgamode&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.22"><span class="term">xen_append</span></dt><dd><p>
      Kernel parameters added at the end of boot entries for Xen guests.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;xen_append&gt;nomodeset vga=0x317&lt;/xen_append&gt;</pre></div></dd><dt id="id-1.7.5.2.9.9.5.23"><span class="term">xen_kernel_append</span></dt><dd><p>
      Kernel parameters added at the end of boot entries for Xen kernels on
      the VM Host Server.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;xen_kernel_append&gt;dom0_mem=768M&lt;/xen_kernel_append&gt;</pre></div></dd></dl></div></section><section class="sect2" id="CreateProfile-Bootloader-dev-map" data-id-title="Device map"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.4.3 </span><span class="title-name">Device map</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Bootloader-dev-map">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_bootloader.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   GRUB 2 avoids mapping problems between BIOS drives and Linux devices by
   using device ID strings (UUIDs) or file system labels when generating its
   configuration files. GRUB 2 utilities create a temporary device map on the
   fly, which is usually sufficient, particularly on single-disk systems.
   However, if you need to override the automatic device mapping mechanism,
   create your custom mapping in this section.
  </p><div class="verbatim-wrap"><pre class="screen">&lt;device_map config:type="list"&gt;
  &lt;device_map_entry&gt;
    &lt;firmware&gt;hd0&lt;/firmware&gt; &lt;!-- order of devices in target map  --&gt;
    &lt;linux&gt;/dev/disk/by-id/ata-ST3500418AS_6VM23FX0&lt;/linux&gt; &lt;!-- name of device (disk)  --&gt;
  &lt;/device_map_entry&gt;
&lt;/device_map&gt;</pre></div></section></section><section class="sect1" id="CreateProfile-Partitioning" data-id-title="Partitioning"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.5 </span><span class="title-name">Partitioning</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Partitioning">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  When it comes to partitioning, we can categorize AutoYaST use cases into three
  different levels:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Automatic partitioning. The user does not care about the partitioning and
    trusts in AutoYaST to do the right thing.
   </p></li><li class="listitem"><p>
    Guided partitioning. The user wants to set some basic settings. For
    example, a user wants to use LVM but has no idea about how to configure
    partitions, volume groups, and so on.
   </p></li><li class="listitem"><p>
    Expert partitioning. The user specifies how the layout should look.
    However, a complete definition is not required, and AutoYaST should propose
    reasonable defaults for missing parts.
   </p></li></ul></div><p>
  To some extent, it is like using the regular installer. You can skip the
  partitioning screen and trust in YaST, use the <span class="guimenu">Guided
  Proposal</span>, or define the partitioning layout through the
  <span class="guimenu">Expert Partitioner</span>.
 </p><section class="sect2" id="CreateProfile-Automatic-Partitioning" data-id-title="Automatic partitioning"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.1 </span><span class="title-name">Automatic partitioning</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Automatic-Partitioning">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   AutoYaST can come up with a sensible partitioning layout without any user
   indication. Although it depends on the selected product to install, AutoYaST
   usually proposes a Btrfs root file system, a separate
   <code class="literal">/home</code> using XFS and a swap partition. Additionally,
   depending on the architecture, it adds any partition that might be needed to
   boot (like BIOS GRUB partitions).
  </p><p>
   However, these defaults might change depending on factors like the available
   disk space. For example, having a separate <code class="literal">/home</code> depends
   on the amount of available disk space.
  </p><p>
   If you want to influence these default values, you can use the approach
   described in <a class="xref" href="#CreateProfile-Guided-Partitioning" title="4.5.2. Guided partitioning">Section 4.5.2, “Guided partitioning”</a>.
  </p></section><section class="sect2" id="CreateProfile-Guided-Partitioning" data-id-title="Guided partitioning"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.2 </span><span class="title-name">Guided partitioning</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Guided-Partitioning">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Although AutoYaST can come up with a partitioning layout without any user
   indication, sometimes it is useful to set some generic parameters and let
   AutoYaST do the rest. For example, you may be interested in using LVM or
   encrypting your file systems without having to deal with the details. It is
   similar to what you would do when using the guided proposal in a regular
   installation.
  </p><p>
   The <code class="literal">storage</code> section in
   <a class="xref" href="#example-lvm-guided" title="LVM-based guided partitioning">Example 4.3, “LVM-based guided partitioning”</a> instructs AutoYaST to set up a
   partitioning layout using LVM and deleting all Windows partitions, no matter
   whether they are needed.
  </p><div class="example" id="example-lvm-guided" data-id-title="LVM-based guided partitioning"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.3: </span><span class="title-name">LVM-based guided partitioning </span></span><a title="Permalink" class="permalink" href="#example-lvm-guided">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
   &lt;storage&gt;
     &lt;proposal&gt;
       &lt;lvm config:type="boolean"&gt;true&lt;/lvm&gt;
       &lt;windows_delete_mode config:type="symbol"&gt;all&lt;/windows_delete_mode&gt;
     &lt;/proposal&gt;
   &lt;/storage&gt;
&lt;/general&gt;</pre></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.10.7.5.1"><span class="term">lvm</span></dt><dd><p>
      Creates an LVM-based proposal. The default is <code class="literal">false</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;lvm config:type="boolean"&gt;true&lt;/lvm&gt;</pre></div></dd><dt id="id-1.7.5.2.10.7.5.2"><span class="term">resize_windows</span></dt><dd><p>
      When set to <code class="literal">true</code>, AutoYaST resizes Windows partitions if
      needed to make room for the installation.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;resize_windows config:type="boolean"&gt;false&lt;/resize_windows&gt;</pre></div></dd><dt id="id-1.7.5.2.10.7.5.3"><span class="term">windows_delete_mode</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        <code class="literal">none</code> does not remove Windows partitions.
       </p></li><li class="listitem"><p>
        <code class="literal">ondemand</code> removes Windows partitions if needed.
       </p></li><li class="listitem"><p>
        <code class="literal">all</code> removes all Windows partitions.
       </p></li></ul></div><div class="verbatim-wrap"><pre class="screen">&lt;windows_delete_mode config:type="symbol"&gt;ondemand&lt;/windows_delete_mode&gt;</pre></div></dd><dt id="id-1.7.5.2.10.7.5.4"><span class="term">linux_delete_mode</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        <code class="literal">none</code> does not remove Linux partitions.
       </p></li><li class="listitem"><p>
        <code class="literal">ondemand</code> removes Linux partitions if needed.
       </p></li><li class="listitem"><p>
        <code class="literal">all</code> removes all Linux partitions.
       </p></li></ul></div><div class="verbatim-wrap"><pre class="screen">&lt;linux_delete_mode config:type="symbol"&gt;ondemand&lt;/linux_delete_mode&gt;</pre></div></dd><dt id="id-1.7.5.2.10.7.5.5"><span class="term">other_delete_mode</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        <code class="literal">none</code> does not remove other partitions.
       </p></li><li class="listitem"><p>
        <code class="literal">ondemand</code> removes other partitions if needed.
       </p></li><li class="listitem"><p>
        <code class="literal">all</code> removes all other partitions.
       </p></li></ul></div><div class="verbatim-wrap"><pre class="screen">&lt;other_delete_mode config:type="symbol"&gt;ondemand&lt;/other_delete_mode&gt;</pre></div></dd><dt id="id-1.7.5.2.10.7.5.6"><span class="term">encryption_password</span></dt><dd><p>
      Enables encryption using the specified password. By default, encryption
      is disabled.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;encryption_password&gt;some-secret&lt;/encryption_password&gt;</pre></div></dd></dl></div></section><section class="sect2" id="CreateProfile-Expert-Partitioning" data-id-title="Expert partitioning"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.3 </span><span class="title-name">Expert partitioning</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Expert-Partitioning">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   As an alternative to guided partitioning, AutoYaST allows to describe the
   partitioning layout through a <code class="literal">partitioning</code> section.
   However, AutoYaST does not need to know every single detail and can build a
   sensible layout from a rather incomplete specification.
  </p><p>
   The <code class="literal">partitioning</code> section is a list of
   <code class="literal">drive</code> elements. Each of these sections describes an
   element of the partitioning layout like a disk, an LVM volume group, a RAID,
   a multi-device Btrfs file system, and so on.
  </p><p>
   <a class="xref" href="#example-partitioning" title="Creating /, /home and swap partitions">Example 4.4, “Creating <code class="literal">/</code>, <code class="literal">/home</code> and <code class="literal">swap</code> partitions”</a>, asks AutoYaST to create a
   <code class="literal">/</code>, a <code class="literal">/home</code> and a
   <code class="literal">swap</code> partition using the whole disk. Note that some
   information is missing, like which file systems each partition should use.
   However, that is not a problem, and AutoYaST will propose sensible values for
   them.
  </p><div class="example" id="example-partitioning" data-id-title="Creating /, /home and swap partitions"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.4: </span><span class="title-name">Creating <code class="literal">/</code>, <code class="literal">/home</code> and <code class="literal">swap</code> partitions </span></span><a title="Permalink" class="permalink" href="#example-partitioning">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;size&gt;20GiB&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;mount&gt;/home&lt;/mount&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
        &lt;size&gt;1GiB&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;</pre></div></div></div><div id="ay-boot-partition" data-id-title="Proposing a boot partition" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Proposing a boot partition</div><p>
    AutoYaST checks whether the layout described in the profile is bootable or not.
    If it is not, it adds the missing partitions. So, if you are unsure about
    which partitions are needed to boot, you can rely on AutoYaST to make the right
    decision.
   </p></div><section class="sect3" id="CreateProfile-Partitioning-config" data-id-title="Drive configuration"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.3.1 </span><span class="title-name">Drive configuration</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Partitioning-config">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The elements listed below must be placed within the following XML
    structure:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;profile&gt;
  &lt;partitioning config:type="list"&gt;
    &lt;drive&gt;
     ...
    &lt;/drive&gt;
  &lt;/partitioning&gt;
&lt;/profile&gt;</pre></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Attribute, Values, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.8.7.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.10.8.7.4.2"><span class="term">device</span></dt><dd><p>
       Optional, the device you want to configure. If left out, AutoYaST tries to
       guess the device. See <a class="xref" href="#ay-partitioning-skip-devices" title="Tip: Skipping devices">Tip: Skipping devices</a> on
       how to influence guessing.
      </p><p>
       If set to <code class="literal">ask</code>, AutoYaST will ask the user which device to
       use during installation.
      </p><p>
       You can use persistent device names via ID, like
       <code class="filename">/dev/disk/by-id/<em class="replaceable">ata-WDC_WD3200AAKS-75L9</em></code>
       or <span class="emphasis"><em>by-path</em></span>, like
       <code class="filename">/dev/disk/by-path/<em class="replaceable">pci-0001:00:03.0-scsi-0:0:0:0</em></code>.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;device&gt;/dev/sda&lt;/device&gt;</pre></div><p>
       In case of volume groups, software RAID or <code class="systemitem">bcache</code> devices, the name in
       the installed system may be different (to avoid clashes with existing
       devices).
      </p><p>
       See <a class="xref" href="#ay-partition-multipath" title="4.5.7. Multipath support">Section 4.5.7, “Multipath support”</a> for further information
       about dealing with multipath devices.
      </p></dd><dt id="id-1.7.5.2.10.8.7.4.3"><span class="term">initialize</span></dt><dd><p>
       Optional, the default is <code class="literal">false</code>. If set to
       <code class="literal">true</code>, the partition table is wiped out before AutoYaST
       starts the partition calculation.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;initialize config:type="boolean"&gt;true&lt;/initialize&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.7.4.4"><span class="term">partitions</span></dt><dd><p>
       Optional, a list of <code class="literal">&lt;partition&gt;</code> entries (see
       <a class="xref" href="#ay-partition-configuration" title="4.5.3.2. Partition configuration">Section 4.5.3.2, “Partition configuration”</a>).
      </p><div class="verbatim-wrap"><pre class="screen">&lt;partitions config:type="list"&gt;
          &lt;partition&gt;...&lt;/partition&gt;
          ...
          &lt;/partitions&gt;</pre></div><p>
       If no partitions are specified, AutoYaST will create a reasonable
       partitioning layout (see <a class="xref" href="#ay-auto-partitioning" title="4.5.3.5. Filling the gaps">Section 4.5.3.5, “Filling the gaps”</a>).
      </p></dd><dt id="id-1.7.5.2.10.8.7.4.5"><span class="term">pesize</span></dt><dd><p>
       Optional, for LVM only. The default is 4M for LVM volume groups.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;pesize&gt;8M&lt;/pesize&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.7.4.6"><span class="term">use</span></dt><dd><p>
       Recommended, specifies the strategy AutoYaST will use to partition the hard
       disk. Choose from:
      </p><p>
       <code class="literal">all</code>, uses the whole device while calculating the new
       partitioning.
      </p><p>
       <code class="literal">linux</code>, only existing Linux partitions are used.
      </p><p>
       <code class="literal">free</code>, only unused space on the device is used, no
       existing partitions are touched.
      </p><p>
       <em class="replaceable">1,2,3</em>, a list of comma-separated partition
       numbers to use.
      </p></dd><dt id="id-1.7.5.2.10.8.7.4.7"><span class="term">type</span></dt><dd><p>
       Optional, specifies the type of the <code class="literal">drive</code>. The
       default is <code class="literal">CT_DISK</code> for a normal physical hard disk.
       The following is a list of all options:
      </p><p>
       <code class="literal">CT_DISK</code> for physical hard disks (default).
      </p><p>
       <code class="literal">CT_LVM</code> for LVM volume groups.
      </p><p>
       <code class="literal">CT_MD</code> for software RAID devices.
      </p><p>
       <code class="literal">CT_DMMULTIPATH</code> for Multipath devices (deprecated, implied with CT_DISK).
      </p><p>
       <code class="literal">CT_BCACHE</code> for software <code class="systemitem">bcache</code> devices.
      </p><p>
       <code class="literal">CT_BTRFS</code> for multi-device Btrfs file systems.
      </p><p>
       <code class="literal">CT_NFS</code> for NFS.
      </p><p>
       <code class="literal">CT_TMPFS</code> for <code class="literal">tmpfs</code> file systems.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;type config:type="symbol"&gt;CT_LVM&lt;/type&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.7.4.8"><span class="term">disklabel</span></dt><dd><p>
       Optional. By default YaST decides what makes sense. If a partition
       table of a different type already exists, it will be re-created with the
       given type only if it does not include any partition that should be kept
       or reused. To use the disk without creating any partition, set this
       element to <code class="literal">none</code>. The following is a list of all
       options:
      </p><p>
       <code class="literal">msdos</code>
      </p><p>
       <code class="literal">gpt</code>
      </p><p>
       <code class="literal">none</code>
      </p><div class="verbatim-wrap"><pre class="screen">&lt;disklabel&gt;gpt&lt;/disklabel&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.7.4.9"><span class="term">keep_unknown_lv</span></dt><dd><p>
       Optional, the default is <code class="literal">false</code>.
      </p><p>
       This value only makes sense for type=CT_LVM drives. If you are reusing a
       logical volume group and you set this to <code class="literal">true</code>, all
       existing logical volumes in that group will not be touched unless they
       are specified in the &lt;partitioning&gt; section. So you can keep
       existing logical volumes without specifying them.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;keep_unknown_lv config:type="boolean"&gt;false&lt;/keep_unknown_lv&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.7.4.10"><span class="term">enable_snapshots</span></dt><dd><p>
       Optional, the default is <code class="literal">true</code>.
      </p><p>
       Enables snapshots on Btrfs file systems mounted at <code class="literal">/</code>
       (does not apply to other file systems, or Btrfs file systems not mounted
       at <code class="literal">/</code>).
      </p><div class="verbatim-wrap"><pre class="screen">&lt;enable_snapshots config:type="boolean"&gt;false&lt;/enable_snapshots&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.7.4.11"><span class="term">quotas</span></dt><dd><p>
       Optional, the default is <code class="literal">false</code>.
      </p><p>
       Enables support for Btrfs subvolume quotas. Setting this element to
       <code class="literal">true</code> will enable support for quotas for the file
       system. However, you need to set the limits for each subvolume. Check
       <a class="xref" href="#ay-btrfs-subvolumes" title="4.5.3.3. Btrfs subvolumes">Section 4.5.3.3, “Btrfs subvolumes”</a> for further information.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;quotas config:type="boolean"&gt;true&lt;/quotas&gt;</pre></div></dd></dl></div><div id="id-1.7.5.2.10.8.7.5" data-id-title="Beware of data loss" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Beware of data loss</div><p>
     The value provided in the <code class="literal">use</code> property determines how
     existing data and partitions are treated. The value <code class="literal">all</code>
     means that the entire disk will be erased. Make backups and use the
     <code class="literal">confirm</code> property if you need to keep some partitions
     with important data. Otherwise, no pop-ups will notify you about
     partitions being deleted.
    </p></div><div id="ay-partitioning-skip-devices" data-id-title="Skipping devices" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Skipping devices</div><p>
     You can influence AutoYaST's device-guessing for cases where you do not
     specify a &lt;device&gt; entry on your own. Usually AutoYaST would use the
     first device it can find that looks reasonable but you can configure it to
     skip some devices like this:
    </p><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;initialize config:type="boolean"&gt;true&lt;/initialize&gt;
    &lt;skip_list config:type="list"&gt;
      &lt;listentry&gt;
        &lt;!-- skip devices that use the usb-storage driver --&gt;
        &lt;skip_key&gt;driver&lt;/skip_key&gt;
        &lt;skip_value&gt;usb-storage&lt;/skip_value&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;!-- skip devices that are smaller than 1GB --&gt;
        &lt;skip_key&gt;size_k&lt;/skip_key&gt;
        &lt;skip_value&gt;1048576&lt;/skip_value&gt;
        &lt;skip_if_less_than config:type="boolean"&gt;true&lt;/skip_if_less_than&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;!-- skip devices that are larger than 100GB --&gt;
        &lt;skip_key&gt;size_k&lt;/skip_key&gt;
        &lt;skip_value&gt;104857600&lt;/skip_value&gt;
        &lt;skip_if_more_than config:type="boolean"&gt;true&lt;/skip_if_more_than&gt;
      &lt;/listentry&gt;
    &lt;/skip_list&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div><p>
     For a list of all possible &lt;skip_key&gt;s, run <code class="command">yast2
     ayast_probe</code> on a system that has already been installed.
    </p></div></section><section class="sect3" id="ay-partition-configuration" data-id-title="Partition configuration"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.3.2 </span><span class="title-name">Partition configuration</span></span> <a title="Permalink" class="permalink" href="#ay-partition-configuration">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The elements listed below must be placed within the following XML
    structure:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;drive&gt;
  &lt;partitions config:type="list"&gt;
    &lt;partition&gt;
      ...
    &lt;/partition&gt;
  &lt;/partitions&gt;
&lt;/drive&gt;</pre></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.10.8.8.4.1"><span class="term">create</span></dt><dd><p>
       Specify if this partition or logical volume must be created, or if it
       already exists. If set to <code class="literal">false</code>, you also need to set
       one of <code class="literal">partition_nr</code>, <code class="literal">lv_name</code>,
       <code class="literal">label</code>, or <code class="literal">uuid</code> to tell AutoYaST which
       device to use.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;create config:type="boolean"&gt;false&lt;/create&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.2"><span class="term">crypt_method</span></dt><dd><p>
       Optional, the partition will be encrypted using one of these methods:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         <code class="literal">luks1</code>: regular LUKS1 encryption.
        </p></li><li class="listitem"><p>
         <code class="literal">pervasive_luks2</code>: pervasive volume encryption.
        </p></li><li class="listitem"><p>
         <code class="literal">protected_swap</code>: encryption with volatile protected
         key.
        </p></li><li class="listitem"><p>
         <code class="literal">secure_swap</code>: encryption with volatile secure key.
        </p></li><li class="listitem"><p>
         <code class="literal">random_swap</code>: encryption with volatile random key.
        </p></li></ul></div><div class="verbatim-wrap"><pre class="screen">&lt;crypt_method config:type="symbol"&gt;luks1&lt;/crypt_method&gt;</pre></div><p>
       Encryption method selection was introduced in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
       <span class="phrase">15 SP2</span>.
       To mimic the behavior of previous versions, use
       <code class="literal">luks1</code>.
      </p><p>
       See <code class="literal">crypt_key</code> element to learn how to specify the
       encryption password if needed.
      </p></dd><dt id="id-1.7.5.2.10.8.8.4.3"><span class="term">crypt_fs</span></dt><dd><p>
       Partition will be encrypted, the default is <code class="literal">false</code>.
       This element is deprecated. Use <code class="literal">crypt_method</code> instead.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;crypt_fs config:type="boolean"&gt;true&lt;/crypt_fs&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.4"><span class="term">crypt_key</span></dt><dd><p>
       Required if <code class="literal">crypt_method</code> has been set to a method
       that requires a password (that is, <code class="literal">luks1</code> or
       <code class="literal">pervasive_luks2</code>).
      </p><div class="verbatim-wrap"><pre class="screen">&lt;crypt_key&gt;xxxxxxxx&lt;/crypt_key&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.5"><span class="term">mount</span></dt><dd><p>
       You should have at least a root partition (/) and a swap partition.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;mount&gt;/&lt;/mount&gt;&lt;mount&gt;swap&lt;/mount&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.6"><span class="term">fstopt</span></dt><dd><p>
       Mount options for this partition; see <code class="command">man mount</code> for
       available mount options.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;fstopt&gt;ro,noatime,user,data=ordered,acl,user_xattr&lt;/fstopt&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.7"><span class="term">label</span></dt><dd><p>
       The label of the partition. Useful when formatting the device
       (especially if the <code class="literal">mountby</code> parameter is set to
       <code class="literal">label</code>) and for identifying a device that already
       exists (see <code class="literal">create</code> above). See <code class="command">man
       e2label</code> for an example.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;label&gt;mydata&lt;/label&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.8"><span class="term">uuid</span></dt><dd><p>
       The uuid of the partition. Only useful for identifying an existing
       device (see <code class="literal">create</code> above). The uuid cannot be
       enforced for new devices. (See <code class="command">man uuidgen</code>.)
      </p><div class="verbatim-wrap"><pre class="screen">&lt;uuid&gt;1b4e28ba-2fa1-11d2-883f-b9a761bde3fb&lt;/uuid&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.9"><span class="term">size</span></dt><dd><p>
       The size of the partition, for example 4G, 4500M, etc. The /boot
       partition and the swap partition can have <code class="literal">auto</code> as
       size. Then AutoYaST calculates a reasonable size. One partition can have the
       value <code class="literal">max</code> to use all remaining space.
      </p><p>
       You can also specify the size in percentage. So 10% will use 10% of the
       size of the hard disk or volume group. You can mix
       <code class="literal">auto</code>, <code class="literal">max</code>,
       <code class="literal">size</code>, and percentage as you like.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;size&gt;10G&lt;/size&gt;</pre></div><p>
       Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, all values (including
       <code class="literal">auto</code> and <code class="literal">max</code>) can be used for
       resizing partitions as well.
      </p></dd><dt id="id-1.7.5.2.10.8.8.4.10"><span class="term">format</span></dt><dd><p>
       Specify if AutoYaST should format the partition. If you set
       <code class="literal">create</code> to <code class="literal">true</code>, then you likely
       want this option set to <code class="literal">true</code> as well.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;format config:type="boolean"&gt;false&lt;/format&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.11"><span class="term">file system</span></dt><dd><p>
       Optional. The default is <code class="literal">btrfs</code> for the root partition
       (<code class="filename">/</code>) and <code class="literal">xfs</code> for data partitions.
       Specify the file system to use on this partition:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         <code class="literal">btrfs</code>
        </p></li><li class="listitem"><p>
         <code class="literal">ext2</code>
        </p></li><li class="listitem"><p>
         <code class="literal">ext3</code>
        </p></li><li class="listitem"><p>
         <code class="literal">ext4</code>
        </p></li><li class="listitem"><p>
         <code class="literal">fat</code>
        </p></li><li class="listitem"><p>
         <code class="literal">xfs</code>
        </p></li><li class="listitem"><p>
         <code class="literal">swap</code>
        </p><div class="verbatim-wrap"><pre class="screen">&lt;filesystem config:type="symbol"&gt;ext3&lt;/filesystem&gt;</pre></div></li></ul></div></dd><dt id="id-1.7.5.2.10.8.8.4.12"><span class="term">mkfs_options</span></dt><dd><p>
       Optional, specify an option string for the <code class="command">mkfs</code>. Only
       use this when you know what you are doing. (See the relevant mkfs man
       page for the file system you want to use.)
      </p><div class="verbatim-wrap"><pre class="screen">&lt;mkfs_options&gt;-I 128&lt;/mkfs_options&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.13"><span class="term">partition_nr</span></dt><dd><p>
       The number of this partition. If you have set
       <code class="literal">create=false</code> or if you use LVM, then you can specify
       the partition via <code class="literal">partition_nr</code>.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;partition_nr config:type="integer"&gt;2&lt;/partition_nr&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.14"><span class="term">partition_id</span></dt><dd><p>
       The <code class="literal">partition_id</code> sets the id of the partition. If you
       want different identifiers than 131 for Linux partition or 130 for swap,
       configure them with <code class="literal">partition_id.</code> The default is
       <code class="literal">131</code> for a Linux partition and <code class="literal">130</code>
       for swap.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;</pre></div><table style="border: 0; " class="simplelist"><tr><td>FAT16 (MS-DOS): <code class="literal">6</code></td></tr><tr><td>NTFS (MS-DOS): <code class="literal">7</code></td></tr><tr><td>FAT32 (MS-DOS): <code class="literal">12</code></td></tr><tr><td>Extended FAT16 (MS-DOS): <code class="literal">15</code></td></tr><tr><td>DIAG, Diagnostics and firmware (MS-DOS, GPT): <code class="literal">18</code></td></tr><tr><td>PPC PReP Boot partition (MS-DOS, GPT): <code class="literal">65</code></td></tr><tr><td>Swap (MS-DOS, GPT, DASD, implicit): <code class="literal">130</code></td></tr><tr><td>Linux (MS-DOS, GPT, DASD): <code class="literal">131</code></td></tr><tr><td>Intel Rapid Start Technology (MS-DOS, GPT): <code class="literal">132</code></td></tr><tr><td>LVM (MS-DOS, GPT, DASD): <code class="literal">142</code></td></tr><tr><td>EFI System Partition (MS-DOS, GPT): <code class="literal">239</code></td></tr><tr><td>MD RAID (MS-DOS, GPT, DASD): <code class="literal">253</code></td></tr><tr><td>BIOS boot (GPT): <code class="literal">257</code></td></tr><tr><td>Windows basic data (GPT): <code class="literal">258</code></td></tr><tr><td>EFI (GPT): <code class="literal">259</code></td></tr><tr><td>Microsoft reserved (GPT): <code class="literal">261</code></td></tr></table></dd><dt id="id-1.7.5.2.10.8.8.4.15"><span class="term">partition_type</span></dt><dd><p>
       Optional. Allowed value is <code class="literal">primary</code>. When using an <code class="literal">msdos</code>
       partition table, this element sets the type of the partition to <code class="literal">primary</code>. This
       value is ignored when using a <code class="literal">gpt</code> partition table,
       because such a distinction does not exist in that case.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;partition_type&gt;primary&lt;/partition_type&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.16"><span class="term">mountby</span></dt><dd><p>
       Instead of a partition number, you can tell AutoYaST to mount a partition by
       <code class="literal">device</code>, <code class="literal">label</code>,
       <code class="literal">uuid</code>, <code class="literal">path</code> or
       <code class="literal">id</code>, which are the udev path and udev id (see
       <code class="filename">/dev/disk/...</code>).
      </p><p>
       See <code class="literal">label</code> and <code class="literal">uuid</code> documentation
       above. The default depends on YaST and usually is
       <code class="literal">id</code>.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;mountby config:type="symbol"&gt;label&lt;/mountby&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.17"><span class="term">subvolumes</span></dt><dd><p>
       List of subvolumes to create for a file system of type Btrfs. This key
       only makes sense for file systems of type Btrfs. (See
       <a class="xref" href="#ay-btrfs-subvolumes" title="4.5.3.3. Btrfs subvolumes">Section 4.5.3.3, “Btrfs subvolumes”</a> for more information.)
      </p><p>
       If no <code class="sgmltag-element">subvolumes</code> section has been defined for a partition
       description, AutoYaST will create a predefined set of subvolumes for the
       given mount point.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;subvolumes config:type="list"&gt;
  &lt;path&gt;tmp&lt;/path&gt;
  &lt;path&gt;opt&lt;/path&gt;
  &lt;path&gt;srv&lt;/path&gt;
  &lt;path&gt;var&lt;/path&gt;
  ...
&lt;/subvolumes&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.18"><span class="term">create_subvolumes</span></dt><dd><p>
       Determine whether Btrfs subvolumes should be created or not. It is set
       to <code class="literal">true</code> by default. When set to
       <code class="literal">false</code>, no subvolumes will be created.
      </p></dd><dt id="id-1.7.5.2.10.8.8.4.19"><span class="term">subvolumes_prefix</span></dt><dd><p>
       Set the Btrfs subvolumes prefix name. If no prefix is wanted, it must be
       set to an empty value:
      </p><div class="verbatim-wrap"><pre class="screen">&lt;subvolumes_prefix&gt;&lt;![CDATA[]]&gt;&lt;/subvolumes_prefix&gt;</pre></div><p>
       It is set to <code class="literal">@</code> by default.
      </p></dd><dt id="id-1.7.5.2.10.8.8.4.20"><span class="term">lv_name</span></dt><dd><p>
       If this partition is on a logical volume in a volume group, specify the
       logical volume name here (see the <code class="literal">type</code> parameter in
       the drive configuration).
      </p><div class="verbatim-wrap"><pre class="screen">&lt;lv_name&gt;opt_lv&lt;/lv_name&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.21"><span class="term">stripes</span></dt><dd><p>
       An integer that configures LVM striping. Specify across how many devices
       you want to stripe (spread data).
      </p><div class="verbatim-wrap"><pre class="screen">&lt;stripes config:type="integer"&gt;2&lt;/stripes&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.22"><span class="term">stripesize</span></dt><dd><p>
       Specify the size of each block in KB.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;stripesize config:type="integer"&gt;4&lt;/stripesize&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.23"><span class="term">lvm_group</span></dt><dd><p>
       If this is a physical partition used by (part of) a volume group (LVM),
       you need to specify the name of the volume group here.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;lvm_group&gt;system&lt;/lvm_group&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.24"><span class="term">pool</span></dt><dd><p>
       <code class="literal">pool</code> must be set to <code class="literal">true</code> if the
       LVM logical volume should be an LVM thin pool.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;pool config:type="boolean"&gt;true&lt;/pool&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.25"><span class="term">used_pool</span></dt><dd><p>
       The name of the LVM thin pool that is used as a data store for this thin
       logical volume. If this is set to something non-empty, it implies that
       the volume is a so-called thin logical volume.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;used_pool&gt;my_thin_pool&lt;/used_pool&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.26"><span class="term">raid_name</span></dt><dd><p>
       If this physical volume is part of a RAID array, specify the name of the
       RAID array.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;raid_name&gt;/dev/md/0&lt;/raid_name&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.27"><span class="term">raid_options</span></dt><dd><p>
       Specify RAID options. Setting the RAID options at the
       <code class="literal">partition</code> level is deprecated. See
       <a class="xref" href="#ay-partition-sw-raid" title="4.5.6. Software RAID">Section 4.5.6, “Software RAID”</a>.
      </p></dd><dt id="id-1.7.5.2.10.8.8.4.28"><span class="term">bcache_backing_for</span></dt><dd><p>
       If this device is used as a <span class="emphasis"><em><code class="systemitem">bcache</code> backing
       device</em></span>, specify the name of the <code class="systemitem">bcache</code> device. See
       <a class="xref" href="#ay-partition-bcache" title="4.5.8. bcache configuration">Section 4.5.8, “<code class="systemitem">bcache</code> configuration”</a> for further details.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;bcache_backing_for&gt;/dev/bcache0&lt;/bcache_backing_for&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.29"><span class="term">bcache_caching_for</span></dt><dd><p>
       If this device is used as a <span class="emphasis"><em><code class="systemitem">bcache</code> caching
       device</em></span>, specify the names of the <code class="systemitem">bcache</code> devices. See
       <a class="xref" href="#ay-partition-bcache" title="4.5.8. bcache configuration">Section 4.5.8, “<code class="systemitem">bcache</code> configuration”</a> for further details.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;bcache_caching_for config:type="list"&gt;&lt;listentry&gt;/dev/bcache0&lt;/listentry&gt;&lt;/bcache_caching_for&gt;</pre></div></dd><dt id="id-1.7.5.2.10.8.8.4.30"><span class="term">resize</span></dt><dd><p>
       Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15 resizing works with physical disk
       partitions and with LVM volumes
      </p><div class="verbatim-wrap"><pre class="screen">&lt;resize config:type="boolean"&gt;false&lt;/resize&gt;</pre></div></dd></dl></div></section><section class="sect3" id="ay-btrfs-subvolumes" data-id-title="Btrfs subvolumes"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.3.3 </span><span class="title-name">Btrfs subvolumes</span></span> <a title="Permalink" class="permalink" href="#ay-btrfs-subvolumes">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    As mentioned in <a class="xref" href="#ay-partition-configuration" title="4.5.3.2. Partition configuration">Section 4.5.3.2, “Partition configuration”</a>, it is
    possible to define a set of subvolumes for each Btrfs file system. In its
    simplest form, they are specified using a list of paths:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;subvolumes config:type="list"&gt;
  &lt;path&gt;usr/local&lt;/path&gt;
  &lt;path&gt;tmp&lt;/path&gt;
  &lt;path&gt;opt&lt;/path&gt;
  &lt;path&gt;srv&lt;/path&gt;
  &lt;path&gt;var&lt;/path&gt;
&lt;/subvolumes&gt;</pre></div><p>
    However, it is possible to specify additional settings for each subvolume.
    For example, we might want to set a quota or to disable the copy-on-write
    mechanism. For that purpose, it is possible to expand any of the elements
    of the list as shown in the example below:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;subvolumes config:type="list"&gt;
  &lt;listentry&gt;usr/local&lt;/listentry&gt;
  &lt;listentry&gt;
    &lt;path&gt;tmp&lt;/path&gt;
    &lt;referenced_limit&gt;1 GiB&lt;/referenced_limit&gt;
  &lt;/listentry&gt;
  &lt;listentry&gt;opt&lt;/listentry&gt;
  &lt;listentry&gt;srv&lt;/listentry&gt;
  &lt;listentry&gt;
    &lt;path&gt;var/lib/pgsql&lt;/path&gt;
    &lt;copy_on_write config:type="boolean"&gt;false&lt;/copy_on_write&gt;
  &lt;/listentry&gt;
&lt;/subvolumes&gt;</pre></div><div class="variablelist" id="foofoo"><dl class="variablelist"><dt id="id-1.7.5.2.10.8.9.7.1"><span class="term"><code class="literal">path</code></span></dt><dd><p>
       Mount point for the subvolume.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;path&gt;tmp&lt;/tmp&gt;</pre></div><p>
       Required. AutoYaST will ignore the subvolume if the <code class="literal">path</code>
       is not specified.
      </p></dd><dt id="id-1.7.5.2.10.8.9.7.2"><span class="term"><code class="literal">copy-on-write</code></span></dt><dd><p>
       Whether copy-on-write should be enabled for the subvolume.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;copy-on-write config:type="boolean"&gt;false&lt;/copy-on-write&gt;</pre></div><p>
       Optional. The default value is <code class="literal">false</code>.
      </p></dd><dt id="id-1.7.5.2.10.8.9.7.3"><span class="term"><code class="literal">referenced_limit</code></span></dt><dd><p>
       Set a quota for the subvolume.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;referenced_limit&gt;1 GiB&lt;/referenced_limit&gt;</pre></div><p>
       Optional. The default value is <code class="literal">unlimited</code>. Btrfs
       supports two kinds of limits: <code class="literal">referenced</code> and
       <code class="literal">exclusive</code>. At this point, only the former is
       supported.
      </p></dd></dl></div><p>
    If there is a default subvolume used for the distribution (for example
    <code class="filename">@</code> in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>), the name of this default
    subvolume is automatically prefixed to the names of the defined subvolumes.
    This behavior can be disabled by setting the
    <code class="literal">subvolumes_prefix</code> in the
    <a class="xref" href="#CreateProfile-Partitioning-config" title="4.5.3.1. Drive configuration">Section 4.5.3.1, “Drive configuration”</a> section.
   </p><div class="verbatim-wrap"><pre class="screen">&lt;subvolumes_prefix&gt;&lt;![CDATA[]]&gt;&lt;/subvolumes_prefix&gt;</pre></div></section><section class="sect3" id="ay-use-whole-disk" data-id-title="Using the whole disk"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.3.4 </span><span class="title-name">Using the whole disk</span></span> <a title="Permalink" class="permalink" href="#ay-use-whole-disk">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    AutoYaST allows to use a whole disk without creating any partition by setting
    the <code class="literal">disklabel</code> to <code class="literal">none</code> as described in
    <a class="xref" href="#CreateProfile-Partitioning-config" title="4.5.3.1. Drive configuration">Section 4.5.3.1, “Drive configuration”</a>. In such cases, the
    configuration in the first <code class="literal">partition</code> from the
    <code class="literal">drive</code> will be applied to the whole disk.
   </p><p>
    In the example below, we are using the second disk
    (<code class="literal">/dev/sdb</code>) as the <code class="literal">/home</code> file system.
   </p><div class="example" id="id-1.7.5.2.10.8.10.4" data-id-title="Using a whole disk as a file system"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.5: </span><span class="title-name">Using a whole disk as a file system </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.8.10.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;create config:type="boolean"&gt;true&lt;/create&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;disklabel&gt;none&lt;/disklabel&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;/home&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;</pre></div></div></div><p>
    In addition, the whole disk can be used as an LVM physical volume or as a
    software RAID member. See <a class="xref" href="#ay-partition-lvm" title="4.5.5. Logical volume manager (LVM)">Section 4.5.5, “Logical volume manager (LVM)”</a> and
    <a class="xref" href="#ay-partition-sw-raid" title="4.5.6. Software RAID">Section 4.5.6, “Software RAID”</a> for further details about setting up
    an LVM or a software RAID.
   </p><p>
    For backward compatibility reasons, it is possible to achieve the same
    result by setting the <code class="literal">&lt;partition_nr&gt;</code> element to
    <code class="literal">0</code>. However, this usage of the
    <code class="literal">&lt;partition_nr&gt;</code> element is deprecated from
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15.
   </p></section><section class="sect3" id="ay-auto-partitioning" data-id-title="Filling the gaps"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.3.5 </span><span class="title-name">Filling the gaps</span></span> <a title="Permalink" class="permalink" href="#ay-auto-partitioning">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When using the <span class="guimenu">Expert Partitioner</span> approach, AutoYaST can
    create a partition plan from a rather incomplete profile. The following
    profiles show how you can describe some details of the partitioning layout
    and let AutoYaST do the rest.
   </p><div class="complex-example"><div class="example" id="id-1.7.5.2.10.8.11.3" data-id-title="Automated partitioning on selected drives"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.6: </span><span class="title-name">Automated partitioning on selected drives </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.8.11.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><p>
     The following is an example of a single drive system, which is not
     pre-partitioned and should be automatically partitioned according to the
     described pre-defined partition plan. If you do not specify the device, it
     will be automatically detected.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div></div><p>
    A more detailed example shows how existing partitions and multiple drives
    are handled.
   </p><div class="example" id="id-1.7.5.2.10.8.11.5" data-id-title="Installing on multiple drives"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.7: </span><span class="title-name">Installing on multiple drives </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.8.11.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;size&gt;10G&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
        &lt;size&gt;1G&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;use&gt;free&lt;/use&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
        &lt;mount&gt;/data1&lt;/mount&gt;
        &lt;size&gt;15G&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;xfs&lt;/filesystem&gt;
        &lt;mount&gt;/data2&lt;/mount&gt;
        &lt;size&gt;auto&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div></section></section><section class="sect2" id="ay-partition-advanced" data-id-title="Advanced partitioning features"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.4 </span><span class="title-name">Advanced partitioning features</span></span> <a title="Permalink" class="permalink" href="#ay-partition-advanced">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   
  </p><section class="sect3" id="ay-partition-advanced-wipe" data-id-title="Wipe out partition table"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.4.1 </span><span class="title-name">Wipe out partition table</span></span> <a title="Permalink" class="permalink" href="#ay-partition-advanced-wipe">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Usually this is not needed because AutoYaST can delete partitions one by one
    automatically. But you need the option to let AutoYaST clear the partition
    table instead of deleting partitions individually.
   </p><p>
    Go to the <code class="literal">drive</code> section and add:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;initialize config:type="boolean"&gt;true&lt;/initialize&gt;</pre></div><p>
    With this setting AutoYaST will delete the partition table before it starts to
    analyze the actual partitioning and calculates its partition plan. Of
    course this means, that you cannot keep any of your existing partitions.
   </p></section><section class="sect3" id="ay-partition-advanced-mount" data-id-title="Mount options"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.4.2 </span><span class="title-name">Mount options</span></span> <a title="Permalink" class="permalink" href="#ay-partition-advanced-mount">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    By default a file system to be mounted is identified in
    <code class="filename">/etc/fstab</code> by the device name. This identification can
    be changed so the file system is found by searching for a UUID or a volume
    label. Note that not all file systems can be mounted by UUID or a volume
    label. To specify how a partition is to be mounted, use the
    <code class="literal">mountby</code> property which has the <code class="literal">symbol</code>
    type. Possible options are:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <code class="literal">device</code> (default)
     </p></li><li class="listitem"><p>
      <code class="literal">label</code>
     </p></li><li class="listitem"><p>
      <code class="literal">UUID</code>
     </p></li></ul></div><p>
    If you choose to mount a new partition using a label, use the
    <code class="literal">label</code> property to specify its value.
   </p><p>
    Add any valid mount option in the fourth field of
    <code class="filename">/etc/fstab</code>. Multiple options are separated by commas.
    Possible fstab options:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.10.9.4.6.1"><span class="term">Mount read-only (<code class="literal">ro</code>)</span></dt><dd><p>
       No write access to the file system. Default is <code class="literal">false</code>.
      </p></dd><dt id="id-1.7.5.2.10.9.4.6.2"><span class="term">No access time (<code class="literal">noatime</code>)</span></dt><dd><p>
       Access times are not updated when a file is read. Default is
       <code class="literal">false</code>.
      </p></dd><dt id="id-1.7.5.2.10.9.4.6.3"><span class="term">Mountable by user (<code class="literal">user</code>)</span></dt><dd><p>
       The file system can be mounted by a normal user. Default is
       <code class="literal">false</code>.
      </p></dd><dt id="id-1.7.5.2.10.9.4.6.4"><span class="term">Data Journaling Mode (<code class="literal">ordered</code>, <code class="literal">journal</code>, <code class="literal">writeback</code>)</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.10.9.4.6.4.2.1.1"><span class="term"><code class="literal">journal</code></span></dt><dd><p>
          All data is committed to the journal prior to being written to the
          main file system.
         </p></dd><dt id="id-1.7.5.2.10.9.4.6.4.2.1.2"><span class="term"><code class="literal">ordered</code></span></dt><dd><p>
          All data is directly written to the main file system before its
          metadata is committed to the journal.
         </p></dd><dt id="id-1.7.5.2.10.9.4.6.4.2.1.3"><span class="term"><code class="literal">writeback</code></span></dt><dd><p>
          Data ordering is not preserved.
         </p></dd></dl></div></dd><dt id="id-1.7.5.2.10.9.4.6.5"><span class="term">Access control list (<code class="literal">acl</code>)</span></dt><dd><p>
       Enable access control lists on the file system.
      </p></dd><dt id="id-1.7.5.2.10.9.4.6.6"><span class="term">Extended user attributes (<code class="literal">user_xattr</code>)</span></dt><dd><p>
       Allow extended user attributes on the file system.
      </p></dd></dl></div><div class="example" id="id-1.7.5.2.10.9.4.7" data-id-title="Mount options"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.8: </span><span class="title-name">Mount options </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.9.4.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitions config:type="list"&gt;
  &lt;partition&gt;
    &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
    &lt;format config:type="boolean"&gt;true&lt;/format&gt;
    &lt;fstopt&gt;ro,noatime,user,data=ordered,acl,user_xattr&lt;/fstopt&gt;
    &lt;mount&gt;/local&lt;/mount&gt;
    &lt;mountby config:type="symbol"&gt;uuid&lt;/mountby&gt;
    &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
    &lt;size&gt;10G&lt;/size&gt;
  &lt;/partition&gt;
&lt;/partitions&gt;</pre></div></div></div><div id="id-1.7.5.2.10.9.4.8" data-id-title="Check supported file system options" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Check supported file system options</div><p>
     Different file system types support different options. Check the
     documentation carefully before setting them.
    </p></div></section><section class="sect3" id="ay-partition-advanced-keep" data-id-title="Keeping specific partitions"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.4.3 </span><span class="title-name">Keeping specific partitions</span></span> <a title="Permalink" class="permalink" href="#ay-partition-advanced-keep">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In some cases you should leave partitions untouched and only format
    specific target partitions, rather than creating them from scratch. For
    example, if different Linux installations coexist, or you have another
    operating system installed, likely you do not want to wipe these out. You
    may also want to leave data partitions untouched.
   </p><p>
    Such scenarios require specific knowledge about the target systems and hard
    disks. Depending on the scenario, you might need to know the exact
    partition table of the target hard disk with partition IDs, sizes and
    numbers. With this data, you can tell AutoYaST to keep certain partitions,
    format others and create new partitions if needed.
   </p><p>
    The following example will keep partitions 1, 2 and 5 and delete partition
    6 to create two new partitions. All remaining partitions will only be
    formatted.
    
   </p><div class="example" id="id-1.7.5.2.10.9.5.5" data-id-title="Keeping partitions"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.9: </span><span class="title-name">Keeping partitions </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.9.5.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdc&lt;/device&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;create config:type="boolean"&gt;false&lt;/create&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;mount&gt;/&lt;/mount&gt;
          &lt;partition_nr config:type="integer"&gt;1&lt;/partition_nr&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;create config:type="boolean"&gt;false&lt;/create&gt;
          &lt;format config:type="boolean"&gt;false&lt;/format&gt;
          &lt;partition_nr config:type="integer"&gt;2&lt;/partition_nr&gt;
          &lt;mount&gt;/space&lt;/mount&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;create config:type="boolean"&gt;false&lt;/create&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
          &lt;partition_nr config:type="integer"&gt;5&lt;/partition_nr&gt;
          &lt;mount&gt;swap&lt;/mount&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;mount&gt;/space2&lt;/mount&gt;
          &lt;size&gt;5G&lt;/size&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;mount&gt;/space3&lt;/mount&gt;
          &lt;size&gt;max&lt;/size&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
    &lt;use&gt;6&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div><p>
    The last example requires exact knowledge of the existing partition table
    and the partition numbers of those partitions that should be kept. In some
    cases however, such data may not be available, especially in a mixed
    hardware environment with different hard disk types and configurations. The
    following scenario is for a system with a non-Linux OS with a designated
    area for a Linux installation.
   </p><div class="figure" id="partitioning-keep1"><div class="figure-contents"><div class="mediaobject"><a href="images/partitioning-keep1.png"><img src="images/partitioning-keep1.png" alt="Keeping partitions" title="Keeping partitions"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 4.1: </span><span class="title-name">Keeping partitions </span></span><a title="Permalink" class="permalink" href="#partitioning-keep1">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div><p>
    In this scenario, shown in figure <a class="xref" href="#partitioning-keep1" title="Keeping partitions">Figure 4.1, “Keeping partitions”</a>,
    AutoYaST will not create new partitions. Instead it searches for certain
    partition types on the system and uses them according to the partitioning
    plan in the control file. No partition numbers are given in this case, only
    the mount points and the partition types (additional configuration data can
    be provided, for example file system options, encryption and file system
    type).
   </p><div class="example" id="id-1.7.5.2.10.9.5.9" data-id-title="Auto-detection of partitions to be kept."><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.10: </span><span class="title-name">Auto-detection of partitions to be kept. </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.9.5.9">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;create config:type="boolean"&gt;false&lt;/create&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;create config:type="boolean"&gt;false&lt;/create&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
        &lt;partition_id config:type="integer"&gt;130&lt;/partition_id&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div><div id="id-1.7.5.2.10.9.5.10" data-id-title="Keeping encrypted devices" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Keeping encrypted devices</div><p>
     When AutoYaST is probing the storage devices, the partitioning section from
     the profile is not yet analyzed. In some scenarios, it is not clear which
     key should be used to unlock a device. For example, this can happen when
     more than one encryption key is defined. To solve this problem, AutoYaST will
     try all defined keys on all encrypted devices until a working key is
     found.
    </p></div></section></section><section class="sect2" id="ay-partition-lvm" data-id-title="Logical volume manager (LVM)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.5 </span><span class="title-name">Logical volume manager (LVM)</span></span> <a title="Permalink" class="permalink" href="#ay-partition-lvm">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To configure LVM, first create a physical volume using the normal
   partitioning method described above.
  </p><div class="complex-example"><div class="example" id="id-1.7.5.2.10.10.3" data-id-title="Create LVM physical volume"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.11: </span><span class="title-name">Create LVM physical volume </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.10.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><p>
    The following example shows how to prepare for LVM in the
    <code class="literal">partitioning</code> resource. A non-formatted partition is
    created on device <code class="filename">/dev/sda1</code> of the type
    <code class="literal">LVM</code> and with the volume group <code class="literal">system</code>.
    This partition will use all space available on the drive.
   </p><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;create config:type="boolean"&gt;true&lt;/create&gt;
        &lt;lvm_group&gt;system&lt;/lvm_group&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;partition_id config:type="integer"&gt;142&lt;/partition_id&gt;
        &lt;partition_nr config:type="integer"&gt;1&lt;/partition_nr&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div></div><div class="example" id="id-1.7.5.2.10.10.4" data-id-title="LVM logical volumes"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.12: </span><span class="title-name">LVM logical volumes </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.10.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;lvm_group&gt;system&lt;/lvm_group&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/system&lt;/device&gt;
      &lt;type config:type="symbol"&gt;CT_LVM&lt;/type&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
          &lt;lv_name&gt;user_lv&lt;/lv_name&gt;
          &lt;mount&gt;/usr&lt;/mount&gt;
          &lt;size&gt;15G&lt;/size&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
          &lt;lv_name&gt;opt_lv&lt;/lv_name&gt;
          &lt;mount&gt;/opt&lt;/mount&gt;
          &lt;size&gt;10G&lt;/size&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
          &lt;lv_name&gt;var_lv&lt;/lv_name&gt;
          &lt;mount&gt;/var&lt;/mount&gt;
          &lt;size&gt;1G&lt;/size&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
      &lt;pesize&gt;4M&lt;/pesize&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div><p>
   It is possible to set the <code class="literal">size</code> to <code class="literal">max</code>
   for the logical volumes. Of course, you can only use <code class="literal">max</code>
   for one(!) logical volume. You cannot set two logical volumes in one volume
   group to <code class="literal">max</code>.
  </p></section><section class="sect2" id="ay-partition-sw-raid" data-id-title="Software RAID"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.6 </span><span class="title-name">Software RAID</span></span> <a title="Permalink" class="permalink" href="#ay-partition-sw-raid">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The support for software RAID devices has been greatly improved in
   <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="phrase">15
   SP2</span>.
  </p><p>
   If needed, see <a class="xref" href="#ay-partition-sw-raid-deprecated" title="4.5.6.1. Using the deprecated syntax">Section 4.5.6.1, “Using the deprecated syntax”</a> to find out
   further details about the old way of specifying a software RAID, which is
   still supported for backward compatibility.
  </p><p>
   Using AutoYaST, you can create and assemble software RAID devices. The supported
   RAID levels are the following:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.10.11.5.1"><span class="term">RAID 0</span></dt><dd><p>
      This level increases your disk performance. There is
      <span class="emphasis"><em>no</em></span> redundancy in this mode. If one of the drives
      crashes, data recovery will not be possible.
     </p></dd><dt id="id-1.7.5.2.10.11.5.2"><span class="term">RAID 1</span></dt><dd><p>
      This mode offers the best redundancy. It can be used with two or more
      disks. An exact copy of all data is maintained on all disks. As long as
      at least one disk is still working, no data is lost. The partitions used
      for this type of RAID should have approximately the same size.
     </p></dd><dt id="id-1.7.5.2.10.11.5.3"><span class="term">RAID 5</span></dt><dd><p>
      This mode combines management of a larger number of disks and still
      maintains some redundancy. This mode can be used on three disks or more.
      If one disk fails, all data is still intact. If two disks fail
      simultaneously, all data is lost.
     </p></dd><dt id="id-1.7.5.2.10.11.5.4"><span class="term">Multipath</span></dt><dd><p>
      This mode allows access to the same physical device via multiple
      controllers for redundancy against a fault in a controller card. This
      mode can be used with at least two devices.
     </p></dd></dl></div><p>
   Similar to LVM, a software RAID definition in an AutoYaST profile is composed of
   two different parts:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Determining which disks or partitions are going to be used as RAID
     members. To do that, you need to set the <code class="literal">raid_name</code>
     element in such devices.
    </p></li><li class="listitem"><p>
     Defining the RAID itself by using a dedicated <code class="literal">drive</code>
     section.
    </p></li></ul></div><p>
   The following example shows a RAID10 configuration that uses a partition from
   the first disk and another one from the second disk as RAID members:
  </p><div class="example" id="id-1.7.5.2.10.11.9" data-id-title="RAID10 configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.13: </span><span class="title-name">RAID10 configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.11.9">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;size&gt;20G&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;raid_name&gt;/dev/md/0&lt;/raid_name&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;disklabel&gt;none&lt;/disklabel&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;raid_name&gt;/dev/md/0&lt;/raid_name&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/md/0&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;mount&gt;/home&lt;/mount&gt;
        &lt;size&gt;40G&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;mount&gt;/srv&lt;/mount&gt;
        &lt;size&gt;10G&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;raid_options&gt;
      &lt;chunk_size&gt;4&lt;/chunk_size&gt;
      &lt;parity_algorithm&gt;near_2&lt;/parity_algorithm&gt;
      &lt;raid_type&gt;raid10&lt;/raid_type&gt;
    &lt;/raid_options&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div><p>
   If you do not want to create partitions in the software RAID, set the
   <code class="literal">disklabel</code> to <code class="literal">none</code> as you would do for
   a regular disk. In the example below, only the RAID <code class="literal">drive</code>
   section is shown for simplicity's sake:
  </p><div class="example" id="id-1.7.5.2.10.11.11" data-id-title="RAID10 without partitions"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.14: </span><span class="title-name">RAID10 without partitions </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.11.11">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;drive&gt;
  &lt;device&gt;/dev/md/0&lt;/device&gt;
  &lt;disklabel&gt;none&lt;/disklabel&gt;
  &lt;partitions config:type="list"&gt;
    &lt;partition&gt;
      &lt;mount&gt;/home&lt;/mount&gt;
      &lt;size&gt;40G&lt;/size&gt;
    &lt;/partition&gt;
  &lt;/partitions&gt;
  &lt;raid_options&gt;
    &lt;chunk_size&gt;4&lt;/chunk_size&gt;
    &lt;parity_algorithm&gt;near_2&lt;/parity_algorithm&gt;
    &lt;raid_type&gt;raid10&lt;/raid_type&gt;
  &lt;/raid_options&gt;
  &lt;use&gt;all&lt;/use&gt;
&lt;/drive&gt;</pre></div></div></div><section class="sect3" id="ay-partition-sw-raid-deprecated" data-id-title="Using the deprecated syntax"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.6.1 </span><span class="title-name">Using the deprecated syntax</span></span> <a title="Permalink" class="permalink" href="#ay-partition-sw-raid-deprecated">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If the installer self-update feature is enabled, it is possible to
    partition a software RAID for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15. However, that scenario was
    not supported in previous versions and hence the way to define a software
    RAID was slightly different.
   </p><p>
    This section defines what the old-style configuration looks like because it
    is still supported for backward compatibility.
   </p><p>
    Keep the following in mind when configuring a RAID using this deprecated
    syntax:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      The device for RAID is always <code class="filename">/dev/md</code>.
     </p></li><li class="listitem"><p>
      The property <code class="literal">partition_nr</code> is used to determine the MD
      device number. If <code class="literal">partition_nr</code> is equal to 0, then
      <code class="filename">/dev/md/0</code> is configured. Adding several
      <code class="literal">partition</code> sections means that you want to have
      multiple software RAIDs (<code class="filename">/dev/md/0</code>,
      <code class="filename">/dev/md/1</code>, etc.).
     </p></li><li class="listitem"><p>
      All RAID-specific options are contained in the
      <code class="literal">raid_options</code> resource.
     </p></li></ul></div><div class="example" id="id-1.7.5.2.10.11.12.6" data-id-title="Old style RAID10 configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.15: </span><span class="title-name">Old style RAID10 configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.11.12.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;partition_id config:type="integer"&gt;253&lt;/partition_id&gt;
        &lt;format config:type="boolean"&gt;false&lt;/format&gt;
        &lt;raid_name&gt;/dev/md0&lt;/raid_name&gt;
        &lt;raid_type&gt;raid1&lt;/raid_type&gt;
        &lt;size&gt;4G&lt;/size&gt;
      &lt;/partition&gt;

        &lt;!-- Insert a configuration for the regular partitions located on
                /dev/sda here (for example / and swap) --&gt;

    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;format config:type="boolean"&gt;false&lt;/format&gt;
        &lt;partition_id config:type="integer"&gt;253&lt;/partition_id&gt;
        &lt;raid_name&gt;/dev/md0&lt;/raid_name&gt;
        &lt;size&gt;4gb&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/md&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;/space&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
        &lt;partition_nr config:type="integer"&gt;0&lt;/partition_nr&gt;
        &lt;raid_options&gt;
          &lt;chunk_size&gt;4&lt;/chunk_size&gt;
           &lt;parity_algorithm&gt;near_2&lt;/parity_algorithm&gt;
          &lt;raid_type&gt;raid10&lt;/raid_type&gt;
        &lt;/raid_options&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div></section><section class="sect3" id="ay-raid-configuration" data-id-title="RAID options"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.6.2 </span><span class="title-name">RAID options</span></span> <a title="Permalink" class="permalink" href="#ay-raid-configuration">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The following elements must be placed within the following XML structure:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;partition&gt;
     &lt;raid_options&gt;
     ...
     &lt;/raid_options&gt;
     &lt;/partition&gt;</pre></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.10.11.13.4.1"><span class="term">chunk_size</span></dt><dd><p>
       Can be expressed as a number with the corresponding units (for example, 
       &lt;hunk_size&gt;32M&lt;/chunk_size&gt;) or just as a number. If the unit is omitted, kilobytes 
       are used as the default unit. Do not specify <code class="literal">chunk_size</code> for 
       RAID1. Bear in mind that <code class="literal">raid1</code> is the default type.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;chunk_size&gt;4&lt;/chunk_size&gt;</pre></div></dd><dt id="id-1.7.5.2.10.11.13.4.2"><span class="term">parity_algorithm</span></dt><dd><p>
       Possible values are:
      </p><p>
       <code class="literal">left_asymmetric</code>, <code class="literal">left_symmetric</code>,
       <code class="literal">right_asymmetric</code>, <code class="literal">right_symmetric</code>,
       <code class="literal">first</code>, <code class="literal">last</code>, <code class="literal">first_6</code>,
       <code class="literal">left_asymmetric_6</code>,
       <code class="literal">left_symmetric_6</code>,
       <code class="literal">right_asymmetric_6</code>,
       <code class="literal">right_symmetric_6</code>,
       <code class="literal">near_2</code>, <code class="literal">offset_2</code>, <code class="literal">far_2</code>,
       <code class="literal">near_3</code>, <code class="literal">offset_3</code>, or <code class="literal">far_3</code>.
      </p><p>
       For RAID6 and RAID10, the following values can be used:
      </p><p>
       <code class="literal">parity_first</code>, <code class="literal">parity_last</code>,
       <code class="literal">left_asymmetric_6</code>,
       <code class="literal">left_symmetric_6</code>,
       <code class="literal">right_asymmetric_6</code>,
       <code class="literal">right_symmetric_6</code>, <code class="literal">parity_first_6</code>,
       <code class="literal">n2</code>, <code class="literal">o2</code>, <code class="literal">f2</code>,
       <code class="literal">n3</code>, <code class="literal">o3</code>, or <code class="literal">f3</code>.
      </p><p>
       The accepted values for each RAID depend on the RAID level (eg. <code class="literal">raid5</code>)
       and the number of devices in the RAID. Given that RAID0 or RAID1 do not provide 
       any parity, do not specify this option for such devices.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;parity_algorithm&gt;left_asymmetric&lt;/parity_algorithm&gt;</pre></div></dd><dt id="id-1.7.5.2.10.11.13.4.3"><span class="term">raid_type</span></dt><dd><p>
       Possible values are: <code class="literal">raid0</code>, <code class="literal">raid1</code>,
       <code class="literal">raid5</code>, <code class="literal">raid6</code> and
       <code class="literal">raid10</code>.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;raid_type&gt;raid1&lt;/raid_type&gt;</pre></div><p>
       The default is <code class="literal">raid1</code>.
      </p></dd><dt id="id-1.7.5.2.10.11.13.4.4"><span class="term">device_order</span></dt><dd><p>
       This list contains the order of the physical devices:
      </p><div class="verbatim-wrap"><pre class="screen">&lt;device_order config:type="list"&gt;&lt;device&gt;/dev/sdb2&lt;/device&gt;&lt;device&gt;/dev/sda1&lt;/device&gt;...&lt;/device_order&gt;</pre></div><p>
       This is optional, and the default is alphabetical order.
      </p></dd></dl></div></section></section><section class="sect2" id="ay-partition-multipath" data-id-title="Multipath support"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.7 </span><span class="title-name">Multipath support</span></span> <a title="Permalink" class="permalink" href="#ay-partition-multipath">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   AutoYaST can handle multipath devices. To take advantage of them, you need to
   enable multipath support, as shown in
   <a class="xref" href="#multipath-example" title="Using multipath devices">Example 4.16, “Using multipath devices”</a>. Alternatively, you can use the
   following parameter on the Kernel command line:
   <code class="literal">LIBSTORAGE_MULTIPATH_AUTOSTART=ON</code>.
  </p><p>
   Unlike SUSE Linux Enterprise 12, it is not required to set the drive section type to
   <code class="literal">CT_DMMULTIPATH</code>. You should use
   <code class="literal">CT_DISK</code>, although for historical reasons, both values are
   equivalent.
  </p><div class="example" id="multipath-example" data-id-title="Using multipath devices"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.16: </span><span class="title-name">Using multipath devices </span></span><a title="Permalink" class="permalink" href="#multipath-example">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;storage&gt;
    &lt;start_multipath config:type="boolean"&gt;true&lt;/start_multipath&gt;
  &lt;/storage&gt;
&lt;/general&gt;
&lt;partitioning&gt;
  &lt;drive&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;size&gt;20G&lt;/size&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;size&gt;auto&lt;/size&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;type config:type="symbol"&gt;CT_DISK&lt;/type&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div><p>
   If you want to specify the device, you could use the World Wide
   Identifier (WWID), its device name (for example,
   <code class="literal">/dev/dm-0</code>), any other path under
   <code class="literal">/dev/disk</code> that refers to the multipath
   device, or any of its paths.
  </p><p>
   For example, given the <code class="literal">multipath</code> listing from
   <a class="xref" href="#multipath-ll-output" title="Listing multipath devices">Example 4.17, “Listing multipath devices”</a>, you could use
   <code class="literal">/dev/mapper/14945540000000000f86756dce9286158be4c6e3567e75ba5</code>,
   <code class="literal">/dev/dm-3</code>, any other corresponding path under
   <code class="literal">/dev/disk</code> (as shown in
   <a class="xref" href="#multipath-wwid-example" title="Using the WWID to identify a multipath device">Example 4.18, “Using the WWID to identify a multipath device”</a>), or any of its paths
   (<code class="literal">/dev/sda</code> or <code class="literal">/dev/sdb</code>).
  </p><div class="example" id="multipath-ll-output" data-id-title="Listing multipath devices"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.17: </span><span class="title-name">Listing multipath devices </span></span><a title="Permalink" class="permalink" href="#multipath-ll-output">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># multipath -l
14945540000000000f86756dce9286158be4c6e3567e75ba5 dm-3 ATA,VIRTUAL-DISK
size=40G features='0' hwhandler='0' wp=rw
|-+- policy='service-time 0' prio=1 status=active
| `- 2:0:0:0 sda 8:0  active ready running
`-+- policy='service-time 0' prio=1 status=enabled
  `- 3:0:0:0 sdb 8:16 active ready running</pre></div></div></div><div class="example" id="multipath-wwid-example" data-id-title="Using the WWID to identify a multipath device"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.18: </span><span class="title-name">Using the WWID to identify a multipath device </span></span><a title="Permalink" class="permalink" href="#multipath-wwid-example">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;drive&gt;
  &lt;partitions config:type="list"&gt;
    &lt;device&gt;/dev/mapper/14945540000000000f86756dce9286158be4c6e3567e75ba5&lt;/device&gt;
    &lt;partition&gt;
      &lt;size&gt;20G&lt;/size&gt;
      &lt;mount&gt;/&lt;/mount&gt;
      &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
    &lt;/partition&gt;
  &lt;/partitions&gt;
  &lt;type config:type="symbol"&gt;CT_DISK&lt;/type&gt;
  &lt;use&gt;all&lt;/use&gt;
&lt;/drive&gt;</pre></div></div></div></section><section class="sect2" id="ay-partition-bcache" data-id-title="bcache configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.8 </span><span class="title-name"><code class="systemitem">bcache</code> configuration</span></span> <a title="Permalink" class="permalink" href="#ay-partition-bcache">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <code class="systemitem">bcache</code> is a caching system which allows the use of multiple fast drives to
   speed up the access to one or more slower drives. For example, you can
   improve the performance of a large (but slow) drive by using a fast one as a
   cache.
  </p><p>
   For more information about bcache on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, also see the blog post
   at
   <a class="link" href="https://www.suse.com/c/combine-the-performance-of-solid-state-drive-with-the-capacity-of-a-hard-drive-with-bcache-and-yast/" target="_blank">https://www.suse.com/c/combine-the-performance-of-solid-state-drive-with-the-capacity-of-a-hard-drive-with-bcache-and-yast/</a>.
  </p><p>
   To set up a <code class="systemitem">bcache</code> device, AutoYaST needs a profile that specifies the
   following:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     To set a (slow) block device as <span class="emphasis"><em>backing device</em></span>, use
     the <code class="literal">bcache_backing_for</code> element.
    </p></li><li class="listitem"><p>
     To set a (fast) block device as <span class="emphasis"><em>caching device</em></span>, use
     the <code class="literal">bcache_caching_for</code> element. You can use the same
     device to speed up the access to several drives.
    </p></li><li class="listitem"><p>
     To specify the layout of the <code class="systemitem">bcache</code> device, use a
     <code class="literal">drive</code> section and set the <code class="literal">type</code>
     element to <code class="literal">CT_BCACHE</code>. The layout of the <code class="systemitem">bcache</code> device
     may contain partitions.
    </p></li></ul></div><div class="example" id="id-1.7.5.2.10.13.6" data-id-title="bcache definition"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.19: </span><span class="title-name"><code class="systemitem">bcache</code> definition </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.13.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;type config:type="symbol"&gt;CT_DISK&lt;/type&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;enable_snapshots config:type="boolean"&gt;true&lt;/enable_snapshots&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;btrfs&lt;/filesystem&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;create config:type="boolean"&gt;true&lt;/create&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
        &lt;create config:type="boolean"&gt;true&lt;/create&gt;
        &lt;size&gt;2GiB&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;

  &lt;drive&gt;
    &lt;type config:type="symbol"&gt;CT_DISK&lt;/type&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;disklabel&gt;msdos&lt;/disklabel&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;!-- It can serve as caching device for several bcaches --&gt;
        &lt;bcache_caching_for config:type="list"&gt;
          &lt;listentry&gt;/dev/bcache0&lt;/listentry&gt;
        &lt;/bcache_caching_for&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;

  &lt;drive&gt;
    &lt;type config:type="symbol"&gt;CT_DISK&lt;/type&gt;
    &lt;device&gt;/dev/sdc&lt;/device&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;disklabel&gt;msdos&lt;/disklabel&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;!-- It can serve as backing device for one bcache --&gt;
        &lt;bcache_backing_for&gt;/dev/bcache0&lt;/bcache_backing_for&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;

  &lt;drive&gt;
    &lt;type config:type="symbol"&gt;CT_BCACHE&lt;/type&gt;
    &lt;device&gt;/dev/bcache0&lt;/device&gt;
    &lt;bcache_options&gt;
      &lt;cache_mode&gt;writethrough&lt;/cache_mode&gt;
    &lt;/bcache_options&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;mount&gt;/data&lt;/mount&gt;
        &lt;size&gt;20GiB&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
        &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
        &lt;size&gt;1GiB&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div><p>
   For the time being, the only supported option in the
   <code class="literal">bcache_options</code> section is <code class="literal">cache_mode</code>,
   described below.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.10.13.8.1"><span class="term">cache_mode</span></dt><dd><p>
      Cache mode for <code class="systemitem">bcache</code>. Possible values are:
     </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        <code class="literal">writethrough</code>
       </p></li><li class="listitem"><p>
        <code class="literal">writeback</code>
       </p></li><li class="listitem"><p>
        <code class="literal">writearound</code>
       </p></li><li class="listitem"><p>
        <code class="literal">none</code>
       </p></li></ul></div><div class="verbatim-wrap"><pre class="screen">&lt;cache_mode&gt;writethrough&lt;/cache_mode&gt;</pre></div></dd></dl></div></section><section class="sect2" id="ay-multidevice-btrfs" data-id-title="Multi-device Btrfs configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.9 </span><span class="title-name">Multi-device Btrfs configuration</span></span> <a title="Permalink" class="permalink" href="#ay-multidevice-btrfs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Btrfs supports creating a single volume that spans more than one storage
   device, offering similar features to software RAID implementations such as
   the Linux kernel's built-in <code class="command">mdraid</code> subsystem.
   <span class="emphasis"><em>Multi-device Btrfs</em></span> offers advantages over some other
   RAID implementations. For example, you can dynamically migrate a
   multi-device Btrfs volume from one RAID level to another, RAID levels can be
   set on a per-file basis, and more. However, not all of these features are
   fully supported yet in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15 SP4.
  </p><p>
   With AutoYaST, a multi-device Btrfs can be configured by specifying a drive with
   the <code class="literal">CT_BTRFS</code> type. The <code class="literal">device</code> property
   is used as an arbitrary name to identify each multi-device Btrfs.
  </p><p>
   As with RAID, you need to create all block devices first (for example,
   partitions, LVM logical volumes, etc.) and assign them to the Btrfs file
   system you want to create over such block devices.
  </p><p>
   The following example shows a simple multi-device Btrfs configuration:
  </p><div class="example" id="id-1.7.5.2.10.14.6" data-id-title="Multi-device Btrfs configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.20: </span><span class="title-name">Multi-device Btrfs configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.14.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;disklabel&gt;none&lt;/disklabel&gt;
    &lt;partitions&gt;
      &lt;partition&gt;
        &lt;btrfs_name&gt;root_fs&lt;/btrfs_name&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;disklabel&gt;gpt&lt;/disklabel&gt;
    &lt;partitions&gt;
      &lt;partition&gt;
        &lt;partition_nr&gt;1&lt;/partition_nr&gt;
        &lt;size&gt;4gb&lt;/size&gt;
        &lt;filesystem&gt;ext4&lt;/filesystem&gt;
        &lt;btrfs_name&gt;root_fs&lt;/btrfs_name&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;root_fs&lt;/device&gt;
    &lt;type config:type="symbol"&gt;CT_BTRFS&lt;/type&gt;
    &lt;partitions&gt;
      &lt;partition config:type="list&gt;
        &lt;mount&gt;/&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;btrfs_options&gt;
      &lt;raid_leve&gt;raid1&lt;/raid_level&gt;
      &lt;metadata_raid_leve&gt;raid1&lt;/metadata_raid_level&gt;
    &lt;/btrfs_options&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div><p>
   The supported data and metadata RAID levels are: <code class="literal">default</code>,
   <code class="literal">single</code>, <code class="literal">dup</code>, <code class="literal">raid0</code>,
   <code class="literal">raid1</code>, and <code class="literal">raid10</code>. By default, file
   system metadata is mirrored across two devices and data is striped across
   all of the devices. If only one device is present, metadata will be
   duplicated on that one device.
  </p><p>
   Keep the following in mind when configuring a multi-device Btrfs file
   system:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Devices need to indicate the <code class="literal">btrfs_name</code> property to be
     included into a multi-device Btrfs file system.
    </p></li><li class="listitem"><p>
     All Btrfs-specific options are contained in the
     <code class="literal">btrfs_options</code> resource of a <code class="literal">CT_BTRFS</code>
     drive.
    </p></li></ul></div></section><section class="sect2" id="ay-partition-nfs" data-id-title="NFS configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.10 </span><span class="title-name">NFS configuration</span></span> <a title="Permalink" class="permalink" href="#ay-partition-nfs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   AutoYaST allows to install <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> onto <span class="emphasis"><em>Network File
   System</em></span> (NFS) shares. To do so, you must create a drive with the
   <code class="literal">CT_NFS</code> type and provide the NFS share name
   (<em class="replaceable">SERVER:PATH</em>) as device name. The information
   relative to the mount point is included as part of its first partition
   section. Note that for an NFS drive, only the first partition is taken into
   account.
  </p><p>
   For more information on how to configure an NFS client and server after the
   system has been installed, refer to <a class="xref" href="#ay-nfs" title="4.20. NFS client and server">Section 4.20, “NFS client and server”</a>.
  </p><div class="example" id="id-1.7.5.2.10.15.4" data-id-title="NFS share definition"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.21: </span><span class="title-name">NFS share definition </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.15.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">        &lt;partitioning config:type="list"&gt;
          &lt;drive&gt;
            &lt;device&gt;192.168.1.1:/exports/root_fs&lt;/device&gt;
            &lt;type config:type="symbol"&gt;CT_NFS&lt;/type&gt;
            &lt;use&gt;all&lt;/use&gt;
            &lt;partitions config:type="list"&gt;
              &lt;partition&gt;
                &lt;mount&gt;/&lt;/mount&gt;
                &lt;fstopt&gt;nolock&lt;/fstopt&gt;
              &lt;/partition&gt;
            &lt;/partitions&gt;
          &lt;/drive&gt;
        &lt;/partitioning&gt;</pre></div></div></div></section><section class="sect2" id="ay-partition-tmpfs" data-id-title="tmpfs configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.11 </span><span class="title-name"><code class="literal">tmpfs</code> configuration</span></span> <a title="Permalink" class="permalink" href="#ay-partition-tmpfs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   AutoYaST supports the definition of <code class="literal">tmpfs</code> virtual file
   systems by setting the <code class="literal">type</code> element to
   <code class="literal">CT_TMPFS</code>. Each <code class="literal">partition</code> section
   represents a <code class="literal">tmpfs</code> file system.
  </p><div class="example" id="id-1.7.5.2.10.16.3" data-id-title="tmpfs definition"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.22: </span><span class="title-name"><code class="literal">tmpfs</code> definition </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.16.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">      &lt;partitioning config:type="list"&gt;
        &lt;drive&gt;
          &lt;type config:type="symbol"&gt;CT_TMPFS&lt;/type&gt;
          &lt;partitions config:type="list"&gt;
            &lt;partition&gt;
              &lt;mount&gt;/srv&lt;/mount&gt;
              &lt;fstopt&gt;size=512M&lt;/fstopt&gt;
            &lt;/partition&gt;
            &lt;partition&gt;
              &lt;mount&gt;/temp&lt;/mount&gt;
            &lt;/partition&gt;
          &lt;/partitions&gt;
        &lt;drive&gt;
      &lt;partitioning&gt;</pre></div></div></div><p>
   <code class="literal">tmpfs</code> devices are different from regular file systems
   like Ext4 or Btrfs. Therefore, the only relevant elements are
   <code class="literal">mount</code>, which is mandatory, and <code class="literal">fstopt</code>.
   The latter is used to set file system attributes like its size limit, mode,
   and so on. You can find additional information about the known options in
   the <code class="literal">tmpfs</code> man page.
  </p></section><section class="sect2" id="ay-partition-s390" data-id-title="IBM Z specific configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5.12 </span><span class="title-name">IBM Z specific configuration</span></span> <a title="Permalink" class="permalink" href="#ay-partition-s390">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect3" id="ay-partition-s390-dasd" data-id-title="Configuring DASD disks"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.12.1 </span><span class="title-name">Configuring DASD disks</span></span> <a title="Permalink" class="permalink" href="#ay-partition-s390-dasd">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The elements listed below must be placed within the following XML
    structure:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;dasd&gt;
 &lt;devices config:type="list"&gt;
  &lt;listentry&gt;
   ...
  &lt;/listentry&gt;
 &lt;/devices&gt;
&lt;/dasd&gt;</pre></div><p>
    tags in the &lt;profile&gt; section. Each disk needs to be configured in a
    separate &lt;listentry&gt; ... &lt;/listentry&gt; section.
   </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">DASD configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.10.17.3.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.10.17.3.5.2"><span class="term">device</span></dt><dd><p>
       <code class="literal">DASD</code> is the only value allowed.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;device&gt;DASD&lt;/dev_name&gt;</pre></div></dd><dt id="id-1.7.5.2.10.17.3.5.3"><span class="term">dev_name</span></dt><dd><p>
       Specify the device (<code class="literal">dasd<em class="replaceable">N</em></code>)
       you want to configure in this section.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;dev_name&gt;/dev/dasda&lt;/dev_name&gt;</pre></div><p>
       Optional but recommended. If left out, AutoYaST tries to guess the device.
      </p></dd><dt id="id-1.7.5.2.10.17.3.5.4"><span class="term">channel</span></dt><dd><p>
       Channel by which the disk is accessed.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;channel&gt;0.0.0150&lt;/channel&gt;</pre></div><p>
       Mandatory.
      </p></dd><dt id="id-1.7.5.2.10.17.3.5.5"><span class="term">diag</span></dt><dd><p>
       Enable or disable the use of <code class="literal">DIAG</code>. Possible values
       are <code class="literal">true</code> (enable) or <code class="literal">false</code>
       (disable).
      </p><div class="verbatim-wrap"><pre class="screen">&lt;diagconfig:type="boolean"&gt;true&lt;/diag&gt;</pre></div><p>
       Optional.
      </p></dd></dl></div></section><section class="sect3" id="ay-partition-s390-zfcp" data-id-title="Configuring zFCP disks"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.5.12.2 </span><span class="title-name">Configuring zFCP disks</span></span> <a title="Permalink" class="permalink" href="#ay-partition-s390-zfcp">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_partitioning.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The following elements must be placed within the following XML structure:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;profile&gt;
  &lt;zfcp&gt;
    &lt;devices config:type="list"&gt;
      &lt;listentry&gt;
        ...
      &lt;/listentry&gt;
    &lt;/devices&gt;
  &lt;/zfcp&gt;
&lt;profile&gt;</pre></div><p>
    Each disk needs to be configured in a separate <code class="literal">listentry</code>
    section.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.10.17.4.5.1"><span class="term">controller_id</span></dt><dd><p>
       Channel number
      </p><div class="verbatim-wrap"><pre class="screen">&lt;controller_id&gt;0.0.fc00&lt;/controller_id&gt;</pre></div></dd></dl></div><p>
    The <code class="literal">controller_id</code> element is required.
   </p><p>
    There are two optional elements: <code class="literal">wwpn</code> (Worldwide Port
    Number, the target port through which the SCSI device is attached) and
    <code class="literal">fcp_lun</code> (logical unit number of the SCSI device). It is
    not necessary to specify these for FCP devices running in NPIV (Node Port
    ID Virtualization) mode, and when the zfcp module parameter
    <code class="literal">allow_lun_scan</code> is set to 1 (the default setting), which
    enables automatic LUN scanning by the zfcp device driver.
   </p><p>
    If automatic LUN scanning is not available, set the <code class="literal">wwpn</code>
    and <code class="literal">fcp_lun</code> options manually.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.10.17.4.9.1"><span class="term">wwpn</span></dt><dd><p>
       Worldwide port number
      </p><div class="verbatim-wrap"><pre class="screen">&lt;wwpn&gt;0x500507630300c562&lt;/wwpn&gt;</pre></div></dd><dt id="id-1.7.5.2.10.17.4.9.2"><span class="term">fcp_lun</span></dt><dd><p>
       Logical unit number
      </p><div class="verbatim-wrap"><pre class="screen">&lt;fcp_lun&gt;0x4010403200000000&lt;/fcp_lun&gt;</pre></div></dd></dl></div><p>
    See the IBM documentation for more information,
    <a class="link" href=" https://www.ibm.com/docs/en/linux-on-systems?topic=wsd-configuring-devices" target="_blank"> https://www.ibm.com/docs/en/linux-on-systems?topic=wsd-configuring-devices</a>.
   </p></section></section></section><section class="sect1" id="CreateProfile-Iscsi-client" data-id-title="iSCSI initiator overview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.6 </span><span class="title-name">iSCSI initiator overview</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Iscsi-client">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_iscsi_client.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Using the <code class="literal">iscsi-client</code> resource, you can configure the
  target machine as an iSCSI client.
 </p><div class="example" id="id-1.7.5.2.11.4" data-id-title="iSCSI client"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.23: </span><span class="title-name">iSCSI client </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.11.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_iscsi_client.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;iscsi-client&gt;
    &lt;initiatorname&gt;iqn.2013-02.de.suse:01:e229358d2dea&lt;/initiatorname&gt;
    &lt;targets config:type="list"&gt;
      &lt;listentry&gt;
         &lt;authmethod&gt;None&lt;/authmethod&gt;
         &lt;portal&gt;192.168.1.1:3260&lt;/portal&gt;
         &lt;startup&gt;onboot&lt;/startup&gt;
         &lt;target&gt;iqn.2001-05.com.doe:test&lt;/target&gt;
         &lt;iface&gt;default&lt;/iface&gt;
      &lt;/listentry&gt;
    &lt;/targets&gt;
    &lt;version&gt;1.0&lt;/version&gt;
  &lt;/iscsi-client&gt;</pre></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">iSCSI initiator configuration settings </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.11.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_iscsi_client.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.11.5.2"><span class="term">initiatorname</span></dt><dd><p>
     <code class="literal">InitiatorName</code> is a value from
     <code class="filename">/etc/iscsi/initiatorname.iscsi</code>. In case you have
     iBFT, this value will be added from there and you are only able to change
     it in the BIOS setup.
    </p></dd><dt id="id-1.7.5.2.11.5.3"><span class="term">version</span></dt><dd><p>
     Version of the YaST module. Default: 1.0
    </p></dd><dt id="id-1.7.5.2.11.5.4"><span class="term">targets</span></dt><dd><p>
     List of targets. Each entry contains:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.11.5.4.2.2.1"><span class="term">authmethod</span></dt><dd><p>
        Authentication method: None/CHAP
       </p></dd><dt id="id-1.7.5.2.11.5.4.2.2.2"><span class="term">portal</span></dt><dd><p>
        Portal address
       </p></dd><dt id="id-1.7.5.2.11.5.4.2.2.3"><span class="term">startup</span></dt><dd><p>
        Value: manual/onboot
       </p></dd><dt id="id-1.7.5.2.11.5.4.2.2.4"><span class="term">target</span></dt><dd><p>
        Target name
       </p></dd><dt id="id-1.7.5.2.11.5.4.2.2.5"><span class="term">iface</span></dt><dd><p>
        Interface name
       </p></dd></dl></div></dd></dl></div></section><section class="sect1" id="CreateProfile-fcoe-client" data-id-title="Fibre channel over Ethernet configuration (FCoE)"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.7 </span><span class="title-name">Fibre channel over Ethernet configuration (FCoE)</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-fcoe-client">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_fiber_channel.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Using the <code class="literal">fcoe_cfg</code> resource, you can configure a Fibre
  Channel over Ethernet (FCoE).
 </p><div class="example" id="id-1.7.5.2.12.4" data-id-title="FCoE configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.24: </span><span class="title-name">FCoE configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.12.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_fiber_channel.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;fcoe-client&gt;
    &lt;fcoe_cfg&gt;
      &lt;DEBUG&gt;no&lt;/DEBUG&gt;
      &lt;USE_SYSLOG&gt;yes&lt;/USE_SYSLOG&gt;
    &lt;/fcoe_cfg&gt;
    &lt;interfaces config:type="list"&gt;
      &lt;listentry&gt;
        &lt;dev_name&gt;eth3&lt;/dev_name&gt;
        &lt;mac_addr&gt;01:000:000:000:42:42&lt;/mac_addr&gt;
        &lt;device&gt;Gigabit 1313&lt;/device&gt;
        &lt;vlan_interface&gt;200&lt;/vlan_interface&gt;
        &lt;fcoe_vlan&gt;eth3.200&lt;/fcoe_vlan&gt;
        &lt;fcoe_enable&gt;yes&lt;/fcoe_enable&gt;
        &lt;dcb_required&gt;yes&lt;/dcb_required&gt;
        &lt;auto_vlan&gt;no&lt;/auto_vlan&gt;
        &lt;dcb_capable&gt;no&lt;/dcb_capable&gt;
        &lt;cfg_device&gt;eth3.200&lt;/cfg_device&gt;
      &lt;/listentry&gt;
    &lt;/interfaces&gt;
    &lt;service_start&gt;
      &lt;fcoe config:type="boolean"&gt;true&lt;/fcoe&gt;
      &lt;lldpad config:type="boolean"&gt;true&lt;/lldpad&gt;
    &lt;/service_start&gt;
  &lt;/fcoe-client&gt;</pre></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.12.5.1"><span class="term">fcoe_cfg</span></dt><dd><p>
     Values: <code class="literal">yes</code>/<code class="literal">no</code>
    </p><p>
     <code class="literal">DEBUG</code> is used to enable or disable debugging messages
     from the fcoe service script and fcoemon.
    </p><p>
     <code class="literal">USE_SYSLOG</code> messages are sent to the system log if set
     to yes.
    </p></dd><dt id="id-1.7.5.2.12.5.2"><span class="term">interfaces</span></dt><dd><p>
     List of network cards including the status of VLAN and FCoE configuration.
    </p></dd><dt id="id-1.7.5.2.12.5.3"><span class="term">service_start</span></dt><dd><p>
     Values: <code class="literal">yes</code>/<code class="literal">no</code>
    </p><p>
     Enable or disable the start of the services
     <code class="systemitem">fcoe</code> and
     <code class="systemitem">lldpad</code> boot time.
    </p><p>
     Starting the <code class="systemitem">fcoe</code> service
     means starting the Fibre Channel over Ethernet service daemon
     <code class="systemitem">fcoemon</code>, which controls the
     FCoE interfaces and establishes a connection with the
     <code class="systemitem">lldpad</code> daemon.
    </p><p>
     The <code class="systemitem">lldpad</code> service provides the
     Link Layer Discovery Protocol agent daemon
     <code class="systemitem">lldpad</code>, which informs
     <code class="systemitem">fcoemon</code> about DCB (Data
     Center Bridging) features and configuration of the interfaces.
    </p></dd></dl></div></section><section class="sect1" id="CreateProfile-Country" data-id-title="Country settings"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.8 </span><span class="title-name">Country settings</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Country">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_country_settings.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Language, time zone, and keyboard settings.
 </p><div class="example" id="id-1.7.5.2.13.4" data-id-title="Language"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.25: </span><span class="title-name">Language </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.13.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_country_settings.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">       &lt;language&gt;
         &lt;language&gt;en_GB&lt;/language&gt;
         &lt;languages&gt;de_DE,en_US&lt;/languages&gt;
       &lt;/language&gt;</pre></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.13.5.1"><span class="term">language</span></dt><dd><p>
     Primary language
    </p></dd><dt id="id-1.7.5.2.13.5.2"><span class="term">languages</span></dt><dd><p>
     Secondary languages separated by commas
    </p></dd></dl></div><p>
  A list of available languages can be found under
  <code class="filename">/usr/share/YaST2/data/languages</code>.
 </p><p>
  If the configured value for the primary language is unknown, it will be reset
  to the default, <code class="literal">en_US</code>.
 </p><div class="example" id="id-1.7.5.2.13.8" data-id-title="Time zone"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.26: </span><span class="title-name">Time zone </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.13.8">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_country_settings.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">       &lt;timezone&gt;
         &lt;hwclock&gt;UTC&lt;/hwclock&gt;
         &lt;timezone&gt;Europe/Berlin&lt;/timezone&gt;
       &lt;/timezone&gt;</pre></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.13.9.1"><span class="term">hwclock</span></dt><dd><p>
     Whether the hardware clock uses local time or UTC.
    </p><p>
     Values: <code class="literal">localtime</code>/<code class="literal">UTC</code>.
    </p></dd><dt id="id-1.7.5.2.13.9.2"><span class="term">timezone</span></dt><dd><p>
     Time zone.
    </p><p>
     A list of available time zones can be found under
     <code class="filename">/usr/share/YaST2/data/timezone_raw.ycp</code>
    </p></dd></dl></div><div class="example" id="id-1.7.5.2.13.10" data-id-title="Keyboard"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.27: </span><span class="title-name">Keyboard </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.13.10">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_country_settings.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">       &lt;keyboard&gt;
         &lt;keymap&gt;german&lt;/keymap&gt;
       &lt;/keyboard&gt;</pre></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.13.11.1"><span class="term">keymap</span></dt><dd><p>
     Keyboard layout
    </p><p>
     Keymap-code values or keymap-alias values are valid. A list of available
     entries can be found in
     <code class="literal">/usr/share/YaST2/lib/y2keyboard/keyboards.rb</code>. For example,
     <code class="literal">english-us, us, english-uk, uk.</code>
    </p></dd></dl></div></section><section class="sect1" id="CreateProfile-Software" data-id-title="Software"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.9 </span><span class="title-name">Software</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Software">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    
   </p><section class="sect2" id="Software-Selections-base-product" data-id-title="Product selection"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.9.1 </span><span class="title-name">Product selection</span></span> <a title="Permalink" class="permalink" href="#Software-Selections-base-product">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, all products are distributed using a single
     installation medium. Therefore you need to choose which product to install
     by using the <code class="sgmltag-element">product</code> tag.
    </p><p>
     The available values for the <code class="sgmltag-element">product</code> tag are:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.14.4.4.1"><span class="term">SLES</span></dt><dd><p>
        SUSE Linux Enterprise Server
       </p></dd><dt id="id-1.7.5.2.14.4.4.2"><span class="term">SLE_HPC</span></dt><dd><p>
        SUSE Linux Enterprise High Performance Computing
       </p></dd><dt id="id-1.7.5.2.14.4.4.3"><span class="term">SLE_RT</span></dt><dd><p>
        SUSE Linux Enterprise Real Time
       </p></dd><dt id="id-1.7.5.2.14.4.4.4"><span class="term">SLES_SAP</span></dt><dd><p>
        SUSE Linux Enterprise Server for SAP Applications
       </p></dd><dt id="id-1.7.5.2.14.4.4.5"><span class="term">SLED</span></dt><dd><p>
        SUSE Linux Enterprise Desktop
       </p></dd><dt id="id-1.7.5.2.14.4.4.6"><span class="term">SUSE-manager-server</span></dt><dd><p>
        SUSE Manager Server
       </p></dd><dt id="id-1.7.5.2.14.4.4.7"><span class="term">SUSE-manager-retail-branch-server</span></dt><dd><p>
        SUSE Manager for Retail
       </p></dd><dt id="id-1.7.5.2.14.4.4.8"><span class="term">SUSE-manager-proxy</span></dt><dd><p>
        SUSE Manager Proxy
       </p></dd></dl></div><div class="complex-example"><div class="example" id="id-1.7.5.2.14.4.5" data-id-title="Explicit product selection"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.28: </span><span class="title-name">Explicit product selection </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.14.4.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div><div class="example-contents"><p>
      In the following example, SUSE Linux Enterprise Desktop is the chosen product:
     </p><div class="verbatim-wrap"><pre class="screen">&lt;software&gt;
  &lt;products config:type="list"&gt;
    &lt;product&gt;SLED&lt;/product&gt;
  &lt;/products&gt;
&lt;/software&gt;</pre></div></div></div></div><p>
     In special cases, the medium might contain only one product. If so, you
     do not need to select a product explicitly as described above.
     AutoYaST will select the only available product automatically.
    </p><div id="id-1.7.5.2.14.4.7" data-id-title="Using AutoYaST files from previous versions" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: 
      Using AutoYaST files from previous versions
     </div><p>
      If you are using or migrating an AutoYaST configuration file from an older
      version of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, be aware that there are some special
      considerations. For details, refer to <a class="xref" href="#sec-ay-12vs15-product-selection" title="D.1. Product selection">Section D.1, “Product selection”</a>.
     </p></div></section><section class="sect2" id="Software-Selections-sles10" data-id-title="Package selection with patterns and packages sections"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.9.2 </span><span class="title-name">Package selection with patterns and packages sections</span></span> <a title="Permalink" class="permalink" href="#Software-Selections-sles10">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Patterns or packages are configured like this:
    </p><div class="example" id="id-1.7.5.2.14.5.3" data-id-title="Package selection in the control file with patterns and packages sections"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.29: </span><span class="title-name">Package selection in the control file with patterns and packages sections </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.14.5.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;software&gt;
  &lt;patterns config:type="list"&gt;
    &lt;pattern&gt;directory_server&lt;/pattern&gt;
  &lt;/patterns&gt;
  &lt;packages config:type="list"&gt;
    &lt;package&gt;apache&lt;/package&gt;
    &lt;package&gt;postfix&lt;/package&gt;
  &lt;/packages&gt;
  &lt;do_online_update config:type="boolean"&gt;true&lt;/do_online_update&gt;
&lt;/software&gt;</pre></div></div></div><div id="id-1.7.5.2.14.5.4" data-id-title="Package and pattern names" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Package and pattern names</div><p>
      The values are real package or pattern names. If the package name
      has been changed because of an upgrade, you will need to adapt these
      settings too.
     </p></div><p>
     It is possible to specify package and pattern names using regular expressions. In that case,
     AutoYaST will select all packages or patterns that match the expression. Beware that such
     expressions must be enclosed within slashes. In
     <a class="xref" href="#ay-packages-selection-using-a-regexp" title="Packages selection using a regular expression">Example 4.30, “Packages selection using a regular expression”</a>, all packages whose name starts with
     <code class="literal">nginx</code> will be selected (e.g., <code class="literal">nginx</code> and
     <code class="literal">nginx-macros</code>). 
    </p><div class="example" id="ay-packages-selection-using-a-regexp" data-id-title="Packages selection using a regular expression"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.30: </span><span class="title-name">Packages selection using a regular expression </span></span><a title="Permalink" class="permalink" href="#ay-packages-selection-using-a-regexp">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;software&gt;
  &lt;packages config:type="list"&gt;
    &lt;package&gt;/nginx.*/&lt;/package&gt;
  &lt;/packages&gt;
&lt;/software&gt;</pre></div></div></div></section><section class="sect2" id="Software-Selections-additional" data-id-title="Installing additional/customized packages or products"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.9.3 </span><span class="title-name">Installing additional/customized packages or products</span></span> <a title="Permalink" class="permalink" href="#Software-Selections-additional">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     In addition to the packages available for installation on the DVD-ROMs,
     you can add external packages including customized kernels. Customized
     kernel packages must be compatible with the SUSE packages and must
     install the kernel files to the same locations.
    </p><p>
     Unlike in earlier versions, you do not need a special resource in
     the control file to install custom and external packages. Instead you
     need to re-create the package database and update it with any new
     packages or new package versions in the source repository.
    </p><p>
     A script is provided for this task which will query packages available
     in the repository and create the package database. Use the command
     <code class="command">/usr/bin/create_package_descr</code>. It can be found in
     the <code class="literal">inst-source-utils</code> package in the openSUSE Build Service.
     When creating the database, all languages will be reset to English.
    </p><div class="complex-example"><div class="example" id="id-1.7.5.2.14.6.5" data-id-title="Creating a package database with the additional package inst-source-utils.rpm"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.31: </span><span class="title-name">Creating a package database with the additional package inst-source-utils.rpm </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.14.6.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div><div class="example-contents"><p>
     The unpacked DVD is located in <code class="literal">/usr/local/DVDs/LATEST</code>.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>cp /tmp/inst-source-utils-2016.7.26-1.2.noarch.rpm /usr/local/DVDs/LATEST/suse/noarch
<code class="prompt user">&gt; </code>cd /usr/local/DVDs/LATEST/suse
<code class="prompt user">&gt; </code>create_package_descr -d /usr/local/CDs/LATEST/suse</pre></div></div></div></div><p>
     In the above example, the directory
     <code class="filename">/usr/local/CDs/LATEST/suse</code> contains the
     architecture-dependent (for example <code class="literal">x86_64</code>) and
     architecture-independent packages (<code class="literal">noarch</code>). This
     might look different on other architectures.
    </p><p>
     The advantage of this method is that you can keep an up-to-date
     repository with a fixed and updated package. Additionally, this method
     makes the creation of custom CD-ROMs easier.
    </p><p>
     To add your own module such as the SDK (SUSE Software Development Kit), add a file
     <code class="filename">add_on_products.xml</code> to the installation source in the
     root directory.
    </p><p>
     The following example shows how the SDK module can be added to the base product
     repository. The complete SDK repository will be stored in the directory
     <code class="filename">/sdk</code>.
    </p><div class="complex-example"><div class="example" id="id-1.7.5.2.14.6.10" data-id-title="add_on_products.xml"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.32: </span><span class="title-name"><code class="filename">add_on_products.xml</code>
      </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.14.6.10">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div><div class="example-contents"><p>This file describes an SDK module included in the base product.</p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
&lt;add_on_products xmlns="http://www.suse.com/1.0/yast2ns"
   xmlns:config="http://www.suse.com/1.0/configns"&gt;
   &lt;product_items config:type="list"&gt;
      &lt;product_item&gt;
         &lt;name&gt;SUSE Linux Enterprise Software Development Kit&lt;/name&gt;
         &lt;url&gt;relurl:////sdk?alias=SLE_SDK&lt;/url&gt;
         &lt;path&gt;/&lt;/path&gt;
         &lt;-- Users are asked whether to add such a product --&gt;
         &lt;ask_user config:type="boolean"&gt;false&lt;/ask_user&gt;
         &lt;-- Defines the default state of pre-selected state in case of ask_user used. --&gt;
         &lt;selected config:type="boolean"&gt;true&lt;/selected&gt;
      &lt;/product_item&gt;
   &lt;/product_items&gt;
&lt;/add_on_products&gt;</pre></div></div></div></div><p>
     Besides this special case, all other modules, extensions and add-on
     products can be added from almost every other location during an AutoYaST
     installation.
    </p><div id="id-1.7.5.2.14.6.12" data-id-title="Repositories served by a registration server" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Repositories served by a registration server</div><p>
      If you want to use add-ons from a registration server (SMT, RMT, or SCC),
      define them in the <code class="literal">suse_register</code> section.
      <span class="phrase">See <a class="xref" href="#CreateProfile-Register-Extension" title="4.3.1. Extensions">Section 4.3.1, “Extensions”</a>.</span>
     </p></div><p>
      Even repositories that do not have any product or module information
      can be added during the installation. These are called <code class="literal">other add-ons</code>.
    </p><div class="example" id="id-1.7.5.2.14.6.15" data-id-title="Adding the SDK extension and a user defined repository"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.33: </span><span class="title-name">Adding the SDK extension and a user defined repository </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.14.6.15">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;add-on&gt;
  &lt;add_on_products config:type="list"&gt;
    &lt;listentry&gt;
      &lt;media_url&gt;cd:///sdk&lt;/media_url&gt;
      &lt;product&gt;sle-sdk&lt;/product&gt;
      &lt;alias&gt;SLE SDK&lt;/alias&gt;
      &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;priority config:type="integer"&gt;20&lt;/priority&gt;
      &lt;ask_on_error config:type="boolean"&gt;false&lt;/ask_on_error&gt;
      &lt;confirm_license config:type="boolean"&gt;false&lt;/confirm_license&gt;
      &lt;name&gt;SUSE Linux Enterprise Software Development Kit&lt;/name&gt;
    &lt;/listentry&gt;
  &lt;/add_on_products&gt;
  &lt;add_on_others config:type="list"&gt;
    &lt;listentry&gt;
      &lt;media_url&gt;https://download.opensuse.org/repositories/YaST:/Head/openSUSE_Leap_15.2/&lt;/media_url&gt;
      &lt;alias&gt;yast2_head&lt;/alias&gt;
      &lt;priority config:type="integer"&gt;30&lt;/priority&gt;
      &lt;name&gt;Latest YaST2 packages from OBS&lt;/name&gt;
    &lt;/listentry&gt;
  &lt;/add_on_others&gt;
&lt;/add-on&gt;</pre></div></div></div><p>
      The <code class="literal">add_on_others</code> and <code class="literal">add_on_products</code> sections support
      the same values:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.14.6.17.1"><span class="term">media_url</span></dt><dd><p>
        Product URL. Can have the prefix <code class="literal">cd:///</code>,
        <code class="literal">http://</code>, <code class="literal">ftp://</code>, etc.
        This entry is mandatory.
       </p><p>
        If you use a multi-product medium such as the SUSE Linux Enterprise Packages DVD,
        then the URL path should point to the root directory of the
        multi-product medium. The specific product directory is selected using
        the <code class="literal">product_dir</code> value (see below).
       </p></dd><dt id="id-1.7.5.2.14.6.17.2"><span class="term">product</span></dt><dd><p>
        Internal product name if the add-on is a product. The command
        <code class="command">zypper products</code> shows the names of installed
        products.
       </p></dd><dt id="id-1.7.5.2.14.6.17.3"><span class="term">alias</span></dt><dd><p>
        Repository alias name. Defined by the user.
       </p></dd><dt id="id-1.7.5.2.14.6.17.4"><span class="term">product_dir</span></dt><dd><p>
        Optional subpath. This should only be used for multi-product media such
        as the SUSE Linux Enterprise Packages DVD.
       </p></dd><dt id="id-1.7.5.2.14.6.17.5"><span class="term">priority</span></dt><dd><p>
        Sets the repository libzypp priority. Priority of 1 is the highest.
        The higher the number, the lower the priority. Default is 99.
       </p></dd><dt id="id-1.7.5.2.14.6.17.6"><span class="term">ask_on_error</span></dt><dd><p>
        AutoYaST can ask the user to make add-on products, modules or extensions
        available instead of reporting a time-out error when no repository can
        be found at the given location. Set <code class="literal">ask_on_error</code> to
        <code class="literal">true</code> (the default is <code class="literal">false</code>).
       </p></dd><dt id="id-1.7.5.2.14.6.17.7"><span class="term">confirm_license</span></dt><dd><p>
        The user needs to confirm the license. Default is
        <code class="literal">false</code>.
       </p></dd><dt id="id-1.7.5.2.14.6.17.8"><span class="term">name</span></dt><dd><p>
         Repository name.
         The command <code class="command">zypper lr</code> shows the names of added
         repositories.
        </p></dd></dl></div><p>
     To use unsigned installation sources with AutoYaST, turn off
     the checks with the following configuration in your AutoYaST control
     file.
    </p><div id="id-1.7.5.2.14.6.19" data-id-title="Unsigned installation sources—limitations" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Unsigned installation sources—limitations</div><p>
      You can only disable signature checking during the first stage of the
      auto-installation process. In stage two, the installed system's configuration
      takes precedence over AutoYaST configuration.</p></div><p>
     The elements listed below must be placed within the following XML
     structure:
    </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;signature-handling&gt;
    ...
  &lt;/signature-handling&gt;
&lt;/general&gt;</pre></div><p>
     Default values for all options are <code class="literal">false</code>. If an
     option is set to <code class="literal">false</code> and a package or repository
     fails the respective test, it is silently ignored and will not be
     installed. Note that setting any of these options to
     <code class="literal">true</code> is a potential security risk. Never do it when
     using packages or repositories from third-party sources.
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.14.6.23.1"><span class="term">accept_unsigned_file</span></dt><dd><p>
        If set to <code class="literal">true</code>, AutoYaST will accept unsigned files such
        as the content file.
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_unsigned_file config:type="boolean" &gt;true&lt;/accept_unsigned_file&gt;</pre></div></dd><dt id="id-1.7.5.2.14.6.23.2"><span class="term">accept_file_without_checksum</span></dt><dd><p>
        If set to <code class="literal">true</code>, AutoYaST will accept files without a
        checksum in the content file.
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_file_without_checksum config:type="boolean" &gt;true&lt;/accept_file_without_checksum&gt;</pre></div></dd><dt id="id-1.7.5.2.14.6.23.3"><span class="term">accept_verification_failed</span></dt><dd><p>
        If set to <code class="literal">true</code>, AutoYaST will accept signed files even
        when the verification of the signature failed.
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_verification_failed config:type="boolean" &gt;true&lt;/accept_verification_failed&gt;</pre></div></dd><dt id="id-1.7.5.2.14.6.23.4"><span class="term">accept_unknown_gpg_key</span></dt><dd><p>
        If set to <code class="literal">true</code>, AutoYaST will accept new GPG keys of the
        installation sources, for example the key used to sign the content file.
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_unknown_gpg_key config:type="boolean" &gt;true&lt;/accept_unknown_gpg_key&gt;</pre></div></dd><dt id="id-1.7.5.2.14.6.23.5"><span class="term">accept_non_trusted_gpg_key</span></dt><dd><p>
        Set this option to <code class="literal">true</code> to accept known keys you
        have not yet trusted.
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_non_trusted_gpg_key config:type="boolean" &gt;true&lt;/accept_non_trusted_gpg_key&gt;</pre></div></dd><dt id="id-1.7.5.2.14.6.23.6"><span class="term">import_gpg_key</span></dt><dd><p>
        If set to <code class="literal">true</code>, AutoYaST will accept and import new GPG
        keys on the installation source in its database.
       </p><div class="verbatim-wrap"><pre class="screen">&lt;import_gpg_key config:type="boolean" &gt;true&lt;/import_gpg_key&gt;</pre></div></dd></dl></div><p>
     It is possible to configure the signature handling for each add-on
     product, module, or extension individually. The following elements must
     be between the <code class="literal">signature-handling</code> section of the
     individual add-on product, module, or extension. All settings are
     optional. If not configured, the global signature-handling from the
     <code class="literal">general</code> section is used.
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.14.6.25.1"><span class="term">accept_unsigned_file</span></dt><dd><p>
        If set to <code class="literal">true</code>, AutoYaST will accept unsigned files such
        as the content file for this add-on product.
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_unsigned_file config:type="boolean" &gt;true&lt;/accept_unsigned_file&gt;</pre></div></dd><dt id="id-1.7.5.2.14.6.25.2"><span class="term">accept_file_without_checksum</span></dt><dd><p>
        If set to <code class="literal">true</code>, AutoYaST will accept files without a
        checksum in the content file for this add-on.
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_file_without_checksum config:type="boolean" &gt;true&lt;/accept_file_without_checksum&gt;</pre></div></dd><dt id="id-1.7.5.2.14.6.25.3"><span class="term">accept_verification_failed</span></dt><dd><p>
        If set to <code class="literal">true</code>, AutoYaST will accept signed files even
        when the verification of the signature fails.
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_verification_failed config:type="boolean" &gt;true&lt;/accept_verification_failed&gt;</pre></div></dd><dt id="id-1.7.5.2.14.6.25.4"><span class="term">accept_unknown_gpg_key</span></dt><dd><p>
        If <code class="literal">all</code> is set to <code class="literal">true</code>, AutoYaST will
        accept new GPG keys on the installation source.
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_unknown_gpg_key&gt; &lt;all config:type="boolean"&gt;true&lt;/all&gt; &lt;/accept_unknown_gpg_key&gt;</pre></div><p>
        Alternatively, you can define single keys:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_unknown_gpg_key&gt; &lt;all config:type="boolean"&gt;false&lt;/all&gt; &lt;keys config:type="list"&gt; &lt;keyid&gt;3B3011B76B9D6523&lt;/keyid&gt; lt;/keys&gt; &lt;/accept_unknown_gpg_key&gt;</pre></div></dd><dt id="id-1.7.5.2.14.6.25.5"><span class="term">accept_non_trusted_gpg_key</span></dt><dd><p>
        This means that the key is known, but it is not trusted by you. You can
        trust all keys by adding:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_non_trusted_gpg_key&gt; &lt;all config:type="boolean"&gt;true&lt;/all&gt; &lt;/accept_non_trusted_gpg_key&gt;</pre></div><p>
        Alternatively, you can trust specific keys:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;accept_non_trusted_gpg_key&gt; &lt;all config:type="boolean"&gt;false&lt;/all&gt; &lt;keys config:type="list"&gt; &lt;keyid&gt;3B3011B76B9D6523&lt;/keyid&gt; &lt;/keys&gt; &lt;/accept_non_trusted_gpg_key&gt;</pre></div></dd><dt id="id-1.7.5.2.14.6.25.6"><span class="term">import_gpg_key</span></dt><dd><p>
        If <code class="literal">all</code> is set to <code class="literal">true</code>, AutoYaST will
        accept and import all new GPG keys on the installation source into its
        database.
       </p><div class="verbatim-wrap"><pre class="screen">&lt;import_gpg_key&gt; &lt;all config:type="boolean"&gt;true&lt;/all&gt; &lt;/import_gpg_key&gt;</pre></div><p>
        This can be done for specific keys only:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;import_gpg_key&gt; &lt;all config:type="boolean"&gt;false&lt;/all&gt; &lt;keys config:type="list"&gt; &lt;keyid&gt;3B3011B76B9D6523&lt;/keyid&gt; &lt;/keys&gt; &lt;/import_gpg_key&gt;</pre></div></dd></dl></div></section><section class="sect2" id="Software-Selections-kernel" data-id-title="Kernel packages"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.9.4 </span><span class="title-name">Kernel packages</span></span> <a title="Permalink" class="permalink" href="#Software-Selections-kernel">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Kernel packages are not part of any selection. The required kernel is
     determined during installation. If the kernel package is added to any
     selection or to the individual package selection, installation will
     mostly fail because of conflicts.
    </p><p>
     To force the installation of a specific kernel, use the
     <code class="literal">kernel</code> property. The following is an example of
     forcing the installation of the default kernel. This kernel will be
     installed even if an SMP or other kernel is required.
    </p><div class="example" id="id-1.7.5.2.14.7.4" data-id-title="Kernel selection in the control file"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.34: </span><span class="title-name">Kernel selection in the control file </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.14.7.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;software&gt;
  &lt;kernel&gt;kernel-default&lt;/kernel&gt;
  ...
&lt;/software&gt;</pre></div></div></div></section><section class="sect2" id="Software-Selections-remove-packs" data-id-title="Removing automatically selected packages"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.9.5 </span><span class="title-name">Removing automatically selected packages</span></span> <a title="Permalink" class="permalink" href="#Software-Selections-remove-packs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Some packages are selected automatically either because of a dependency
     or because it is available in a selection.
    </p><p>
     Removing these packages might break the system consistency, and it is not
     recommended to remove basic packages unless a replacement which
     provides the same services is provided. The best example for this case
     are mail transfer agent (MTA) packages. By default,
     <code class="systemitem">postfix</code> will be selected and installed. To use another MTA like <code class="systemitem">sendmail</code>, then
     postfix can be removed from the list of selected package using a list
     in the software resource. However, note that sendmail is not shipped
     with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. The following example shows how this can be
     done:
    </p><div class="example" id="id-1.7.5.2.14.8.4" data-id-title="Package selection in control file"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.35: </span><span class="title-name">Package selection in control file </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.14.8.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;software&gt;
  &lt;packages config:type="list"&gt;
    &lt;package&gt;sendmail&lt;/package&gt;
  &lt;/packages&gt;
  &lt;remove-packages config:type="list"&gt;
    &lt;package&gt;postfix&lt;/package&gt;
  &lt;/remove-packages&gt;
&lt;/software&gt;</pre></div></div></div><div id="id-1.7.5.2.14.8.5" data-id-title="Package removal failure" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Package removal failure</div><p>
      Note that it is not possible to remove a package that is part of a
      pattern (see <a class="xref" href="#Software-Selections-sles10" title="4.9.2. Package selection with patterns and packages sections">Section 4.9.2, “Package selection with patterns and packages sections”</a>).  When
      specifying such a package for removal, the installation will fail with
      the following error message:
     </p><div class="verbatim-wrap"><pre class="screen">The package resolver run failed. Check
      your software section in the AutoYaST profile.</pre></div></div></section><section class="sect2" id="Software-Selections-recommend-packs" data-id-title="Installing recommended packages and patterns"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.9.6 </span><span class="title-name">Installing recommended packages and patterns</span></span> <a title="Permalink" class="permalink" href="#Software-Selections-recommend-packs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      AutoYaST enables you to control which <span class="emphasis"><em>recommended</em></span>
      packages and patterns are installed. There are three options:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Install all recommended packages and patterns
    </p></li><li class="listitem"><p>
      Install only required packages and patterns
    </p></li><li class="listitem"><p>
      Install recommended packages, ignore recommended patterns
    </p></li></ul></div><p>
    Set the <code class="literal">install_recommended</code> flag to
    <code class="literal">true</code> in the configuration file to install
    all recommended packages and patterns.
  </p><p>
    If you want a minimal installation, and to install only
    <span class="emphasis"><em>required</em></span> packages and patterns,
    set the flag to <code class="literal">false</code>.
  </p><p>
    Omit the flag from the configuration file to install only recommended
    packages, and ignore all recommended patterns. Note that this flag only
    affects a fresh installation and will be ignored during an upgrade.
  </p><div id="id-1.7.5.2.14.9.7" data-id-title="The install_recommended flag affects only the installation process" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: The <code class="literal">install_recommended</code> flag affects only the installation process</div><p>
      Keep in mind that the flag influences only the package resolver during the installation process and does not change any settings in <code class="filename">/etc/zypp/zypp.conf</code>. Therefore, the package resolving in the running system is not affected by this AutoYaST setting.
    </p></div><div class="verbatim-wrap"><pre class="screen">&lt;software&gt;
  &lt;install_recommended config:type="boolean"&gt;false
  &lt;/install_recommended&gt;
&lt;/software&gt;</pre></div></section><section class="sect2" id="Software-Selections-stage2-packs" data-id-title="Installing packages in stage 2"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.9.7 </span><span class="title-name">Installing packages in stage 2</span></span> <a title="Permalink" class="permalink" href="#Software-Selections-stage2-packs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     To install packages after the reboot during stage two, you can
     use the <code class="literal">post-packages</code> element for that:
    </p><div class="verbatim-wrap"><pre class="screen">&lt;software&gt;
  &lt;post-packages config:type="list"&gt;
    &lt;package&gt;yast2-cim&lt;/package&gt;
  &lt;/post-packages&gt;
&lt;/software&gt;</pre></div></section><section class="sect2" id="Software-Selections-stage2-patterns" data-id-title="Installing patterns in stage 2"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.9.8 </span><span class="title-name">Installing patterns in stage 2</span></span> <a title="Permalink" class="permalink" href="#Software-Selections-stage2-patterns">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     You can also install patterns in stage 2. Use the
     <code class="literal">post-patterns</code> element for that:
    </p><div class="verbatim-wrap"><pre class="screen">&lt;software&gt;
  &lt;post-patterns config:type="list"&gt;
    &lt;pattern&gt;apparmor&lt;/pattern&gt;
  &lt;/post-patterns&gt;
&lt;/software&gt;</pre></div></section><section class="sect2" id="Software-Selections-stage2-update" data-id-title="Online update in stage 2"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.9.9 </span><span class="title-name">Online update in stage 2</span></span> <a title="Permalink" class="permalink" href="#Software-Selections-stage2-update">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_software.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     You can perform an online update at the end of the installation. Set
     the boolean <code class="literal">do_online_update</code> to
     <code class="literal">true</code>. Of course this only makes sense if you add an
     online update repository in the suse-register/customer-center section,
     for example, or in a post-script. If the online update repository was
     already available in stage one via the add-on section, then AutoYaST has
     already installed the latest packages available. If a kernel update is
     done via online-update, a reboot at the end of stage two is triggered.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;software&gt;
  &lt;do_online_update config:type="boolean"&gt;true&lt;/do_online_update&gt;
&lt;/software&gt;</pre></div></section></section><section class="sect1" id="CreateProfile-upgrade" data-id-title="Upgrade"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.10 </span><span class="title-name">Upgrade</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-upgrade">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_upgrade.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    AutoYaST can also be used for doing a system upgrade. Besides upgrade
    packages, the following sections are supported too:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <code class="literal">scripts/pre-scripts</code> Running user scripts very early, before anything else
      really happens.
     </p></li><li class="listitem"><p>
      <code class="literal">add-on</code> Defining an additional add-on product.
     </p></li><li class="listitem"><p>
      <code class="literal">language</code> Setting language.
     </p></li><li class="listitem"><p>
      <code class="literal">timezone</code> Setting timezone.
     </p></li><li class="listitem"><p>
      <code class="literal">keyboard</code> Setting keyboard.
     </p></li><li class="listitem"><p>
      <code class="literal">software</code> Installing additional software/patterns.
       Removing installed packages.
     </p></li><li class="listitem"><p>
      <code class="literal">suse_register</code> Running registration process.
     </p></li></ul></div><p>
    To control the upgrade process the following sections can be defined:
   </p><div class="example" id="id-1.7.5.2.15.6" data-id-title="Upgrade and backup"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.36: </span><span class="title-name">Upgrade and backup </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.15.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_upgrade.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;upgrade&gt;
    &lt;stop_on_solver_conflict config:type="boolean"&gt;true&lt;/stop_on_solver_conflict&gt;
  &lt;/upgrade&gt;
  &lt;backup&gt;
    &lt;sysconfig config:type="boolean"&gt;true&lt;/sysconfig&gt;
    &lt;modified config:type="boolean"&gt;true&lt;/modified&gt;
    &lt;remove_old config:type="boolean"&gt;true&lt;/remove_old&gt;
  &lt;/backup&gt;</pre></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.15.7.1"><span class="term">stop_on_solver_conflict</span></dt><dd><p>
       Halt installation if there are package dependency issues.
      </p></dd><dt id="id-1.7.5.2.15.7.2"><span class="term">modified</span></dt><dd><p>
       Create backups of modified files.
      </p></dd><dt id="id-1.7.5.2.15.7.3"><span class="term">sysconfig</span></dt><dd><p>
       Create backup of <code class="filename">/etc/sysconfig</code> directory.
      </p></dd><dt id="id-1.7.5.2.15.7.4"><span class="term">remove_old</span></dt><dd><p>
       Remove backups from previous updates.
      </p></dd></dl></div><p>To start the AutoYaST upgrade mode, you need:</p><div class="procedure" id="pro-upgrade-offline-upgrade-mode" data-id-title="Starting AutoYaST in offline upgrade mode"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 4.1: </span><span class="title-name">Starting AutoYaST in offline upgrade mode </span></span><a title="Permalink" class="permalink" href="#pro-upgrade-offline-upgrade-mode">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_upgrade.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Copy the AutoYaST profile to <code class="filename">/root/autoupg.xml</code> on
     its file system.
     </p></li><li class="step"><p>Boot the system from the installation medium.</p></li><li class="step"><p>Select the <code class="literal">Installation</code> menu item.</p></li><li class="step"><p>On the command line, set <code class="varname">autoupgrade=1</code>.</p></li><li class="step"><p>Press <span class="keycap">Enter</span> to start the upgrade process.</p></li></ol></div></div><div class="procedure" id="pro-upgrade-online-upgrade-mode" data-id-title="Starting AutoYaST in online upgrade mode"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 4.2: </span><span class="title-name">Starting AutoYaST in online upgrade mode </span></span><a title="Permalink" class="permalink" href="#pro-upgrade-online-upgrade-mode">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_upgrade.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>Boot the system from the installation media.</p></li><li class="step"><p>Select the <code class="literal">Installation</code> menu item.</p></li><li class="step"><p>On the command line, set <code class="varname">netsetup=dhcp autoupgrade=1 autoyast=http://192.169.3.1/autoyast.xml</code>.</p><p>Here, network will be set up via DHCP.</p></li><li class="step"><p>Press <span class="keycap">Enter</span> to start the upgrade process.</p></li></ol></div></div></section><section class="sect1" id="CreateProfile-Services" data-id-title="Services and targets"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.11 </span><span class="title-name">Services and targets</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Services">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_services_targets.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  With the <code class="literal">services-manager</code> resource, you can set the
  default systemd target, and specify in detail which system services you
  want to start or deactivate, and how to start them.
 </p><p>
  The <code class="literal">default-target</code> property specifies the default systemd
  target into which the system boots. Valid options are
  <code class="literal">graphical</code> for a graphical login, or
  <code class="literal">multi-user</code> for a console login.
 </p><p>
  To specify the set of services that should be started on boot, use the
  <code class="literal">enable</code> and <code class="literal">disable</code> lists. To start a
  service, add its name to the <code class="literal">enable</code> list. To make sure
  that the service is not started on boot, add it to the
  <code class="literal">disable</code> list.
 </p><p>
  If a service is not listed as enabled or disabled, a default setting is used.
  The default setting may be either disabled or enabled.
 </p><p>
  Finally, some services like <code class="literal">cups</code> support on-demand
  activation (socket activated services). If you want to take advantage of such
  a feature, list the names of those services in the
  <code class="literal">on_demand</code> list instead of <code class="literal">enable</code>.
 </p><div class="example" id="id-1.7.5.2.16.8" data-id-title="Configuring services and targets"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.37: </span><span class="title-name">Configuring services and targets </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.16.8">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_services_targets.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;services-manager&gt;
  &lt;default_target&gt;multi-user&lt;/default_target&gt;
  &lt;services&gt;
    &lt;disable config:type="list"&gt;
      &lt;service&gt;libvirtd&lt;/service&gt;
    &lt;/disable&gt;
    &lt;enable config:type="list"&gt;
      &lt;service&gt;sshd&lt;/service&gt;
    &lt;/enable&gt;
    &lt;on_demand config:type="list"&gt;
      &lt;service&gt;cups&lt;/service&gt;
    &lt;/on_demand&gt;
  &lt;/services&gt;
&lt;/services-manager&gt;</pre></div></div></div></section><section class="sect1" id="CreateProfile-Network" data-id-title="Network configuration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.12 </span><span class="title-name">Network configuration</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Network">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect2" id="CreateProfile-Network-Workflow" data-id-title="Configuration Workflow"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.12.1 </span><span class="title-name">Configuration Workflow</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Network-Workflow">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Network configuration is mainly used to connect a single workstation to an
   Ethernet-based LAN. It is commonly configured before AutoYaST starts, to fetch
   the profile from a network location. This network configuration is usually
   done through <code class="command">linuxrc</code>
  </p><div id="id-1.7.5.2.17.3.3" data-id-title="The linuxrc program" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: The <code class="command">linuxrc</code> program</div><p>
    For a detailed description of how <code class="command">linuxrc</code> works and its
    keywords, see <a class="xref" href="#appendix-linuxrc" title="Appendix C. Advanced linuxrc options">Appendix C, <em>Advanced <code class="command">linuxrc</code> options</em></a>.
   </p></div><p>
   By default, YaST copies the network settings that were used during the
   installation into the final, installed system. This configuration is merged
   with the one defined in the AutoYaST profile.
  </p><p>
   AutoYaST settings have higher priority than any existing configuration files.
   YaST will write <code class="filename">ifcfg-*</code> files based on the entries in
   the profile without removing old ones. If the DNS and routing section is
   empty or missing, YaST will keep any pre-existing values. Otherwise, it
   applies the settings from the profile file.
  </p><div id="id-1.7.5.2.17.3.6" data-id-title="Use AutoYaST network settings during installation" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Use AutoYaST network settings during installation</div><p>
    Since <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15.3, writing the configuration based on the profile
    happens at the end of the first stage.
   </p><p>
    However, if network settings are needed during the installation, you can
    force AutoYaST to write and apply them before registration takes place by
    setting the <code class="literal">setup_before_proposal</code> option to
    <code class="literal">true</code>. Asking AutoYaST to set up the network in the early
    stages is useful when installation on a network is needed, but the
    configuration is too complex to define it using linuxrc (see
    <a class="xref" href="#autoinstall-singlesystem" title="9.3.2. Auto-installing a single system">Section 9.3.2, “Auto-installing a single system”</a>).
   </p><div class="verbatim-wrap"><pre class="screen">&lt;setup_before_proposal config:type="boolean"&gt;true&lt;/setup_before_proposal&gt;</pre></div><p>
    If the configuration is written at the end of installation, it will not be
    applied until the system is rebooted.
   </p></div><p>
   Network settings and service activation are defined under the
   <code class="literal">profile</code> <code class="literal">networking</code> global resource.
  </p></section><section class="sect2" id="CreateProfile-Network-Resource" data-id-title="The Network Resource"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.12.2 </span><span class="title-name">The Network Resource</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Network-Resource">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div></div></div></div><div class="example" id="ex-ay-network-config-general" data-id-title="Network configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.38: </span><span class="title-name">Network configuration </span></span><a title="Permalink" class="permalink" href="#ex-ay-network-config-general">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;networking&gt;
  &lt;dns&gt;
    &lt;dhcp_hostname config:type="boolean"&gt;true&lt;/dhcp_hostname&gt;
    &lt;hostname&gt;linux-bqua&lt;/hostname&gt;
    &lt;nameservers config:type="list"&gt;
      &lt;nameserver&gt;192.168.1.116&lt;/nameserver&gt;
      &lt;nameserver&gt;192.168.1.117&lt;/nameserver&gt;
      &lt;nameserver&gt;192.168.1.118&lt;/nameserver&gt;
    &lt;/nameservers&gt;
    &lt;resolv_conf_policy&gt;auto&lt;/resolv_conf_policy&gt;
    &lt;searchlist config:type="list"&gt;
      &lt;search&gt;example.com&lt;/search&gt;
      &lt;search&gt;example.net&lt;/search&gt;
    &lt;/searchlist&gt;
  &lt;/dns&gt;
  &lt;interfaces config:type="list"&gt;
    &lt;interface&gt;
      &lt;bootproto&gt;dhcp&lt;/bootproto&gt;
      &lt;name&gt;eth0&lt;/name&gt;
      &lt;startmode&gt;auto&lt;/startmode&gt;
    &lt;/interface&gt;
  &lt;/interfaces&gt;
  &lt;ipv6 config:type="boolean"&gt;true&lt;/ipv6&gt;
  &lt;keep_install_network config:type="boolean"&gt;false&lt;/keep_install_network&gt;
  &lt;managed config:type="boolean"&gt;false&lt;/managed&gt;
  &lt;net-udev config:type="list"&gt;
    &lt;rule&gt;
      &lt;name&gt;eth0&lt;/name&gt;
      &lt;rule&gt;ATTR{address}&lt;/rule&gt;
      &lt;value&gt;00:30:6E:08:EC:80&lt;/value&gt;
    &lt;/rule&gt;
  &lt;/net-udev&gt;
  &lt;s390-devices config:type="list"&gt;
    &lt;listentry&gt;
      &lt;chanids&gt;0.0.0800:0.0.0801:0.0.0802&lt;/chanids&gt;
      &lt;type&gt;qeth&lt;/type&gt;
    &lt;/listentry&gt;
  &lt;/s390-devices&gt;
  &lt;routing&gt;
    &lt;ipv4_forward config:type="boolean"&gt;false&lt;/ipv4_forward&gt;
    &lt;ipv6_forward config:type="boolean"&gt;false&lt;/ipv6_forward&gt;
    &lt;routes config:type="list"&gt;
      &lt;route&gt;
        &lt;destination&gt;192.168.100.0/24&lt;/destination&gt;
        &lt;device&gt;eth1&lt;/device&gt;
        &lt;extrapara&gt;scope link src 192.168.100.100 table one&lt;/extrapara&gt;
        &lt;gateway&gt;-&lt;/gateway&gt;
      &lt;/route&gt;
      &lt;route&gt;
        &lt;destination&gt;default&lt;/destination&gt;
        &lt;device&gt;eth1&lt;/device&gt;
        &lt;gateway&gt;192.168.100.1&lt;/gateway&gt;
      &lt;/route&gt;
      &lt;route&gt;
        &lt;destination&gt;default&lt;/destination&gt;
        &lt;device&gt;lo&lt;/device&gt;
        &lt;gateway&gt;192.168.5.1&lt;/gateway&gt;
      &lt;/route&gt;
    &lt;/routes&gt;
  &lt;/routing&gt;
&lt;/networking&gt;</pre></div></div></div><p>
   As shown in the example above, the <code class="literal">&lt;networking&gt;</code>
   section can be composed of a few subsections:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <code class="literal">interfaces</code> describes the configuration of the network
     interfaces, including their IP addresses, how they are started, etc.
    </p></li><li class="listitem"><p>
     <code class="literal">dns</code> specifies DNS related settings, such as the host
     name, the list of name servers, etc.
    </p></li><li class="listitem"><p>
     <code class="literal">routing</code> defines the routing rules.
    </p></li><li class="listitem"><p>
     <code class="literal">s390-devices</code> covers z Systems-specific device settings.
    </p></li><li class="listitem"><p>
     <code class="literal">net-udev</code> enumerates the udev rules used to set
     persistent names.
    </p></li></ul></div><p>
   Additionally, there are a few elements that allow modification of how the network
   configuration is applied:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.17.4.6.1"><span class="term">backend</span></dt><dd><p>
      Selects the network back-end to be used. Supported values are
      <code class="literal">wicked</code>, <code class="literal">network_manager</code> or
      <code class="literal">none</code>, the latter of which will disable the network
      service.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;backend&gt;network_manager&lt;/backend&gt;</pre></div></dd><dt id="id-1.7.5.2.17.4.6.2"><span class="term">keep_install_network</span></dt><dd><p>
      As described in <a class="xref" href="#CreateProfile-Network-Workflow" title="4.12.1. Configuration Workflow">Section 4.12.1, “Configuration Workflow”</a>, by
      default, AutoYaST merges the network configuration from the running system
      with the one defined in the profile. If you want to use only the
      configuration from the profile, set this element to
      <code class="literal">false</code>. The value is <code class="literal">true</code> by
      default.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;keep_install_network config:type="boolean"&gt;false&lt;/keep_install_network&gt;</pre></div></dd><dt id="id-1.7.5.2.17.4.6.3"><span class="term">managed</span></dt><dd><p>
      Determines whether to use NetworkManager instead of Wicked.
     </p><p>
      Deprecated. Use <code class="literal">backend</code> instead.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;managed config:type="boolean"&gt;true&lt;/managed&gt;</pre></div></dd><dt id="id-1.7.5.2.17.4.6.4"><span class="term">start_immediately</span></dt><dd><p>
      Forces AutoYaST to restart the network just after writing the configuration.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;start_immediately config:type="boolean"&gt;true&lt;/start_immediately&gt;</pre></div></dd><dt id="id-1.7.5.2.17.4.6.5"><span class="term">setup_before_proposal</span></dt><dd><p>
      Use the network configuration defined in the profile during the
      installation process. Otherwise, AutoYaST relies on the configuration set by
      <code class="command">linuxrc</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;setup_before_proposal config:type="boolean"&gt;true&lt;/setup_before_proposal&gt;</pre></div></dd><dt id="id-1.7.5.2.17.4.6.6"><span class="term">strict_IP_check_timeout</span></dt><dd><p>
      After setting up the network, AutoYaST checks whether the assigned IP address
      is duplicated. In that case, it shows a warning whose timeout in seconds
      is controlled by this element. If it is set to <code class="literal">0</code>, the
      installation is stopped.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;strict_IP_check_timeout config:type="integer"&gt;5&lt;/strict_IP_check_timeout&gt;</pre></div></dd><dt id="id-1.7.5.2.17.4.6.7"><span class="term">virt_bridge_proposal</span></dt><dd><p>
      AutoYaST configures a bridge when a virtualization package is selected to be
      installed (for example, Xen, QEMU or KVM). You can disable this behavior by
      setting this element to <code class="literal">false</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;virt_bridge_proposal config:type="boolean"&gt;false&lt;/virt_bridge_proposal&gt;</pre></div></dd></dl></div><div id="id-1.7.5.2.17.4.7" data-id-title="IPv6 address support" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: IPv6 address support</div><p>
    Using IPv6 addresses in AutoYaST is fully supported. To disable IPv6 Address
    Support, set &lt;ipv6 config:type="boolean"&gt;false&lt;/ipv6&gt;
   </p></div></section><section class="sect2" id="CreateProfile-Network-Interfaces" data-id-title="Interfaces"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.12.3 </span><span class="title-name">Interfaces</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Network-Interfaces">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <code class="literal">interfaces</code> section allows the user to define the
   configuration of interfaces, including how they are started, their IP
   addresses, networks, and more. The following elements must be enclosed in
   <code class="literal">&lt;interfaces&gt;...&lt;/interfaces&gt;</code> tags.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.17.5.3.1"><span class="term"><code class="literal">bootproto</code></span></dt><dd><p>
      Boot protocol used by the interface. Possible values:
     </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        <code class="literal">static</code> for statically assigned addresses. It is
        required to specify the IP using the <code class="literal">ipaddr</code> element.
       </p></li><li class="listitem"><p>
        <code class="literal">dhcp4</code>, <code class="literal">dhcp6</code> or
        <code class="literal">dhcp</code> for setting the IP address with DHCP (IPv4,
        IPv6 or any).
       </p></li><li class="listitem"><p>
        <code class="literal">dhcp+autoip</code> to get the IPv4 configuration from
        <span class="emphasis"><em>Zeroconf</em></span> and get IPv6 from DHCP.
       </p></li><li class="listitem"><p>
        <code class="literal">autoip</code> to get the IPv4 configuration from
        <span class="emphasis"><em>Zeroconf</em></span>.
       </p></li><li class="listitem"><p>
        <code class="literal">ibft</code> to get the IP address using the iBFT protocol.
       </p></li><li class="listitem"><p>
        <code class="literal">none</code> to skip setting an address. This value is used
        for bridges and bonding ports.
       </p></li></ul></div><p>
      Required.
     </p></dd><dt id="id-1.7.5.2.17.5.3.2"><span class="term"><code class="literal">broadcast</code></span></dt><dd><p>
      Broadcast IP address.
     </p><p>
      Used only with <code class="literal">static</code> boot protocol.
     </p></dd><dt id="id-1.7.5.2.17.5.3.3"><span class="term"><code class="literal">device</code></span></dt><dd><p>
      Device name.
     </p><p>
      Deprecated. Use <code class="literal">name</code> instead.
     </p></dd><dt id="id-1.7.5.2.17.5.3.4"><span class="term"><code class="literal">name</code></span></dt><dd><p>
      Device name, for example: <code class="literal">eth0</code>.
     </p><p>
      Required.
     </p></dd><dt id="id-1.7.5.2.17.5.3.5"><span class="term"><code class="literal">lladdr</code></span></dt><dd><p>
      Link layer address (MAC address).
     </p><p>
      Optional.
     </p></dd><dt id="id-1.7.5.2.17.5.3.6"><span class="term"><code class="literal">ipaddr</code></span></dt><dd><p>
      IP address assigned to the interface.
     </p><p>
      Used only with <code class="literal">static</code> boot protocol. It can include a
      network prefix, for example: <code class="literal">192.168.1.1/24</code>.
     </p></dd><dt id="id-1.7.5.2.17.5.3.7"><span class="term"><code class="literal">remote_ipaddr</code></span></dt><dd><p>
      Remote IP address for point-to-point connections.
     </p><p>
      Used only with <code class="literal">static</code> boot protocol.
     </p></dd><dt id="id-1.7.5.2.17.5.3.8"><span class="term"><code class="literal">netmask</code></span></dt><dd><p>
      Network mask, for example: <code class="literal">255.255.255.0</code>.
     </p><p>
      Deprecated. Use <code class="literal">prefixlen</code> instead or include the
      network prefix in the <code class="literal">ipaddr</code> element.
     </p></dd><dt id="id-1.7.5.2.17.5.3.9"><span class="term"><code class="literal">network</code></span></dt><dd><p>
      Network IP address.
     </p><p>
      Deprecated. Use <code class="literal">ipaddr</code> with
      <code class="literal">prefixlen</code> instead.
     </p></dd><dt id="id-1.7.5.2.17.5.3.10"><span class="term"><code class="literal">prefixlen</code></span></dt><dd><p>
      Network prefix, for example: <code class="literal">24</code>.
     </p><p>
      Used only with <code class="literal">static</code> boot protocol.
     </p></dd><dt id="id-1.7.5.2.17.5.3.11"><span class="term"><code class="literal">startmode</code></span></dt><dd><p>
      When to bring up an interface. Possible values are:
     </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        <code class="literal">hotplug</code> when the device is plugged in. Useful for
        USB network cards, for example.
       </p></li><li class="listitem"><p>
        <code class="literal">auto</code> when the system boots.
        <code class="literal">onboot</code> is a deprecated alias.
       </p></li><li class="listitem"><p>
        <code class="literal">ifplugd</code> when the device is managed by the
        <code class="literal">ifplugd</code> daemon.
       </p></li><li class="listitem"><p>
        <code class="literal">manual</code> when the device is supposed to be started
        manually.
       </p></li><li class="listitem"><p>
        <code class="literal">nfsroot</code> when the device is needed to mount the root
        file system, for example, when <code class="literal">/</code> is on an NFS
        volume.
       </p></li><li class="listitem"><p>
        <code class="literal">off</code> to never start the device.
       </p></li></ul></div></dd><dt id="id-1.7.5.2.17.5.3.12"><span class="term"><code class="literal">ifplugd_priority</code></span></dt><dd><p>
      Priority for <code class="literal">ifplugd</code> daemon. It determines in which
      order the devices are activated.
     </p><p>
      Used only with <code class="literal">ifplugd</code> start mode.
     </p></dd><dt id="id-1.7.5.2.17.5.3.13"><span class="term"><code class="literal">usercontrol</code></span></dt><dd><p>
      Parameter is no longer used.
     </p><p>
      Deprecated.
     </p></dd><dt id="id-1.7.5.2.17.5.3.14"><span class="term"><code class="literal">bonding_slaveX</code></span></dt><dd><p>
      Name of the bonding device.
     </p><p>
      Required for bonding devices. <code class="literal">X</code> is replaced by a
      number starting from 0, for example <code class="literal">bonding_slave0</code>.
      Each port needs to have a unique number.
     </p></dd><dt id="id-1.7.5.2.17.5.3.15"><span class="term"><code class="literal">bonding_module_opts</code></span></dt><dd><p>
      Options for bonding device.
     </p><p>
      Used only with <code class="literal">bond</code> device.
     </p></dd><dt id="id-1.7.5.2.17.5.3.16"><span class="term"><code class="literal">mtu</code></span></dt><dd><p>
      Maximum transmission unit for the interface.
     </p><p>
      Optional.
     </p></dd><dt id="id-1.7.5.2.17.5.3.17"><span class="term"><code class="literal">ethtool_options</code></span></dt><dd><p>
      Ethtool options during device activation.
     </p><p>
      Optional.
     </p></dd><dt id="id-1.7.5.2.17.5.3.18"><span class="term"><code class="literal">zone</code></span></dt><dd><p>
      Firewall zone name which the interface is assigned to.
     </p><p>
      Optional.
     </p></dd><dt id="id-1.7.5.2.17.5.3.19"><span class="term"><code class="literal">vlan_id</code></span></dt><dd><p>
      Identifier used for this VLAN.
     </p><p>
      Used only with a <code class="literal">vlan</code> device.
     </p></dd><dt id="id-1.7.5.2.17.5.3.20"><span class="term"><code class="literal">etherdevice</code></span></dt><dd><p>
      Device to which VLAN is attached.
     </p><p>
      Used only with a <code class="literal">vlan</code> device and required for it.
     </p></dd><dt id="id-1.7.5.2.17.5.3.21"><span class="term"><code class="literal">bridge</code></span></dt><dd><p>
      <code class="literal">yes</code> if interface is a bridge.
     </p><p>
      Deprecated. It is inferred from other attributes.
     </p></dd><dt id="id-1.7.5.2.17.5.3.22"><span class="term"><code class="literal">bridge_ports</code></span></dt><dd><p>
      Space-separated list of bridge ports, for example, <code class="literal">eth0
      eth1</code>.
     </p><p>
      Used only with a <code class="literal">bridge</code> device and required for it.
     </p></dd><dt id="id-1.7.5.2.17.5.3.23"><span class="term"><code class="literal">bridge_stp</code></span></dt><dd><p>
      Spanning tree protocol. Possible values are <code class="literal">on</code> (when
      enabled) and <code class="literal">off</code> (when disabled).
     </p><p>
      Used only with a <code class="literal">bridge</code> device.
     </p></dd><dt id="id-1.7.5.2.17.5.3.24"><span class="term"><code class="literal">bridge_forward_delay</code></span></dt><dd><p>
      Forward delay for bridge, for example: <code class="literal">15</code>.
     </p><p>
      Used only with <code class="literal">bridge</code> devices. Valid values are
      between <code class="literal">4</code> and <code class="literal">30</code>.
     </p></dd><dt id="id-1.7.5.2.17.5.3.25"><span class="term"><code class="literal">aliases</code></span></dt><dd><p>
      Additional IP addresses. See
      <a class="xref" href="#CreateProfile-Network-Aliases" title="4.12.4. Assigning multiple IP addresses">Section 4.12.4, “Assigning multiple IP addresses”</a>.
     </p></dd></dl></div><div class="example" id="ex-ay-network-config-bond" data-id-title="Bonding interface configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.39: </span><span class="title-name">Bonding interface configuration </span></span><a title="Permalink" class="permalink" href="#ex-ay-network-config-bond">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;networking&gt;
  &lt;setup_before_proposal config:type="boolean"&gt;false&lt;/setup_before_proposal&gt;
  &lt;keep_install_network config:type="boolean"&gt;false&lt;/keep_install_network&gt;
  &lt;interfaces config:type="list"&gt;
    &lt;interface&gt;
      &lt;bonding_master&gt;yes&lt;/bonding_master&gt;
      &lt;bonding_module_opts&gt;mode=active-backup miimon=100&lt;/bonding_module_opts&gt;
      &lt;bonding_slave0&gt;eth1&lt;/bonding_slave0&gt;
      &lt;bonding_slave1&gt;eth2&lt;/bonding_slave1&gt;
      &lt;bootproto&gt;static&lt;/bootproto&gt;
      &lt;name&gt;bond0&lt;/name&gt;
      &lt;ipaddr&gt;192.168.1.61&lt;/ipaddr&gt;
      &lt;prefixlen&gt;24&lt;/prefixlen&gt;
      &lt;startmode&gt;auto&lt;/startmode&gt;
    &lt;/interface&gt;
    &lt;interface&gt;
      &lt;bootproto&gt;none&lt;/bootproto&gt;
      &lt;name&gt;eth1&lt;/name&gt;
      &lt;startmode&gt;auto&lt;/startmode&gt;
    &lt;/interface&gt;
    &lt;interface&gt;
      &lt;bootproto&gt;none&lt;/bootproto&gt;
      &lt;name&gt;eth2&lt;/name&gt;
      &lt;startmode&gt;auto&lt;/startmode&gt;
    &lt;/interface&gt;
  &lt;/interfaces&gt;
  &lt;net-udev config:type="list"&gt;
    &lt;rule&gt;
      &lt;name&gt;eth1&lt;/name&gt;
      &lt;rule&gt;ATTR{address}&lt;/rule&gt;
      &lt;value&gt;dc:e4:cc:27:94:c7&lt;/value&gt;
    &lt;/rule&gt;
    &lt;rule&gt;
      &lt;name&gt;eth2&lt;/name&gt;
      &lt;rule&gt;ATTR{address}&lt;/rule&gt;
      &lt;value&gt;dc:e4:cc:27:94:c8&lt;/value&gt;
    &lt;/rule&gt;
  &lt;/net-udev&gt;
&lt;/networking&gt;</pre></div></div></div><div class="example" id="ex-ay-network-config-bridge" data-id-title="Bridge interface configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.40: </span><span class="title-name">Bridge interface configuration </span></span><a title="Permalink" class="permalink" href="#ex-ay-network-config-bridge">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;interfaces config:type="list"&gt;
  &lt;interface&gt;
    &lt;name&gt;br0&lt;/name&gt;
    &lt;bootproto&gt;static&lt;/bootproto&gt;
    &lt;bridge&gt;yes&lt;/bridge&gt;
    &lt;bridge_forwarddelay&gt;0&lt;/bridge_forwarddelay&gt;
    &lt;bridge_ports&gt;eth0 eth1&lt;/bridge_ports&gt;
    &lt;bridge_stp&gt;off&lt;/bridge_stp&gt;
    &lt;ipaddr&gt;192.168.1.100&lt;/ipaddr&gt;
    &lt;prefixlen&gt;24&lt;/prefixlen&gt;
    &lt;startmode&gt;auto&lt;/startmode&gt;
  &lt;/interface&gt;
  &lt;interface&gt;
    &lt;name&gt;eth0&lt;/name&gt;
    &lt;bootproto&gt;none&lt;/bootproto&gt;
    &lt;startmode&gt;hotplug&lt;/startmode&gt;
  &lt;/interface&gt;
  &lt;interface&gt;
    &lt;name&gt;eth1&lt;/name&gt;
    &lt;bootproto&gt;none&lt;/bootproto&gt;
    &lt;startmode&gt;hotplug&lt;/startmode&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</pre></div></div></div></section><section class="sect2" id="CreateProfile-Network-Aliases" data-id-title="Assigning multiple IP addresses"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.12.4 </span><span class="title-name">Assigning multiple IP addresses</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Network-Aliases">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   AutoYaST makes it possible to assign multiple IP addresses to the same
   interface. They are specified using an <code class="literal">aliases</code> element
   that contains an <code class="literal">aliasX</code> entry for each address.
  </p><p>
   Each entry supports the following elements:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.17.6.4.1"><span class="term">IPADDR</span></dt><dd><p>
      Additional IP address. It can include a network prefix, for example:
      <code class="literal">192.168.1.1/24</code>.
     </p></dd><dt id="id-1.7.5.2.17.6.4.2"><span class="term">PREFIXLEN</span></dt><dd><p>
      Network prefix, for example: <code class="literal">24</code>.
     </p></dd><dt id="id-1.7.5.2.17.6.4.3"><span class="term">NETMASK</span></dt><dd><p>
      Netmask of the address.
     </p><p>
      Deprecated. Use <code class="literal">PREFIXLEN</code> instead or include the
      network prefix in the <code class="literal">IPADDR</code> element.
     </p></dd><dt id="id-1.7.5.2.17.6.4.4"><span class="term">LABEL</span></dt><dd><p>
      Label of the address.
     </p></dd></dl></div><div id="id-1.7.5.2.17.6.5" data-id-title="Case-sensitive elements" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Case-sensitive elements</div><p>
    Keep in mind that for historical reasons, the <code class="literal">IPADDR</code>,
    <code class="literal">PREFIXLEN</code>, <code class="literal">LABEL</code> and
    <code class="literal">NETMASK</code> elements within the <code class="literal">aliases</code>
    section are case-sensitive.
   </p></div><div class="example" id="ex-ay-network-config-aliases" data-id-title="Multiple IP Addresses"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.41: </span><span class="title-name">Multiple IP Addresses </span></span><a title="Permalink" class="permalink" href="#ex-ay-network-config-aliases">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;interfaces config:type="list"&gt;
  &lt;interface&gt;
    &lt;name&gt;br0&lt;/name&gt;
    &lt;bootproto&gt;static&lt;/bootproto&gt;
    &lt;ipaddr&gt;192.168.1.100&lt;/ipaddr&gt;
    &lt;prefixlen&gt;24&lt;/prefixlen&gt;
    &lt;startmode&gt;auto&lt;/startmode&gt;
    &lt;aliases&gt;
      &lt;alias0&gt;
        &lt;IPADDR&gt;192.168.1.101&lt;/IPADDR&gt;
        &lt;PREFIXLEN&gt;24&lt;/PREFIXLEN&gt;
        &lt;LABEL&gt;http&lt;/LABEL&gt;
      &lt;/alias0&gt;
      &lt;alias1&gt;
        &lt;IPADDR&gt;192.168.2.100&lt;/IPADDR&gt;
        &lt;PREFIXLEN&gt;24&lt;/PREFIXLEN&gt;
        &lt;LABEL&gt;extra&lt;/LABEL&gt;
      &lt;/alias1&gt;
    &lt;/aliases&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</pre></div></div></div></section><section class="sect2" id="CreateProfile-Network-names" data-id-title="Persistent names of network interfaces"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.12.5 </span><span class="title-name">Persistent names of network interfaces</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Network-names">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <code class="literal">net-udev</code> element allows to specify a set of udev
   rules that can be used to assign persistent names to interfaces.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.17.7.3.1"><span class="term">name</span></dt><dd><p>
      Network interface name, for example <code class="literal">eth3</code>. (Required.)
     </p></dd><dt id="id-1.7.5.2.17.7.3.2"><span class="term">rule</span></dt><dd><p>
      <code class="literal">ATTR{address}</code> for a MAC-based rule,
      <code class="literal">KERNELS</code> for a bus-ID-based rule. (Required.)
     </p></dd><dt id="id-1.7.5.2.17.7.3.3"><span class="term">value</span></dt><dd><p>
      For example: <code class="literal">f0:de:f1:6b:da:69</code> for a MAC rule,
      <code class="literal">0000:00:1c.1 or 0.0.0700</code> for a bus ID rule.
      (Required.)
     </p></dd></dl></div><div id="id-1.7.5.2.17.7.4" data-id-title="Handling collisions in device names" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Handling collisions in device names</div><p>
    When creating an incomplete <span class="emphasis"><em>udev</em></span> rule set, the chosen
    device name can collide with existing device names. For example, when
    renaming a network interface to <code class="literal">eth0</code>, a collision with a
    device automatically generated by the kernel can occur. AutoYaST tries to
    handle such cases in a best effort manner and renames colliding devices.
   </p></div><div class="example" id="id-1.7.5.2.17.7.5" data-id-title="Assigning a persistent name using the MAC address"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.42: </span><span class="title-name">Assigning a persistent name using the MAC address </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.17.7.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;net-udev config:type="list"&gt;
  &lt;rule&gt;
  &lt;name&gt;eth1&lt;/name&gt;
  &lt;rule&gt;ATTR{address}&lt;/rule&gt;
  &lt;value&gt;52:54:00:68:54:fb&lt;/value&gt;
  &lt;/rule&gt;
&lt;/net-udev&gt;</pre></div></div></div></section><section class="sect2" id="CreateProfile-Network-DNS" data-id-title="Domain name system"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.12.6 </span><span class="title-name">Domain name system</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Network-DNS">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <code class="literal">dns</code> section is used to define name-service related
   settings, such as the host name or name servers.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.17.8.3.1"><span class="term">hostname</span></dt><dd><p>
      Host name, excluding the domain name part. For example:
      <em class="replaceable">foo</em> instead of
      <em class="replaceable">foo.bar</em>. The Linux kernel allows you to use
      the fully qualified domain name (FQDN) in place of the host name, and so
      does YaST. However, this is not the correct usage in the dns section of
      YaST. The resolver should determine the FQDN. (See "THE FQDN" section
      of <code class="command">man 1 hostname</code> for information on how FQDNs are
      resolved.)
     </p><p>
      If a host name is not specified and is not taken from a DHCP server (see
      <code class="literal">dhcp_hostname</code>), AutoYaST will generate a random host name.
     </p></dd><dt id="id-1.7.5.2.17.8.3.2"><span class="term">nameservers</span></dt><dd><p>
      List of name servers. Example:
     </p><div class="verbatim-wrap"><pre class="screen">&lt;nameservers config:type="list"&gt;
  &lt;nameserver&gt;192.168.1.116&lt;/nameserver&gt;
  &lt;nameserver&gt;192.168.1.117&lt;/nameserver&gt;
&lt;/nameservers&gt;</pre></div></dd><dt id="id-1.7.5.2.17.8.3.3"><span class="term">searchlist</span></dt><dd><p>
      Search list for host name lookup.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;searchlist config:type="list"&gt;
  &lt;search&gt;example.com&lt;/search&gt;
&lt;/searchlist&gt;</pre></div><p>
      Optional.
     </p></dd><dt id="id-1.7.5.2.17.8.3.4"><span class="term">dhcp_hostname</span></dt><dd><p>
      Specifies whether the host name must be taken from DHCP or not.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;dhcp_hostname config:type="boolean"&gt;true&lt;/dhcp_hostname&gt;</pre></div></dd></dl></div></section><section class="sect2" id="CreateProfile-Network-Routing" data-id-title="Routing"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.12.7 </span><span class="title-name">Routing</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Network-Routing">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <code class="literal">routing</code> table allows specification of a list of
   routes and the packet-forwarding settings for IPv4 and IPv6.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.17.9.3.1"><span class="term">ipv4_forward</span></dt><dd><p>
      Optional: Whether IP forwarding must be enabled for IPv4.
     </p></dd><dt id="id-1.7.5.2.17.9.3.2"><span class="term">ipv6_forward</span></dt><dd><p>
      Optional: Whether IP forwarding must be enabled for IPv6.
     </p></dd><dt id="id-1.7.5.2.17.9.3.3"><span class="term">routes</span></dt><dd><p>
      Optional: List of routes.
     </p></dd></dl></div><p>
   The following settings describe how routes are defined.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.17.9.5.1"><span class="term">destination</span></dt><dd><p>
      Required: Route destination. An address prefix can be specified, for
      example: <code class="literal">192.168.122.0/24</code>.
     </p><p>
      The heading <code class="literal">default</code> can be used to indicate that the
      route is the default gateway in the same address family (IPv4 or
      IPv6) as the gateway.
     </p></dd><dt id="id-1.7.5.2.17.9.5.2"><span class="term">device</span></dt><dd><p>
      Required: Interface associated to the route.
     </p></dd><dt id="id-1.7.5.2.17.9.5.3"><span class="term">gateway</span></dt><dd><p>
      Optional: Gateway's IP address.
     </p></dd><dt id="id-1.7.5.2.17.9.5.4"><span class="term">netmask</span></dt><dd><p>
      (Deprecated.) Destination's netmask.
     </p><p>
      Specifying the prefix as part of the <code class="literal">destination</code> value
      is preferred.
     </p></dd><dt id="id-1.7.5.2.17.9.5.5"><span class="term">extrapara</span></dt><dd><p>
      Optional: Further route options like <code class="literal">metric</code>,
      <code class="literal">mtu</code> or <code class="literal">table</code>.
     </p></dd></dl></div><div class="example" id="ex-ay-network-routing" data-id-title="Network routing configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.43: </span><span class="title-name">Network routing configuration </span></span><a title="Permalink" class="permalink" href="#ex-ay-network-routing">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;routing&gt;
  &lt;ipv4_forward config:type="boolean"&gt;true&lt;/ipv4_forward&gt;
  &lt;ipv6_forward config:type="boolean"&gt;true&lt;/ipv6_forward&gt;
  &lt;routes config:type="list"&gt;
    &lt;route&gt;
      &lt;destination&gt;192.168.100.0/24&lt;/destination&gt;
      &lt;device&gt;eth1&lt;/device&gt;
      &lt;extrapara&gt;scope link src 192.168.100.100 table one&lt;/extrapara&gt;
    &lt;/route&gt;
    &lt;route&gt;
      &lt;destination&gt;default&lt;/destination&gt;
      &lt;device&gt;eth1&lt;/device&gt;
      &lt;gateway&gt;192.168.100.1&lt;/gateway&gt;
    &lt;/route&gt;
    &lt;route&gt;
      &lt;destination&gt;default&lt;/destination&gt;
      &lt;device&gt;lo&lt;/device&gt;
      &lt;gateway&gt;192.168.5.1&lt;/gateway&gt;
    &lt;/route&gt;
  &lt;/routes&gt;
&lt;/routing&gt;</pre></div></div></div></section><section class="sect2" id="CreateProfile-Network-s390" data-id-title="s390 options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.12.8 </span><span class="title-name">s390 options</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Network-s390">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_networking.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The following elements must be between the
   &lt;<code class="literal">s390-devices</code>&gt;...
   &lt;/<code class="literal">s390-devices</code>&gt; tags.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.17.10.3.1"><span class="term">type</span></dt><dd><p>
      <code class="literal">qeth</code>, <code class="literal">ctc</code> or
      <code class="literal">iucv</code>.
     </p></dd><dt id="id-1.7.5.2.17.10.3.2"><span class="term">chanids</span></dt><dd><p>
      channel IDs, separated by a colon (preferred) or a space
     </p><div class="verbatim-wrap"><pre class="screen">&lt;chanids&gt;0.0.0700:0.0.0701:0.0.0702&lt;/chanids&gt;</pre></div></dd><dt id="id-1.7.5.2.17.10.3.3"><span class="term">layer2</span></dt><dd><div class="verbatim-wrap"><pre class="screen">&lt;layer2 config:type="boolean"&gt;true&lt;/layer2&gt;</pre></div><p>
      boolean; default: <code class="literal">false</code>
     </p></dd><dt id="id-1.7.5.2.17.10.3.4"><span class="term">portname</span></dt><dd><p>
      QETH port name (deprecated since SLE 12 SP2)
     </p></dd><dt id="id-1.7.5.2.17.10.3.5"><span class="term">protocol</span></dt><dd><p>
      Optional: CTC / LCS protocol, a small number (as a string)
     </p><div class="verbatim-wrap"><pre class="screen">&lt;protocol&gt;1&lt;/protocol&gt;</pre></div></dd><dt id="id-1.7.5.2.17.10.3.6"><span class="term">router</span></dt><dd><p>
      IUCV router/user
     </p></dd></dl></div><p>
   In addition to the options mentioned above, AutoYaST also supports
   IBM Z-specific options in other sections of the configuration file. In
   particular, you can define the logical link address, or LLADDR (in the case
   of Ethernet, that is the MAC address). To do so, use the option
   <code class="literal">LLADDR</code> in the device definition.
  </p><div id="id-1.7.5.2.17.10.5" data-id-title="LLADDR for VLANs" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: LLADDR for VLANs</div><p>
    VLAN devices inherit their LLADDR from the underlying physical devices. To
    set a particular address for a VLAN device, set the LLADDR option for the
    underlying physical device.
   </p></div></section></section><section class="sect1" id="Configuration-Network-Proxy" data-id-title="Proxy"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.13 </span><span class="title-name">Proxy</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-Proxy">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Configure your Internet proxy (caching) settings.
 </p><p>
  Configure proxies for HTTP, HTTPS, and FTP with
  <code class="literal">http_proxy</code>, <code class="literal">https_proxy</code> and
  <code class="literal">ftp_proxy</code>, respectively. Addresses or names that should be
  directly accessible need to be specified with <code class="literal">no_proxy</code>
  (space separated values). If you are using a proxy server with authorization,
  fill in <code class="literal">proxy_user</code> and <code class="literal">proxy_password</code>,
 </p><div class="example" id="id-1.7.5.2.18.5" data-id-title="Network configuration: proxy"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.44: </span><span class="title-name">Network configuration: proxy </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.18.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_proxy.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;proxy&gt;
  &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
  &lt;ftp_proxy&gt;http://192.168.1.240:3128&lt;/ftp_proxy&gt;
  &lt;http_proxy&gt;http://192.168.1.240:3128&lt;/http_proxy&gt;
  &lt;no_proxy&gt;www.example.com .example.org localhost&lt;/no_proxy&gt;
  &lt;proxy_password&gt;testpw&lt;/proxy_password&gt;
  &lt;proxy_user&gt;testuser&lt;/proxy_user&gt;
&lt;/proxy&gt;</pre></div></div></div><div id="id-1.7.5.2.18.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
   The proxy settings will be written during the installation when the
   network configuration is forced to be written before the proposal, or
   when the proxy settings are given through <code class="command">linuxrc</code>.
  </p></div></section><section class="sect1" id="Configuration-Network-NIS" data-id-title="NIS client and server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.14 </span><span class="title-name">NIS client and server</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-NIS">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_nis_client.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Using the <code class="literal">nis</code> resource, you can configure the target
    machine as a NIS client. The following example shows a detailed
    configuration using multiple domains.
   </p><div class="example" id="id-1.7.5.2.19.4" data-id-title="Network configuration: NIS"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.45: </span><span class="title-name">Network configuration: NIS </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.19.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_nis_client.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"> &lt;nis&gt;
  &lt;nis_broadcast config:type="boolean"&gt;true&lt;/nis_broadcast&gt;
  &lt;nis_broken_server config:type="boolean"&gt;true&lt;/nis_broken_server&gt;
  &lt;nis_domain&gt;test.com&lt;/nis_domain&gt;
  &lt;nis_local_only config:type="boolean"&gt;true&lt;/nis_local_only&gt;
  &lt;nis_options&gt;&lt;/nis_options&gt;
  &lt;nis_other_domains config:type="list"&gt;
    &lt;nis_other_domain&gt;
      &lt;nis_broadcast config:type="boolean"&gt;false&lt;/nis_broadcast&gt;
      &lt;nis_domain&gt;domain.com&lt;/nis_domain&gt;
      &lt;nis_servers config:type="list"&gt;
        &lt;nis_server&gt;10.10.0.1&lt;/nis_server&gt;
      &lt;/nis_servers&gt;
    &lt;/nis_other_domain&gt;
  &lt;/nis_other_domains&gt;
  &lt;nis_servers config:type="list"&gt;
    &lt;nis_server&gt;192.168.1.1&lt;/nis_server&gt;
  &lt;/nis_servers&gt;
  &lt;start_autofs config:type="boolean"&gt;true&lt;/start_autofs&gt;
  &lt;start_nis config:type="boolean"&gt;true&lt;/start_nis&gt;
&lt;/nis&gt;</pre></div></div></div></section><section class="sect1" id="Configuration-Network-NIS-Server" data-id-title="NIS server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.15 </span><span class="title-name">NIS server</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-NIS-Server">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_nis_server.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can configure the target machine as a NIS server.
    NIS Master Server and NIS Worker Server and a combination of both are available.
   </p><div class="example" id="id-1.7.5.2.20.4" data-id-title="NIS server configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.46: </span><span class="title-name">NIS server configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.20.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_nis_server.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;nis_server&gt;
    &lt;domain&gt;mydomain.de&lt;/domain&gt;
    &lt;maps_to_serve config:type="list"&gt;
      &lt;nis_map&gt;auto.master&lt;/nis_map&gt;
      &lt;nis_map&gt;ethers&lt;/nis_map&gt;
    &lt;/maps_to_serve&gt;
    &lt;merge_passwd config:type="boolean"&gt;false&lt;/merge_passwd&gt;
    &lt;mingid config:type="integer"&gt;0&lt;/mingid&gt;
    &lt;minuid config:type="integer"&gt;0&lt;/minuid&gt;
    &lt;nopush config:type="boolean"&gt;false&lt;/nopush&gt;
    &lt;pwd_chfn config:type="boolean"&gt;false&lt;/pwd_chfn&gt;
    &lt;pwd_chsh config:type="boolean"&gt;false&lt;/pwd_chsh&gt;
    &lt;pwd_srcdir&gt;/etc&lt;/pwd_srcdir&gt;
    &lt;securenets config:type="list"&gt;
      &lt;securenet&gt;
        &lt;netmask&gt;255.0.0.0&lt;/netmask&gt;
        &lt;network&gt;127.0.0.0&lt;/network&gt;
      &lt;/securenet&gt;
    &lt;/securenets&gt;
    &lt;server_type&gt;master&lt;/server_type&gt;
    &lt;slaves config:type="list"/&gt;
    &lt;start_ypbind config:type="boolean"&gt;false&lt;/start_ypbind&gt;
    &lt;start_yppasswdd config:type="boolean"&gt;false&lt;/start_yppasswdd&gt;
    &lt;start_ypxfrd config:type="boolean"&gt;false&lt;/start_ypxfrd&gt;
  &lt;/nis_server&gt;</pre></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Attribute, Values, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.20.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_nis_server.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.20.5.2"><span class="term">
      <code class="literal">domain</code>
    </span></dt><dd><p>
         NIS domain name.
        </p></dd><dt id="id-1.7.5.2.20.5.3"><span class="term">
      <code class="literal">maps_to_serve</code>
    </span></dt><dd><p>
         List of maps which are available for the server.
        </p><p>
        Values: auto.master, ethers, group, hosts, netgrp, networks, passwd, protocols, rpc, services, shadow
        </p></dd><dt id="id-1.7.5.2.20.5.4"><span class="term">
      <code class="literal">merge_passwd</code>
    </span></dt><dd><p>
         Select if your passwd file should be merged with the shadow file (only possible if the shadow file exists).
        </p><p>
         Value: true/false
        </p></dd><dt id="id-1.7.5.2.20.5.5"><span class="term">
      <code class="literal">mingid</code>
    </span></dt><dd><p>
         Minimum GID to include in the user maps.
        </p></dd><dt id="id-1.7.5.2.20.5.6"><span class="term">
      <code class="literal">minuid</code>
    </span></dt><dd><p>
         Minimum UID to include in the user maps.
        </p></dd><dt id="id-1.7.5.2.20.5.7"><span class="term">
      <code class="literal">nopush</code>
    </span></dt><dd><p>
         Do not push the changes to worker servers. (Useful if there are none).
        </p><p>
         Value: true/false
        </p></dd><dt id="id-1.7.5.2.20.5.8"><span class="term">
      <code class="literal">pwd_chfn</code>
    </span></dt><dd><p>
         YPPWD_CHFN - allow changing the full name
        </p><p>
         Value: true/false
        </p></dd><dt id="id-1.7.5.2.20.5.9"><span class="term">
      <code class="literal">pwd_chsh</code>
    </span></dt><dd><p>
         YPPWD_CHSH - allow changing the login shell
        </p><p>
         Value: true/false
        </p></dd><dt id="id-1.7.5.2.20.5.10"><span class="term">
      <code class="literal">pwd_srcdir</code>
    </span></dt><dd><p>
         YPPWD_SRCDIR - source directory for passwd data
        </p><p>
         Default: <code class="filename">/etc</code></p></dd><dt id="id-1.7.5.2.20.5.11"><span class="term">
      <code class="literal">securenets</code>
    </span></dt><dd><p>
         List of allowed hosts to query the NIS server
        </p><p>
         A host address will be allowed if network is equal to the bitwise
         AND of the host's address and the netmask.
        </p><p>
         The entry with netmask 255.0.0.0 and network 127.0.0.0 must exist
         to allow connections from the local host.
        </p><p>
         Entering netmask 0.0.0.0 and network 0.0.0.0 gives access to all hosts.
        </p></dd><dt id="id-1.7.5.2.20.5.12"><span class="term">
      <code class="literal">server_type</code>
    </span></dt><dd><p>
         Select whether to configure the NIS server as a master or a worker or not to configure a NIS server.
        </p><p>
         Values: master, slave, none
        </p></dd><dt id="id-1.7.5.2.20.5.13"><span class="term">
      <code class="literal">slaves</code>
    </span></dt><dd><p>
         List of host names to configure as NIS server workers.
        </p></dd><dt id="id-1.7.5.2.20.5.14"><span class="term">
      <code class="literal">start_ypbind</code>
    </span></dt><dd><p>
         This host is also a NIS client (only when client is configured locally).
        </p><p>
         Value: true/false
        </p></dd><dt id="id-1.7.5.2.20.5.15"><span class="term">
      <code class="literal">start_yppasswdd</code>
    </span></dt><dd><p>
         Also start the password daemon.
        </p><p>
         Value: true/false
        </p></dd><dt id="id-1.7.5.2.20.5.16"><span class="term">
      <code class="literal">start_ypxfrd</code>
    </span></dt><dd><p>
         Also start the map transfer daemon. Fast Map distribution; it will speed up the transfer of maps to the workers.
        </p><p>
         Value: true/false
        </p></dd></dl></div></section><section class="sect1" id="Configuration-Network-Host" data-id-title="Hosts definition"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.16 </span><span class="title-name">Hosts definition</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-Host">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_hosts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Using the <code class="literal">host</code> resource, you can add more entries to
     the <code class="literal">/etc/hosts</code> file. Already existing entries will not be
     deleted. The following example shows details.
   </p><div class="example" id="id-1.7.5.2.21.4" data-id-title="/etc/hosts"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.47: </span><span class="title-name">/etc/hosts </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.21.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_hosts.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">    &lt;host&gt;
     &lt;hosts config:type="list"&gt;
      &lt;hosts_entry&gt;
       &lt;host_address&gt;133.3.0.1&lt;/host_address&gt;
       &lt;names config:type="list"&gt;
        &lt;name&gt;booking&lt;/name&gt;
       &lt;/names&gt;
      &lt;/hosts_entry&gt;
      &lt;hosts_entry&gt;
       &lt;host_address&gt;133.3.0.5&lt;/host_address&gt;
       &lt;names config:type="list"&gt;
        &lt;name&gt;test-machine&lt;/name&gt;
       &lt;/names&gt;
      &lt;/hosts_entry&gt;
     &lt;/hosts&gt;
    &lt;/host&gt;</pre></div></div></div></section><section class="sect1" id="Configuration-Network-Samba-client" data-id-title="Windows domain membership"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.17 </span><span class="title-name">Windows domain membership</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-Samba-client">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_windows_domain_client.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Using the <code class="literal">samba-client</code> resource, you can configure
    membership of a workgroup, NT domain, or Active Directory domain.
   </p><div class="example" id="id-1.7.5.2.22.4" data-id-title="Samba client configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.48: </span><span class="title-name">Samba client configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.22.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_windows_domain_client.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;samba-client&gt;
    &lt;disable_dhcp_hostname config:type="boolean"&gt;true&lt;/disable_dhcp_hostname&gt;
    &lt;global&gt;
      &lt;security&gt;domain&lt;/security&gt;
      &lt;usershare_allow_guests&gt;No&lt;/usershare_allow_guests&gt;
      &lt;usershare_max_shares&gt;100&lt;/usershare_max_shares&gt;
      &lt;workgroup&gt;WORKGROUP&lt;/workgroup&gt;
    &lt;/global&gt;
    &lt;winbind config:type="boolean"&gt;false&lt;/winbind&gt;
  &lt;/samba-client&gt;</pre></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Attribute, Values, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.22.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_windows_domain_client.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.22.5.2"><span class="term">
      <code class="literal">disable_dhcp_hostname</code>
    </span></dt><dd><p>
         Do not allow DHCP to change the host name.
        </p><p>
        Value: true/false
        </p></dd><dt id="id-1.7.5.2.22.5.3"><span class="term">
      <code class="literal">global/security</code>
    </span></dt><dd><p>
         Kind of authentication regime (domain technology or Active Directory server (ADS)).
        </p><p>
        Value: ADS/domain
        </p></dd><dt id="id-1.7.5.2.22.5.4"><span class="term">
      <code class="literal">global/usershare_allow_guests</code>
    </span></dt><dd><p>
         Sharing guest access is allowed.
        </p><p>
        Value: No/Yes
        </p></dd><dt id="id-1.7.5.2.22.5.5"><span class="term">
      <code class="literal">global/usershare_max_shares</code>
    </span></dt><dd><p>
         Max. number of shares from <code class="filename">smb.conf</code>.
        </p><p>
         0 means that shares are not enabled.
        </p></dd><dt id="id-1.7.5.2.22.5.6"><span class="term">
      <code class="literal">global/workgroup</code>
    </span></dt><dd><p>
         Workgroup or domain name.
        </p></dd><dt id="id-1.7.5.2.22.5.7"><span class="term">
      <code class="literal">winbind</code>
    </span></dt><dd><p>
         Using winbind.
        </p><p>
         Value: true/false
        </p></dd></dl></div></section><section class="sect1" id="Configuration-Network-Samba-server" data-id-title="Samba server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.18 </span><span class="title-name">Samba server</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-Samba-server">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_samba_server.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Configuration of a simple Samba server.
   </p><div class="example" id="id-1.7.5.2.23.4" data-id-title="Samba server configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.49: </span><span class="title-name">Samba server configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.23.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_samba_server.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;samba-server&gt;
    &lt;accounts config:type="list"/&gt;
    &lt;backend/&gt;
    &lt;config config:type="list"&gt;
      &lt;listentry&gt;
        &lt;name&gt;global&lt;/name&gt;
        &lt;parameters&gt;
          &lt;security&gt;domain&lt;/security&gt;
          &lt;usershare_allow_guests&gt;No&lt;/usershare_allow_guests&gt;
          &lt;usershare_max_shares&gt;100&lt;/usershare_max_shares&gt;
          &lt;workgroup&gt;WORKGROUP&lt;/workgroup&gt;
        &lt;/parameters&gt;
      &lt;/listentry&gt;
    &lt;/config&gt;
    &lt;service&gt;Disabled&lt;/service&gt;
    &lt;trustdom/&gt;
    &lt;version&gt;2.11&lt;/version&gt;
  &lt;/samba-server&gt;</pre></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Attribute, Values, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.23.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_samba_server.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.23.5.2"><span class="term">accounts</span></dt><dd><p>
       List of Samba accounts.
      </p></dd><dt id="id-1.7.5.2.23.5.3"><span class="term">backend</span></dt><dd><p>
       List of available back-ends.
      </p><p>
        Value: <code class="literal">true</code>/<code class="literal">false</code>.
       </p></dd><dt id="id-1.7.5.2.23.5.4"><span class="term">config</span></dt><dd><p>
       Setting additional user-defined parameters in
       <code class="filename">/etc/samba/smb.conf</code>.
      </p><p>
       The example shows parameters in the <code class="literal">global</code> section of
       <code class="filename">/etc/samba/smb.conf</code>.
      </p></dd><dt id="id-1.7.5.2.23.5.5"><span class="term">service</span></dt><dd><p>
       Samba service starts during boot.
      </p><p>
       Value: <code class="literal">Enabled</code>/<code class="literal">Disabled</code>.
      </p></dd><dt id="id-1.7.5.2.23.5.6"><span class="term">trustdom/</span></dt><dd><p>
        Trusted Domains.
       </p><p>
        A map of two maps (keys: <code class="literal">establish, revoke</code>). Each
        map contains entries in the format <code class="literal">key: domainname</code>
        <code class="literal">value: password</code>.
       </p></dd><dt id="id-1.7.5.2.23.5.7"><span class="term">version</span></dt><dd><p>
       Samba version.
      </p><p>
        Default: 2.11.
       </p></dd></dl></div></section><section class="sect1" id="Configuration-Network-Auth" data-id-title="Authentication client"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.19 </span><span class="title-name">Authentication client</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-Auth">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auth_client.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The configuration file must be in the JSON format. 
  Verify that both <span class="package">autoyast2</span> and 
  <span class="package">autoyast2-installation</span> are installed.
  Use the <span class="guimenu">Autoinstallation Configuration</span> module 
  in YaST to generate a valid JSON configuration file.  
  Launch YaST and switch to the
  <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation
  Configuration</span>. Choose <span class="guimenu">Network
  Services</span> › <span class="guimenu">User Logon Management</span>,
  click <span class="guimenu">Edit</span>, and configure the available settings. Click
  <span class="guimenu">OK</span> when done. To save the generated configuration file,
  use
  <span class="guimenu">File</span> › <span class="guimenu">Save</span>.
 </p><div id="id-1.7.5.2.24.4" data-id-title="Using ldaps://" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Using ldaps://</div><p>
     To use LDAP with native SSL (rather than TLS), add the
     <code class="literal">ldaps</code> resource.
    </p></div></section><section class="sect1" id="ay-nfs" data-id-title="NFS client and server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.20 </span><span class="title-name">NFS client and server</span></span> <a title="Permalink" class="permalink" href="#ay-nfs">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_nfs.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Configuring a system as an NFS client or an NFS server can be done
    using the configuration system. The following examples show how both NFS
    client and server can be configured.
   </p><p>
    From <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP4</span></span> on, the structure of NFS client configuration has
    changed. Some global configuration options were introduced:
    <code class="literal">enable_nfs4</code> to switch NFS4 support on/off and
    <code class="literal">idmapd_domain</code> to define domain name for rpc.idmapd
    (this only makes sense when NFS4 is enabled). Attention: the old
    structure is not compatible with the new one, and the control files
    with an NFS section created on older releases will not work with newer
    products.
   </p><p>
    For more information on how to install <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> onto NFS shares, refer
    to <a class="xref" href="#ay-partition-nfs" title="4.5.10. NFS configuration">Section 4.5.10, “NFS configuration”</a>.
   </p><div class="example" id="id-1.7.5.2.25.6" data-id-title="Network configuration: NFS client"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.50: </span><span class="title-name">Network configuration: NFS client </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.25.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_nfs.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;nfs&gt;
  &lt;enable_nfs4 config:type="boolean"&gt;true&lt;/enable_nfs4&gt;
  &lt;idmapd_domain&gt;suse.cz&lt;/idmapd_domain&gt;
  &lt;nfs_entries config:type="list"&gt;
    &lt;nfs_entry&gt;
      &lt;mount_point&gt;/home&lt;/mount_point&gt;
      &lt;nfs_options&gt;sec=krb5i,intr,rw&lt;/nfs_options&gt;
      &lt;server_path&gt;saurus.suse.cz:/home&lt;/server_path&gt;
      &lt;vfstype&gt;nfs4&lt;/vfstype&gt;
    &lt;/nfs_entry&gt;
    &lt;nfs_entry&gt;
      &lt;mount_point&gt;/work&lt;/mount_point&gt;
      &lt;nfs_options&gt;defaults&lt;/nfs_options&gt;
      &lt;server_path&gt;bivoj.suse.cz:/work&lt;/server_path&gt;
      &lt;vfstype&gt;nfs&lt;/vfstype&gt;
    &lt;/nfs_entry&gt;
    &lt;nfs_entry&gt;
      &lt;mount_point&gt;/mnt&lt;/mount_point&gt;
      &lt;nfs_options&gt;defaults&lt;/nfs_options&gt;
      &lt;server_path&gt;fallback.suse.cz:/srv/dist&lt;/server_path&gt;
      &lt;vfstype&gt;nfs&lt;/vfstype&gt;
    &lt;/nfs_entry&gt;
  &lt;/nfs_entries&gt;
&lt;/nfs&gt;</pre></div></div></div><div class="example" id="id-1.7.5.2.25.7" data-id-title="Network configuration: NFS server"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.51: </span><span class="title-name">Network configuration: NFS server </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.25.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_nfs.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;nfs_server&gt;
  &lt;nfs_exports config:type="list"&gt;
    &lt;nfs_export&gt;
      &lt;allowed config:type="list"&gt;
        &lt;allowed_clients&gt;*(ro,root_squash,sync)&lt;/allowed_clients&gt;
      &lt;/allowed&gt;
      &lt;mountpoint&gt;/home&lt;/mountpoint&gt;
    &lt;/nfs_export&gt;
    &lt;nfs_export&gt;
      &lt;allowed config:type="list"&gt;
        &lt;allowed_clients&gt;*(ro,root_squash,sync)&lt;/allowed_clients&gt;
      &lt;/allowed&gt;
      &lt;mountpoint&gt;/work&lt;/mountpoint&gt;
    &lt;/nfs_export&gt;
  &lt;/nfs_exports&gt;
  &lt;start_nfsserver config:type="boolean"&gt;true&lt;/start_nfsserver&gt;
&lt;/nfs_server&gt;</pre></div></div></div></section><section class="sect1" id="Configuration-Network-Ntp" data-id-title="NTP client"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.21 </span><span class="title-name">NTP client</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-Ntp">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_ntp_client.xml" title="Edit source document"> </a></div></div></div></div></div><div id="id-1.7.5.2.26.3" data-id-title="NTP client profile incompatible" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: NTP client profile incompatible</div><p>
     Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, the NTP client profile has a new format
     and is <span class="emphasis"><em>not</em></span> compatible with previous profiles. You
     need to update your NTP client profile used in prior <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
     versions to be compatible with version 15 and newer.
    </p></div><p>
    Following is an example of the NTP client configuration:
   </p><div class="complex-example"><div class="example" id="id-1.7.5.2.26.5" data-id-title="Network configuration: NTP client"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.52: </span><span class="title-name">Network configuration: NTP client </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.26.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_ntp_client.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;ntp-client&gt;
  &lt;ntp_policy&gt;auto&lt;/ntp_policy&gt;<span class="callout" id="co-ay-ntp-policy">1</span>
  &lt;ntp_servers config:type="list"&gt;
    &lt;ntp_server&gt;
      &lt;address&gt;cz.pool.ntp.org&lt;/address&gt;<span class="callout" id="co-ay-ntp-address">2</span>
      &lt;iburst config:type="boolean"&gt;false&lt;/iburst&gt;<span class="callout" id="co-ay-ntp-iburst">3</span>
      &lt;offline config:type="boolean"&gt;false&lt;/offline&gt;<span class="callout" id="co-ay-ntp-offline">4</span>
    &lt;/ntp_server&gt;
  &lt;/ntp_servers&gt;
  &lt;ntp_sync&gt;15&lt;/ntp_sync&gt;<span class="callout" id="co-ay-ntp-sync">5</span>
&lt;/ntp-client&gt;</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-ntp-policy"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       The <code class="literal">ntp_policy</code> takes the same values as the
       <code class="option">NETCONFIG_NTP_POLICY</code> option in
       <code class="filename">/etc/sysconfig/network/config</code>. The most common
       options are 'static' and 'auto' (default).
       See <code class="command">man 8 netconfig</code> for more details.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-ntp-address"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       URL of the time server or pool of time servers.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-ntp-iburst"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       <code class="option">iburst</code> speeds up the initial time synchronization for
       the specific time source after <code class="systemitem">chronyd</code> is started.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-ntp-offline"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
        When the <code class="option">offline</code> option is set to 
        <code class="option">true</code> it will prevent the client from 
        polling the time server if it is not available when <code class="systemitem">chronyd</code> is 
        started. Polling will not resume until it is started manually with
        <code class="command">chronyc online</code>. This command does not survive
        a reboot. Setting it to <code class="option">false</code> ensures that clients
        will always attempt to contact the time server, without administrator
        intervention.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ay-ntp-sync"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       For <code class="option">ntp_sync</code>, enter 'systemd' (default) when running an
       NTP daemon, an <span class="emphasis"><em>integer</em></span> interval in seconds to
       synchronize using cron, or 'manual' for no automatic synchronization.
      </p></td></tr></table></div><p>
        The following example illustrates an IPv6 configuration. You may use the server's 
        IP address, host name, or both:
    </p><div class="verbatim-wrap"><pre class="screen">&lt;ntp-server&gt;
  &lt;address&gt;2001:418:3ff::1:53&lt;/address&gt;
&lt;/ntp-server&gt;

&lt;ntp-server&gt;
  &lt;address&gt;2.pool.ntp.org&lt;/address&gt;
&lt;/ntp-server&gt;</pre></div></div></div></div></section><section class="sect1" id="Configuration-Network-Sendmail" data-id-title="Mail server configuration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.22 </span><span class="title-name">Mail server configuration</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-Sendmail">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_mail_server.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    For the mail configuration of the client, this module lets you create a
    detailed mail configuration. The module contains various options. We
    recommended you use it at least for the initial configuration.
   </p><div class="example" id="id-1.7.5.2.27.4" data-id-title="Mail configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.53: </span><span class="title-name">Mail configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.27.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_mail_server.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;mail&gt;
  &lt;aliases config:type="list"&gt;
    &lt;alias&gt;
      &lt;alias&gt;root&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;foo&lt;/destinations&gt;
    &lt;/alias&gt;
    &lt;alias&gt;
      &lt;alias&gt;test&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;foo&lt;/destinations&gt;
    &lt;/alias&gt;
  &lt;/aliases&gt;
  &lt;connection_type config:type="symbol"&gt;permanent&lt;/connection_type&gt;
  &lt;fetchmail config:type="list"&gt;
    &lt;fetchmail_entry&gt;
      &lt;local_user&gt;foo&lt;/local_user&gt;
      &lt;password&gt;bar&lt;/password&gt;
      &lt;protocol&gt;POP3&lt;/protocol&gt;
      &lt;remote_user&gt;foo&lt;/remote_user&gt;
      &lt;server&gt;pop.foo.com&lt;/server&gt;
    &lt;/fetchmail_entry&gt;
    &lt;fetchmail_entry&gt;
      &lt;local_user&gt;test&lt;/local_user&gt;
      &lt;password&gt;bar&lt;/password&gt;
      &lt;protocol&gt;IMAP&lt;/protocol&gt;
      &lt;remote_user&gt;test&lt;/remote_user&gt;
      &lt;server&gt;blah.com&lt;/server&gt;
    &lt;/fetchmail_entry&gt;
  &lt;/fetchmail&gt;
  &lt;from_header&gt;test.com&lt;/from_header&gt;
  &lt;listen_remote config:type="boolean"&gt;true&lt;/listen_remote&gt;
  &lt;local_domains config:type="list"&gt;
    &lt;domains&gt;test1.com&lt;/domains&gt;
  &lt;/local_domains&gt;
  &lt;masquerade_other_domains config:type="list"&gt;
      &lt;domain&gt;blah.com&lt;/domain&gt;
  &lt;/masquerade_other_domains&gt;
  &lt;masquerade_users config:type="list"&gt;
    &lt;masquerade_user&gt;
      &lt;address&gt;joe@test.com&lt;/address&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;user&gt;joeuser&lt;/user&gt;
    &lt;/masquerade_user&gt;
    &lt;masquerade_user&gt;
      &lt;address&gt;bar@test.com&lt;/address&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;user&gt;foo&lt;/user&gt;
    &lt;/masquerade_user&gt;
  &lt;/masquerade_users&gt;
  &lt;mta config:type="symbol"&gt;postfix&lt;/mta&gt;
  &lt;outgoing_mail_server&gt;test.com&lt;/outgoing_mail_server&gt;
  &lt;postfix_mda config:type="symbol"&gt;local&lt;/postfix_mda&gt;
  &lt;smtp_auth config:type="list"&gt;
    &lt;listentry&gt;
      &lt;password&gt;bar&lt;/password&gt;
      &lt;server&gt;test.com&lt;/server&gt;
      &lt;user&gt;foo&lt;/user&gt;
    &lt;/listentry&gt;
  &lt;/smtp_auth&gt;
  &lt;use_amavis config:type="boolean"&gt;true&lt;/use_amavis&gt;
  &lt;virtual_users config:type="list"&gt;
    &lt;virtual_user&gt;
      &lt;alias&gt;test.com&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;foo.com&lt;/destinations&gt;
    &lt;/virtual_user&gt;
    &lt;virtual_user&gt;
      &lt;alias&gt;geek.com&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;bar.com&lt;/destinations&gt;
    &lt;/virtual_user&gt;
  &lt;/virtual_users&gt;
&lt;/mail&gt;</pre></div></div></div></section><section class="sect1" id="Configuration-Network-apache" data-id-title="Apache HTTP server configuration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.23 </span><span class="title-name">Apache HTTP server configuration</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-apache">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_apache_server.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This section is used for configuration of an Apache HTTP server.
   </p><p>
    For less experienced users, we would suggest to configure the Apache
    server using the <code class="literal">HTTP server</code> YaST module. After that,
    call the <code class="literal">AutoYaST configuration</code> module,
    select the <code class="literal">HTTP server</code> YaST module and clone the
    Apache settings. These settings can be exported via the menu
    <code class="literal">File</code>.
   </p><div class="example" id="id-1.7.5.2.28.5" data-id-title="HTTP server configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.54: </span><span class="title-name">HTTP server configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.28.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_apache_server.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;http-server&gt;
    &lt;Listen config:type="list"&gt;
      &lt;listentry&gt;
        &lt;ADDRESS/&gt;
        &lt;PORT&gt;80&lt;/PORT&gt;
      &lt;/listentry&gt;
    &lt;/Listen&gt;
    &lt;hosts config:type="list"&gt;
      &lt;hosts_entry&gt;
        &lt;KEY&gt;main&lt;/KEY&gt;
        &lt;VALUE config:type="list"&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;DocumentRoot&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            #
            # Global configuration that will be applicable for all
            # virtual hosts, unless deleted here or overriden elsewhere.
            #
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;"/srv/www/htdocs"&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            #
            # Configure the DocumentRoot
            #
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;"/srv/www/htdocs"&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Options&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # Possible values for the Options directive are "None", "All",
                # or any combination of:
                #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch
                #   ExecCGI MultiViews
                #
                # Note that "MultiViews" must be named *explicitly*
                # --- "Options All"
                # does not give it to you.
                #
                # The Options directive is both complicated and important.
                #  Please see
                #  http://httpd.apache.org/docs/2.4/mod/core.html#options
                # for more information.
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # AllowOverride controls what directives may be placed in
                # .htaccess files. It can be "All", "None", or any combination
                # of the keywords:
                #   Options FileInfo AuthConfig Limit
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # Controls who can get stuff from this server.
                &lt;/OVERHEAD&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;!mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Require&lt;/KEY&gt;
                    &lt;VALUE&gt;all granted&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Order&lt;/KEY&gt;
                    &lt;VALUE&gt;allow,deny&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Allow&lt;/KEY&gt;
                    &lt;VALUE&gt;from all&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;Alias&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # Aliases: aliases can be added as needed (with no limit).
            # The format is Alias fakename realname
            #
            # Note that if you include a trailing / on fakename then the
            # server will require it to be present in the URL.  So "/icons"
            # is not aliased in this example, only "/icons/".  If the fakename
            # is slash-terminated, then the realname must also be slash
            # terminated, and if the fakename omits the trailing slash, the
            # realname must also omit it.
            # We include the /icons/ alias for FancyIndexed directory listings.
            # If you do not use FancyIndexing, you may comment this out.
            #
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/icons/ "/usr/share/apache2/icons/"&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;"/usr/share/apache2/icons"&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Options&lt;/KEY&gt;
                &lt;VALUE&gt;Indexes MultiViews&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;!mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Require&lt;/KEY&gt;
                    &lt;VALUE&gt;all granted&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Order&lt;/KEY&gt;
                    &lt;VALUE&gt;allow,deny&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Allow&lt;/KEY&gt;
                    &lt;VALUE&gt;from all&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ScriptAlias&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # ScriptAlias: This controls which directories contain server
            # scripts. ScriptAliases are essentially the same as Aliases,
            # except that documents in the realname directory are treated
            # as applications and run by the server when requested rather
            # than as documents sent to the client.
            # The same rules about trailing "/" apply to ScriptAlias
            # directives as to Alias.
            #
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/cgi-bin/ "/srv/www/cgi-bin/"&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # "/srv/www/cgi-bin" should be changed to wherever your
            # ScriptAliased CGI directory exists, if you have that configured.
            #
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;"/srv/www/cgi-bin"&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Options&lt;/KEY&gt;
                &lt;VALUE&gt;+ExecCGI -Includes&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;!mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Require&lt;/KEY&gt;
                    &lt;VALUE&gt;all granted&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Order&lt;/KEY&gt;
                    &lt;VALUE&gt;allow,deny&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Allow&lt;/KEY&gt;
                    &lt;VALUE&gt;from all&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # UserDir: The name of the directory that is appended onto a
            # user's home directory if a ~user request is received.
            # To disable it, simply remove userdir from the list of modules
            # in APACHE_MODULES in /etc/sysconfig/apache2.
            #
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;mod_userdir.c&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;UserDir&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # Note that the name of the user directory ("public_html")
                # cannot simply be changed here, since it is a compile time
                # setting. The apache package would need to be rebuilt.
                # You could work around by deleting /usr/sbin/suexec, but
                # then all scripts from the directories would be executed
                # with the UID of the webserver.
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;public_html&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Include&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # The actual configuration of the directory is in
                # /etc/apache2/mod_userdir.conf.
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;/etc/apache2/mod_userdir.conf&lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;IncludeOptional&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # Include all *.conf files from /etc/apache2/conf.d/.
            #
            # This is mostly meant as a place for other RPM packages to drop
            # in their configuration snippet.
            #
            # 
            # You can comment this out here if you want those bits include
            # only in a certain virtual host, but not here.
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/etc/apache2/conf.d/*.conf&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;IncludeOptional&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # The manual... if it is installed ('?' means it will not complain)
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/etc/apache2/conf.d/apache2-manual?conf&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerName&lt;/KEY&gt;
            &lt;VALUE&gt;linux-wtyj&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerAdmin&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;root@linux-wtyj&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;NameVirtualHost&lt;/KEY&gt;
            &lt;VALUE&gt;192.168.43.2&lt;/VALUE&gt;
          &lt;/listentry&gt;
        &lt;/VALUE&gt;
      &lt;/hosts_entry&gt;
      &lt;hosts_entry&gt;
        &lt;KEY&gt;192.168.43.2/secondserver.suse.de&lt;/KEY&gt;
        &lt;VALUE config:type="list"&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;DocumentRoot&lt;/KEY&gt;
            &lt;VALUE&gt;/srv/www/htdocs&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerName&lt;/KEY&gt;
            &lt;VALUE&gt;secondserver.suse.de&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerAdmin&lt;/KEY&gt;
            &lt;VALUE&gt;second_server@suse.de&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;/srv/www/htdocs&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Require&lt;/KEY&gt;
                &lt;VALUE&gt;all granted&lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
        &lt;/VALUE&gt;
      &lt;/hosts_entry&gt;
    &lt;/hosts&gt;
    &lt;modules config:type="list"&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;socache_shmcb&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;reqtimeout&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;authn_core&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;authz_core&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
    &lt;/modules&gt;
    &lt;service config:type="boolean"&gt;true&lt;/service&gt;
    &lt;version&gt;2.9&lt;/version&gt;
  &lt;/http-server&gt;</pre></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">List Name, List Elements, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.28.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_apache_server.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.28.6.2"><span class="term">
          Listen
         </span></dt><dd><p>
          List of host <code class="literal">Listen</code> settings
         </p></dd><dt id="id-1.7.5.2.28.6.3"><span class="term"/></dt><dd><p>
          PORT
         </p><p>
          port address
         </p></dd><dt id="id-1.7.5.2.28.6.4"><span class="term"/></dt><dd><p>
          ADDRESS
         </p><p>
          Network address. All addresses will be taken if this entry is empty.
         </p></dd><dt id="id-1.7.5.2.28.6.5"><span class="term">
          hosts
         </span></dt><dd><p>
          List of Hosts configuration
         </p></dd><dt id="id-1.7.5.2.28.6.6"><span class="term"/></dt><dd><p>
          KEY
         </p><p>
          Host name; <code class="literal">&lt;KEY&gt;main&lt;/KEY&gt;</code> defines the main hosts,
          for example <code class="literal">&lt;KEY&gt;192.168.43.2/secondserver.suse.de&lt;/KEY&gt;</code></p></dd><dt id="id-1.7.5.2.28.6.7"><span class="term"/></dt><dd><p>
          VALUE
         </p><p>
          List of different values describing the host.
         </p></dd><dt id="id-1.7.5.2.28.6.8"><span class="term">
          modules
         </span></dt><dd><p>
          Module list. Only user-defined modules need to be described.
         </p></dd><dt id="id-1.7.5.2.28.6.9"><span class="term"/></dt><dd><p>
          name
         </p><p>
         Module name
         </p></dd><dt id="id-1.7.5.2.28.6.10"><span class="term"/></dt><dd><p>
          userdefined
         </p><p>
          For historical reasons, it is always set to <code class="literal">true</code>.
         </p></dd><dt id="id-1.7.5.2.28.6.11"><span class="term"/></dt><dd><p>
          change
         </p><p>
          For historical reasons, it is always set to <code class="literal">enable</code>.
         </p></dd></dl></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Element, Description, Comment </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.28.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_apache_server.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.28.7.2"><span class="term">
          version
         </span></dt><dd><p>
          Version of used Apache server
         </p><p>
          Only for information. Default 2.9
          </p></dd><dt id="id-1.7.5.2.28.7.3"><span class="term">
          service
         </span></dt><dd><p>
          Enable Apache service
         </p><p>
         Optional. Default: false
         </p></dd></dl></div><div id="id-1.7.5.2.28.8" data-id-title="Firewall" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Firewall</div><p>
      To run an Apache server correctly, make sure the firewall is configured
      appropriately.
      </p></div></section><section class="sect1" id="Configuration-Network-Squid" data-id-title="Squid server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.24 </span><span class="title-name">Squid server</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-Squid">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_squid_server.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Squid is a caching and forwarding Web proxy.
   </p><div class="example" id="id-1.7.5.2.29.4" data-id-title="Squid server configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.55: </span><span class="title-name">Squid server configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.29.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_squid_server.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;squid&gt;
    &lt;acls config:type="list"&gt;
      &lt;listentry&gt;
        &lt;name&gt;QUERY&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;cgi-bin \?&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;urlpath_regex&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;apache&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;Server&lt;/option&gt;
          &lt;option&gt;^Apache&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;rep_header&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;all&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;0.0.0.0/0.0.0.0&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;src&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;manager&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;cache_object&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;proto&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;localhost&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;127.0.0.1/255.255.255.255&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;src&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;to_localhost&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;127.0.0.0/8&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;dst&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;SSL_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;443&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;80&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;21&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;443&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;70&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;210&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;1025-65535&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;280&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;488&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;591&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;777&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;CONNECT&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;CONNECT&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;method&lt;/type&gt;
      &lt;/listentry&gt;
    &lt;/acls&gt;
    &lt;http_accesses config:type="list"&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;manager&lt;/listentry&gt;
          &lt;listentry&gt;localhost&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;true&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;manager&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;!Safe_ports&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;CONNECT&lt;/listentry&gt;
          &lt;listentry&gt;!SSL_ports&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;localhost&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;true&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;all&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
    &lt;/http_accesses&gt;
    &lt;http_ports config:type="list"&gt;
      &lt;listentry&gt;
        &lt;host/&gt;
        &lt;port&gt;3128&lt;/port&gt;
        &lt;transparent config:type="boolean"&gt;false&lt;/transparent&gt;
      &lt;/listentry&gt;
    &lt;/http_ports&gt;
    &lt;refresh_patterns config:type="list"&gt;
      &lt;listentry&gt;
        &lt;case_sensitive config:type="boolean"&gt;true&lt;/case_sensitive&gt;
        &lt;max&gt;10080&lt;/max&gt;
        &lt;min&gt;1440&lt;/min&gt;
        &lt;percent&gt;20&lt;/percent&gt;
        &lt;regexp&gt;^ftp:&lt;/regexp&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;case_sensitive config:type="boolean"&gt;true&lt;/case_sensitive&gt;
        &lt;max&gt;1440&lt;/max&gt;
        &lt;min&gt;1440&lt;/min&gt;
        &lt;percent&gt;0&lt;/percent&gt;
        &lt;regexp&gt;^gopher:&lt;/regexp&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;case_sensitive config:type="boolean"&gt;true&lt;/case_sensitive&gt;
        &lt;max&gt;4320&lt;/max&gt;
        &lt;min&gt;0&lt;/min&gt;
        &lt;percent&gt;20&lt;/percent&gt;
        &lt;regexp&gt;.&lt;/regexp&gt;
      &lt;/listentry&gt;
    &lt;/refresh_patterns&gt;
    &lt;service_enabled_on_startup config:type="boolean"&gt;true&lt;/service_enabled_on_startup&gt;
    &lt;settings&gt;
      &lt;access_log config:type="list"&gt;
        &lt;listentry&gt;/var/log/squid/access.log&lt;/listentry&gt;
      &lt;/access_log&gt;
      &lt;cache_dir config:type="list"&gt;
        &lt;listentry&gt;ufs&lt;/listentry&gt;
        &lt;listentry&gt;/var/cache/squid&lt;/listentry&gt;
        &lt;listentry&gt;100&lt;/listentry&gt;
        &lt;listentry&gt;16&lt;/listentry&gt;
        &lt;listentry&gt;256&lt;/listentry&gt;
      &lt;/cache_dir&gt;
      &lt;cache_log config:type="list"&gt;
        &lt;listentry&gt;/var/log/squid/cache.log&lt;/listentry&gt;
      &lt;/cache_log&gt;
      &lt;cache_mem config:type="list"&gt;
        &lt;listentry&gt;8&lt;/listentry&gt;
        &lt;listentry&gt;MB&lt;/listentry&gt;
      &lt;/cache_mem&gt;
      &lt;cache_mgr config:type="list"&gt;
        &lt;listentry&gt;webmaster&lt;/listentry&gt;
      &lt;/cache_mgr&gt;
      &lt;cache_replacement_policy config:type="list"&gt;
        &lt;listentry&gt;lru&lt;/listentry&gt;
      &lt;/cache_replacement_policy&gt;
      &lt;cache_store_log config:type="list"&gt;
        &lt;listentry&gt;/var/log/squid/store.log&lt;/listentry&gt;
      &lt;/cache_store_log&gt;
      &lt;cache_swap_high config:type="list"&gt;
        &lt;listentry&gt;95&lt;/listentry&gt;
      &lt;/cache_swap_high&gt;
      &lt;cache_swap_low config:type="list"&gt;
        &lt;listentry&gt;90&lt;/listentry&gt;
      &lt;/cache_swap_low&gt;
      &lt;client_lifetime config:type="list"&gt;
        &lt;listentry&gt;1&lt;/listentry&gt;
        &lt;listentry&gt;days&lt;/listentry&gt;
      &lt;/client_lifetime&gt;
      &lt;connect_timeout config:type="list"&gt;
        &lt;listentry&gt;2&lt;/listentry&gt;
        &lt;listentry&gt;minutes&lt;/listentry&gt;
      &lt;/connect_timeout&gt;
      &lt;emulate_httpd_log config:type="list"&gt;
        &lt;listentry&gt;off&lt;/listentry&gt;
      &lt;/emulate_httpd_log&gt;
      &lt;error_directory config:type="list"&gt;
        &lt;listentry/&gt;
      &lt;/error_directory&gt;
      &lt;ftp_passive config:type="list"&gt;
        &lt;listentry&gt;on&lt;/listentry&gt;
      &lt;/ftp_passive&gt;
      &lt;maximum_object_size config:type="list"&gt;
        &lt;listentry&gt;4096&lt;/listentry&gt;
        &lt;listentry&gt;KB&lt;/listentry&gt;
      &lt;/maximum_object_size&gt;
      &lt;memory_replacement_policy config:type="list"&gt;
        &lt;listentry&gt;lru&lt;/listentry&gt;
      &lt;/memory_replacement_policy&gt;
      &lt;minimum_object_size config:type="list"&gt;
        &lt;listentry&gt;0&lt;/listentry&gt;
        &lt;listentry&gt;KB&lt;/listentry&gt;
      &lt;/minimum_object_size&gt;
    &lt;/settings&gt;
  &lt;/squid&gt;</pre></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Attribute, Values, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.29.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_squid_server.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.29.5.2"><span class="term">
      <code class="literal">acls</code>
    </span></dt><dd><p>
         List of Access Control Settings (ACLs).
        </p><p>
         Each list entry contains the name, type, and additional options.
         Use the YaST Squid configuration module to get an overview
         of possible entries.
        </p></dd><dt id="id-1.7.5.2.29.5.3"><span class="term">
      <code class="literal">http_accesses</code>
    </span></dt><dd><p>
         In the Access Control table, access can be denied or allowed to ACL
         Groups.
        </p><p>
         If there are more ACL Groups in one definition, access will be allowed or denied to members who belong to all ACL
         Groups at the same time.
       </p><p>
         The Access Control table is checked in the order listed here. The
         first matching entry is used.
        </p></dd><dt id="id-1.7.5.2.29.5.4"><span class="term">
      <code class="literal">http_ports</code>
    </span></dt><dd><p>
         Define all ports where Squid will listen for clients' HTTP requests.
        </p><p><code class="literal">Host</code> can contain a host name or IP address or
         remain empty.
        </p><p><code class="literal">transparent</code> disables PMTU discovery when transparent.
        </p></dd><dt id="id-1.7.5.2.29.5.5"><span class="term">
      <code class="literal">refresh_patterns</code>
    </span></dt><dd><p>
         Refresh patterns define how Squid treats the objects in the cache.
        </p><p>
         The refresh patterns are checked in the order listed here. The first
         matching entry is used.
        </p><p><code class="literal">Min</code> determines how long (in minutes) an object
         should be considered fresh if no explicit expiry time is given.
         <code class="literal">Max</code> is the upper limit of how long objects without
         an explicit expiry time will be considered fresh.
         <code class="literal">Percent</code> is the percentage of the object's age
         (time since last modification). An object without an explicit expiry
         time will be considered fresh.
        </p></dd><dt id="id-1.7.5.2.29.5.6"><span class="term">
      <code class="literal">settings</code>
    </span></dt><dd><p>
         Map of all available general parameters with default values.
        </p><p>
         Use the YaST Squid configuration module to get an overview
         about possible entries.
        </p></dd><dt id="id-1.7.5.2.29.5.7"><span class="term">
      <code class="literal">service_enabled_on_startup</code>
    </span></dt><dd><p>
         Squid service start when booting.
        </p><p>
         Value: true/false
        </p></dd></dl></div></section><section class="sect1" id="Configuration-Network-Ftp" data-id-title="FTP server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.25 </span><span class="title-name">FTP server</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-Ftp">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_ftp_server.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configure your FTP Internet server settings.
    </p><div class="example" id="id-1.7.5.2.30.4" data-id-title="FTP server configuration:"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.56: </span><span class="title-name">FTP server configuration: </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.30.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_ftp_server.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;ftp-server&gt;
    &lt;AnonAuthen&gt;2&lt;/AnonAuthen&gt;
    &lt;AnonCreatDirs&gt;NO&lt;/AnonCreatDirs&gt;
    &lt;AnonMaxRate&gt;0&lt;/AnonMaxRate&gt;
    &lt;AnonReadOnly&gt;NO&lt;/AnonReadOnly&gt;
    &lt;AntiWarez&gt;YES&lt;/AntiWarez&gt;
    &lt;Banner&gt;Welcome message&lt;/Banner&gt;
    &lt;CertFile/&gt;
    &lt;ChrootEnable&gt;NO&lt;/ChrootEnable&gt;
    &lt;EnableUpload&gt;YES&lt;/EnableUpload&gt;
    &lt;FTPUser&gt;ftp&lt;/FTPUser&gt;
    &lt;FtpDirAnon&gt;/srv/ftp&lt;/FtpDirAnon&gt;
    &lt;FtpDirLocal/&gt;
    &lt;GuestUser/&gt;
    &lt;LocalMaxRate&gt;0&lt;/LocalMaxRate&gt;
    &lt;MaxClientsNumber&gt;10&lt;/MaxClientsNumber&gt;
    &lt;MaxClientsPerIP&gt;3&lt;/MaxClientsPerIP&gt;
    &lt;MaxIdleTime&gt;15&lt;/MaxIdleTime&gt;
    &lt;PasMaxPort&gt;40500&lt;/PasMaxPort&gt;
    &lt;PasMinPort&gt;40000&lt;/PasMinPort&gt;
    &lt;PassiveMode&gt;YES&lt;/PassiveMode&gt;
    &lt;SSL&gt;0&lt;/SSL&gt;
    &lt;SSLEnable&gt;NO&lt;/SSLEnable&gt;
    &lt;SSLv2&gt;NO&lt;/SSLv2&gt;
    &lt;SSLv3&gt;NO&lt;/SSLv3&gt;
    &lt;StartDaemon&gt;2&lt;/StartDaemon&gt;
    &lt;TLS&gt;YES&lt;/TLS&gt;
    &lt;Umask/&gt;
    &lt;UmaskAnon/&gt;
    &lt;UmaskLocal/&gt;
    &lt;VerboseLogging&gt;NO&lt;/VerboseLogging&gt;
    &lt;VirtualUser&gt;NO&lt;/VirtualUser&gt;
  &lt;/ftp-server&gt;</pre></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Element, Description, Comment  </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.30.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_ftp_server.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.30.5.2"><span class="term"><code class="literal">AnonAuthen</code></span></dt><dd><p>
          Enable/disable anonymous and local users.
         </p><p>
          Authenticated Users Only: 1; Anonymous Only: 0; Both: 2
         </p></dd><dt id="id-1.7.5.2.30.5.3"><span class="term"><code class="literal">AnonCreatDirs</code></span></dt><dd><p>
         Anonymous users can create directories.
         </p><p>
         Values: YES/NO
        </p></dd><dt id="id-1.7.5.2.30.5.4"><span class="term"><code class="literal">AnonReadOnly</code></span></dt><dd><p>
         Anonymous users can upload.
         </p><p>
          Values: YES/NO
          </p></dd><dt id="id-1.7.5.2.30.5.5"><span class="term"><code class="literal">AnonMaxRate</code></span></dt><dd><p>
          The maximum data transfer rate permitted for anonymous clients.
         </p><p>
          KB/s
         </p></dd><dt id="id-1.7.5.2.30.5.6"><span class="term"><code class="literal">AntiWarez</code></span></dt><dd><p>
          Disallow downloading of files that were uploaded but not validated by
          a local admin.
         </p><p>
          Values: YES/NO
         </p></dd><dt id="id-1.7.5.2.30.5.7"><span class="term"><code class="literal">Banner</code></span></dt><dd><p>
          Specify the name of a file containing the text to display when someone
          connects to the server.
         </p></dd><dt id="id-1.7.5.2.30.5.8"><span class="term"><code class="literal">CertFile</code></span></dt><dd><p>
          DSA certificate to use for SSL-encrypted connections
         </p><p>
          This option specifies the location of the DSA certificate to use for
          SSL-encrypted connections.
         </p></dd><dt id="id-1.7.5.2.30.5.9"><span class="term"><code class="literal">ChrootEnable</code></span></dt><dd><p>
          When enabled, local users will by default be placed in a <code class="literal">chroot</code>
          jail in their home directory after login.
         </p><p>
          Warning: This option has security implications.
          Values: YES/NO
         </p></dd><dt id="id-1.7.5.2.30.5.10"><span class="term"><code class="literal">EnableUpload</code></span></dt><dd><p>
          If enabled, FTP users can upload.
         </p><p>
          To allow anonymous users to upload, enable <code class="literal">AnonReadOnly</code>.
          Values: YES/NO
         </p></dd><dt id="id-1.7.5.2.30.5.11"><span class="term"><code class="literal">FTPUser</code></span></dt><dd><p>
          Defines the anonymous FTP user.
         </p></dd><dt id="id-1.7.5.2.30.5.12"><span class="term"><code class="literal">FtpDirAnon</code></span></dt><dd><p>
          FTP directory for anonymous users.
         </p><p>
          Specify a directory which is used for anonymous FTP users.
         </p></dd><dt id="id-1.7.5.2.30.5.13"><span class="term"><code class="literal">FtpDirLocal</code></span></dt><dd><p>
          FTP directory for authenticated users.
         </p><p>
          Specify a directory which is used for FTP authenticated users.
         </p></dd><dt id="id-1.7.5.2.30.5.14"><span class="term"><code class="literal">LocalMaxRate</code></span></dt><dd><p>
          The maximum data transfer rate permitted for local authenticated users.
         </p><p>
          KB/s
         </p></dd><dt id="id-1.7.5.2.30.5.15"><span class="term"><code class="literal">MaxClientsNumber</code></span></dt><dd><p>
          The maximum number of clients allowed to connect.
         </p></dd><dt id="id-1.7.5.2.30.5.16"><span class="term"><code class="literal">MaxClientsPerIP</code></span></dt><dd><p>
          Defines the maximum number of clients for one IP.
         </p><p>
          This limits the number of clients allowed to connect from a single
          source Internet address.
         </p></dd><dt id="id-1.7.5.2.30.5.17"><span class="term"><code class="literal">MaxIdleTime</code></span></dt><dd><p>
          The maximum time (timeout) a remote client may wait between FTP
          commands.
         </p><p>
          Minutes
         </p></dd><dt id="id-1.7.5.2.30.5.18"><span class="term"><code class="literal">PasMaxPort</code></span></dt><dd><p>
          Maximum value for a port range for passive connection replies.
         </p><p><code class="literal">PassiveMode</code> needs to be set to YES.
         </p></dd><dt id="id-1.7.5.2.30.5.19"><span class="term"><code class="literal">PasMinPort</code></span></dt><dd><p>
          Minimum value for a port range for passive connection replies.
         </p><p><code class="literal">PassiveMode</code> needs to be set to YES.
         </p></dd><dt id="id-1.7.5.2.30.5.20"><span class="term"><code class="literal">PassiveMode</code></span></dt><dd><p>
          Enable Passive Mode
         </p><p>
         Value: YES/NO
         </p></dd><dt id="id-1.7.5.2.30.5.21"><span class="term"><code class="literal">SSL</code></span></dt><dd><p>
          Security Settings
         </p><p>
         Disable TLS/SSL: 0; Accept TLS/SSL: 1; Refuse Connections Without
         TLS/SSL: 2
         </p></dd><dt id="id-1.7.5.2.30.5.22"><span class="term"><code class="literal">SSLEnable</code></span></dt><dd><p>
          If enabled, SSL connections are allowed.
         </p><p>
          Value: YES/NO
         </p></dd><dt id="id-1.7.5.2.30.5.23"><span class="term"><code class="literal">SSLv2</code></span></dt><dd><p>
          If enabled, SSL version 2 connections are allowed.
         </p><p>
          Value: YES/NO
         </p></dd><dt id="id-1.7.5.2.30.5.24"><span class="term"><code class="literal">SSLv3</code></span></dt><dd><p>
          If enabled, SSL version 3 connections are allowed.
         </p><p>
          Value: YES/NO
         </p></dd><dt id="id-1.7.5.2.30.5.25"><span class="term"><code class="literal">StartDaemon</code></span></dt><dd><p>
          How the FTP daemon will be started.
         </p><p>
          Manually: 0; when booting: 1; via systemd socket: 2
         </p></dd><dt id="id-1.7.5.2.30.5.26"><span class="term"><code class="literal">TLS</code></span></dt><dd><p>
          If enabled, TLS connections are allowed.
         </p><p>
          Value: YES/NO
         </p></dd><dt id="id-1.7.5.2.30.5.27"><span class="term"><code class="literal">Umask</code></span></dt><dd><p>
          File creation mask, in the format (umask for files):(umask for
          directories).
         </p><p>
          For example <code class="literal">177:077</code> if you feel paranoid.
         </p></dd><dt id="id-1.7.5.2.30.5.28"><span class="term"><code class="literal">UmaskAnon</code></span></dt><dd><p>
          The value to which the umask for file creation is set for anonymous
          users.
         </p><p>
          To specify octal values, remember the "0" prefix, otherwise the value
          will be treated as a base-10 integer.
         </p></dd><dt id="id-1.7.5.2.30.5.29"><span class="term"><code class="literal">UmaskLocal</code></span></dt><dd><p>
          Umask for authenticated users.
         </p><p>
          To specify octal values, remember the "0" prefix, otherwise the value
          will be treated as a base-10 integer.
         </p></dd><dt id="id-1.7.5.2.30.5.30"><span class="term"><code class="literal">VerboseLogging</code></span></dt><dd><p>
          When enabled, all FTP requests and responses are logged.
         </p><p>
          Value: YES/NO
         </p></dd><dt id="id-1.7.5.2.30.5.31"><span class="term"><code class="literal">VirtualUser</code></span></dt><dd><p>
          By using virtual users, FTP accounts can be administrated without
          affecting system accounts.
         </p><p>
          Value: YES/NO
         </p></dd></dl></div><div id="id-1.7.5.2.30.6" data-id-title="Firewall" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Firewall</div><p>
      Proper Firewall setting will be required for the FTP server to run correctly.
      </p></div></section><section class="sect1" id="Configuration-Network-Tftp" data-id-title="TFTP server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.26 </span><span class="title-name">TFTP server</span></span> <a title="Permalink" class="permalink" href="#Configuration-Network-Tftp">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_tftp_server.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configure your TFTP Internet server settings.
    </p><p>
     Use this to enable a server for TFTP (trivial file transfer protocol). The
     server will be started using the <code class="systemitem">systemd</code> socket.
    </p><p>
     Note that TFTP and FTP are not the same.
    </p><div class="example" id="id-1.7.5.2.31.6" data-id-title="TFTP server configuration:"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.57: </span><span class="title-name">TFTP server configuration: </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.31.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_tftp_server.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;tftp-server&gt;
    &lt;start_tftpd config:type="boolean"&gt;true&lt;/start_tftpd&gt;
    &lt;tftp_directory&gt;/tftpboot&lt;/tftp_directory&gt;
  &lt;/tftp-server&gt;</pre></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.31.7.1"><span class="term">start_tftpd</span></dt><dd><p>
        Enabling TFTP server service. Value: <code class="literal">true</code>/
        <code class="literal">false</code>.
        </p></dd><dt id="id-1.7.5.2.31.7.2"><span class="term">tftp_directory</span></dt><dd><p>
        Boot Image Directory: Specify the directory where served
        files are located.
       </p><p>
        The usual value is <code class="filename">/tftpboot</code>. The directory will be
        created if it does not exist. The server uses this as its root directory
        (using the <code class="literal">-s</code> option).
       </p></dd></dl></div></section><section class="sect1" id="CreateProfile-Firstboot" data-id-title="Firstboot workflow"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.27 </span><span class="title-name">Firstboot workflow</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Firstboot">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_firstboot.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The YaST firstboot utility (YaST Initial System Configuration), which
    runs after the installation is completed, lets you configure the freshly
    installed system. On the first boot after the installation, users
    are guided through a series of steps that allow for easier
    configuration of a system. YaST firstboot does not run by default
    and needs to be configured to run.
    </p><div class="example" id="id-1.7.5.2.32.4" data-id-title="Enabling firstboot workflow"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.58: </span><span class="title-name">Enabling firstboot workflow </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.32.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_firstboot.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">      &lt;firstboot&gt;
        &lt;firstboot_enabled config:type="boolean"&gt;true&lt;/firstboot_enabled&gt;
      &lt;/firstboot&gt;</pre></div></div></div></section><section class="sect1" id="CreateProfile-Security" data-id-title="Security settings"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.28 </span><span class="title-name">Security settings</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Security">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_security_settings.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Using the features of this module, you can change the local security settings
  on the target system. The local security settings include the boot
  configuration, login settings, password settings, user addition settings, and
  file permissions.
 </p><p>
  Configuring the security settings automatically is similar to the
  <code class="literal">Custom Settings</code> in the security module available in the
  running system. This allows you create a customized configuration.
 </p><div class="complex-example"><div class="example" id="id-1.7.5.2.33.5" data-id-title="Security configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.59: </span><span class="title-name">Security configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.33.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_security_settings.xml" title="Edit source document"> </a></div></div><div class="example-contents"><p>
   See the reference for the meaning and the possible values of the settings in
   the following example.
  </p><div class="verbatim-wrap"><pre class="screen">&lt;security&gt;
  &lt;console_shutdown&gt;ignore&lt;/console_shutdown&gt;
  &lt;displaymanager_remote_access&gt;no&lt;/displaymanager_remote_access&gt;
  &lt;fail_delay&gt;3&lt;/fail_delay&gt;
  &lt;faillog_enab&gt;yes&lt;/faillog_enab&gt;
  &lt;gid_max&gt;60000&lt;/gid_max&gt;
  &lt;gid_min&gt;101&lt;/gid_min&gt;
  &lt;gdm_shutdown&gt;root&lt;/gdm_shutdown&gt;
  &lt;lastlog_enab&gt;yes&lt;/lastlog_enab&gt;
  &lt;encryption&gt;md5&lt;/encryption&gt;
  &lt;obscure_checks_enab&gt;no&lt;/obscure_checks_enab&gt;
  &lt;pass_max_days&gt;99999&lt;/pass_max_days&gt;
  &lt;pass_max_len&gt;8&lt;/pass_max_len&gt;
  &lt;pass_min_days&gt;1&lt;/pass_min_days&gt;
  &lt;pass_min_len&gt;6&lt;/pass_min_len&gt;
  &lt;pass_warn_age&gt;14&lt;/pass_warn_age&gt;
  &lt;passwd_use_cracklib&gt;yes&lt;/passwd_use_cracklib&gt;
  &lt;permission_security&gt;secure&lt;/permission_security&gt;
  &lt;run_updatedb_as&gt;nobody&lt;/run_updatedb_as&gt;
  &lt;uid_max&gt;60000&lt;/uid_max&gt;
  &lt;uid_min&gt;500&lt;/uid_min&gt;
  &lt;selinux_mode&gt;permissive&lt;/selinux_mode&gt;
  &lt;lsm_select&gt;selinux&lt;/lsm_select&gt;
&lt;/security&gt;</pre></div></div></div></div><section class="sect2" id="CreateProfile-Security-password" data-id-title="Password settings options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.28.1 </span><span class="title-name">Password settings options</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Security-password">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_security_settings.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Use the <code class="literal">&lt;pass_*</code> resources to change various password settings, such as minimum
   password length, password expiration, and more. 
  </p><p>
   Use the <code class="literal">&lt;encryption&gt;</code> resource to activate one of the encryption methods currently
   supported. If not set, <code class="literal">sha512</code> is configured.
  </p><p>
    You can use one of the following encryption methods:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
  <code class="literal">md5</code> — allows longer passwords with 128-bit hash value
</p></li><li class="listitem"><p>
        <code class="literal">sha256</code> or <code class="literal">sha512</code> — widely used secure hash algorithm
      </p></li><li class="listitem"><p>
        <code class="literal">des</code> — we do not recommend using this encryption method because of
        insufficient security
      </p></li></ul></div></section><section class="sect2" id="CreateProfile-Security-boot" data-id-title="Boot settings"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.28.2 </span><span class="title-name">Boot settings</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Security-boot">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_security_settings.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Use the security resource, to change various boot settings.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.33.7.3.1"><span class="term">How to interpret <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">Del</span>?</span></dt><dd><p>
      When someone at the console has pressed the
      <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">Del</span> key combination, the system
      usually reboots. Sometimes it is desirable to ignore this event, for
      example, when the system serves as both workstation and server.
     </p></dd><dt id="id-1.7.5.2.33.7.3.2"><span class="term">Shutdown behavior of GDM</span></dt><dd><p>
      Configure a list of users allowed to shut down the machine from GDM.
     </p></dd></dl></div></section><section class="sect2" id="CreateProfile-Security-login" data-id-title="Login settings"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.28.3 </span><span class="title-name">Login settings</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Security-login">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_security_settings.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Change various login settings. These settings are mainly stored in the
   <code class="filename">/etc/login.defs</code> file.
  </p></section><section class="sect2" id="CreateProfile-Security-users" data-id-title="New user settings (useradd settings)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.28.4 </span><span class="title-name">New user settings (<code class="command">useradd</code> settings)</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Security-users">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_security_settings.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Set the minimum and maximum possible user and group IDs.
  </p></section><section class="sect2" id="CreateProfile-Security-selinux" data-id-title="Linux Security Module (LSM) settings"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.28.5 </span><span class="title-name">Linux Security Module (LSM) settings</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Security-selinux">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_security_settings.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In SUSE Linux Enterprise 15.4 and up, the installation control file has a new
    option, <code class="literal">&lt;lsm_select&gt;</code> for configuring
    which major Linux Security Module (LSM) will be activated by
    default after installation: <span class="phrase">AppArmor</span>, SELinux, or none.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.33.10.3.1"><span class="term">selinux_mode</span></dt><dd><p>
       Optional. Configure the SELinux mode. Values:
       <code class="literal">permissive</code>, <code class="literal">enforcing</code> and <code class="literal">disabled</code>.
     </p></dd><dt id="id-1.7.5.2.33.10.3.2"><span class="term">lsm_select</span></dt><dd><p>
      Optional. Major Linux Security Module to be selected during installation. Values:
      <code class="literal">selinux</code>, <code class="literal">apparmor</code>, or <code class="literal">none</code>.
     </p></dd></dl></div></section><section class="sect2" id="CreateProfile-Security-policies" data-id-title="Using OpenSCAP security policies"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.28.6 </span><span class="title-name">Using OpenSCAP security policies</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Security-policies">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_security_settings.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    YaST allows for system hardening using OpenSCAP security policies. Checking and applying a
    security policy happens in two phases:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      At installation time, YaST checks a subset of the security policy rules, especially those
      that are hard to fix after the installation, such as encrypting the file system. If the system
      described in the profile does not comply with any of these rules, AutoYaST will report the
      problems and abort the installation.
    </p></li><li class="listitem"><p>
      Additionally, AutoYaST installs and configures the <code class="command">ssg-apply</code> tool. During first
      boot, <code class="command">ssg-apply</code> can be run to scan the system and, optionally, remediate
      system to meet the selected policy.
     </p></li></ul></div><div id="id-1.7.5.2.33.11.4" data-id-title="Availability in SUSE Linux Enterprise 15 SP4" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Availability in SUSE Linux Enterprise 15 SP4</div><p>
    This feature is available for SUSE Linux Enterprise 15 SP4 GM via self-update or using the QU2 media. Make sure
    to enable updates during installation with
    <code class="literal">&lt;install_updates t="boolean"&gt;true&lt;/install_updates&gt;</code> in the
    <code class="literal">&lt;suse_register&gt;</code> section (see <a class="xref" href="#CreateProfile-Register" title="4.3. System registration and extension selection">Section 4.3, “System registration and extension selection”</a>).
   </p><p>
    If you install without internet connection, add the the
    <code class="literal">Basesystem</code> module from the QU2 medium to the
    <code class="literal">&lt;add_on_products&gt;</code> section:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;listentry t="map"&gt;
  &lt;media_url&gt;relurl://&lt;/media_url&gt;
  &lt;product&gt;sle-module-basesystem&lt;/product&gt;
  &lt;product_dir&gt;/Module-Basesystem&lt;/product_dir&gt;
&lt;/listentry&gt;</pre></div><p>
    For more information, refer to <a class="xref" href="#Software-Selections-additional" title="4.9.3. Installing additional/customized packages or products">Section 4.9.3, “Installing additional/customized packages or products”</a>.
   </p></div><p>
   The <code class="literal">security_policy</code> section selects a security policy and configures
   <code class="command">ssg-apply</code>.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.5.2.33.11.6.1"><span class="term">policy</span></dt><dd><p>
      Selects the security policy to check or apply. Currently only the <span class="orgname">Defense Information Systems Agency</span>
      Security Technical Implementation Guide (DISA STIG) is supported. Use the name <code class="literal">stig</code> to refer to this
      policy. This element is mandatory.
     </p></dd><dt id="id-1.7.5.2.33.11.6.2"><span class="term">action</span></dt><dd><p>
       Specify what <code class="command">ssg-apply</code> should do during first boot.
     </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        <code class="literal">scan</code>: scan the system during first boot. This is the default behavior.
       </p></li><li class="listitem"><p>
        <code class="literal">remediate</code>: scan and remediate the system to comply
         with the selected policy.
       </p></li><li class="listitem"><p>
        <code class="literal">none</code>: configure but do not run <code class="command">ssg-apply</code> during first
        boot. This option is useful if you want to modify the policy before hardening your system.
       </p></li></ul></div></dd></dl></div><div class="complex-example"><div class="example" id="id-1.7.5.2.33.11.7" data-id-title="Select the Defense Information Systems Agency Security Technical Implementation Guide"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.60: </span><span class="title-name">Select the <span class="orgname">Defense Information Systems Agency</span> Security Technical Implementation Guide </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.33.11.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_security_settings.xml" title="Edit source document"> </a></div></div><div class="example-contents"><p>
   The following excerpt instructs AutoYaST to check the DISA STIG policy and remediate
   the system during the first boot.
  </p><div class="verbatim-wrap"><pre class="screen">&lt;security&gt;
  &lt;security_policy&gt;
    &lt;policy&gt;stig&lt;/policy&gt;
    &lt;action&gt;remediate&lt;/action&gt;
  &lt;/security_policy&gt;
&lt;/security&gt;</pre></div></div></div></div></section></section><section class="sect1" id="CreateProfile-Security-laf" data-id-title="Linux audit framework (LAF)"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.29 </span><span class="title-name">Linux audit framework (LAF)</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Security-laf">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_audit_framework.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This module allows the configuration of the audit daemon and to add
    rules for the audit subsystem.
   </p><div class="example" id="id-1.7.5.2.34.4" data-id-title="LAF configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.61: </span><span class="title-name">LAF configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.34.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_audit_framework.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;audit-laf&gt;
    &lt;auditd&gt;
      &lt;flush&gt;INCREMENTAL&lt;/flush&gt;
      &lt;freq&gt;20&lt;/freq&gt;
      &lt;log_file&gt;/var/log/audit/audit.log&lt;/log_file&gt;
      &lt;log_format&gt;RAW&lt;/log_format&gt;
      &lt;max_log_file&gt;5&lt;/max_log_file&gt;
      &lt;max_log_file_action&gt;ROTATE&lt;/max_log_file_action&gt;
      &lt;name_format&gt;NONE&lt;/name_format&gt;
      &lt;num_logs&gt;4&lt;/num_logs&gt;
    &lt;/auditd&gt;
    &lt;rules/&gt;
  &lt;/audit-laf&gt;</pre></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Attribute, Values, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.34.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_audit_framework.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.34.5.2"><span class="term"><code class="literal">auditd/flush</code></span></dt><dd><p>
         Describes how to write the data to disk.
        </p><p>
         If set to <code class="literal">INCREMENTAL</code> the Frequency parameter tells
         how many records to write before issuing an explicit flush to disk.
         <code class="literal">NONE</code> means: no special effort is made to flush data,
         <code class="literal">DATA</code>: keep data portion synchronized,
         <code class="literal">SYNC</code>: keep data and metadata fully synchronized.
        </p></dd><dt id="id-1.7.5.2.34.5.3"><span class="term"><code class="literal">auditd/freq</code></span></dt><dd><p>
         This parameter tells how many records to write before issuing an explicit flush to disk.
        </p><p>
         The parameter <code class="literal">flush</code> needs to be set to <code class="literal">INCREMENTAL</code>.
        </p></dd><dt id="id-1.7.5.2.34.5.4"><span class="term"><code class="literal">auditd/log_file</code></span></dt><dd><p>
         The full path name to the log file.
        </p></dd><dt id="id-1.7.5.2.34.5.5"><span class="term"><code class="literal">auditd/log_fomat</code></span></dt><dd><p>
         How much information needs to be logged.
        </p><p>
         Set <code class="literal">RAW</code> to log all data (store in a format exactly as the kernel sends it)
         or <code class="literal">NOLOG</code> to discard all audit information instead of writing it to disk
         (does not affect data sent to the dispatcher).
        </p></dd><dt id="id-1.7.5.2.34.5.6"><span class="term"><code class="literal">auditd/max_log_file</code></span></dt><dd><p>
         How much information needs to be logged.
        </p><p>
         Unit: Megabytes
        </p></dd><dt id="id-1.7.5.2.34.5.7"><span class="term"><code class="literal">auditd/num_logs</code></span></dt><dd><p>
         Number of log files.
        </p><p><code class="literal">max_log_file_action</code> needs to be set to <code class="literal">ROTATE</code></p></dd><dt id="id-1.7.5.2.34.5.8"><span class="term"><code class="literal">auditd/max_log_file_action</code></span></dt><dd><p>
         What happens if the log capacity has been reached.
        </p><p>
         If the action is set to <code class="literal">ROTATE</code> the Number of Log
         Files specifies the number of files to keep. Set to
         <code class="literal">SYSLOG</code>, the audit daemon will write a warning to
         the system log. With <code class="literal">SUSPEND</code> the daemon
         stops writing records to disk. <code class="literal">IGNORE</code> means do
         nothing, <code class="literal">KEEP_LOGS</code> is similar to
         <code class="literal">ROTATE</code>, but log files are not overwritten.
        </p></dd><dt id="id-1.7.5.2.34.5.9"><span class="term"><code class="literal">auditd/name_format</code></span></dt><dd><p>
         Computer Name Format describes how to write the computer name to the log file.
        </p><p>
         If <code class="literal">USER</code> is set, the user-defined name is used.
         <code class="literal">NONE</code> means no computer name is inserted.
         <code class="literal">HOSTNAME</code> uses the name returned by the 'gethostname' syscall.
         <code class="literal">FQD</code> uses the fully qualified domain name.
        </p></dd><dt id="id-1.7.5.2.34.5.10"><span class="term"><code class="literal">rules</code></span></dt><dd><p>
         Rules for auditctl
        </p><p>
         You can edit the rules manually, which we only recommend for
         advanced users.  For more information about all options, see
         <code class="command">man auditctl</code>.
        </p></dd></dl></div></section><section class="sect1" id="Configuration-Security-users-and-groups" data-id-title="Users and groups"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.30 </span><span class="title-name">Users and groups</span></span> <a title="Permalink" class="permalink" href="#Configuration-Security-users-and-groups">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect2" id="Configuration-Security-users" data-id-title="Users"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.30.1 </span><span class="title-name">Users</span></span> <a title="Permalink" class="permalink" href="#Configuration-Security-users">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A list of users can be defined in the <code class="literal">&lt;users&gt;</code>
   section. To be able to log in, make sure that either the <code class="systemitem">root</code> users
   are set up or <code class="option">rootpassword</code> is specified as a
   <code class="command">linuxrc</code> option.
  </p><div class="example" id="id-1.7.5.2.35.3.3" data-id-title="Minimal user configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.62: </span><span class="title-name">Minimal user configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.35.3.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;users config:type="list"&gt;
  &lt;user&gt;
    &lt;username&gt;root&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
    &lt;user&gt;
    &lt;username&gt;tux&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
&lt;/users&gt;</pre></div></div></div><p>
   The following example shows a more complex scenario. System-wide default
   settings from <code class="filename">/etc/default/useradd</code>, such as the shell
   or the parent directory for the home directory, are applied.
  </p><div class="example" id="id-1.7.5.2.35.3.5" data-id-title="Complex user configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.63: </span><span class="title-name">Complex user configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.35.3.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;users config:type="list"&gt;
  &lt;user&gt;
    &lt;username&gt;root&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;uid&gt;1001&lt;/uid&gt;
    &lt;gid&gt;100&lt;/gid&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
    &lt;fullname&gt;Root User&lt;/fullname&gt;
    &lt;authorized_keys config:type="list"&gt;
      &lt;listentry&gt; ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDKLt1vnW2vTJpBp3VK91rFsBvpY97NljsVLdgUrlPbZ/L51FerQQ+djQ/ivDASQjO+567nMGqfYGFA/De1EGMMEoeShza67qjNi14L1HBGgVojaNajMR/NI2d1kDyvsgRy7D7FT5UGGUNT0dlcSD3b85zwgHeYLidgcGIoKeRi7HpVDOOTyhwUv4sq3ubrPCWARgPeOLdVFa9clC8PTZdxSeKp4jpNjIHEyREPin2Un1luCIPWrOYyym7aRJEPopCEqBA9HvfwpbuwBI5F0uIWZgSQLfpwW86599fBo/PvMDa96DpxH1VlzJlAIHQsMkMHbsCazPNC0++Kp5ZVERiH root@example.net&lt;/listentry&gt;
    &lt;/authorized_keys&gt;
  &lt;/user&gt;
  &lt;user&gt;
    &lt;username&gt;tux&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;uid&gt;1002&lt;/uid&gt;
    &lt;gid&gt;100&lt;/gid&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
    &lt;fullname&gt;Plain User&lt;/fullname&gt;
    &lt;home&gt;/Users/plain&lt;/home&gt;
    &lt;password_settings&gt;
      &lt;max&gt;120&lt;/max&gt;
      &lt;inact&gt;5&lt;/inact&gt;
    &lt;/password_settings&gt;
  &lt;/user&gt;
&lt;/users&gt;</pre></div></div></div><div id="id-1.7.5.2.35.3.6" data-id-title="authorized_keys file will be overwritten" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: <code class="literal">authorized_keys</code> file will be overwritten</div><p>
    If the profile defines a set of SSH authorized keys for a user in the
    <code class="literal">authorized_keys</code> section, an existing
    <code class="filename">$HOME/.ssh/authorized_keys</code> file will be overwritten.
    If not existing, the file will be created with the content specified. Avoid
    overwriting an existing <code class="filename">authorized_keys</code> file by not
    specifying the respective section in the AutoYaST control file.
   </p></div><div id="id-1.7.5.2.35.3.7" data-id-title="Combine rootpassword and root user options" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Combine <code class="literal">rootpassword</code> and root user options</div><p>
    It is possible to specify <code class="literal">rootpassword</code> in
    <code class="command">linuxrc</code> and have a user section for the <code class="systemitem">root</code> user.
    If this section is missing the password, then the password from
    <code class="command">linuxrc</code> will be used. Passwords in profiles take
    precedence over <code class="command">linuxrc</code> passwords.
   </p></div><div id="id-1.7.5.2.35.3.8" data-id-title="Do not create a superuser account with a name other than root" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Do not create a superuser account with a name other than <code class="systemitem">root</code></div><p>
       While it is technically possible to create an account with the user ID
       (<code class="literal">uid</code>) <code class="literal">0</code> and a name other than <code class="systemitem">root</code>, certain
       applications, scripts or third-party products may rely on the existence of a user called
       <code class="systemitem">root</code>. While such a configuration always targets individual environments, necessary
       adjustments could be overwritten by vendor updates, so this becomes an ongoing task, not
       a one-time setting. This is especially true in very complex setups involving third-party applications, 
       where it needs to be verified with every involved vendor whether a rename of the <code class="systemitem">root</code> account
       is supported.
     </p><p>
       As the implications for renaming the <code class="systemitem">root</code> account cannot be foreseen, SUSE does not
       support renaming the <code class="systemitem">root</code> account.
     </p><p>
       Usually, the idea behind renaming the <code class="systemitem">root</code> account is to hide it or make it unpredictable.
       However, <code class="filename">/etc/passwd</code> requires <code class="literal">644</code> permissions for
       regular users, so any user of the system can retrieve the login name for the user ID 0.
       <span class="phrase">For better ways to secure the <code class="systemitem">root</code> account, refer to
         <span class="intraxref">Book “Security and Hardening Guide”, Chapter 14 “User management”, Section 14.5 “Restricting <code class="systemitem">root</code> logins”</span> and
         <span class="intraxref">Book “Security and Hardening Guide”, Chapter 14 “User management”, Section 14.5.3 “Restricting SSH logins”</span>.</span>
     </p></div><div id="ann-Configuration-Security-users-uid" data-id-title="Specifying a user ID (uid)" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Specifying a user ID (<code class="literal">uid</code>)</div><p>
    Each user on a Linux system has a numeric user ID. You can either specify
    such a user ID within the AutoYaST control file manually by using
    <code class="sgmltag-element">uid</code>, or let the system automatically choose a
    user ID by not using <code class="sgmltag-element">uid</code>.
   </p><p>
    User IDs should be unique throughout the system. If not, some applications
    such as the login manager
    <code class="systemitem">gdm</code> may no longer work as
    expected.
   </p><p>
    When adding users with the AutoYaST control file, it is strongly recommended
    not to mix user-defined IDs and automatically provided IDs. When doing so,
    unique IDs cannot be guaranteed. Either specify IDs for all users added
    with the AutoYaST control file or let the system choose the ID for all users.
   </p></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Attribute, Values, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.35.3.10">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.35.3.10.2"><span class="term"><code class="literal">username</code></span></dt><dd><p>
      Text
     </p><div class="verbatim-wrap"><pre class="screen">&lt;username&gt;lukesw&lt;/username&gt;</pre></div><p>
      Required. It should be a valid user name. Check <code class="literal">man 8
      useradd</code> if you are not sure.
     </p></dd><dt id="id-1.7.5.2.35.3.10.3"><span class="term"><code class="literal">fullname</code></span></dt><dd><p>
      Text
     </p><div class="verbatim-wrap"><pre class="screen">&lt;fullname&gt;Tux Torvalds&lt;/fullname&gt;</pre></div><p>
      Optional. User's full name.
     </p></dd><dt id="id-1.7.5.2.35.3.10.4"><span class="term"><code class="literal">forename</code></span></dt><dd><p>
      Text
     </p><div class="verbatim-wrap"><pre class="screen">&lt;forname&gt;Tux&lt;/forename&gt;</pre></div><p>
      Optional. User's forename.
     </p></dd><dt id="id-1.7.5.2.35.3.10.5"><span class="term"><code class="literal">surname</code></span></dt><dd><p>
      Text
     </p><div class="verbatim-wrap"><pre class="screen">&lt;surname&gt;Skywalker&lt;/surname&gt;</pre></div><p>
      Optional. User's surname.
     </p></dd><dt id="id-1.7.5.2.35.3.10.6"><span class="term"><code class="literal">uid</code></span></dt><dd><p>
      Number
     </p><div class="verbatim-wrap"><pre class="screen">&lt;uid&gt;1001&lt;/uid&gt;</pre></div><p>
      Optional. User ID. It should be a unique and must be a non-negative
      number. If not specified, AutoYaST will automatically choose a user ID. Also
      refer to <a class="xref" href="#ann-Configuration-Security-users-uid" title="Note: Specifying a user ID (uid)">Note: Specifying a user ID (<code class="literal">uid</code>)</a> for
      additional information.
     </p></dd><dt id="id-1.7.5.2.35.3.10.7"><span class="term"><code class="literal">gid</code></span></dt><dd><p>
      Number
     </p><div class="verbatim-wrap"><pre class="screen">&lt;gid&gt;100&lt;/gid&gt;</pre></div><p>
      Optional. Initial group ID. It must be a unique and non-negative number.
      Moreover it must refer to an existing group.
     </p></dd><dt id="id-1.7.5.2.35.3.10.8"><span class="term"><code class="literal">home</code></span></dt><dd><p>
      Path
     </p><div class="verbatim-wrap"><pre class="screen">&lt;home&gt;/home/luke&lt;/home&gt;</pre></div><p>
      Optional. Absolute path to the user's home directory. By default,
      <code class="literal">/home/username</code> will be used (for example,
      <code class="literal">alice</code>'s home directory will be
      <code class="literal">/home/alice</code>).
     </p></dd><dt id="id-1.7.5.2.35.3.10.9"><span class="term"><code class="literal">home_btrfs_subvolume</code></span></dt><dd><p>
      Boolean
     </p><div class="verbatim-wrap"><pre class="screen">&lt;home_btrfs_subvolume config:type="boolean"&gt;true&lt;/home_btrfs_subvolume&gt;</pre></div><p>
      Optional. Generates the home directory in a Btrfs subvolume. Disabled by
      default.
     </p></dd><dt id="id-1.7.5.2.35.3.10.10"><span class="term"><code class="literal">shell</code></span></dt><dd><p>
      Path
     </p><div class="verbatim-wrap"><pre class="screen">&lt;shell&gt;/usr/bin/zsh&lt;/shell&gt;</pre></div><p>
      Optional. <code class="literal">/bin/bash</code> is the default value. If you
      choose another one, make sure that it is installed (adding the
      corresponding package to the <code class="literal">software</code> section).
     </p></dd><dt id="id-1.7.5.2.35.3.10.11"><span class="term"><code class="literal">user_password</code></span></dt><dd><p>
      Text
     </p><div class="verbatim-wrap"><pre class="screen">&lt;user_password&gt;some-password&lt;/user_password&gt;</pre></div><p>
      Optional. A user's password can be written in
      plain text (not recommended) or in encrypted form. To create an encrypted
      password, use <code class="command">mkpasswd</code>. Enter the password as written
      in <code class="filename">/etc/shadow</code> (second column). To enable or disable
      the use of encrypted passwords in the profile, see the
      <code class="literal">encrypted</code> parameter.
      If you enter an exclamation mark (!) with encrypted passwords enabled, the value is copied to the password field
      of <code class="filename">/etc/shadow</code>. Therefore, 
            you get an account with a locked password that cannot log in on console.
     </p></dd><dt id="id-1.7.5.2.35.3.10.12"><span class="term"><code class="literal">encrypted</code></span></dt><dd><p>
      Boolean
     </p><div class="verbatim-wrap"><pre class="screen">&lt;encrypted config:type="boolean"&gt;true&lt;/encrypted&gt;</pre></div><p>
      Optional. Considered <code class="literal">false</code> if not present. Indicates
      if the user's password in the profile is encrypted or not. AutoYaST supports
      standard encryption algorithms (see <code class="command">man 3 crypt)</code>.
     </p></dd><dt id="id-1.7.5.2.35.3.10.13"><span class="term"><code class="literal">password_settings</code></span></dt><dd><p>
      Password settings
     </p><div class="verbatim-wrap"><pre class="screen">&lt;password_settings&gt;
  &lt;expire/&gt;
  &lt;max&gt;60&lt;/max&gt;
  &lt;warn&gt;7&lt;/warn&gt;
&lt;/password_settings&gt;</pre></div><p>
      Optional. Some password settings can be customized:
      <code class="literal">expire</code> (account expiration date in format
      <code class="literal">YYYY-MM-DD</code>), <code class="literal">flag</code>
      (<code class="literal">/etc/shadow</code> flag), <code class="literal">inact</code> (number
      of days after password expiration that account is disabled),
      <code class="literal">max</code> (maximum number of days a password is valid),
      <code class="literal">min</code> (grace period in days until which a user can
      change password after it has expired) and <code class="literal">warn</code> (number
      of days before expiration when the password change reminder starts).
     </p></dd><dt id="id-1.7.5.2.35.3.10.14"><span class="term"><code class="literal">authorized_keys</code></span></dt><dd><p>
      List of authorized keys
     </p><div class="verbatim-wrap"><pre class="screen">&lt;authorized_keys config:type="list"&gt;
  &lt;listentry&gt;ssh-rsa ...&lt;/listentry&gt;
&lt;/authorized_keys&gt;</pre></div><p>
      A list of authorized keys to be written to
      <code class="literal">$HOME/.ssh/authorized_keys</code>. See example below.
     </p></dd></dl></div></section><section class="sect2" id="Configuration-Security-user-defaults" data-id-title="User defaults"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.30.2 </span><span class="title-name">User defaults</span></span> <a title="Permalink" class="permalink" href="#Configuration-Security-user-defaults">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The profile can specify a set of default values for new users like password
   expiration, initial group, home directory prefix, etc. Besides using them as
   default values for the users that are defined in the profile, AutoYaST will
   write those settings to <code class="filename">/etc/default/useradd</code> or any
   other appropriate file to be read for <code class="literal">useradd</code>.
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Attribute, Values, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.35.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.35.4.3.2"><span class="term"><code class="literal">group</code></span></dt><dd><p>
      Text
     </p><div class="verbatim-wrap"><pre class="screen">&lt;group&gt;100&lt;/group&gt;</pre></div><p>
      Optional. Default initial login group.
     </p></dd><dt id="id-1.7.5.2.35.4.3.3"><span class="term"><code class="literal">home</code></span></dt><dd><p>
      Path
     </p><div class="verbatim-wrap"><pre class="screen">&lt;home&gt;/home&lt;/home&gt;</pre></div><p>
      Optional. User's home directory prefix.
     </p></dd><dt id="id-1.7.5.2.35.4.3.4"><span class="term"><code class="literal">expire</code></span></dt><dd><p>
      Date
     </p><div class="verbatim-wrap"><pre class="screen">&lt;expire&gt;2017-12-31&lt;/expire&gt;</pre></div><p>
      Optional. Default password expiration date in
      <code class="literal">YYYY-MM-DD</code> format.
     </p></dd><dt id="id-1.7.5.2.35.4.3.5"><span class="term"><code class="literal">inactive</code></span></dt><dd><p>
      Number
     </p><div class="verbatim-wrap"><pre class="screen">&lt;inactive&gt;3&lt;/inactive&gt;</pre></div><p>
      Optional. Number of days after which an expired account is disabled.
     </p></dd><dt id="id-1.7.5.2.35.4.3.6"><span class="term"><code class="literal">shell</code></span></dt><dd><p>
      Path
     </p><div class="verbatim-wrap"><pre class="screen">&lt;shell&gt;/usr/bin/fish&lt;/shell&gt;</pre></div><p>
      Default login shell. <code class="literal">/bin/bash</code> is the default value.
      If you choose another one, make sure that it is installed (adding the
      corresponding package to the <code class="literal">software</code> section).
     </p></dd><dt id="id-1.7.5.2.35.4.3.7"><span class="term"><code class="literal">umask</code></span></dt><dd><p>
      File creation mode mask
     </p><div class="verbatim-wrap"><pre class="screen">&lt;umask&gt;022&lt;/umask&gt;</pre></div><p>
      Set the file creation mode mask for the home directory. By default
      <code class="literal">useradd</code> will use <code class="literal">022</code>. Check
      <code class="literal">man 8 useradd</code> and <code class="literal">man 1 umask</code> for
      further information.
     </p></dd></dl></div></section><section class="sect2" id="Configuration-Security-groups" data-id-title="Groups"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.30.3 </span><span class="title-name">Groups</span></span> <a title="Permalink" class="permalink" href="#Configuration-Security-groups">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A list of groups can be defined in <code class="literal">&lt;groups&gt;</code> as
   shown in the example.
  </p><div class="example" id="id-1.7.5.2.35.5.3" data-id-title="Group configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.64: </span><span class="title-name">Group configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.35.5.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;groups config:type="list"&gt;
  &lt;group&gt;
    &lt;gid&gt;100&lt;/gid&gt;
    &lt;groupname&gt;users&lt;/groupname&gt;
    &lt;userlist&gt;bob,alice&lt;/userlist&gt;
  &lt;/group&gt;
&lt;/groups&gt;</pre></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Attribute, Values, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.35.5.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.35.5.4.2"><span class="term"><code class="literal">groupname</code></span></dt><dd><p>
      Text
     </p><div class="verbatim-wrap"><pre class="screen">&lt;groupname&gt;users&lt;/groupname&gt;</pre></div><p>
      Required. It should be a valid group name. Check <code class="literal">man 8
      groupadd</code> if you are not sure.
     </p></dd><dt id="id-1.7.5.2.35.5.4.3"><span class="term"><code class="literal">gid</code></span></dt><dd><p>
      Number
     </p><div class="verbatim-wrap"><pre class="screen">&lt;gid&gt;100&lt;/gid&gt;</pre></div><p>
      Optional. Group ID. It must be a unique and non-negative number.
     </p></dd><dt id="id-1.7.5.2.35.5.4.4"><span class="term"><code class="literal">userlist</code></span></dt><dd><p>
      Users list
     </p><div class="verbatim-wrap"><pre class="screen">&lt;userlist&gt;bob,alice&lt;/userlist&gt;</pre></div><p>
      Optional. A list of users who belong to the group. User names must be
      separated by commas.
     </p></dd></dl></div></section><section class="sect2" id="Configuration-Security-login-settings" data-id-title="Login settings"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.30.4 </span><span class="title-name">Login settings</span></span> <a title="Permalink" class="permalink" href="#Configuration-Security-login-settings">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Two special login settings can be enabled through an AutoYaST profile: autologin
   and password-less login. Both of them are disabled by default.
  </p><div class="example" id="id-1.7.5.2.35.6.3" data-id-title="Enabling autologin and password-less login"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.65: </span><span class="title-name">Enabling autologin and password-less login </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.35.6.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;login_settings&gt;
  &lt;autologin_user&gt;vagrant&lt;/autologin_user&gt;
  &lt;password_less_login config:type="boolean"&gt;true&lt;/password_less_login&gt;
&lt;/login_settings&gt;</pre></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Attribute, Values, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.35.6.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_users_groups.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.35.6.4.2"><span class="term"><code class="literal">password_less_login</code></span></dt><dd><p>
      Boolean
     </p><div class="verbatim-wrap"><pre class="screen">&lt;password_less_login config:type="boolean"&gt;true&lt;/password_less_login&gt;</pre></div><p>
      Optional. Enables password-less login. It only affects graphical login.
     </p></dd><dt id="id-1.7.5.2.35.6.4.3"><span class="term"><code class="literal">autologin_user</code></span></dt><dd><p>
      Text
     </p><div class="verbatim-wrap"><pre class="screen">&lt;autologin_user&gt;alice&lt;/autologin_user&gt;</pre></div><p>
      Optional. Enables autologin for the given user.
     </p></dd></dl></div></section></section><section class="sect1" id="createprofile-scripts" data-id-title="Custom user scripts"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.31 </span><span class="title-name">Custom user scripts</span></span> <a title="Permalink" class="permalink" href="#createprofile-scripts">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_custom_user_scripts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  By adding scripts to the auto-installation process you can customize the
  installation according to your needs and take control in different stages of
  the installation.
 </p><p>
  In the auto-installation process, five types of scripts can be executed at
  different points in time during the installation:
 </p><p>
  All scripts need to be in the &lt;scripts&gt; section.
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    <code class="literal">pre-scripts</code> (very early, before anything else really
    happens)
   </p></li><li class="listitem"><p>
    <code class="literal">postpartitioning-scripts</code> (after partitioning and
    mounting to <code class="filename">/mnt</code> but before RPM installation)
   </p></li><li class="listitem"><p>
    <code class="literal">chroot-scripts</code> (after the package installation, before
    the first boot)
   </p></li><li class="listitem"><p>
    <code class="literal">post-scripts</code> (during the first boot of the installed
    system, no services running)
   </p></li><li class="listitem"><p>
    <code class="literal">init-scripts</code> (during the first boot of the installed
    system, all services up and running)
   </p></li></ul></div><section class="sect2" id="pre-install-scripts" data-id-title="Pre-scripts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.31.1 </span><span class="title-name">Pre-scripts</span></span> <a title="Permalink" class="permalink" href="#pre-install-scripts">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_custom_user_scripts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Executed before YaST does any real change to the system (before
   partitioning and package installation but after the hardware detection).
  </p><p>
   You can use a pre-script to modify your control file and let AutoYaST reread it.
   Find your control file in <code class="filename">/tmp/profile/autoinst.xml</code>.
   Adjust the file and store the modified version in
   <code class="filename">/tmp/profile/modified.xml</code>. AutoYaST will read the modified
   file after the pre-script finishes.
  </p><p>
   It is also possible to modify the storage devices in your pre-scripts. For
   example, you can create new partitions or change the configuration of
   certain technologies like multipath. AutoYaST always inspects the storage
   devices again after executing all the pre-scripts.
  </p><div id="id-1.7.5.2.36.7.5" data-id-title="Pre-scripts with confirmation" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Pre-scripts with confirmation</div><p>
    Pre-scripts are executed at an early stage of the installation. This means
    if you have requested to confirm the installation, these scripts will be
    executed before the confirmation screen shows up
    (<code class="literal">profile/install/general/mode/confirm</code>).
   </p></div><div id="id-1.7.5.2.36.7.6" data-id-title="Pre-scripts and Zypper" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Pre-scripts and Zypper</div><p>
    To call <span class="emphasis"><em>Zypper</em></span> in the pre-script you will need
    to set the environment variable
    <span class="emphasis"><em>ZYPP_LOCKFILE_ROOT="/var/run/autoyast"</em></span> to prevent
    conflicts with the running YaST process.
   </p></div><p>
   The <code class="literal">pre-script</code> elements must be placed as follows:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;scripts&gt;
  &lt;pre-scripts config:type="list"&gt;
    &lt;script&gt;
      ...
    &lt;/script&gt;
  &lt;/pre-scripts&gt;
&lt;/scripts&gt;</pre></div></section><section class="sect2" id="postpartitioning-install-scripts" data-id-title="Postpartitioning scripts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.31.2 </span><span class="title-name">Postpartitioning scripts</span></span> <a title="Permalink" class="permalink" href="#postpartitioning-install-scripts">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_custom_user_scripts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Executed after YaST has done the partitioning and written
   <code class="filename">/etc/fstab</code>. The empty system is already mounted to
   <code class="filename">/mnt</code>.
  </p><p>
   The <code class="literal">postpartitioning-script</code> elements must be placed as follows:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;scripts&gt;
  &lt;postpartitioning-scripts config:type="list"&gt;
    &lt;script&gt;
      ...
    &lt;/script&gt;
  &lt;/postpartitioning-scripts&gt;
&lt;/scripts&gt;</pre></div></section><section class="sect2" id="chroot-scripts" data-id-title="Chroot environment scripts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.31.3 </span><span class="title-name">Chroot environment scripts</span></span> <a title="Permalink" class="permalink" href="#chroot-scripts">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_custom_user_scripts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Chroot scripts are executed before the machine reboots for the first
   time. You can execute chroot scripts before the installation chroots
   into the installed system and configures the boot loader, or you can
   execute a script after the chroot into the installed system has
   happened (look at the <code class="literal">chrooted</code> parameter for that).
  </p><p>
   The <code class="literal">chroot-scripts</code> elements must be placed as follows:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;scripts&gt;
  &lt;chroot-scripts config:type="list"&gt;
    &lt;script&gt;
      ...
    &lt;/script&gt;
  &lt;/chroot-scripts&gt;
&lt;/scripts&gt;</pre></div></section><section class="sect2" id="post-install-scripts" data-id-title="Post-scripts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.31.4 </span><span class="title-name">Post-scripts</span></span> <a title="Permalink" class="permalink" href="#post-install-scripts">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_custom_user_scripts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   These scripts are executed after AutoYaST has completed the system configuration
   and after it has booted the system for the first time.
  </p><p>
  The <code class="literal">post-script</code> elements must be placed as follows:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;scripts&gt;
    &lt;post-scripts config:type="list"&gt;
      &lt;script&gt;
        ...
      &lt;/script&gt;
    &lt;/post-scripts&gt;
  &lt;/scripts&gt;</pre></div></section><section class="sect2" id="init-scripts" data-id-title="Init scripts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.31.5 </span><span class="title-name">Init scripts</span></span> <a title="Permalink" class="permalink" href="#init-scripts">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_custom_user_scripts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   These scripts are executed when YaST has finished, during the initial boot
   process after the network has been initialized. These final scripts are
   executed using
   <code class="filename">/usr/lib/YaST2/bin/autoyast-initscripts.sh</code> and are
   executed only once. Init scripts are configured using the tag
   <span class="emphasis"><em>init-scripts</em></span>.
  </p><p>
   The <code class="literal">init-script</code> elements must be placed as follows:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;scripts&gt;
    &lt;init-scripts config:type="list"&gt;
      &lt;script&gt;
        ...
      &lt;/script&gt;
    &lt;/init-scripts&gt;
&lt;/scripts&gt;</pre></div><p>
   Init scripts are different from the other script types because they are not
   executed by YaST, but after YaST has finished. For this reason, their
   XML representation is different from other script types.
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Init script XML representation </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.36.11.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_custom_user_scripts.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.36.11.6.2"><span class="term"><code class="literal">location</code></span></dt><dd><p>
      Define a location from where the script gets fetched. Locations can be
      the same as for the profile (HTTP, FTP, NFS, etc.).
     </p><div class="verbatim-wrap"><pre class="screen">&lt;location&gt;http://10.10.0.1/myInitScript.sh&lt;/location&gt;</pre></div><p>
      Either &lt;location&gt; or &lt;source&gt; must be defined.
     </p></dd><dt id="id-1.7.5.2.36.11.6.3"><span class="term"><code class="literal">source</code></span></dt><dd><p>
      The script itself (source code), encapsulated in a CDATA tag. If you do
      not want to put the whole shell script into the XML profile, use the
      location parameter.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;source&gt;
&lt;![CDATA[echo "Testing the init script" &gt;/tmp/init_out.txt]]&gt;&lt;/source&gt;</pre></div><p>
      Either &lt;location&gt; or &lt;source&gt; must be defined.
     </p></dd><dt id="id-1.7.5.2.36.11.6.4"><span class="term"><code class="literal">filename</code></span></dt><dd><p>
      The file name of the script. It will be stored in a temporary directory
      under <code class="filename">/tmp</code>
     </p><div class="verbatim-wrap"><pre class="screen">&lt;filename&gt;mynitScript5.sh&lt;/filename&gt;</pre></div><p>
      Optional in case you only have a single init script. The default name
      (<code class="filename">init-scripts</code>) is used in this case. If having
      specified more than one init script, you must set a unique name for each
      script.
     </p></dd><dt id="id-1.7.5.2.36.11.6.5"><span class="term"><code class="literal">rerun</code></span></dt><dd><p>
      Normally, a script is only run once, even if you use
      <code class="literal">ayast_setup</code> to run an XML file multiple times. Change
      this default behavior by setting this boolean to <code class="literal">true</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;rerun config:type="boolean"&gt;true&lt;/rerun&gt;</pre></div><p>
      Optional. Default is <code class="literal">false</code> (scripts only run once).
     </p></dd></dl></div><p>
   When added to the control file manually, scripts need to be included in a
   <span class="emphasis"><em>CDATA</em></span> element to avoid confusion with the file syntax
   and other tags defined in the control file.
  </p></section><section class="sect2" id="scripts-syntax" data-id-title="Script XML representation"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.31.6 </span><span class="title-name">Script XML representation</span></span> <a title="Permalink" class="permalink" href="#scripts-syntax">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_custom_user_scripts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Most of the XML elements described below can be used for all the script
   types described above, except for <span class="emphasis"><em>init scripts</em></span>, whose
   definitions can contain only a subset of these elements. See
   <a class="xref" href="#init-scripts" title="4.31.5. Init scripts">Section 4.31.5, “Init scripts”</a> for further information about them.
  </p><div id="id-1.7.5.2.36.12.3" data-id-title="Deprecated elements" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Deprecated elements</div><p>
    <code class="literal">debug</code> is a deprecated element and can be removed in
    future releases. To adapt, use an interpreter-specific debugging parameter
    in <code class="literal">interpreter</code>. For example, instead of
    &lt;interpreter&gt;shell&lt;/interpreter&gt; use &lt;interpreter&gt;/bin/sh
    -x&lt;/interpreter&gt; for the same result as having enabled the
    <code class="literal">debug</code> flag.
   </p></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Script XML representation </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.36.12.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_custom_user_scripts.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.36.12.4.2"><span class="term"><code class="literal">location</code></span></dt><dd><p>
      Define a location from where the script gets fetched. Locations can be
      the same as for the control file (HTTP, FTP, NFS, etc.). Additionally a
      relative URL can be used that defines a path relative to the directory
      with the control file, using the syntax
      <code class="literal">relurl://script.sh</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;location&gt;http://10.10.0.1/myPreScript.sh&lt;/location&gt;</pre></div><p>
      Either <code class="literal">location</code> or <code class="literal">source</code> must be
      defined.
     </p></dd><dt id="id-1.7.5.2.36.12.4.3"><span class="term"><code class="literal">source</code></span></dt><dd><p>
      The script itself (source code), encapsulated in a CDATA tag. If you do
      not want to put the whole shell script into the XML control file, refer
      to the location parameter.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;source&gt;
&lt;![CDATA[
echo "Testing the pre script" &gt; /tmp/pre-script_out.txt
]]&gt;
&lt;/source&gt;</pre></div><p>
      Either <code class="literal">location</code> or <code class="literal">source</code> must be
      defined.
     </p></dd><dt id="id-1.7.5.2.36.12.4.4"><span class="term"><code class="literal">interpreter</code></span></dt><dd><p>
      Specify the interpreter that must be used for the script. Any interpreter
      available in the given environment can be specified. It is possible to
      provide a full path to the interpreter, including parameters. There are
      also deprecated keywords interpreter "shell", "perl" and "python" that
      are supported by the <code class="literal">debug</code> flag.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;interpreter&gt;/bin/bash -x&lt;/interpreter&gt;</pre></div><p>
      Optional; default is <code class="literal">shell</code>.
     </p></dd><dt id="id-1.7.5.2.36.12.4.5"><span class="term"><code class="literal">file name</code></span></dt><dd><p>
      The file name of the script. It will be stored in a temporary directory
      under <code class="filename">/tmp</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;filename&gt;myPreScript5.sh&lt;/filename&gt;</pre></div><p>
      Optional; default is the type of the script (pre-scripts in this case).
      If you have more than one script, you should define different names for
      each script. If <code class="literal">filename</code> is not defined and
      <code class="literal">location</code> is defined, the file name from the location
      path will be used.
     </p></dd><dt id="id-1.7.5.2.36.12.4.6"><span class="term"><code class="literal">feedback</code></span></dt><dd><p>
      If this boolean is <code class="literal">true</code>, output and error messages of
      the script (STDOUT and STDERR) will be shown in a pop-up. The user needs
      to confirm them via the OK button.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;</pre></div><p>
      Optional; default is <code class="literal">false</code>.
     </p></dd><dt id="id-1.7.5.2.36.12.4.7"><span class="term"><code class="literal">feedback_type</code></span></dt><dd><p>
      This can be <code class="literal">message</code>, <code class="literal">warning</code> or
      <code class="literal">error</code>. Set the timeout for these pop-ups in the
      &lt;report&gt; section.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;feedback_type&gt;warning&lt;/feedback_type&gt;</pre></div><p>
      Optional; if missing, an always-blocking pop-up is used.
     </p></dd><dt id="id-1.7.5.2.36.12.4.8"><span class="term"><code class="literal">debug</code></span></dt><dd><p>
      If this is <code class="literal">true</code>, every single line of a shell script
      is logged. Perl scripts are run with warnings turned on. This only works
      for the deprecated keyword <code class="literal">interpreter</code>. For other
      languages, give the path to the interpreter as a parameter in the
      <code class="literal">interpreter</code> value, for example
      "&lt;interpreter&gt;ruby -w&lt;/interpreter&gt;".
     </p><div class="verbatim-wrap"><pre class="screen">&lt;debug config:type="boolean"&gt;true&lt;/debug&gt;</pre></div><p>
      Optional; default is <code class="literal">true</code>.
     </p></dd><dt id="id-1.7.5.2.36.12.4.9"><span class="term"><code class="literal">notification</code></span></dt><dd><p>
      This text will be shown in a pop-up for the time the script is running in
      the background.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;notification&gt;Please wait while script is running...&lt;/notification&gt;</pre></div><p>
      Optional; if not configured, no notification pop-up will be shown.
     </p></dd><dt id="id-1.7.5.2.36.12.4.10"><span class="term"><code class="literal">param-list</code></span></dt><dd><p>
      It is possible to specify parameters given to the script being called.
      You may have more than one <code class="literal">param</code> entry. They are
      concatenated by a single space character on the script command line. If
      any shell quoting should be necessary (for example to protect embedded
      spaces) you need to include this.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;param-list config:type="list"&gt;
  &lt;param&gt;par1&lt;/param&gt;
  &lt;param&gt;par2 par3&lt;/param&gt;
  &lt;param&gt;"par4.1 par4.2"&lt;/param&gt;
&lt;/param-list&gt;</pre></div><p>
      Optional; if not configured, no parameters get passed to script.
     </p></dd><dt id="id-1.7.5.2.36.12.4.11"><span class="term"><code class="literal">rerun</code></span></dt><dd><p>
      A script is only run once. Even if you use <code class="literal">ayast</code>_setup
      to run an XML file multiple times, the script is only run once. Change
      this default behavior by setting this boolean to <code class="literal">true</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;rerun config:type="boolean"&gt;true&lt;/rerun&gt;</pre></div><p>
      Optional; default is <code class="literal">false</code>, meaning that scripts only
      run once.
     </p></dd><dt id="id-1.7.5.2.36.12.4.12"><span class="term"><code class="literal">chrooted</code></span></dt><dd><p>
      During installation, the new system is mounted at
      <code class="filename">/mnt</code>. If this parameter is set to
      <code class="literal">false</code>, AutoYaST does not run <code class="command">chroot</code> and
      does not install the boot loader at this stage. If the parameter is set
      to <code class="literal">true</code>, AutoYaST performs a <code class="command">chroot</code>
      into <code class="filename">/mnt</code> and installs the boot loader. The result
      is that to change anything in the newly-installed system, you no longer
      need to use the <code class="filename">/mnt</code> prefix.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;chrooted config:type="boolean"&gt;true&lt;/chrooted&gt;</pre></div><p>
      Optional; default is <code class="literal">false</code>. This option is only
      available for chroot environment scripts.
     </p></dd></dl></div></section><section class="sect2" id="script-examples" data-id-title="Script example"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.31.7 </span><span class="title-name">Script example</span></span> <a title="Permalink" class="permalink" href="#script-examples">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_custom_user_scripts.xml" title="Edit source document"> </a></div></div></div></div></div><div class="example" id="id-1.7.5.2.36.13.2" data-id-title="Script configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.66: </span><span class="title-name">Script configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.36.13.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_custom_user_scripts.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
&lt;scripts&gt;
  &lt;chroot-scripts config:type="list"&gt;
    &lt;script&gt;
      &lt;chrooted config:type="boolean"&gt;true&lt;/chrooted&gt;
      &lt;filename&gt;chroot-post.sh&lt;/filename&gt;
      &lt;interpreter&gt;shell&lt;/interpreter&gt;
      &lt;source&gt;&lt;![CDATA[
echo "Testing chroot (chrooted) scripts"
ls
]]&gt;
      &lt;/source&gt;
    &lt;/script&gt;
    &lt;script&gt;
      &lt;filename&gt;chroot-pre.sh&lt;/filename&gt;
        &lt;interpreter&gt;/bin/bash -x&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
echo "Testing chroot scripts"
df
cd /mnt
ls
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/chroot-scripts&gt;
    &lt;post-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;post.sh&lt;/filename&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
echo "Running Post-install script"
systemctl start portmap
mount -a 192.168.1.1:/local /mnt
cp /mnt/test.sh /tmp
umount /mnt
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
      &lt;script&gt;
        &lt;filename&gt;post.pl&lt;/filename&gt;
        &lt;interpreter&gt;perl&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
print "Running Post-install script";
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/post-scripts&gt;
    &lt;pre-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;location&gt;http://192.168.1.1/profiles/scripts/prescripts.sh&lt;/location&gt;
      &lt;/script&gt;
      &lt;script&gt;
        &lt;filename&gt;pre.sh&lt;/filename&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
echo "Running pre-script"
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/pre-scripts&gt;
    &lt;postpartitioning-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;postpart.sh&lt;/filename&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
        &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
        &lt;source&gt;&lt;![CDATA[
touch /mnt/testfile
echo Hi
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/postpartitioning-scripts&gt;
  &lt;/scripts&gt;
&lt;/profile&gt;</pre></div></div></div><p>
   After installation is finished, the scripts and the output logs can be found
   in the directory <code class="filename">/var/adm/autoinstall</code>. The scripts are
   located in the subdirectory <code class="filename">scripts</code> and the output logs
   in the <code class="filename">log</code> directory.
  </p><p>
   The log consists of the output produced when executing the scripts,
   containing a combination of both the standard output and the standard error
   output.
  </p><p>
   If the script ends with a non-zero exit code, then a warning will be shown
   with the content of the logs, unless the <code class="literal">feedback</code> option
   was provided.
  </p></section></section><section class="sect1" id="createprofile-sysconfig" data-id-title="System variables (sysconfig)"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.32 </span><span class="title-name">System variables (sysconfig)</span></span> <a title="Permalink" class="permalink" href="#createprofile-sysconfig">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_sysconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Using the sysconfig resource, it is possible to define configuration
    variables in the sysconfig repository
    (<code class="filename">/etc/sysconfig</code>) directly. Sysconfig variables,
    offer the possibility to fine-tune many system components and
    environment variables exactly to your needs.
   </p><p>
    The following example shows how a variable can be set using the
    sysconfig resource.
   </p><div class="complex-example"><div class="example" id="id-1.7.5.2.37.5" data-id-title="Sysconfig configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.67: </span><span class="title-name">Sysconfig configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.37.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_sysconfig.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;sysconfig config:type="list" &gt;
  &lt;sysconfig_entry&gt;
    &lt;sysconfig_key&gt;XNTPD_INITIAL_NTPDATE&lt;/sysconfig_key&gt;
    &lt;sysconfig_path&gt;/etc/sysconfig/xntp&lt;/sysconfig_path&gt;
    &lt;sysconfig_value&gt;ntp.host.com&lt;/sysconfig_value&gt;
  &lt;/sysconfig_entry&gt;
  &lt;sysconfig_entry&gt;
    &lt;sysconfig_key&gt;HTTP_PROXY&lt;/sysconfig_key&gt;
    &lt;sysconfig_path&gt;/etc/sysconfig/proxy&lt;/sysconfig_path&gt;
    &lt;sysconfig_value&gt;proxy.host.com:3128&lt;/sysconfig_value&gt;
  &lt;/sysconfig_entry&gt;
  &lt;sysconfig_entry&gt;
    &lt;sysconfig_key&gt;FTP_PROXY&lt;/sysconfig_key&gt;
    &lt;sysconfig_path&gt;/etc/sysconfig/proxy&lt;/sysconfig_path&gt;
    &lt;sysconfig_value&gt;proxy.host.com:3128&lt;/sysconfig_value&gt;
  &lt;/sysconfig_entry&gt;
&lt;/sysconfig&gt;</pre></div><p>
     Both relative and absolute paths can be provided. If no absolute path
     is given, it is treated as a sysconfig file under the
     <code class="filename">/etc/sysconfig</code> directory.
    </p></div></div></div></section><section class="sect1" id="createprofile-completeconf" data-id-title="Adding complete configurations"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.33 </span><span class="title-name">Adding complete configurations</span></span> <a title="Permalink" class="permalink" href="#createprofile-completeconf">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_complete_configurations.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  For many applications and services you may have a configuration file which
  should be copied to the appropriate location on the installed system. For
  example, if you are installing a Web server, you may have a server
  configuration file (<code class="filename">httpd.conf</code>).
 </p><p>
  Using this resource, you can embed the file into the control file by
  specifying the final path on the installed system. YaST will copy this file
  to the specified location.
 </p><p>
  This feature requires the <span class="package">autoyast2</span> package to be
  installed. If the package is missing, AutoYaST will automatically install the
  package if it is missing.
 </p><p>
  You can specify the <code class="literal">file_location</code> where the file should be
  retrieved from. This can also be a location on the network such as an HTTP
  server:
  <code class="literal">&lt;file_location&gt;http://<em class="replaceable">my.server.site/issue&lt;/file_location</em>&gt;</code>.
 </p><p>
  It is also possible to specify a local file using the
  <code class="literal">relurl://</code> prefix, for example:
  <code class="literal">&lt;<em class="replaceable">file_location&gt;relurl://path/to/file.conf&lt;/file_location</em>&gt;</code>.
 </p><p>
  You can create directories by specifying a <code class="literal">file_path</code> that
  ends with a slash.
 </p><div class="example" id="id-1.7.5.2.38.9" data-id-title="Dumping files into the installed system"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.68: </span><span class="title-name">Dumping files into the installed system </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.38.9">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_complete_configurations.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;files config:type="list"&gt;
  &lt;file&gt;
    &lt;file_path&gt;/etc/apache2/httpd.conf&lt;/file_path&gt;
    &lt;file_contents&gt;

&lt;![CDATA[
some content
]]&gt;

    &lt;/file_contents&gt;
  &lt;/file&gt;
  &lt;file&gt;
    &lt;file_path&gt;/mydir/a/b/c/&lt;/file_path&gt; &lt;!-- create directory --&gt;
  &lt;/file&gt;
&lt;/files&gt;</pre></div></div></div><p>
  A more advanced example is shown below. This configuration will create a file
  using the content supplied in <code class="literal">file_contents</code> and change the
  permissions and ownership of the file. After the file has been copied to the
  system, a script is executed. This can be used to modify the file and prepare
  it for the client's environment.
 </p><div class="example" id="id-1.7.5.2.38.11" data-id-title="Dumping files into the installed system"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.69: </span><span class="title-name">Dumping files into the installed system </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.38.11">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_complete_configurations.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;files config:type="list"&gt;
  &lt;file&gt;
    &lt;file_path&gt;/etc/someconf.conf&lt;/file_path&gt;
    &lt;file_contents&gt;

&lt;![CDATA[
some content
]]&gt;

    &lt;/file_contents&gt;
    &lt;file_owner&gt;tux.users&lt;/file_owner&gt;
    &lt;file_permissions&gt;444&lt;/file_permissions&gt;
    &lt;file_script&gt;
      &lt;interpreter&gt;shell&lt;/interpreter&gt;
      &lt;source&gt;

&lt;![CDATA[
#!/bin/sh

echo "Testing file scripts" &gt;&gt; /etc/someconf.conf
df
cd /mnt
ls
]]&gt;

      &lt;/source&gt;
    &lt;/file_script&gt;
  &lt;/file&gt;
&lt;/files&gt;</pre></div></div></div></section><section class="sect1" id="CreateProfile-Ask" data-id-title="Ask the user for values during installation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.34 </span><span class="title-name">Ask the user for values during installation</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Ask">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_ask_user_values.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  You have the option to let the user decide the values of specific parts of
  the control file during the installation. If you use this feature, a pop-up
  will ask the user to enter a specific part of the control file during
  installation. If you want a full auto installation, but the user should set
  the password of the local account, you can do this via the
  <code class="literal">ask</code> directive in the control file.
 </p><p>
  The elements listed below must be placed within the following XML structure:
 </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      ...
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</pre></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Ask the user for values: XML representation </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.39.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_ask_user_values.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.39.6.2"><span class="term"><code class="literal">question</code></span></dt><dd><p>
     The question you want to ask the user.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;question&gt;Enter the LDAP server&lt;/question&gt;</pre></div><p>
     The default value is the path to the element (the path often looks
     strange, so we recommend entering a question).
    </p></dd><dt id="id-1.7.5.2.39.6.3"><span class="term"><code class="literal">default</code></span></dt><dd><p>
     Set a preselection for the user. A text entry will be filled out with this
     value. A check box will be true or false and a selection will have the
     given value preselected.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;default&gt;dc=suse,dc=de&lt;/default&gt;</pre></div><p>
     Optional.
    </p></dd><dt id="id-1.7.5.2.39.6.4"><span class="term"><code class="literal">help</code></span></dt><dd><p>
     An optional help text that is shown on the left side of the question.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;help&gt;Enter the LDAP server address.&lt;/help&gt;</pre></div><p>
     Optional.
    </p></dd><dt id="id-1.7.5.2.39.6.5"><span class="term"><code class="literal">title</code></span></dt><dd><p>
     An optional title that is shown above the questions.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;title&gt;LDAP server&lt;/title&gt;</pre></div><p>
     Optional.
    </p></dd><dt id="id-1.7.5.2.39.6.6"><span class="term"><code class="literal">type</code></span></dt><dd><p>
     The type of the element you want to change. Possible values are
     <code class="literal">symbol</code>, <code class="literal">boolean</code>,
     <code class="literal">string</code> and <code class="literal">integer</code>. The file system
     in the partition section is a symbol, while the
     <code class="literal">encrypted</code> element in the user configuration is a
     boolean. You can see the type of that element if you look in your control
     file at the <code class="literal">config:type="...."</code> attribute. You can also
     use <code class="literal">static_text</code> as type. A
     <code class="literal">static_text</code> is a text that does not require any user
     input and can show information not included in the help text.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;type&gt;symbol&lt;/type&gt;</pre></div><p>
     Optional. The default is <code class="literal">string</code>. If type is
     <code class="literal">symbol</code>, you must provide the selection element too (see
     below).
    </p></dd><dt id="id-1.7.5.2.39.6.7"><span class="term"><code class="literal">password</code></span></dt><dd><p>
     If this boolean is set to <code class="literal">true</code>, a password dialog pops
     up instead of a simple text entry. Setting this to <code class="literal">true</code>
     only makes sense if <code class="literal">type</code> is string.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;password config:type="boolean"&gt;true&lt;/password&gt;</pre></div><p>
     Optional. The default is <code class="literal">false</code>.
    </p></dd><dt id="id-1.7.5.2.39.6.8"><span class="term"><code class="literal">pathlist</code></span></dt><dd><p>
     A list of <code class="literal">path</code> elements. A path is a comma-separated
     list of elements that describes the path to the element you want to
     change. For example, the network configuration element can be found in the control
     file in the <code class="literal">&lt;networking&gt;</code> section. So,
     to change that value, you need to set the path to
     <code class="literal">networking</code>.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;pathlist config:type="list"&gt;
  &lt;path&gt;networking,dns,hostname&lt;/path&gt;
  &lt;path&gt;...&lt;/path&gt;
&lt;/pathlist&gt;</pre></div><p>
     To change the password of the first user in the control file, you need to
     set the path to <code class="literal">users,0,user_password</code>.
     <code class="literal">0</code> indicates the first item in the configuration section. For example, in
     the &lt;users
     config:type="list"&gt; list of users mentioned below, it relates to <code class="systemitem">root</code>.
     <code class="literal">1</code> would be the second item, and so on.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;users config:type="list"&gt;
  &lt;user&gt;
    &lt;username&gt;root&lt;/username&gt;
    &lt;user_password&gt;password to change&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
  &lt;user&gt;
    &lt;username&gt;tux&lt;/username&gt;
    &lt;user_password&gt;password to change&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
&lt;/users&gt;</pre></div><p>
          To set a password for <code class="systemitem">root</code> if the &lt;user&gt; section is similar to the one above,
          use the &lt;pathlist&gt; as follows:
        </p><div class="verbatim-wrap"><pre class="screen">&lt;pathlist config:type="list"&gt;
          &lt;path&gt;users,0,user_password&lt;/path&gt;
        &lt;/pathlist&gt;</pre></div><p>
     This information is optional, but you should at least provide
     <code class="literal">path</code> or <code class="literal">file</code>.
    </p></dd><dt id="id-1.7.5.2.39.6.9"><span class="term"><code class="literal">file</code></span></dt><dd><p>
     You can store the answer to a question in a file, to use it in one of your
     scripts later. If you ask during <code class="literal">stage=initial</code> and you
     want to use the answer in stage 2, then you need to copy the
     answer-file in a chroot script that is running as
     <code class="literal">chrooted=false</code>. Use the command: <code class="command">cp
     /tmp/my_answer /mnt/tmp/</code>. The reason is that
     <code class="filename">/tmp</code> in stage 1 is in the RAM disk and will be
     lost after the reboot, but the installed system is already mounted at
     <code class="filename">/mnt/</code>.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;file&gt;/tmp/answer_hostname&lt;/file&gt;</pre></div><p>
     This information is optional, but you should at least provide
     <code class="literal">path</code> or <code class="literal">file</code>.
    </p></dd><dt id="id-1.7.5.2.39.6.10"><span class="term"><code class="literal">stage</code></span></dt><dd><p>
     Stage configures the installation stage in which the question pops up. You
     can set this value to <code class="literal">cont</code> or
     <code class="literal">initial</code>. <code class="literal">initial</code> means the pop-up
     comes up very early in the installation, shortly after the pre-script has
     run. <code class="literal">cont</code> means, that the dialog with the question
     comes after the first reboot when the system boots for the very first
     time. Questions you answer during the <code class="literal">initial</code> stage
     will write their answer into the control file on the hard disk. You should
     know that if you enter clear text passwords during
     <code class="literal">initial</code>. Of course it does not make sense to ask for
     the file system to use during the <code class="literal">cont</code> phase. The hard
     disk is already partitioned at that stage and the question will have no
     effect.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;stage&gt;cont&lt;/stage&gt;</pre></div><p>
     Optional. The default is <code class="literal">initial</code>.
    </p></dd><dt id="id-1.7.5.2.39.6.11"><span class="term"><code class="literal">selection</code></span></dt><dd><p>
     The selection element contains a list of <code class="literal">entry</code>
     elements. Each entry represents a possible option for the user to choose.
     The user cannot enter a value in a text box, but they can choose from a
     list of values.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;selection config:type="list"&gt;
  &lt;entry&gt;
    &lt;value&gt;
        btrfs
    &lt;/value&gt;
    &lt;label&gt;
        Btrfs File System
    &lt;/label&gt;
  &lt;/entry&gt;
  &lt;entry&gt;
    &lt;value&gt;
        ext3
    &lt;/value&gt;
    &lt;label&gt;
        Extended3 File System
    &lt;/label&gt;
  &lt;/entry&gt;
&lt;/selection&gt;</pre></div><p>
     Optional for <code class="literal">type=string</code>, not possible for
     <code class="literal">type=boolean</code> and mandatory for
     <code class="literal">type=symbol</code>.
    </p></dd><dt id="id-1.7.5.2.39.6.12"><span class="term"><code class="literal">dialog</code></span></dt><dd><p>
     You can ask more than one question per dialog. To do so, specify the
     dialog-id with an integer. All questions with the same dialog-id belong to
     the same dialog. The dialogs are sorted by the id too.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;dialog config:type="integer"&gt;3&lt;/dialog&gt;</pre></div><p>
     Optional.
    </p></dd><dt id="id-1.7.5.2.39.6.13"><span class="term"><code class="literal">element</code></span></dt><dd><p>
     You can have more than one question per dialog. To make that possible you
     need to specify the <code class="literal">element-id</code> with an integer. The
     questions in a dialog are sorted by ID.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;element config:type="integer"&gt;1&lt;/element&gt;</pre></div><p>
     Optional (see dialog).
    </p></dd><dt id="id-1.7.5.2.39.6.14"><span class="term"><code class="literal">width</code></span></dt><dd><p>
     You can increase the default width of the dialog. If there are multiple
     width specifications per dialog, the largest one is used. The number is
     roughly equivalent to the number of characters.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;width config:type="integer"&gt;50&lt;/width&gt;</pre></div><p>
     Optional.
    </p></dd><dt id="id-1.7.5.2.39.6.15"><span class="term"><code class="literal">height</code></span></dt><dd><p>
     You can increase the default height of the dialog. If there are multiple
     height specifications per dialog, the largest one is used. The number is
     roughly equivalent to the number of lines.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;height config:type="integer"&gt;15&lt;/height&gt;</pre></div><p>
     Optional.
    </p></dd><dt id="id-1.7.5.2.39.6.16"><span class="term"><code class="literal">frametitle</code></span></dt><dd><p>
     You can have more than one question per dialog. Each question on a dialog
     has a frame that can have a frame title, a small caption for each
     question. You can put multiple elements into one frame. They need to have
     the same frame title.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;frametitle&gt;User data&lt;/frametitle&gt;</pre></div><p>
     Optional; default is no frame title.
    </p></dd><dt id="id-1.7.5.2.39.6.17"><span class="term"><code class="literal">script</code></span></dt><dd><p>
     You can run scripts after a question has been answered. (See 
     <a class="xref" href="#CreateProfile-Ask-default-value" title="4.34.1. Default value scripts">Section 4.34.1, “Default value scripts”</a> for detailed 
     instructions about scripts.)
    </p><div class="verbatim-wrap"><pre class="screen">&lt;script&gt;...&lt;/script&gt;</pre></div><p>
     Optional; default is no script.
    </p></dd><dt id="id-1.7.5.2.39.6.18"><span class="term"><code class="literal">ok_label</code></span></dt><dd><p>
     You can change the label on the <span class="guimenu">Ok</span> button. The last
     element that specifies the label for a dialog wins.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;ok_label&gt;Finish&lt;/ok_label&gt;</pre></div><p>
     Optional.
    </p></dd><dt id="id-1.7.5.2.39.6.19"><span class="term"><code class="literal">back_label</code></span></dt><dd><p>
     You can change the label on the <span class="guimenu">Back</span> button. The last
     element that specifies the label for a dialog wins.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;back_label&gt;change values&lt;/back_label&gt;</pre></div><p>
     Optional.
    </p></dd><dt id="id-1.7.5.2.39.6.20"><span class="term"><code class="literal">timeout</code></span></dt><dd><p>
     You can specify an integer here that is used as timeout in seconds. If the
     user does not answer the question before the timeout, the default value is
     taken as answer. When the user touches or changes any widget in the
     dialog, the timeout is turned off and the dialog needs to be confirmed via
     <span class="guimenu">Ok</span>.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;timeout config:type="integer"&gt;30&lt;/timeout&gt;</pre></div><p>
     Optional; a missing value is interpreted as <code class="literal">0</code>, which
     means that there is no timeout.
    </p></dd><dt id="id-1.7.5.2.39.6.21"><span class="term"><code class="literal">default_value_script</code></span></dt><dd><p>
     You can run scripts to set the default value for a question (see
     <a class="xref" href="#CreateProfile-Ask-default-value" title="4.34.1. Default value scripts">Section 4.34.1, “Default value scripts”</a> for detailed
     instructions about default value scripts). This feature is useful if you
     can <code class="literal">calculate</code> a default value, especially in
     combination with the <code class="literal">timeout</code> option.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;default_value_script&gt;...&lt;/default_value_script&gt;</pre></div><p>
     Optional; default is no script.
    </p></dd></dl></div><section class="sect2" id="CreateProfile-Ask-default-value" data-id-title="Default value scripts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.34.1 </span><span class="title-name">Default value scripts</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Ask-default-value">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_ask_user_values.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You can run scripts to set the default value for a question. This feature is
   useful if you can <code class="literal">calculate</code> a default value, especially
   in combination with the <code class="literal">timeout</code> option.
  </p><p>
   The scripts are defined by placing the elements described in
   <a class="xref" href="#scripts-syntax" title="4.31.6. Script XML representation">Section 4.31.6, “Script XML representation”</a> within the following XML structure:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;default_value_script&gt;
        ...
      &lt;/default_value_script&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</pre></div><p>
   Whatever you <code class="command">echo</code> to STDOUT will be used as default value
   for the ask-dialog. If your script has an exit code other than 0, the normal
   <code class="literal">default</code> element is used. Take care you use <code class="command">echo
   -n</code> to suppress the <code class="literal">\n</code> and that you echo
   reasonable values and not <span class="quote">“<span class="quote">okay</span>”</span> for a boolean (use
   <span class="quote">“<span class="quote">true</span>”</span> instead).
  </p></section><section class="sect2" id="CreateProfile-Ask-script" data-id-title="Scripts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.34.2 </span><span class="title-name">Scripts</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Ask-script">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_ask_user_values.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You can run scripts after a question has been answered.
  </p><p>
   The elements listed below must be placed within the following XML structure:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;script&gt;
        ...
      &lt;/script&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</pre></div><p>
   In addition to the elements listed in <a class="xref" href="#scripts-syntax" title="4.31.6. Script XML representation">Section 4.31.6, “Script XML representation”</a>,
   scripts in <code class="literal">&lt;ask&gt;</code> elements support these options:
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Scripts: XML representation </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.39.8.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_ask_user_values.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.39.8.6.2"><span class="term"><code class="literal">filename</code></span></dt><dd><p>
      The file name of the script.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;filename&gt;my_ask_script.sh&lt;/filename&gt;</pre></div><p>
      The default is ask_script.sh
     </p></dd><dt id="id-1.7.5.2.39.8.6.3"><span class="term"><code class="literal">environment</code></span></dt><dd><p>
      A boolean that passes the value of the answer to the question as an
      environment variable to the script. The variable is named
      <code class="envar">VAL</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;environment config:type="boolean"&gt;true&lt;/environment&gt;</pre></div><p>
      Optional. Default is <code class="literal">false</code>.
     </p></dd><dt id="id-1.7.5.2.39.8.6.4"><span class="term"><code class="literal">feedback</code></span></dt><dd><p>
      A boolean that turns on feedback for the script execution. STDOUT will be
      displayed in a pop-up window that must be confirmed after the script
      execution.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;</pre></div><p>
      Optional, default is <code class="literal">false</code>.
     </p></dd><dt id="id-1.7.5.2.39.8.6.5"><span class="term"><code class="literal">rerun_on_error</code></span></dt><dd><p>
      Keep the dialog open until the script has an exit code of 0 (zero). You
      can use this feature to validate the user's input. The script should
      print a meaningful error message and return a code different from
      zero. Bear in mind that you should also set the
      <code class="literal">feedback</code> option to <code class="literal">true</code> so the user
      can read the error message from the script. Optional, default is
      <code class="literal">false</code>.
     </p></dd></dl></div><p>
   Your script can create a file <code class="filename">/tmp/next_dialog</code>
   containing the ID of the following dialog to display. A value of -1
   terminates the sequence.
  </p><p>
   Below you can see an example of the usage of the <code class="literal">ask</code>
   feature.
  </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;ldap,ldap_server&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;stage&gt;cont&lt;/stage&gt;
      &lt;help&gt;Choose your server depending on your department&lt;/help&gt;
      &lt;selection config:type="list"&gt;
        &lt;entry&gt;
          &lt;value&gt;ldap1.mydom.de&lt;/value&gt;
          &lt;label&gt;LDAP for development&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value&gt;ldap2.mydom.de&lt;/value&gt;
          &lt;label&gt;LDAP for sales&lt;/label&gt;
        &lt;/entry&gt;
      &lt;/selection&gt;
      &lt;default&gt;ldap2.mydom.de&lt;/default&gt;
      &lt;default_value_script&gt;
        &lt;source&gt; &lt;![CDATA[
echo -n "ldap1.mydom.de"
]]&gt;
        &lt;/source&gt;
      &lt;/default_value_script&gt;
    &lt;/ask&gt;
    &lt;ask&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;networking,dns,hostname&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;question&gt;Enter Hostname&lt;/question&gt;
      &lt;stage&gt;initial&lt;/stage&gt;
      &lt;default&gt;enter your hostname here&lt;/default&gt;
    &lt;/ask&gt;
    &lt;ask&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;partitioning,0,partitions,0,filesystem&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;question&gt;File System&lt;/question&gt;
      &lt;type&gt;symbol&lt;/type&gt;
      &lt;selection config:type="list"&gt;
        &lt;entry&gt;
          &lt;value config:type="symbol"&gt;ext4&lt;/value&gt;
          &lt;label&gt;default File System (recommended)&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value config:type="symbol"&gt;ext3&lt;/value&gt;
          &lt;label&gt;Fallback File System&lt;/label&gt;
        &lt;/entry&gt;
      &lt;/selection&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</pre></div><p>
   The following example shows a to choose between AutoYaST control files. AutoYaST
   will read the <code class="filename">modified.xml</code> file again after the
   ask-dialogs are done. This way you can fetch a complete new control file.
  </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;selection config:type="list"&gt;
        &lt;entry&gt;
          &lt;value&gt;part1.xml&lt;/value&gt;
          &lt;label&gt;Simple partitioning&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value&gt;part2.xml&lt;/value&gt;
          &lt;label&gt;encrypted /tmp&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value&gt;part3.xml&lt;/value&gt;
          &lt;label&gt;LVM&lt;/label&gt;
        &lt;/entry&gt;
      &lt;/selection&gt;
      &lt;title&gt;XML Profile&lt;/title&gt;
      &lt;question&gt;Choose a profile&lt;/question&gt;
      &lt;stage&gt;initial&lt;/stage&gt;
      &lt;default&gt;part1.xml&lt;/default&gt;
      &lt;script&gt;
        &lt;filename&gt;fetch.sh&lt;/filename&gt;
        &lt;environment config:type="boolean"&gt;true&lt;/environment&gt;
        &lt;source&gt;
&lt;![CDATA[
wget http://10.10.0.162/$VAL -O /tmp/profile/modified.xml 2&gt;/dev/null
]]&gt;
        &lt;/source&gt;
        &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
        &lt;feedback config:type="boolean"&gt;false&lt;/feedback&gt;
      &lt;/script&gt;
    &lt;/ask&gt;tion&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</pre></div><p>
   You can verify the answer of a question with a script like this:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;script&gt;
        &lt;filename&gt;my.sh&lt;/filename&gt;
        &lt;rerun_on_error config:type="boolean"&gt;true&lt;/rerun_on_error&gt;
        &lt;environment config:type="boolean"&gt;true&lt;/environment&gt;
        &lt;source&gt;&lt;![CDATA[
if [ "$VAL" = "myhost" ]; then
    echo "Illegal Hostname!";
    exit 1;
fi
exit 0
]]&gt;
        &lt;/source&gt;
        &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
        &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
      &lt;/script&gt;
      &lt;dialog config:type="integer"&gt;0&lt;/dialog&gt;
      &lt;element config:type="integer"&gt;0&lt;/element&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;networking,dns,hostname&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;question&gt;Enter Hostname&lt;/question&gt;
      &lt;default&gt;enter your hostname here&lt;/default&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</pre></div></section></section><section class="sect1" id="CreateProfile-kdump" data-id-title="Kernel dumps"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.35 </span><span class="title-name">Kernel dumps</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-kdump">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div></div></div></div><div id="id-1.7.5.2.40.3" data-id-title="Availability" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Availability</div><p>
   This feature is not available on AArch64, or on systems with less than
   1 GB of RAM.
  </p></div><p>
  With Kdump the system can create crash dump files if the whole kernel crashes.
  Crash dump files contain the memory contents while the system crashed. Such
  core files can be analyzed later by support or a (kernel) developer to find
  the reason for the system crash. Kdump is mostly useful for servers where you
  cannot easily reproduce such crashes but it is important to get the problem
  fixed.
 </p><p>
  There is a downside to this. Enabling Kdump requires between 64 MB and 128 MB
  of additional system RAM reserved for Kdump in case the system crashes and
  the dump needs to be generated.
 </p><p>
  This section only describes how to set up Kdump with AutoYaST. It does not
  describe how Kdump works. For details, refer to the kdump(7) manual page.
 </p><p>
  The following example shows a general Kdump configuration.
 </p><div class="example" id="id-1.7.5.2.40.8" data-id-title="Kdump configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.70: </span><span class="title-name">Kdump configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.40.8">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;kdump&gt;
  &lt;!-- memory reservation --&gt;
  &lt;add_crash_kernel config:type="boolean"&gt;true&lt;/add_crash_kernel&gt;
  &lt;crash_kernel&gt;256M-:64M&lt;/crash_kernel&gt;
  &lt;general&gt;

    &lt;!-- dump target settings --&gt;
    &lt;KDUMP_SAVEDIR&gt;ftp://stravinsky.suse.de/incoming/dumps&lt;/KDUMP_SAVEDIR&gt;
    &lt;KDUMP_COPY_KERNEL&gt;true&lt;/KDUMP_COPY_KERNEL&gt;
    &lt;KDUMP_FREE_DISK_SIZE&gt;64&lt;/KDUMP_FREE_DISK_SIZE&gt;
    &lt;KDUMP_KEEP_OLD_DUMPS&gt;5&lt;/KDUMP_KEEP_OLD_DUMPS&gt;

    &lt;!-- filtering and compression --&gt;
    &lt;KDUMP_DUMPFORMAT&gt;compressed&lt;/KDUMP_DUMPFORMAT&gt;
    &lt;KDUMP_DUMPLEVEL&gt;1&lt;/KDUMP_DUMPLEVEL&gt;

    &lt;!-- notification --&gt;
    &lt;KDUMP_NOTIFICATION_TO&gt;tux@example.com&lt;/KDUMP_NOTIFICATION_TO&gt;
    &lt;KDUMP_NOTIFICATION_CC&gt;spam@example.com devnull@example.com&lt;/KDUMP_NOTIFICATION_CC&gt;
    &lt;KDUMP_SMTP_SERVER&gt;mail.example.com&lt;/KDUMP_SMTP_SERVER&gt;
    &lt;KDUMP_SMTP_USER&gt;&lt;/KDUMP_SMTP_USER&gt;
    &lt;KDUMP_SMTP_PASSWORD&gt;&lt;/KDUMP_SMTP_PASSWORD&gt;

    &lt;!-- kdump kernel --&gt;
    &lt;KDUMP_KERNELVER&gt;&lt;/KDUMP_KERNELVER&gt;
    &lt;KDUMP_COMMANDLINE&gt;&lt;/KDUMP_COMMANDLINE&gt;
    &lt;KDUMP_COMMANDLINE_APPEND&gt;&lt;/KDUMP_COMMANDLINE_APPEND&gt;

    &lt;!-- expert settings --&gt;
    &lt;KDUMP_IMMEDIATE_REBOOT&gt;yes&lt;/KDUMP_IMMEDIATE_REBOOT&gt;
    &lt;KDUMP_VERBOSE&gt;15&lt;/KDUMP_VERBOSE&gt;
    &lt;KEXEC_OPTIONS&gt;&lt;/KEXEC_OPTIONS&gt;
  &lt;/general&gt;
&lt;/kdump&gt;</pre></div></div></div><p>
  Kdump is enabled by default. The following configuration shows how to disable
  it.
 </p><div class="example" id="id-1.7.5.2.40.10" data-id-title="Disabled Kdump configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.71: </span><span class="title-name">Disabled Kdump configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.40.10">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;kdump&gt;
  &lt;add_crash_kernel config:type="boolean"&gt;false&lt;/add_crash_kernel&gt;
&lt;/kdump&gt;</pre></div></div></div><section class="sect2" id="CreateProfile-kdump-reservation" data-id-title="Memory reservation"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.35.1 </span><span class="title-name">Memory reservation</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-kdump-reservation">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The first step is to reserve memory for Kdump at boot-up. Because the memory
   must be reserved very early during the boot process, the configuration is
   done via a kernel command line parameter called
   <code class="literal">crashkernel</code>. The reserved memory will be used to load a
   second kernel which will be executed without rebooting if the first kernel
   crashes. This second kernel has a special initrd, which contains all
   programs necessary to save the dump over the network or to disk, send a
   notification e-mail, and finally reboot.
  </p><p>
   To reserve memory for Kdump, specify the <code class="literal">amount</code> (such as
   <code class="literal">64M</code> to reserve 64 MB of memory from the RAM) and the
   <code class="literal">offset</code>. The syntax is
   <code class="literal">crashkernel=AMOUNT@OFFSET</code>. The kernel can auto-detect the
   right offset (except for the Xen hypervisor, where you need to specify
   <code class="literal">16M</code> as offset). The amount of memory that needs to be
   reserved depends on architecture and main memory. <span class="phrase">Refer to
   <span class="intraxref">Book “System Analysis and Tuning Guide”, Chapter 20 “Kexec and Kdump”, Section 20.7.1 “Manual Kdump configuration”</span> for recommendations on the
   amount of memory to reserve for Kdump.</span>
  </p><p>
   You can also use the extended command line syntax to specify the amount of
   reserved memory depending on the System RAM. That is useful if you share one
   AutoYaST control file for multiple installations or if you often remove or
   install memory on one machine. The syntax is:
  </p><div class="verbatim-wrap"><pre class="screen">BEGIN_RANGE_1-END_RANGE_1:AMOUNT_1,BEGIN_RANGE_2-END_RANGE_2:AMOUNT_2@OFFSET</pre></div><p>
   <code class="literal">BEGIN_RANGE_1</code> is the start of the first memory range (for
   example: <code class="literal">0M</code>) and <code class="literal">END_RANGE_1</code> is the
   end of the first memory range (can be empty in case
   <code class="literal">infinity</code> should be assumed) and so on. For example,
   <code class="literal">256M-2G:64M,2G-:128M</code> reserves 64 MB of crashkernel
   memory if the system has between 256 MB and 2 GB RAM, and reserves
   128 MB of crashkernel memory if the system has more than 2 GB RAM.
  </p><p>
   On the other hand, it is possible to specify multiple values for the
   <code class="literal">crashkernel</code> parameter. For example, when you need to
   reserve different segments of low and high memory, use values like
   <code class="literal">72M,low</code> and <code class="literal">256M,high</code>:
  </p><div class="example" id="id-1.7.5.2.40.11.8" data-id-title="Kdump memory reservation with multiple values"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.72: </span><span class="title-name">Kdump memory reservation with multiple values </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.40.11.8">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;kdump&gt;
  &lt;!-- memory reservation (high and low) --&gt;
  &lt;add_crash_kernel config:type="boolean"&gt;true&lt;/add_crash_kernel&gt;
  &lt;crash_kernel config:type="list"&gt;
    &lt;listentry&gt;72M,low&lt;/listentry&gt;
    &lt;listentry&gt;256M,high&lt;/listentry&gt;
  &lt;/crash_kernel&gt;
&lt;/kdump&gt;</pre></div></div></div><p>
   The following list shows the settings necessary to reserve memory:
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Kdump memory reservation settings:XML representation </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.40.11.10">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.40.11.10.2"><span class="term"><code class="literal">add_crash_kernel</code></span></dt><dd><p>
      Set to <code class="literal">true</code> if memory should be reserved and Kdump
      enabled.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;add_crash_kernel config:type="boolean"&gt;true&lt;/add_crash_kernel&gt;</pre></div><p>
      required
     </p></dd><dt id="id-1.7.5.2.40.11.10.3"><span class="term"><code class="literal">crash_kernel</code></span></dt><dd><p>
      Use the syntax of the crashkernel command line as discussed above.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;crash_kernel&gt;256M:64M&lt;/crash_kernel&gt;</pre></div><p>
      A list of values is also supported.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;crash_kernel config:type="list"&gt;
  &lt;listentry&gt;72M,low&lt;/listentry&gt;
  &lt;listentry&gt;256M,high&lt;/listentry&gt;
&lt;/crash_kernel&gt;</pre></div><p>
      required
     </p></dd></dl></div></section><section class="sect2" id="CreateProfile-kdump-saving" data-id-title="Dump saving"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.35.2 </span><span class="title-name">Dump saving</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-kdump-saving">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   This section describes where and how crash dumps will be stored.
  </p><section class="sect3" id="CreateProfile-kdump-saving-target" data-id-title="Target"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.35.2.1 </span><span class="title-name">Target</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-kdump-saving-target">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The element <code class="literal">KDUMP_SAVEDIR</code> specifies the URL to where the
    dump is saved. The following methods are possible:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <code class="literal">file</code> to save to the local disk,
     </p></li><li class="listitem"><p>
      <code class="literal">ftp</code> to save to an FTP server (without encryption),
     </p></li><li class="listitem"><p>
      <code class="literal">sftp</code> to save to an SSH2 SFTP server,
     </p></li><li class="listitem"><p>
      <code class="literal">nfs</code> to save to an NFS location and
     </p></li><li class="listitem"><p>
      <code class="literal">cifs</code> to save the dump to a CIFS/SMP export from Samba
      or Microsoft Windows.
     </p></li></ul></div><p>
    For details see the kdump(5) manual page. Two examples are:
    <code class="literal">file:///var/crash</code> (which is the default location
    according to FHS) and
    <code class="literal">ftp://user:password@host:port/incoming/dumps</code>. A
    subdirectory, with the time stamp contained in the name, will be created
    and the dumps saved there.
   </p><p>
    When the dump is saved to the local disk,
    <code class="literal">KDUMP_KEEP_OLD_DUMPS</code> can be used to delete old dumps
    automatically. Set it to the number of old dumps that should be kept. If
    the target partition would end up with less free disk space than specified
    in <code class="literal">KDUMP_FREE_DISK_SIZE</code>, the dump is not saved.
   </p><p>
    To save the whole kernel and the debug information (if installed) to the
    same directory, set <code class="literal">KDUMP_COPY_KERNEL</code> to
    <code class="literal">true</code>. You will have everything you need to analyze the
    dump in one directory (except kernel modules and their debugging
    information).
   </p></section><section class="sect3" id="CreateProfile-kdump-saving-compression" data-id-title="Filtering and compression"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.35.2.2 </span><span class="title-name">Filtering and compression</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-kdump-saving-compression">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The kernel dump is uncompressed and unfiltered. It can get as large as your
    system RAM. To get smaller files, compress the dump file afterward. The
    dump needs to be decompressed before opening.
   </p><p>
    To use page compression, which compresses every page and allows dynamic
    decompression with the crash(8) debugging tool, set
    <code class="literal">KDUMP_DUMPFORMAT</code> to <code class="literal">compressed</code>
    (default).
   </p><p>
    You may not want to save all memory pages, for example those filled with
    zeroes. To filter the dump, set the <code class="literal">KDUMP_DUMPLEVEL</code>. 0
    produces a full dump and 31 is the smallest dump. The manual pages kdump(5)
    and makedumpfile(8) list for each value which pages will be saved.
   </p></section><section class="sect3" id="CreateProfile-kdump-saving-summary" data-id-title="Summary"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.35.2.3 </span><span class="title-name">Summary</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-kdump-saving-summary">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Dump target settings: XML representation </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.40.12.5.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.40.12.5.2.2"><span class="term"><code class="literal">KDUMP_SAVEDIR</code></span></dt><dd><p>
       A URL that specifies the target to which the dump and related files will
       be saved.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_SAVEDIR&gt;file:///var/crash/&lt;/KDUMP_SAVEDIR&gt;</pre></div><p>
       required
      </p></dd><dt id="id-1.7.5.2.40.12.5.2.3"><span class="term"><code class="literal">KDUMP_COPY_KERNEL</code></span></dt><dd><p>
       Set to <code class="literal">true</code>, if not only the dump should be saved to
       <code class="literal">KDUMP_SAVEDIR</code> but also the kernel and its debugging
       information (if installed).
      </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_COPY_KERNEL&gt;false&lt;/KDUMP_COPY_KERNEL&gt;</pre></div><p>
       optional
      </p></dd><dt id="id-1.7.5.2.40.12.5.2.4"><span class="term"><code class="literal">KDUMP_FREE_DISK_SIZE</code></span></dt><dd><p>
       Disk space in megabytes that must remain free after saving the dump. If
       not enough space is available, the dump will not be saved.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_FREE_DISK_SIZE&gt;64&lt;/KDUMP_FREE_DISK_SIZE&gt;</pre></div><p>
       optional
      </p></dd><dt id="id-1.7.5.2.40.12.5.2.5"><span class="term"><code class="literal">KDUMP_KEEP_OLD_DUMPS</code></span></dt><dd><p>
       The number of dumps that are kept (not deleted) if
       <code class="literal">KDUMP_SAVEDIR</code> points to a local directory. Specify 0
       if you do not want any dumps to be automatically deleted, specify -1 if
       all dumps except the current one should be deleted.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_KEEP_OLD_DUMPS&gt;4&lt;/KDUMP_KEEP_OLD_DUMPS&gt;</pre></div><p>
       optional
      </p></dd></dl></div></section></section><section class="sect2" id="CreateProfile-kdump-notification" data-id-title="E-mail notification"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.35.3 </span><span class="title-name">E-mail notification</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-kdump-notification">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Configure e-mail notification to be informed when a machine crashes and a
   dump is saved.
  </p><p>
   Because Kdump runs in the initrd, a local mail server cannot send the
   notification e-mail. An SMTP server needs to be specified (see below).
  </p><p>
   You need to provide exactly one address in
   <code class="literal">KDUMP_NOTIFICATION_TO</code>. More addresses can be specified in
   <code class="literal">KDUMP_NOTIFICATION_CC</code>. Only use e-mail addresses in both
   cases, not a real name.
  </p><p>
   Specify <code class="literal">KDUMP_SMTP_SERVER</code> and (if the server needs
   authentication) <code class="literal">KDUMP_SMTP_USER</code> and
   <code class="literal">KDUMP_SMTP_PASSWORD</code>. Support for TLS/SSL is not available
   but may be added in the future.
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">E-mail notification settings: XML representation </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.40.13.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.40.13.6.2"><span class="term"><code class="literal">KDUMP_NOTIFICATION_TO</code></span></dt><dd><p>
      Exactly one e-mail address to which the e-mail should be sent. Additional
      recipients can be specified in <code class="literal">KDUMP_NOTIFICATION_CC</code>.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_NOTIFICATION_TO
&gt;tux@example.com&lt;/KDUMP_NOTIFICATION_TO&gt;</pre></div><p>
      optional (notification disabled if empty)
     </p></dd><dt id="id-1.7.5.2.40.13.6.3"><span class="term"><code class="literal">KDUMP_NOTIFICATION_CC</code></span></dt><dd><p>
      Zero, one or more recipients that are in the cc line of the notification
      e-mail.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_NOTIFICATION_CC
&gt;wilber@example.com suzanne@example.com&lt;/KDUMP_NOTIFICATION_CC&gt;</pre></div><p>
      optional
     </p></dd><dt id="id-1.7.5.2.40.13.6.4"><span class="term"><code class="literal">KDUMP_SMTP_SERVER</code></span></dt><dd><p>
      Host name of the SMTP server used for mail delivery. SMTP authentication
      is supported (see <code class="literal">KDUMP_SMTP_USER</code> and
      <code class="literal">KDUMP_SMTP_PASSWORD</code>) but TLS/SSL are not.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_SMTP_SERVER&gt;email.suse.de&lt;/KDUMP_SMTP_SERVER&gt;</pre></div><p>
      optional (notification disabled if empty)
     </p></dd><dt id="id-1.7.5.2.40.13.6.5"><span class="term"><code class="literal">KDUMP_SMTP_USER</code></span></dt><dd><p>
      User name used together with <code class="literal">KDUMP_SMTP_PASSWORD</code> for
      SMTP authentication.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_SMTP_USER&gt;bwalle&lt;/KDUMP_SMTP_USER&gt;</pre></div><p>
      optional
     </p></dd><dt id="id-1.7.5.2.40.13.6.6"><span class="term"><code class="literal">KDUMP_SMTP_PASSWORD</code></span></dt><dd><p>
      Password used together with <code class="literal">KDUMP_SMTP_USER</code> for SMTP
      authentication.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_SMTP_PASSWORD&gt;geheim&lt;/KDUMP_SMTP_PASSWORD&gt;</pre></div><p>
      optional
     </p></dd></dl></div></section><section class="sect2" id="CreateProfile-kdump-kernel" data-id-title="Kdump kernel settings"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.35.4 </span><span class="title-name">Kdump kernel settings</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-kdump-kernel">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   As already mentioned, a special kernel is booted to save the dump. If you do
   not want to use the auto-detection mechanism to find out which kernel is
   used (see the kdump(5) manual page that describes the algorithm which is
   used to find the kernel), you can specify the version of a custom kernel in
   <code class="literal">KDUMP_KERNELVER</code>. If you set it to <code class="literal">foo</code>,
   then the kernel located in <code class="filename">/boot/vmlinuz-foo</code> or
   <code class="filename">/boot/vmlinux-foo</code> (in that order on platforms that have
   a <code class="filename">vmlinuz</code> file) will be used.
  </p><p>
   You can specify the command line used to boot the Kdump kernel. Normally the
   boot command line is used, minus settings that are not relevant for Kdump
   (like the <code class="literal">crashkernel</code> parameter) plus some settings
   needed by Kdump (see the manual page kdump(5)). To specify additional
   parameters, use <code class="literal">KDUMP_COMMANDLINE_APPEND</code>. If you know
   what you are doing and you want to specify the entire command line, set
   <code class="literal">KDUMP_COMMANDLINE</code>.
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Kernel settings: XML representation </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.40.14.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.40.14.4.2"><span class="term"><code class="literal">KDUMP_KERNELVER</code></span></dt><dd><p>
      Version string for the kernel used for Kdump. Leave it empty to use the
      auto-detection mechanism (strongly recommended).
     </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_KERNELVER
&gt;2.6.27-default&lt;/KDUMP_KERNELVER&gt;</pre></div><p>
      optional (auto-detection if empty)
     </p></dd><dt id="id-1.7.5.2.40.14.4.3"><span class="term"><code class="literal">KDUMP_COMMANDLINE_APPEND</code></span></dt><dd><p>
      Additional command line parameters for the Kdump kernel.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_COMMANDLINE_APPEND
&gt;console=ttyS0,57600&lt;/KDUMP_COMMANDLINE_APPEND&gt;</pre></div><p>
      optional
     </p></dd><dt id="id-1.7.5.2.40.14.4.4"><span class="term"><code class="literal">KDUMP_Command Line</code></span></dt><dd><p>
      Overwrite the automatically generated Kdump command line. Use with care.
      Usually, <code class="literal">KDUMP_COMMANDLINE_APPEND</code> should suffice.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_COMMANDLINE_APPEND
&gt;root=/dev/sda5 maxcpus=1 irqpoll&lt;/KDUMP_COMMANDLINE&gt;</pre></div><p>
      optional
     </p></dd></dl></div></section><section class="sect2" id="CreateProfile-kdump-expert" data-id-title="Expert settings"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.35.5 </span><span class="title-name">Expert settings</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-kdump-expert">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Expert settings: XML representations </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.40.15.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_kernel_dumps.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.5.2.40.15.2.2"><span class="term"><code class="literal">KDUMP_IMMEDIATE_REBOOT</code></span></dt><dd><p>
      <code class="literal">true</code> if the system should be rebooted automatically
      after the dump has been saved, <code class="literal">false</code> otherwise. The
      default is to reboot the system automatically.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_IMMEDIATE_REBOOT
&gt;true&lt;/KDUMP_IMMEDIATE_REBOOT&gt;</pre></div><p>
      optional
     </p></dd><dt id="id-1.7.5.2.40.15.2.3"><span class="term"><code class="literal">KDUMP_VERBOSE</code></span></dt><dd><p>
      Bitmask that specifies how verbose the Kdump process should be. Read
      kdump(5) for details.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;KDUMP_VERBOSE&gt;3&lt;/KDUMP_VERBOSE&gt;</pre></div><p>
      optional
     </p></dd><dt id="id-1.7.5.2.40.15.2.4"><span class="term"><code class="literal">KEXEC_OPTIONS</code></span></dt><dd><p>
      Additional options that are passed to kexec when loading the Kdump
      kernel. Normally empty.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;KEXEC_OPTIONS&gt;--noio&lt;/KEXEC_OPTIONS&gt;</pre></div><p>
      optional
     </p></dd></dl></div></section></section><section class="sect1" id="CreateProfile-dns-server" data-id-title="DNS server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.36 </span><span class="title-name">DNS server</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-dns-server">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_dns_server.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The Bind DNS server can be configured by adding a <code class="literal">dns-server</code>
    resource. The three more straightforward properties of that resource can
    have a value of 1 to enable them or 0 to disable.
   </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          <p>
           Attribute
          </p>
         </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          <p>
           Value
          </p>
         </th><th style="border-bottom: 1px solid ; ">
          <p>
           Description
          </p>
         </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          <p>
           <code class="literal">chroot</code>
          </p>
         </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          <p>
           0 / 1
          </p>
         </td><td style="border-bottom: 1px solid ; ">
          <p>
           The DNS server must be jailed in a chroot.
          </p>
         </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          <p>
           <code class="literal">start_service</code>
          </p>
         </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          <p>
           0 / 1
          </p>
         </td><td style="border-bottom: 1px solid ; ">
          <p>
           Bind is enabled (executed on system start).
          </p>
         </td></tr><tr><td style="border-right: 1px solid ; ">
          <p>
           <code class="literal">use_ldap</code>
          </p>
         </td><td style="border-right: 1px solid ; ">
          <p>
           0 / 1
          </p>
         </td><td>
          <p>
           Store the settings in LDAP instead of native configuration files.
          </p>
         </td></tr></tbody></table></div><div class="example" id="id-1.7.5.2.41.5" data-id-title="Basic DNS server settings"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.73: </span><span class="title-name">Basic DNS server settings </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.41.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_dns_server.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;dns-server&gt;
  &lt;chroot&gt;0&lt;/chroot&gt;
  &lt;start_service&gt;1&lt;/start_service&gt;
  &lt;use_ldap&gt;0&lt;/use_ldap&gt;
&lt;/dns-server&gt;</pre></div></div></div><p>
    In addition to those basic settings, there are three properties of type
    list that can be used to fine-tune the service configuration.
   </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         List
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Description
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">logging</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Options of the DNS server logging.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">options</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Bind options like the files and directories to use, the list of
         forwarders and other configuration settings.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <code class="literal">zones</code>
        </p>
       </td><td>
        <p>
         List of DNS zones known by the server, including all the settings,
         records and SOA records.
        </p>
       </td></tr></tbody></table></div><div class="example" id="id-1.7.5.2.41.8" data-id-title="Configuring DNS server zones and advanced settings"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.74: </span><span class="title-name">Configuring DNS server zones and advanced settings </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.41.8">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_dns_server.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;dns-server&gt;
  &lt;logging config:type="list"&gt;
    &lt;listentry&gt;
      &lt;key&gt;channel&lt;/key&gt;
      &lt;value&gt;log_syslog { syslog; }&lt;/value&gt;
    &lt;/listentry&gt;
  &lt;/logging&gt;
  &lt;options config:type="list"&gt;
    &lt;option&gt;
      &lt;key&gt;forwarders&lt;/key&gt;
      &lt;value&gt;{ 10.10.0.1; }&lt;/value&gt;
    &lt;/option&gt;
  &lt;/options&gt;
  &lt;zones config:type="list"&gt;
    &lt;listentry&gt;
      &lt;is_new&gt;1&lt;/is_new&gt;
      &lt;modified&gt;1&lt;/modified&gt;
      &lt;options config:type="list"/&gt;
      &lt;records config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;mydom.uwe.&lt;/key&gt;
          &lt;type&gt;MX&lt;/type&gt;
          &lt;value&gt;0 mail.mydom.uwe.&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;mydom.uwe.&lt;/key&gt;
          &lt;type&gt;NS&lt;/type&gt;
          &lt;value&gt;ns.mydom.uwe.&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/records&gt;
      &lt;soa&gt;
        &lt;expiry&gt;1w&lt;/expiry&gt;
        &lt;mail&gt;root.aaa.aaa.cc.&lt;/mail&gt;
        &lt;minimum&gt;1d&lt;/minimum&gt;
        &lt;refresh&gt;3h&lt;/refresh&gt;
        &lt;retry&gt;1h&lt;/retry&gt;
        &lt;serial&gt;2005082300&lt;/serial&gt;
        &lt;server&gt;aaa.aaa.cc.&lt;/server&gt;
        &lt;zone&gt;@&lt;/zone&gt;
      &lt;/soa&gt;
      &lt;soa_modified&gt;1&lt;/soa_modified&gt;
      &lt;ttl&gt;2d&lt;/ttl&gt;
      &lt;type&gt;master&lt;/type&gt;
      &lt;update_actions config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;mydom.uwe.&lt;/key&gt;
          &lt;operation&gt;add&lt;/operation&gt;
          &lt;type&gt;NS&lt;/type&gt;
          &lt;value&gt;ns.mydom.uwe.&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/update_actions&gt;
      &lt;zone&gt;mydom.uwe&lt;/zone&gt;
    &lt;/listentry&gt;
  &lt;/zones&gt;
&lt;/dns-server&gt;</pre></div></div></div></section><section class="sect1" id="CreateProfile-dhcp-server" data-id-title="DHCP server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.37 </span><span class="title-name">DHCP server</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-dhcp-server">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_dhcp_server.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="literal">dhcp-server</code> resource makes it possible to configure
    all the settings of a DHCP server by means of the six following properties.
   </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Element
        </p>
       </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Value
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Description
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">chroot</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         0 / 1
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         A value of 1 means that the DHCP server must be jailed in a chroot.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">start_service</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         0 / 1
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Set this to 1 to enable the DHCP server (that is, run it on system start-up).
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">use_ldap</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         0 / 1
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         If set to 1, the settings will be stored in LDAP instead of native configuration files.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">other_options</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Text
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         String with parameters that will be passed to the DHCP server executable
         when started. For example, use "-p 1234" to listen on a non-standard
         1234 port. For all possible options, consult the dhcpd manual page. If
         left blank, default values will be used.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">allowed_interfaces</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         List
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         List of network cards in which the DHCP server will be operating.
         See the example below for the exact format.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <code class="literal">settings</code>
        </p>
       </td><td style="border-right: 1px solid ; ">
        <p>
         List
        </p>
       </td><td>
        <p>
         List of settings to configure the behavior of the DHCP server. The
         configuration is defined in a tree-like structure where the root
         represents the global options, with subnets and host nested from there.
         The <code class="literal">children</code>, <code class="literal">parent_id</code> and
         <code class="literal">parent_type</code> properties are used to represent that
         nesting. See the example below for the exact format.
        </p>
       </td></tr></tbody></table></div><div class="example" id="id-1.7.5.2.42.5" data-id-title="Example dhcp-server section"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.75: </span><span class="title-name">Example dhcp-server section </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.42.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_dhcp_server.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;dhcp-server&gt;
  &lt;allowed_interfaces config:type="list"&gt;
    &lt;allowed_interface&gt;eth0&lt;/allowed_interface&gt;
  &lt;/allowed_interfaces&gt;
  &lt;chroot&gt;0&lt;/chroot&gt;
  &lt;other_options&gt;-p 9000&lt;/other_options&gt;
  &lt;start_service&gt;1&lt;/start_service&gt;
  &lt;use_ldap&gt;0&lt;/use_ldap&gt;

  &lt;settings config:type="list"&gt;
    &lt;settings_entry&gt;
      &lt;children config:type="list"/&gt;
      &lt;directives config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;fixed-address&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;192.168.0.10&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;hardware&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;ethernet d4:00:00:bf:00:00&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/directives&gt;
      &lt;id&gt;static10&lt;/id&gt;
      &lt;options config:type="list"/&gt;
      &lt;parent_id&gt;192.168.0.0 netmask 255.255.255.0&lt;/parent_id&gt;
      &lt;parent_type&gt;subnet&lt;/parent_type&gt;
      &lt;type&gt;host&lt;/type&gt;
    &lt;/settings_entry&gt;
    &lt;settings_entry&gt;
      &lt;children config:type="list"&gt;
        &lt;child&gt;
          &lt;id&gt;static10&lt;/id&gt;
          &lt;type&gt;host&lt;/type&gt;
        &lt;/child&gt;
      &lt;/children&gt;
      &lt;directives config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;range&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;dynamic-bootp 192.168.0.100 192.168.0.150&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;default-lease-time&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;14400&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;max-lease-time&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;86400&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/directives&gt;
      &lt;id&gt;192.168.0.0 netmask 255.255.255.0&lt;/id&gt;
      &lt;options config:type="list"/&gt;
      &lt;parent_id/&gt;
      &lt;parent_type/&gt;
      &lt;type&gt;subnet&lt;/type&gt;
    &lt;/settings_entry&gt;
    &lt;settings_entry&gt;
      &lt;children config:type="list"&gt;
        &lt;child&gt;
          &lt;id&gt;192.168.0.0 netmask 255.255.255.0&lt;/id&gt;
          &lt;type&gt;subnet&lt;/type&gt;
        &lt;/child&gt;
      &lt;/children&gt;
      &lt;directives config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;ddns-update-style&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;none&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;default-lease-time&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;14400&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/directives&gt;
      &lt;id/&gt;
      &lt;options config:type="list"/&gt;
      &lt;parent_id/&gt;
      &lt;parent_type/&gt;
      &lt;type/&gt;
    &lt;/settings_entry&gt;
  &lt;/settings&gt;
&lt;/dhcp-server&gt;</pre></div></div></div></section><section class="sect1" id="CreateProfile-firewall" data-id-title="Firewall configuration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.38 </span><span class="title-name">Firewall configuration</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-firewall">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_firewall.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  SuSEfirewall2 has been replaced by <code class="systemitem">firewalld</code> starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
  <span class="phrase">15 GA</span>.
  Profiles using SuSEfirewall2 properties will be translated to <code class="systemitem">firewalld</code>
  profiles. However, not all profile properties can be converted.
  <span class="phrase">For details about <code class="systemitem">firewalld</code>, refer to
  <span class="intraxref">Book “Security and Hardening Guide”, Chapter 23 “Masquerading and firewalls”, Section 23.4 “<code class="systemitem">firewalld</code>”</span></span>.
 </p><div id="id-1.7.5.2.43.4" data-id-title="Limited backward compatibility with SuSEFirewall2 based profiles" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Limited backward compatibility with SuSEFirewall2 based profiles</div><p>
   The use of SuSEfirewall2-based profiles will be only partially supported as
   many options are not valid in <code class="systemitem">firewalld</code>, and some missing configuration
   could affect your network security.
  </p></div><section class="sect2" id="CreateProfile-firewall-general" data-id-title="General firewall configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.38.1 </span><span class="title-name">General firewall configuration</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-firewall-general">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_firewall.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In <code class="systemitem">firewalld</code>, the general configuration only exposes a few properties, and
   most of the configuration is done by zones.
  </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Attribute
       </p>
      </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Value
       </p>
      </th><th style="border-bottom: 1px solid ; ">
       <p>
        Description
       </p>
      </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">start_firewall</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Boolean
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Whether <code class="systemitem">firewalld</code> should be started right after applying the
        configuration.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">enable_firewall</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Boolean
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Whether <code class="systemitem">firewalld</code> should be started on every system start-up.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">default_zone</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Zone name
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        The default zone is used for everything that is not explicitly
        assigned.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">log_denied_packets</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Type of dropped packets to be logged
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Enable logging of dropped packets for the type selected. Values:
        <code class="literal">off</code>, <code class="literal">unicast</code>,
        <code class="literal">multicast</code>, <code class="literal">broadcast</code>,
        <code class="literal">all</code>.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">name</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Identifier of zone
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Used to identify a zone. If the zone is not known yet, a new zone will
        be created.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">short</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Short summary of zone
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Briefly summarizes the purpose of the zone. Ignored for already
        existing zones. If not specified, the name is used.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">description</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Description of zone
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Describes the purpose of the zone. Ignored for already existing zones.
        If not specified, the name is used.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        <code class="literal">target</code>
       </p>
      </td><td style="border-right: 1px solid ; ">
       <p>
        Default action
       </p>
      </td><td>
       <p>
        Defines the default action in the zone if no rule matches. Possible
        values are <code class="literal">ACCEPT</code>, <code class="literal">%%REJECT%%</code>,
        <code class="literal">DROP</code> and <code class="literal">default</code>. If not
        specified, <code class="literal">default</code> is used. For details about
        values, see
        <a class="link" href="https://firewalld.org/documentation/zone/options.html" target="_blank">https://firewalld.org/documentation/zone/options.html</a>.
       </p>
      </td></tr></tbody></table></div></section><section class="sect2" id="CreateProfile-firewall-zones" data-id-title="Firewall zones configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.38.2 </span><span class="title-name">Firewall zones configuration</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-firewall-zones">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_firewall.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The configuration of <code class="systemitem">firewalld</code> is based on the existence of several zones,
   which define the trust level for a connection, interface, or source address.
   The behavior of each zone can be tweaked in several ways although not all
   the properties are exposed yet.
  </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Attributes
       </p>
      </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Value
       </p>
      </th><th style="border-bottom: 1px solid ; ">
       <p>
        Description
       </p>
      </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">interfaces</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        List of interface names
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        List of interface names assigned to this zone. Interfaces or sources
        can only be part of one zone.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">services</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        List of services
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        List of services accessible in this zone.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">ports</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        List of ports
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        List of single ports or ranges to be opened in the assigned zone.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">protocols</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        List of protocols
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        List of protocols to be opened or be accessible in the assigned zone.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        <code class="literal">masquerade</code>
       </p>
      </td><td style="border-right: 1px solid ; ">
       <p>
        Enable masquerade
       </p>
      </td><td>
       <p>
        It will enable or disable network address translation
        <span class="emphasis"><em>(NAT)</em></span> in the assigned zone.
       </p>
      </td></tr></tbody></table></div></section><section class="sect2" id="CreateProfile-firewall-stage" data-id-title="Installation stages when the firewalld profile is applied"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.38.3 </span><span class="title-name">Installation stages when the <code class="systemitem">firewalld</code> profile is applied</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-firewall-stage">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_firewall.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15 SP3, the <code class="systemitem">firewalld</code> profile is
   usually applied at the end of the first stage of the installation. (To learn
   about the installation stages, see <a class="xref" href="#overviewandconcept" title="1.2. Overview and concept">Section 1.2, “Overview and concept”</a>.)
   However, there are circumstances where the profile is applied in the second
   stage. The following list specifies the conditions under which the
   <code class="systemitem">firewalld</code> profile is applied in the first or second stage:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     You are running AutoYaST with a <code class="systemitem">firewalld</code> section, and not installing SLE
     over SSH or VNC. The firewall is configured in the first stage.
    </p></li><li class="listitem"><p>
     You are running AutoYaST with a <code class="systemitem">firewalld</code> section, installing SLE over
     SSH or VNC, and no second stage is required. The firewall is configured in
     the first stage.
    </p></li><li class="listitem"><p>
     You are running AutoYaST with a <code class="systemitem">firewalld</code> section, installing SLE over
     SSH or VNC, and the second stage is required. The firewall is configured
     in the second stage.
    </p></li><li class="listitem"><p>
     You are running AutoYaST without a <code class="systemitem">firewalld</code> section. The firewall is
     configured in the first stage according to the default product proposals.
    </p></li><li class="listitem"><p>
     You are running AutoYaST with or without a firewall section, together with
     custom script which requires network access. The firewall is configured in
     the first stage either according to the profile or the product proposals,
     and the firewall configuration must be adapted so that the custom script
     has network access as needed.
    </p></li></ul></div></section><section class="sect2" id="CreateProfile-firewall-example" data-id-title="A full example"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.38.4 </span><span class="title-name">A full example</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-firewall-example">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_firewall.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A full example of the firewall section, including general and zone specific
   properties, could look like this.
  </p><div class="example" id="id-1.7.5.2.43.8.3" data-id-title="Example firewall section"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.76: </span><span class="title-name">Example firewall section </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.43.8.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_firewall.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;firewall&gt;
  &lt;enable_firewall config:type="boolean"&gt;true&lt;/enable_firewall&gt;
  &lt;log_denied_packets&gt;all&lt;/log_denied_packets&gt;
  &lt;default_zone&gt;external&lt;/default_zone&gt;
  &lt;zones config:type="list"&gt;
    &lt;zone&gt;
      &lt;name&gt;public&lt;/name&gt;
      &lt;interfaces config:type="list"&gt;
        &lt;interface&gt;eth0&lt;/interface&gt;
      &lt;/interfaces&gt;
      &lt;services config:type="list"&gt;
        &lt;service&gt;ssh&lt;/service&gt;
        &lt;service&gt;dhcp&lt;/service&gt;
        &lt;service&gt;dhcpv6&lt;/service&gt;
        &lt;service&gt;samba&lt;/service&gt;
        &lt;service&gt;vnc-server&lt;/service&gt;
      &lt;/services&gt;
      &lt;ports config:type="list"&gt;
        &lt;port&gt;21/udp&lt;/port&gt;
        &lt;port&gt;22/udp&lt;/port&gt;
        &lt;port&gt;80/tcp&lt;/port&gt;
        &lt;port&gt;443/tcp&lt;/port&gt;
        &lt;port&gt;8080/tcp&lt;/port&gt;
      &lt;/ports&gt;
    &lt;/zone&gt;
    &lt;zone&gt;
      &lt;name&gt;dmz&lt;/name&gt;
      &lt;interfaces config:type="list"&gt;
        &lt;interface&gt;eth1&lt;/interface&gt;
      &lt;/interfaces&gt;
    &lt;/zone&gt;
  &lt;/zones&gt;
&lt;/firewall&gt;</pre></div></div></div></section></section><section class="sect1" id="CreateProfile-Hardware" data-id-title="Miscellaneous hardware and system components"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.39 </span><span class="title-name">Miscellaneous hardware and system components</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Hardware">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_hardware.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In addition to the core component configuration, like network
    authentication and security, AutoYaST offers a wide range of hardware and
    system configuration options, the same as available by default on any
    system installed manually and in an interactive way. For example, it is
    possible to configure printers, sound devices, TV cards and any other
    hardware components which have a module within YaST.
   </p><p>
    Any new configuration options added to YaST will be automatically
    available in AutoYaST.
   </p><section class="sect2" id="CreateProfile-Hardware-Printer" data-id-title="Printer"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.39.1 </span><span class="title-name">Printer</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Hardware-Printer">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_hardware.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     AutoYaST support for printing is limited to basic settings defining how
     CUPS is used on a client for printing via the network.
    </p><p>
     There is no AutoYaST support for setting up local print queues. Modern
     printers are usually connected via USB. CUPS accesses USB printers by a
     model-specific device URI like
     <code class="literal">usb://ACME/FunPrinter?serial=1a2b3c</code>. Usually it is
     not possible to predict the correct USB device URI in advance, because
     it is determined by the CUPS back-end <code class="literal">usb</code> during
     runtime. Therefore it is not possible to set up local print queues with
     AutoYaST.
    </p><p>
     Basics on how CUPS is used on a client workstation to print via
     network:
    </p><p>
     On client workstations application programs submit print jobs to the
     CUPS daemon process (<code class="systemitem">cupsd</code>).
     <code class="systemitem">cupsd</code> forwards the print jobs to a CUPS print
     server in the network where the print jobs are processed. The server
     sends the printer specific data to the printer device.
    </p><p>
     If there is only a single CUPS print server in the network, there is no
     need to have a CUPS daemon running on each client workstation. Instead
     it is simpler to specify the CUPS server in
     <code class="filename">/etc/cups/client.conf</code> and access it directly (only
     one CUPS server entry can be set). In this case application programs
     that run on client workstations submit print jobs directly to the
     specified CUPS print server.
    </p><p>
     <a class="xref" href="#printer-conf" title="Printer configuration">Example 4.77, “Printer configuration”</a> shows a <code class="literal">printer</code>
     configuration section. The <code class="literal">cupsd_conf_content</code> entry
     contains the whole verbatim content of the
     <code class="systemitem">cupsd</code> configuration file
     <code class="filename">/etc/cups/cupsd.conf</code>. The
     <code class="literal">client_conf_content</code> entry contains the whole
     verbatim content of <code class="filename">/etc/cups/client.conf</code>. The
     <code class="literal">printer</code> section contains the
     <code class="systemitem">cupsd</code> configuration but it does
     not specify whether the cupsd should run.
    </p><div class="example" id="printer-conf" data-id-title="Printer configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.77: </span><span class="title-name">Printer configuration </span></span><a title="Permalink" class="permalink" href="#printer-conf">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_hardware.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">  &lt;printer&gt;
    &lt;client_conf_content&gt;
      &lt;file_contents&gt;&lt;![CDATA[
... verbatim content of /etc/cups/client.conf ...
]]&gt;&lt;/file_contents&gt;
    &lt;/client_conf_content&gt;
    &lt;cupsd_conf_content&gt;
      &lt;file_contents&gt;&lt;![CDATA[
... verbatim content of /etc/cups/cupsd.conf ...
]]&gt;&lt;/file_contents&gt;
    &lt;/cupsd_conf_content&gt;
  &lt;/printer&gt;</pre></div></div></div><div id="id-1.7.5.2.44.5.9" data-id-title="/etc/cups/cups-files.conf" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: <code class="filename">/etc/cups/cups-files.conf</code></div><p>
      With release 1.6 the CUPS configuration file has been split into two
      files: <code class="filename">cupsd.conf</code> and
      <code class="filename">cups-files.conf</code>. As of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP4</span></span>,
      AutoYaST only supports modifying <code class="filename">cupsd.conf</code> since
      the default settings in <code class="filename">cups-files.conf</code> are
      sufficient for usual printing setups.
     </p></div></section><section class="sect2" id="CreateProfile-Hardware-Sound" data-id-title="Sound devices"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.39.2 </span><span class="title-name">Sound devices</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-Hardware-Sound">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_hardware.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     An example of the sound configuration created using the configuration
     system is shown below.
    </p><div class="example" id="id-1.7.5.2.44.6.3" data-id-title="Sound configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.78: </span><span class="title-name">Sound configuration </span></span><a title="Permalink" class="permalink" href="#id-1.7.5.2.44.6.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_hardware.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;sound&gt;
  &lt;autoinstall config:type="boolean"&gt;true&lt;/autoinstall&gt;
  &lt;modules_conf config:type="list"&gt;
    &lt;module_conf&gt;
      &lt;alias&gt;snd-card-0&lt;/alias&gt;
      &lt;model&gt;M5451, ALI&lt;/model&gt;
      &lt;module&gt;snd-ali5451&lt;/module&gt;
      &lt;options&gt;
        &lt;snd_enable&gt;1&lt;/snd_enable&gt;
        &lt;snd_index&gt;0&lt;/snd_index&gt;
        &lt;snd_pcm_channels&gt;32&lt;/snd_pcm_channels&gt;
      &lt;/options&gt;
    &lt;/module_conf&gt;
  &lt;/modules_conf&gt;
  &lt;volume_settings config:type="list"&gt;
    &lt;listentry&gt;
      &lt;Master config:type="integer"&gt;75&lt;/Master&gt;
    &lt;/listentry&gt;
  &lt;/volume_settings&gt;
&lt;/sound&gt;</pre></div></div></div></section></section><section class="sect1" id="CreateProfile-SSHKeysAndConfig" data-id-title="Importing SSH keys and configuration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.40 </span><span class="title-name">Importing SSH keys and configuration</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-SSHKeysAndConfig">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_import_ssh.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  YaST allows SSH keys and server configuration to be imported from previous
  installations. The behavior of this feature can also be controlled through an
  AutoYaST profile.
 </p><div class="example" id="import-ssh" data-id-title="Importing SSH keys and configuration from /dev/sda2"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.79: </span><span class="title-name">Importing SSH keys and configuration from /dev/sda2 </span></span><a title="Permalink" class="permalink" href="#import-ssh">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_import_ssh.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;ssh_import&gt;
  &lt;import config:type="boolean"&gt;true&lt;/import&gt;
  &lt;copy_config config:type="boolean"&gt;true&lt;/copy_config&gt;
  &lt;device&gt;/dev/sda2&lt;/device&gt;
&lt;/ssh_import&gt;</pre></div></div></div><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       Attributes
      </p>
     </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       Value
      </p>
     </th><th style="border-bottom: 1px solid ; ">
      <p>
       Description
      </p>
     </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="literal">import</code>
      </p>
     </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       true / false
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       SSH keys will be imported. If set to <code class="literal">false</code>, nothing
       will be imported.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="literal">copy_config</code>
      </p>
     </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       true / false
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Additionally, SSH server configuration will be imported. This setting
       will not have effect if <code class="literal">import</code> is set to
       <code class="literal">false</code>.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; ">
      <p>
       <code class="literal">device</code>
      </p>
     </td><td style="border-right: 1px solid ; ">
      <p>
       Partition
      </p>
     </td><td>
      <p>
       Partition to import keys and configuration from. If it is not set, the
       partition which contains the most recently accessed key is used.
      </p>
     </td></tr></tbody></table></div></section><section class="sect1" id="CreateProfile-ConfigurationManagement" data-id-title="Configuration management"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.41 </span><span class="title-name">Configuration management</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-ConfigurationManagement">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_configuration_management.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  AutoYaST allows delegating part of the configuration to a <span class="emphasis"><em>configuration
  management tool</em></span> like Salt. AutoYaST takes care of the basic system
  installation (partitioning, network setup, etc.) and the remaining
  configuration tasks can be delegated.
 </p><div id="id-1.7.5.2.46.4" data-id-title="Only Salt is supported" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Only Salt is supported</div><p>
   Although Puppet is mentioned in this document, only Salt is
   supported. Nevertheless, feel free to report any problems you might find
   with Puppet.
  </p></div><p>
  AutoYaST supports two different approaches:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Using a configuration management server. In this case, AutoYaST sets up a
    configuration management tool. It connects to a master server to get the
    instructions to configure the system.
   </p></li><li class="listitem"><p>
    Getting the configuration from elsewhere (for example, an HTTP server or a
    flash disk like a USB stick) and running the configuration management tool
    in stand-alone mode.
   </p></li></ul></div><section class="sect2" id="CreateProfile-ConfigurationManagement-Server" data-id-title="Connecting to a configuration management server"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.41.1 </span><span class="title-name">Connecting to a configuration management server</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-ConfigurationManagement-Server">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_configuration_management.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   This approach is especially useful when a configuration management server (a
   <span class="emphasis"><em>master</em></span> in Salt and Puppet jargon) is already in place.
   In this case, the hardest part might be to set up a proper authentication
   mechanism.
  </p><p>
   Both Salt and Puppet support the following authentication methods:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Manual authentication on the fly. When AutoYaST starts the client, a new
     authentication request is generated. The administrator can manually accept
     this request on the server. AutoYaST will retry the connection. If the key was
     accepted meanwhile, AutoYaST continues the installation.
    </p></li><li class="listitem"><p>
     Using a preseed key. Refer to the documentation of your configuration
     management system of choice to find out how to generate them. Use the
     <code class="literal">keys_url</code> option to tell AutoYaST where to look for them.
    </p></li></ul></div><p>
   With the configuration example below, AutoYaST will launch the client to
   generate the authentication request. It will try to connect up to three
   times, waiting 15 seconds between each try.
  </p><div class="example" id="configuration-management-manual-authentication" data-id-title="Client/server with manual authentication"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.80: </span><span class="title-name">Client/server with manual authentication </span></span><a title="Permalink" class="permalink" href="#configuration-management-manual-authentication">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_configuration_management.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;configuration_management&gt;
    &lt;type&gt;salt&lt;/type&gt;
    &lt;master&gt;my-salt-server.example.net&lt;/master&gt;
    &lt;auth_attempts config:type="integer"&gt;3&lt;/auth_attempts&gt;
    &lt;auth_time_out config:type="integer"&gt;15&lt;/auth_time_out&gt;
&lt;/configuration_management&gt;</pre></div></div></div><p>
   However, with the following example, AutoYaST will retrieve the keys from a
   flash disk (for example, a USB stick) and will use them to connect to the
   master server.
  </p><div class="example" id="configuration-management-preseed-keys" data-id-title="Client/server with preseed keys"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.81: </span><span class="title-name">Client/server with preseed keys </span></span><a title="Permalink" class="permalink" href="#configuration-management-preseed-keys">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_configuration_management.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;configuration_management&gt;
    &lt;type&gt;salt&lt;/type&gt;
    &lt;master&gt;my-salt-server.example.net&lt;/master&gt;
    &lt;keys_url&gt;usb:/&lt;/keys_url&gt;
&lt;/configuration_management&gt;</pre></div></div></div><p>
   The table below summarizes the supported options for these scenarios.
  </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Attributes
       </p>
      </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Value
       </p>
      </th><th style="border-bottom: 1px solid ; ">
       <p>
        Description
       </p>
      </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">type</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        String
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Configuration management name. Currently only <code class="literal">salt</code>
        is supported.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">master</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        String
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Host name or IP address of the configuration management server.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">auth_attempts</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Integer
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Maximum attempts to connect to the server. The default is three
        attempts.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">auth_time_out</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Integer
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Time (in seconds) between attempts to connect to the server. The
        default is 15 seconds.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">keys_url</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        URL of used key
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Path to an HTTP server, hard disk, flash disk or similar with the files
        <code class="literal">default.key</code> and <code class="literal">default.pub</code>. This
        key must be known to the configuration management master.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        <code class="literal">enable_services</code>
       </p>
      </td><td style="border-right: 1px solid ; ">
       <p>
        True/False
       </p>
      </td><td>
       <p>
        Enables the configuration management services on the client side after
        the installation. The default is <code class="literal">true</code>.
       </p>
      </td></tr></tbody></table></div></section><section class="sect2" id="CreateProfile-ConfigurationManagement-Masterless" data-id-title="Running in stand-alone mode"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.41.2 </span><span class="title-name">Running in stand-alone mode</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-ConfigurationManagement-Masterless">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_configuration_management.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For simple scenarios, deploying a configuration management server is
   unnecessary. Instead, use Salt or Puppet in <span class="emphasis"><em>stand-alone</em></span>
   (or <span class="emphasis"><em>masterless</em></span>) mode.
  </p><p>
   As there is no server, AutoYaST needs to know where to get the configuration
   from. Put the configuration into a TAR archive and store it anywhere (for
   example, on a flash disk, an HTTP/HTTPS server, an NFS/SMB share).
  </p><p>
   The TAR archive must have the same layout that is expected under
   <code class="literal">/srv</code> in a Salt server. This means that you need to place
   your Salt states in a <code class="filename">salt</code> directory and your formulas
   in a separate <code class="filename">formulas</code> directory.
  </p><p>
   Additionally, you can have a <code class="filename">pillar</code> directory
   containing the pillar data. Alternatively, you can provide that data in a
   separate TAR archive by using the <code class="literal">pillar_url</code> option.
  </p><div class="example" id="configuration-management-masterless" data-id-title="Stand-alone mode"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 4.82: </span><span class="title-name">Stand-alone mode </span></span><a title="Permalink" class="permalink" href="#configuration-management-masterless">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_configuration_management.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;configuration_management&gt;
    &lt;type&gt;salt&lt;/type&gt;
    &lt;states_url&gt;my-salt-server.example.net&lt;/states_url&gt;
    &lt;pillar_url&gt;my-salt-server.example.net&lt;/pillar_url&gt;
&lt;/configuration_management&gt;</pre></div></div></div><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Attributes
       </p>
      </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Value
       </p>
      </th><th style="border-bottom: 1px solid ; ">
       <p>
        Description
       </p>
      </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">type</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        String
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Configuration management name. Currently only <code class="literal">salt</code>
        is supported.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">states_url</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        URL
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Location of the Salt states TAR archive. It may include formulas and
        pillars. Files must be located in a <code class="filename">salt</code>
        directory.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">pillar_url</code>
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        URL
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Location of the TAR archive that contains the pillars.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        <code class="literal">modules_url</code>
       </p>
      </td><td style="border-right: 1px solid ; ">
       <p>
        URL
       </p>
      </td><td>
       <p>
        Location of Puppet modules.
       </p>
      </td></tr></tbody></table></div></section><section class="sect2" id="CreateProfile-ConfigurationManagement-SUMAFormulasSupport" data-id-title="SUSE Manager Salt formulas support"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.41.3 </span><span class="title-name">SUSE Manager Salt formulas support</span></span> <a title="Permalink" class="permalink" href="#CreateProfile-ConfigurationManagement-SUMAFormulasSupport">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_configuration_management.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   AutoYaST offers support for SUSE Manager Salt formulas when running in stand-alone
   mode. In case a formula is found in the states TAR archive, AutoYaST displays a
   screen which allows the user to select and configure the formulas to apply.
  </p><p>
   Bear in mind that this feature defeats the AutoYaST purpose of performing an
   unattended installation, as AutoYaST will wait for the user's input.
  </p></section></section></section></div><div class="part" id="part-dynamic-profiles" data-id-title="Managing mass installations with dynamic profiles"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part III </span><span class="title-name">Managing mass installations with dynamic profiles </span></span><a title="Permalink" class="permalink" href="#part-dynamic-profiles">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_autoyast.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#dynamic-profiles"><span class="title-number">5 </span><span class="title-name">Supported approaches to dynamic profiles</span></a></span></li><dd class="toc-abstract"><p>
  When dealing with the installation of multiple systems, it might be useful to
  use a single profile (or a reduced set of them) that adapts automatically to
  each system. In this regard, AutoYaST offers three different mechanisms to modify
  the profile at installation time.
 </p></dd><li><span class="chapter"><a href="#rulesandclass"><span class="title-number">6 </span><span class="title-name">Rules and classes</span></a></span></li><dd class="toc-abstract"><p>
  Rules and classes allow customizing installations for sets of machines in
  different ways:
 </p></dd><li><span class="chapter"><a href="#erb-templates"><span class="title-number">7 </span><span class="title-name">ERB templates</span></a></span></li><dd class="toc-abstract"><p>
  ERB templates are for embedding Ruby code within an AutoYaST profile to modify
  the profile during the installation. With this approach, you can inspect
  the system and adjust the profile by setting values, adding or skipping
  sections, and so on.
 </p></dd><li><span class="chapter"><a href="#pre-scripts"><span class="title-number">8 </span><span class="title-name">Combining ERB templates and scripts</span></a></span></li><dd class="toc-abstract"><p>
  <a class="xref" href="#pre-install-scripts" title="4.31.1. Pre-scripts">Section 4.31.1, “Pre-scripts”</a> already describes how to use a
  pre-script to modify the current profile. In a nutshell, if the script
  creates a <code class="filename">/tmp/profile/modified.xml</code> file, AutoYaST imports
  that profile and forgets about the initial one.
 </p></dd></ul></div><section class="chapter" id="dynamic-profiles" data-id-title="Supported approaches to dynamic profiles"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">5 </span><span class="title-name">Supported approaches to dynamic profiles</span></span> <a title="Permalink" class="permalink" href="#dynamic-profiles">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_dynamic_profiles.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  When dealing with the installation of multiple systems, it might be useful to
  use a single profile (or a reduced set of them) that adapts automatically to
  each system. In this regard, AutoYaST offers three different mechanisms to modify
  the profile at installation time.
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.6.2.4.1"><span class="term">Rules and classes</span></dt><dd><p>
     Rules and classes offer the possibility to configure a system by merging
     multiple control files during installation. You can read more about this
     feature in the <a class="xref" href="#rulesandclass" title="Chapter 6. Rules and classes">Chapter 6, <em>Rules and classes</em></a> section.
    </p></dd><dt id="id-1.7.6.2.4.2"><span class="term">ERB templates</span></dt><dd><p>
     AutoYaST supports Embedded Ruby (ERB) templates syntax to modify the profile's
     content during installation. The <a class="xref" href="#erb-templates" title="Chapter 7. ERB templates">Chapter 7, <em>ERB templates</em></a>
     section describes how to use them.
    </p></dd><dt id="id-1.7.6.2.4.3"><span class="term">Pre-installation scripts</span></dt><dd><p>
     You can use a pre-installation script to modify or even create a brand new
     profile during installation. <a class="xref" href="#pre-install-scripts" title="4.31.1. Pre-scripts">Section 4.31.1, “Pre-scripts”</a>
     describes how to benefit from them.
    </p></dd><dt id="id-1.7.6.2.4.4"><span class="term">Asking the user during installation</span></dt><dd><p>
     As an alternative, AutoYaST can ask the user for values to use in the profile
     at runtime. The installation is not fully unattended in that case, but it
     can be rather useful to set user names, passwords, IP addresses and so on.
     You can find more information about this feature in the
     <a class="xref" href="#CreateProfile-Ask" title="4.34. Ask the user for values during installation">Section 4.34, “Ask the user for values during installation”</a> section.
    </p></dd></dl></div></section><section class="chapter" id="rulesandclass" data-id-title="Rules and classes"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">6 </span><span class="title-name">Rules and classes</span></span> <a title="Permalink" class="permalink" href="#rulesandclass">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Rules and classes allow customizing installations for sets of machines in
  different ways:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Rules allow configuring a system depending on its attributes.
   </p></li><li class="listitem"><p>
    Classes represent configurations for groups of target systems. Classes can
    be assigned to systems.
   </p></li></ul></div><div id="id-1.7.6.3.5" data-id-title="Use autoyast boot option only" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Use <code class="literal">autoyast</code> boot option only</div><p>
   Rules and classes are only supported by the boot parameter
   <code class="literal">autoyast=<em class="replaceable">URL</em></code>.
  </p><p>
   <code class="literal">autoyast2=<em class="replaceable">URL</em></code> is not
   supported, because this option downloads a single AutoYaST control file only.
  </p></div><section class="sect1" id="rules" data-id-title="Rule-based automatic installation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.1 </span><span class="title-name">Rule-based automatic installation</span></span> <a title="Permalink" class="permalink" href="#rules">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Rules offer the possibility to configure a system depending on system
   attributes by merging multiple control files during installation. The
   rule-based installation is controlled by a rules file.
  </p><p>
   For example, this could be useful to install systems in two departments in
   one go. Assume a scenario where machines in department A need to be
   installed as office desktops, whereas machines in department B need to be
   installed as developer workstations. You would create a rules file with two
   different rules. For each rule, you could use different system parameters to
   distinguish the installations from one another. Each rule would also contain
   a link to an appropriate profile for each department.
  </p><p>
   The rules file is an XML file containing rules for each group of systems (or
   single systems) that you want to automatically install. A set of rules
   distinguish a group of systems based on one or more system attributes. After
   passing all rules, each group of systems is linked to a control file. Both
   the rules file and the control files must be located in a pre-defined and
   accessible location.
  </p><p>
   The rules file is retrieved only if no specific control file is supplied
   using the <code class="literal">autoyast</code> keyword. For example, if the following
   is used, the rules file will not be evaluated:
  </p><div class="verbatim-wrap"><pre class="screen">autoyast=http://10.10.0.1/profile/myprofile.xml
autoyast=http://10.10.0.1/profile/rules/rules.xml</pre></div><p>
   Instead use:
  </p><div class="verbatim-wrap"><pre class="screen">autoyast=http://10.10.0.1/profile/</pre></div><p>
   which will load <code class="literal">http://10.10.0.1/profile/rules/rules.xml</code>
   (the slash at the end of the directory name is important).
  </p><div class="figure" id="rules-fig1"><div class="figure-contents"><div class="mediaobject"><a href="images/autoyast_rules.png"><img src="images/autoyast_rules.png" alt="Rules" title="Rules"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 6.1: </span><span class="title-name">Rules </span></span><a title="Permalink" class="permalink" href="#rules-fig1">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div><p>
   If more than one rule applies, the final control file for each group is
   generated on the fly using a merge script. The merging process is based on
   the order of the rules and later rules override configuration data in
   earlier rules. Note that the names of the top sections in the merged XML
   files need to be in alphabetical order for the merge to succeed.
  </p><p>
   The use of a rules file is optional. If the rules file is not found, system
   installation proceeds in the standard way by using the supplied control file
   or by searching for the control file depending on the MAC or the IP address
   of the system.
  </p><section class="sect2" id="rulesfile" data-id-title="Rules file explained"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.1.1 </span><span class="title-name">Rules file explained</span></span> <a title="Permalink" class="permalink" href="#rulesfile">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><div class="complex-example"><div class="example" id="id-1.7.6.3.6.13.2" data-id-title="Simple rules file"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 6.1: </span><span class="title-name">Simple rules file </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.3.6.13.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div><div class="example-contents"><p>
     The following simple example illustrates how the rules file is used to
     retrieve the configuration for a client with known hardware.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE autoinstall&gt;
&lt;autoinstall xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;rules config:type="list"&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/sdc 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_a.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/sda 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_b.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
  &lt;/rules&gt;
&lt;/autoinstall&gt;</pre></div></div></div></div><p>
    The last example defines two rules and provides a different control file
    for every rule. The rule used in this case is <code class="literal">disksize</code>.
    After parsing the rules file, YaST attempts to match the target system
    with the rules in the <code class="filename">rules.xml</code> file. A rule match
    occurs when the target system matches all system attributes defined in the
    rule. When the system matches a rule, the respective resource is added to
    the stack of control files AutoYaST will use to create the final control file.
    The <code class="literal">continue</code> property tells AutoYaST whether it should
    continue with other rules after a match has been found.
   </p><p>
    If the first rule does not match, the next rule in the list is examined
    until a match is found.
   </p><p>
    Using the <code class="literal">disksize</code> attribute, you can provide different
    configurations for systems with hard disks of different sizes. The first
    rule checks if the device <code class="filename">/dev/sdc</code> is available and if
    it is greater than 1 GB in size using the <code class="literal">match</code>
    property.
   </p><p>
    A rule must have at least one attribute to be matched. If you need to check
    more attributes, such as memory or architectures, you can add more
    attributes in the rule resource as shown in the next example.
   </p><div class="complex-example"><div class="example" id="id-1.7.6.3.6.13.7" data-id-title="Simple rules file"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 6.2: </span><span class="title-name">Simple rules file </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.3.6.13.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div><div class="example-contents"><p>
     The following example illustrates how the rules file is used to retrieve
     the configuration for a client with known hardware.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE autoinstall&gt;
&lt;autoinstall xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;rules config:type="list"&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/sdc 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;memsize&gt;
            &lt;match&gt;1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/memsize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_a.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/sda 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;memsize&gt;
            &lt;match&gt;256&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/memsize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_b.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
  &lt;/rules&gt;
&lt;/autoinstall&gt;</pre></div></div></div></div><p>
    The rules directory must be located in the same directory specified via the
    <code class="literal">autoyast</code> keyword at boot time. If the client was booted
    using <code class="literal">autoyast=http://10.10.0.1/profiles/</code>, AutoYaST will
    search for the rules file at http://10.10.0.1/profiles/rules/rules.xml.
   </p></section><section class="sect2" id="customrules" data-id-title="Custom rules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.1.2 </span><span class="title-name">Custom rules</span></span> <a title="Permalink" class="permalink" href="#customrules">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If the attributes AutoYaST provides for rules are not enough for your purposes,
    use custom rules. Custom rules contain a shell script. The output of the
    script (STDOUT, STDERR is ignored) can be evaluated.
   </p><p>
    Here is an example for the use of custom rules:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;rule&gt;
  &lt;custom1&gt;
    &lt;script&gt;
if grep -i intel /proc/cpuinfo &gt; /dev/null; then
echo -n "intel"
else
echo -n "non_intel"
fi;
    &lt;/script&gt;
    &lt;match&gt;*&lt;/match&gt;
    &lt;match_type&gt;exact&lt;/match_type&gt;
  &lt;/custom1&gt;
  &lt;result&gt;
    &lt;profile&gt;@custom1@.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
  &lt;/result&gt;
&lt;/rule&gt;</pre></div><p>
    The script in this rule can echo either <code class="literal">intel</code> or
    <code class="literal">non_intel</code> to STDOUT (the output of the grep command must
    be directed to /dev/null in this case). The output of the rule script will
    be filled between the two '@' characters, to determine the file name of the
    control file to fetch. AutoYaST will read the output and fetch a file with the
    name <code class="filename">intel.xml</code> or <code class="filename">non_intel.xml</code>.
    This file can contain the AutoYaST profile part for the software selection; for
    example, in case you want a different software selection on Intel hardware
    than on others.
   </p><p>
    The number of custom rules is limited to five. So you can use
    <code class="literal">custom1</code> to <code class="literal">custom5</code>.
   </p></section><section class="sect2" id="matchtypes" data-id-title="Match types for rules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.1.3 </span><span class="title-name">Match types for rules</span></span> <a title="Permalink" class="permalink" href="#matchtypes">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can use five different match_types:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <code class="literal">exact</code> (default)
     </p></li><li class="listitem"><p>
      <code class="literal">greater</code>
     </p></li><li class="listitem"><p>
      <code class="literal">lower</code>
     </p></li><li class="listitem"><p>
      <code class="literal">range</code>
     </p></li><li class="listitem"><p>
      <code class="literal">regex</code> (a simple <code class="literal">=~</code> operator like in
      Bash)
     </p></li></ul></div><p>
    If using <code class="literal">exact</code>, the string must match exactly as
    specified. <code class="literal">regex</code> can be used to match substrings like
    <code class="literal">ntel</code> will match Intel, intel and intelligent.
    <code class="literal">greater</code> and <code class="literal">lower</code> can be used for
    <code class="literal">memsize</code> or <code class="literal">totaldisk</code> for example.
    They can match only with rules that return an integer value. A range is
    only possible for integer values too and has the form of
    <code class="literal">value1-value2</code>, for example <code class="literal">512-1024</code>.
   </p></section><section class="sect2" id="rulescombination" data-id-title="Combine attributes"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.1.4 </span><span class="title-name">Combine attributes</span></span> <a title="Permalink" class="permalink" href="#rulescombination">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Multiple attributes can be combined via a logical operator. It is possible
    to let a rule match if <code class="literal">disksize</code> is greater than 1GB or
    <code class="literal">memsize</code> is exactly 512MB.
   </p><p>
    You can do this with the <code class="literal">operator</code> element in the
    rules.xml file. <code class="literal">and</code> and <code class="literal">or</code> are
    possible operators, <code class="literal">and</code> being the default. Here is an
    example:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;rule&gt;
  &lt;disksize&gt;
    &lt;match&gt;/dev/sda 1000&lt;/match&gt;
    &lt;match_type&gt;greater&lt;/match_type&gt;
  &lt;/disksize&gt;
  &lt;memsize&gt;
    &lt;match&gt;256&lt;/match&gt;
    &lt;match_type&gt;greater&lt;/match_type&gt;
  &lt;/memsize&gt;
  &lt;result&gt;
    &lt;profile&gt;machine2.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
  &lt;/result&gt;
  &lt;operator&gt;or&lt;/operator&gt;
&lt;/rule&gt;</pre></div></section><section class="sect2" id="rulesstructure" data-id-title="Rules file structure"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.1.5 </span><span class="title-name">Rules file structure</span></span> <a title="Permalink" class="permalink" href="#rulesstructure">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="filename">rules.xml</code> file needs to:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      have at least one rule,
     </p></li><li class="listitem"><p>
      have the name <code class="filename">rules.xml</code>,
     </p></li><li class="listitem"><p>
      be located in the directory <code class="filename">rules</code> in the profile
      repository,
     </p></li><li class="listitem"><p>
      have at least one attribute to match in the rule.
     </p></li></ul></div></section><section class="sect2" id="ruleattributes" data-id-title="Predefined system attributes"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.1.6 </span><span class="title-name">Predefined system attributes</span></span> <a title="Permalink" class="permalink" href="#ruleattributes">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The following table lists the predefined system attributes you can match in
    the rules file.
   </p><p>
    If you are unsure about a value on your system, run
    <code class="command">/sbin/yast2 ayast_probe ncurses</code>. The
    text box displaying the detected values can be scrolled. Note that this
    command will not work while another YaST process that requires a lock
    (for example the installer) is running. Therefore you cannot run it during
    the installation.
   </p><div class="table" id="id-1.7.6.3.6.18.4" data-id-title="System attributes"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 6.1: </span><span class="title-name">System attributes </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.3.6.18.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Attribute
        </p>
       </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Values
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Description
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">hostaddress</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         IP address of the host
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         This attribute must always match exactly.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">host name</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         The name of the host
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         This attribute must always match exactly.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">domain</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Domain name of host
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         This attribute must always match exactly.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">installed_product</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         The name of the product to be installed.
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         This attribute must always match exactly.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">installed_product_version</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         The version of the product to be installed.
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         This attribute must always match exactly.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">network</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         network address of host
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         This attribute must always match exactly.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">mac</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         MAC address of host
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         This attribute must always match exactly (the MAC addresses should
         have the form <code class="literal">0080c8f6484c</code>).
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">linux</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Number of installed Linux partitions on the system
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         This attribute can be 0 or more.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">others</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Number of installed non-Linux partitions on the system
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         This attribute can be 0 or more.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">xserver</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         X Server needed for graphic adapter
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         This attribute must always match exactly.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">memsize</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Memory available on host in megabytes
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         All match types are available.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">totaldisk</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Total disk space available on host in megabytes
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         All match types are available.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">hostid</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Hex representation of the IP address
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Exact match required
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">arch</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Architecture of host
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Exact match required
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">karch</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Kernel Architecture of host (for example SMP kernel, Xen kernel)
        </p>
        
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Exact match required
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">disksize</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Drive device and size in megabytes
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         All match types are available.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">product</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         The hardware product name as specified in SMBIOS
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Exact match required
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">product_vendor</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         The hardware vendor as specified in SMBIOS
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Exact match required
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">board</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         The system board name as specified in SMBIOS
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Exact match required
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">board_vendor</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         The system board vendor as specified in SMBIOS
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Exact match required
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <code class="literal">custom1-5</code>
        </p>
       </td><td style="border-right: 1px solid ; ">
        <p>
         Custom rules using shell scripts
        </p>
       </td><td>
        <p>
         All match types are available.
        </p>
       </td></tr></tbody></table></div></div></section><section class="sect2" id="rules-dialogs" data-id-title="Rules with dialogs"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.1.7 </span><span class="title-name">Rules with dialogs</span></span> <a title="Permalink" class="permalink" href="#rules-dialogs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can use dialog pop-ups with check boxes to select rules you want
    matched.
   </p><p>
    The elements listed below must be placed within the following XML structure
    in the <code class="filename">rules.xml</code> file:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;rules config:type="list"&gt;
  &lt;rule&gt;
    &lt;dialog&gt;
      ...
    &lt;/dialog&gt;
  &lt;/rule&gt;
&lt;/rules&gt;</pre></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Attribute, Values, Description </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.3.6.19.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.6.3.6.19.5.2"><span class="term"><code class="literal">dialog_nr</code></span></dt><dd><p>
       All rules with the same <code class="literal">dialog_nr</code> are presented in
       the same pop-up dialog. The same <code class="literal">dialog_nr</code> can appear
       in multiple rules.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;dialog_nr config:type="integer"&gt;3&lt;/dialog_nr&gt;</pre></div><p>
       This element is optional and the default for a missing dialog_nr is
       always <code class="literal">0</code>. To use one pop-up for all rules, you do not
       need to specify the <code class="literal">dialog_nr</code>.
      </p></dd><dt id="id-1.7.6.3.6.19.5.3"><span class="term"><code class="literal">element</code></span></dt><dd><p>
       Specify a unique ID. Even if you have more than one dialog, you must not
       use the same id twice. Using id <code class="literal">1</code> on dialog 1 and id
       <code class="literal">1</code> on dialog 2 is not supported. (This behavior is
       contrary to the <code class="literal">ask</code> dialog, where you can have the
       same ID for multiple dialogs.)
      </p><div class="verbatim-wrap"><pre class="screen">&lt;element config:type="integer"&gt;3&lt;/element&gt;</pre></div><p>
       Optional. If omitted, AutoYaST adds its own IDs internally. Then you cannot
       specify conflicting rules (see below).
      </p></dd><dt id="id-1.7.6.3.6.19.5.4"><span class="term"><code class="literal">title</code></span></dt><dd><p>
       Caption of the pop-up dialog
      </p><div class="verbatim-wrap"><pre class="screen">&lt;title&gt;Desktop Selection&lt;/title&gt;</pre></div><p>
       Optional
      </p></dd><dt id="id-1.7.6.3.6.19.5.5"><span class="term"><code class="literal">question</code></span></dt><dd><p>
       Question shown in the pop-up behind the check box.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;question&gt;GNOME Desktop&lt;/question&gt;</pre></div><p>
       Optional. If you do not configure a text here, the name of the XML file
       that is triggered by this rule will be shown instead.
      </p></dd><dt id="id-1.7.6.3.6.19.5.6"><span class="term"><code class="literal">timeout</code></span></dt><dd><p>
       Timeout in seconds after which the dialog will automatically
       <span class="quote">“<span class="quote">press</span>”</span> the okay button. Useful for a non-blocking
       installation in combination with rules dialogs.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;timeout config:type="integer"&gt;30&lt;/timeout&gt;</pre></div><p>
       Optional. A missing timeout will stop the installation process until the
       dialog is confirmed by the user.
      </p></dd><dt id="id-1.7.6.3.6.19.5.7"><span class="term"><code class="literal">conflicts</code></span></dt><dd><p>
       A list of element ids (rules) that conflict with this rule. If this rule
       matches or is selected by the user, all conflicting rules are deselected
       and disabled in the pop-up. Take care that you do not create deadlocks.
      </p><div class="verbatim-wrap"><pre class="screen">&lt;conflicts config:type="list"&gt;
  &lt;element config:type="integer"&gt;1&lt;/element&gt;
  &lt;element config:type="integer"&gt;5&lt;/element&gt;
  ...
&lt;/conflicts&gt;</pre></div><p>
       Optional
      </p></dd></dl></div><p>
    Here is an example of how to use dialogs with rules:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;rules config:type="list"&gt;
  &lt;rule&gt;
    &lt;custom1&gt;
      &lt;script&gt;
echo -n 100
      &lt;/script&gt;
      &lt;match&gt;100&lt;/match&gt;
      &lt;match_type&gt;exact&lt;/match_type&gt;
    &lt;/custom1&gt;
    &lt;result&gt;
      &lt;profile&gt;rules/gnome.xml&lt;/profile&gt;
      &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;/result&gt;
    &lt;dialog&gt;
      &lt;element config:type="integer"&gt;0&lt;/element&gt;
      &lt;question&gt;GNOME Desktop&lt;/question&gt;
      &lt;title&gt;Desktop Selection&lt;/title&gt;
      &lt;conflicts config:type="list"&gt;
        &lt;element config:type="integer"&gt;1&lt;/element&gt;
      &lt;/conflicts&gt;
      &lt;dialog_nr config:type="integer"&gt;0&lt;/dialog_nr&gt;
    &lt;/dialog&gt;
  &lt;/rule&gt;
  &lt;rule&gt;
    &lt;custom1&gt;
      &lt;script&gt;
echo -n 100
      &lt;/script&gt;
      &lt;match&gt;101&lt;/match&gt;
      &lt;match_type&gt;exact&lt;/match_type&gt;
    &lt;/custom1&gt;
    &lt;result&gt;
      &lt;profile&gt;rules/gnome.xml&lt;/profile&gt;
      &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;/result&gt;
    &lt;dialog&gt;
      &lt;element config:type="integer"&gt;1&lt;/element&gt;
      &lt;dialog_nr config:type="integer"&gt;0&lt;/dialog_nr&gt;
      &lt;question&gt;Gnome Desktop&lt;/question&gt;
      &lt;conflicts config:type="list"&gt;
        &lt;element config:type="integer"&gt;0&lt;/element&gt;
      &lt;/conflicts&gt;
    &lt;/dialog&gt;
  &lt;/rule&gt;
  &lt;rule&gt;
    &lt;custom1&gt;
      &lt;script&gt;
echo -n 100
      &lt;/script&gt;
      &lt;match&gt;100&lt;/match&gt;
      &lt;match_type&gt;exact&lt;/match_type&gt;
    &lt;/custom1&gt;
    &lt;result&gt;
      &lt;profile&gt;rules/all_the_rest.xml&lt;/profile&gt;
      &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
    &lt;/result&gt;
  &lt;/rule&gt;
&lt;/rules&gt;</pre></div></section></section><section class="sect1" id="classes" data-id-title="Classes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.2 </span><span class="title-name">Classes</span></span> <a title="Permalink" class="permalink" href="#classes">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Classes represent configurations for groups of target systems. Unlike rules,
   classes need to be configured in the control file. Then classes can be
   assigned to target systems.
  </p><p>
   Here is an example of a class definition:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;classes config:type="list"&gt;
  &lt;class&gt;
    &lt;class_name&gt;TrainingRoom&lt;/class_name&gt;
    &lt;configuration&gt;Software.xml&lt;/configuration&gt;
  &lt;/class&gt;
&lt;/classes&gt;</pre></div><p>
   In the example above, the file <code class="filename">Software.xml</code> must
   be placed in the subdirectory
   <code class="filename">classes/TrainingRoom/</code>. It will be fetched from
   the same location as the AutoYaST control file and rules.
  </p><p>
   If you have multiple control files and those control files share parts,
   better use classes for common parts.
   
   
   You can also use XIncludes.
  </p><p>
   Using the configuration management system, you can define a set of classes.
   A class definition consists of the following variables:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Name: class name
    </p></li><li class="listitem"><p>
     Description:
    </p></li><li class="listitem"><p>
     Order: order (or priority) of the class in the stack of migration
     
    </p></li></ul></div><div class="figure" id="id-1.7.6.3.7.9"><div class="figure-contents"><div class="mediaobject"><a href="images/cms-class-definitions.png"><img src="images/cms-class-definitions.png" alt="Defining classes" title="Defining classes"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 6.2: </span><span class="title-name">Defining classes </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.3.7.9">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div><p>
   You can create as many classes as you need, however it is recommended to
   keep the set of classes as small as possible to keep the configuration
   system concise. For example, the following sets of classes can be used:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     site: classes describing a physical location or site,
    </p></li><li class="listitem"><p>
     machine: classes describing a type of machine,
    </p></li><li class="listitem"><p>
     role: classes describing the function of the machine,
    </p></li><li class="listitem"><p>
     group: classes describing a department or a group within a site or a
     location.
    </p></li></ul></div><p>
   A file saved in a class directory can have the same syntax and format as a
   regular control file but represents a subset of the configuration. For
   example, to create a new control file for a computer with a specific network
   interface, you only need the control file resource that controls the
   configuration of the network. Having multiple network types, you can merge
   the one needed for a special type of hardware with other class files and
   create a new control file which suits the system being installed.
   
  </p></section><section class="sect1" id="mixinfrulesclasses" data-id-title="Mixing rules and classes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.3 </span><span class="title-name">Mixing rules and classes</span></span> <a title="Permalink" class="permalink" href="#mixinfrulesclasses">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   It is possible to mix rules and classes during an auto-installation session.
   For example you can identify a system using rules which contain class
   definitions in them. The process is described in the figure
   <a class="xref" href="#rulesflow" title="Rules retrieval process">Figure A.1, “Rules retrieval process”</a>.
  </p><p>
   After retrieving the rules and merging them, the generated control file is
   parsed and checked for class definitions. If classes are defined, then the
   class files are retrieved from the original repository and a new merge
   process is initiated.
  </p></section><section class="sect1" id="merging" data-id-title="Merging of rules and classes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.4 </span><span class="title-name">Merging of rules and classes</span></span> <a title="Permalink" class="permalink" href="#merging">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_rules_classes.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   With classes and with rules, multiple XML files get merged into one
   resulting XML file. This merging process is often confusing for people,
   because it behaves different than one would expect. First of all, it is
   important to note that the names of the top sections in the merged XML files
   must be in alphabetical order for the merge to succeed.
  </p><p>
   For example, the following two XML parts should be merged:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;130&lt;/partition_id&gt;
        &lt;size&gt;2000mb&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;xfs&lt;/filesystem&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;size&gt;4Gb&lt;/size&gt;
        &lt;mount&gt;/data&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div><div class="verbatim-wrap"><pre class="screen">&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;initialize config:type="boolean"&gt;false&lt;/initialize&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;filesystem config:type="symbol"&gt;xfs&lt;/filesystem&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div><p>
   You might expect the control file to contain three partitions. This is not
   the case. You will end up with two partitions and the first partition is a
   mix up of the swap and the root partition. Settings configured in both
   partitions, like <code class="literal">mount</code> or <code class="literal">size</code>, will
   be used from the second file. Settings that only exist in the first or
   second partition, will be copied to the merged partition too.
   
  </p><p>
   In this example, you do not want a second <code class="literal">drive</code>. The two
   drives should be merged into one. With regard to partitions, three separate
   ones should be defined. Using the <code class="literal">dont_merge</code> method
   solves the merging problem:
  </p><div class="verbatim-wrap"><pre class="screen">&lt;classes config:type="list"&gt;
  &lt;class&gt;
    &lt;class_name&gt;swap&lt;/class_name&gt;
    &lt;configuration&gt;largeswap.xml&lt;/configuration&gt;
    &lt;dont_merge config:type="list"&gt;
      &lt;element&gt;partition&lt;/element&gt;
    &lt;/dont_merge&gt;
  &lt;/class&gt;
&lt;/classes&gt;</pre></div><div class="verbatim-wrap"><pre class="screen">&lt;rule&gt;
  &lt;board_vendor&gt;
    &lt;match&gt;ntel&lt;/match&gt;
    &lt;match_type&gt;regex&lt;/match_type&gt;
  &lt;/board_vendor&gt;
  &lt;result&gt;
    &lt;profile&gt;classes/largeswap.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;dont_merge config:type="list"&gt;
      &lt;element&gt;partition&lt;/element&gt;
    &lt;/dont_merge&gt;
  &lt;/result&gt;
  &lt;board_vendor&gt;
    &lt;match&gt;PowerEdge [12]850&lt;/match&gt;
    &lt;match_type&gt;regex&lt;/match_type&gt;
  &lt;/board_vendor&gt;
  &lt;result&gt;
    &lt;profile&gt;classes/smallswap.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;dont_merge config:type="list"&gt;
      &lt;element&gt;partition&lt;/element&gt;
    &lt;/dont_merge&gt;
  &lt;/result&gt;
&lt;/rule&gt;</pre></div></section></section><section class="chapter" id="erb-templates" data-id-title="ERB templates"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">7 </span><span class="title-name">ERB templates</span></span> <a title="Permalink" class="permalink" href="#erb-templates">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  ERB templates are for embedding Ruby code within an AutoYaST profile to modify
  the profile during the installation. With this approach, you can inspect
  the system and adjust the profile by setting values, adding or skipping
  sections, and so on.
 </p><p>
  To activate the ERB processing, the profile must have the extension
  <code class="filename">.erb</code> (for example,
  <code class="filename">autoyast.xml.erb</code>). Hence, it is not possible to
  combine rules/classes and ERB templates.
 </p><section class="sect1" id="erb" data-id-title="What is ERB?"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.1 </span><span class="title-name">What is ERB?</span></span> <a title="Permalink" class="permalink" href="#erb">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   ERB stands for <span class="emphasis"><em>Embedded Ruby</em></span>. ERB
   uses the power of the Ruby programming language to generate
   different kinds of content. With ERB, you can include
   some Ruby code in your profiles to adapt them at runtime, depending on
   the installation system.
  </p><p>
   When using ERB, the Ruby code is enclosed between <code class="literal">&lt;%</code>
   and <code class="literal">%&gt;</code> signs. Use an equals sign,
   <code class="literal">=</code>, to include command output in the resulting profile.
  </p><div class="example" id="simple-erb" data-id-title="Including a file using ERB"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.1: </span><span class="title-name">Including a file using ERB </span></span><a title="Permalink" class="permalink" href="#simple-erb">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;bootloader&gt;
  &lt;% require "open-uri" %&gt;
  &lt;%= URI.open("http://192.168.1.1/profiles/bootloader-common.xml").read %&gt;
&lt;/bootloader&gt; &lt;!-- this line gets replaced with the content of bootloader-common.xml --&gt;</pre></div></div></div><p>
   You can use Ruby facilities to run arbitrary commands. If you want
   to get the output of a command, then enclose it between backticks.
   If you want to know whether a command was successful or not, run the
   command with the <code class="literal">system</code> function.
  </p><div class="example" id="id-1.7.6.4.5.6" data-id-title="Running commands with Ruby"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.2: </span><span class="title-name">Running commands with Ruby </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.5.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;% files = `ls` %&gt; &lt;!-- files contains the output of the command (for instance "file1\nfile2\nfile3") --&gt;
&lt;% success = system("dmidecode | grep some-model") %&gt; &lt;!-- success contains true or false --&gt;</pre></div></div></div><p>
   Also, you can use more advanced Ruby code structures such as conditions
   and loops.
  </p><div class="example" id="id-1.7.6.4.5.8" data-id-title="Using Ruby structures"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.3: </span><span class="title-name">Using Ruby structures </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.5.8">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;% ip_forward = File.read("/proc/sys/net/ipv4/ip_forward").strip %&gt;
&lt;% if ip_forward == "1" %&gt;
  &lt;!-- something --&gt;
&lt;% end %&gt;

&lt;% files = `ls /tmp/config/*.xml` %&gt;
&lt;% files.split.each do |file| %&gt;
  &lt;%= file.read %&gt;
&lt;% end %&gt;</pre></div></div></div><p>
   AutoYaST offers a small set of <span class="emphasis"><em>helper functions</em></span> to retrieve
   information from the underlying system, like <code class="literal">disks</code> or
   <code class="literal">network_cards</code>. You can check the list of helpers and
   their values in the <a class="xref" href="#erb-helpers" title="7.2. Template helpers">Section 7.2, “Template helpers”</a> section.
  </p></section><section class="sect1" id="erb-helpers" data-id-title="Template helpers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.2 </span><span class="title-name">Template helpers</span></span> <a title="Permalink" class="permalink" href="#erb-helpers">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Template helpers are sets of Ruby methods that can be used in the
   profiles to retrieve information about the installation system.
  </p><section class="sect2" id="erb-boot-efi-helper" data-id-title="boot_efi?"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.2.1 </span><span class="title-name"><code class="literal">boot_efi?</code></span></span> <a title="Permalink" class="permalink" href="#erb-boot-efi-helper">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <code class="literal">boot_efi?</code> is a boolean helper that returns
    whether the system is booted using EFI. In the example below, the
    profile configures the bootloader according to the current boot mode.
   </p><div class="example" id="id-1.7.6.4.6.3.3" data-id-title="Configuring the boot loader"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.4: </span><span class="title-name">Configuring the boot loader </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.6.3.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;% if env.boot_efi? %&gt;
  &lt;loader_type&gt;grub2-efi&lt;/loader_type&gt;
&lt;% else %&gt;
  &lt;loader_type&gt;grub2&lt;/loader_type&gt;
&lt;% end %&gt;</pre></div></div></div></section><section class="sect2" id="erb-disks-helper" data-id-title="disks"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.2.2 </span><span class="title-name"><code class="literal">disks</code></span></span> <a title="Permalink" class="permalink" href="#erb-disks-helper">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="literal">disks</code> helper returns a list of the detected disks.
    Each element of the list contains some basic information like the device
    name or the size.
   </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Key
        </p>
       </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Type
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Value
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">:device</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         String
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Device kernel name (for example, <code class="literal">sda</code>).
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">:model</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         String
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Disk model
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">:serial</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         String
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Serial number
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">:size</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Integer
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Disk size (is a count of disk sectors)
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">:udev_names</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Array&lt;String&gt;
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         List of disk udev names. You can use any of them to refer to the
         device.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <code class="literal">:vendor</code>
        </p>
       </td><td style="border-right: 1px solid ; ">
        <p>
         String
        </p>
       </td><td>
        <p>
         Disk vendor's name
        </p>
       </td></tr></tbody></table></div><p>
    The profile in the example below installs the system on the largest disk.
    It sorts the list of existing disks by size and takes the last one. Then it
    uses the <code class="literal">:device</code> key as value for the
    <code class="literal">device</code> element.
   </p><div class="example" id="id-1.7.6.4.6.4.5" data-id-title="Using the largest disk"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.5: </span><span class="title-name">Using the largest disk </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.6.4.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partitioning t="list"&gt;
  &lt;drive&gt;
    &lt;% disk = disks.sort_by { |d| d[:size] }.last %&gt; &lt;!-- find the largest disk --&gt;
    &lt;device&gt;&lt;%= disk[:device] %&gt;&lt;/device&gt; &lt;!-- print the disk device name --&gt;
    &lt;initialize t="boolean"&gt;true&lt;/initialize&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</pre></div></div></div></section><section class="sect2" id="erb-network-cards-helper" data-id-title="network_cards"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.2.3 </span><span class="title-name"><code class="literal">network_cards</code></span></span> <a title="Permalink" class="permalink" href="#erb-network-cards-helper">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="literal">network_cards</code> helper returns a list of network
    cards, including their names, status information (for example, if they are
    connected or not).
   </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Key
        </p>
       </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Type
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Value
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">:device</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         String
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Device name (for example, <code class="literal">eth0</code> or
         <code class="literal">enp3s0</code>)
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">:mac</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         String
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         MAC address
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">:active</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Boolean
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Whether the device is active or not
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">:link</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Boolean
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Whether the device is connected or not
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <code class="literal">:vendor</code>
        </p>
       </td><td style="border-right: 1px solid ; ">
        <p>
         String
        </p>
       </td><td>
        <p>
         Disk vendor's name
        </p>
       </td></tr></tbody></table></div><p>
    The following example finds the first network card that is connected to the
    network and configures it to use DHCP.
   </p><div class="example" id="id-1.7.6.4.6.5.5" data-id-title="Configure the connected network cards"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.6: </span><span class="title-name">Configure the connected network cards </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.6.5.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;interfaces t="list"&gt;
  &lt;% with_link = network_cards.sort_by { |n| n[:name] }.find { |n| n[:link] } %&gt;
  &lt;% if with_link %&gt;
    &lt;interface&gt;
      &lt;device&gt;&lt;%= with_link[:device] %&gt;&lt;/device&gt;
      &lt;startmode&gt;auto&lt;/startmode&gt;
      &lt;bootproto&gt;dhcp&lt;/bootproto&gt;
      &lt;/interface&gt;
  &lt;% end %&gt;
&lt;/interfaces&gt;</pre></div></div></div></section><section class="sect2" id="erb-os-release-helper" data-id-title="os_release"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.2.4 </span><span class="title-name"><code class="literal">os_release</code></span></span> <a title="Permalink" class="permalink" href="#erb-os-release-helper">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="literal">os_release</code> helper returns the operating system
    information, which is included in the <code class="filename">/etc/os-release</code>
    file.
   </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Key
        </p>
       </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Type
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Value
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">:id</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         String
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Distribution ID (<span class="phrase">for example,
         <code class="literal">sles</code>,
         <code class="literal">opensuse-tumbleweed</code></span>)
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">:name</code>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         String
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Distribution name (<span class="phrase">for example,
         <code class="literal">SLES</code> or <code class="literal">openSUSE
         Tumbleweed</code></span>)
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <code class="literal">:version</code>
        </p>
       </td><td style="border-right: 1px solid ; ">
        <p>
         String
        </p>
       </td><td>
        <p>
         Distribution version (<span class="phrase">for example,
         <code class="literal">15.2</code></span>)
        </p>
       </td></tr></tbody></table></div><p>
    You might use this information to decide which product to install, using
    pretty much the same profile for all of them (SLE or openSUSE
    distributions).
   </p><div class="example" id="id-1.7.6.4.6.6.5" data-id-title="Reusing the same profile for different distributions"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.7: </span><span class="title-name">Reusing the same profile for different distributions </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.6.6.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;products t="list"&gt;
  &lt;% if os_release[:id] == 'sle' %&gt;
  &lt;product&gt;SLES&lt;/product&gt;
  &lt;% else %&gt;
  &lt;product&gt;openSUSE&lt;/product&gt;
  &lt;% end %&gt;
&lt;/products&gt;</pre></div></div></div></section><section class="sect2" id="erb-hardware-helper" data-id-title="hardware"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.2.5 </span><span class="title-name"><code class="literal">hardware</code></span></span> <a title="Permalink" class="permalink" href="#erb-hardware-helper">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="literal">hardware</code> helper provides additional hardware information.
    It returns all the information from the <code class="literal">hwinfo</code> command. You can
    use this helper as a fallback for those cases in which the information available
    through the described helpers is not enough. In the next example, the
    <code class="literal">hardware</code> helper is used to filter USB devices. Check
    <a class="xref" href="#erb-running-helpers" title="7.3. Running ERB helpers">Section 7.3, “Running ERB helpers”</a> to learn how to inspect all the information
    provided by the <code class="literal">hardware</code> helper.
   </p><div class="example" id="id-1.7.6.4.6.7.3" data-id-title="Filtering USB devices"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.8: </span><span class="title-name">Filtering USB devices </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.6.7.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;% usb_disks = hardware["disk"].select { |d| d["driver"] != "usb-storage" } %&gt;</pre></div></div></div></section></section><section class="sect1" id="erb-running-helpers" data-id-title="Running ERB helpers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.3 </span><span class="title-name">Running ERB helpers</span></span> <a title="Permalink" class="permalink" href="#erb-running-helpers">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You can use the Ruby console to run AutoYaST ERB
   helpers and find out what they offer. All ERB helpers are
   accessed through an instance of the
   <code class="literal">Y2Autoinstallation::Y2ERB::TemplateEnvironment</code> class. Start the
   Ruby interactive interpreter by running, as root:
   <code class="literal">irb -ryast -rautoinstall/y2erb</code>.
  </p><div class="example" id="id-1.7.6.4.7.3" data-id-title="Running helpers"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.9: </span><span class="title-name">Running helpers </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.7.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">irb &gt; env = Y2Autoinstallation::Y2ERB::TemplateEnvironment.new  # the env variable gives access to the helpers

irb &gt; env.disks
=&gt;
[{:vendor=&gt;"WDC", :device=&gt;"sda", ...},
 {:vendor=&gt;"TOSHIBA", :device=&gt;"sdb", ...},
...]

irb &gt; env.hardware.keys
=&gt;
["architecture",
 "bios",
 "bios_video",
 ...]

irb &gt; env.hardware["architecture"]
=&gt;
"x86_64"</pre></div></div></div></section><section class="sect1" id="erb-rendering-profile" data-id-title="Rendering ERB profiles"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.4 </span><span class="title-name">Rendering ERB profiles</span></span> <a title="Permalink" class="permalink" href="#erb-rendering-profile">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The AutoYaST command line provides a <code class="literal">check-profile</code> command that can be used
   to generate a profile from an ERB file. This command asks AutoYaST to parse, run the ERB code, and
   generate the resulting profile. You can inspect the rendered profile to check that everything
   worked as expected. See the command help for all the options it supports:
   <code class="literal">autoyast check-profile --help</code>.
   In the following example, <code class="literal">check-profile</code> asks AutoYaST to download and parse
   the profile, interpret the ERB code and run the pre-scripts. The result
   will be dumped to the <code class="literal">result.xml</code> file.
  </p><div class="example" id="id-1.7.6.4.8.3" data-id-title="Rendering profile"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.10: </span><span class="title-name">Rendering profile </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.8.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"> <code class="prompt user">&gt; </code><code class="command">sudo</code> yast2 autoyast check-profile filename=<em class="replaceable">http://192.168.1.100</em>/autoinst.erb output=result.xml run-scripts=true run-erb=true</pre></div></div></div><div id="id-1.7.6.4.8.4" data-id-title="check-profile permissions" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: <code class="literal">check-profile</code> permissions</div><p>
    In most cases, <code class="literal">check-profile</code> requires root permissions,
    so be careful when running pre-installation scripts and ERB profiles as root.
    Use only profiles that you trust.
   </p></div></section><section class="sect1" id="erb-debugging-erb" data-id-title="Debugging ERB profiles"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.5 </span><span class="title-name">Debugging ERB profiles</span></span> <a title="Permalink" class="permalink" href="#erb-debugging-erb">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For those cases in which you wantto stop the ERB evaluation
   and check what is happening, YaST offers integration with the
   <code class="literal">byebug</code>
   debugger. Install the <code class="literal">rubygem(byebug)</code> package and set
   the <code class="literal">Y2DEBUGGER</code> environment variable to 1.
  </p><div class="example" id="id-1.7.6.4.9.3" data-id-title="Preparing the debug environment"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.11: </span><span class="title-name">Preparing the debug environment </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.9.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper --non-interactive in "rubygem(byebug)"
<code class="prompt user">&gt; </code><code class="command">sudo</code> Y2DEBUGGER=1 yast2 autoyast check-profile ...</pre></div></div></div><p>
   Adding breakpoints is as easy as adding &lt;% byebug %&gt; where you want to stop.
   For more information about <code class="literal">byebug</code>, see
   <a class="link" href="https://github.com/deivid-rodriguez/byebug" target="_blank">https://github.com/deivid-rodriguez/byebug</a>.
  </p><div class="example" id="id-1.7.6.4.9.5" data-id-title="Adding a breakpoint"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.12: </span><span class="title-name">Adding a breakpoint </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.9.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;% byebug %&gt;
&lt;% if system("dmidecode | grep some-model") %&gt;
  &lt;!-- do something --&gt;
%&lt;% end %&gt;</pre></div></div></div></section><section class="sect1" id="erb-comparison" data-id-title="ERB compared to rules and classes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.6 </span><span class="title-name">ERB compared to rules and classes</span></span> <a title="Permalink" class="permalink" href="#erb-comparison">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Although both ERB and rules/classes enable generating profiles
   dynamically, in general ERB profiles are easier to read and
   understand. One important difference is that rules and classes can
   merge profiles,
   and ERB cannot. See more about merging profiles in
   <a class="xref" href="#rulesandclass" title="Chapter 6. Rules and classes">Chapter 6, <em>Rules and classes</em></a>. On the other hand, ERB brings all
   the power of a high-level language, Ruby. Let's see an example
   using both. In the following example, we want to place <code class="literal">/home</code>
   directory in <code class="literal">/dev/sdb</code> if it exists.
  </p><div class="example" id="id-1.7.6.4.10.3" data-id-title="Rules and classes"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.13: </span><span class="title-name">Rules and classes </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.10.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;rule&gt;
  &lt;custom1&gt;
    &lt;script&gt;
if blkid | grep /dev/sdb &gt; /dev/null; then
echo -n "yes"
else
echo -n "no"
fi;
    &lt;/script&gt;
    &lt;match&gt;yes&lt;/match&gt;
    &lt;match_type&gt;exact&lt;/match_type&gt;
  &lt;/custom1&gt;
  &lt;result&gt;
    &lt;profile&gt;classes/sdb_home.xml&lt;/profile&gt;
    &lt;dont_merge config:type="list"&gt;
      &lt;element&gt;partition&lt;/element&gt;
    &lt;/dont_merge&gt;
  &lt;/result&gt;
&lt;/rule&gt;</pre></div></div></div><div class="example" id="id-1.7.6.4.10.4" data-id-title="ERB"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.14: </span><span class="title-name">ERB </span></span><a title="Permalink" class="permalink" href="#id-1.7.6.4.10.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_erb_templates.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;% home_in_sdb = disks.map { |d| d[:device] }.include?("sdb") %&gt;

&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    ...
  &lt;/drive&gt;
  &lt;% if home_in_sdb %&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;disklabel&gt;none&lt;/disklabel&gt;
    &lt;partitions t="list"&gt;
      &lt;partition&gt;
        &lt;format t="boolean"&gt;true&lt;/format&gt;
        &lt;filesystem t="symbol"&gt;xfs&lt;/filesystem&gt;
        &lt;mount&gt;/home&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
  &lt;% end %&gt;
&lt;/partitioning&gt;</pre></div></div></div></section></section><section class="chapter" id="pre-scripts" data-id-title="Combining ERB templates and scripts"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">8 </span><span class="title-name">Combining ERB templates and scripts</span></span> <a title="Permalink" class="permalink" href="#pre-scripts">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_pre_scripts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  <a class="xref" href="#pre-install-scripts" title="4.31.1. Pre-scripts">Section 4.31.1, “Pre-scripts”</a> already describes how to use a
  pre-script to modify the current profile. In a nutshell, if the script
  creates a <code class="filename">/tmp/profile/modified.xml</code> file, AutoYaST imports
  that profile and forgets about the initial one.
 </p><p>
  This is a pretty flexible approach and the only limitation is that you need
  to rely on the languages and libraries that are available in the installation
  media.
 </p><section class="sect1" id="erb-and-scripts" data-id-title="Embedding ERB in your scripts"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8.1 </span><span class="title-name">Embedding ERB in your scripts</span></span> <a title="Permalink" class="permalink" href="#erb-and-scripts">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_pre_scripts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Unlike with <span class="emphasis"><em>rules</em></span>, it is possible to combine ERB
   templates with scripts. AutoYaST will evaluate any ERB tag that you include in
   your script before running it. This behavior only applies to the scripts
   defined inside the profile and not to the external ones.
  </p><p>
   The script in the example below downloads a profile whose name is based on
   the MAC address. Saving the file as
   <code class="filename">/tmp/profile/modified.xml</code> will cause AutoYaST to load and
   use the downloaded profile.
  </p><div class="example" id="combining-erb-and-scripts" data-id-title="Using the MAC address to get the profile"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 8.1: </span><span class="title-name">Using the MAC address to get the profile </span></span><a title="Permalink" class="permalink" href="#combining-erb-and-scripts">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_pre_scripts.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;scripts&gt;
  &lt;pre-scripts config:type="list"&gt;
    &lt;script&gt;
      &lt;interpreter&gt;shell&lt;/interpreter&gt;
      &lt;filename&gt;load_profile.sh&lt;/filename&gt;
      &lt;% mac = network_cards.first &gt;
      &lt;source&gt;&lt;![CDATA[#!/bin/bash
wget -O /tmp/profile/modified.xml http://myserver/&lt;%= network_cards.first[:mac] %&gt;.xml
]]&gt;&lt;/source&gt;
    &lt;/script&gt;
  &lt;/pre-scripts&gt;
&lt;/scripts&gt;</pre></div></div></div></section><section class="sect1" id="erb-helpers-in-scripts" data-id-title="Accessing ERB helpers from Ruby scripts"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8.2 </span><span class="title-name">Accessing ERB helpers from Ruby scripts</span></span> <a title="Permalink" class="permalink" href="#erb-helpers-in-scripts">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_pre_scripts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   It is possible to use the ERB helpers in Ruby scripts. To use those helpers,
   you need to <span class="emphasis"><em>require</em></span> the <code class="filename">yast</code> and
   <code class="filename">autoinstall/y2erb</code> libraries and use the
   <code class="literal">Y2Autoinstall::Y2ERB::TemplateEnvironment</code> class to access
   them.
  </p><div class="example" id="ruby-script-erb-helpers" data-id-title="Accessing ERB helpers from a Ruby script"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 8.2: </span><span class="title-name">Accessing ERB helpers from a Ruby script </span></span><a title="Permalink" class="permalink" href="#ruby-script-erb-helpers">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_pre_scripts.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;scripts&gt;
  &lt;pre-scripts config:type="list"&gt;
    &lt;script&gt;
      &lt;interpreter&gt;/usr/bin/ruby&lt;/interpreter&gt;
      &lt;filename&gt;load_profile.rb&lt;/filename&gt;
      &lt;source&gt;&lt;![CDATA[#!/usr/bin/env ruby
require "yast"
require "autoinstall/y2erb"
helpers = Y2Autoinstallation::Y2ERB::TemplateEnvironment.new
# Now you can use the TemplateEnvironment instance to call the helpers
disk_devices = helpers.disks.map { |d| d[:device] }
File.write("/root/disks.txt", disk_devices.join("\n"))
]]&gt;&lt;/source&gt;
    &lt;/script&gt;
  &lt;/pre-scripts&gt;
&lt;/scripts&gt;</pre></div></div></div></section></section></div><div class="part" id="id-1.7.7" data-id-title="Understanding the auto-installation process"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part IV </span><span class="title-name">Understanding the auto-installation process </span></span><a title="Permalink" class="permalink" href="#id-1.7.7">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_autoyast.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#Invoking"><span class="title-number">9 </span><span class="title-name">The auto-installation process</span></a></span></li><dd class="toc-abstract"><p>After the system has booted into an automatic installation and the control file has been retrieved, YaST configures the system according to the information provided in the control file. All configuration settings are summarized in a window that is shown by default and should be deactivated if a full…</p></dd></ul></div><section class="chapter" id="Invoking" data-id-title="The auto-installation process"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">9 </span><span class="title-name">The auto-installation process</span></span> <a title="Permalink" class="permalink" href="#Invoking">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect1" id="Installation-process" data-id-title="Introduction"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.1 </span><span class="title-name">Introduction</span></span> <a title="Permalink" class="permalink" href="#Installation-process">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   After the system has booted into an automatic installation and the control
   file has been retrieved, YaST configures the system according to the
   information provided in the control file. All configuration settings are
   summarized in a window that is shown by default and should be deactivated if
   a fully automatic installation is needed.
  </p><p>
   By the time YaST displays the summary of the configuration, YaST has
   only probed hardware and prepared the system for auto-installation. Nothing
   has been changed in the system yet. In case of any error, you can still
   abort the process.
  </p><p>
   A system should be automatically installable without the need to have any
   graphic adapter or monitor. Having a monitor attached to the client machine
   is nevertheless recommended so you can supervise the process and to get
   feedback in case of errors. Choose between the graphical and the text-based
   Ncurses interfaces. For headless clients, system messages can be monitored
   using the serial console.
  </p><section class="sect2" id="Installation-Interface-X11" data-id-title="X11 interface (graphical)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.1 </span><span class="title-name">X11 interface (graphical)</span></span> <a title="Permalink" class="permalink" href="#Installation-Interface-X11">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This is the default interface while auto-installing. No special variables
    are required to activate it.
   </p></section><section class="sect2" id="Installation-Interface-SerialConsole" data-id-title="Serial console"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.2 </span><span class="title-name">Serial console</span></span> <a title="Permalink" class="permalink" href="#Installation-Interface-SerialConsole">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Start installing a system using the serial console by adding the keyword
    <code class="literal">console</code> (for example <code class="literal">console=ttyS0</code>)
    to the command line of the kernel. This starts <code class="command">linuxrc</code>
    in console mode and later YaST in serial console mode.
   </p></section><section class="sect2" id="Installation-Interface-Ncurses" data-id-title="Text-based YaST installation"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.3 </span><span class="title-name">Text-based YaST installation</span></span> <a title="Permalink" class="permalink" href="#Installation-Interface-Ncurses">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This option can also be activated on the command line. To start YaST in
    text mode, add <code class="literal">textmode=1</code> on the command line.
   </p><p>
    Starting YaST in the text mode is recommended when installing a client
    with less than 64 MB or when X11 should not be configured, especially on
    headless machines.
   </p></section></section><section class="sect1" id="bootmedium" data-id-title="Choosing the right boot medium"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.2 </span><span class="title-name">Choosing the right boot medium</span></span> <a title="Permalink" class="permalink" href="#bootmedium">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   There are different methods for booting the client. The computer can boot
   from its network interface card (NIC) to receive the boot images via DHCP or
   TFTP. Alternatively a suitable kernel and initrd image can be loaded from a
   flash disk (for example, a USB stick) or a bootable DVD-ROM.
  </p><p>
   YaST will check for <code class="filename">autoinst.xml</code> in the root
   directory of the boot medium or the initrd upon start-up and switch to an
   automated installation if it was found. In case the control file is named
   differently or located elsewhere, specify its location on the kernel command
   line with the parameter
   <code class="literal">AutoYaST=<em class="replaceable">URL</em></code>.
  </p><p>
    Alternatively, you can place the <code class="filename">autoinst.xml</code> into a device, mounted either physically or virtually, that is labeled <code class="literal">OEMDRV</code>. In this case, you do not need to specify the location of the <code class="filename">autoinst.xml</code> on the kernel command line. The <code class="literal">autoinst.xml</code> must be located in the root directory of the device.
  </p><section class="sect2" id="bootmedium-flash" data-id-title="Booting from a flash disk (for example, a USB stick)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.2.1 </span><span class="title-name">Booting from a flash disk (for example, a USB stick)</span></span> <a title="Permalink" class="permalink" href="#bootmedium-flash">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    For testing/rescue purposes or because the NIC does not have a PROM or PXE,
    you can build a bootable flash disk to use with AutoYaST. Flash disks can also
    store the control file.
   </p><div id="id-1.7.7.2.4.5.3" data-id-title="Copying the installation medium image to a removable flash disk" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Copying the installation medium image to a removable flash disk</div><p>
     Use the following command to copy the contents of the installation image
     to a removable flash disk.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> dd if=<em class="replaceable">IMAGE</em> of=<em class="replaceable">FLASH_DISK</em> bs=4M &amp;&amp; sync</pre></div><p>
     <em class="replaceable">IMAGE</em> needs to be replaced with the path to the
     <code class="filename">SLE-15-SP4-Online-<em class="replaceable">ARCH</em>-GM-media1.iso</code> or <code class="filename">SLE-15-SP4-Full-<em class="replaceable">ARCH</em>-GM-media1.iso</code>
     image file. <em class="replaceable">FLASH_DISK</em> needs to be replaced
     with the flash device. To identify the device, insert it and run:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>grep -Ff &lt;(hwinfo --disk --short) &lt;(hwinfo --usb --short)
      disk:
      /dev/sdc             General USB Flash Disk</pre></div><p>
     Make sure the size of the device is sufficient for the desired image. You
     can check the size of the device with:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>fdisk -l /dev/sdc | grep -e "^/dev"
      /dev/sdc1  *     2048 31490047 31488000  15G 83 Linux</pre></div><p>
     In this example, the device has a capacity of 15 GB. The command to use
     for the <code class="filename">SLE-15-SP4-Full-<em class="replaceable">ARCH</em>-GM-media1.iso</code> would be:
    </p><div class="verbatim-wrap"><pre class="screen">dd if=SLE-15-SP4-Full-<em class="replaceable">ARCH</em>-GM-media1.iso of=/dev/sdc bs=4M &amp;&amp; sync</pre></div><p>
     The device must not be mounted when running the <code class="command">dd</code>
     command. Note that all data on the partition will be erased!
    </p></div></section><section class="sect2" id="bootmedium-installer" data-id-title="Booting from the SUSE Linux Enterprise installation medium"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.2.2 </span><span class="title-name">Booting from the SUSE Linux Enterprise installation medium</span></span> <a title="Permalink" class="permalink" href="#bootmedium-installer">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can use the SUSE Linux Enterprise installation medium
    (<code class="filename">SLE-15-SP4-Online-<em class="replaceable">ARCH</em>-GM-media1.iso</code> or
    <code class="filename">SLE-15-SP4-Full-<em class="replaceable">ARCH</em>-GM-media1.iso</code>) in combination with other media. For
    example, the control file can be provided via a flash disk or a specified
    location on the network. Alternatively, create a customized installation
    media that includes the control file.
   </p></section><section class="sect2" id="bootmedium-pxe" data-id-title="Booting via PXE over the network"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.2.3 </span><span class="title-name">Booting via PXE over the network</span></span> <a title="Permalink" class="permalink" href="#bootmedium-pxe">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Booting via PXE requires a DHCP and a TFTP server in your network. The
    computer will then boot without a physical medium.
    <span class="phrase">For instructions on setting up the required
    infrastructure, see <span class="intraxref">Book “Deployment Guide”, Chapter 11 “Remote installation”</span>.</span>
   </p><p>
    If you install via PXE, the installation will run in an endless loop. This
    happens because after the first reboot, the machine performs the PXE boot
    again and restarts the installation instead of booting from the hard
    disk<span class="phrase"> for the second stage of the
    installation</span>.
   </p><p>
    There are several ways to solve this problem. You can use an HTTP server to
    provide the AutoYaST control file. Alternatively, instead of a static control
    file, run a CGI script on the Web server that provides the control file and
    changes the TFTP server configuration for your target host. This way, the
    next PXE boot of the machine will be from the hard disk by default.
   </p><p>
    Another way is to use AutoYaST to upload a new PXE boot configuration for the
    target host via the control file:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;pxe&gt;
  &lt;pxe_localboot config:type="boolean"&gt;true&lt;/pxe_localboot&gt;
  &lt;pxelinux-config&gt;
    DEFAULT linux
    LABEL linux
    localboot 0
  &lt;/pxelinux-config&gt;
  &lt;tftp-server&gt;192.168.1.115&lt;/tftp-server&gt;
  &lt;pxelinux-dir&gt;/pxelinux.cfg&lt;/pxelinux-dir&gt;
  &lt;filename&gt;__MAC__&lt;/filename&gt;
&lt;/pxe&gt;</pre></div><p>
    This entry will upload a new configuration for the target host to the TFTP
    server shortly before the first reboot happens. In most installations the
    TFTP daemon runs as user <code class="systemitem">nobody</code>.
    You need to make sure this user has write permissions to the
    <code class="filename">pxelinux.cfg</code> directory. You can also configure the
    file name that will be uploaded. If you use the <span class="quote">“<span class="quote">magic</span>”</span>
    <code class="literal">__MAC__</code> file name, the file name will be the MAC address
    of your machine like, for example <code class="literal">01-08-00-27-79-49-ee</code>.
    If the file name setting is missing, the IP address will be used for the
    file name.
   </p><p>
    To do another auto-installation on the same machine, you need to remove the
    file from the TFTP server.
   </p></section></section><section class="sect1" id="invoking-autoinst" data-id-title="Invoking the auto-installation process"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.3 </span><span class="title-name">Invoking the auto-installation process</span></span> <a title="Permalink" class="permalink" href="#invoking-autoinst">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   
  </p><section class="sect2" id="invoking-autoinst-options" data-id-title="Command line options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.3.1 </span><span class="title-name">Command line options</span></span> <a title="Permalink" class="permalink" href="#invoking-autoinst-options">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Adding the command line variable <code class="literal">autoyast</code> causes
    <code class="command">linuxrc</code> to start in automated mode. The
    <code class="command">linuxrc</code> program searches for a configuration file, which
    should be distinguished from the main control file, in the following
    places:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      in the root directory of the initial RAM disk used for booting the
      system;
     </p></li><li class="listitem"><p>
      in the root directory of the boot medium.
     </p></li></ul></div><p>
    The <code class="command">linuxrc</code> configuration file supports multiple
    keywords. For a detailed description of how <code class="command">linuxrc</code>
    works and other keywords, see <a class="xref" href="#appendix-linuxrc" title="Appendix C. Advanced linuxrc options">Appendix C, <em>Advanced <code class="command">linuxrc</code> options</em></a>. Some of
    the more common ones are:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.7.2.5.3.5.1"><span class="term">autoupgrade</span></dt><dd><p>
       Initiate an automatic upgrade using AutoYaST; see
       <a class="xref" href="#CreateProfile-upgrade" title="4.10. Upgrade">Section 4.10, “Upgrade”</a>.
      </p></dd><dt id="id-1.7.7.2.5.3.5.2"><span class="term">autoyast</span></dt><dd><p>
       Location of the control file for automatic installation; see
       <a class="xref" href="#Commandline-ay" title="AutoYaST control file locations">AutoYaST control file locations</a> for details.
      </p></dd><dt id="id-1.7.7.2.5.3.5.3"><span class="term">ifcfg</span></dt><dd><p>
       Configure and start the network. Required if the AutoYaST is to be fetched
       from a remote location. See <a class="xref" href="#ay-adv-network" title="C.3. Advanced network setup">Section C.3, “Advanced network setup”</a> for
       details.
      </p></dd><dt id="id-1.7.7.2.5.3.5.4"><span class="term">insmod</span></dt><dd><p>
       Kernel modules to load
      </p></dd><dt id="id-1.7.7.2.5.3.5.5"><span class="term">install</span></dt><dd><p>
       Location of the installation directory, for example
       <code class="literal">install=nfs://192.168.2.1/CDs/</code>.
      </p><div id="id-1.7.7.2.5.3.5.5.2.2" data-id-title="Disabling SSL checks" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Disabling SSL checks</div><p>
         When you are using HTTPS, SSL checking is enabled by default. If 
         necessary, you can disable SSL checking by appending <code class="literal">ssl_verify=no</code>
          to your HTTPS URL, like the following examples:
        </p><div class="verbatim-wrap"><pre class="screen">install=<em class="replaceable">https://192.168.2.1/CDs/</em>?ssl_verify=no</pre></div><p>
          If you are passing multiple query options, separate them with 
          ampersands:
        </p><div class="verbatim-wrap"><pre class="screen">install=<em class="replaceable">https://192.168.2.1/CDs/</em>?foo=bar&amp;ssl_verify=no</pre></div><p>
          See the "FTP/HTTP/HTTPS directory tree" section of 
          <code class="command">man 8 zypper</code> for more information.
        </p></div></dd><dt id="id-1.7.7.2.5.3.5.6"><span class="term">instmode</span></dt><dd><p>
       Installation mode, for example <code class="literal">nfs</code>,
       <code class="literal">http</code> etc. (not needed if <code class="literal">install</code>
       is set).
      </p></dd><dt id="id-1.7.7.2.5.3.5.7"><span class="term">rootpassword</span></dt><dd><p>
       Password for root user if not specified in AutoYaST profile
      </p></dd><dt id="id-1.7.7.2.5.3.5.8"><span class="term">server</span></dt><dd><p>
       Server (NFS) to contact for source directory
      </p></dd><dt id="id-1.7.7.2.5.3.5.9"><span class="term">serverdir</span></dt><dd><p>
       Directory on NFS Server
      </p></dd><dt id="id-1.7.7.2.5.3.5.10"><span class="term">y2confirm</span></dt><dd><p>
       Even with &lt;confirm&gt;no&lt;/confirm&gt; in the control file, the
       confirm proposal comes up.
      </p></dd></dl></div><p>
    These variables and keywords will bring the system up to the point where
    YaST can take over with the main control file. Currently, the source
    medium is automatically discovered, which in some cases makes it possible
    to initiate the auto-install process without giving any instructions to
    <code class="command">linuxrc</code>.
   </p><p>
    The traditional <code class="command">linuxrc</code> configuration file
    (<code class="filename">info</code>) has the function of giving the client enough
    information about the installation server and the location of the sources.
    Usually, this file is not required, but it is needed in special network
    environments where DHCP and BOOTP are not used or when special kernel
    modules need to be loaded.
   </p><p>
    You can pass keywords to <code class="command">linuxrc</code> using the kernel
    command line. This can be done in several ways. You can specify
    <code class="command">linuxrc</code> keywords along with other kernel parameters
    interactively at boot time, in the usual way. You can also insert kernel
    parameters into custom network-bootable disk images. It is also possible to
    configure a DHCP server to pass kernel parameters in combination with
    Etherboot or PXE.
   </p><div id="id-1.7.7.2.5.3.9" data-id-title="Using autoyast2 boot option instead of autoyast" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Using <code class="literal">autoyast2</code> boot option instead of <code class="literal">autoyast</code></div><p>
     The <code class="literal">autoyast2</code> option is similar to the
     <code class="literal">autoyast</code> option, but <code class="command">linuxrc</code> parses
     the provided value and, for example, tries to configure a network when
     needed. This option is not described in this documentation. For
     information about differences between the AutoYaST and
     <code class="command">linuxrc</code> URI syntax, see the <code class="command">linuxrc</code>
     appendix: <a class="xref" href="#appendix-linuxrc" title="Appendix C. Advanced linuxrc options">Appendix C, <em>Advanced <code class="command">linuxrc</code> options</em></a>. AutoYaST's rules and classes are
     <span class="emphasis"><em>not</em></span> supported.
    </p></div><p>
    The command line variable <code class="literal">autoyast</code> can be used in the
    format described in the following list.
   </p><div class="variablelist" id="Commandline-ay" data-id-title="AutoYaST control file locations"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">AutoYaST control file locations </span></span><a title="Permalink" class="permalink" href="#Commandline-ay">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.7.7.2.5.3.11.2"><span class="term">Format of URIs</span></dt><dd><p>
       The <code class="literal">autoyast</code> syntax for the URIs for your control
       file locations can be confusing. The format is
       SCHEMA://HOST/PATH-TO-FILE. The number of forward slashes to use varies.
       For remote locations of your control file, the URI looks like this
       example for an NFS server, with two slashes:
       <code class="literal">autoyast=nfs://SERVER/PATH</code>.
      </p><p>
       It is different when your control file is on a local file system. For
       example, <code class="literal">autoyast=usb:///profile.xml</code> is the same as
       <code class="literal">autoyast=usb://localhost/profile.xml</code>. You may omit
       the local host name, but you must keep the third slash.
       <code class="literal">autoyast=usb://profile.xml</code> will fail because
       <code class="literal">profile.xml</code> is interpreted as the host name.
      </p></dd><dt id="id-1.7.7.2.5.3.11.3"><span class="term">When no control file specification is needed</span></dt><dd><p>
       For upgrades, no <code class="literal">autoyast</code> variable is needed for an
       automated offline upgrade, see
       <a class="xref" href="#pro-upgrade-offline-upgrade-mode" title="Starting AutoYaST in offline upgrade mode">Procedure 4.1, “Starting AutoYaST in offline upgrade mode”</a>.
      </p><p>
       For new installations, <code class="literal">autoyast</code> will be started if a
       file named <code class="filename">autoinst.xml</code> is in one of the following
       three locations:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
         The root directory of the installation flash disk (for example, a USB
         stick)
        </p></li><li class="listitem"><p>
         The root directory of the installation medium
        </p></li><li class="listitem"><p>
         The root directory of the initial RAM disk used to boot the system
        </p></li></ol></div></dd><dt id="id-1.7.7.2.5.3.11.4"><span class="term"><code class="literal">autoyast=file:///<em class="replaceable">PATH</em></code></span></dt><dd><p>
       Looks for control file in the specified path, relative to the source
       root directory, for example <code class="literal">file:///autoinst.xml</code> when
       the control file is in the top-level directory of any local file system,
       including mounted external devices such as a CD or USB drive. (This is
       the same as
       <code class="literal">file://<em class="replaceable">localhost/autoinst.xml</em></code>.)
      </p></dd><dt id="id-1.7.7.2.5.3.11.5"><span class="term"><code class="literal">autoyast=device://<em class="replaceable">DEVICE</em>/<em class="replaceable">FILENAME</em></code></span></dt><dd><p>
       Looks for the control file on a storage device. Do not specify the full
       path to the device, but the device name only (for example,
       <code class="literal">device://<em class="replaceable">vda1/autoyast.xml</em></code>).
       You may also omit specifying the device and trigger
       <code class="literal">autoyast</code> to search all devices, for example,
       <code class="literal">autoyast=device://<em class="replaceable">localhost/autoinst.xml</em></code>,
       or
       <code class="literal">autoyast=device:///<em class="replaceable">autoinst.xml</em></code>.
      </p></dd><dt id="id-1.7.7.2.5.3.11.6"><span class="term"><code class="literal">autoyast=nfs://<em class="replaceable">SERVER</em>/<em class="replaceable">PATH</em></code></span></dt><dd><p>
       Looks for the control file on an NFS server.
      </p></dd><dt id="id-1.7.7.2.5.3.11.7"><span class="term"><code class="literal">autoyast=http://[user:password@]<em class="replaceable">SERVER</em>/<em class="replaceable">PATH</em></code></span></dt><dd><p>
       Retrieves the control file from a Web server using the HTTP protocol.
       Specifying a user name and a password is optional.
      </p></dd><dt id="id-1.7.7.2.5.3.11.8"><span class="term"><code class="literal">autoyast=https://[user:password@]<em class="replaceable">SERVER</em>/<em class="replaceable">PATH</em></code></span></dt><dd><p>
       Retrieves the control file from a Web server using HTTPS. Specifying a
       user name and a password is optional.
      </p></dd><dt id="id-1.7.7.2.5.3.11.9"><span class="term"><code class="literal">autoyast=tftp://<em class="replaceable">SERVER</em>/<em class="replaceable">PATH</em></code></span></dt><dd><p>
       Retrieve the control file via TFTP.
      </p></dd><dt id="id-1.7.7.2.5.3.11.10"><span class="term"><code class="literal">autoyast=ftp://[user:password@]<em class="replaceable">SERVER</em>/<em class="replaceable">PATH</em></code></span></dt><dd><p>
       Retrieve the control file via FTP. Specifying a user name and a password
       is optional.
      </p></dd><dt id="id-1.7.7.2.5.3.11.11"><span class="term"><code class="literal">autoyast=usb:///<em class="replaceable">PATH</em></code></span></dt><dd><p>
       Retrieve the control file from USB devices (<code class="literal">autoyast</code>
       will search all connected USB devices).
      </p></dd><dt id="id-1.7.7.2.5.3.11.12"><span class="term"><code class="literal">autoyast=relurl://<em class="replaceable">PATH</em></code></span></dt><dd><p>
       Retrieve the control file from the installation source: either from the
       default installation source or from the installation source defined in
       <code class="literal">install=<em class="replaceable">INSTALLATION_SOURCE_PATH</em></code>.
      </p></dd><dt id="id-1.7.7.2.5.3.11.13"><span class="term"><code class="literal">autoyast=cifs://<em class="replaceable">SERVER</em>/<em class="replaceable">PATH</em></code></span></dt><dd><p>
       Looks for the control file on a CIFS server.
      </p></dd><dt id="id-1.7.7.2.5.3.11.14"><span class="term"><code class="literal">autoyast=label://<em class="replaceable">LABEL</em>/<em class="replaceable">PATH</em></code></span></dt><dd><p>
       Searches for a control file on a device with the specified label.
      </p></dd></dl></div><p>
    Several scenarios for auto-installation are possible using different types
    of infrastructure and source media. The simplest way is to use the
    appropriate installation media of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
    <span class="phrase">(<code class="filename">SLE-15-SP4-Online-<em class="replaceable">ARCH</em>-GM-media1.iso</code> or
    <code class="filename">SLE-15-SP4-Full-<em class="replaceable">ARCH</em>-GM-media1.iso</code>)</span>. But to initiate the
    auto-installation process, the auto-installation command line variable
    should be entered at system boot-up and the control file should be
    accessible for YaST.
   </p><p>
    In a scripting context, you can use a serial console for your virtual
    machine, that allows you to work in text mode. Then you can pass the
    required parameters from an expect script or equivalent.
   </p><p>
    The following list of scenarios explains how the control file can be
    supplied:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.7.2.5.3.15.1"><span class="term">Using the <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> installation media</span></dt><dd><p>
       When using the original installation media
       <span class="phrase">(<code class="filename">SLE-15-SP4-Online-<em class="replaceable">ARCH</em>-GM-media1.iso</code> or
       <code class="filename">SLE-15-SP4-Full-<em class="replaceable">ARCH</em>-GM-media1.iso</code> is needed)</span>, the control
       file needs to be accessible via flash disk (for example, a USB stick) or
       network:
      </p><p><span class="formalpara-title">Flash disk (for example, a USB stick). </span>
        Access the control file via the
        <code class="literal">autoyast=usb://<em class="replaceable">PATH</em></code>
        option.
       </p><p><span class="formalpara-title">Network. </span>
        Access the control file via the following commands:
        <code class="literal">autoyast=nfs://..</code>,
        <code class="literal">autoyast=ftp://..</code>,
        <code class="literal">autoyast=http://..</code>,
        <code class="literal">autoyast=https://..</code>,
        <code class="literal">autoyast=tftp://..</code>, or
        <code class="literal">autoyast=cifs://..</code>. Network access needs to be
        defined using the boot options in linuxrc. This can be done via DHCP:
        <code class="command">netsetup=dhcp
        autoyast=http://<em class="replaceable">163.122.3.5/autoyast.xml</em></code>
       </p></dd><dt id="id-1.7.7.2.5.3.15.2"><span class="term">Using a custom installation media</span></dt><dd><p>
       In this case, you can include the control file directly on the
       installation media. When placing it in the root directory and naming it
       <code class="filename">autoinst.xml</code>, it will automatically be found and
       used for the installation. Otherwise use
       <code class="literal">autoyast=file:///<em class="replaceable">PATH</em></code> to
       specify the path to the control file.
      </p></dd><dt id="id-1.7.7.2.5.3.15.3"><span class="term">Using a network installation source</span></dt><dd><p>
       This option is the most important one because installations of multiple
       machines are usually done using SLP or NFS servers and other network
       services like BOOTP and DHCP. The easiest way to make the control file
       available is to place it in the root directory of the installation
       source, naming it <code class="filename">autoinst.xml</code>. In this case, it
       will automatically be found and used for the installation. The control
       file can also reside in the following places:
      </p><p><span class="formalpara-title">Flash disk (for example, a USB stick). </span>
        Access the control file via the
        <code class="literal">autoyast=usb://<em class="replaceable">PATH</em></code>
        option.
       </p><p><span class="formalpara-title">Network. </span>
        Access the control file via the following commands:
        <code class="literal">autoyast=nfs://..</code>,
        <code class="literal">autoyast=ftp://..</code>,
        <code class="literal">autoyast=http://..</code>,
        <code class="literal">autoyast=https://..</code>,
        <code class="literal">autoyast=tftp://..</code>, or
        <code class="literal">autoyast=cifs://..</code>.
       </p></dd></dl></div><div id="id-1.7.7.2.5.3.16" data-id-title="Disabling network and DHCP" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Disabling network and DHCP</div><p>
     To disable the network during installations where it is not needed or
     unavailable, for example when auto-installing from DVD-ROMs, use the
     <code class="command">linuxrc</code> option <code class="literal">netsetup=0</code> to disable
     the network setup.
    </p></div><p>
    With all AutoYaST invocation options it is possible to specify the location of
    the control file in the following ways:
   </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
      Specify the exact location of the control file:
     </p><div class="verbatim-wrap"><pre class="screen">autoyast=http://192.168.1.1/control-files/client01.xml</pre></div></li><li class="listitem"><p>
      Specify a directory where several control files are located:
     </p><div class="verbatim-wrap"><pre class="screen">autoyast=http://192.168.1.1/control-files/</pre></div><p>
      In this case the relevant control file is retrieved using the hex digit
      representation of the IP as described below.
     </p><p>
      The path of this directory needs to end with a <code class="literal">/</code>.
     </p><p>
      The files in the directory must not have any extension, for example
      <code class="literal">.xml</code>. So the file name needs to be the IP or MAC
      address only.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ls -r control-files
C00002 0080C8F6484C default</pre></div></li></ol></div><p>
    If only the path prefix variable is defined, YaST will fetch the control
    file from the specified location in the following way:
   </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
      First, it will search for the control file using its own IP address in
      uppercase hexadecimal, for example <code class="literal">192.0.2.91 -&gt;
      C000025B</code>.
     </p></li><li class="listitem"><p>
      If this file is not found, YaST will remove one hex digit and try
      again. This action is repeated until the file with the correct name is
      found. Ultimately, it will try looking for a file with the MAC address of
      the client as the file name (mac should have the following syntax:
      <code class="literal">0080C8F6484C</code>) and if not found a file named
      <code class="filename">default</code> (in lowercase).
     </p></li></ol></div><p>
    As an example, for 192.0.2.91, the HTTP client will try:
   </p><div class="verbatim-wrap"><pre class="screen">C000025B
C000025
C00002
C0000
C000
C00
C0
C
0080C8F6484C
default</pre></div><p>
    in that order.
   </p><p>
    To determine the hex representation of the IP address of the client, use
    the utility called <code class="command">/usr/bin/gethostip</code> available with the
    <code class="systemitem">syslinux</code> package.
   </p><div class="example" id="id-1.7.7.2.5.3.25" data-id-title="Determine HEX code for an IP address"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 9.1: </span><span class="title-name">Determine HEX code for an IP address </span></span><a title="Permalink" class="permalink" href="#id-1.7.7.2.5.3.25">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>/usr/bin/gethostip 10.10.0.1
10.10.0.1 10.10.0.1 0A0A0001</pre></div></div></div></section><section class="sect2" id="autoinstall-singlesystem" data-id-title="Auto-installing a single system"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.3.2 </span><span class="title-name">Auto-installing a single system</span></span> <a title="Permalink" class="permalink" href="#autoinstall-singlesystem">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The easiest way to auto-install a system without any network connection is
    to use the original <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> DVD-ROMs and a flash disk (for example, a
    USB stick). You do not need to set up an installation server nor the
    network environment.
   </p><p>
    Create the control file and name it <code class="filename">autoinst.xml</code>. Copy
    the file <code class="filename">autoinst.xml</code> to the flash disk.
   </p></section><section class="sect2" id="invoking-autoinst-linuxrc" data-id-title="Combining the linuxrc info file with the AutoYaST control file"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.3.3 </span><span class="title-name">Combining the <code class="command">linuxrc</code> <code class="filename">info</code> file with the AutoYaST control file</span></span> <a title="Permalink" class="permalink" href="#invoking-autoinst-linuxrc">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you choose to pass information to <code class="command">linuxrc</code> using the
    <code class="filename">info</code> file or as boot options, you may integrate the
    keywords into the AutoYaST control file. Add an <code class="literal">info_file</code>
    section as shown in the example below. This section contains
    keyword—value pairs, separated by colons, one pair per line.
   </p><div class="example" id="id-1.7.7.2.5.5.4" data-id-title="linuxrc Options in the AutoYaST control file"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 9.2: </span><span class="title-name"><code class="command">linuxrc</code> Options in the AutoYaST control file </span></span><a title="Permalink" class="permalink" href="#id-1.7.7.2.5.5.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">....
  &lt;install&gt;
....
    &lt;init&gt;
        &lt;info_file&gt;

install: nfs://192.168.1.1/CDs/full-x86_64
dud: https://example.com/driver_updates/filename.dud
upgrade: 1
textmode: 1
      &lt;/info_file&gt;
    &lt;/init&gt;
......
  &lt;/install&gt;
  ....</pre></div></div></div><p>
    Note that the <code class="literal">autoyast2</code> keyword must point to the same
    file. If it is on a flash disk (for example, a USB stick), then the option
    <code class="literal">usb://</code> needs to be used. If the
    <code class="filename">info</code> file is stored in the initial RAM disk, the
    <code class="literal">file:///</code> option needs to be used.
   </p></section></section><section class="sect1" id="System-Configuration" data-id-title="System configuration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.4 </span><span class="title-name">System configuration</span></span> <a title="Permalink" class="permalink" href="#System-Configuration">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The system configuration during auto-installation is the most important part
   of the whole process. As you have seen in the previous chapters, almost
   anything can be configured automatically on the target system. In addition
   to the pre-defined directives, you can always use post-scripts to change
   other things in the system. Additionally you can change any system
   variables, and if required, copy complete configuration files into the
   target system.
  </p><section class="sect2" id="System-Configuration-post" data-id-title="Post-install and system configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.4.1 </span><span class="title-name">Post-install and system configuration</span></span> <a title="Permalink" class="permalink" href="#System-Configuration-post">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The post-installation and system configuration are initiated directly after
    the last package is installed on the target system and continue after the
    system has booted for the first time.
   </p><p>
    Before the system is booted for the first time, AutoYaST writes all data
    collected during installation and writes the boot loader in the specified
    location. In addition to these regular tasks, AutoYaST executes the
    chroot-scripts as specified in the control file. Note that these scripts
    are executed while the system is not yet mounted.
   </p><p>
    If a different kernel than the default is installed, a hard reboot will be
    required. A hard reboot can also be forced during auto-installation,
    independent of the installed kernel. Use the <code class="literal">reboot</code>
    property of the <code class="literal">general</code> resource (see
    <a class="xref" href="#CreateProfile-General" title="4.1. General options">Section 4.1, “General options”</a>).
   </p></section><section class="sect2" id="System-Configuration-custom" data-id-title="System customization"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.4.2 </span><span class="title-name">System customization</span></span> <a title="Permalink" class="permalink" href="#System-Configuration-custom">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_auto_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Most of the system customization is done in the second stage of the
    installation. If you require customization that cannot be done using AutoYaST
    resources, use post-install scripts for further modifications.
   </p><p>
    You can define an unlimited number of custom scripts in the control file,
    either by editing the control file or by using the configuration system.
   </p></section></section></section></div><div class="part" id="id-1.7.8" data-id-title="Uses for AutoYaST on installed systems"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part V </span><span class="title-name">Uses for AutoYaST on installed systems </span></span><a title="Permalink" class="permalink" href="#id-1.7.8">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_autoyast.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#InstalledSystem"><span class="title-number">10 </span><span class="title-name">Running AutoYaST in an installed system</span></a></span></li><dd class="toc-abstract"><p>
    In some cases it is useful to run AutoYaST in a running system. Bear in mind that the
    <code class="literal">partitioning</code> section is ignored in this scenario.
   </p></dd></ul></div><section class="chapter" id="InstalledSystem" data-id-title="Running AutoYaST in an installed system"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">10 </span><span class="title-name">Running AutoYaST in an installed system</span></span> <a title="Permalink" class="permalink" href="#InstalledSystem">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_running_system.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In some cases it is useful to run AutoYaST in a running system. Bear in mind that the
    <code class="literal">partitioning</code> section is ignored in this scenario.
   </p><p>
    In the following example, an additional software package
    (<code class="literal">foo</code>) is going to be installed. To run this
    software, a user needs to be added and an NTP client needs to be configured.
   </p><p>
    The respective AutoYaST profile needs to include a section for the package
    installation (<a class="xref" href="#Software-Selections-stage2-packs" title="4.9.7. Installing packages in stage 2">Section 4.9.7, “Installing packages in stage 2”</a>),
    a user (<a class="xref" href="#Configuration-Security-users" title="4.30.1. Users">Section 4.30.1, “Users”</a>) section and an
    NTP client (<a class="xref" href="#Configuration-Network-Ntp" title="4.21. NTP client">Section 4.21, “NTP client”</a>) section:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;ntp-client&gt;
    &lt;peers config:type="list"&gt;
      &lt;peer&gt;
        &lt;address&gt;us.pool.ntp.org&lt;/address&gt;
        &lt;comment/&gt;
        &lt;options&gt; iburst&lt;/options&gt;
        &lt;type&gt;server&lt;/type&gt;
      &lt;/peer&gt;
    &lt;/peers&gt;
    &lt;start_at_boot config:type="boolean"&gt;true&lt;/start_at_boot&gt;
    &lt;start_in_chroot config:type="boolean"&gt;false&lt;/start_in_chroot&gt;
    &lt;sync_interval config:type="integer"&gt;5&lt;/sync_interval&gt;
    &lt;synchronize_time config:type="boolean"&gt;false&lt;/synchronize_time&gt;
  &lt;/ntp-client&gt;
  &lt;software&gt;
    &lt;post-packages config:type="list"&gt;
      &lt;package&gt;ntp&lt;/package&gt;
      &lt;package&gt;yast2-ntp-client&lt;/package&gt;
      &lt;package&gt;foo&lt;/package&gt;
    &lt;/post-packages&gt;
  &lt;/software&gt;
  &lt;users config:type="list"&gt;
    &lt;user&gt;
      &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
      &lt;fullname&gt;Foo user&lt;/fullname&gt;
      &lt;gid&gt;100&lt;/gid&gt;
      &lt;home&gt;/home/foo&lt;/home&gt;
      &lt;password_settings&gt;
        &lt;expire/&gt;
        &lt;flag/&gt;
        &lt;inact/&gt;
        &lt;max&gt;99999&lt;/max&gt;
        &lt;min&gt;0&lt;/min&gt;
        &lt;warn&gt;7&lt;/warn&gt;
      &lt;/password_settings&gt;
      &lt;shell&gt;/bin/bash&lt;/shell&gt;
      &lt;uid&gt;1001&lt;/uid&gt;
      &lt;user_password&gt;linux&lt;/user_password&gt;
      &lt;username&gt;foo&lt;/username&gt;
    &lt;/user&gt;
  &lt;/users&gt;
&lt;/profile&gt;</pre></div><p>
    Store this file as <code class="filename">/tmp/install_foo.xml</code> and start the
    AutoYaST installation process by calling:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast2 ayast_setup setup filename=/tmp/install_foo.xml dopackages="yes"</pre></div><p>
    For more information, run <code class="command">yast2 ayast_setup longhelp</code>
   </p></section></div><div class="part" id="id-1.7.9" data-id-title="Appendixes"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part VI </span><span class="title-name">Appendixes </span></span><a title="Permalink" class="permalink" href="#id-1.7.9">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_autoyast.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="appendix"><a href="#handlingrules"><span class="title-number">A </span><span class="title-name">Handling rules</span></a></span></li><dd class="toc-abstract"><p>
  The following figure illustrates how rules are handled and the processes of
  retrieval and merge.
 </p></dd><li><span class="appendix"><a href="#app-ay-faq"><span class="title-number">B </span><span class="title-name">AutoYaST FAQ—frequently asked questions</span></a></span></li><dd class="toc-abstract"><p>
     How do I invoke an AutoYaST installation?
    </p></dd><li><span class="appendix"><a href="#appendix-linuxrc"><span class="title-number">C </span><span class="title-name">Advanced <code class="command">linuxrc</code> options</span></a></span></li><dd class="toc-abstract"><p>
  <code class="command">linuxrc</code> is a small program that runs after the kernel has
  loaded, but before AutoYaST or other stages. It prepares the system for
  installation. It allows the user to load modules, start an installed system
  or a rescue system, and to guide the operation of YaST.
 </p></dd><li><span class="appendix"><a href="#appendix-ay-12vs15"><span class="title-number">D </span><span class="title-name">Differences between AutoYaST profiles in SLE 12 and 15</span></a></span></li><dd class="toc-abstract"><p>
    Significant changes in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, like the new modules concept or
    replacing SuSEfirewall2 with <code class="systemitem">firewalld</code>, required changes in AutoYaST. If you
    want to reuse existing <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 profiles with
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, you need to adjust them as documented here.
   </p></dd><li><span class="appendix"><a href="#id-1.7.9.6"><span class="title-number">E </span><span class="title-name">GNU licenses</span></a></span></li><dd class="toc-abstract"><p>
  This appendix contains the GNU Free Documentation License version 1.2.
 </p></dd></ul></div><section class="appendix" id="handlingrules" data-id-title="Handling rules"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">A </span><span class="title-name">Handling rules</span></span> <a title="Permalink" class="permalink" href="#handlingrules">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_handling_rules.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The following figure illustrates how rules are handled and the processes of
  retrieval and merge.
 </p><div class="figure" id="rulesflow"><div class="figure-contents"><div class="mediaobject"><a href="images/rules_flow.png"><img src="images/rules_flow.png" alt="Rules retrieval process" title="Rules retrieval process"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure A.1: </span><span class="title-name">Rules retrieval process </span></span><a title="Permalink" class="permalink" href="#rulesflow">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_handling_rules.xml" title="Edit source document"> </a></div></div></div></section><section class="appendix" id="app-ay-faq" data-id-title="AutoYaST FAQ—frequently asked questions"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">B </span><span class="title-name">AutoYaST FAQ—frequently asked questions</span></span> <a title="Permalink" class="permalink" href="#app-ay-faq">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_faq.xml" title="Edit source document"> </a></div></div></div></div></div><div class="qandaset" id="id-1.7.9.3.3"><div class="free-id" id="qa-ay-invoke"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.1.1"><strong>1.</strong>
     How do I invoke an AutoYaST installation?
    </dt><dd class="answer" id="id-1.7.9.3.3.1.2"><p>
     On all <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> versions, the automatic installation gets invoked by
     adding <code class="literal">autoyast=&lt;PATH_TO_PROFILE&gt;</code> to the kernel
     parameter list. So for example adding
     <code class="literal">autoyast=<em class="replaceable">http://MYSERVER/MYCONFIG.xml</em></code>
     will start an automatic installation where the profile with the AutoYaST
     configuration gets fetched from the Web server
     <code class="literal">myserver</code>. See <a class="xref" href="#invoking-autoinst" title="9.3. Invoking the auto-installation process">Section 9.3, “Invoking the auto-installation process”</a> for
     more information.
    </p></dd></dl><div class="free-id" id="qa-ay-profile"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.2.1"><strong>2.</strong>
     What is an AutoYaST profile?
    </dt><dd class="answer" id="id-1.7.9.3.3.2.2"><p>
     A profile is the AutoYaST configuration file. The content of the AutoYaST profile
     determines how the system will be configured and which packages will get
     installed. This includes partitioning, network setup, and software
     sources, to name but a few. Almost everything that can be configured with
     YaST in a running system can also be configured in an AutoYaST profile. The
     profile format is an ASCII XML file.
    </p></dd></dl><div class="free-id" id="qa-ay-create-profile"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.3.1"><strong>3.</strong>
     How do I create an AutoYaST profile?
    </dt><dd class="answer" id="id-1.7.9.3.3.3.2"><p>
     The easiest way to create an AutoYaST profile is to use an existing
     <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> system as a template. On an already installed system, start
     <span class="guimenu">YaST</span> › <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation</span>. Now select <span class="guimenu">Tools</span> › <span class="guimenu">Create Reference Profile</span> from the menu. Choose the system components you want to
     include in the profile. Alternatively, create a profile containing the
     complete system configuration by running <code class="command">sudo yast
     clone_system</code> from the command line.
    </p><p>
     Both methods will create the file <code class="filename">/root/autoinst.xml</code>.
     The version created on the command line can be used to set up an identical
     clone of the system on which the profile was created. However, usually you
     will want to adjust the file to make it possible to install several
     machines that are very similar, but not identical. This can be done by
     adjusting the profile using your favorite text/XML editor.
    </p></dd></dl><div class="free-id" id="qa-ay-check-profile"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.4.1"><strong>4.</strong>
     How can I check the syntax of a created AutoYaST profile?
    </dt><dd class="answer" id="id-1.7.9.3.3.4.2"><p>
     The most efficient way to check your created AutoYaST profile is by using
     <code class="command">jing</code> or <code class="command">xmllint</code>.
    </p><p>
     See <a class="xref" href="#CreateProfile-Manual" title="3.3. Creating/editing a control file manually">Section 3.3, “Creating/editing a control file manually”</a> for details.
    </p></dd></dl><div class="free-id" id="qa-ay-small-profile"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.5.1"><strong>5.</strong>
     What is smallest AutoYaST profile that makes sense?
    </dt><dd class="answer" id="id-1.7.9.3.3.5.2"><p>
     If a section has not been defined in the AutoYaST profile the settings of the
     general YaST installation proposal will be used. However, you need to
     specify at least the <code class="systemitem">root</code> password to be able to log in to the
     machine after the installation.
    </p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;users config:type="list"&gt;
    &lt;user&gt;
      &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
      &lt;user_password&gt;linux&lt;/user_password&gt;
      &lt;username&gt;root&lt;/username&gt;
    &lt;/user&gt;
  &lt;/users&gt;
&lt;/profile&gt;</pre></div></dd></dl><div class="free-id" id="qa-ay-auto-sound"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.6.1"><strong>6.</strong>
     How do I do an automatic installation with autodetection of my sound card?
    </dt><dd class="answer" id="id-1.7.9.3.3.6.2"><p>
     Use the following <code class="literal">sound</code> section in your profile:
    </p><div class="verbatim-wrap"><pre class="screen">&lt;sound&gt;
  &lt;autoinstall config:type="boolean"&gt;true&lt;/autoinstall&gt;
  &lt;configure_detected config:type="boolean"&gt;true&lt;/configure_detected&gt;
&lt;/sound&gt;</pre></div></dd></dl><div class="free-id" id="qa-ay-cd"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.7.1"><strong>7.</strong>
     I want to install from DVD only. Where do I put the AutoYaST profile?
    </dt><dd class="answer" id="id-1.7.9.3.3.7.2"><p>
     Put the profile in the root of the DVD. Refer to it with
     <code class="literal">file:///<em class="replaceable">PROFILE</em>.xml</code>.
    </p></dd></dl><div class="free-id" id="qa-ay-test-merge"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.8.1"><strong>8.</strong>
     How can I test a merging process on the command line?
    </dt><dd class="answer" id="id-1.7.9.3.3.8.2"><p>
     To merge two profiles, <code class="filename">a.xml</code> with
     <code class="filename">base.xml</code>, run the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>/usr/bin/xsltproc --novalid --param replace "'false'" \
--param dontmerge1 "'package'" --param with "'a.xml'" --output out.xml \
/usr/share/autoinstall/xslt/merge.xslt base.xml</pre></div><p>
     This requires sections in both profiles to be in alphabetical order
     (&lt;software&gt;, for example, needs to be listed after &lt;add-on&gt;).
     If you have created the profile with YaST, profiles are automatically
     sorted correctly.
    </p><p>
     The <code class="literal">dontmerge1</code> parameter is optional and an example of
     what to do when you use the <code class="literal">dont_merge</code> element in your
     profile. See <a class="xref" href="#merging" title="6.4. Merging of rules and classes">Section 6.4, “Merging of rules and classes”</a> for more information.
    </p></dd></dl><div class="free-id" id="qa-ay-zypper"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.9.1"><strong>9.</strong>
     Can I call Zypper from scripts?
    </dt><dd class="answer" id="id-1.7.9.3.3.9.2"><p>
     Zypper can only be called from AutoYaST init scripts, because during the
     post-script phase, YaST still has an exclusive lock on the RPM database.
    </p><p>
     If you really need to use other script types (for example a post-script)
     you will need to break the lock at your own risk:
    </p><div class="verbatim-wrap"><pre class="screen">&lt;post-scripts config:type="list"&gt;
  &lt;script&gt;
    &lt;filename&gt;yast_clone.sh&lt;/filename&gt;
    &lt;interpreter&gt;shell&lt;/interpreter&gt;
    &lt;location/&gt;
    &lt;feedback config:type="boolean"&gt;false&lt;/feedback&gt;
    &lt;source&gt;&lt;![CDATA[#!/bin/sh
mv /var/run/zypp.pid /var/run/zypp.sav
zypper in foo
mv /var/run/zypp.sav /var/run/zypp.pid
]]&gt;&lt;/source&gt;
  &lt;/script&gt;
&lt;/post-scripts&gt;</pre></div></dd></dl><div class="free-id" id="id-1.7.9.3.3.10"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.10.1"><strong>10.</strong>
     Is the order of sections in an AutoYaST profile important?
    </dt><dd class="answer" id="id-1.7.9.3.3.10.2"><p>
     Actually the order is not important. The order of sections in the profile
     has no influence on the AutoYaST workflow. However, to
     <span class="emphasis"><em>merge</em></span> different profiles, sections need to be in
     alphabetical order.
    </p></dd></dl><div class="free-id" id="qa-ay-insecure"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.11.1"><strong>11.</strong>
     <code class="command">linuxrc</code> blocks the installation with <code class="literal">File not
     signed</code>. I need to manually interact.
    </dt><dd class="answer" id="id-1.7.9.3.3.11.2"><p>
     <code class="command">linuxrc</code> found an unsigned file, such as a driver
     update. To use an unsigned file, you can suppress that message by passing
     <code class="literal">insecure=1</code> to the <code class="command">linuxrc</code> parameter
     list (together with the <code class="literal">autoyast=...</code> parameter).
    </p></dd></dl><div class="free-id" id="qa-ay-net"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.12.1"><strong>12.</strong>
     I want to install from DVD/USB/HD but fetch the XML file from the network.
    </dt><dd class="answer" id="id-1.7.9.3.3.12.2"><p>
     You need to pass <code class="literal">ifcfg</code> to <code class="command">linuxrc</code>.
     This is required to set up the network, otherwise AutoYaST cannot download the
     profile from the remote host. See <a class="xref" href="#ay-adv-network" title="C.3. Advanced network setup">Section C.3, “Advanced network setup”</a> for
     more information.
    </p></dd></dl><div class="free-id" id="qa-ay-nfsroot"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.13.1"><strong>13.</strong>
     Is installation onto an NFS root (<code class="filename">/</code>) possible?
    </dt><dd class="answer" id="id-1.7.9.3.3.13.2"><p>
     Yes, but it is more complex than other methods. The environment (DHCP,
     TFTP, etc.) must be set up very carefully. The AutoYaST profile must look like
     the following:
    </p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;partitioning config:type="list"&gt;
    &lt;drive&gt;
      &lt;device&gt;/dev/nfs&lt;/device&gt;
      &lt;initialize config:type="boolean"&gt;false&lt;/initialize&gt;
      &lt;type config:type="symbol"&gt;CT_NFS&lt;/type&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;nfs&lt;/filesystem&gt;
          &lt;fstopt&gt;nolock&lt;/fstopt&gt;
          &lt;device&gt;10.10.1.53:/tmp/m4&lt;/device&gt;
          &lt;mount&gt;/&lt;/mount&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
      &lt;use&gt;all&lt;/use&gt;
    &lt;/drive&gt;
  &lt;/partitioning&gt;
&lt;/profile&gt;</pre></div></dd></dl><div class="free-id" id="id-1.7.9.3.3.14"> </div><dl class="qandaentry"><dt class="question" id="id-1.7.9.3.3.14.1"><strong>14.</strong>
     Where can I ask questions which have not been answered here?
    </dt><dd class="answer" id="id-1.7.9.3.3.14.2"><p>
     There is an AutoYaST mailing list where you can post your questions. Join us
     at <a class="link" href="http://lists.opensuse.org/opensuse-autoinstall/" target="_blank">http://lists.opensuse.org/opensuse-autoinstall/</a>.
    </p></dd></dl></div></section><section class="appendix" id="appendix-linuxrc" data-id-title="Advanced linuxrc options"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">C </span><span class="title-name">Advanced <code class="command">linuxrc</code> options</span></span> <a title="Permalink" class="permalink" href="#appendix-linuxrc">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_linuxrc_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  <code class="command">linuxrc</code> is a small program that runs after the kernel has
  loaded, but before AutoYaST or other stages. It prepares the system for
  installation. It allows the user to load modules, start an installed system
  or a rescue system, and to guide the operation of YaST.
 </p><div id="id-1.7.9.4.4" data-id-title="AutoYaST and linuxrc settings are not identical" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: AutoYaST and <code class="command">linuxrc</code> settings are not identical</div><p>
   Some <code class="command">linuxrc</code> settings coincidentally have the same names
   as settings used by AutoYaST in its <code class="filename">autoyast.xml</code> file. This
   does <span class="emphasis"><em>not</em></span> mean that they take the same parameters or
   function in the same way. For example, AutoYaST takes a
   <code class="command">self_update</code> setting. If this value is set to
   <code class="literal">1</code>, another setting, <code class="command">self_update_url</code>
   will be read and followed. Although <code class="command">linuxrc</code> also has a
   <code class="command">self_update</code> setting, <code class="command">linuxrc</code>'s setting
   takes values of either <code class="literal">0</code> or a URL.
  </p><p>
   Do not pass AutoYaST parameters to <code class="command">linuxrc</code>, as this will
   almost certainly not give the desired results.
  </p></div><p>
  If <code class="command">linuxrc</code> is installed on a machine, information about it
  can be found in the directory
  <code class="filename">/usr/share/doc/packages/linuxrc/</code>. Alternatively, its
  documentation can be found online at:
  <a class="link" href="https://en.opensuse.org/SDB:Linuxrc" target="_blank">https://en.opensuse.org/SDB:Linuxrc</a>.
 </p><div id="id-1.7.9.4.6" data-id-title="Running linuxrc on an installed system" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Running <code class="command">linuxrc</code> on an installed system</div><p>
   If you run <code class="command">linuxrc</code> on an installed system, it will work
   slightly differently so as not to destroy your installation. As a
   consequence, you cannot test all features this way.
  </p></div><p>
  To keep the <code class="command">linuxrc</code> binary file as small as possible, all
  its libraries and other supplemental files are linked directly into the main
  program binary file. This means that there is no need for any shared
  libraries in the initial RAM disk, <code class="filename">initrd</code>.
 </p><section class="sect1" id="ay-cmd-parameters" data-id-title="Passing parameters to linuxrc"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">C.1 </span><span class="title-name">Passing parameters to <code class="command">linuxrc</code></span></span> <a title="Permalink" class="permalink" href="#ay-cmd-parameters">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_linuxrc_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Unless <code class="command">linuxrc</code> is in manual mode, it will look for an
   <code class="filename">info</code> file in these locations: first
   <code class="filename">/info</code> on the flash disk (for example, a USB stick) and
   if that does not exist, for <code class="filename">/info</code> in the
   <code class="filename">initrd</code>. After that, it parses the kernel command line
   for parameters. You may change the <code class="filename">info</code> file
   <code class="command">linuxrc</code> reads by setting the <code class="filename">info</code>
   command line parameter. If you do not want <code class="command">linuxrc</code> to
   read the kernel command line (for example, because you need to specify a
   kernel parameter that <code class="command">linuxrc</code> recognizes as well), use
   <code class="literal">linuxrc=nocmdline</code>.
  </p><p>
   <code class="command">linuxrc</code> will always look for and parse a file called
   <code class="filename">/linuxrc.config</code>. Use this file to change default values
   if you need to. In general, it is better to use the
   <code class="filename">info</code> file instead. Note that
   <code class="filename">/linuxrc.config</code> is read before any
   <code class="filename">info</code> file, even in manual mode.
  </p></section><section class="sect1" id="info-file-format" data-id-title="info file format"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">C.2 </span><span class="title-name"><code class="filename">info</code> file format</span></span> <a title="Permalink" class="permalink" href="#info-file-format">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_linuxrc_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Lines starting with <code class="literal">#</code> are comments. Valid entries are of
   the form:
  </p><div class="verbatim-wrap"><pre class="screen">key: value</pre></div><p>
   Note that <code class="literal">value</code> extends to the end of the line and
   therefore may contain spaces. The matching of <code class="literal">key</code> is on a
   case-insensitive basis.
  </p><p>
   You can use the same key-value pairs on the kernel command line using the
   syntax <code class="literal">key=value</code>. Lines that do not have the form
   described above will be ignored.
  </p><p>
   The table below lists important keys and example values. For a complete list
   of <code class="command">linuxrc</code> parameters, refer to
   <a class="link" href="https://en.opensuse.org/SDB:Linuxrc" target="_blank">https://en.opensuse.org/SDB:Linuxrc</a>.
  </p><div class="table" id="id-1.7.9.4.9.7" data-id-title="Advanced linuxrc keywords"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table C.1: </span><span class="title-name">Advanced <code class="command">linuxrc</code> keywords </span></span><a title="Permalink" class="permalink" href="#id-1.7.9.4.9.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_linuxrc_options.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="1"/><col class="2"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Keyword: Example Value
       </p>
      </th><th style="border-bottom: 1px solid ; ">
       <p>
        Description
       </p>
      </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">addswap: 0|3|/dev/sda5</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        If 0, never ask for swap; if the argument is a positive number
        <code class="literal">n</code>, activate the swap partition; if the argument is a
        partition name, activate this swap partition.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">autoyast:
        <em class="replaceable">ftp://AUTOYASTFILE</em></code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Location of the auto installation file; activates auto installation
        mode. See <a class="xref" href="#Commandline-ay" title="AutoYaST control file locations">AutoYaST control file locations</a> for details.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">bootptimeout: 10</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        10 seconds timeout for BOOTP requests.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">bootpwait: 5</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Sleep 5 seconds between network activation and starting bootp.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">display: color|mono|alt</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Set the menu color scheme.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">exec: <em class="replaceable">COMMAND</em></code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Run <span class="emphasis"><em>command</em></span>.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">forceinsmod: 0|1</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Use the <code class="option">-f</code> option (force) when running
        <code class="command">insmod</code> commands.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">forcerootimage: 0|1</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Load the installation system into RAM disk.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">ifcfg:
        <em class="replaceable">NETWORK_CONFIGURATION</em></code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Set up and start the network. See <a class="xref" href="#ay-adv-network" title="C.3. Advanced network setup">Section C.3, “Advanced network setup”</a> for
        more information.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">insmod: <em class="replaceable">MODULE</em></code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Load <em class="replaceable">MODULE</em>.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">install: <em class="replaceable">URL</em></code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Install from the repository specified with
        <em class="replaceable">URL</em>. For the syntax of
        <em class="replaceable">URL</em> refer to
        <a class="link" href="https://en.opensuse.org/SDB:Linuxrc#url_descr" target="_blank">https://en.opensuse.org/SDB:Linuxrc#url_descr</a>.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">keytable: de-lat1-nd</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Virtual console keyboard map to load.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">language: de_DE</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Language preselected for the installation.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">loghost: 10.10.0.22</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Enable remote logging via syslog via UDP port 514
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">loghost: @10.10.0.22</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Enable remote logging via syslog via TCP port 514
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">memloadimage: 50000</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Load installation system into RAM disk if free memory is above 50000
        KB.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">memlimit: 10000</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Ask for swap if free memory drops below 10000 KB.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">memYaST: 20000</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Run YaST in text mode if free memory is below 20000 KB.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">memYaSTText: 10000</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Ask for swap before starting YaST if free memory is below 10000 KB.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">proxy: http://10.10.0.1:3128</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Defines an HTTP proxy server. For the full parameter syntax, refer to
        <a class="link" href="https://en.opensuse.org/SDB:Linuxrc#p_proxy" target="_blank">https://en.opensuse.org/SDB:Linuxrc#p_proxy</a>.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">rescue: 1|nfs://server/dir</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Load the rescue system; the URL variant specifies the location of the
        rescue image explicitly.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">rescueimage: /suse/images/rescue</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Location of the rescue system image.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">rootimage: /suse/images/root</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Location of the installation system image.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">textmode: 1</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Start YaST in text mode.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="literal">usbwait: 4</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Wait four seconds after loading the USB modules.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        <code class="literal">y2confirm</code>
       </p>
      </td><td>
       <p>
        Overrides the confirm parameter in a control file and requests
        confirmation of installation proposal.
       </p>
      </td></tr></tbody></table></div></div></section><section class="sect1" id="ay-adv-network" data-id-title="Advanced network setup"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">C.3 </span><span class="title-name">Advanced network setup</span></span> <a title="Permalink" class="permalink" href="#ay-adv-network">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_linuxrc_options.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Even if parameters like <code class="literal">hostip</code>,
   <code class="literal">nameserver</code>, and <code class="literal">gateway</code> are passed to
   <code class="command">linuxrc</code>, the network is only started when it is needed
   (for example, when installing via SSH or VNC). Because
   <code class="literal">autoyast</code> is not a <code class="command">linuxrc</code> parameter
   (this parameter is ignored by <code class="command">linuxrc</code> and is only passed
   to YaST), the network will <span class="emphasis"><em>not</em></span> be started
   automatically when specifying a remote location for the AutoYaST profile.
  </p><p>
   Therefore, the network needs to be started explicitly. This is done by using
   the parameter <code class="literal">ifcfg</code>. <code class="literal">ifcfg</code> directly
   controls the content of the
   <code class="filename">/etc/sysconfig/network/ifcfg-*</code> files.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.9.4.10.4.1"><span class="term">DHCP network configuration</span></dt><dd><p>
      The general syntax to configure DHCP is
     </p><div class="verbatim-wrap"><pre class="screen"> ifcfg=<em class="replaceable">INTERFACE</em>=<em class="replaceable">DHCP*</em>,<em class="replaceable">OPTION1</em>=<em class="replaceable">VALUE1</em>,<em class="replaceable">OPTION2</em>=<em class="replaceable">VALUE2</em></pre></div><p>
      where <em class="replaceable">INTERFACE</em> is the interface name, for
      example <code class="literal">eth0</code>, or <code class="literal">eth*</code> for all
      interfaces. <em class="replaceable">DHCP*</em> can either be
      <code class="literal">dhcp</code> (IPv4 and IPv6), <code class="literal">dhcp4</code>, or
      <code class="literal">dhcp6</code>.
     </p><p>
      To set up DHCP for <code class="literal">eth0</code> use:
     </p><div class="verbatim-wrap"><pre class="screen">ifcfg=eth0=dhcp</pre></div><p>
      To set up DHCP on all interfaces use:
     </p><div class="verbatim-wrap"><pre class="screen">ifcfg=eth*=dhcp</pre></div></dd><dt id="id-1.7.9.4.10.4.2"><span class="term">Static network configuration</span></dt><dd><p>
      The general syntax to configure a static network is
     </p><div class="verbatim-wrap"><pre class="screen">ifcfg=<em class="replaceable">INTERFACE</em>=<em class="replaceable">IP_LIST</em>,<em class="replaceable">GATEWAY_LIST</em>,<em class="replaceable">NAMESERVER_LIST</em>,<em class="replaceable">DOMAINSEARCH_LIST</em>,\
<em class="replaceable">OPTION1=value1</em>,...</pre></div><p>
      where <em class="replaceable">INTERFACE</em> is the interface name, for
      example <code class="literal">eth0</code>. If using <code class="literal">eth*</code>, the
      first device available will be used. The other parameters need to be
      replaced with the respective values in the given order. Example:
     </p><div class="verbatim-wrap"><pre class="screen">ifcfg=eth0=192.168.2.100/24,192.168.5.1,192.168.1.116,example.com</pre></div><p>
      When specifying multiple addresses for a parameter, use spaces to
      separate them and quote the complete string. The following example uses
      two name servers and a search list containing two domains.
     </p><div class="verbatim-wrap"><pre class="screen">ifcfg="eth0=192.168.2.100/24,192.168.5.1,192.168.1.116 192.168.1.117,example.com example.net"</pre></div></dd></dl></div><p>
   For more information refer to
   <a class="link" href="https://en.opensuse.org/SDB:Linuxrc#Network_Configuration" target="_blank">https://en.opensuse.org/SDB:Linuxrc#Network_Configuration</a>.
  </p></section></section><section class="appendix" id="appendix-ay-12vs15" data-id-title="Differences between AutoYaST profiles in SLE 12 and 15"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">D </span><span class="title-name">Differences between AutoYaST profiles in SLE 12 and 15</span></span> <a title="Permalink" class="permalink" href="#appendix-ay-12vs15">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Significant changes in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, like the new modules concept or
    replacing SuSEfirewall2 with <code class="systemitem">firewalld</code>, required changes in AutoYaST. If you
    want to reuse existing <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 profiles with
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, you need to adjust them as documented here.
   </p></div></div></div></div><section class="sect1" id="sec-ay-12vs15-product-selection" data-id-title="Product selection"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">D.1 </span><span class="title-name">Product selection</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-product-selection">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For backward compatibility with profiles created for pre-SLE 15 products,
   AutoYaST implements a heuristic that selects products automatically. This
   heuristic will be used when the profile does not contain a <code class="sgmltag-element">product</code> element. Automatic product selection is based
   on the package and pattern selection in the profile. However, whenever
   possible, avoid relying on this mechanism and adapt old profiles to use
   explicit product selection.
  </p><p>
   For information about explicit product selection, refer to
   <a class="xref" href="#Software-Selections-base-product" title="4.9.1. Product selection">Section 4.9.1, “Product selection”</a>.
  </p><p>
   If automatic product selection fails, an error is shown and the installation
   will not be continued.
  </p></section><section class="sect1" id="sec-ay-12vs15-software" data-id-title="Software"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">D.2 </span><span class="title-name">Software</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-software">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP4</span></span> installation medium only contains a very minimal set of
   packages to install. This minimal set only provides an installation
   environment and does not include any server applications or advanced tools.
   Additional software repositories, providing more packages are offered as
   <span class="quote">“<span class="quote">modules</span>”</span> or <span class="quote">“<span class="quote">extensions</span>”</span>. They are provided via
   two alternatives:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     via a registration server (the SUSE Customer Center or a local SMT/RMT proxy)
    </p></li><li class="listitem"><p>
     via the SLE-15-SP4-Full-<em class="replaceable">ARCH</em>-GM-media1.iso image containing all modules and extensions. Using this
     medium does not require access to a registration server during
     installation. It can be shared on the local network via an installation
     server.
    </p></li></ul></div><div id="id-1.7.9.5.4.4" data-id-title="Maintenance updates" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Maintenance updates</div><p>
    Only using the registration server will grant access to all maintenance
    updates at installation time. Maintenance updates are not available when
    using the DVD medium without registration.
   </p></div><section class="sect2" id="sec-ay-12vs15-software-scc" data-id-title="Adding modules or extensions using the registration server"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.2.1 </span><span class="title-name">Adding modules or extensions using the registration server</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-software-scc">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To add a module or extension from the registration server, use the <code class="sgmltag-element">addons</code> tag for each module/extension in the
    <code class="literal">suse_register</code> section. Extensions require an additional registration code,
    which can be specified with the <code class="sgmltag-element">reg_code</code> tag.
   </p><p>
    The following XML code adds the Basesystem and Server Applications modules
    and the Live Patching extension. To get the respective values for the tags
    <code class="sgmltag-element">name</code>, <code class="sgmltag-element">version</code>, and
    <code class="sgmltag-element">arch</code>, run the command <code class="command">SUSEConnect
    --list-extensions</code> on a system that already has SLE <span class="productnumber"><span class="phrase">15 SP4</span></span> installed.
   </p><div class="example" id="ex-ay-12vs15-software-scc" data-id-title="Adding modules and extensions (online)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.1: </span><span class="title-name">Adding modules and extensions (online) </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-software-scc">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;suse_register&gt;
 &lt;addons config:type="list"&gt;
  &lt;addon&gt;
   &lt;name&gt;sle-module-basesystem&lt;/name&gt;
   &lt;version&gt;15.4&lt;/version&gt;
   &lt;arch&gt;x86_64&lt;/arch&gt;
  &lt;/addon&gt;
  &lt;addon&gt;
   &lt;name&gt;sle-module-server-applications&lt;/name&gt;
   &lt;version&gt;15.4&lt;/version&gt;
   &lt;arch&gt;x86_64&lt;/arch&gt;
   &lt;/addon&gt;
  &lt;addon&gt;
   &lt;name&gt;sle-module-live-patching&lt;/name&gt;
   &lt;version&gt;15.4&lt;/version&gt;
   &lt;arch&gt;x86_64&lt;/arch&gt;
   &lt;reg_code&gt;<em class="replaceable">REGISTRATION_CODE</em>&lt;/reg_code&gt;
  &lt;/addon&gt;
 &lt;/addons&gt;
&lt;/suse_register&gt;</pre></div></div></div><p>
    Refer to <a class="xref" href="#CreateProfile-Register" title="4.3. System registration and extension selection">Section 4.3, “System registration and extension selection”</a> for more
    information.
   </p></section><section class="sect2" id="sec-ay-12vs15-software-packagemedia" data-id-title="Adding modules or extensions using the SLE-15-SP4-Full-ARCH-GM-media1.iso image"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.2.2 </span><span class="title-name">Adding modules or extensions using the SLE-15-SP4-Full-<em class="replaceable">ARCH</em>-GM-media1.iso image</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-software-packagemedia">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To add a module or extension using the SLE-15-SP4-Full-<em class="replaceable">ARCH</em>-GM-media1.iso image, create entries in
    the add-on section as shown in the example below. The following XML code
    adds the Basesystem module from a USB flash drive that contains the image:
   </p><div class="example" id="ex-ay-12vs15-software-packagemedia" data-id-title="Adding modules and extensions (offline)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.2: </span><span class="title-name">Adding modules and extensions (offline) </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-software-packagemedia">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;add-on&gt;
 &lt;add_on_products config:type="list"&gt;
  &lt;listentry&gt;
   &lt;media_url&gt;&lt;![CDATA[dvd:///?devices=/dev/sda%2C/dev/sdb%2C/dev/sdc%2C/dev/sdd]]&gt;&lt;/media_url&gt;
   &lt;product_dir&gt;/Module-Basesystem&lt;/product_dir&gt;
   &lt;product&gt;sle-module-basesystem&lt;/product&gt;
  &lt;/listentry&gt;
 &lt;/add_on_products&gt;
&lt;/add-on&gt;</pre></div></div></div><div id="id-1.7.9.5.4.6.4" data-id-title="Product name matching" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Product name matching</div><p>
     
     The <code class="sgmltag-element">product</code> tag must match the internal product
     name contained in the repository. If the product name does not match at
     installation AutoYaST will report an error.
    </p></div><div id="id-1.7.9.5.4.6.5" data-id-title="Using the installation media image from a local server" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Using the installation media image from a local server</div><p>
     You can share the content of the USB flash drive on the local network via an NFS, FTP or HTTP
     server. To do so, replace the URL in the <code class="sgmltag-element">media_url</code> tag so it points to root of the medium on
     the server, for example:
    </p><div class="verbatim-wrap"><pre class="screen">&lt;media_url&gt;ftp://ftp.example.com/sle_15_sp4_full/&lt;/media_url&gt;</pre></div></div></section><section class="sect2" id="sec-ay-12vs15-software-patterns" data-id-title="Renamed software patterns"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.2.3 </span><span class="title-name">Renamed software patterns</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-software-patterns">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Software patterns have also changed since <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15. Some patterns have
    been renamed; a short summary is provided in the following table.
   </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">Old SLE 12 Pattern</th><th style="text-align: left; vertical-align: top; border-bottom: 1px solid ; ">New SLE 15 Pattern</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Basis-Devel
        </p>
       </td><td style="text-align: left; vertical-align: top; border-bottom: 1px solid ; ">
        <p>
         devel_basis
        </p>
       </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         gnome-basic
        </p>
       </td><td style="text-align: left; vertical-align: top; border-bottom: 1px solid ; ">
        <p>
         gnome_basic
        </p>
       </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Minimal
        </p>
       </td><td style="text-align: left; vertical-align: top; border-bottom: 1px solid ; ">
        <p>
         enhanced_base
        </p>
       </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         printing
        </p>
       </td><td style="text-align: left; vertical-align: top; border-bottom: 1px solid ; ">
        <p>
         print_server
        </p>
       </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         SDK-C-C++
        </p>
       </td><td style="text-align: left; vertical-align: top; border-bottom: 1px solid ; ">
        <p>
         devel_basis
        </p>
       </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         SDK-Doc
        </p>
       </td><td style="text-align: left; vertical-align: top; border-bottom: 1px solid ; ">
        <p>
         technical_writing
        </p>
       </td></tr><tr><td style="text-align: left; vertical-align: top; border-right: 1px solid ; ">
        <p>
         SDK-YaST
        </p>
       </td><td style="text-align: left; vertical-align: top; ">
        <p>
         devel_yast
        </p>
       </td></tr></tbody></table></div><p>
    Carefully check if all required packages are available in the
    defined patterns and adjust the profiles accordingly. Additionally, the
    required patterns and packages need to be available in the activated
    extensions or modules.
   </p><div class="itemizedlist"><div class="title-container"><div class="itemizedlist-title-wrap"><div class="itemizedlist-title"><span class="title-number-name"><span class="title-name">Notes </span></span><a title="Permalink" class="permalink" href="#id-1.7.9.5.4.7.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><ul class="itemizedlist"><li class="listitem"><p>
      The pattern renames in the table above are not 1:1 replacements; the
      content of some patterns has been changed as well, some packages were
      moved to a different pattern or even removed from <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15.
     </p></li><li class="listitem"><p>
      Check that the required packages are still included in the used patterns,
      and optionally use the <code class="sgmltag-element">packages</code> tag to specify
      additional packages.
     </p></li><li class="listitem"><p>
      The list above might be incomplete, as some products have not been
      released for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, yet.
     </p></li></ul></div></section></section><section class="sect1" id="sec-ay-12vs15-registration" data-id-title="Registration of module and extension dependencies"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">D.3 </span><span class="title-name">Registration of module and extension dependencies</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-registration">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, AutoYaST automatically reorders the extensions
   according to their dependencies during registration. This means the order of
   the extensions in the AutoYaST profile is not important.
  </p><p>
   Also AutoYaST automatically adds the dependent modules even though they are
   missing in the profile. This means you are not required to specify all
   required modules. However, if an extension depends on another extension, it
   needs to be specified in the profile, including the registration
   key. Otherwise the registration would fail.
  </p><p>
   You can list the available extensions and modules in a registered system
   using the <code class="command">SUSEConnect --list-extensions</code> command.
  </p></section><section class="sect1" id="sec-ay-12vs15-partitioning" data-id-title="Partitioning"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">D.4 </span><span class="title-name">Partitioning</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-partitioning">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The partitioning back-end previously used by YaST, <code class="systemitem">libstorage</code>, has been replaced by <code class="systemitem">libstorage-ng</code> which is designed to allow new
   capabilities that were not possible before. Despite the back-end change,
   the XML syntax for profiles has <span class="emphasis"><em>not</em></span> changed. However,
   <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15 comes with some general changes, which are explained below.
  </p><section class="sect2" id="sec-ay-12vs15-registration-partitioning-gpt" data-id-title="GPT becomes the default partition type on AMD64/Intel 64"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.4.1 </span><span class="title-name">GPT becomes the default partition type on AMD64/Intel 64</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-registration-partitioning-gpt">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    On AMD64/Intel 64 systems, GPT is now the preferred partition type. However, if
    you prefer to retain the old behavior, you can explicitly indicate
    this in the profile by setting the <code class="sgmltag-element">disklabel</code>
    element to <code class="literal">msdos</code>.
   </p></section><section class="sect2" id="sec-ay-12vs15-partitioning-partition-numbers" data-id-title="Setting partition numbers"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.4.2 </span><span class="title-name">Setting partition numbers</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-partitioning-partition-numbers">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    AutoYaST will no longer support forcing partition numbers, as it
    might not work in some situations. Moreover, GPT is now the preferred
    partition table type, so partition numbers are less relevant.
   </p><p>
    However, the <code class="sgmltag-element">partition_nr</code> tag is still available
    to specify a partition to be reused. Refer to <a class="xref" href="#ay-partition-configuration" title="4.5.3.2. Partition configuration">Section 4.5.3.2, “Partition configuration”</a> for more information.
   </p></section><section class="sect2" id="sec-ay-12vs15-partitioning-forcing-primary" data-id-title="Forcing primary partitions"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.4.3 </span><span class="title-name">Forcing primary partitions</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-partitioning-forcing-primary">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    It is still possible to force a partition as <code class="literal">primary</code>
    (only on MS-DOS partition tables) by setting the <code class="sgmltag-element">partition_type</code> to <code class="literal">primary</code>. However,
    any other value, like <code class="literal">logical</code>, will be ignored by
    AutoYaST, which will automatically determine the partition type.
   </p></section><section class="sect2" id="sec-ay-12vs15-partitioning-default-subvolume" data-id-title="Btrfs: Default subvolume name"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.4.4 </span><span class="title-name">Btrfs: Default subvolume name</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-partitioning-default-subvolume">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The new storage layer allows the user to set different default subvolumes
    (or none) for every Btrfs file system. As shown in the example below,
    a prefix name can be specified for each partition using the
    <code class="sgmltag-element">subvolumes_prefix</code> tag:
   </p><div class="example" id="ex-ay-12vs15-partitioning-default-subvolume" data-id-title="Specifying the Btrfs default subvolume name"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.3: </span><span class="title-name">Specifying the Btrfs default subvolume name </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-partitioning-default-subvolume">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partition&gt;
 &lt;mount&gt;/&lt;/mount&gt;
 &lt;filesystem config:type="symbol"&gt;btrfs&lt;/filesystem&gt;
 &lt;size&gt;max&lt;/size&gt;
 &lt;subvolumes_prefix&gt;@&lt;/subvolumes_prefix&gt;
&lt;/partition&gt;</pre></div></div></div><p>
    To omit the subvolume prefix, set the <code class="sgmltag-element">subvolumes_prefix</code> tag:
   </p><div class="example" id="ex-ay-12vs15-partitioning-disabling-btrfs-subvolumes" data-id-title="Disabling Btrfs subvolumes"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.4: </span><span class="title-name">Disabling Btrfs subvolumes </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-partitioning-disabling-btrfs-subvolumes">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;partition&gt;
 &lt;mount&gt;/&lt;/mount&gt;
 &lt;filesystem config:type="symbol"&gt;btrfs&lt;/filesystem&gt;
 &lt;size&gt;max&lt;/size&gt;
 &lt;subvolumes_prefix&gt;@&lt;/subvolumes_prefix&gt;
&lt;/partition&gt;</pre></div></div></div><p>
    As a consequence of the new behavior, the old <code class="sgmltag-element">btrfs_set_default_subvolume_name</code> tag is not needed
    and, therefore, it is not supported anymore.
   </p></section><section class="sect2" id="sec-ay-12v215-partitioning-disabling-subvolumes" data-id-title="Btrfs: Disabling subvolumes"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.4.5 </span><span class="title-name">Btrfs: Disabling subvolumes</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12v215-partitioning-disabling-subvolumes">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Btrfs subvolumes can be disabled by setting <code class="sgmltag-element">create_subvolumes</code> to <code class="literal">false</code>. To
     skip the default <code class="literal">@</code> subvolume, specify <code class="sgmltag-element">subvolumes_prefix</code>.
   </p><div class="verbatim-wrap"><pre class="screen">&lt;partition&gt;
 &lt;create_subvolumes config:type="boolean"&gt;false&lt;/create_subvolumes&gt;
 &lt;subvolumes_prefix&gt;&lt;![CDATA[]]&gt;&lt;/subvolumes_prefix&gt;
&lt;/partition&gt;]]&gt;</pre></div></section><section class="sect2" id="sec-ay-12vs15-partitioning-fstab" data-id-title="Reading an existing /etc/fstab is no longer supported"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.4.6 </span><span class="title-name">Reading an existing <code class="filename">/etc/fstab</code> is no longer supported</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-partitioning-fstab">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    On <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15 the ability to read an existing
    <code class="filename">/etc/fstab</code> from a previous installation when
    trying to determine the partitioning layout is no longer supported.
   </p></section><section class="sect2" id="sec-ay-12vs15-partitioning-aligning" data-id-title="Setting for aligning partitions has been dropped"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.4.7 </span><span class="title-name">Setting for aligning partitions has been dropped</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-partitioning-aligning">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    As cylinders have become obsolete, the
    <code class="sgmltag-element">partition_alignment</code>&gt; tag makes no sense and it
    is no longer available. AutoYaST will always try to align partitions in an
    optimal way.
   </p></section><section class="sect2" id="sec-ay-12vs15-partitioning-lvm" data-id-title="Using the type to define a volume group"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.4.8 </span><span class="title-name">Using the <code class="literal">type</code> to define a volume group</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-partitioning-lvm">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The <code class="literal">is_lvm_vg</code> element has been dropped in favor of
     setting the <code class="literal">type</code> to the <code class="literal">CT_LVM</code>
     value. Refer to <a class="xref" href="#ay-partition-lvm" title="4.5.5. Logical volume manager (LVM)">Section 4.5.5, “Logical volume manager (LVM)”</a> for further details.
    </p></section></section><section class="sect1" id="sec-ay-12vs15-firewall" data-id-title="Firewall configuration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">D.5 </span><span class="title-name">Firewall configuration</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-firewall">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, SuSEfirewall2 has been replaced by <code class="systemitem">firewalld</code> as the
   default firewall. The configuration of these two firewalls differs
   significantly, and therefore the respective AutoYaST profile syntax has changed.
  </p><p>
   Old profiles will continue working, but the supported configuration will be
   very limited. It is recommended to update profiles for SLE 15 as
   outlined below. If keeping SLE12 profiles, we recommend to check the final
   configuration to avoid unexpected behavior or network security threats.
  </p><div class="table" id="id-1.7.9.5.7.4" data-id-title="AutoYaST firewall configuration in SLE 15: backward compatibility"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table D.1: </span><span class="title-name">AutoYaST firewall configuration in SLE 15: backward compatibility </span></span><a title="Permalink" class="permalink" href="#id-1.7.9.5.7.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="1"/><col class="2"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; "><p>Supported (but deprecated)</p></th><th style="border-bottom: 1px solid ; "><p>Unsupported</p></th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_CONFIGURATIONS_\{DMZ, EXT, INT}</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_ALLOW_FW_BROADCAST_\{DMZ, EXT, INT}</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_DEV_\{DMZ, EXT, INT}</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_IGNORE_FW_BROADCAST_\{DMZ, EXT, INT}</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_LOG_DROP_ALL</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_IPSECT_TRUST</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_LOG_DROP_CRIT</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_LOAD_MODULES</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_MASQUERADE</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_LOG_ACCEPT_ALL</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_SERVICES_\{DMZ, INT, EXT}_\{TCP, UDP, IP}</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_LOG_ACCEPT_CRIT</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_PROTECT_FROM_INT</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_ROUTE</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        <code class="sgmltag-element">FW_SERVICES_\{DMZ, EXT, INT}_RPC</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       
      </td><td>
       <p>
        <code class="sgmltag-element">FW_SERVICES_ACCEPT_RELATED_\{DMZ, EXT, INT}</code>
       </p>
      </td></tr></tbody></table></div></div><p>
   Configuration options from SuSEfirewall2 that are no longer available
   either have no equivalent mapping in <code class="systemitem">firewalld</code> or will be supported in
   future releases of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. Some <code class="systemitem">firewalld</code> features are not yet
   supported by YaST and AutoYaST—you can use them with post
   installation scripts in your AutoYaST profile. See <a class="xref" href="#createprofile-scripts" title="4.31. Custom user scripts">Section 4.31, “Custom user scripts”</a> for more information.
   </p><div id="id-1.7.9.5.7.6" data-id-title="Enabling and starting the firewall" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Enabling and starting the firewall</div><p>
    Enabling and starting the <code class="systemitem">systemd</code> service for <code class="systemitem">firewalld</code> is done with
    the same syntax as in SLE 12. This is the only part of the firewall
    configuration syntax in AutoYaST that has not changed:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;firewall&gt;
 &lt;enable_firewall config:type="boolean"&gt;true&lt;/enable_firewall&gt;
 &lt;start_firewall config:type="boolean"&gt;true&lt;/start_firewall&gt;
 ...
&lt;/firewall&gt;</pre></div></div><p>
   The following examples show how to convert deprecated (but still
   supported) profiles to the SLE 15 syntax:
  </p><section class="sect2" id="sec-ay-12vs15-firewall-zones" data-id-title="Assigning interfaces to zones"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.5.1 </span><span class="title-name">Assigning interfaces to zones</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-firewall-zones">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Both SuSEfirewall2 and <code class="systemitem">firewalld</code> are zone-based, but have a different
    set of predefined rules and a different level of trust for network
    connections.
   </p><div class="table" id="id-1.7.9.5.7.8.3" data-id-title="Mapping of SuSEfirewall2 and firewalld zones"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table D.2: </span><span class="title-name">Mapping of SuSEfirewall2 and <code class="systemitem">firewalld</code> zones </span></span><a title="Permalink" class="permalink" href="#id-1.7.9.5.7.8.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="1"/><col class="2"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; "><p><code class="systemitem">firewalld</code> (SLE 15)</p></th><th style="border-bottom: 1px solid ; "><p>SuSEfirewall2 (SLE 12)</p></th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><p>dmz</p></td><td style="border-bottom: 1px solid ; "><p>DMZ</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><p>external</p></td><td style="border-bottom: 1px solid ; ">
        <p>
         EXT with <code class="sgmltag-element">FW_MASQUERADE</code> set to
         <code class="literal">yes</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><p>public</p></td><td style="border-bottom: 1px solid ; ">
        <p>
         EXT with <code class="sgmltag-element">FW_MASQUERADE</code> set to
         <code class="literal">no</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><p>internal</p></td><td style="border-bottom: 1px solid ; ">
        <p>
         INT with <code class="sgmltag-element">FW_PROTECT_FROM_INT</code> set to
         <code class="literal">yes</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><p>trusted</p></td><td style="border-bottom: 1px solid ; ">
        <p>
         INT with <code class="sgmltag-element">FW_PROTECT_FROM_INT</code> set to
         <code class="literal">no</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><p>block</p></td><td style="border-bottom: 1px solid ; "><p>N/A</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><p>drop</p></td><td style="border-bottom: 1px solid ; "><p>N/A</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><p>home</p></td><td style="border-bottom: 1px solid ; "><p>N/A</p></td></tr><tr><td style="border-right: 1px solid ; "><p>work</p></td><td><p>N/A</p></td></tr></tbody></table></div></div><p>
    In SuSEfirewall2 the default zone is the external one (EXT) but it also
    allows the use of the special keyword <code class="literal">any</code> to assign all
    the interfaces that are not listed anywhere to a specified zone.
   </p><section class="sect3" id="sec-ay-12vs15-firewall-zones-default" data-id-title="Default configuration"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">D.5.1.1 </span><span class="title-name">Default configuration</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-firewall-zones-default">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The following two examples show the default configuration that is applied
     for the interfaces <code class="systemitem">eth0</code>,
     <code class="systemitem">eth1</code>, <code class="systemitem">wlan0</code> and
     <code class="systemitem">wlan1</code>.
    </p><div class="example" id="ex-ay-12vs15-firewall-zones-default-deprecated" data-id-title="Assigning zones: default configuration (deprecated syntax)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.5: </span><span class="title-name">Assigning zones: default configuration (deprecated syntax) </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-firewall-zones-default-deprecated">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;firewall&gt;
 &lt;FW_DEV_DMZ&gt;any eth0&lt;/FW_DEV_DMZ&gt;
 &lt;FW_DEV_EXT&gt;eth1 wlan0&lt;/FW_DEV_EXT&gt;
 &lt;FW_DEV_INT&gt;wlan1&lt;/FW_DEV_INT&gt;
&lt;/firewall&gt;</pre></div></div></div><div class="example" id="ex-ay-12vs15-firewall-zones-default-supported" data-id-title="Assigning zones: default configuration (SLE 15 syntax)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.6: </span><span class="title-name">Assigning zones: default configuration (SLE 15 syntax) </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-firewall-zones-default-supported">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;firewall&gt;
 &lt;default_zone&gt;dmz&lt;/default_zone&gt;
 &lt;zones config:type="list"&gt;
  &lt;zone&gt;
   &lt;name&gt;dmz&lt;/name&gt;
   &lt;interfaces config:type="list"&gt;
    &lt;interface&gt;eth0&lt;/interface&gt;
   &lt;/interfaces&gt;
  &lt;/zone&gt;
  &lt;zone&gt;
   &lt;name&gt;public&lt;/name&gt;
   &lt;interfaces config:type="list"&gt;
    &lt;interface&gt;eth1&lt;/interface&gt;
   &lt;/interfaces&gt;
  &lt;/zone&gt;
  &lt;zone&gt;
   &lt;name&gt;trusted&lt;/name&gt;
   &lt;interfaces config:type="list"&gt;
    &lt;interface&gt;wlan1&lt;/interface&gt;
   &lt;/interfaces&gt;
  &lt;/zone&gt;
 &lt;/zones&gt;
&lt;/firewall&gt;</pre></div></div></div></section><section class="sect3" id="sec-ay-12vs15-firewall-masq" data-id-title="Masquerading and protecting internal zones"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">D.5.1.2 </span><span class="title-name">Masquerading and protecting internal zones</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-firewall-masq">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The following two examples show how to configure the interfaces
     <code class="systemitem">eth0</code>, <code class="systemitem">eth1</code>,
     <code class="systemitem">wlan0</code> and <code class="systemitem">wlan1</code> with
     masquerading and protected internal zones.
    </p><div class="example" id="ex-ay-12vs15-firewall-masq-deprecated" data-id-title="Masquerading and protecting internal zones (deprecated syntax)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.7: </span><span class="title-name">Masquerading and protecting internal zones (deprecated syntax) </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-firewall-masq-deprecated">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;firewall&gt;
 &lt;FW_DEV_DMZ&gt;any eth0&lt;/FW_DEV_DMZ&gt;
 &lt;FW_DEV_EXT&gt;eth1 wlan0&lt;/FW_DEV_EXT&gt;
 &lt;FW_DEV_INT&gt;wlan1&lt;/FW_DEV_INT&gt;
 &lt;FW_MASQUERADE&gt;yes&lt;/FW_MASQUERADE&gt;
 &lt;FW_PROTECT_FROM_INT&gt;yes&lt;/FW_PROTECT_FROM_INT&gt;
&lt;/firewall&gt;</pre></div></div></div><div class="example" id="ex-ay-12vs15-firewall-masq-supported" data-id-title="Masquerading and protecting internal zones (SLE 15 syntax)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.8: </span><span class="title-name">Masquerading and protecting internal zones (SLE 15 syntax) </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-firewall-masq-supported">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;firewall&gt;
 &lt;default_zone&gt;dmz&lt;/default_zone&gt;
 &lt;zones config:type="list"&gt;
  &lt;zone&gt;
   &lt;name&gt;dmz&lt;/name&gt;
   &lt;interfaces config:type="list"&gt;
    &lt;interface&gt;eth0&lt;/interface&gt;
   &lt;/interfaces&gt;
  &lt;/zone&gt;
  &lt;zone&gt;
   &lt;name&gt;external&lt;/name&gt;
   &lt;interfaces config:type="list"&gt;
    &lt;interface&gt;eth1&lt;/interface&gt;
   &lt;/interfaces&gt;
  &lt;/zone&gt;
  &lt;zone&gt;
   &lt;name&gt;internal&lt;/name&gt;
   &lt;interfaces config:type="list"&gt;
    &lt;interface&gt;wlan1&lt;/interface&gt;
   &lt;/interfaces&gt;
  &lt;/zone&gt;
 &lt;/zones&gt;
&lt;/firewall&gt;</pre></div></div></div></section></section><section class="sect2" id="sec-ay-12vs15-firewall-ports" data-id-title="Opening ports"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.5.2 </span><span class="title-name">Opening ports</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-firewall-ports">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In SuSEfirewall2 the <code class="sgmltag-element">FW_SERVICES_\{DMZ,EXT,INT}_\{TCP,UDP,IP,RPC}</code> tags
    were used to open ports in different zones.
   </p><p>
    For <code class="literal">TCP</code> or <code class="literal">UDP</code>, SuSEfirewall2
    supported a port number or range, or a service name from
    <code class="filename">/etc/services </code> with a single tag for
    the respective zone and service. For IP services a port number or range, or
    a protocol name from <code class="filename">/etc protocols</code> could be specified
    with <code class="sgmltag-element">FW_SERVICES_<em class="replaceable">ZONE</em>_IP</code>.
   </p><p>
    For <code class="systemitem">firewalld</code> each port, port range, and service requires a separate
    entry in the <code class="sgmltag-element">port</code> section for the respective
    zone. IP services need separate entries in the <code class="sgmltag-element">protocol</code> section.
   </p><p>
    RPC services, which were supported by SuSEfirewall2, are no longer
    supported with <code class="systemitem">firewalld</code>.
   </p><div class="example" id="ex-ay-12vs15-firewall-ports-deprecated" data-id-title="Opening ports (deprecated syntax)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.9: </span><span class="title-name">Opening ports (deprecated syntax) </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-firewall-ports-deprecated">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;firewall&gt;
 &lt;FW_SERVICES_DMZ_TCP&gt;ftp ssh 80 5900:5999&lt;/FW_SERVICES_DMZ_TCP&gt;
 &lt;FW_SERVICES_EXT_UDP&gt;1723 ipsec-nat-t&lt;/FW_SERVICES_EXT_UDP&gt;
 &lt;FW_SERVICES_EXT_IP&gt;esp icmp gre&lt;/FW_SERVICES_EXT_IP&gt;
 &lt;FW_MASQUERADE&gt;yes&lt;/FW_MASQUERADE&gt;
&lt;/firewall&gt;</pre></div></div></div><div class="example" id="ex-ay-12vs15-firewall-ports-supported" data-id-title="Opening ports (SLE 15 syntax)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.10: </span><span class="title-name">Opening ports (SLE 15 syntax) </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-firewall-ports-supported">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;firewall&gt;
 &lt;zones config:type="list"&gt;
  &lt;zone&gt;
   &lt;name&gt;dmz&lt;/name&gt;
   &lt;ports config:type="list"&gt;
    &lt;port&gt;ftp/tcp&lt;/port&gt;
    &lt;port&gt;ssh/tcp&lt;/port&gt;
    &lt;port&gt;80/tcp&lt;/port&gt;
    &lt;port&gt;5900-5999/tcp&lt;/port&gt;
   &lt;ports&gt;
  &lt;/zone&gt;
  &lt;zone&gt;
   &lt;name&gt;external&lt;/name&gt;
   &lt;ports config:type="list"&gt;
    &lt;port&gt;1723/udp&lt;/port&gt;
    &lt;port&gt;ipsec-nat-t/udp&lt;/port&gt;
   &lt;/ports&gt;
   &lt;protocols config:type="list"&gt;
    &lt;protocol&gt;esp&lt;/protocol&gt;
    &lt;protocol&gt;icmp&lt;/protocol&gt;
    &lt;protocol&gt;gre&lt;/protocol&gt;
   &lt;/protocols&gt;
  &lt;/zone&gt;
 &lt;/zones&gt;
&lt;/firewall&gt;</pre></div></div></div></section><section class="sect2" id="sec-ay-12vs15-firewall-services" data-id-title="Opening firewalld services"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.5.3 </span><span class="title-name">Opening <code class="systemitem">firewalld</code> services</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-firewall-services">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    For opening a combination of ports and/or protocols, SuSEfirewall2 provides
    the <code class="sgmltag-element">FW_CONFIGURATIONS_\{EXT, DMZ, INT}</code> tags which
    are equivalent to services in <code class="systemitem">firewalld</code>.
   </p><div class="example" id="ex-ay-12vs15-firewall-services-deprecated" data-id-title="Opening Services (Deprecated Syntax)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.11: </span><span class="title-name">
     Opening Services (Deprecated Syntax)
     </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-firewall-services-deprecated">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;firewall&gt;
 &lt;FW_CONFIGURATIONS_EXT&gt;dhcp dhcpv6 samba vnc-server&lt;/FW_CONFIGURATIONS_EXT&gt;
 &lt;FW_CONFIGURATIONS_DMZ&gt;ssh&lt;/FW_CONFIGURATIONS_DMZ&gt;
&lt;/firewall&gt;</pre></div></div></div><div class="example" id="ex-ay-12vs15-firewall-services-supported" data-id-title="Opening services (SLE 15 syntax)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.12: </span><span class="title-name">Opening services (SLE 15 syntax) </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-firewall-services-supported">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;firewall&gt;
 &lt;zones config:type="list"&gt;
  &lt;zone&gt;
   &lt;name&gt;dmz&lt;/name&gt;
   &lt;services config:type="list"&gt;
    &lt;service&gt;ssh&lt;/service&gt;
   &lt;/services&gt;
  &lt;/zone&gt;
  &lt;zone&gt;
   &lt;name&gt;public&lt;/name&gt;
   &lt;services config:type="list"&gt;
    &lt;service&gt;dhcp&lt;/service&gt;
    &lt;service&gt;dhcpv6&lt;/service&gt;
    &lt;service&gt;samba&lt;/service&gt;
    &lt;service&gt;vnc-server&lt;/service&gt;
   &lt;/services&gt;
  &lt;/zone&gt;
 &lt;/zones&gt;
&lt;/firewall&gt;</pre></div></div></div><p>
    The services definition can be added via packages in both cases:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      SuSEfirewall2 Service Definitions: <a class="link" href="https://en.opensuse.org/SuSEfirewall2/Service_Definitions_Added_via_Packages" target="_blank">https://en.opensuse.org/SuSEfirewall2/Service_Definitions_Added_via_Packages</a>
     </p></li><li class="listitem"><p>
      <code class="systemitem">firewalld</code> RPM Packaging <a class="link" href="https://en.opensuse.org/firewalld/RPM_Packaging" target="_blank">https://en.opensuse.org/firewalld/RPM_Packaging</a>
     </p><p>
      <code class="systemitem">firewalld</code> already provides support for the majority of important
      services in <code class="filename">/usr/lib/firewalld/services</code>. Check this
      directory for an existing configuration before defining a new one.
     </p></li></ul></div></section><section class="sect2" id="sec-ay-12vs15-firewall-further-documentation" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.5.4 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-firewall-further-documentation">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <a class="link" href="https://documentation.suse.com/sles-12/html/SLES-all/configuration.html#CreateProfile-firewall" target="_blank">SuSEfirewall2/AutoYaST
      Documentation for SLE 12</a>
     </p></li><li class="listitem"><p>
      <a class="link" href="http://www.firewalld.org/documentation/" target="_blank">Official
      <code class="systemitem">firewalld</code> Documentation</a>
     </p></li></ul></div></section></section><section class="sect1" id="sec-ay-12vs15-ntp" data-id-title="NTP configuration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">D.6 </span><span class="title-name">NTP configuration</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-ntp">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The time server synchronization daemon <code class="systemitem">ntpd</code> has been replaced with the more modern
   daemon <code class="systemitem">chrony</code>. Therefore the
   configuration syntax for the time-keeping daemon in AutoYaST has changed. AutoYaST
   profiles from SLE12 that contain a section with <code class="sgmltag-element">ntp:client</code> need to be updated.
  </p><p>
   Instead of containing low level configuration options, NTP is now configured
   by a set of high level options that are applied on top of the default
   settings:
  </p><div class="example" id="ex-ay-12vs15-ntp" data-id-title="NTP configuration (SLE 15 syntax)"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.13: </span><span class="title-name">NTP configuration (SLE 15 syntax) </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-ntp">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;ntp-client&gt;
 &lt;ntp_policy&gt;auto&lt;/ntp_policy&gt;
 &lt;ntp_servers config:type="list"&gt;
  &lt;ntp_server&gt;
   &lt;iburst config:type="boolean"&gt;false&lt;/iburst&gt;
   &lt;address&gt;cz.pool.ntp.org&lt;/address&gt;
   &lt;offline config:type="boolean"&gt;true&lt;/offline&gt;
  &lt;/ntp_server&gt;
 &lt;/ntp_servers&gt;
 &lt;ntp_sync&gt;systemd&lt;/ntp_sync&gt;
 &lt;/ntp-client&gt;</pre></div></div></div></section><section class="sect1" id="sec-ay-12vs15-2nd-stage" data-id-title="AutoYaST packages are needed for the second stage"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">D.7 </span><span class="title-name">AutoYaST packages are needed for the second stage</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-2nd-stage">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A regular installation is performed in a single stage, while an installation
   performed via AutoYaST usually needs two stages. To perform the
   second stage of the installation AutoYaST requires a few additional packages,
   for example <span class="package">autoyast2-installation</span> and
   <span class="package">autoyast2</span>. If these are missing, a warning will be shown.
  </p></section><section class="sect1" id="sec-ay-12vs15-ca" data-id-title="The CA management module has been dropped"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">D.8 </span><span class="title-name">The CA management module has been dropped</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-ca">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The module for CA Management (<span class="package">yast2-ca-management</span>) has
   been removed from <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, and for the time being there is no
   replacement available. In case you are reusing SLE12 profile, make sure it does not contain a <code class="sgmltag-element">ca_mgm</code> section.
  </p></section><section class="sect1" id="sec-ay-12vs15-upgrade" data-id-title="Upgrade"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">D.9 </span><span class="title-name">Upgrade</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-upgrade">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect2" id="sec-ay-12vs15-firewall-services-upgrade" data-id-title="Software"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.9.1 </span><span class="title-name">Software</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-firewall-services-upgrade">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     SLE 12 has two modes of evaluating which packages need to
     be upgraded. In <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP4</span></span>, upgrades are always
     determined by the dependency solver, equivalent to using
     <code class="command">zypper dup</code>.
    </p><p>
     This makes the option <code class="sgmltag-element">only_installed_packages</code> in the software
     section obsolete.
    </p></section><section class="sect2" id="sec-ay-12vs15-registration-upgrade" data-id-title="Registration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">D.9.2 </span><span class="title-name">Registration</span></span> <a title="Permalink" class="permalink" href="#sec-ay-12vs15-registration-upgrade">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When upgrading a registered system, all old repositories are
    removed. This is done to avoid possible conflicts between the new
    and old repositories and to clean-up the repositories for the
    dropped products. If you need to keep custom repositories, add them
    again using the <code class="sgmltag-element">add-on</code> option.
   </p><div class="example" id="ex-ay-12vs15-minimal-registration" data-id-title="Minimal registration configuration for upgrade"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example D.14: </span><span class="title-name">Minimal registration configuration for upgrade </span></span><a title="Permalink" class="permalink" href="#ex-ay-12vs15-minimal-registration">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_12_migrate_15.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;suse_register&gt;
  &lt;do_registration config:type="boolean"&gt;true&lt;/do_registration&gt;
&lt;/suse_register&gt;</pre></div></div></div><p>
    If the registration server returns more than one possible migration
    target, AutoYaST will automatically select the first one. Currently
    you cannot select a different migration target.
   </p><p>
    After upgrading an unregistered system or skipping registration
    upgrade by omitting the <code class="sgmltag-element">suse_register</code>
    option, you might need to adjust the repository setup manually.
   </p></section></section></section><div class="legal-section"><section class="appendix" id="id-1.7.9.6" data-id-title="GNU licenses"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">E </span><span class="title-name">GNU licenses</span></span> <a title="Permalink" class="permalink" href="#id-1.7.9.6">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_legal.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  This appendix contains the GNU Free Documentation License version 1.2.
 </p><section class="sect1" id="id-1.7.9.6.4" data-id-title="GNU Free Documentation License"><div class="titlepage"><div><div><div class="title-container"><h2 class="title legal"><span class="title-number-name"><span class="title-name">GNU Free Documentation License</span></span> <a title="Permalink" class="permalink" href="#id-1.7.9.6.4">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_license_gfdl1.2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Copyright (C) 2000, 2001, 2002 Free Software Foundation, Inc. 51 Franklin St,
  Fifth Floor, Boston, MA 02110-1301 USA. Everyone is permitted to copy and
  distribute verbatim copies of this license document, but changing it is not
  allowed.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.4"><span class="name">
    0. PREAMBLE
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.4">#</a></h5></div><p>
  The purpose of this License is to make a manual, textbook, or other
  functional and useful document "free" in the sense of freedom: to assure
  everyone the effective freedom to copy and redistribute it, with or without
  modifying it, either commercially or non-commercially. Secondarily, this
  License preserves for the author and publisher a way to get credit for their
  work, while not being considered responsible for modifications made by
  others.
 </p><p>
  This License is a kind of "copyleft", which means that derivative works of
  the document must themselves be free in the same sense. It complements the
  GNU General Public License, which is a copyleft license designed for free
  software.
 </p><p>
  We have designed this License to use it for manuals for free software,
  because free software needs free documentation: a free program should come
  with manuals providing the same freedoms that the software does. But this
  License is not limited to software manuals; it can be used for any textual
  work, regardless of subject matter or whether it is published as a printed
  book. We recommend this License principally for works whose purpose is
  instruction or reference.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.8"><span class="name">
    1. APPLICABILITY AND DEFINITIONS
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.8">#</a></h5></div><p>
  This License applies to any manual or other work, in any medium, that
  contains a notice placed by the copyright holder saying it can be distributed
  under the terms of this License. Such a notice grants a world-wide,
  royalty-free license, unlimited in duration, to use that work under the
  conditions stated herein. The "Document", below, refers to any such manual or
  work. Any member of the public is a licensee, and is addressed as "you". You
  accept the license if you copy, modify or distribute the work in a way
  requiring permission under copyright law.
 </p><p>
  A "Modified Version" of the Document means any work containing the Document
  or a portion of it, either copied verbatim, or with modifications and/or
  translated into another language.
 </p><p>
  A "Secondary Section" is a named appendix or a front-matter section of the
  Document that deals exclusively with the relationship of the publishers or
  authors of the Document to the Document's overall subject (or to related
  matters) and contains nothing that could fall directly within that overall
  subject. (Thus, if the Document is in part a textbook of mathematics, a
  Secondary Section may not explain any mathematics.) The relationship could be
  a matter of historical connection with the subject or with related matters,
  or of legal, commercial, philosophical, ethical or political position
  regarding them.
 </p><p>
  The "Invariant Sections" are certain Secondary Sections whose titles are
  designated, as being those of Invariant Sections, in the notice that says
  that the Document is released under this License. If a section does not fit
  the above definition of Secondary then it is not allowed to be designated as
  Invariant. The Document may contain zero Invariant Sections. If the Document
  does not identify any Invariant Sections then there are none.
 </p><p>
  The "Cover Texts" are certain short passages of text that are listed, as
  Front-Cover Texts or Back-Cover Texts, in the notice that says that the
  Document is released under this License. A Front-Cover Text may be at most 5
  words, and a Back-Cover Text may be at most 25 words.
 </p><p>
  A "Transparent" copy of the Document means a machine-readable copy,
  represented in a format whose specification is available to the general
  public, that is suitable for revising the document straightforwardly with
  generic text editors or (for images composed of pixels) generic paint
  programs or (for drawings) some widely available drawing editor, and that is
  suitable for input to text formatters or for automatic translation to a
  variety of formats suitable for input to text formatters. A copy made in an
  otherwise Transparent file format whose markup, or absence of markup, has
  been arranged to thwart or discourage subsequent modification by readers is
  not Transparent. An image format is not Transparent if used for any
  substantial amount of text. A copy that is not "Transparent" is called
  "Opaque".
 </p><p>
  Examples of suitable formats for Transparent copies include plain ASCII
  without markup, Texinfo input format, LaTeX input format, SGML or XML using a
  publicly available DTD, and standard-conforming simple HTML, PostScript or
  PDF designed for human modification. Examples of transparent image formats
  include PNG, XCF and JPG. Opaque formats include proprietary formats that can
  be read and edited only by proprietary word processors, SGML or XML for which
  the DTD and/or processing tools are not generally available, and the
  machine-generated HTML, PostScript or PDF produced by some word processors
  for output purposes only.
 </p><p>
  The "Title Page" means, for a printed book, the title page itself, plus such
  following pages as are needed to hold, legibly, the material this License
  requires to appear in the title page. For works in formats which do not have
  any title page as such, "Title Page" means the text near the most prominent
  appearance of the work's title, preceding the beginning of the body of the
  text.
 </p><p>
  A section "Entitled XYZ" means a named subunit of the Document whose title
  either is precisely XYZ or contains XYZ in parentheses following text that
  translates XYZ in another language. (Here XYZ stands for a specific section
  name mentioned below, such as "Acknowledgements", "Dedications",
  "Endorsements", or "History".) To "Preserve the Title" of such a section when
  you modify the Document means that it remains a section "Entitled XYZ"
  according to this definition.
 </p><p>
  The Document may include Warranty Disclaimers next to the notice which states
  that this License applies to the Document. These Warranty Disclaimers are
  considered to be included by reference in this License, but only as regards
  disclaiming warranties: any other implication that these Warranty Disclaimers
  may have is void and has no effect on the meaning of this License.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.19"><span class="name">
    2. VERBATIM COPYING
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.19">#</a></h5></div><p>
  You may copy and distribute the Document in any medium, either commercially
  or non-commercially, provided that this License, the copyright notices, and
  the license notice saying this License applies to the Document are reproduced
  in all copies, and that you add no other conditions whatsoever to those of
  this License. You may not use technical measures to obstruct or control the
  reading or further copying of the copies you make or distribute. However, you
  may accept compensation in exchange for copies. If you distribute a large
  enough number of copies you must also follow the conditions in section 3.
 </p><p>
  You may also lend copies, under the same conditions stated above, and you may
  publicly display copies.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.22"><span class="name">
    3. COPYING IN QUANTITY
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.22">#</a></h5></div><p>
  If you publish printed copies (or copies in media that commonly have printed
  covers) of the Document, numbering more than 100, and the Document's license
  notice requires Cover Texts, you must enclose the copies in covers that
  carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the
  front cover, and Back-Cover Texts on the back cover. Both covers must also
  clearly and legibly identify you as the publisher of these copies. The front
  cover must present the full title with all words of the title equally
  prominent and visible. You may add other material on the covers in addition.
  Copying with changes limited to the covers, as long as they preserve the
  title of the Document and satisfy these conditions, can be treated as
  verbatim copying in other respects.
 </p><p>
  If the required texts for either cover are too voluminous to fit legibly, you
  should put the first ones listed (as many as fit reasonably) on the actual
  cover, and continue the rest onto adjacent pages.
 </p><p>
  If you publish or distribute Opaque copies of the Document numbering more
  than 100, you must either include a machine-readable Transparent copy along
  with each Opaque copy, or state in or with each Opaque copy a
  computer-network location from which the general network-using public has
  access to download using public-standard network protocols a complete
  Transparent copy of the Document, free of added material. If you use the
  latter option, you must take reasonably prudent steps, when you begin
  distribution of Opaque copies in quantity, to ensure that this Transparent
  copy will remain thus accessible at the stated location until at least one
  year after the last time you distribute an Opaque copy (directly or through
  your agents or retailers) of that edition to the public.
 </p><p>
  It is requested, but not required, that you contact the authors of the
  Document well before redistributing any large number of copies, to give them
  a chance to provide you with an updated version of the Document.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.27"><span class="name">
    4. MODIFICATIONS
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.27">#</a></h5></div><p>
  You may copy and distribute a Modified Version of the Document under the
  conditions of sections 2 and 3 above, provided that you release the Modified
  Version under precisely this License, with the Modified Version filling the
  role of the Document, thus licensing distribution and modification of the
  Modified Version to whoever possesses a copy of it. In addition, you must do
  these things in the Modified Version:
 </p><div class="orderedlist"><ol class="orderedlist" type="A"><li class="listitem"><p>
    Use in the Title Page (and on the covers, if any) a title distinct from
    that of the Document, and from those of previous versions (which should, if
    there were any, be listed in the History section of the Document). You may
    use the same title as a previous version if the original publisher of that
    version gives permission.
   </p></li><li class="listitem"><p>
    List on the Title Page, as authors, one or more persons or entities
    responsible for authorship of the modifications in the Modified Version,
    together with at least five of the principal authors of the Document (all
    of its principal authors, if it has fewer than five), unless they release
    you from this requirement.
   </p></li><li class="listitem"><p>
    State on the Title page the name of the publisher of the Modified Version,
    as the publisher.
   </p></li><li class="listitem"><p>
    Preserve all the copyright notices of the Document.
   </p></li><li class="listitem"><p>
    Add an appropriate copyright notice for your modifications adjacent to the
    other copyright notices.
   </p></li><li class="listitem"><p>
    Include, immediately after the copyright notices, a license notice giving
    the public permission to use the Modified Version under the terms of this
    License, in the form shown in the Addendum below.
   </p></li><li class="listitem"><p>
    Preserve in that license notice the full lists of Invariant Sections and
    required Cover Texts given in the Document's license notice.
   </p></li><li class="listitem"><p>
    Include an unaltered copy of this License.
   </p></li><li class="listitem"><p>
    Preserve the section Entitled "History", Preserve its Title, and add to it
    an item stating at least the title, year, new authors, and publisher of the
    Modified Version as given on the Title Page. If there is no section
    Entitled "History" in the Document, create one stating the title, year,
    authors, and publisher of the Document as given on its Title Page, then add
    an item describing the Modified Version as stated in the previous sentence.
   </p></li><li class="listitem"><p>
    Preserve the network location, if any, given in the Document for public
    access to a Transparent copy of the Document, and likewise the network
    locations given in the Document for previous versions it was based on.
    These may be placed in the "History" section. You may omit a network
    location for a work that was published at least four years before the
    Document itself, or if the original publisher of the version it refers to
    gives permission.
   </p></li><li class="listitem"><p>
    For any section Entitled "Acknowledgements" or "Dedications", Preserve the
    Title of the section, and preserve in the section all the substance and
    tone of each of the contributor acknowledgements and/or dedications given
    therein.
   </p></li><li class="listitem"><p>
    Preserve all the Invariant Sections of the Document, unaltered in their
    text and in their titles. Section numbers or the equivalent are not
    considered part of the section titles.
   </p></li><li class="listitem"><p>
    Delete any section Entitled "Endorsements". Such a section may not be
    included in the Modified Version.
   </p></li><li class="listitem"><p>
    Do not retitle any existing section to be Entitled "Endorsements" or to
    conflict in title with any Invariant Section.
   </p></li><li class="listitem"><p>
    Preserve any Warranty Disclaimers.
   </p></li></ol></div><p>
  If the Modified Version includes new front-matter sections or appendices that
  qualify as Secondary Sections and contain no material copied from the
  Document, you may at your option designate some or all of these sections as
  invariant. To do this, add their titles to the list of Invariant Sections in
  the Modified Version's license notice. These titles must be distinct from any
  other section titles.
 </p><p>
  You may add a section Entitled "Endorsements", provided it contains nothing
  but endorsements of your Modified Version by various parties--for example,
  statements of peer review or that the text has been approved by an
  organization as the authoritative definition of a standard.
 </p><p>
  You may add a passage of up to five words as a Front-Cover Text, and a
  passage of up to 25 words as a Back-Cover Text, to the end of the list of
  Cover Texts in the Modified Version. Only one passage of Front-Cover Text and
  one of Back-Cover Text may be added by (or through arrangements made by) any
  one entity. If the Document already includes a cover text for the same cover,
  previously added by you or by arrangement made by the same entity you are
  acting on behalf of, you may not add another; but you may replace the old
  one, on explicit permission from the previous publisher that added the old
  one.
 </p><p>
  The author(s) and publisher(s) of the Document do not by this License give
  permission to use their names for publicity for or to assert or imply
  endorsement of any Modified Version.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.34"><span class="name">
    5. COMBINING DOCUMENTS
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.34">#</a></h5></div><p>
  You may combine the Document with other documents released under this
  License, under the terms defined in section 4 above for modified versions,
  provided that you include in the combination all of the Invariant Sections of
  all of the original documents, unmodified, and list them all as Invariant
  Sections of your combined work in its license notice, and that you preserve
  all their Warranty Disclaimers.
 </p><p>
  The combined work need only contain one copy of this License, and multiple
  identical Invariant Sections may be replaced with a single copy. If there are
  multiple Invariant Sections with the same name but different contents, make
  the title of each such section unique by adding at the end of it, in
  parentheses, the name of the original author or publisher of that section if
  known, or else a unique number. Make the same adjustment to the section
  titles in the list of Invariant Sections in the license notice of the
  combined work.
 </p><p>
  In the combination, you must combine any sections Entitled "History" in the
  various original documents, forming one section Entitled "History"; likewise
  combine any sections Entitled "Acknowledgements", and any sections Entitled
  "Dedications". You must delete all sections Entitled "Endorsements".
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.38"><span class="name">
    6. COLLECTIONS OF DOCUMENTS
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.38">#</a></h5></div><p>
  You may make a collection consisting of the Document and other documents
  released under this License, and replace the individual copies of this
  License in the various documents with a single copy that is included in the
  collection, provided that you follow the rules of this License for verbatim
  copying of each of the documents in all other respects.
 </p><p>
  You may extract a single document from such a collection, and distribute it
  individually under this License, provided you insert a copy of this License
  into the extracted document, and follow this License in all other respects
  regarding verbatim copying of that document.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.41"><span class="name">
    7. AGGREGATION WITH INDEPENDENT WORKS
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.41">#</a></h5></div><p>
  A compilation of the Document or its derivatives with other separate and
  independent documents or works, in or on a volume of a storage or
  distribution medium, is called an "aggregate" if the copyright resulting from
  the compilation is not used to limit the legal rights of the compilation's
  users beyond what the individual works permit. When the Document is included
  in an aggregate, this License does not apply to the other works in the
  aggregate which are not themselves derivative works of the Document.
 </p><p>
  If the Cover Text requirement of section 3 is applicable to these copies of
  the Document, then if the Document is less than one half of the entire
  aggregate, the Document's Cover Texts may be placed on covers that bracket
  the Document within the aggregate, or the electronic equivalent of covers if
  the Document is in electronic form. Otherwise they must appear on printed
  covers that bracket the whole aggregate.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.44"><span class="name">
    8. TRANSLATION
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.44">#</a></h5></div><p>
  Translation is considered a kind of modification, so you may distribute
  translations of the Document under the terms of section 4. Replacing
  Invariant Sections with translations requires special permission from their
  copyright holders, but you may include translations of some or all Invariant
  Sections in addition to the original versions of these Invariant Sections.
  You may include a translation of this License, and all the license notices in
  the Document, and any Warranty Disclaimers, provided that you also include
  the original English version of this License and the original versions of
  those notices and disclaimers. In case of a disagreement between the
  translation and the original version of this License or a notice or
  disclaimer, the original version will prevail.
 </p><p>
  If a section in the Document is Entitled "Acknowledgements", "Dedications",
  or "History", the requirement (section 4) to Preserve its Title (section 1)
  will typically require changing the actual title.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.47"><span class="name">
    9. TERMINATION
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.47">#</a></h5></div><p>
  You may not copy, modify, sublicense, or distribute the Document except as
  expressly provided for under this License. Any other attempt to copy, modify,
  sublicense or distribute the Document is void, and will automatically
  terminate your rights under this License. However, parties who have received
  copies, or rights, from you under this License will not have their licenses
  terminated so long as such parties remain in full compliance.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.49"><span class="name">
    10. FUTURE REVISIONS OF THIS LICENSE
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.49">#</a></h5></div><p>
  The Free Software Foundation may publish new, revised versions of the GNU
  Free Documentation License from time to time. Such new versions will be
  similar in spirit to the present version, but may differ in detail to address
  new problems or concerns. See
  <a class="link" href="https://www.gnu.org/copyleft/" target="_blank">https://www.gnu.org/copyleft/</a>.
 </p><p>
  Each version of the License is given a distinguishing version number. If the
  Document specifies that a particular numbered version of this License "or any
  later version" applies to it, you have the option of following the terms and
  conditions either of that specified version or of any later version that has
  been published (not as a draft) by the Free Software Foundation. If the
  Document does not specify a version number of this License, you may choose
  any version ever published (not as a draft) by the Free Software Foundation.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.7.9.6.4.52"><span class="name">
    ADDENDUM: How to use this License for your documents
  </span><a title="Permalink" class="permalink" href="#id-1.7.9.6.4.52">#</a></h5></div><div class="verbatim-wrap"><pre class="screen">Copyright (c) YEAR YOUR NAME.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled “GNU
Free Documentation License”.</pre></div><p>
  If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
  replace the “with...Texts.” line with this:
 </p><div class="verbatim-wrap"><pre class="screen">with the Invariant Sections being LIST THEIR TITLES, with the
Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</pre></div><p>
  If you have Invariant Sections without Cover Texts, or some other combination
  of the three, merge those two alternatives to suit the situation.
 </p><p>
  If your document contains nontrivial examples of program code, we recommend
  releasing these examples in parallel under your choice of free software
  license, such as the GNU General Public License, to permit their use in free
  software.
 </p></section></section></div></div></section></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>