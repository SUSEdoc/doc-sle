<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLED 15 SP4 | System Analysis and Tuning Guide | Power management</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Power management | SLED 15 SP4"/>
<meta name="description" content="Power management aims at reducing operating costs for energy and cooling systems while at the same time keeping the performance of a system at a leve…"/>
<meta name="product-name" content="SUSE Linux Enterprise Desktop"/>
<meta name="product-number" content="15 SP4"/>
<meta name="book-title" content="System Analysis and Tuning Guide"/>
<meta name="chapter-title" content="Chapter 12. Power management"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Desktop 15 SP4"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="System Analysis and Tuning Guide"/>
<meta property="og:description" content="Analyze and tune SLED systems"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="System Analysis and Tuning Guide"/>
<meta name="twitter:description" content="Analyze and tune SLED systems"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Power management",
  
    "description": "Power management aims at reducing operating costs for energy and cooling systems while at the same time keeping the performance of a system at a leve…",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-03-12T00:00+02:00",
      
    "datePublished": "2022-06-21T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-tuning-numactl.html" title="Chapter 11. Automatic Non-Uniform Memory Access (NUMA) balancing"/><link rel="next" href="part-tuning-kernel.html" title="Part V. Kernel tuning"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">System Analysis and Tuning Guide</a><span> / </span><a class="crumb" href="part-tuning-resources.html">Resource management</a><span> / </span><a class="crumb" href="cha-tuning-power.html">Power management</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">System Analysis and Tuning Guide</div><ol><li><a href="preface-tuning.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="part-tuning-basics.html" class="has-children "><span class="title-number">I </span><span class="title-name">Basics</span></a><ol><li><a href="cha-tuning-basics.html" class=" "><span class="title-number">1 </span><span class="title-name">General notes on system tuning</span></a></li></ol></li><li><a href="part-tuning-monitoring.html" class="has-children "><span class="title-number">II </span><span class="title-name">System monitoring</span></a><ol><li><a href="cha-util.html" class=" "><span class="title-number">2 </span><span class="title-name">System monitoring utilities</span></a></li><li><a href="cha-tuning-syslog.html" class=" "><span class="title-number">3 </span><span class="title-name">System log files</span></a></li></ol></li><li><a href="part-tuning-kerneltrace.html" class="has-children "><span class="title-number">III </span><span class="title-name">Kernel monitoring</span></a><ol><li><a href="cha-tuning-systemtap.html" class=" "><span class="title-number">4 </span><span class="title-name">SystemTap—filtering and analyzing system data</span></a></li><li><a href="cha-tuning-kprobes.html" class=" "><span class="title-number">5 </span><span class="title-name">Kernel probes</span></a></li><li><a href="cha-perf.html" class=" "><span class="title-number">6 </span><span class="title-name">Hardware-based performance monitoring with Perf</span></a></li><li><a href="cha-tuning-oprofile.html" class=" "><span class="title-number">7 </span><span class="title-name">OProfile—system-wide profiler</span></a></li><li><a href="cha-tuning-dynamic-debug.html" class=" "><span class="title-number">8 </span><span class="title-name">Dynamic debug—kernel debugging messages</span></a></li></ol></li><li class="active"><a href="part-tuning-resources.html" class="has-children you-are-here"><span class="title-number">IV </span><span class="title-name">Resource management</span></a><ol><li><a href="cha-tuning-resources.html" class=" "><span class="title-number">9 </span><span class="title-name">General system resource management</span></a></li><li><a href="cha-tuning-cgroups.html" class=" "><span class="title-number">10 </span><span class="title-name">Kernel control groups</span></a></li><li><a href="cha-tuning-numactl.html" class=" "><span class="title-number">11 </span><span class="title-name">Automatic Non-Uniform Memory Access (NUMA) balancing</span></a></li><li><a href="cha-tuning-power.html" class=" you-are-here"><span class="title-number">12 </span><span class="title-name">Power management</span></a></li></ol></li><li><a href="part-tuning-kernel.html" class="has-children "><span class="title-number">V </span><span class="title-name">Kernel tuning</span></a><ol><li><a href="cha-tuning-io.html" class=" "><span class="title-number">13 </span><span class="title-name">Tuning I/O performance</span></a></li><li><a href="cha-tuning-taskscheduler.html" class=" "><span class="title-number">14 </span><span class="title-name">Tuning the task scheduler</span></a></li><li><a href="cha-tuning-memory.html" class=" "><span class="title-number">15 </span><span class="title-name">Tuning the memory management subsystem</span></a></li><li><a href="cha-tuning-network.html" class=" "><span class="title-number">16 </span><span class="title-name">Tuning the network</span></a></li><li><a href="cha-tuning-sapconf.html" class=" "><span class="title-number">17 </span><span class="title-name">Tuning SUSE Linux Enterprise for SAP</span></a></li></ol></li><li><a href="part-tuning-dumps.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Handling system dumps</span></a><ol><li><a href="cha-tuning-tracing.html" class=" "><span class="title-number">18 </span><span class="title-name">Tracing tools</span></a></li><li><a href="cha-tuning-kexec.html" class=" "><span class="title-number">19 </span><span class="title-name">Kexec and Kdump</span></a></li><li><a href="cha-tuning-systemd-coredump.html" class=" "><span class="title-number">20 </span><span class="title-name">Using <code class="systemitem">systemd-coredump</code> to debug application crashes</span></a></li></ol></li><li><a href="part-tuning-ptp.html" class="has-children "><span class="title-number">VII </span><span class="title-name">Synchronized clocks with Precision Time Protocol</span></a><ol><li><a href="cha-tuning-ptp.html" class=" "><span class="title-number">21 </span><span class="title-name">Precision Time Protocol</span></a></li></ol></li><li><a href="bk06apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-tuning-power" data-id-title="Power management"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP4</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">12 </span><span class="title-name">Power management</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Power management aims at reducing operating costs for energy and cooling
    systems while at the same time keeping the performance of a system at a
    level that matches the current requirements. Thus, power management is
    always a matter of balancing the actual performance needs and power
    saving options for a system. Power management can be implemented and
    used at different levels of the system. A set of specifications for
    power management functions of devices and the operating system interface
    to them has been defined in the Advanced Configuration and Power
    Interface (ACPI). As power savings in server environments can primarily
    be achieved at the processor level, this chapter introduces some
    main concepts and highlights some tools for analyzing and influencing
    relevant parameters.
   </p></div></div></div></div><section class="sect1" id="sec-tuning-power-cpu" data-id-title="Power management at CPU Level"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">12.1 </span><span class="title-name">Power management at CPU Level</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-cpu">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   At the CPU level, you can control power usage in various ways. For
   example by using idling power states (C-states), changing CPU frequency
   (P-states), and throttling the CPU (T-states). The following sections
   give a short introduction to each approach and its significance for power
   savings. Detailed specifications can be found at
   <a class="link" href="https://uefi.org/sites/default/files/resources/ACPI_Spec_6_4_Jan22.pdf" target="_blank">https://uefi.org/sites/default/files/resources/ACPI_Spec_6_4_Jan22.pdf</a>.
  </p><section class="sect2" id="sec-tuning-power-cpu-cstates" data-id-title="C-states (processor operating states)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.1.1 </span><span class="title-name">C-states (processor operating states)</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-cpu-cstates">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Modern processors have several power saving modes called
    <code class="literal">C-states</code>. They reflect the capability of an idle
    processor to turn off unused components to save power.
   </p><p>
    When a processor is in the <code class="literal">C0</code> state, it is executing
    instructions. A processor running in any other C-state is idle. The
    higher the C number, the deeper the CPU sleep mode: more components are
    shut down to save power. Deeper sleep states can save large amounts of
    energy. Their downside is that they introduce latency. This means, it
    takes more time for the CPU to go back to <code class="literal">C0</code>.
    Depending on workload (threads waking up, triggering CPU usage and then
    going back to sleep again for a short period of time) and hardware (for
    example, interrupt activity of a network device), disabling the deepest
    sleep states can significantly increase overall performance. For details
    on how to do so, refer to
    <a class="xref" href="cha-tuning-power.html#sec-tuning-power-tools-cpupower-idle-info" title="12.3.2. Viewing kernel idle statistics with cpupower">Section 12.3.2, “Viewing kernel idle statistics with <code class="command">cpupower</code>”</a>.
   </p><p>
    Some states also have submodes with different power saving latency
    levels. Which C-states and submodes are supported depends on the
    respective processor. However, <code class="literal">C1</code> is always
    available.
   </p><p>
    <a class="xref" href="cha-tuning-power.html#tab-tuning-power-cstates" title="C-states">Table 12.1, “C-states”</a> gives an overview of the most
    common C-states.
   </p><div class="table" id="tab-tuning-power-cstates" data-id-title="C-states"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 12.1: </span><span class="title-name">C-states </span></span><a title="Permalink" class="permalink" href="cha-tuning-power.html#tab-tuning-power-cstates">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Mode
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Definition
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         C0
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Operational state. CPU fully turned on.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         C1
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         First idle state. Stops CPU main internal clocks via software. Bus
         interface unit and APIC are kept running at full speed.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         C2
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Stops CPU main internal clocks via hardware. State in which the
         processor maintains all software-visible states, but may take
         longer to wake up through interrupts.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         C3
        </p>
       </td><td>
        <p>
         Stops all CPU internal clocks. The processor does not need to keep
         its cache coherent, but maintains other states. Some processors
         have variations of the C3 state that differ in how long it takes to
         wake the processor through interrupts.
        </p>
       </td></tr></tbody></table></div></div><p>
    To avoid needless power consumption, it is recommended to test your
    workloads with deep sleep states enabled versus deep sleep states
    disabled. For more information, refer to
    <a class="xref" href="cha-tuning-power.html#sec-tuning-power-tools-cpupower-idle-info" title="12.3.2. Viewing kernel idle statistics with cpupower">Section 12.3.2, “Viewing kernel idle statistics with <code class="command">cpupower</code>”</a> or the
    <code class="command">cpupower-idle-set(1)</code> man page.
   </p></section><section class="sect2" id="sec-tuning-power-cpu-pstates" data-id-title="P-states (processor performance states)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.1.2 </span><span class="title-name">P-states (processor performance states)</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-cpu-pstates">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    While a processor operates (in C0 state), it can be in one of several
    CPU performance states <code class="literal">(P-states)</code>. Whereas C-states
    are idle states (all but C0), <code class="literal">P-states</code> are
    operational states that relate to CPU frequency and voltage.
   </p><p>
    The higher the P-state, the lower the frequency and voltage at which the
    processor runs. The number of P-states is processor-specific and the
    implementation differs across the various types. However,
    <code class="literal">P0</code> is always the highest-performance state (except for <a class="xref" href="cha-tuning-power.html#sec-tuning-cpu-power-turbo" title="12.1.3. Turbo features">Section 12.1.3, “Turbo features”</a>). Higher
    P-state numbers represent slower processor speeds and lower power
    consumption. For example, a processor in <code class="literal">P3</code> state runs
    more slowly and uses less power than a processor running in the
    <code class="literal">P1</code> state. To operate at any P-state, the processor
    must be in the <code class="literal">C0</code> state, which means that it is
    working and not idling. The CPU P-states are also defined in the ACPI
    specification, see <a class="link" href="http://www.acpi.info/spec.htm" target="_blank">http://www.acpi.info/spec.htm</a>.
   </p><p>
    C-states and P-states can vary independently of one another.
   </p></section><section class="sect2" id="sec-tuning-cpu-power-turbo" data-id-title="Turbo features"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.1.3 </span><span class="title-name">Turbo features</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-cpu-power-turbo">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Turbo features allow to dynamically <code class="literal">overtick</code> active CPU
    cores while other cores are in deep sleep states. This increases the performance
    of active threads while still
    complying with Thermal Design Power (TDP) limits.
   </p><p>
    However, the conditions under which a CPU core can use turbo frequencies
    are architecture-specific. Learn how to evaluate the efficiency of those
    new features in <a class="xref" href="cha-tuning-power.html#sec-tuning-power-tools-cpupower" title="12.3. The cpupower tools">Section 12.3, “The <code class="systemitem">cpupower</code> tools”</a>.
   </p></section></section><section class="sect1" id="sec-tuning-power-governors" data-id-title="In-kernel governors"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">12.2 </span><span class="title-name">In-kernel governors</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-governors">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p> The in-kernel governors belong to the Linux kernel CPUfreq infrastructure and can be
   used to dynamically scale processor frequencies at runtime. You can think of the governors as a
   sort of preconfigured power scheme for the CPU. The CPUfreq governors use P-states to
   change frequencies and lower power consumption. The dynamic governors can switch between CPU
   frequencies, based on CPU usage, to allow for power savings while not sacrificing performance.
  </p><p>
    The following governors are available with the CPUfreq subsystem:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.6.5.4.4.1"><span class="term">Performance governor</span></dt><dd><p>
       The CPU frequency is statically set to the highest possible for
       maximum performance. Consequently, saving power is not the focus of
       this governor.
      </p><p>See also <a class="xref" href="cha-tuning-power.html#sec-tuning-power-options-p-states" title="12.4.1. Tuning options for P-states">Section 12.4.1, “Tuning options for P-states”</a>.
      </p></dd><dt id="id-1.8.6.5.4.4.2"><span class="term">Powersave governor</span></dt><dd><p>
       The CPU frequency is statically set to the lowest possible. This can
       have severe impact on the performance, as the system will never rise
       above this frequency no matter how busy the processors are. An important
       exception is the <code class="literal">intel_pstate</code> which defaults to the
       <code class="literal">powersave</code> mode. This is due to a hardware-specific
       decision but functionally it operates similarly to the
       <code class="literal">on-demand</code> governor.
      </p><p>
       However, using this governor often does not lead to the expected
       power savings as the highest savings can usually be achieved at idle
       through entering C-states. With the powersave governor, processes run
       at the lowest frequency and thus take longer to finish. This means it
       takes longer until the system can go into an idle C-state.
      </p><p>
       Tuning options: The range of minimum frequencies available to the
       governor can be adjusted (for example, with the
       <code class="command">cpupower</code> command line tool).
      </p></dd><dt id="id-1.8.6.5.4.4.3"><span class="term">On-demand governor</span></dt><dd><p>
       The kernel implementation of a dynamic CPU frequency policy: The
       governor monitors the processor usage. When it exceeds a
       certain threshold, the governor will set the frequency to the highest
       available. If the usage is less than the threshold, the next lowest
       frequency is used. If the system continues to be underemployed, the
       frequency is again reduced until the lowest available frequency is
       set.
      </p></dd></dl></div><div id="id-1.8.6.5.4.5" data-id-title="Drivers and in-kernel governors" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Drivers and in-kernel governors</div><p>Not all drivers use the in-kernel governors to dynamically scale power frequency at
    runtime. For example, the <code class="literal">intel_pstate</code> driver adjusts power frequency itself. Use
    the <code class="command">cpupower frequency-info</code> command to find out which driver your system
    uses.</p></div></section><section class="sect1" id="sec-tuning-power-tools-cpupower" data-id-title="The cpupower tools"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">12.3 </span><span class="title-name">The <code class="systemitem">cpupower</code> tools</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-tools-cpupower">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>The <code class="command">cpupower</code> tools are designed to give an overview
   of <span class="emphasis"><em>all</em></span> CPU power-related parameters that are supported
   on a given machine, including turbo (or boost) states.  Use the tool set to
   view and modify settings of the kernel-related CPUfreq and cpuidle systems
   and other settings not related to frequency scaling or idle states. The
   integrated monitoring framework can access both kernel-related parameters
   and hardware statistics. Therefore, it is ideally suited for performance
   benchmarks. It also helps you to identify the dependencies between turbo and
   idle states.
   </p><p> After installing the <code class="systemitem">cpupower</code> package, view the
   available <code class="command">cpupower</code> subcommands with
   <code class="command">cpupower --help</code>. Access the general man page with
   <code class="command">man cpupower</code>, and the man pages of the subcommands with
   <code class="command">man cpupower-<em class="replaceable">SUBCOMMAND</em></code>.
   </p><section class="sect2" id="sec-tuning-power-tools-cpupower-freq-info" data-id-title="Viewing current settings with cpupower"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.3.1 </span><span class="title-name">Viewing current settings with <code class="command">cpupower</code></span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-tools-cpupower-freq-info">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The <code class="command">cpupower frequency-info</code> command shows the
     statistics of the cpufreq driver used in the kernel. Additionally, it
     shows if turbo (boost) states are supported and enabled in the BIOS.
     Run without any options, it shows an output similar to the following:
    </p><div class="example" id="id-1.8.6.5.5.4.3" data-id-title="Example output of cpupower frequency-info"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 12.1: </span><span class="title-name">Example output of <code class="command">cpupower frequency-info</code> </span></span><a title="Permalink" class="permalink" href="cha-tuning-power.html#id-1.8.6.5.5.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cpupower frequency-info
analyzing CPU 0:
  driver: intel_pstate
  CPUs which run at the same hardware frequency: 0
  CPUs which need to have their frequency coordinated by software: 0
  maximum transition latency: 0.97 ms.
  hardware limits: 1.20 GHz - 3.80 GHz
  available cpufreq governors: performance, powersave
  current policy: frequency should be within 1.20 GHz and 3.80 GHz.
                  The governor "powersave" may decide which speed to use
                  within this range.
  current CPU frequency is 3.40 GHz (asserted by call to hardware).
  boost state support:
    Supported: yes
    Active: yes
    3500 MHz max turbo 4 active cores
    3600 MHz max turbo 3 active cores
    3600 MHz max turbo 2 active cores
    3800 MHz max turbo 1 active cores</pre></div></div></div><p>
     To get the current values for all CPUs, use
     <code class="command">cpupower -c all frequency-info</code>.
    </p></section><section class="sect2" id="sec-tuning-power-tools-cpupower-idle-info" data-id-title="Viewing kernel idle statistics with cpupower"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.3.2 </span><span class="title-name">Viewing kernel idle statistics with <code class="command">cpupower</code></span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-tools-cpupower-idle-info">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The <code class="command">idle-info</code> subcommand shows the statistics of the
     cpuidle driver used in the kernel. It works on all architectures that
     use the cpuidle kernel framework.
    </p><div class="example" id="id-1.8.6.5.5.5.3" data-id-title="Example output of cpupower idle-info"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 12.2: </span><span class="title-name">Example output of <code class="command">cpupower idle-info</code> </span></span><a title="Permalink" class="permalink" href="cha-tuning-power.html#id-1.8.6.5.5.5.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cpupower idle-info
CPUidle driver: intel_idle
CPUidle governor: menu

Analyzing CPU 0:
Number of idle states: 6
Available idle states: POLL C1-SNB C1E-SNB C3-SNB C6-SNB C7-SNB
POLL:
Flags/Description: CPUIDLE CORE POLL IDLE
Latency: 0
Usage: 163128
Duration: 17585669
C1-SNB:
Flags/Description: MWAIT 0x00
Latency: 2
Usage: 16170005
Duration: 697658910
C1E-SNB:
Flags/Description: MWAIT 0x01
Latency: 10
Usage: 4421617
Duration: 757797385
C3-SNB:
Flags/Description: MWAIT 0x10
Latency: 80
Usage: 2135929
Duration: 735042875
C6-SNB:
Flags/Description: MWAIT 0x20
Latency: 104
Usage: 53268
Duration: 229366052
C7-SNB:
Flags/Description: MWAIT 0x30
Latency: 109
Usage: 62593595
Duration: 324631233978</pre></div></div></div><p>
     After finding out which processor idle states are supported with
     <code class="command">cpupower idle-info</code>, individual states can be
     disabled using the <code class="command">cpupower idle-set</code> command.
     Typically one wants to disable the deepest sleep state, for example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cpupower idle-set -d 5</pre></div><p>Or, for disabling all CPUs with latencies equal to or higher than <code class="literal">80</code>:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cpupower idle-set -D 80</pre></div></section><section class="sect2" id="sec-tuning-power-tools-cpupower-monitor" data-id-title="Monitoring kernel and hardware statistics with cpupower"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.3.3 </span><span class="title-name">Monitoring kernel and hardware statistics with <code class="command">cpupower</code></span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-tools-cpupower-monitor">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Use the <code class="command">monitor</code> subcommand to report processor topology, and monitor frequency
     and idle power state statistics over a certain period of time. The
     default interval is <code class="literal">1</code> second, but it can be changed
     with the <code class="option">-i</code>. Independent processor sleep states and
     frequency counters are implemented in the tool—some retrieved
     from kernel statistics, others reading out hardware registers. The
     available monitors depend on the underlying hardware and the system.
     List them with <code class="command">cpupower monitor -l</code>.
     For a description of the individual monitors, refer to the
     cpupower-monitor man page.
    </p><p>
     The <code class="command">monitor</code> subcommand allows you to execute
     performance benchmarks. To compare kernel statistics with hardware
     statistics for specific workloads, concatenate the respective command, for example:</p><div class="verbatim-wrap"><pre class="screen"><code class="command">cpupower</code> <code class="option">monitor</code> db_test.sh</pre></div><div class="complex-example"><div class="example" id="ex-cpupower-monitor" data-id-title="Example cpupower monitor output"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 12.3: </span><span class="title-name">Example <code class="command">cpupower monitor</code> output </span></span><a title="Permalink" class="permalink" href="cha-tuning-power.html#ex-cpupower-monitor">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cpupower monitor
|Mperf                   || Idle_Stats
 <span class="callout" id="co-cpupower-mon-mperf">1</span>                         <span class="callout" id="co-cpupower-mon-idle">2</span> 
CPU | C0   | Cx   | Freq || POLL | C1   | C2   | C3
   0|  3.71| 96.29|  2833||  0.00|  0.00|  0.02| 96.32
   1| 100.0| -0.00|  2833||  0.00|  0.00|  0.00|  0.00
   2|  9.06| 90.94|  1983||  0.00|  7.69|  6.98| 76.45
   3|  7.43| 92.57|  2039||  0.00|  2.60| 12.62| 77.52</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-cpupower-mon-mperf"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
        Mperf shows the average frequency of a CPU, including boost
        frequencies, over time. Additionally, it shows the
        percentage of time the CPU has been active (<code class="literal">C0</code>)
        or in any sleep state (<code class="literal">Cx</code>). As the turbo states are managed by the
        BIOS, it is impossible to get the frequency values at a given
        instant. On modern processors with turbo features the Mperf monitor
        is the only way to find out about the frequency a certain CPU has
        been running in.
       </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-cpupower-mon-idle"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
        Idle_Stats shows the statistics of the cpuidle kernel subsystem. The
        kernel updates these values every time an idle state is entered or
        left. Therefore there can be some inaccuracy when cores are in an
        idle state for some time when the measure starts or ends.
       </p></td></tr></table></div><p>
      Apart from the (general) monitors in the example above, other
      architecture-specific monitors are available. For detailed
      information, refer to the <code class="command">cpupower-monitor</code> man
      page.
     </p></div></div></div><p>
     By comparing the values of the individual monitors, you can find
     correlations and dependencies and evaluate how well the power saving
     mechanism works for a certain workload. In
     <a class="xref" href="cha-tuning-power.html#ex-cpupower-monitor" title="Example cpupower monitor output">Example 12.3</a> you can
     see that CPU <code class="literal">0</code> is idle (the value of
     <code class="literal">Cx</code> is near 100%), but runs at a very high frequency.
     This is because the CPUs <code class="literal">0</code> and <code class="literal">1</code>
     have the same frequency values which means that there is a dependency
     between them.
    </p></section><section class="sect2" id="sec-tuning-power-tools-cpupower-freq-set" data-id-title="Modifying current settings with cpupower"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.3.4 </span><span class="title-name">Modifying current settings with <code class="command">cpupower</code></span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-tools-cpupower-freq-set">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     You can use
     <code class="command">cpupower frequency-set</code> command as <code class="systemitem">root</code> to
     modify current settings. It allows you to set values for the minimum or
     maximum CPU frequency the governor may select or to create a new
     governor. With the <code class="option">-c</code> option, you can also specify for
     which of the processors the settings should be modified. That makes it
     easy to use a consistent policy across all processors without adjusting
     the settings for each processor individually. For more details and the
     available options, see the man page
     <code class="literal">cpupower-frequency-set</code> or run
     <code class="command">cpupower frequency-set</code>
     <code class="option">--help</code>.
    </p></section></section><section class="sect1" id="sec-tuning-power-options" data-id-title="Special tuning options"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">12.4 </span><span class="title-name">Special tuning options</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-options">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The following sections highlight important settings.
  </p><section class="sect2" id="sec-tuning-power-options-p-states" data-id-title="Tuning options for P-states"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.4.1 </span><span class="title-name">Tuning options for P-states</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-options-p-states">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The CPUfreq subsystem offers several tuning options for P-states:
    You can switch between the different governors, influence minimum or
    maximum CPU frequency to be used or change individual governor
    parameters.
   </p><p>
    To switch to another governor at runtime, use
    <code class="command">cpupower frequency-set</code> with the <code class="option">-g</code> option. For
    example, running the following command (as <code class="systemitem">root</code>) will activate the
    performance governor:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cpupower frequency-set -g performance</pre></div><p>
    To set values for the minimum or maximum CPU frequency the governor may
    select, use the <code class="option">-d</code> or <code class="option">-u</code> option,
    respectively.
   </p></section></section><section class="sect1" id="sec-tuning-power-trouble" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">12.5 </span><span class="title-name">Troubleshooting</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-trouble">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.6.5.7.2.1"><span class="term">BIOS options enabled?</span></dt><dd><p>
      To use C-states or P-states, check your BIOS options:
     </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        To use C-states, make sure to enable <code class="literal">CPU C State</code>
        or similar options to benefit from power savings at idle.
       </p></li><li class="listitem"><p>
        To use P-states and the CPUfreq governors, make sure to enable
        <code class="literal">Processor Performance States</code> options or similar.
       </p></li><li class="listitem"><p>
        Even if P-states and C-states are available, it is possible that the
        platform firmware is managing CPU frequencies which may be sub-optimal.
        For example, if <code class="literal">pcc-cpufreq</code> is loaded then the
        OS is only giving hints to the firmware, which is free to ignore the
        hints. This can be addressed by selecting "OS Management" or similar
        for CPU frequency managed in the BIOS. After reboot, an alternative
        driver will be used but the performance impact should be carefully
        measured.
       </p></li></ul></div><p>
      In case of a CPU upgrade, make sure to upgrade your BIOS, too. The
      BIOS needs to know the new CPU and its frequency stepping to
      pass this information on to the operating system.
     </p></dd><dt id="id-1.8.6.5.7.2.2"><span class="term">Log file information?</span></dt><dd><p>
      Check the <code class="systemitem">systemd</code> journal (see <span class="intraxref">Book “Administration Guide”, Chapter 21 “<code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> journal”</span>)
      for any output regarding the CPUfreq subsystem. Only severe
      errors are reported there.
     </p><p>
      If you suspect problems with the CPUfreq subsystem on your
      machine, you can also enable additional debug output. To do so, either
      use <code class="command">cpufreq.debug=7</code> as boot parameter or execute
      the following command as <code class="systemitem">root</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>echo 7 &gt; /sys/module/cpufreq/parameters/debug</pre></div><p>
      This will cause CPUfreq to log more information to
      <code class="command">dmesg</code> on state transitions, which is useful for
      diagnosis. But as this additional output of kernel messages can be
      rather comprehensive, use it only if you are fairly sure that a
      problem exists.
     </p></dd></dl></div></section><section class="sect1" id="sec-tuning-power-more" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">12.6 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-more">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Platforms with a Baseboard Management Controller (BMC) may have additional
   power management configuration options accessible via the service
   processor. These configurations are vendor specific and therefore not
   subject of this guide. For more information, refer to the manuals provided
   by your vendor.
   
  </p><p>
   For more information about powerTOP, refer to
   <a class="link" href="https://01.org/powertop" target="_blank">https://01.org/powertop</a>.
  </p></section><section class="sect1" id="sec-tuning-power-tools-powertop" data-id-title="Monitoring power consumption with powerTOP"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">12.7 </span><span class="title-name">Monitoring power consumption with powerTOP</span></span> <a title="Permalink" class="permalink" href="cha-tuning-power.html#sec-tuning-power-tools-powertop">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   powerTOP helps to identify the causes of unnecessary high power
   consumption. This is especially
   useful for laptops, where minimizing power consumption is
   more important. It supports both Intel and AMD processors.
   Install it in the usual way:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">zypper in powertop</code></pre></div><p>
   powerTOP combines various sources of information (analysis of
   programs, device drivers, kernel options, number and sources of
   interrupts waking up processors from sleep states) and provides
   several ways of viewing them. You can launch it in interactive mode,
   which runs in an ncurses session (see
   <a class="xref" href="cha-tuning-power.html#fig-powertop-curses" title="powerTOP in interactive mode">Figure 12.1, “powerTOP in interactive mode”</a>):
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">powertop</code></pre></div><div class="figure" id="fig-powertop-curses"><div class="figure-contents"><div class="mediaobject"><a href="images/powertop_ncurses.png"><img src="images/powertop_ncurses.png" width="75%" alt="powerTOP in interactive mode" title="powerTOP in interactive mode"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 12.1: </span><span class="title-name">powerTOP in interactive mode </span></span><a title="Permalink" class="permalink" href="cha-tuning-power.html#fig-powertop-curses">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div><p>
   powerTOP supports exporting reports to HTML and CSV.
   The following example generates a single report of a 240-second run:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">powertop --iteration=1 --time=240 --html=<em class="replaceable">POWERREPORT.HTML</em></code></pre></div><p>
   It can be useful to run separate reports over time.
   The following example runs powerTOP 10 times for 20 seconds each time,
   and creates a separate HTML report for each run:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">powertop --iteration=10 --time=20 --html=<em class="replaceable">POWERREPORT.HTML</em></code></pre></div><p>
   This creates 10 time-stamped reports:
  </p><div class="verbatim-wrap"><pre class="screen">powerreport-20200108-104512.html
powerreport-20200108-104451.html
powerreport-20200108-104431.html
[...]</pre></div><p>
   An HTML report looks like <a class="xref" href="cha-tuning-power.html#fig-powertop-html" title="HTML powerTOP report">Figure 12.2, “HTML powerTOP report”</a>:
  </p><div class="figure" id="fig-powertop-html"><div class="figure-contents"><div class="mediaobject"><a href="images/powertop_html.png"><img src="images/powertop_html.png" width="75%" alt="HTML powerTOP report" title="HTML powerTOP report"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 12.2: </span><span class="title-name">HTML powerTOP report </span></span><a title="Permalink" class="permalink" href="cha-tuning-power.html#fig-powertop-html">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_power.xml" title="Edit source document"> </a></div></div></div><p>
   The Tuning tab of the HTML reports, and the Tunables tab in the
   interactive mode, both provide commands for testing the various power
   settings. The HTML report prints the commands, which you can copy
   to a root command line for testing, for example
   <code class="command">echo '0' &gt; '/proc/sys/kernel/nmi_watchdog'</code>.
   The ncurses mode provides a simple toggle between <code class="literal">Good</code>
   and <code class="literal">Bad</code>. <code class="literal">Good</code> runs a command
   to enable power saving, and <code class="literal">Bad</code> turns off power saving.
   Enable all powerTOP settings with one command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">powertop --auto-tune</code></pre></div><p>
   None of these changes survive a reboot. To make any changes
   permanent, use <code class="command">sysctl</code>, <code class="command">udev</code>,
   or <code class="systemitem">systemd</code> to run your selected commands at
   boot. powerTOP includes a <code class="systemitem">systemd</code> service file,
   <code class="filename">/usr/lib/systemd/system/powertop.service</code>. This
   starts powerTOP with the <code class="command">--auto-tune</code> option:
  </p><div class="verbatim-wrap"><pre class="screen">ExecStart=/usr/sbin/powertop --auto-tune</pre></div><p>
   Test this carefully before launching the <code class="systemitem">systemd</code> service,
   to see if it gives the results that you want.
   You probably do not want USB keyboards and mice to go into
   powersave modes because it is a nuisance to continually wake
   them up, and there may be other devices you want left alone. For easier
   testing and configuration editing, extract the commands from
   an HTML report with <code class="command">awk</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>awk -F '&lt;/?td ?&gt;' '/tune/ { print $4 }' <em class="replaceable">POWERREPORT.HTML</em></pre></div><p>
   In calibrate mode, powerTOP sets up several runs that use different idle
   settings for backlight, CPU, Wi-Fi, USB devices, and disks, and helps to
   identify optimal brightness settings on battery power:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">powertop --calibrate</code></pre></div><p>
   You may call a file that creates a workload for more accurate calibration:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">powertop --calibrate --workload=<em class="replaceable">FILENAME</em> --html=POWERREPORT.HTML</code></pre></div><p>
   For more information, see:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     The powerTOP project page at <a class="link" href="https://01.org/powertop" target="_blank">https://01.org/powertop</a>
    </p></li><li class="listitem"><p>
     <a class="xref" href="cha-util.html#sec-util-proc-procinfo-sysctl" title="2.6.2. System control parameters: /proc/sys/">Section 2.6.2, “System control parameters: <code class="filename">/proc/sys/</code>”</a>
    </p></li><li class="listitem"><p>
     <span class="intraxref">Book “Administration Guide”, Chapter 19 “The <code class="systemitem">systemd</code> daemon”</span>
    </p></li><li class="listitem"><p>
     <span class="intraxref">Book “Administration Guide”, Chapter 29 “Dynamic kernel device management with <code class="systemitem">udev</code>”</span>
    </p></li></ul></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-tuning-numactl.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 11 </span>Automatic Non-Uniform Memory Access (NUMA) balancing</span></a> </div><div><a class="pagination-link next" href="part-tuning-kernel.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Part V </span>Kernel tuning</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-tuning-power.html#sec-tuning-power-cpu"><span class="title-number">12.1 </span><span class="title-name">Power management at CPU Level</span></a></span></li><li><span class="sect1"><a href="cha-tuning-power.html#sec-tuning-power-governors"><span class="title-number">12.2 </span><span class="title-name">In-kernel governors</span></a></span></li><li><span class="sect1"><a href="cha-tuning-power.html#sec-tuning-power-tools-cpupower"><span class="title-number">12.3 </span><span class="title-name">The <code class="systemitem">cpupower</code> tools</span></a></span></li><li><span class="sect1"><a href="cha-tuning-power.html#sec-tuning-power-options"><span class="title-number">12.4 </span><span class="title-name">Special tuning options</span></a></span></li><li><span class="sect1"><a href="cha-tuning-power.html#sec-tuning-power-trouble"><span class="title-number">12.5 </span><span class="title-name">Troubleshooting</span></a></span></li><li><span class="sect1"><a href="cha-tuning-power.html#sec-tuning-power-more"><span class="title-number">12.6 </span><span class="title-name">More information</span></a></span></li><li><span class="sect1"><a href="cha-tuning-power.html#sec-tuning-power-tools-powertop"><span class="title-number">12.7 </span><span class="title-name">Monitoring power consumption with powerTOP</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>