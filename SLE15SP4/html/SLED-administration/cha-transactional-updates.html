<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLED 15 SP4 | Administration Guide | Transactional updates</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Transactional updates | SLED 15 SP4"/>
<meta name="description" content="Transactional updates are available in SUSE Linux Enterprise Desktop as a technology preview, for updating SLES when the root file system is read-onl…"/>
<meta name="product-name" content="SUSE Linux Enterprise Desktop"/>
<meta name="product-number" content="15 SP4"/>
<meta name="book-title" content="Administration Guide"/>
<meta name="chapter-title" content="Chapter 13. Transactional updates"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Desktop 15 SP4"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Administration Guide"/>
<meta property="og:description" content="Maintain, monitor and customize SLED"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Administration Guide"/>
<meta name="twitter:description" content="Maintain, monitor and customize SLED"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Transactional updates",
  
    "description": "Transactional updates are available in SUSE Linux Enterprise Desktop as a technology preview, for updating SLES when the root file system is read-onl…",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-02-13T00:00+02:00",
      
    "datePublished": "2022-06-21T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-ulp.html" title="Chapter 12. User space live patching"/><link rel="next" href="cha-vnc.html" title="Chapter 14. Remote graphical sessions with VNC"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Administration Guide</a><span> / </span><a class="crumb" href="part-administration.html">Common tasks</a><span> / </span><a class="crumb" href="cha-transactional-updates.html">Transactional updates</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Administration Guide</div><ol><li><a href="pre-sle.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li class="active"><a href="part-administration.html" class="has-children you-are-here"><span class="title-number">I </span><span class="title-name">Common tasks</span></a><ol><li><a href="cha-adm-shell.html" class=" "><span class="title-number">1 </span><span class="title-name">Bash and Bash scripts</span></a></li><li><a href="cha-adm-sudo.html" class=" "><span class="title-number">2 </span><span class="title-name"><code class="command">sudo</code> basics</span></a></li><li><a href="cha-yast-gui.html" class=" "><span class="title-number">3 </span><span class="title-name">Using YaST</span></a></li><li><a href="cha-yast-text.html" class=" "><span class="title-number">4 </span><span class="title-name">YaST in text mode</span></a></li><li><a href="cha-yast-lang.html" class=" "><span class="title-number">5 </span><span class="title-name">Changing language and country settings with YaST</span></a></li><li><a href="cha-yast-userman.html" class=" "><span class="title-number">6 </span><span class="title-name">Managing users with YaST</span></a></li><li><a href="cha-onlineupdate-you.html" class=" "><span class="title-number">7 </span><span class="title-name">YaST online update</span></a></li><li><a href="cha-yast-software.html" class=" "><span class="title-number">8 </span><span class="title-name">Installing or removing software</span></a></li><li><a href="cha-sw-cl.html" class=" "><span class="title-number">9 </span><span class="title-name">Managing software with command line tools</span></a></li><li><a href="cha-snapper.html" class=" "><span class="title-number">10 </span><span class="title-name">System recovery and snapshot management with Snapper</span></a></li><li><a href="cha-klp.html" class=" "><span class="title-number">11 </span><span class="title-name">Live kernel patching with KLP</span></a></li><li><a href="cha-ulp.html" class=" "><span class="title-number">12 </span><span class="title-name">User space live patching</span></a></li><li><a href="cha-transactional-updates.html" class=" you-are-here"><span class="title-number">13 </span><span class="title-name">Transactional updates</span></a></li><li><a href="cha-vnc.html" class=" "><span class="title-number">14 </span><span class="title-name">Remote graphical sessions with VNC</span></a></li><li><a href="cha-net-rsync.html" class=" "><span class="title-number">15 </span><span class="title-name">File copying with RSync</span></a></li></ol></li><li><a href="part-boot.html" class="has-children "><span class="title-number">II </span><span class="title-name">Booting a Linux system</span></a><ol><li><a href="cha-boot.html" class=" "><span class="title-number">16 </span><span class="title-name">Introduction to the boot process</span></a></li><li><a href="cha-uefi.html" class=" "><span class="title-number">17 </span><span class="title-name">UEFI (Unified Extensible Firmware Interface)</span></a></li><li><a href="cha-grub2.html" class=" "><span class="title-number">18 </span><span class="title-name">The boot loader GRUB 2</span></a></li><li><a href="cha-systemd.html" class=" "><span class="title-number">19 </span><span class="title-name">The <code class="systemitem">systemd</code> daemon</span></a></li></ol></li><li><a href="part-system.html" class="has-children "><span class="title-number">III </span><span class="title-name">System</span></a><ol><li><a href="cha-64bit.html" class=" "><span class="title-number">20 </span><span class="title-name">32-bit and 64-bit applications in a 64-bit system environment</span></a></li><li><a href="cha-journalctl.html" class=" "><span class="title-number">21 </span><span class="title-name"><code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> journal</span></a></li><li><a href="cha-update-alternative.html" class=" "><span class="title-number">22 </span><span class="title-name"><code class="command">update-alternatives</code>: Managing multiple versions of commands and files</span></a></li><li><a href="cha-network.html" class=" "><span class="title-number">23 </span><span class="title-name">Basic networking</span></a></li><li><a href="cha-print.html" class=" "><span class="title-number">24 </span><span class="title-name">Printer operation</span></a></li><li><a href="cha-gui-desktop.html" class=" "><span class="title-number">25 </span><span class="title-name">Graphical user interface</span></a></li><li><a href="cha-fuse.html" class=" "><span class="title-number">26 </span><span class="title-name">Accessing file systems with FUSE</span></a></li><li><a href="cha-tuning-multikernel.html" class=" "><span class="title-number">27 </span><span class="title-name">Installing multiple kernel versions</span></a></li><li><a href="cha-mod.html" class=" "><span class="title-number">28 </span><span class="title-name">Managing kernel modules</span></a></li><li><a href="cha-udev.html" class=" "><span class="title-number">29 </span><span class="title-name">Dynamic kernel device management with <code class="systemitem">udev</code></span></a></li><li><a href="cha-suse.html" class=" "><span class="title-number">30 </span><span class="title-name">Special system features</span></a></li><li><a href="cha-nm.html" class=" "><span class="title-number">31 </span><span class="title-name">Using NetworkManager</span></a></li></ol></li><li><a href="part-hardware.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Hardware configuration</span></a><ol><li><a href="sec-yast-hw-keym.html" class=" "><span class="title-number">32 </span><span class="title-name">Setting up your system keyboard layout</span></a></li><li><a href="sec-yast-hw-sound.html" class=" "><span class="title-number">33 </span><span class="title-name">Setting up sound cards</span></a></li><li><a href="sec-yast-hw-print.html" class=" "><span class="title-number">34 </span><span class="title-name">Setting up a printer</span></a></li><li><a href="sec-yast-hw-scan.html" class=" "><span class="title-number">35 </span><span class="title-name">Setting up a scanner</span></a></li><li><a href="cha-power-mgmt.html" class=" "><span class="title-number">36 </span><span class="title-name">Power management</span></a></li><li><a href="cha-nvdimm.html" class=" "><span class="title-number">37 </span><span class="title-name">Persistent memory</span></a></li></ol></li><li><a href="part-services.html" class="has-children "><span class="title-number">V </span><span class="title-name">Services</span></a><ol><li><a href="cha-yast-serviceman.html" class=" "><span class="title-number">38 </span><span class="title-name">Service management with YaST</span></a></li><li><a href="cha-ntp.html" class=" "><span class="title-number">39 </span><span class="title-name">Time synchronization with NTP</span></a></li></ol></li><li><a href="part-trouble.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Troubleshooting</span></a><ol><li><a href="cha-adminhelp.html" class=" "><span class="title-number">40 </span><span class="title-name">Help and documentation</span></a></li><li><a href="cha-adm-support.html" class=" "><span class="title-number">41 </span><span class="title-name">Gathering system information for support</span></a></li><li><a href="cha-trouble.html" class=" "><span class="title-number">42 </span><span class="title-name">Common problems and their solutions</span></a></li></ol></li><li><a href="app-nwscheme.html" class=" "><span class="title-number">A </span><span class="title-name">An example network</span></a></li><li><a href="bk01apb.html" class=" "><span class="title-number">B </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section xml:lang="en" class="chapter" id="cha-transactional-updates" data-id-title="Transactional updates"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP4</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">13 </span><span class="title-name">Transactional updates</span></span> <a title="Permalink" class="permalink" href="cha-transactional-updates.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Transactional updates are available in <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> as a technology
    preview, for updating SLES when the root file system is read-only. 
    Transactional updates are atomic (all updates are applied only if all 
    updates succeed) and support rollbacks. It does not affect a running system 
    as no changes are activated until after the system is rebooted. As reboots
    are disruptive, the admin must decide if a reboot is more expensive than
    disturbing running services. If reboots are too expensive then do not use
    transactional updates.
   </p><p>
    Transactional updates are run daily by the
    <code class="command">transactional-update</code> script. The script checks for
    available updates. If there are any updates, it creates a new snapshot of
    the root file system in the background, and then fetches updates from the
    release channels. After the new snapshot is completely updated, it is
    marked as active and will be the new default root file system after the next 
    reboot of the system. When <code class="command">transactional-update</code> is set to run
    automatically (which is the default behavior) it also reboots the system.
    Both the time that the update runs and the reboot maintenance window are 
    configurable.
   </p><p>
    Only packages that are part of the snapshot of the root file system can be
    updated. If packages contain files that are not part of the snapshot, the
    update could fail or break the system.
   </p><p>
    RPMs that require a license to be accepted cannot be updated.
   </p></div></div></div></div><section class="sect1" id="sec-tu-limitations" data-id-title="Limitations of technology preview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.1 </span><span class="title-name">Limitations of technology preview</span></span> <a title="Permalink" class="permalink" href="cha-transactional-updates.html#sec-tu-limitations">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   As a technology preview, there are certain limitations in functionality. The
   following packages will not work with <code class="command">transactional-update</code>:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     The <span class="package">nginx</span> default index.html page may not be available
    </p></li><li class="listitem"><p>
     <span class="package">tomcat-webapps</span> and
     <span class="package">tomcat-admin-webapps</span>
    </p></li><li class="listitem"><p>
     <span class="package">phpMyAdmin</span>
    </p></li><li class="listitem"><p>
     <span class="package">sca-appliance-*</span>
    </p></li><li class="listitem"><p>
     <span class="package">mpi-selector</span>
    </p></li><li class="listitem"><p>
     <span class="package">emacs</span> works except for Emacs games
    </p></li><li class="listitem"><p>
     <span class="package">bind</span> and <span class="package">bind-chrootenv</span>
    </p></li><li class="listitem"><p>
     <span class="package">docbook*</span>
    </p></li><li class="listitem"><p>
     <span class="package">sblim-sfcb*</span>
    </p></li><li class="listitem"><p>
     <span class="package">texlive*</span>
    </p></li><li class="listitem"><p>
     <span class="package">iso_ent</span>
    </p></li><li class="listitem"><p>
     <span class="package">openjade</span>
    </p></li><li class="listitem"><p>
     <span class="package">opensp</span>
    </p></li><li class="listitem"><p>
     <span class="package">pcp</span>
    </p></li><li class="listitem"><p>
     <span class="package">plymouth</span>
    </p></li><li class="listitem"><p>
     <span class="package">postgresql-server-10</span>
    </p></li><li class="listitem"><p>
     <span class="package">pulseaudio-gdm-hooks</span>
    </p></li><li class="listitem"><p>
     <span class="package">smartmontools</span>
    </p></li></ul></div><p>
   The updater component of the system installer does not work with a read-only
   file system as it has no support for transactional updates.
  </p><p>
   Further considerations:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     In general it is a good idea to minimize the time between updating the
     system and rebooting the machine.
    </p></li><li class="listitem"><p>
     Only one update can be applied at a time. Be sure to reboot after an
     update, and before the next update is applied.
    </p></li><li class="listitem"><p>
     <code class="command">update-alternatives</code> should not be run after a
     transactional update until the machine has been rebooted.
    </p></li><li class="listitem"><p>
     Do not create new system users or system groups after a transactional
     update until after reboot. It is acceptable to create normal users and
     groups (UID &gt; 1000, GID &gt; 1000).
    </p></li><li class="listitem"><p>
     YaST is not yet aware of transactional updates. If a YaST module needs
     to install additional packages, this will not work. Normal system
     operations only modifying configuration files in <code class="filename">/etc</code>
     will work.
    </p></li><li class="listitem"><p>
     For <span class="package">php7-fastcgi</span>, you must manually create a symbolic link,
     <code class="filename">/srv/www/cgi-bin/php</code>, that points to
     <code class="filename">/usr/bin/php-cgi</code>.
    </p></li><li class="listitem"><p>
     <span class="package">ntp</span>is part of the Legacy Module for migration from
     older SLES versions. It is not supported on a new <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>
     installation, and has been replaced by <span class="package">chrony</span>. If you
     continue to use <span class="package">ntp</span>, a fresh installation is required
     to work correctly with transactional updates.
    </p></li><li class="listitem"><p>
     <span class="package">sblim-sfcb</span>: The whole sblim ecosystem is incompatible
     with transactional update.
    </p></li><li class="listitem"><p>
     <code class="command">btrfs-defrag</code> from the
     <span class="package">btrfsmaintenance</span> package does not work with a read-only
     root file system.
    </p></li><li class="listitem"><p>
     For <code class="command">btrfs-balance</code>, the variable
     <code class="literal">BTRFS_BALANCE_MOUNTPOINTS</code> in
     <code class="filename">/etc/sysconfig/btrfsmaintenance</code> must be changed from
     <code class="literal">/</code> to <code class="literal">/.snapshots</code>.
    </p></li><li class="listitem"><p>
     For <code class="command">btrfs-scrub</code>, the variable
     <code class="literal">BTRFS_SCRUB_MOUNTPOINTS</code> in
     <code class="filename">/etc/sysconfig/btrfsmaintenance</code> must be changed from
     <code class="literal">/</code> to <code class="literal">/.snapshots</code>.
    </p></li></ul></div></section><section class="sect1" id="sec-install-tu" data-id-title="Enabling transactional-update"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.2 </span><span class="title-name">Enabling <span class="package">transactional-update</span></span></span> <a title="Permalink" class="permalink" href="cha-transactional-updates.html#sec-install-tu">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You must enable the Transactional Server Module during system installation,
   and then select the Transactional Server System Role. Installing any package 
   from the Transactional Server Module later in a running system is NOT 
   supported and may break the system.
  </p><p>
      Note that changing the subvolume layout of the root partition, or putting 
      sub-directories or subvolumes of the root partition on their own partitions 
      (except <code class="filename">/home</code>, <code class="filename">/var</code>, 
      <code class="filename">/srv</code>, and <code class="filename">/opt</code>) is not supported, 
      and will most likely break the system.
  </p></section><section class="sect1" id="sec-tu-disable" data-id-title="Managing automatic updates"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.3 </span><span class="title-name">Managing automatic updates</span></span> <a title="Permalink" class="permalink" href="cha-transactional-updates.html#sec-tu-disable">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Automatic updates are controlled by a <code class="command">systemd.timer</code> 
      that runs once per day. This applies all updates, and informs 
      <code class="command">rebootmgrd</code> that the machine should be rebooted. You may
      adjust the time when the update runs, see systemd.timer(5). To adjust the
      maintenance window, which is when <code class="command">rebootmgrd</code> reboots the
      system, see rebootmgrd(8).
  </p><p>
   You can disable automatic transactional updates with this command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">systemctl --now disable transactional-update.timer</code></pre></div></section><section class="sect1" id="id-1.3.3.14.6" data-id-title="The transactional-update command"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.4 </span><span class="title-name">The <code class="command">transactional-update</code> command</span></span> <a title="Permalink" class="permalink" href="cha-transactional-updates.html#id-1.3.3.14.6">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <code class="command">transactional-update</code> command enables atomic installation 
   or removal of updates; updates are applied only
   if all of them can be successfully installed.
   <code class="command">transactional-update</code> creates a snapshot of your system
   before the update is applied, and you can restore this snapshot. All changes become 
   active only after reboot.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.14.6.3.1"><span class="term"><code class="literal">--continue</code></span></dt><dd><p>
         The <code class="command">--continue</code> option is for making multiple changes to an
         existing snapshot without rebooting.
     </p><p>
         The default <code class="command">transactional-update</code> behavior 
         is to create a new snapshot from the current root file system. If you
         forget something, such as installing a new package, you have to reboot
         to apply your previous changes, run <code class="command">transactional-update</code>
         again to install the forgotten package, and reboot again. You cannot run the
         <code class="command">transactional-update</code> command multiple times without rebooting
         to add more changes to the snapshot, because that creates separate 
         independent snapshots that do not include changes from the previous snapshots.
     </p><p>
         Use the <code class="command">--continue</code> option to make as many changes as you
         want without rebooting. A separate snapshot is made each time, and each
         snapshot contains all the changes you made in the previous snapshots, plus your 
         new changes. Repeat this process as many times as you want, and when the final
         snapshot includes everything you want reboot the system, and your final snapshot
         becomes the new root file system.
     </p><p>
         Another useful feature of the <code class="command">--continue</code> option is you may
         select any existing snapshot as the base for your new snapshot. The following example
         demonstrates running <code class="command">transactional-update</code> to install a new
         package in a snapshot based on snapshot 13, and then running it again to install 
         another package:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg install <em class="replaceable">package_1</em></code></pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update --continue 13 pkg install <em class="replaceable">package_2</em></code></pre></div><p>
        The <code class="command">--continue [num]</code> option calls <code class="command">snapper create --from</code>,
        see <a class="xref" href="cha-snapper.html#sec-snapper-manage-create" title="10.6.2. Creating snapshots">Section 10.6.2, “Creating snapshots”</a>.
    </p></dd><dt id="id-1.3.3.14.6.3.2"><span class="term"><code class="literal">cleanup</code></span></dt><dd><p>
    If the current root file system is identical to the active root
    file system (after a reboot, before <code class="command">transactional-update</code>
    creates a new snapshot with updates), all old snapshots without a
    cleanup algorithm get a cleanup algorithm set. This ensures that old 
    snapshots will be deleted by Snapper. (See the section about cleanup 
    algorithms in snapper(8).) This also removes all unreferenced (and thus 
    unused) <code class="filename">/etc</code> overlay directories in 
    <code class="filename">/var/lib/overlay</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update cleanup</code></pre></div></dd><dt id="id-1.3.3.14.6.3.3"><span class="term"><code class="literal">pkg in/install</code></span></dt><dd><p>
      Installs individual packages from the available channels using the
      <code class="command">zypper install</code> command. This command can also be used
      to install Program Temporary Fix (PTF) RPM files.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg install <em class="replaceable">package_name</em></code></pre></div><p>
      or
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg install <em class="replaceable">rpm1 rpm2</em></code></pre></div></dd><dt id="id-1.3.3.14.6.3.4"><span class="term"><code class="literal">pkg rm/remove</code></span></dt><dd><p>
      Removes individual packages from the active snapshot using the
      <code class="command">zypper remove</code> command. This command can also be used
      to remove PTF RPM files.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg remove <em class="replaceable">package_name</em></code></pre></div></dd><dt id="id-1.3.3.14.6.3.5"><span class="term"><code class="literal">pkg up/update</code></span></dt><dd><p>
      Updates individual packages from the active snapshot using the
      <code class="command">zypper update</code> command. Only packages that are part of
      the snapshot of the base file system can be updated.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg update <em class="replaceable">package_name</em></code></pre></div></dd><dt id="id-1.3.3.14.6.3.6"><span class="term"><code class="literal">up/update</code></span></dt><dd><p>
      If there are new updates available, a new snapshot is created and
      <code class="command">zypper up/update</code> updates the snapshot.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update up</code></pre></div></dd><dt id="id-1.3.3.14.6.3.7"><span class="term"><code class="literal">dup</code></span></dt><dd><p>
      If there are new updates available, a new snapshot is created and
      <code class="command">zypper dup –no-allow-vendor-change</code> updates the
      snapshot. The snapshot is activated afterwards and becomes the new root
      file system after reboot.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update dup</code></pre></div></dd><dt id="id-1.3.3.14.6.3.8"><span class="term"><code class="literal">patch</code></span></dt><dd><p>
      If there are new updates available, a new snapshot is created and
      <code class="command">zypper patch</code> updates the snapshot.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update patch</code></pre></div></dd><dt id="id-1.3.3.14.6.3.9"><span class="term"><code class="literal">rollback</code></span></dt><dd><p>
      This sets the default subvolume. On systems with a read-write file system
      <code class="command">snapper rollback</code> is called. On a read-only file system
      and without any argument, the current system is set to a new default root
      file system. If you specify a number, that snapshot is used as the
      default root file system. On a read-only file system, it does not create
      any additional snapshots.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update rollback <em class="replaceable">snapshot_number</em></code></pre></div></dd><dt id="id-1.3.3.14.6.3.10"><span class="term"><code class="literal">grub.cfg</code></span></dt><dd><p>
      This creates a new GRUB2 configuration. Sometimes it is necessary to
      adjust the boot configuration, for example adding additional kernel
      parameters. Edit <em class="replaceable">/etc/default/grub</em>, run
      <code class="command">transactional-update grub.cfg</code>, and then reboot to
      activate the change. You must immediately reboot, or the new GRUB2
      configuration will be overwritten with the default by the next
      transactional-update.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update grub.cfg</code></pre></div></dd><dt id="id-1.3.3.14.6.3.11"><span class="term"><code class="literal">reboot</code></span></dt><dd><p>
      This parameter triggers a reboot after the action is completed.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update <em class="replaceable">dup</em> reboot</code></pre></div></dd><dt id="id-1.3.3.14.6.3.12"><span class="term"><code class="literal">--help</code></span></dt><dd><p>
      This prints a help screen with options and subcommands.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update --help</code></pre></div></dd></dl></div></section><section class="sect1" id="sec-tu-troubleshooting" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.5 </span><span class="title-name">Troubleshooting</span></span> <a title="Permalink" class="permalink" href="cha-transactional-updates.html#sec-tu-troubleshooting">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If the upgrade fails, run <code class="command">supportconfig</code> to collect log
   data. Provide the resulting files, including
   <code class="filename">/var/log/transactional-update.log</code> to SUSE Support.
  </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-ulp.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 12 </span>User space live patching</span></a> </div><div><a class="pagination-link next" href="cha-vnc.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 14 </span>Remote graphical sessions with VNC</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-transactional-updates.html#sec-tu-limitations"><span class="title-number">13.1 </span><span class="title-name">Limitations of technology preview</span></a></span></li><li><span class="sect1"><a href="cha-transactional-updates.html#sec-install-tu"><span class="title-number">13.2 </span><span class="title-name">Enabling <span class="package">transactional-update</span></span></a></span></li><li><span class="sect1"><a href="cha-transactional-updates.html#sec-tu-disable"><span class="title-number">13.3 </span><span class="title-name">Managing automatic updates</span></a></span></li><li><span class="sect1"><a href="cha-transactional-updates.html#id-1.3.3.14.6"><span class="title-number">13.4 </span><span class="title-name">The <code class="command">transactional-update</code> command</span></a></span></li><li><span class="sect1"><a href="cha-transactional-updates.html#sec-tu-troubleshooting"><span class="title-number">13.5 </span><span class="title-name">Troubleshooting</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>