<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLED 15 SP4 | Security and Hardening Guide | Network authentication with Kerberos</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Network authentication with Kerberos | SLED 15 SP4"/>
<meta name="description" content="Kerberos is a network authentication protocol which also provides encryption. This chapter describes how to set up Kerberos and integrate services li…"/>
<meta name="product-name" content="SUSE Linux Enterprise Desktop"/>
<meta name="product-number" content="15 SP4"/>
<meta name="book-title" content="Security and Hardening Guide"/>
<meta name="chapter-title" content="Chapter 6. Network authentication with Kerberos"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Desktop 15 SP4"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Security and Hardening Guide"/>
<meta property="og:description" content="Implement system security and hardening for SLED"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Security and Hardening Guide"/>
<meta name="twitter:description" content="Implement system security and hardening for SLED"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Network authentication with Kerberos",
  
    "description": "Kerberos is a network authentication protocol which also provides encryption. This chapter describes how to set up Kerberos and integrate services li…",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-05-27T00:00+02:00",
      
    "datePublished": "2022-06-21T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-security-ldap.html" title="Chapter 5. LDAP with 389 Directory Server"/><link rel="next" href="cha-security-ad.html" title="Chapter 7. Active Directory support"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Security and Hardening Guide</a><span> / </span><a class="crumb" href="part-auth.html">Authentication</a><span> / </span><a class="crumb" href="cha-security-kerberos.html">Network authentication with Kerberos</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Security and Hardening Guide</div><ol><li><a href="preface-security.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="cha-security.html" class=" "><span class="title-number">1 </span><span class="title-name">Security and confidentiality</span></a></li><li class="active"><a href="part-auth.html" class="has-children you-are-here"><span class="title-number">I </span><span class="title-name">Authentication</span></a><ol><li><a href="cha-pam.html" class=" "><span class="title-number">2 </span><span class="title-name">Authentication with PAM</span></a></li><li><a href="cha-nis.html" class=" "><span class="title-number">3 </span><span class="title-name">Using NIS</span></a></li><li><a href="cha-security-auth.html" class=" "><span class="title-number">4 </span><span class="title-name">Setting up authentication clients using YaST</span></a></li><li><a href="cha-security-ldap.html" class=" "><span class="title-number">5 </span><span class="title-name">LDAP with 389 Directory Server</span></a></li><li><a href="cha-security-kerberos.html" class=" you-are-here"><span class="title-number">6 </span><span class="title-name">Network authentication with Kerberos</span></a></li><li><a href="cha-security-ad.html" class=" "><span class="title-number">7 </span><span class="title-name">Active Directory support</span></a></li><li><a href="cha-security-freeradius.html" class=" "><span class="title-number">8 </span><span class="title-name">Setting up a freeRADIUS server</span></a></li></ol></li><li><a href="part-local-security.html" class="has-children "><span class="title-number">II </span><span class="title-name">Local security</span></a><ol><li><a href="cha-physical-security.html" class=" "><span class="title-number">9 </span><span class="title-name">Physical security</span></a></li><li><a href="sec-sec-software-management.html" class=" "><span class="title-number">10 </span><span class="title-name">Software management</span></a></li><li><a href="sec-sec-file-management.html" class=" "><span class="title-number">11 </span><span class="title-name">File management</span></a></li><li><a href="cha-security-cryptofs.html" class=" "><span class="title-number">12 </span><span class="title-name">Encrypting partitions and files</span></a></li><li><a href="cha-configure-cryptctl.html" class=" "><span class="title-number">13 </span><span class="title-name">Storage encryption for hosted applications with cryptctl</span></a></li><li><a href="sec-sec-user-management.html" class=" "><span class="title-number">14 </span><span class="title-name">User management</span></a></li><li><a href="cha-sec-cron-at.html" class=" "><span class="title-number">15 </span><span class="title-name">Restricting <code class="systemitem">cron</code> and <code class="systemitem">at</code></span></a></li><li><a href="cha-spectre.html" class=" "><span class="title-number">16 </span><span class="title-name">Spectre/Meltdown checker</span></a></li><li><a href="cha-security-yast-security.html" class=" "><span class="title-number">17 </span><span class="title-name">Configuring security settings with YaST</span></a></li><li><a href="cha-security-polkit.html" class=" "><span class="title-number">18 </span><span class="title-name">The Polkit authentication framework</span></a></li><li><a href="cha-security-acls.html" class=" "><span class="title-number">19 </span><span class="title-name">Access control lists in Linux</span></a></li><li><a href="cha-aide.html" class=" "><span class="title-number">20 </span><span class="title-name">Intrusion detection with AIDE</span></a></li></ol></li><li><a href="part-network-security.html" class="has-children "><span class="title-number">III </span><span class="title-name">Network security</span></a><ol><li><a href="cha-xauth.html" class=" "><span class="title-number">21 </span><span class="title-name">X Window System and X authentication</span></a></li><li><a href="cha-ssh.html" class=" "><span class="title-number">22 </span><span class="title-name">Securing network operations with OpenSSH</span></a></li><li><a href="cha-security-firewall.html" class=" "><span class="title-number">23 </span><span class="title-name">Masquerading and firewalls</span></a></li><li><a href="cha-security-vpnserver.html" class=" "><span class="title-number">24 </span><span class="title-name">Configuring a VPN server</span></a></li><li><a href="cha-security-xca.html" class=" "><span class="title-number">25 </span><span class="title-name">Managing a PKI with XCA, X certificate and key manager</span></a></li><li><a href="cha-sec-sysctl.html" class=" "><span class="title-number">26 </span><span class="title-name">Improving network security with <code class="command">sysctl</code> variables</span></a></li></ol></li><li><a href="part-compliance.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Regulations and Compliance</span></a><ol><li><a href="cha-common-criteria.html" class=" "><span class="title-number">27 </span><span class="title-name">Common Criteria</span></a></li><li><a href="cha-security-fips.html" class=" "><span class="title-number">28 </span><span class="title-name">Enabling compliance with FIPS 140-3</span></a></li></ol></li><li><a href="part-apparmor.html" class="has-children "><span class="title-number">V </span><span class="title-name">Confining privileges with <span class="phrase">AppArmor</span></span></a><ol><li><a href="cha-apparmor-intro.html" class=" "><span class="title-number">29 </span><span class="title-name">Introducing <span class="phrase">AppArmor</span></span></a></li><li><a href="cha-apparmor-start.html" class=" "><span class="title-number">30 </span><span class="title-name">Getting started</span></a></li><li><a href="cha-apparmor-concept.html" class=" "><span class="title-number">31 </span><span class="title-name">Immunizing programs</span></a></li><li><a href="cha-apparmor-profiles.html" class=" "><span class="title-number">32 </span><span class="title-name">Profile components and syntax</span></a></li><li><a href="cha-apparmor-repos.html" class=" "><span class="title-number">33 </span><span class="title-name"><span class="phrase">AppArmor</span> profile repositories</span></a></li><li><a href="cha-apparmor-yast.html" class=" "><span class="title-number">34 </span><span class="title-name">Building and managing profiles with YaST</span></a></li><li><a href="cha-apparmor-commandline.html" class=" "><span class="title-number">35 </span><span class="title-name">Building profiles from the command line</span></a></li><li><a href="cha-apparmor-hat.html" class=" "><span class="title-number">36 </span><span class="title-name">Profiling your Web applications using ChangeHat</span></a></li><li><a href="cha-apparmor-pam.html" class=" "><span class="title-number">37 </span><span class="title-name">Confining users with <code class="systemitem">pam_apparmor</code></span></a></li><li><a href="cha-apparmor-managing.html" class=" "><span class="title-number">38 </span><span class="title-name">Managing profiled applications</span></a></li><li><a href="cha-apparmor-support.html" class=" "><span class="title-number">39 </span><span class="title-name">Support</span></a></li><li><a href="cha-apparmor-glossary.html" class=" "><span class="title-number">40 </span><span class="title-name"><span class="phrase">AppArmor</span> glossary</span></a></li></ol></li><li><a href="part-audit.html" class="has-children "><span class="title-number">VI </span><span class="title-name">The Linux Audit Framework</span></a><ol><li><a href="cha-audit-comp.html" class=" "><span class="title-number">41 </span><span class="title-name">Understanding Linux audit</span></a></li><li><a href="cha-audit-setup.html" class=" "><span class="title-number">42 </span><span class="title-name">Setting up the Linux audit framework</span></a></li><li><a href="cha-audit-scenarios.html" class=" "><span class="title-number">43 </span><span class="title-name">Introducing an audit rule set</span></a></li><li><a href="cha-audit-moreinfo.html" class=" "><span class="title-number">44 </span><span class="title-name">Useful resources</span></a></li></ol></li><li><a href="bk05apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-security-kerberos" data-id-title="Network authentication with Kerberos"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP4</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">6 </span><span class="title-name">Network authentication with Kerberos</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Kerberos is a network authentication protocol which also provides encryption.
    This chapter describes how to set up Kerberos and integrate services like LDAP
    and NFS.
   </p></div></div></div></div><section class="sect1" id="sec-security-kerberos-overview" data-id-title="Conceptual overview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.1 </span><span class="title-name">Conceptual overview</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-overview">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   An open network provides no means of ensuring that a workstation can
   identify its users properly, except through the usual password mechanisms.
   In common installations, the user must enter the password each time a
   service inside the network is accessed. Kerberos provides an authentication
   method with which a user registers only once and is trusted in the complete
   network for the rest of the session. To have a secure network, the following
   requirements must be met:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Have all users prove their identity for each desired service and make sure
     that no one can take the identity of someone else.
    </p></li><li class="listitem"><p>
     Make sure that each network server also proves its identity. Otherwise an
     attacker might be able to impersonate the server and obtain sensitive
     information transmitted to the server. This concept is called
     <span class="emphasis"><em>mutual authentication</em></span>, because the client
     authenticates to the server and vice versa.
    </p></li></ul></div><p>
   Kerberos helps you meet these requirements by providing strongly encrypted
   authentication. Only the basic principles of Kerberos are discussed here. For
   detailed technical instruction, refer to the Kerberos documentation.
  </p></section><section class="sect1" id="sec-security-kerberos-terms" data-id-title="Kerberos terminology"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.2 </span><span class="title-name">Kerberos terminology</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-terms">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The following glossary defines some Kerberos terminology.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.7.4.6.4.3.1"><span class="term">credential</span></dt><dd><p>
      Users or clients need to present some kind of credentials that authorize
      them to request services. Kerberos knows two kinds of
      credentials—tickets and authenticators.
     </p></dd><dt id="id-1.7.4.6.4.3.2"><span class="term">ticket</span></dt><dd><p>
      A ticket is a per-server credential used by a client to authenticate at a
      server from which it is requesting a service. It contains the name of the
      server, the client's name, the client's Internet address, a time stamp, a
      lifetime, and a random session key. All this data is encrypted using the
      server's key.
     </p></dd><dt id="id-1.7.4.6.4.3.3"><span class="term">authenticator</span></dt><dd><p>
      Combined with the ticket, an authenticator is used to prove that the
      client presenting a ticket is really the one it claims to be. An
      authenticator is built using the client's name, the workstation's IP
      address, and the current workstation's time, all encrypted with the
      session key known only to the client and the relevant server. An
      authenticator can only be used once, unlike a ticket. A client can build
      an authenticator itself.
     </p></dd><dt id="id-1.7.4.6.4.3.4"><span class="term">principal</span></dt><dd><p>
      A Kerberos principal is a unique entity (a user or service) to which it can
      assign a ticket. A principal consists of the following components:
     </p><div class="verbatim-wrap"><pre class="screen"><em class="replaceable">USER</em>/<em class="replaceable">INSTANCE</em>@<em class="replaceable">REALM</em></pre></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="formalpara-title">primary:</span>
         The first part of the principal. In the case of users, this is usually
         the same as the user name.
        </p></li><li class="listitem"><p><span class="formalpara-title">instance <span class="emphasis"><em>(optional)</em></span>:</span>
         Additional information characterizing the
         <span class="emphasis"><em>primary</em></span>. This string is separated from the
         <span class="emphasis"><em>primary</em></span> by a <code class="literal">/</code>.
        </p><p>
        <code class="literal">tux@example.org</code> and
        <code class="literal">tux/admin@example.org</code> can both exist on the same
        Kerberos system and are treated as different principals.
       </p></li><li class="listitem"><p><span class="formalpara-title">realm:</span>
         Specifies the Kerberos realm. Normally, your realm is your domain name in
         uppercase letters.
        </p></li></ul></div></dd><dt id="id-1.7.4.6.4.3.5"><span class="term">mutual authentication</span></dt><dd><p>
      Kerberos ensures that both client and server can be sure of each other's
      identity. They share a session key, which they can use to communicate
      securely.
     </p></dd><dt id="id-1.7.4.6.4.3.6"><span class="term">session key</span></dt><dd><p>
      Session keys are temporary private keys generated by Kerberos. They are
      known to the client and used to encrypt the communication between the
      client and the server for which it requested and received a ticket.
     </p></dd><dt id="id-1.7.4.6.4.3.7"><span class="term">replay</span></dt><dd><p>
      Almost all messages sent in a network can be eavesdropped, stolen, and
      resent. In the Kerberos context, this would be most dangerous if an attacker
      manages to obtain your request for a service containing your ticket and
      authenticator. The attacker could then try to resend it
      (<span class="emphasis"><em>replay</em></span>) to impersonate you. However, Kerberos
      implements several mechanisms to deal with this problem.
     </p></dd><dt id="id-1.7.4.6.4.3.8"><span class="term">server or service</span></dt><dd><p>
      <span class="emphasis"><em>Service</em></span> is used to refer to a specific action to
      perform. The process behind this action is called a
      <span class="emphasis"><em>server</em></span>.
     </p></dd></dl></div></section><section class="sect1" id="sec-security-kerberos-how" data-id-title="How Kerberos works"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.3 </span><span class="title-name">How Kerberos works</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-how">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Kerberos is often called a third-party trusted authentication service, which
   means all its clients trust Kerberos's judgment of another client's identity.
   Kerberos keeps a database of all its users and their private keys.
  </p><p>
   To ensure Kerberos is working correctly, run both the authentication and
   ticket-granting server on a dedicated machine. Make sure that only the
   administrator can access this machine physically and over the network.
   Reduce the (networking) services running on it to the absolute
   minimum—do not even run <code class="systemitem">sshd</code>.
  </p><section class="sect2" id="sec-security-kerberos-how-contact" data-id-title="First contact"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.3.1 </span><span class="title-name">First contact</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-how-contact">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Your first contact with Kerberos is quite similar to any login procedure at a
    normal networking system. Enter your user name. This piece of information
    and the name of the ticket-granting service are sent to the authentication
    server (Kerberos). If the authentication server knows you, it generates a
    random session key for further use between your client and the
    ticket-granting server. Now the authentication server prepares a ticket for
    the ticket-granting server. The ticket contains the following
    information—all encrypted with a session key only the authentication
    server and the ticket-granting server know:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      The names of both, the client and the ticket-granting server
     </p></li><li class="listitem"><p>
      The current time
     </p></li><li class="listitem"><p>
      A lifetime assigned to this ticket
     </p></li><li class="listitem"><p>
      The client's IP address
     </p></li><li class="listitem"><p>
      The newly-generated session key
     </p></li></ul></div><p>
    This ticket is then sent back to the client together with the session key,
    again in encrypted form, but this time the private key of the client is
    used. This private key is only known to Kerberos and the client, because it is
    derived from your user password. Now that the client has received this
    response, you are prompted for your password. This password is converted
    into the key that can decrypt the package sent by the authentication
    server. The package is <span class="quote">“<span class="quote">unwrapped</span>”</span> and password and key are
    erased from the workstation's memory. As long as the lifetime given to the
    ticket used to obtain other tickets does not expire, your workstation can
    prove your identity.
   </p></section><section class="sect2" id="sec-security-kerberos-how-request" data-id-title="Requesting a service"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.3.2 </span><span class="title-name">Requesting a service</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-how-request">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To request a service from any server in the network, the client application
    needs to prove its identity to the server. Therefore, the application
    generates an authenticator. An authenticator consists of the following
    components:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      The client's principal
     </p></li><li class="listitem"><p>
      The client's IP address
     </p></li><li class="listitem"><p>
      The current time
     </p></li><li class="listitem"><p>
      A checksum (chosen by the client)
     </p></li></ul></div><p>
    All this information is encrypted using the session key that the client has
    already received for this special server. The authenticator and the ticket
    for the server are sent to the server. The server uses its copy of the
    session key to decrypt the authenticator, which gives it all the
    information needed about the client requesting its service, to compare it
    to that contained in the ticket. The server checks if the ticket and the
    authenticator originate from the same client.
   </p><p>
    Without any security measures implemented on the server side, this stage of
    the process would be an ideal target for replay attacks. Someone could try
    to resend a request stolen off the net some time before. To prevent this,
    the server does not accept any request with a time stamp and ticket
    received previously. In addition to that, a request with a time stamp
    differing too much from the time the request is received is ignored.
   </p></section><section class="sect2" id="sec-security-kerberos-how-mutual" data-id-title="Mutual authentication"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.3.3 </span><span class="title-name">Mutual authentication</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-how-mutual">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Kerberos authentication can be used in both directions. It is not only a
    question of the client being the one it claims to be. The server should
    also be able to authenticate itself to the client requesting its service.
    Therefore, it sends an authenticator itself. It adds one to the checksum it
    received in the client's authenticator and encrypts it with the session
    key, which is shared between it and the client. The client takes this
    response as a proof of the server's authenticity and they both start
    cooperating.
   </p></section><section class="sect2" id="sec-security-kerberos-how-tgs" data-id-title="Ticket granting—contacting all servers"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.3.4 </span><span class="title-name">Ticket granting—contacting all servers</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-how-tgs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Tickets are designed to be used for one server at a time. Therefore, you
    need to get a new ticket each time you request another service. Kerberos
    implements a mechanism to obtain tickets for individual servers. This
    service is called the <span class="quote">“<span class="quote">ticket-granting service</span>”</span>. The
    ticket-granting service is a service (like any other service mentioned
    before) and uses the same access protocols that have already been outlined.
    Any time an application needs a ticket that has not already been requested,
    it contacts the ticket-granting server. This request consists of the
    following components:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      The requested principal
     </p></li><li class="listitem"><p>
      The ticket-granting ticket
     </p></li><li class="listitem"><p>
      An authenticator
     </p></li></ul></div><p>
    Like any other server, the ticket-granting server now checks the
    ticket-granting ticket and the authenticator. If they are considered valid,
    the ticket-granting server builds a new session key to be used between the
    original client and the new server. Then the ticket for the new server is
    built, containing the following information:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      The client's principal
     </p></li><li class="listitem"><p>
      The server's principal
     </p></li><li class="listitem"><p>
      The current time
     </p></li><li class="listitem"><p>
      The client's IP address
     </p></li><li class="listitem"><p>
      The newly-generated session key
     </p></li></ul></div><p>
    The new ticket has a lifetime, which is either the remaining lifetime of
    the ticket-granting ticket or the default for the service. The lesser of
    both values is assigned. The client receives this ticket and the session
    key, which are sent by the ticket-granting service. But this time the
    answer is encrypted with the session key that came with the original
    ticket-granting ticket. The client can decrypt the response without
    requiring the user's password when a new service is contacted. Kerberos can
    thus acquire ticket after ticket for the client without bothering the user.
   </p></section></section><section class="sect1" id="sec-security-kerberos-users" data-id-title="User view of Kerberos"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.4 </span><span class="title-name">User view of Kerberos</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-users">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Ideally, a user only contact with Kerberos happens during login at the
   workstation. The login process includes obtaining a ticket-granting ticket.
   At logout, a user's Kerberos tickets are automatically destroyed, which makes
   it difficult for anyone else to impersonate this user.
  </p><p>
   The automatic expiration of tickets can lead to a situation when a user's
   login session lasts longer than the maximum lifespan given to the
   ticket-granting ticket (a reasonable setting is 10 hours). However, the user
   can get a new ticket-granting ticket by running <code class="command">kinit</code>.
   Enter the password again and Kerberos obtains access to desired services
   without additional authentication. To get a list of all the tickets silently
   acquired for you by Kerberos, run <code class="command">klist</code>.
  </p><p>
   Here is a short list of applications that use Kerberos authentication. These
   applications can be found under <code class="filename">/usr/lib/mit/bin</code> or
   <code class="filename">/usr/lib/mit/sbin</code> after installing the package
   <code class="systemitem">krb5-apps-clients</code>. They all have the full
   functionality of their common Unix and Linux brothers plus the additional
   bonus of transparent authentication managed by Kerberos:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <code class="command">telnet</code>, <code class="systemitem">telnetd</code>
    </p></li><li class="listitem"><p>
     <code class="command">rlogin</code>
    </p></li><li class="listitem"><p>
     <code class="command">rsh</code>, <code class="command">rcp</code>,
     <code class="systemitem">rshd</code>
    </p></li><li class="listitem"><p>
     <code class="command">ftp</code>, <code class="systemitem">ftpd</code>
    </p></li></ul></div><p>
   You no longer need to enter your password for using these applications
   because Kerberos has already proven your identity. <code class="command">ssh</code>, if
   compiled with Kerberos support, can even forward all the tickets acquired for
   one workstation to another one. If you use <code class="command">ssh</code> to log in
   to another workstation, <code class="command">ssh</code> makes sure that the encrypted
   contents of the tickets are adjusted to the new situation. Simply copying
   tickets between workstations is not sufficient because the ticket contains
   workstation-specific information (the IP address). XDM and GDM offer Kerberos
   support, too. Read more about the Kerberos network applications in
   <em class="citetitle">Kerberos V5 UNIX User's Guide</em> at
   <a class="link" href="https://web.mit.edu/kerberos" target="_blank">https://web.mit.edu/kerberos</a>.
  </p></section><section class="sect1" id="sec-security-kerberos-nfs" data-id-title="Kerberos and NFS"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.5 </span><span class="title-name">Kerberos and NFS</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-nfs">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Most NFS servers can export file systems using any combination of the
   default <span class="quote">“<span class="quote">trust the network</span>”</span> form of security, known as
   <code class="option">sec=sys</code>, and three different levels of Kerberos-based
   security, <code class="option">sec=krb5</code>, <code class="option">sec=krb5i</code>, and
   <code class="option">sec=krb5p</code>. The <code class="option">sec</code> option is set as a
   mount option on the client. It is often the case that the NFS service will
   first be configured and used with <code class="option">sec=sys</code>, and then Kerberos
   can be imposed afterwards. In this case it is likely that the server will be
   configured to support both <code class="option">sec=sys</code> and one of the Kerberos
   levels, and then after all clients have transitioned, the
   <code class="option">sec=sys</code> support will be removed, thus achieving true
   security. The transition to Kerberos should be fairly transparent if done in an
   orderly manner. However there is one subtle detail of NFS behavior that
   works differently when Kerberos is used, and the implications of this need to
   be understood and possibly addressed. See
   <a class="xref" href="cha-security-kerberos.html#sec-security-kerberos-overview-group" title="6.5.1. Group membership">Section 6.5.1, “Group membership”</a>.
  </p><p>
   The three Kerberos levels indicate different levels of security. With more
   security comes a need for more processor power to encrypt and decrypt
   messages. Choosing the right balance is an important consideration when
   planning a roll-out of Kerberos for NFS.
  </p><p>
   <code class="literal">krb5</code> provides only authentication. The server can know
   who sent a request, and the client can know that the server sent a reply. No
   security is provided for the content of the request or reply, so an attacker
   with physical network access could transform the request or reply, or both,
   in various ways to deceive either server or client. They cannot directly
   read or change any file that the authenticated user could not read or
   change, but almost anything is theoretically possible.
  </p><p>
   <code class="literal">krb5i</code> adds integrity checks to all messages. With
   <code class="literal">krb5i</code>, an attacker cannot modify any request or reply,
   but they can view all the data exchanged, and so could discover the content
   of any file that is read.
  </p><p>
   <code class="literal">krb5p</code> adds privacy to the protocol. As well as reliable
   authentication and integrity checking, messages are fully encrypted so an
   attacker can only know that messages were exchanged between client and
   server, and cannot extract other information directly from the message.
   Whether information can be extracted from message timing is a separate
   question that Kerberos does not address.
  </p><section class="sect2" id="sec-security-kerberos-overview-group" data-id-title="Group membership"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.5.1 </span><span class="title-name">Group membership</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-overview-group">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The one behavioral difference between <code class="option">sec=sys</code> and the
    various Kerberos security levels that might be visible is related to group
    membership. In Unix and Linux, each file system access comes from a process
    that is owned by a particular user and has a particular group owner and several
    supplemental groups. Access rights to files can vary based on the
    owner and the various groups.
   </p><p>
    With <code class="option">sec=sys</code>, the user-id, group-id, and a list of up to
    16 supplementary groups are sent to the server in each request.
   </p><p>
    If a user is a member of more than 16 supplementary groups, the extra
    groups are lost and some files may not be accessible over NFS that the user
    would normally expect to have access to. For this reason, most sites that
    use NFS find a way to limit all users to at most 16 supplementary groups.
   </p><p>
    If the user runs the <code class="command">newgrp</code> command or runs a
    set-group-id program, either of which can change the list of groups they
    are a member of, these changes take effect immediately and provide
    different accesses over NFS.
   </p><p>
    With Kerberos, group information is not sent in requests. Only the user
    is identified (using a Kerberos <span class="quote">“<span class="quote">principal</span>”</span>), and the server
    performs a lookup to determine the user ID and group list for that
    principal. This means that if the user is a member of more than 16 groups,
    all of these group memberships will be used in determining file access
    permissions. However it also means that if the user changes a group-id on
    the client in some way, the server will not notice the change and will not
    take it into account in determining access rights.
   </p><p>
    Usually the improvement of having access to more groups brings a
    real benefit, and the loss of not being able to change groups is not
    noticed as it is not widely used. A site administrator considering the use
    of Kerberos should be aware of the difference though and ensure that it will
    not actually cause problems.
   </p></section><section class="sect2" id="sec-security-kerberos-overview-performance" data-id-title="Performance and scalability"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.5.2 </span><span class="title-name">Performance and scalability</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-overview-performance">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Using Kerberos for security requires extra CPU power for encrypting and
    decrypting messages. How much extra CPU power is required and whether the
    difference is noticeable will vary with different hardware and different
    applications. If the server or client are already saturating the available
    CPU power, it is likely that a performance drop will be measurable when
    switching from <code class="literal">sec=sys</code> to Kerberos. If there is spare CPU
    capacity available, it is quite possible that the transition will not
    result in any throughput change. The only way to be sure how much impact
    the use of Kerberos will have is to test your load on your hardware.
   </p><p>
    The only configuration options that might reduce the load will also reduce
    the quality of the protection offered. <code class="option">sec=krb5</code> should
    produce noticeably less load than <code class="option">sec=krb5p</code> but, as
    discussed above, it does not produce very strong security. Similarly it is
    possible to adjust the list of ciphers that Kerberos can choose from, and this
    might change the CPU requirement. However the defaults are carefully chosen
    and should not be changed without similar careful consideration.
   </p><p>
    The other possible performance issue when configuring NFS to use Kerberos
    involves availability of the Kerberos authentication servers, known as the KDC
    or Key Distribution Center.
   </p><p>
    The use of NFS adds load to such servers to the same degree that adding the
    use of Kerberos for any other services adds some load. Every time a given user
    (Kerberos principal) establishes a session with a service, for example by
    accessing files exported by a particular NFS server, the client needs to
    negotiate with the KDC. Once a session key has been negotiated, the client
    server can communicate without further help for many hours, depending on
    details of the Kerberos configuration, particularly the
    <code class="option">ticket_lifetime</code> setting.
   </p><p>
    The concerns most likely to affect the provisioning of Kerberos KDC servers
    are availability and peak usage.
   </p><p>
    As with other core services such as DNS, LDAP or similar name-lookup
    services, having two servers that are reasonably "close" to every client
    provides good availability for modest resources. Kerberos allows for multiple
    KDC servers with flexible models for database propagation, so distributing
    servers as needed around campuses, buildings, and even cabinets is fairly
    straightforward. The best mechanism to ensure each client finds a nearby
    Kerberos server is to use split-horizon DNS with each building (or similar)
    getting different details from the DNS server. If this is not possible,
    then managing the <code class="filename">/etc/krb5.conf</code> file to be different
    at different locations is a suitable alternative.
   </p><p>
    As access to the Kerberos KDC is infrequent, load is only likely to be a
    problem at peak times. If thousands of people all log in between 9:00 and
    9:05, then the servers will receive many more requests-per-minute than they
    might in the middle of the night. The load on the Kerberos server is likely to
    be more than that on an LDAP server, but not orders of magnitude more. A
    sensible guideline is to provision Kerberos replicas in the same manner that
    you provision LDAP replicas, and then monitor performance to determine if
    demand ever exceeds capacity.
   </p></section><section class="sect2" id="sec-security-kerberos-overview-kdc" data-id-title="Master KDC, multiple domains, and trust relationships"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.5.3 </span><span class="title-name">Master KDC, multiple domains, and trust relationships</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-overview-kdc">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    One service of the Kerberos KDC that is not easily distributed is the handling
    of updates, such as password changes and new user creation. These must
    happen at a single master KDC.
   </p><p>
    These updates are not likely to happen with such frequency that any
    significant load will be generated, but availability could be an issue. It
    can be annoying to create a new user or change a password, and
    the master KDC on the other side of the world is temporarily unavailable.
   </p><p>
    When an organization is geographically distributed and has a policy of
    handling administration tasks locally at each site, it can be beneficial to
    create multiple Kerberos domains, one for each administrative center. Each
    domain would then have its own master KDC which would be geographically
    local. Users in one domain can still get access to resources in another
    domain by setting up trust relationships between domains.
   </p><p>
    The easiest arrangement for multiple domains is to have a global
    domain (for example, EXAMPLE.COM) and various local domains (for example,
    ASIA.EXAMPLE.COM, EUROPE.EXAMPLE.COM). If the global domain is
    configured to trust each local domain, and each local domain is
    configured to trust the global domain, then fully transitive trust
    is available between any pair of domains, and any principal can
    establish a secure connection with any service. Ensuring
    appropriate access rights to resources, for example files provided
    by that service, will be dependent on the user name lookup service
    used, and the functionality of the NFS file server, and is beyond
    the scope of this document.
   </p></section></section><section class="sect1" id="sec-security-kerberos-info" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.6 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="cha-security-kerberos.html#sec-security-kerberos-info">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_kerberos.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The official site of MIT Kerberos is
   <a class="link" href="https://web.mit.edu/kerberos" target="_blank">https://web.mit.edu/kerberos</a>. There, find links to any
   other relevant resource concerning Kerberos, including Kerberos installation,
   user, and administration guides.
  </p><p>
   The book <span class="emphasis"><em>Kerberos—A Network Authentication System</em></span>
   by Brian Tung (ISBN 0-201-37924-4) offers extensive information.
  </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-security-ldap.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 5 </span>LDAP with 389 Directory Server</span></a> </div><div><a class="pagination-link next" href="cha-security-ad.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 7 </span>Active Directory support</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-security-kerberos.html#sec-security-kerberos-overview"><span class="title-number">6.1 </span><span class="title-name">Conceptual overview</span></a></span></li><li><span class="sect1"><a href="cha-security-kerberos.html#sec-security-kerberos-terms"><span class="title-number">6.2 </span><span class="title-name">Kerberos terminology</span></a></span></li><li><span class="sect1"><a href="cha-security-kerberos.html#sec-security-kerberos-how"><span class="title-number">6.3 </span><span class="title-name">How Kerberos works</span></a></span></li><li><span class="sect1"><a href="cha-security-kerberos.html#sec-security-kerberos-users"><span class="title-number">6.4 </span><span class="title-name">User view of Kerberos</span></a></span></li><li><span class="sect1"><a href="cha-security-kerberos.html#sec-security-kerberos-nfs"><span class="title-number">6.5 </span><span class="title-name">Kerberos and NFS</span></a></span></li><li><span class="sect1"><a href="cha-security-kerberos.html#sec-security-kerberos-info"><span class="title-number">6.6 </span><span class="title-name">More information</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>