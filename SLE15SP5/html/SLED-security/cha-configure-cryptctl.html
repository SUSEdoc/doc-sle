<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLED 15 SP5 | Security and Hardening Guide | Storage encryption for hosted applications with cryptctl</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Storage encryption for hosted applications with cryptc…"/>
<meta name="description" content="Databases and similar applications are often hosted on external servers that are serviced by third-party staff. Certain data center maintenance tasks…"/>
<meta name="product-name" content="SUSE Linux Enterprise Desktop"/>
<meta name="product-number" content="15 SP5"/>
<meta name="book-title" content="Security and Hardening Guide"/>
<meta name="chapter-title" content="Chapter 13. Storage encryption for hosted applications with cryptctl"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Desktop 15 SP5"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Security and Hardening Guide"/>
<meta property="og:description" content="Implement system security and hardening for SLED"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Security and Hardening Guide"/>
<meta name="twitter:description" content="Implement system security and hardening for SLED"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Storage encryption for hosted applications with cryptctl",
  
    "description": "Storage encryption for hosted applications with cryptctl",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-05-27T00:00+02:00",
      
    "datePublished": "2023-06-20T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-security-cryptofs.html" title="Chapter 12. Encrypting partitions and files"/><link rel="next" href="sec-sec-user-management.html" title="Chapter 14. User management"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Security and Hardening Guide</a><span> / </span><a class="crumb" href="part-local-security.html">Local security</a><span> / </span><a class="crumb" href="cha-configure-cryptctl.html">Storage encryption for hosted applications with cryptctl</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Security and Hardening Guide</div><ol><li><a href="preface-security.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="cha-security.html" class=" "><span class="title-number">1 </span><span class="title-name">Security and confidentiality</span></a></li><li><a href="part-auth.html" class="has-children "><span class="title-number">I </span><span class="title-name">Authentication</span></a><ol><li><a href="cha-pam.html" class=" "><span class="title-number">2 </span><span class="title-name">Authentication with PAM</span></a></li><li><a href="cha-nis.html" class=" "><span class="title-number">3 </span><span class="title-name">Using NIS</span></a></li><li><a href="cha-security-auth.html" class=" "><span class="title-number">4 </span><span class="title-name">Setting up authentication clients using YaST</span></a></li><li><a href="cha-security-ldap.html" class=" "><span class="title-number">5 </span><span class="title-name">LDAP with 389 Directory Server</span></a></li><li><a href="cha-security-kerberos.html" class=" "><span class="title-number">6 </span><span class="title-name">Network authentication with Kerberos</span></a></li><li><a href="cha-security-ad.html" class=" "><span class="title-number">7 </span><span class="title-name">Active Directory support</span></a></li><li><a href="cha-security-freeradius.html" class=" "><span class="title-number">8 </span><span class="title-name">Setting up a freeRADIUS server</span></a></li></ol></li><li class="active"><a href="part-local-security.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Local security</span></a><ol><li><a href="cha-physical-security.html" class=" "><span class="title-number">9 </span><span class="title-name">Physical security</span></a></li><li><a href="sec-sec-software-management.html" class=" "><span class="title-number">10 </span><span class="title-name">Software management</span></a></li><li><a href="sec-sec-file-management.html" class=" "><span class="title-number">11 </span><span class="title-name">File management</span></a></li><li><a href="cha-security-cryptofs.html" class=" "><span class="title-number">12 </span><span class="title-name">Encrypting partitions and files</span></a></li><li><a href="cha-configure-cryptctl.html" class=" you-are-here"><span class="title-number">13 </span><span class="title-name">Storage encryption for hosted applications with cryptctl</span></a></li><li><a href="sec-sec-user-management.html" class=" "><span class="title-number">14 </span><span class="title-name">User management</span></a></li><li><a href="cha-sec-cron-at.html" class=" "><span class="title-number">15 </span><span class="title-name">Restricting <code class="systemitem">cron</code> and <code class="systemitem">at</code></span></a></li><li><a href="cha-spectre.html" class=" "><span class="title-number">16 </span><span class="title-name">Spectre/Meltdown checker</span></a></li><li><a href="cha-security-yast-security.html" class=" "><span class="title-number">17 </span><span class="title-name">Configuring security settings with YaST</span></a></li><li><a href="cha-security-polkit.html" class=" "><span class="title-number">18 </span><span class="title-name">The Polkit authentication framework</span></a></li><li><a href="cha-security-acls.html" class=" "><span class="title-number">19 </span><span class="title-name">Access control lists in Linux</span></a></li><li><a href="cha-aide.html" class=" "><span class="title-number">20 </span><span class="title-name">Intrusion detection with AIDE</span></a></li></ol></li><li><a href="part-network-security.html" class="has-children "><span class="title-number">III </span><span class="title-name">Network security</span></a><ol><li><a href="cha-xauth.html" class=" "><span class="title-number">21 </span><span class="title-name">X Window System and X authentication</span></a></li><li><a href="cha-ssh.html" class=" "><span class="title-number">22 </span><span class="title-name">Securing network operations with OpenSSH</span></a></li><li><a href="cha-security-firewall.html" class=" "><span class="title-number">23 </span><span class="title-name">Masquerading and firewalls</span></a></li><li><a href="cha-security-vpnserver.html" class=" "><span class="title-number">24 </span><span class="title-name">Configuring a VPN server</span></a></li><li><a href="cha-security-xca.html" class=" "><span class="title-number">25 </span><span class="title-name">Managing a PKI with XCA, X certificate and key manager</span></a></li><li><a href="cha-sec-sysctl.html" class=" "><span class="title-number">26 </span><span class="title-name">Improving network security with <code class="command">sysctl</code> variables</span></a></li></ol></li><li><a href="part-compliance.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Regulations and Compliance</span></a><ol><li><a href="cha-common-criteria.html" class=" "><span class="title-number">27 </span><span class="title-name">Common Criteria</span></a></li><li><a href="cha-security-fips.html" class=" "><span class="title-number">28 </span><span class="title-name">Enabling compliance with FIPS 140-3</span></a></li></ol></li><li><a href="part-apparmor.html" class="has-children "><span class="title-number">V </span><span class="title-name">Confining privileges with <span class="phrase">AppArmor</span></span></a><ol><li><a href="cha-apparmor-intro.html" class=" "><span class="title-number">29 </span><span class="title-name">Introducing <span class="phrase">AppArmor</span></span></a></li><li><a href="cha-apparmor-start.html" class=" "><span class="title-number">30 </span><span class="title-name">Getting started</span></a></li><li><a href="cha-apparmor-concept.html" class=" "><span class="title-number">31 </span><span class="title-name">Immunizing programs</span></a></li><li><a href="cha-apparmor-profiles.html" class=" "><span class="title-number">32 </span><span class="title-name">Profile components and syntax</span></a></li><li><a href="cha-apparmor-repos.html" class=" "><span class="title-number">33 </span><span class="title-name"><span class="phrase">AppArmor</span> profile repositories</span></a></li><li><a href="cha-apparmor-yast.html" class=" "><span class="title-number">34 </span><span class="title-name">Building and managing profiles with YaST</span></a></li><li><a href="cha-apparmor-commandline.html" class=" "><span class="title-number">35 </span><span class="title-name">Building profiles from the command line</span></a></li><li><a href="cha-apparmor-hat.html" class=" "><span class="title-number">36 </span><span class="title-name">Profiling your Web applications using ChangeHat</span></a></li><li><a href="cha-apparmor-pam.html" class=" "><span class="title-number">37 </span><span class="title-name">Confining users with <code class="systemitem">pam_apparmor</code></span></a></li><li><a href="cha-apparmor-managing.html" class=" "><span class="title-number">38 </span><span class="title-name">Managing profiled applications</span></a></li><li><a href="cha-apparmor-support.html" class=" "><span class="title-number">39 </span><span class="title-name">Support</span></a></li><li><a href="cha-apparmor-glossary.html" class=" "><span class="title-number">40 </span><span class="title-name"><span class="phrase">AppArmor</span> glossary</span></a></li></ol></li><li><a href="part-audit.html" class="has-children "><span class="title-number">VI </span><span class="title-name">The Linux Audit Framework</span></a><ol><li><a href="cha-audit-comp.html" class=" "><span class="title-number">41 </span><span class="title-name">Understanding Linux audit</span></a></li><li><a href="cha-audit-setup.html" class=" "><span class="title-number">42 </span><span class="title-name">Setting up the Linux audit framework</span></a></li><li><a href="cha-audit-scenarios.html" class=" "><span class="title-number">43 </span><span class="title-name">Introducing an audit rule set</span></a></li><li><a href="cha-audit-moreinfo.html" class=" "><span class="title-number">44 </span><span class="title-name">Useful resources</span></a></li></ol></li><li><a href="bk05apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-configure-cryptctl" data-id-title="Storage encryption for hosted applications with cryptctl"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP5</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">13 </span><span class="title-name">Storage encryption for hosted applications with cryptctl</span></span> <a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Databases and similar applications are often hosted on external
    servers that are serviced by third-party staff. Certain data center
    maintenance tasks require third-party staff to directly access affected
    systems. In such cases, privacy requirements necessitate disk encryption.
   </p><p>
    <code class="command">cryptctl</code> allows encrypting sensitive directories using
    LUKS and offers the following additional features:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Encryption keys are located on a central server, which can be located on
      customer premises.
     </p></li><li class="listitem"><p>
      Encrypted partitions are automatically remounted after an unplanned
      reboot.
     </p></li></ul></div><p>
   <code class="command">cryptctl</code> consists of two components:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     A client is a machine that has one or more encrypted partitions but does
     not permanently store the necessary key to decrypt those partitions.
     For example, clients can be cloud or otherwise hosted machines.
    </p></li><li class="listitem"><p>
     The server holds encryption keys that can be requested by clients to
     unlock encrypted partitions.
    </p><p>
     You can also set up the <code class="command">cryptctl</code> server to store
     encryption keys on a KMIP 1.3-compatible (Key Management
     Interoperability Protocol) server. In that case, the
     <code class="command">cryptctl</code> server does not store the encryption keys of
     clients and is dependent upon the KMIP-compatible server to provide
     these.
    </p></li></ul></div><div id="id-1.7.5.6.7" data-id-title="cryptctl Server maintenance" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: <code class="command">cryptctl</code> Server maintenance</div><p>
    Since the <code class="command">cryptctl</code> server manages timeouts for the
    encrypted disks and, depending on the configuration, can also hold
    encryption keys, it
    should be under your direct control and managed only by trusted
    personnel.
   </p><p>
    Additionally, it should be backed up regularly. Losing the server's data
    means losing access to encrypted partitions on the clients.
   </p></div><p>
   To handle encryption, <code class="command">cryptctl</code> uses LUKS with
   aes-xts-256 encryption and 512-bit keys. Encryption keys are transferred
   using TLS with certificate verification.
  </p><div class="figure" id="fig-cryptctl-retrieve"><div class="figure-contents"><div class="mediaobject"><a href="images/cryptctl-keyretrieval.png"><img src="images/cryptctl-keyretrieval.png" alt="The client asks the server for the disk decryption key, the server responds" title="The client asks the server for the disk decryption key, the server responds"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 13.1: </span><span class="title-name">Key retrieval with <code class="command">cryptctl</code> (model without connection to KMIP server) </span></span><a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#fig-cryptctl-retrieve">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div></div><div id="id-1.7.5.6.10" data-id-title="Install cryptctl" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Install <code class="command">cryptctl</code></div><p>
    Before continuing, make sure the package <span class="package">cryptctl</span> is
    installed on all machines you intend to set up as servers or clients.
   </p></div><section class="sect1" id="sec-configure-cryptctl-server" data-id-title="Setting up a cryptctl server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.1 </span><span class="title-name">Setting up a <code class="command">cryptctl</code> server</span></span> <a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#sec-configure-cryptctl-server">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Before you can define a machine as a <code class="command">cryptctl</code> client,
    you need to set up a machine as a <code class="command">cryptctl</code> server.
   </p><p>
    Before beginning, choose whether to use a self-signed certificate to
    secure communication between the server and clients. If not, generate a
    TLS certificate for the server and have it signed by a certificate
    authority.
   </p><p>
    Additionally, you can have clients authenticate to the server using
    certificates signed by a certificate authority. To use this extra
    security measure, make sure to have a CA certificate at hand before
    starting this procedure.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      As <code class="systemitem">root</code>, run:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">cryptctl init-server</code></pre></div></li><li class="step"><p>
      Answer each of the following prompts and press <span class="keycap">Enter</span>
      after every answer. If there is a default answer, it is shown in square
      brackets at the end of the prompt.
     </p><ol type="a" class="substeps"><li class="step"><p>
        Create a strong password, and protect it well. This password
        unlocks all partitions that are registered on the server.
       </p></li><li class="step"><p>
        Specify the path to a PEM-encoded TLS certificate or certificate chain
        file or leave the field empty to create a self-signed certificate. If
        you specify a path, use an absolute path.
       </p></li><li class="step"><p>
        If you want the server to be identified by a host name other than the
        default shown, specify a host name. <code class="command">cryptctl</code> generates
        certificates which include the host name.
       </p></li><li class="step"><p>
        Specify the IP address that belongs to the network interface that you
        want to listen on for decryption requests from the clients, then set
        a port number (the default is port 3737).
       </p><p>
        The default IP address setting,
        <code class="systemitem">0.0.0.0</code> means that
        <code class="command">cryptctl</code> listens on
        all network interfaces for client requests using IPv4.
       </p></li><li class="step"><p>
        Specify a directory on the server that holds the decryption keys
        for clients.
       </p></li><li class="step"><p>
        Specify whether clients need to authenticate to the server using a
        TLS certificate. If you choose <span class="guimenu">No</span>, this means that
        clients authenticate using disk UUIDs only. (However, communication
        is encrypted using the server certificate in any case.)
       </p><p>
        If you choose <span class="guimenu">Yes</span>, pick a PEM-encoded certificate
        authority to use for signing client certificates.
       </p></li><li class="step"><p>
        Specify whether to use a KMIP 1.3-compatible server (or multiple such
        servers) to store encryption keys of clients. If you choose this
        option, provide the host names and ports for one or multiple
        KMIP-compatible servers.
       </p><p>
        Additionally, provide a user name, password, a CA certificate for the
        KMIP server, and a client identity certificate for the
        <code class="command">cryptctl</code> server.
       </p><div id="id-1.7.5.6.11.5.2.2.7.3" data-id-title="No easy reconfiguration of KMIP setting" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: No easy reconfiguration of KMIP setting</div><p>
         The setting to use a KMIP server cannot easily be changed later. To
         change this setting, both the <code class="command">cryptctl</code> server and
         its clients need to be configured afresh.
        </p></div></li><li class="step"><p>
        Finally, configure an SMTP server for e-mail notifications for
        encryption and decryption requests or leave the prompt empty to skip
        setting up e-mail notifications.
       </p><div id="id-1.7.5.6.11.5.2.2.8.2" data-id-title="Password-protected servers" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Password-protected servers</div><p>
         <code class="command">cryptctl</code> currently cannot send e-mail using
         authentication-protected SMTP servers. If that is necessary, set up
         a local SMTP proxy.
        </p></div></li><li class="step"><p>
        When asked whether to start the <code class="command">cryptctl</code> server,
        enter <code class="literal">y</code>.
       </p></li></ol></li><li class="step"><p>
      To check the status of the service
      <code class="systemitem">cryptctl-server</code>, use:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">systemctl status cryptctl-server</code></pre></div></li></ol></div></div><p>
    To reconfigure the server later, do either of the following:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Run the command <code class="command">cryptctl init-server</code> again.
      <code class="command">cryptctl</code> proposes the existing settings as
      the defaults, so that you only need to specify the values that you want
      to change.
     </p></li><li class="listitem"><p>
      Make changes directly in the configuration file
      <code class="filename">/etc/sysconfig/cryptctl-server</code>.
     </p><p>
      However, to avoid issues, do not change the settings
      <code class="option">AUTH_PASSWORD_HASH</code> and
      <code class="option">AUTH_PASSWORD_SALT</code> manually. The values of these
      options need to be calculated correctly.
     </p></li></ul></div></section><section class="sect1" id="sec-configure-cryptctl-client" data-id-title="Setting up a cryptctl client"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.2 </span><span class="title-name">Setting up a <code class="command">cryptctl</code> client</span></span> <a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#sec-configure-cryptctl-client">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The following interactive setup of <code class="command">cryptctl</code> is
    currently the only setup method.
   </p><p>
    Make sure the following preconditions are fulfilled:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      A <code class="command">cryptctl</code> server is available over the network.
     </p></li><li class="listitem"><p>
      There is a directory to encrypt.
     </p></li><li class="listitem"><p>
      The client machine has an empty partition available that is large
      enough to fit the directory to encrypt.
     </p></li><li class="listitem"><p>
      When using a self-signed certificate, the certificate
      (<code class="filename">*.crt</code> file) generated on the server is
      available locally on the client. Otherwise, the certificate authority
      of the server certificate must be trusted by the client.
     </p></li><li class="listitem"><p>
      If you set up the server to require clients to authenticate using a
      client certificate, prepare a TLS certificate for the client which is
      signed by the CA certificate you chose for the server.
     </p></li></ul></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      As <code class="systemitem">root</code>, run:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">cryptctl encrypt</code></pre></div></li><li class="step"><p>
      Answer each of the following prompts and press <span class="keycap">Enter</span>
      after every answer. If there is a default answer, it is shown in square
      brackets at the end of the prompt.
     </p><ol type="a" class="substeps"><li class="step"><p>
        Specify the host name and port to connect to on the
        <code class="command">cryptctl</code> server.
       </p></li><li class="step"><p>
        If you configured the server to have clients authenticate to it using a
        TLS certificate, specify a certificate and a key file for the client.
        The client certificate must be signed by the certificate
        authority chosen when setting up the server.
       </p></li><li class="step"><p>
        Specify the absolute path to the server certificate (the
        <code class="filename">*.crt</code> file).
       </p></li><li class="step"><p>
        Enter the encryption password that you specified when setting up the
        server.
       </p></li><li class="step"><p>
        Specify the path to the directory to encrypt. Specify the path to the
        empty partition that contains the encrypted content of the
        directory.
       </p></li><li class="step"><p>
        Specify the number of machines that are allowed to decrypt the
        partition simultaneously.
       </p><p>
        Then specify the timeout in seconds before additional machines are
        allowed to decrypt the partition after the last vital sign was
        received from the client or clients.
       </p><p>
        When a machine unexpectedly stops working and then reboots, it needs to
        be able to unlock its partitions again. That means this timeout
        should be set to a time slightly shorter than the reboot time of the
        client.
       </p><div id="id-1.7.5.6.12.5.2.2.6.4" data-id-title="Timeout length" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Timeout length</div><p>
         If the time is set too long, the machine cannot decrypt
         encrypted partitions on the first try. <code class="command">cryptctl</code>
         then continues to periodically check whether the encryption key has
         become available. However, this introduces a delay.
        </p><p>
         If the timeout is set too short, machines with a copy of
         the encrypted partition have an increased chance of unlocking the
         partition first.
        </p></div></li></ol></li><li class="step"><p>
      To start encryption, enter <code class="literal">yes</code>.
     </p><p>
      <code class="command">cryptctl</code> encrypts the specified directory to
      the previously empty partition and then mounts the newly encrypted
      partition. The file system type is the same type as the
      original unencrypted file system.
     </p><p>
      Before creating the encrypted partition,
      <code class="command">cryptctl</code> moves the unencrypted content of the
      original directory to a location prefixed with
      <code class="literal">cryptctl-moved-</code>.
     </p></li><li class="step"><p>
      To check that the directory is indeed mounted correctly, use:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">lsblk -o NAME,MOUNTPOINT,UUID</code>
NAME                        MOUNTPOINT          UUID
[...]
sdc
└─sdc1                                          <em class="replaceable">PARTITION_UUID</em>
  └─cryptctl-unlocked-sdc1  /secret-partition   <em class="replaceable">UNLOCKED_UUID</em></pre></div><p>
      <code class="command">cryptctl</code> identifies the encrypted partition by its
      UUID. For the previous example, that is the UUID displayed next to
      <code class="literal">sdc1</code>.
     </p><p>
      On the server, you can check whether the directory was decrypted using
      <code class="command">cryptctl</code>.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">cryptctl list-keys</code></pre></div><p>
      For a successfully decrypted partition, you see output like:
     </p><div class="verbatim-wrap"><pre class="screen">2019/06/06 15:50:00 ReloadDB: successfully loaded database of 1 records
Total: 1 records (date and time are in zone EDT)
Used By     When                 UUID  Max.Users  Num.Users  Mount Point
<em class="replaceable">IP_ADDRESS</em>  2019-06-06 15:00:50  <em class="replaceable">UUID</em>  1          1          /secret-partition</pre></div><p>
      For a partition not decrypted successfully, you see output like:
     </p><div class="verbatim-wrap"><pre class="screen">2019/06/06 15:50:00 ReloadDB: successfully loaded database of 1 records
Total: 1 records (date and time are in zone EDT)
Used By      When                 UUID  Max.Users  Num.Users  Mount Point
             2019-06-06 15:00:50  <em class="replaceable">UUID</em>  1          1          /secret-partition</pre></div><p>See the difference in the empty <code class="literal">Used by</code> column.</p><p>
      Verify that the UUID shown is that of the previously encrypted partition.
     </p></li><li class="step"><p>
      After verifying that the encrypted partition works, delete the
      unencrypted content from the client. For example, use <code class="command">rm</code>.
      For more
      safety, overwrite the content of the files before deleting them, for
      example, using <code class="command">shred -u</code>.
     </p><div id="id-1.7.5.6.12.5.5.2" data-id-title="shred does not guarantee that data is erased" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: <code class="command">shred</code> does not guarantee that data is erased</div><p>
       Depending on the type of storage media, using
       <code class="command">shred</code> is not a guarantee that all data is
       removed. In particular, SSDs employ wear leveling
       strategies that render <code class="command">shred</code> ineffective.
      </p></div></li></ol></div></div><p>
    The configuration for the connection from client to server is stored in
    <code class="filename">/etc/sysconfig/cryptctl-client</code> and can be edited
    manually.
   </p><p>
    The server stores an encryption key for the client partition in
    <code class="filename">/var/lib/cryptctl/keydb/<em class="replaceable">PARTITION_UUID</em></code>.
   </p></section><section class="sect1" id="sec-cryptctl-luks-fstab" data-id-title="Configuring /etc/fstab for LUKS volumes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.3 </span><span class="title-name">Configuring /etc/fstab for LUKS volumes</span></span> <a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#sec-cryptctl-luks-fstab">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When configuring the mount point for a new file system encrypted with
    LUKS, YaST uses, by default, the name of the encrypted device
    in <code class="filename">/etc/fstab</code>.
    (For example, <code class="filename">/dev/mapper/cr_sda1</code>.) Using the
    device name, rather than the UUID or volume label, results in a more robust
    operation of systemd generators and other related tools.
   </p><p>
    You have the option to adjust that default behavior for each device,
    either with the Expert Partitioner in the installer, or via AutoYaST.
   </p><p>
    This change does not affect upgrades or any other scenario in which the
    mount points are already defined in <code class="filename">/etc/fstab</code>.
    Only newly created mount points are affected, such as during the
    installation of a new system, or creating new partitions on running
    systems.
   </p></section><section class="sect1" id="sec-configure-cryptctl-status" data-id-title="Checking partition unlock status using server-side commands"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.4 </span><span class="title-name">Checking partition unlock status using server-side commands</span></span> <a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#sec-configure-cryptctl-status">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When a <code class="command">cryptctl</code> client is active, it sends a
    <span class="quote">“<span class="quote">heartbeat</span>”</span> to the <code class="command">cryptctl</code> server every
    10 seconds. If the server does not receive a heartbeat from the client
    for the length of the timeout configured during the client setup, the
    server assumes that the client is offline. It then allows another
    client to connect (or allow the same client to reconnect after a reboot).
   </p><p>
    To see the usage status of all keys, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">cryptctl list-keys</code></pre></div><p>
    The information under <code class="literal">Num. Users</code> shows whether the key
    is currently in use. To see more detail on a single key, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">cryptctl show-key <em class="replaceable">UUID</em></code></pre></div><p>
    This command shows information about mount point, mount options,
    usage options, the last retrieval of the key and the last three
    heartbeats from clients.
   </p><p>
    Additionally, you can use <code class="command">journalctl</code> to find logs of
    when keys were retrieved.
   </p></section><section class="sect1" id="sec-configure-cryptctl-unlock" data-id-title="Unlocking encrypted partitions manually"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.5 </span><span class="title-name">Unlocking encrypted partitions manually</span></span> <a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#sec-configure-cryptctl-unlock">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    There are two ways of unlocking a partition manually, both of which are run
    on a client:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="formalpara-title">Online unlocking. </span>
       Online unlocking allows circumventing timeout or user limitations.
       This method can be used when there is a network connection between
       client and server but the client could not (yet) unlock the partition
       automatically. This method unlocks all encrypted
       partitions on a machine.
      </p><p>
      To use it, run <code class="command">cryptctl online-unlock</code>. Be prepared to
      enter the password specified when setting up the server.
     </p></li><li class="listitem"><p><span class="formalpara-title">Offline unlocking. </span>
       This method can be used when a client cannot or must not be brought
       online to communicate with its server. The encryption key from the
       server must still be available. This method is meant as a last resort
       only and can only unlock a single partition at a time.
      </p><p>
      To use it, run <code class="command">cryptctl offline-unlock</code>. The
      server's key file for the requisite partition
      (<code class="filename">/var/lib/cryptctl/keydb/<em class="replaceable">PARTITION_UUID</em></code>)
      needs to be available on the client.
     </p></li></ul></div></section><section class="sect1" id="sec-configure-cryptctl-lock" data-id-title="Maintenance downtime procedure"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.6 </span><span class="title-name">Maintenance downtime procedure</span></span> <a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#sec-configure-cryptctl-lock">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To ensure that partitions cannot be decrypted during a maintenance
    downtime, turn off the client and disable the
    <code class="command">cryptctl</code> server. You can do so by either:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Stopping the service
      <code class="systemitem">cryptctl-server</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">systemctl stop cryptctl-server</code></pre></div></li><li class="listitem"><p>
      Unplugging the <code class="command">cryptctl</code> server from the network.
     </p></li></ul></div></section><section class="sect1" id="sec-configure-cryptctl-ha" data-id-title="Setting up an HA environment for cryptctl-server service"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.7 </span><span class="title-name">Setting up an HA environment for cryptctl-server service</span></span> <a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#sec-configure-cryptctl-ha">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To avoid downtimes when the cryptctl-server needs to be stopped for
   maintenance or suffers a damage, it is strongly recommended to set up the
   cryptctl-server in an HA environment. You need at least a two-node High Availability cluster for
   this.
   The following setup shows how to create a two-node HA cluster for cryptctl-server using self-signed certificates.
  </p><p>
   Make sure the following preconditions are fulfilled:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     At least two servers which have SUSE Linux Enterprise Server and the High Availability extension installed
     are available. All servers must also have the cryptctl package installed.
     All servers can reach each other via SSH.
    </p></li><li class="listitem"><p>
     If you set up a new cluster, you need an additional IP address for the
     HA Web Console of the cluster (<em class="replaceable">AdminIP</em>).
    </p></li><li class="listitem"><p>
     A separate IP address (<em class="replaceable">CrypServerIP</em>) is reserved for the cryptctl-server.
    </p></li><li class="listitem"><p>
     A separate dns-name (<em class="replaceable">CrypServerHostName</em>) is reserved for the cryptctl-server and is resolved to the above IP address.
    </p></li><li class="listitem"><p>
     An HA-enabled block device or NFS share is available to store the keys.
    </p><p>
     In our example, we use an NFS share:
     <code class="filename">nfs-server.example.org/data/cryptctl-keys</code>. It is mounted to the standard location <code class="filename">/var/lib/cryptctl/keydb</code>.
    </p></li><li class="listitem"><p>
     It is strongly recommended to use an SBD device.
    </p></li></ul></div><div class="procedure" id="id-1.7.5.6.17.5" data-id-title="Setting up a cryptctl two-node HA cluster"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 13.1: </span><span class="title-name">Setting up a cryptctl two-node HA cluster </span></span><a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#id-1.7.5.6.17.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Log in to <em class="replaceable">Node1</em> as <code class="systemitem">root</code>.
    </p></li><li class="step"><p>
     Set up a cryptctl-server as described in <a class="xref" href="cha-configure-cryptctl.html#sec-configure-cryptctl-server" title="13.1. Setting up a cryptctl server">Section 13.1, “Setting up a <code class="command">cryptctl</code> server”</a>. Use the following parameters:
    </p><ol type="a" class="substeps"><li class="step"><p>
       To create the certificate, use the dedicated hostname
       <em class="replaceable">CrypServerHostName</em> of the cryptctl server.
       Do <span class="emphasis"><em>not</em></span> use the host name of the host.
      </p></li><li class="step"><p>
       Use the dedicated IP address <em class="replaceable">CrypServerIP</em> of
       the cryptctl server. Do <span class="emphasis"><em>not</em></span> use the default IP address setting.
      </p></li><li class="step"><p>
       Do not configure a KMIP server.
      </p></li><li class="step"><p>
       When asked whether to start the <code class="command">cryptctl</code> server, enter <code class="literal">n</code>.
      </p></li></ol></li><li class="step"><p>
     Set up a two-node HA cluster:
    </p><ol type="a" class="substeps"><li class="step"><div id="id-1.7.5.6.17.5.4.2.1.1" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
        <em class="replaceable">Node1</em> must be the server where you have configured the cryptctl server.</p></div><p>On the machine where you have configured the cryptctl server, set up the first node as follows:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">crm cluster init -i <em class="replaceable">NetDev</em> -A <em class="replaceable">AdminIP</em> -n <em class="replaceable">ClusterName</em></code></pre></div></li><li class="step"><p>
       Log in via SSH to <em class="replaceable">Node2</em> and join the cluster
       from there:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">ssh <em class="replaceable">Node2</em></code>
<code class="prompt root"># </code><code class="command">crm cluster join -y <em class="replaceable">Node1</em></code></pre></div></li><li class="step"><p>
       For more information, also see the <a class="link" href="https://documentation.suse.com/sle-ha/html/SLE-HA-all/article-installation.html" target="_blank">Installation and Setup Quick Start</a>.
      </p></li></ol></li><li class="step"><p>
     Set up the resource group for the cryptctl server:
    </p></li><li class="step"><ol type="a" class="substeps"><li class="step"><p>
       You can set up all needed resource agents and copy all files to all
       nodes with the cryptcl crm-shell-script in one step. We strongly recommend
       that you verify the setup in the first step:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">crm script verify cryptctl  \
cert-path=/etc/cryptctl/servertls/<em class="replaceable">CertificateFileName</em> \
cert-key-path=/etc/cryptctl/servertls/<em class="replaceable">CertificateKeyFileName</em> \
virtual-ip:ip=<em class="replaceable">CrypServerIP</em> \
filesystem:device=<em class="replaceable">DevicePath</em>
filesystem:fstype=<em class="replaceable">FileSystemType</em></code></pre></div></li><li class="step"><p>
       If the check was successful, set up the cluster group by running the
       script as follows:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">crm script verify cryptctl  \
cert-path=/etc/cryptctl/servertls/<em class="replaceable">CertificateFileName</em> \
cert-key-path=/etc/cryptctl/servertls/<em class="replaceable">CertificateKeyFileName</em> \
virtual-ip:ip=<em class="replaceable">CrypServerIP</em> \
filesystem:device=<em class="replaceable">DevicePath</em>
filesystem:fstype=<em class="replaceable">FileSystemType</em></code></pre></div></li></ol></li></ol></div></div><div class="table" id="tab-parameters" data-id-title="List of all parameters to define the resource group with the cryptctl crm script."><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 13.1: </span><span class="title-name">List of all parameters to define the resource group with the cryptctl crm script. </span></span><a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#tab-parameters">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="name"/><col class="obligytory"/><col class="default"/><col class="description"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>Name</p>
          </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>Mandatory</p>
          </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>Default Value</p>
          </th><th style="border-bottom: 1px solid ; ">
            <p>Description</p>
          </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            id
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            no
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            cryptctl
          </td><td style="border-bottom: 1px solid ; ">
            Name of the resource group.
          </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            cert-path
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            yes
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          </td><td style="border-bottom: 1px solid ; ">
            The full path to the created certificate.
          </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            cert-key-path
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            yes
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          </td><td style="border-bottom: 1px solid ; ">
            The full path to the created certificate key.
          </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            virtual-ip:id
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            no
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
           cryptctl-vip
          </td><td style="border-bottom: 1px solid ; ">
            The ID of the virtual IP resource for the cryptctl server.
          </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            virtual-ip:ip
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            yes
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          </td><td style="border-bottom: 1px solid ; ">
            The IP address of the cryptctl server.
          </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            virtual-ip:nic
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            no
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
           Detected by the virtual-ip resource agent.
          </td><td style="border-bottom: 1px solid ; ">
            The network device the cryptctl server should be listening on. Only required if the device cannot be detected from the IP address.
          </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            virtual-ip:cidr_netmask
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            no
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            Detected by the virtual-ip resource agent.
          </td><td style="border-bottom: 1px solid ; ">
            The numeric netmask of the IP address of the cryptctl server. Only required if the netmask cannot be detected from the IP address.
          </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            virtual-ip:broadcast
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            no
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            Detected by the virtual-ip resource agent.
          </td><td style="border-bottom: 1px solid ; ">
            The broadcast address of the IP address of the cryptctl server. Only required if this cannot be detected from the IP address.
          </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            filesystem:id
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            no
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
           cryptctl-filesystem
          </td><td style="border-bottom: 1px solid ; ">
            The ID of the filesystem resource containing the disk encryption keys and records.
          </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            filesystem:device
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            yes
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          </td><td style="border-bottom: 1px solid ; ">
            The device containing the filesystem. This can be a block device
            like <code class="filename">/dev/sda<em class="replaceable">...</em></code> or an NFS share path
           <code class="filename">server:/path</code>.
          </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            filesystem:directory
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            no
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            /var/lib/cryptctl/keydb
          </td><td style="border-bottom: 1px solid ; ">
           The directory where the device containing the file system is located. This can be a block device
           like <code class="filename">/dev/sda<em class="replaceable">...</em></code> or an NFS share path
           <code class="filename">server:/path</code>.
          </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            filesystem:fstype
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
            yes
          </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          </td><td style="border-bottom: 1px solid ; ">
            The filesystem type (for example, NFS, XFS, EXT4).
          </td></tr><tr><td style="border-right: 1px solid ; ">
            filesystem:options
          </td><td style="border-right: 1px solid ; ">
            no
          </td><td style="border-right: 1px solid ; ">
            The default options of the selected file system.
          </td><td>
            Mount options for the file system.
          </td></tr></tbody></table></div></div></section><section class="sect1" id="sec-configure-cryptctl-more" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.8 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="cha-configure-cryptctl.html#sec-configure-cryptctl-more">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For more information, also see the project home page
   <a class="link" href="https://github.com/SUSE/cryptctl/" target="_blank">https://github.com/SUSE/cryptctl/</a>.
  </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-security-cryptofs.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 12 </span>Encrypting partitions and files</span></a> </div><div><a class="pagination-link next" href="sec-sec-user-management.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 14 </span>User management</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-configure-cryptctl.html#sec-configure-cryptctl-server"><span class="title-number">13.1 </span><span class="title-name">Setting up a <code class="command">cryptctl</code> server</span></a></span></li><li><span class="sect1"><a href="cha-configure-cryptctl.html#sec-configure-cryptctl-client"><span class="title-number">13.2 </span><span class="title-name">Setting up a <code class="command">cryptctl</code> client</span></a></span></li><li><span class="sect1"><a href="cha-configure-cryptctl.html#sec-cryptctl-luks-fstab"><span class="title-number">13.3 </span><span class="title-name">Configuring /etc/fstab for LUKS volumes</span></a></span></li><li><span class="sect1"><a href="cha-configure-cryptctl.html#sec-configure-cryptctl-status"><span class="title-number">13.4 </span><span class="title-name">Checking partition unlock status using server-side commands</span></a></span></li><li><span class="sect1"><a href="cha-configure-cryptctl.html#sec-configure-cryptctl-unlock"><span class="title-number">13.5 </span><span class="title-name">Unlocking encrypted partitions manually</span></a></span></li><li><span class="sect1"><a href="cha-configure-cryptctl.html#sec-configure-cryptctl-lock"><span class="title-number">13.6 </span><span class="title-name">Maintenance downtime procedure</span></a></span></li><li><span class="sect1"><a href="cha-configure-cryptctl.html#sec-configure-cryptctl-ha"><span class="title-number">13.7 </span><span class="title-name">Setting up an HA environment for cryptctl-server service</span></a></span></li><li><span class="sect1"><a href="cha-configure-cryptctl.html#sec-configure-cryptctl-more"><span class="title-number">13.8 </span><span class="title-name">More information</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>