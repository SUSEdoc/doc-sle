<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLES 15 SP5 | AutoYaST Guide | Creating an AutoYaST control file</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Creating an AutoYaST control file | SLES 15 SP5"/>
<meta name="description" content="To create the control file, you need to collect information about the systems you are going to install. This includes hardware data and network infor…"/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="15 SP5"/>
<meta name="book-title" content="AutoYaST Guide"/>
<meta name="chapter-title" content="Chapter 3. Creating an AutoYaST control file"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Server 15 SP5"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="AutoYaST Guide"/>
<meta property="og:description" content="Automate SLES installation with AutoYaST"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="AutoYaST Guide"/>
<meta name="twitter:description" content="Automate SLES installation with AutoYaST"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Creating an AutoYaST control file",
  
    "description": "Creating an AutoYaST control file",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-05-29T00:00+02:00",
      
    "datePublished": "2023-06-20T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-autoyast-control-file.html" title="Chapter 2. The AutoYaST control file"/><link rel="next" href="part-configuration.html" title="Part II. AutoYaST configuration examples"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">AutoYaST Guide</a><span> / </span><a class="crumb" href="part-control.html">Understanding and creating the AutoYaST control file</a><span> / </span><a class="crumb" href="cha-autoyast-create-control-file.html">Creating an AutoYaST control file</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">AutoYaST Guide</div><ol><li><a href="ay-preface.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="cha-intro-to-autoyast.html" class=" "><span class="title-number">1 </span><span class="title-name">Introduction to AutoYaST</span></a></li><li class="active"><a href="part-control.html" class="has-children you-are-here"><span class="title-number">I </span><span class="title-name">Understanding and creating the AutoYaST control file</span></a><ol><li><a href="cha-autoyast-control-file.html" class=" "><span class="title-number">2 </span><span class="title-name">The AutoYaST control file</span></a></li><li><a href="cha-autoyast-create-control-file.html" class=" you-are-here"><span class="title-number">3 </span><span class="title-name">Creating an AutoYaST control file</span></a></li></ol></li><li><a href="part-configuration.html" class="has-children "><span class="title-number">II </span><span class="title-name">AutoYaST configuration examples</span></a><ol><li><a href="cha-configuration-installation-options.html" class=" "><span class="title-number">4 </span><span class="title-name">Configuration and installation options</span></a></li></ol></li><li><a href="part-dynamic-profiles.html" class="has-children "><span class="title-number">III </span><span class="title-name">Managing mass installations with dynamic profiles</span></a><ol><li><a href="dynamic-profiles.html" class=" "><span class="title-number">5 </span><span class="title-name">Supported approaches to dynamic profiles</span></a></li><li><a href="rulesandclass.html" class=" "><span class="title-number">6 </span><span class="title-name">Rules and classes</span></a></li><li><a href="erb-templates.html" class=" "><span class="title-number">7 </span><span class="title-name">ERB templates</span></a></li><li><a href="pre-scripts.html" class=" "><span class="title-number">8 </span><span class="title-name">Combining ERB templates and scripts</span></a></li></ol></li><li><a href="bk05pt04.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Understanding the auto-installation process</span></a><ol><li><a href="Invoking.html" class=" "><span class="title-number">9 </span><span class="title-name">The auto-installation process</span></a></li></ol></li><li><a href="bk05pt05.html" class="has-children "><span class="title-number">V </span><span class="title-name">Uses for AutoYaST on installed systems</span></a><ol><li><a href="InstalledSystem.html" class=" "><span class="title-number">10 </span><span class="title-name">Running AutoYaST in an installed system</span></a></li></ol></li><li><a href="bk05pt06.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Appendixes</span></a><ol><li><a href="handlingrules.html" class=" "><span class="title-number">A </span><span class="title-name">Handling rules</span></a></li><li><a href="app-ay-faq.html" class=" "><span class="title-number">B </span><span class="title-name">AutoYaST FAQ—frequently asked questions</span></a></li><li><a href="appendix-linuxrc.html" class=" "><span class="title-number">C </span><span class="title-name">Advanced <code class="command">linuxrc</code> options</span></a></li><li><a href="appendix-ay-12vs15.html" class=" "><span class="title-number">D </span><span class="title-name">Differences between AutoYaST profiles in SLE 12 and 15</span></a></li><li><a href="bk05pt06ape.html" class=" "><span class="title-number">E </span><span class="title-name">GNU licenses</span></a></li></ol></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-autoyast-create-control-file" data-id-title="Creating an AutoYaST control file"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP5</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Creating an AutoYaST control file</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect1" id="Autoinstallation-collectInfo" data-id-title="Collecting information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.1 </span><span class="title-name">Collecting information</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#Autoinstallation-collectInfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To create the control file, you need to collect information about the
   systems you are going to install. This includes hardware data and network
   information among other things. Make sure you have the following information
   about the machines you want to install:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Hard disk types and sizes
    </p></li><li class="listitem"><p>
     Graphical interface and attached monitor, if any
    </p></li><li class="listitem"><p>
     Network interface and MAC address if known (for example, when using DHCP)
    </p></li></ul></div><p>
   Also verify that both <span class="package">autoyast2-installation</span> and
   <span class="package">autoyast2</span> are installed.
  </p></section><section class="sect1" id="CreateProfile-CMS" data-id-title="Using the configuration management system (CMS)"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.2 </span><span class="title-name">Using the configuration management system (CMS)</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-CMS">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To create the control file for one or more computers, a configuration
   interface based on YaST is provided. This system depends on existing
   modules which are usually used to configure a computer in regular operation
   mode, for example, after <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is installed.
  </p><p>
   The configuration management system lets you easily create control files and
   manage a repository of configurations for use in a networked environment
   with multiple clients.
  </p><div class="figure" id="id-1.7.4.3.4.4"><div class="figure-contents"><div class="mediaobject"><a href="images/autoyast2-maindialog.png"><img src="images/autoyast2-maindialog.png" alt="Configuration system" title="Configuration system"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 3.1: </span><span class="title-name">Configuration system </span></span><a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#id-1.7.4.3.4.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div><section class="sect2" id="CreateProfile-CMS-new" data-id-title="Creating a new control file"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.2.1 </span><span class="title-name">Creating a new control file</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-CMS-new">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The easiest way to create an AutoYaST profile is to use an existing
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> system as a template. On an already installed system, launch
    <span class="guimenu">YaST</span> › <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation Configuration</span>. Then select
    <span class="guimenu">Tools</span> › <span class="guimenu">Create Reference
    Profile</span> from the menu. Choose the system components
    you want to include in the profile. Alternatively, create a profile
    containing the complete system configuration by launching
    <span class="guimenu">YaST</span> › <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation Cloning System</span> or running
    <code class="command">sudo yast clone_system</code> from the command line.
   </p><p>
    Both methods will create the file <code class="filename">/root/autoinst.xml</code>.
    The cloned profile can be used to set up an identical clone of the system
    it was created from. However, you will usually want to adjust the file to
    allow for installing multiple machines that are very similar, but not
    identical. This can be done by adjusting the profile with your favorite
    text/XML editor.
   </p><div id="id-1.7.4.3.4.5.4" data-id-title="Sensitive data in profiles" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Sensitive data in profiles</div><p>
     Be aware that the profile might contain sensitive information such as
     password hashes and registration keys.
    </p><p>
     Carefully review the exported profiles and make sure to keep file
     permissions restrictive.
    </p></div><p>
    With some exceptions, almost all resources of the control file can be
    configured using the configuration management system. The system offers
    flexibility and the configuration of some resources is identical to the one
    available in the YaST control center. In addition to the existing and
    familiar modules new interfaces were created for special and complex
    configurations, for example for partitioning, general options and software.
   </p><p>
    Furthermore, using a CMS guarantees the validity of the resulting control
    file and its direct use for starting automated installation.
   </p><p>
    Make sure the configuration system is installed (package
    <code class="systemitem">autoyast2</code>). Call AutoYaST using the
    YaST control center or as root with the following command (make sure the
    <code class="envar">DISPLAY</code> variable is set correctly to start the graphical
    user interface instead of the text-based one):
   </p><div class="verbatim-wrap"><pre class="screen">/sbin/yast2 autoyast</pre></div></section></section><section class="sect1" id="CreateProfile-Manual" data-id-title="Creating/editing a control file manually"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.3 </span><span class="title-name">Creating/editing a control file manually</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-Manual">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If editing the control file manually, make sure it has a valid syntax. To
   check the syntax, use the tools already available on the distribution. For
   example, to verify that the file is well-formed (has a valid XML structure),
   use the utility <code class="command">xmllint</code> available with the
   <code class="systemitem">libxml2</code> package:
  </p><div class="verbatim-wrap"><pre class="screen">xmllint &lt;control file&gt;</pre></div><p>
   If the control file is not well formed, for example, if a tag is not closed,
   <code class="command">xmllint</code> will report the errors.
  </p><p>
   To validate the control file, use the tool <code class="command">jing</code> from the
   package with the same name. During validation, misplaced or missing tags and
   attributes and wrong attribute values are detected. <span class="phrase">The
   <span class="package">jing</span> package is provided with the SUSE Software Development Kit.</span>
  </p><div class="verbatim-wrap"><pre class="screen">jing /usr/share/YaST2/schema/autoyast/rng/profile.rng &lt;control file&gt;</pre></div><p>
   <code class="literal">/usr/share/YaST2/schema/autoyast/rng/profile.rng</code> is
   provided by the package <code class="literal">yast2-schema-default</code>. This
   file describes the syntax and classes of an AutoYaST profile.
  </p><div id="id-1.7.4.3.5.8" data-id-title="Schema extensions" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Schema extensions</div><p>
    AutoYaST can be extended by other products and modules, but the schema does not
    contain the specification for those extensions. As a consequence, when AutoYaST
    is given a profile that uses one of those extensions, it might report the
    profile as invalid.
   </p><p>
    Thus, starting in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
    <span class="phrase">SP3</span>,
    AutoYaST does not validate top-level unknown sections, and ignores them. For
    example, in the example below, <code class="literal">&lt;sap-inst&gt;</code> is not
    validated. The rest is validated as usual.
   </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;mode&gt;
    &lt;confirm config:type="boolean"&gt;true&lt;/confirm&gt;
  &lt;/mode&gt;
&lt;/general&gt;

&lt;sap-inst&gt;
  &lt;!-- this section is not validated --&gt;&gt;
&lt;/sap-inst&gt;</pre></div></div><p>
   Before going on with the autoinstallation, fix any errors resulting from
   such checks. The autoinstallation process cannot be started with an invalid
   and not well-formed control file.
  </p><p>
   You can use any XML editor available on your system or any text editor
   with XML support (for example, Emacs, Vim).
   <span class="phrase">However,
   it is not optimal to create the control file manually for multiple
   machines, and it should only be seen as an interface between the
   autoinstallation engine and the Configuration Management System (CMS)</span>.
  </p><div id="id-1.7.4.3.5.11" data-id-title="Using Emacs as an XML editor" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Using Emacs as an XML editor</div><p>
    The built-in nxml-mode turns Emacs into a fully-fledged XML editor with
    automatic tag completion and validation. Refer to the Emacs help for
    instructions on how to set up nxml-mode.
   </p></div></section><section class="sect1" id="CreateProfile-XSLT" data-id-title="Creating a control file via script with XSLT"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.4 </span><span class="title-name">Creating a control file via script with XSLT</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-XSLT">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If you have a template and want to change a few things via script or command
   line, use an XSLT processor like <code class="literal">xsltproc</code>. For example,
   if you have an AutoYaST control file and want to fill out the host name via
   script for any reason. (If doing this often, you should consider scripting
   it.)
  </p><p>
   First, create an XSL file:
  </p><div class="example" id="id-1.7.4.3.6.4" data-id-title="Example file for replacing the host name/domain by script"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 3.1: </span><span class="title-name">Example file for replacing the host name/domain by script </span></span><a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#id-1.7.4.3.6.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:y2="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"
  xmlns="http://www.suse.com/1.0/yast2ns"
  version="1.0"&gt;
  &lt;xsl:output method="xml" encoding="UTF-8" indent="yes" omit-xml-declaration="no" cdata-section-elements="source"/&gt;

  &lt;!-- the parameter names --&gt;
  &lt;xsl:param name="hostname"/&gt;
  &lt;xsl:param name="domain"/&gt;

  &lt;xsl:template match="/"&gt;
    &lt;xsl:apply-templates select="@*|node()"/&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="y2:dns"&gt;
    &lt;xsl:copy&gt;
      &lt;!-- where to copy the parameters --&gt;
      &lt;domain&gt;&lt;xsl:value-of select="string($domain)"/&gt;&lt;/domain&gt;
      &lt;hostname&gt;&lt;xsl:value-of select="string($hostname)"/&gt;&lt;/hostname&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;


  &lt;xsl:template match="@*|node()" &gt;
    &lt;xsl:copy&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</pre></div></div></div><p>
   This file expects the host name and the domain name as parameters from the
   user.
  </p><div class="verbatim-wrap"><pre class="screen">&lt;xsl:param name="hostname"/&gt;
&lt;xsl:param name="domain"/&gt;</pre></div><p>
   There will be a copy of those parameters in the DNS section of the control
   file. This means that if there already is a domain element in the DNS
   section, you will get a second one, which will cause conflicts.
  </p><p>
   For more information about XSLT, go to the official Web page
   <a class="link" href="https://www.w3.org/TR/xslt" target="_blank">www.w3.org/TR/xslt</a>
  </p></section><section class="sect1" id="check-profile" data-id-title="Checking a control file"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.5 </span><span class="title-name">Checking a control file</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#check-profile">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Depending on the use case, creating an AutoYaST profile can be difficult,
   especially if you build a dynamic profile using rules/classes, ERB templates
   or pre-scripts. For more information, see
   <a class="xref" href="part-dynamic-profiles.html" title="Part III. Managing mass installations with dynamic profiles">Part III, “Managing mass installations with dynamic profiles”</a>.
  </p><p>
   Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
   <span class="phrase">15
   SP3</span>, AutoYaST validates the profile
   during the installation, reporting any problem found to the user. Although
   it is recommended to check whether the profile is correct or not, you can
   disable this behavior by setting the
   <code class="literal">YAST_SKIP_XML_VALIDATION</code> boot parameter to
   <code class="literal">1</code>.
  </p><p>
   Moreover, to simplify the testing and debugging process, AutoYaST offers the
   <code class="literal">check-profile</code> command, which takes care of fetching,
   building and, optionally, importing the profile to detect any potential
   problem.
  </p><div id="id-1.7.4.3.7.5" data-id-title="Results may vary" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Results may vary</div><p>
    Although this command uses the same approach as the installation, the
    results may vary depending on the differences between the current system
    and installation media: YaST package versions, architecture, etc.
   </p></div><div id="id-1.7.4.3.7.6" data-id-title="Use only trusted profiles" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Use only trusted profiles</div><p>
    You must be careful when running this command because pre-installation
    scripts and ERB code would run as the <code class="literal">root</code> user. Use
    only profiles that you trust.
   </p></div><section class="sect2" id="sec-basic-checks" data-id-title="Basic checks"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.5.1 </span><span class="title-name">Basic checks</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#sec-basic-checks">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The simplest way to use this command is just to read and validate the
    profile:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=autoinst.xml output=result.xml</pre></div><p>
    The <code class="filename">result.xml</code> file contains the result of evaluating
    the profile. Bear in mind that, even if you do not use any advanced
    feature, the content of <code class="filename">autoinst.xml</code> and
    <code class="filename">result.xml</code> may differ. The reason is that AutoYaST does
    some cleaning up when it processes the profile.
   </p><p>
    <code class="literal">check-profile</code> can deal with remote files too:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=http://192.168.1.100/autoinst.xml output=result.xml</pre></div></section><section class="sect2" id="sec-running-pre-scripts" data-id-title="Running pre-scripts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.5.2 </span><span class="title-name">Running pre-scripts</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#sec-running-pre-scripts">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Optionally, AutoYaST can run the scripts that are included in the profile,
    reporting any error found during the execution. This is especially relevant
    if you are using a pre-installation script to modify the profile. To enable
    this feature, you need to set the <code class="literal">run-scripts</code> option to
    <code class="literal">true</code>.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=http://192.168.1.100/autoinst.xml output=result.xml run-scripts=true</pre></div><div id="id-1.7.4.3.7.8.4" data-id-title="Scripts run as root" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Scripts run as root</div><p>
     You must be careful when enabling the <code class="literal">run-scripts</code>
     option, because the scripts will run as root and they may affect the
     current system.
    </p></div></section><section class="sect2" id="sec-importing-profile" data-id-title="Importing the profile"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.5.3 </span><span class="title-name">Importing the profile</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#sec-importing-profile">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    It is possible to face some problems when importing a valid profile, even
    if it is correct. The reason is that AutoYaST does not perform any logic check
    when fetching, building and validating the profile.
   </p><p>
    To anticipate such problems, the <code class="literal">check-profile</code> command
    imports the profile and reports problems that it has detected. As it may
    take a while, you can disable this behavior by setting the
    <code class="literal">import-all</code> option to <code class="literal">false</code>.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=http://192.168.1.100/autoinst.xml output=result.xml import-all=false</pre></div><p>
    Importing the profile is a safe operation and does not alter the underlying
    system in any way.
   </p></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-autoyast-control-file.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 2 </span>The AutoYaST control file</span></a> </div><div><a class="pagination-link next" href="part-configuration.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Part II </span>AutoYaST configuration examples</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-autoyast-create-control-file.html#Autoinstallation-collectInfo"><span class="title-number">3.1 </span><span class="title-name">Collecting information</span></a></span></li><li><span class="sect1"><a href="cha-autoyast-create-control-file.html#CreateProfile-CMS"><span class="title-number">3.2 </span><span class="title-name">Using the configuration management system (CMS)</span></a></span></li><li><span class="sect1"><a href="cha-autoyast-create-control-file.html#CreateProfile-Manual"><span class="title-number">3.3 </span><span class="title-name">Creating/editing a control file manually</span></a></span></li><li><span class="sect1"><a href="cha-autoyast-create-control-file.html#CreateProfile-XSLT"><span class="title-number">3.4 </span><span class="title-name">Creating a control file via script with XSLT</span></a></span></li><li><span class="sect1"><a href="cha-autoyast-create-control-file.html#check-profile"><span class="title-number">3.5 </span><span class="title-name">Checking a control file</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>