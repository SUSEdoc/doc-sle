<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLED 15 SP6 | Administration Guide | File copying with RSync</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="File copying with RSync | SLED 15 SP6"/>
<meta name="description" content="Today, a typical user has several computers: home and workplace machines, a laptop, a smartphone or a tablet. This makes the task of keeping files an…"/>
<meta name="product-name" content="SUSE Linux Enterprise Desktop"/>
<meta name="product-number" content="15 SP6"/>
<meta name="book-title" content="Administration Guide"/>
<meta name="chapter-title" content="Chapter 15. File copying with RSync"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Desktop 15 SP6"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Administration Guide"/>
<meta property="og:description" content="Maintain, monitor and customize SLED"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Administration Guide"/>
<meta name="twitter:description" content="Maintain, monitor and customize SLED"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "File copying with RSync",
  
    "description": "Today, a typical user has several computers: home and workplace machines, a laptop, a smartphone or a tablet. This makes the task of keeping files an…",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-06-26T00:00+02:00",
      
    "datePublished": "2024-06-26T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-vnc.html" title="Chapter 14. Remote graphical sessions with VNC"/><link rel="next" href="part-boot.html" title="Part II. Booting a Linux system"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Administration Guide</a><span> / </span><a class="crumb" href="part-administration.html">Common tasks</a><span> / </span><a class="crumb" href="cha-net-rsync.html">File copying with RSync</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Administration Guide</div><ol><li><a href="preface-administration.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li class="active"><a href="part-administration.html" class="has-children you-are-here"><span class="title-number">I </span><span class="title-name">Common tasks</span></a><ol><li><a href="cha-adm-shell.html" class=" "><span class="title-number">1 </span><span class="title-name">Bash and Bash scripts</span></a></li><li><a href="cha-adm-sudo.html" class=" "><span class="title-number">2 </span><span class="title-name"><code class="command">sudo</code> basics</span></a></li><li><a href="cha-yast-gui.html" class=" "><span class="title-number">3 </span><span class="title-name">Using YaST</span></a></li><li><a href="cha-yast-text.html" class=" "><span class="title-number">4 </span><span class="title-name">YaST in text mode</span></a></li><li><a href="cha-yast-lang.html" class=" "><span class="title-number">5 </span><span class="title-name">Changing language and country settings with YaST</span></a></li><li><a href="cha-yast-userman.html" class=" "><span class="title-number">6 </span><span class="title-name">Managing users with YaST</span></a></li><li><a href="cha-onlineupdate-you.html" class=" "><span class="title-number">7 </span><span class="title-name">YaST online update</span></a></li><li><a href="cha-yast-software.html" class=" "><span class="title-number">8 </span><span class="title-name">Installing or removing software</span></a></li><li><a href="cha-sw-cl.html" class=" "><span class="title-number">9 </span><span class="title-name">Managing software with command line tools</span></a></li><li><a href="cha-snapper.html" class=" "><span class="title-number">10 </span><span class="title-name">System recovery and snapshot management with Snapper</span></a></li><li><a href="cha-klp.html" class=" "><span class="title-number">11 </span><span class="title-name">Live kernel patching with KLP</span></a></li><li><a href="cha-ulp.html" class=" "><span class="title-number">12 </span><span class="title-name">User space live patching</span></a></li><li><a href="cha-transactional-updates.html" class=" "><span class="title-number">13 </span><span class="title-name">Transactional updates</span></a></li><li><a href="cha-vnc.html" class=" "><span class="title-number">14 </span><span class="title-name">Remote graphical sessions with VNC</span></a></li><li><a href="cha-net-rsync.html" class=" you-are-here"><span class="title-number">15 </span><span class="title-name">File copying with RSync</span></a></li></ol></li><li><a href="part-boot.html" class="has-children "><span class="title-number">II </span><span class="title-name">Booting a Linux system</span></a><ol><li><a href="cha-boot.html" class=" "><span class="title-number">16 </span><span class="title-name">Introduction to the boot process</span></a></li><li><a href="cha-uefi.html" class=" "><span class="title-number">17 </span><span class="title-name">UEFI (Unified Extensible Firmware Interface)</span></a></li><li><a href="cha-grub2.html" class=" "><span class="title-number">18 </span><span class="title-name">The boot loader GRUB 2</span></a></li><li><a href="cha-systemd.html" class=" "><span class="title-number">19 </span><span class="title-name">The <code class="systemitem">systemd</code> daemon</span></a></li></ol></li><li><a href="part-system.html" class="has-children "><span class="title-number">III </span><span class="title-name">System</span></a><ol><li><a href="cha-64bit.html" class=" "><span class="title-number">20 </span><span class="title-name">32-bit and 64-bit applications in a 64-bit system environment</span></a></li><li><a href="cha-journalctl.html" class=" "><span class="title-number">21 </span><span class="title-name"><code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal</span></a></li><li><a href="cha-update-alternative.html" class=" "><span class="title-number">22 </span><span class="title-name"><code class="command">update-alternatives</code>: managing multiple versions of commands and files</span></a></li><li><a href="cha-network.html" class=" "><span class="title-number">23 </span><span class="title-name">Basic networking</span></a></li><li><a href="cha-print.html" class=" "><span class="title-number">24 </span><span class="title-name">Printer operation</span></a></li><li><a href="cha-gui-desktop.html" class=" "><span class="title-number">25 </span><span class="title-name">Graphical user interface</span></a></li><li><a href="cha-fuse.html" class=" "><span class="title-number">26 </span><span class="title-name">Accessing file systems with FUSE</span></a></li><li><a href="cha-tuning-multikernel.html" class=" "><span class="title-number">27 </span><span class="title-name">Installing multiple kernel versions</span></a></li><li><a href="cha-mod.html" class=" "><span class="title-number">28 </span><span class="title-name">Managing kernel modules</span></a></li><li><a href="cha-udev.html" class=" "><span class="title-number">29 </span><span class="title-name">Dynamic kernel device management with <code class="systemitem">udev</code></span></a></li><li><a href="cha-suse.html" class=" "><span class="title-number">30 </span><span class="title-name">Special system features</span></a></li><li><a href="cha-nm.html" class=" "><span class="title-number">31 </span><span class="title-name">Using NetworkManager</span></a></li></ol></li><li><a href="part-hardware.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Hardware configuration</span></a><ol><li><a href="sec-yast-hw-keym.html" class=" "><span class="title-number">32 </span><span class="title-name">Setting up your system keyboard layout</span></a></li><li><a href="sec-yast-hw-sound.html" class=" "><span class="title-number">33 </span><span class="title-name">Setting up sound cards</span></a></li><li><a href="sec-yast-hw-print.html" class=" "><span class="title-number">34 </span><span class="title-name">Setting up a printer</span></a></li><li><a href="sec-yast-hw-scan.html" class=" "><span class="title-number">35 </span><span class="title-name">Setting up a scanner</span></a></li><li><a href="cha-power-mgmt.html" class=" "><span class="title-number">36 </span><span class="title-name">Power management</span></a></li><li><a href="cha-nvdimm.html" class=" "><span class="title-number">37 </span><span class="title-name">Persistent memory</span></a></li></ol></li><li><a href="part-services.html" class="has-children "><span class="title-number">V </span><span class="title-name">Services</span></a><ol><li><a href="cha-yast-serviceman.html" class=" "><span class="title-number">38 </span><span class="title-name">Service management with YaST</span></a></li><li><a href="cha-ntp.html" class=" "><span class="title-number">39 </span><span class="title-name">Time synchronization with NTP</span></a></li></ol></li><li><a href="part-trouble.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Troubleshooting</span></a><ol><li><a href="cha-adminhelp.html" class=" "><span class="title-number">40 </span><span class="title-name">Help and documentation</span></a></li><li><a href="cha-adm-support.html" class=" "><span class="title-number">41 </span><span class="title-name">Gathering system information for support</span></a></li><li><a href="cha-trouble.html" class=" "><span class="title-number">42 </span><span class="title-name">Common problems and their solutions</span></a></li></ol></li><li><a href="app-nwscheme.html" class=" "><span class="title-number">A </span><span class="title-name">An example network</span></a></li><li><a href="bk01apb.html" class=" "><span class="title-number">B </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-net-rsync" data-id-title="File copying with RSync"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP6</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">15 </span><span class="title-name">File copying with RSync</span></span> <a title="Permalink" class="permalink" href="cha-net-rsync.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Today, a typical user has several computers: home and workplace machines, a
    laptop, a smartphone or a tablet. This makes the task of keeping files and
    documents in synchronization across multiple devices all the more important.
   </p></div></div></div></div><div id="id-1.3.3.16.3" data-id-title="Risk of data loss" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Risk of data loss</div><p>
   Before you start using a synchronization tool, you should familiarize
   yourself with its features and functionality. Make sure to back up your
   important files.
  </p></div><section class="sect1" id="sec-net-rsync-overview" data-id-title="Conceptual overview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.1 </span><span class="title-name">Conceptual overview</span></span> <a title="Permalink" class="permalink" href="cha-net-rsync.html#sec-net-rsync-overview">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For synchronizing a large amount of data over a slow network connection,
   Rsync offers a reliable method of transmitting only changes within files.
   This applies not only to text files but also binary files. To detect the
   differences between files, Rsync subdivides the files into blocks and
   computes check sums over them.
  </p><p>
   Detecting changes requires certain computing power. So make sure that
   machines on both ends have enough resources, including RAM.
  </p><p>
   Rsync can be particularly useful when large amounts of data containing only
   minor changes need to be transmitted regularly. This is often the case when
   working with backups. Rsync can also be useful for mirroring staging servers
   that store complete directory trees of Web servers to a Web server in a DMZ.
  </p><p>
   Despite its name, Rsync is not a synchronization tool. Rsync is a tool that
   copies data only in one direction at a time. It does not and cannot do the
   reverse. If you need a bidirectional tool which can synchronize both
   source and destination, use Csync.
  </p></section><section class="sect1" id="sec-net-rsync-syntax" data-id-title="Basic syntax"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.2 </span><span class="title-name">Basic syntax</span></span> <a title="Permalink" class="permalink" href="cha-net-rsync.html#sec-net-rsync-syntax">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Rsync is a command-line tool that has the following basic syntax:
  </p><div class="verbatim-wrap"><pre class="screen">rsync [OPTION] SOURCE [SOURCE]... DEST</pre></div><p>
   You can use Rsync on any local or remote machine, provided you have access
   and write permissions. It is possible to have multiple
   <em class="replaceable">SOURCE</em> entries. The
   <em class="replaceable">SOURCE</em> and <em class="replaceable">DEST</em>
   placeholders can be paths, URLs or both.
  </p><p>
   Below are the most common Rsync options:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.16.5.6.1"><span class="term"><code class="option">-v</code>
    </span></dt><dd><p>
      Outputs more verbose text
     </p></dd><dt id="id-1.3.3.16.5.6.2"><span class="term"><code class="option">-a</code>
    </span></dt><dd><p>
      Archive mode; copies files recursively and preserves time stamps,
      user/group ownership, file permissions, and symbolic links
     </p></dd><dt id="id-1.3.3.16.5.6.3"><span class="term"><code class="option">-z</code>
    </span></dt><dd><p>
      Compresses the transmitted data
     </p></dd></dl></div><div id="id-1.3.3.16.5.7" data-id-title="Trailing slashes count" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Trailing slashes count</div><p>
    When working with Rsync, you should pay particular attention to trailing
    slashes. A trailing slash after the directory denotes the
    <span class="emphasis"><em>content</em></span> of the directory. No trailing slash denotes
    the <span class="emphasis"><em>directory itself</em></span>.
   </p></div></section><section class="sect1" id="sec-net-rsync-local-copy" data-id-title="Copying files and directories locally"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.3 </span><span class="title-name">Copying files and directories locally</span></span> <a title="Permalink" class="permalink" href="cha-net-rsync.html#sec-net-rsync-local-copy">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The following description assumes that the current user has write
   permissions to the directory <code class="filename">/var/backup</code>. To copy a
   single file from one directory on your machine to another path, use the
   following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> -avz backup.tar.xz /var/backup/</pre></div><p>
   The file <code class="filename">backup.tar.xz</code> is copied to
   <code class="filename">/var/backup/</code>; the absolute path is
   <code class="filename">/var/backup/backup.tar.xz</code>.
  </p><p>
   Do not forget to add the <span class="emphasis"><em>trailing slash</em></span> after the
   <code class="filename">/var/backup/</code> directory. If you do not insert the slash,
   the file <code class="filename">backup.tar.xz</code> is copied to
   <code class="filename">/var/backup</code> (file) <span class="emphasis"><em>not</em></span> inside the
   directory <code class="filename">/var/backup/</code>!
  </p><p>
   Copying a directory is similar to copying a single file. The following
   example copies the directory <code class="filename">tux/</code> and
   its content into the directory <code class="filename">/var/backup/</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> -avz tux /var/backup/</pre></div><p>
   Find the copy in the absolute path
   <code class="filename">/var/backup/tux/</code>.
  </p></section><section class="sect1" id="sec-net-rsync-remote-copy" data-id-title="Copying files and directories remotely"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.4 </span><span class="title-name">Copying files and directories remotely</span></span> <a title="Permalink" class="permalink" href="cha-net-rsync.html#sec-net-rsync-remote-copy">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The Rsync tool is required on both machines. To copy files from or to remote
   directories requires an IP address or a domain name. A user name is optional
   if your current user names on the local and remote machine are the same.
  </p><p>
   To copy the file <code class="filename">file.tar.xz</code> from your local host to
   the remote host
   <code class="systemitem">192.168.1.1</code> with
   same users (being local and remote), use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> -avz file.tar.xz  tux@192.168.1.1:</pre></div><p>
   Depending on what you prefer, these commands are also possible and
   equivalent:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> -avz file.tar.xz 192.168.1.1:~
<code class="prompt user">&gt; </code><code class="command">rsync</code> -avz file.tar.xz 192.168.1.1:/home/tux</pre></div><p>
   In all cases with standard configuration, you are prompted to enter your
   passphrase of the remote user. This command copies
   <code class="filename">file.tar.xz</code> to the home directory of user <code class="systemitem">tux</code>
   (normally <code class="filename">/home/tux</code>).
  </p><p>
   Copying a directory remotely is similar to copying a directory locally. The
   following example copies the directory
   <code class="filename">tux/</code> and its content into the remote
   directory <code class="filename">/var/backup/</code> on the
   <code class="systemitem">192.168.1.1</code> host:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> -avz tux 192.168.1.1:/var/backup/</pre></div><p>
   Assuming you have write permissions on the host
   <code class="systemitem">192.168.1.1</code>, you can
   find the copy in the absolute path
   <code class="filename">/var/backup/tux</code>.
  </p></section><section class="sect1" id="sec-net-rsync-server" data-id-title="Configuring and using an rsync server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.5 </span><span class="title-name">Configuring and using an rsync server</span></span> <a title="Permalink" class="permalink" href="cha-net-rsync.html#sec-net-rsync-server">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Rsync can run as a daemon
   (<code class="systemitem">rsyncd</code>) listening on default
   port 873 for incoming connections. This daemon can receive <span class="quote">“<span class="quote">copying
   targets</span>”</span>.
  </p><p>
   The following description explains how to create an Rsync server on a
    <code class="systemitem">jupiter</code> host with a <span class="emphasis"><em>backup</em></span>
    target.  This target can be used to store your backups. To create an Rsync
    server, do the following:
  </p><div class="procedure" id="id-1.3.3.16.8.4" data-id-title="Setting up an rsync server"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 15.1: </span><span class="title-name">Setting up an rsync server </span></span><a title="Permalink" class="permalink" href="cha-net-rsync.html#id-1.3.3.16.8.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step" id="st-rsync-server-mkdir"><p>
     On jupiter, create a directory to store all your backup files. In this
     example, we use <code class="filename">/var/backup</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">mkdir</code> /var/backup</pre></div></li><li class="step"><p>
     Specify ownership. In this case, the directory is owned by user
     <code class="systemitem">tux</code> in group
     <code class="systemitem">users</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">chown</code> tux.users /var/backup</pre></div></li><li class="step"><p>
     Configure the rsyncd daemon.
    </p><p>
     We separate the configuration file into a main file and certain
     <span class="quote">“<span class="quote">modules</span>”</span> which hold your backup target. This makes it easier
     to add additional targets later. Global values can be stored in
     <code class="filename">/etc/rsyncd.d/*.inc</code> files, whereas your modules are
     placed in <code class="filename">/etc/rsyncd.d/*.conf</code> files:
    </p><ol type="a" class="substeps"><li class="step"><p>
       Create a directory <code class="filename">/etc/rsyncd.d/</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">mkdir</code> /etc/rsyncd.d/</pre></div></li><li class="step"><p>
       In the main configuration file <code class="filename">/etc/rsyncd.conf</code>,
       add the following lines:
      </p><div class="verbatim-wrap"><pre class="screen"># rsyncd.conf main configuration file
log file = /var/log/rsync.log
pid file = /var/lock/rsync.lock

&amp;merge /etc/rsyncd.d <span class="callout" id="co-rsync-conf-merge">1</span>
&amp;include /etc/rsyncd.d <span class="callout" id="co-rsync-conf-include">2</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-merge"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Merges global values from <code class="filename">/etc/rsyncd.d/*.inc</code>
         files into the main configuration file.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-include"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Loads any modules (or targets) from
         <code class="filename">/etc/rsyncd.d/*.conf</code> files. These files should
         not contain any references to global values.
        </p></td></tr></table></div></li><li class="step"><p>
       Create your module (your backup target) in the file
       <code class="filename">/etc/rsyncd.d/backup.conf</code> with the following lines:
      </p><div class="verbatim-wrap"><pre class="screen"># backup.conf: backup module
[backup] <span class="callout" id="co-rsync-conf-target">1</span>
   uid = tux <span class="callout" id="co-rsync-conf-uid-gid">2</span>
   gid = users <a class="xref" href="cha-net-rsync.html#co-rsync-conf-uid-gid"><span class="callout">2</span></a>
   path = /var/backup <span class="callout" id="co-rsync-conf-path">3</span>
   auth users = tux  <span class="callout" id="co-rsync-conf-authusers">4</span>
   secrets file = /etc/rsyncd.secrets <span class="callout" id="co-rsync-conf-secretfiles">5</span>
   comment = Our backup target</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-target"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         The <span class="emphasis"><em>backup</em></span> target. You can use any name you like.
         However, it is a good idea to name a target according to its purpose
         and use the same name in your <code class="filename">*.conf</code> file.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-uid-gid"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Specifies the user name or group name that is used when the file
         transfer takes place.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-path"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Defines the path to store your backups (from
         <a class="xref" href="cha-net-rsync.html#st-rsync-server-mkdir" title="Step 1">Step 1</a>).
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-authusers"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Specifies a comma-separated list of allowed users. In its simplest
         form, it contains the user names that are allowed to connect to this
         module. In our case, only user <code class="systemitem">tux</code> is allowed.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-secretfiles"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Specifies the path of a file that contains lines with user names and
         plain passwords.
        </p></td></tr></table></div></li><li class="step"><p>
       Create the <code class="filename">/etc/rsyncd.secrets</code> file with the
       following content and replace <em class="replaceable">PASSPHRASE</em>:
      </p><div class="verbatim-wrap"><pre class="screen"># user:passwd
tux:<em class="replaceable">PASSPHRASE</em></pre></div></li><li class="step"><p>
       Make sure the file is only readable by <code class="systemitem">root</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">chmod</code> 0600 /etc/rsyncd.secrets</pre></div></li></ol></li><li class="step"><p>
     Start and enable the rsyncd daemon with:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">systemctl</code> enable rsyncd
<code class="prompt root"># </code><code class="command">systemctl</code> start rsyncd</pre></div></li><li class="step"><p>
     Test the access to your Rsync server:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> jupiter::</pre></div><p>
     You should see a response that looks like this:
    </p><div class="verbatim-wrap"><pre class="screen">backup          Our backup target</pre></div><p>
     Otherwise, check your configuration file, firewall and network settings.
    </p></li></ol></div></div><p>
   The above steps create an Rsync server that can now be used to store backups.
   The example also creates a log file listing all connections. This file is
   stored in <code class="filename">/var/log/rsyncd.log</code>. This is useful to debug
   your transfers.
  </p><p>
   To list the content of your backup target, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rsync -avz jupiter::backup</pre></div><p>
   This command lists all files present in the directory
   <code class="filename">/var/backup</code> on the server. This request is also logged
   in the log file <code class="filename">/var/log/rsyncd.log</code>. To start an actual
   transfer, provide a source directory. Use <code class="literal">.</code> for the
   current directory. For example, the following command copies the current
   directory to your Rsync backup server:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rsync -avz . jupiter::backup</pre></div><p>
   By default, Rsync does not delete files and directories when it runs. To
   enable deletion, the additional option <code class="option">--delete</code> must be
   stated. To ensure that no newer files are deleted, the option
   <code class="option">--update</code> can be used instead. Any conflicts that arise must
   be resolved manually.
  </p></section><section class="sect1" id="sec-net-rsync-summary" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.6 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="cha-net-rsync.html#sec-net-rsync-summary">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.16.9.2.1"><span class="term">Csync</span></dt><dd><p>
      Bidirectional file synchronization tool, see
      <a class="link" href="https://csync.org/" target="_blank">https://csync.org/</a>.
     </p></dd><dt id="id-1.3.3.16.9.2.2"><span class="term">RSnapshot</span></dt><dd><p>
      Creates incremental backups, see
      <a class="link" href="https://rsnapshot.org" target="_blank">https://rsnapshot.org</a>.
     </p></dd><dt id="id-1.3.3.16.9.2.3"><span class="term">Unison</span></dt><dd><p>
      A file synchronization tool similar to CSync but with a graphical
      interface, see <a class="link" href="https://github.com/bcpierce00/unison" target="_blank">https://github.com/bcpierce00/unison</a>.
     </p></dd><dt id="id-1.3.3.16.9.2.4"><span class="term">Rear</span></dt><dd><p>
      A disaster recovery framework, see the
      <a class="link" href="https://documentation.suse.com/sle-ha/15/html/SLE-HA-all/cha-ha-rear.html" target="_blank"><em class="citetitle">Administration
      Guide</em> of the SUSE Linux Enterprise High Availability, chapter <em class="citetitle">Disaster Recovery with Rear (Relax-and-Recover)</em></a>.
     </p></dd></dl></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-vnc.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 14 </span>Remote graphical sessions with VNC</span></a> </div><div><a class="pagination-link next" href="part-boot.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Part II </span>Booting a Linux system</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-net-rsync.html#sec-net-rsync-overview"><span class="title-number">15.1 </span><span class="title-name">Conceptual overview</span></a></span></li><li><span class="sect1"><a href="cha-net-rsync.html#sec-net-rsync-syntax"><span class="title-number">15.2 </span><span class="title-name">Basic syntax</span></a></span></li><li><span class="sect1"><a href="cha-net-rsync.html#sec-net-rsync-local-copy"><span class="title-number">15.3 </span><span class="title-name">Copying files and directories locally</span></a></span></li><li><span class="sect1"><a href="cha-net-rsync.html#sec-net-rsync-remote-copy"><span class="title-number">15.4 </span><span class="title-name">Copying files and directories remotely</span></a></span></li><li><span class="sect1"><a href="cha-net-rsync.html#sec-net-rsync-server"><span class="title-number">15.5 </span><span class="title-name">Configuring and using an rsync server</span></a></span></li><li><span class="sect1"><a href="cha-net-rsync.html#sec-net-rsync-summary"><span class="title-number">15.6 </span><span class="title-name">More information</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>