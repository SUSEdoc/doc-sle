<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLED 15 SP7 | Administration Guide | sudo basics</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="sudo basics | SLED 15 SP7"/>
<meta name="description" content="Running certain commands requires root privileges. However, for security reasons and to avoid mistakes, it is not recommended to log in as root. A sa…"/>
<meta name="product-name" content="SUSE Linux Enterprise Desktop"/>
<meta name="product-number" content="15 SP7"/>
<meta name="book-title" content="Administration Guide"/>
<meta name="chapter-title" content="Chapter 2. sudo basics"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Desktop 15 SP7"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Administration Guide"/>
<meta property="og:description" content="Maintain, monitor and customize SLED"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Administration Guide"/>
<meta name="twitter:description" content="Maintain, monitor and customize SLED"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "sudo basics",
  
    "description": "sudo basics",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-06-26T00:00+02:00",
      
    "datePublished": "2024-06-26T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-adm-shell.html" title="Chapter 1. Bash and Bash scripts"/><link rel="next" href="cha-yast-gui.html" title="Chapter 3. Using YaST"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Administration Guide</a><span> / </span><a class="crumb" href="part-administration.html">Common tasks</a><span> / </span><a class="crumb" href="cha-adm-sudo.html">sudo basics</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Administration Guide</div><ol><li><a href="preface-administration.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li class="active"><a href="part-administration.html" class="has-children you-are-here"><span class="title-number">I </span><span class="title-name">Common tasks</span></a><ol><li><a href="cha-adm-shell.html" class=" "><span class="title-number">1 </span><span class="title-name">Bash and Bash scripts</span></a></li><li><a href="cha-adm-sudo.html" class=" you-are-here"><span class="title-number">2 </span><span class="title-name"><code class="command">sudo</code> basics</span></a></li><li><a href="cha-yast-gui.html" class=" "><span class="title-number">3 </span><span class="title-name">Using YaST</span></a></li><li><a href="cha-yast-text.html" class=" "><span class="title-number">4 </span><span class="title-name">YaST in text mode</span></a></li><li><a href="cha-yast-lang.html" class=" "><span class="title-number">5 </span><span class="title-name">Changing language and country settings with YaST</span></a></li><li><a href="cha-yast-userman.html" class=" "><span class="title-number">6 </span><span class="title-name">Managing users with YaST</span></a></li><li><a href="cha-onlineupdate-you.html" class=" "><span class="title-number">7 </span><span class="title-name">YaST online update</span></a></li><li><a href="cha-yast-software.html" class=" "><span class="title-number">8 </span><span class="title-name">Installing or removing software</span></a></li><li><a href="cha-sw-cl.html" class=" "><span class="title-number">9 </span><span class="title-name">Managing software with command line tools</span></a></li><li><a href="cha-snapper.html" class=" "><span class="title-number">10 </span><span class="title-name">System recovery and snapshot management with Snapper</span></a></li><li><a href="cha-klp.html" class=" "><span class="title-number">11 </span><span class="title-name">Live kernel patching with KLP</span></a></li><li><a href="cha-ulp.html" class=" "><span class="title-number">12 </span><span class="title-name">User space live patching</span></a></li><li><a href="cha-transactional-updates.html" class=" "><span class="title-number">13 </span><span class="title-name">Transactional updates</span></a></li><li><a href="cha-vnc.html" class=" "><span class="title-number">14 </span><span class="title-name">Remote graphical sessions with VNC</span></a></li><li><a href="cha-net-rsync.html" class=" "><span class="title-number">15 </span><span class="title-name">File copying with RSync</span></a></li></ol></li><li><a href="part-boot.html" class="has-children "><span class="title-number">II </span><span class="title-name">Booting a Linux system</span></a><ol><li><a href="cha-boot.html" class=" "><span class="title-number">16 </span><span class="title-name">Introduction to the boot process</span></a></li><li><a href="cha-uefi.html" class=" "><span class="title-number">17 </span><span class="title-name">UEFI (Unified Extensible Firmware Interface)</span></a></li><li><a href="cha-grub2.html" class=" "><span class="title-number">18 </span><span class="title-name">The boot loader GRUB 2</span></a></li><li><a href="cha-systemd.html" class=" "><span class="title-number">19 </span><span class="title-name">The <code class="systemitem">systemd</code> daemon</span></a></li></ol></li><li><a href="part-system.html" class="has-children "><span class="title-number">III </span><span class="title-name">System</span></a><ol><li><a href="cha-64bit.html" class=" "><span class="title-number">20 </span><span class="title-name">32-bit and 64-bit applications in a 64-bit system environment</span></a></li><li><a href="cha-journalctl.html" class=" "><span class="title-number">21 </span><span class="title-name"><code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal</span></a></li><li><a href="cha-update-alternative.html" class=" "><span class="title-number">22 </span><span class="title-name"><code class="command">update-alternatives</code>: managing multiple versions of commands and files</span></a></li><li><a href="cha-network.html" class=" "><span class="title-number">23 </span><span class="title-name">Basic networking</span></a></li><li><a href="cha-print.html" class=" "><span class="title-number">24 </span><span class="title-name">Printer operation</span></a></li><li><a href="cha-gui-desktop.html" class=" "><span class="title-number">25 </span><span class="title-name">Graphical user interface</span></a></li><li><a href="cha-fuse.html" class=" "><span class="title-number">26 </span><span class="title-name">Accessing file systems with FUSE</span></a></li><li><a href="cha-tuning-multikernel.html" class=" "><span class="title-number">27 </span><span class="title-name">Installing multiple kernel versions</span></a></li><li><a href="cha-mod.html" class=" "><span class="title-number">28 </span><span class="title-name">Managing kernel modules</span></a></li><li><a href="cha-udev.html" class=" "><span class="title-number">29 </span><span class="title-name">Dynamic kernel device management with <code class="systemitem">udev</code></span></a></li><li><a href="cha-suse.html" class=" "><span class="title-number">30 </span><span class="title-name">Special system features</span></a></li><li><a href="cha-nm.html" class=" "><span class="title-number">31 </span><span class="title-name">Using NetworkManager</span></a></li></ol></li><li><a href="part-hardware.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Hardware configuration</span></a><ol><li><a href="sec-yast-hw-keym.html" class=" "><span class="title-number">32 </span><span class="title-name">Setting up your system keyboard layout</span></a></li><li><a href="sec-yast-hw-sound.html" class=" "><span class="title-number">33 </span><span class="title-name">Setting up sound cards</span></a></li><li><a href="sec-yast-hw-print.html" class=" "><span class="title-number">34 </span><span class="title-name">Setting up a printer</span></a></li><li><a href="sec-yast-hw-scan.html" class=" "><span class="title-number">35 </span><span class="title-name">Setting up a scanner</span></a></li><li><a href="cha-power-mgmt.html" class=" "><span class="title-number">36 </span><span class="title-name">Power management</span></a></li><li><a href="cha-nvdimm.html" class=" "><span class="title-number">37 </span><span class="title-name">Persistent memory</span></a></li></ol></li><li><a href="part-services.html" class="has-children "><span class="title-number">V </span><span class="title-name">Services</span></a><ol><li><a href="cha-yast-serviceman.html" class=" "><span class="title-number">38 </span><span class="title-name">Service management with YaST</span></a></li><li><a href="cha-ntp.html" class=" "><span class="title-number">39 </span><span class="title-name">Time synchronization with NTP</span></a></li></ol></li><li><a href="part-trouble.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Troubleshooting</span></a><ol><li><a href="cha-adminhelp.html" class=" "><span class="title-number">40 </span><span class="title-name">Help and documentation</span></a></li><li><a href="cha-adm-support.html" class=" "><span class="title-number">41 </span><span class="title-name">Gathering system information for support</span></a></li><li><a href="cha-trouble.html" class=" "><span class="title-number">42 </span><span class="title-name">Common problems and their solutions</span></a></li></ol></li><li><a href="app-nwscheme.html" class=" "><span class="title-number">A </span><span class="title-name">An example network</span></a></li><li><a href="bk01apb.html" class=" "><span class="title-number">B </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-adm-sudo" data-id-title="sudo basics"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP7</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">2 </span><span class="title-name"><code class="command">sudo</code> basics</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Running certain commands requires root privileges. However, for security
    reasons and to avoid mistakes, it is not recommended to log in as
    <code class="systemitem">root</code>. A safer approach is to log in as a regular user, and then use
    <code class="command">sudo</code> to run commands with elevated privileges.
  </p><p>
    On <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>, <code class="command">sudo</code> is configured to work similarly to
    <code class="command">su</code>. However, <code class="command">sudo</code> provides a flexible mechanism that
    allows users to run commands with privileges of any other user. This can be
    used to assign roles with specific privileges to certain users and groups.
    For example, it is possible to allow members of the group <code class="systemitem">users</code> to
    run a command with the privileges of user <code class="systemitem">wilber</code>. Access to the
    command can be further restricted by disallowing any command options. While
    su always requires the <code class="systemitem">root</code> password for authentication with PAM,
    <code class="command">sudo</code> can be configured to authenticate with your own credentials. This
    means that the users do not need to share the <code class="systemitem">root</code> password, which
    improves security.
  </p><section class="sect1" id="sec-adm-sudo-usage" data-id-title="Basic sudo usage"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.1 </span><span class="title-name">Basic <code class="command">sudo</code> usage</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sec-adm-sudo-usage">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The following chapter provides an introduction to basic usage of <code class="command">sudo</code>.
    </p><section class="sect2" id="sec-adm-sudo-usage-cmd" data-id-title="Running a single command"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.1.1 </span><span class="title-name">Running a single command</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sec-adm-sudo-usage-cmd">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        As a regular user, you can run any command as <code class="systemitem">root</code> by adding
        <code class="command">sudo</code> before it. This prompts you to provide the root password. If
        authenticated successfully, this runs the command as <code class="systemitem">root</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">id -un</code><span class="callout" id="co-sudo-usage-id">1</span>
tux
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">id -un</code>
root's password:<span class="callout" id="co-sudo-usage-pw">2</span>
root
<code class="prompt user">&gt; </code><code class="command">id -un</code>
tux<span class="callout" id="co-sudo-usage-after">3</span>
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">id -un</code>
<span class="callout" id="co-sudo-usage-nopw">4</span>
root</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-usage-id"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The <code class="command">id -un</code> command prints the login name of the
            current user.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-usage-pw"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The password is not shown during input, neither as clear text nor
            as masking characters.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-usage-after"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            Only commands that start with <code class="command">sudo</code> run with elevated privileges.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-usage-nopw"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The elevated privileges persist for a certain period of time, so
            you do not need to provide the <code class="systemitem">root</code> password again.
          </p></td></tr></table></div><div id="id-1.3.3.3.5.3.5" data-id-title="I/O redirection" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: I/O redirection</div><p>
          When using <code class="command">sudo</code>, I/O redirection does not work:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> echo s &gt; /proc/sysrq-trigger
bash: /proc/sysrq-trigger: Permission denied
<code class="prompt user">&gt; </code><code class="command">sudo</code> cat &lt; /proc/1/maps
bash: /proc/1/maps: Permission denied</pre></div><p>
          In the example above, only the <code class="command">echo</code> and
          <code class="command">cat</code> commands run with elevated privileges. The
          redirection is done by the user's shell with user privileges. To
          perform redirection with elevated privileges, either start a shell as
          in <a class="xref" href="cha-adm-sudo.html#sec-sudo-shell" title="2.1.2. Starting a shell">Section 2.1.2, “Starting a shell”</a> or use the
          <code class="command">dd</code> utility:
        </p><div class="verbatim-wrap"><pre class="screen">echo s | sudo dd of=/proc/sysrq-trigger
sudo dd if=/proc/1/maps | cat</pre></div></div></section><section class="sect2" id="sec-sudo-shell" data-id-title="Starting a shell"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.1.2 </span><span class="title-name">Starting a shell</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sec-sudo-shell">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Using <code class="command">sudo</code> every time to run a command with elevated privileges is
        not always practical. While you can use the <code class="command">sudo
        bash</code> command, it is recommended to use one of the built-in
        mechanisms to start a shell:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.3.5.4.3.1"><span class="term"><code class="literal">sudo -s (&lt;command&gt;)</code></span></dt><dd><p>
              Starts a shell specified by the <code class="envar">SHELL</code> environment
              variable or the target user's default shell. If a command is
              specified, it is passed to the shell (with the
              <code class="option">-c</code> option). Otherwise the shell runs in
              interactive mode.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux:~ &gt; </code>sudo -s
root's password:
<code class="prompt user">root:/home/tux # </code>exit
<code class="prompt user">tux:~ &gt; </code></pre></div></dd><dt id="id-1.3.3.3.5.4.3.2"><span class="term"><code class="literal">sudo -i (&lt;command&gt;)</code></span></dt><dd><p>
              Similar to <code class="option">-s</code>, but starts the shell as a login
              shell. This means that the shell's start-up files
              (<code class="filename">.profile</code> etc.) are processed, and the
              current working directory is set to the target user's home
              directory.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux:~ &gt; </code>sudo -i
root's password:
<code class="prompt user">root:~ # </code>exit
<code class="prompt user">tux:~ &gt; </code></pre></div></dd></dl></div><div id="id-1.3.3.3.5.4.4" data-id-title="Environment variables" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Environment variables</div><p>
          By default, <code class="command">sudo</code> does not propagate environment variables. This
          behavior can be changed using the <code class="literal">env_reset</code> option
          (see <a class="xref" href="cha-adm-sudo.html#tab-adm-sudo-options" title="Useful flags and options">Useful flags and options</a>).
        </p></div></section></section><section class="sect1" id="sec-sudo-conf" data-id-title="Configuring sudo"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.2 </span><span class="title-name">Configuring <code class="command">sudo</code></span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sec-sudo-conf">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <code class="command">sudo</code> provides a wide range on configurable options.
    </p><div id="id-1.3.3.3.6.3" data-id-title="Locked yourself out of sudo" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Locked yourself out of sudo</div><p>
        If you accidentally locked yourself out of <code class="command">sudo</code>, use <code class="command">su
        -</code> and the <code class="systemitem">root</code> password to start a root shell. To fix
        the error, run <code class="command">visudo</code>.
      </p></div><div id="id-1.3.3.3.6.4" data-id-title="Example configurations are for demonstration purposes only" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Example configurations are for demonstration purposes only</div><p>
        The example rules outlined below are purely for demonstration purposes. 
        Use them to understand the general syntax of <code class="command">sudo</code> configuration files. 
        Do not use them in real-world setups, because they 
        do not reflect the complexity of these environments.
      </p></div><section class="sect2" id="sudo-creating-custom-configuration-bp" data-id-title="sudo configuration best practices"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.1 </span><span class="title-name"><code class="command">sudo</code> configuration best practices</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sudo-creating-custom-configuration-bp">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Before you start, here are a few ground rules for maintaining <code class="command">sudo</code> configurations:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.3.6.5.3.1"><span class="term">Always use <code class="command">visudo</code> to edit <code class="command">sudo</code> configuration files</span></dt><dd><p>
              Any changes to the <code class="command">sudo</code> configuration should be done using the 
              <code class="command">visudo</code> command. <code class="command">visudo</code> is a 
              tailor-made tool that allows you to edit the <code class="command">sudo</code> configuration 
              files and runs basic syntax checks, making sure that the 
              configuration remains intact and functional. A faulty <code class="command">sudo</code> 
              configuration can result in a user being locked out of their own system.
            </p></dd><dt id="id-1.3.3.3.6.5.3.2"><span class="term">Always create custom configurations under <code class="filename">/etc/sudoers.d/</code></span></dt><dd><p>
              Custom configurations must reside under
              <code class="filename">/etc/sudoers.d/</code> to be pulled in by <code class="command">sudo</code>. 
              Settings in the custom configuration files take precedence over the 
              ones in the default configuration in <code class="filename">/etc/sudoers</code>. 
            </p></dd><dt id="id-1.3.3.3.6.5.3.3"><span class="term">Always mind the order in which configurations are read</span></dt><dd><p>
              To make sure the custom configurations are read in the correct order, prefix them with numbers.
              Use leading zeroes to establish the order in which the files are read. For example,
              <code class="filename">01_myfirstconfig</code> is parsed before
              <code class="filename">10_myotherconfig</code>. If a directive has been set 
              in a file that is read before another file that contains 
              conflicting information, the last-read directive is applied. 
            </p></dd><dt id="id-1.3.3.3.6.5.3.4"><span class="term">Always use descriptive file names</span></dt><dd><p>
              Use file names that hint at what the configuration file does. This 
              helps you keep track of what your <code class="command">sudo</code> setup is supposed to do.
            </p></dd></dl></div></section><section class="sect2" id="sudo-creating-custom-config-single-user" data-id-title="Create a user-specific configuration file"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.2 </span><span class="title-name">Create a user-specific configuration file</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sudo-creating-custom-config-single-user">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Create a <code class="command">sudo</code> configuration file that allows a normal user (<code class="systemitem">tux</code>) 
        to use the <code class="command">useradd</code> command with their own password 
        instead of the <code class="systemitem">root</code> password. 
      </p><div class="example" id="ex-sudo-custom-config-user" data-id-title="Create a user-specific configuration file"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 2.1: </span><span class="title-name">Create a user-specific configuration file </span></span><a title="Permalink" class="permalink" href="cha-adm-sudo.html#ex-sudo-custom-config-user">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
              As system administrator (<code class="systemitem">root</code>), create a custom configuration 
              file that holds the new user-specific directives by starting 
              <code class="command">visudo</code>. Use both numbering and a descriptive name:
            </p><div class="verbatim-wrap"><pre class="screen">  <code class="prompt root"># </code><code class="command">visudo -f /etc/sudoers.d/02_usermanagement</code></pre></div></li><li class="step"><p>
              Create a rule that allows <code class="systemitem">tux</code> to execute the 
              <code class="command">/usr/sbin/useradd</code> binary in the entire environment 
              that this <code class="command">sudo</code> configuration is applied to:
            </p><div class="verbatim-wrap"><pre class="screen">  tux<span class="callout" id="co-who">1</span> ALL<span class="callout" id="co-where">2</span> = /usr/sbin/useradd<span class="callout" id="co-what">3</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-who"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  Specify the user or group. List users by name or 
                  <code class="literal">#UID</code>, and groups by <code class="literal">%GROUPNAME</code>. 
                  Separate multiple items with commas. To negate entries, use <code class="literal">!</code>.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-where"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  Specify one or several (separated by commas) hosts. Use 
                  (fully qualified) host names or IP addresses. Add 
                  <code class="literal">ALL</code> to enforce this setting globally 
                  across all hosts. Use <code class="literal">!</code> for negations.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-what"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  Specify one or several executables (separated by commas). When 
                  specifying them, make sure to mind the following rules:
                </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.3.6.6.3.2.2.3.3.2.1"><span class="term"><code class="command">/usr/sbin/useradd</code></span></dt><dd><p>
                        Without any additional options added, this allows the 
                        execution of every possible <code class="command">useradd</code> command.
                      </p></dd><dt id="id-1.3.3.3.6.6.3.2.2.3.3.2.2"><span class="term"><code class="command">/usr/sbin/useradd -c</code></span></dt><dd><p>
                        If you explicitly specify an option, then that option is 
                        the only one that is allowed. Nothing else would be available
                        to the user you specified above.
                      </p></dd><dt id="id-1.3.3.3.6.6.3.2.2.3.3.2.3"><span class="term"><code class="command">/usr/sbin/useradd ""</code></span></dt><dd><p>
                        This would just let the user invoke a mere 
                        <code class="command">useradd</code> without any option at all. 
                      </p></dd></dl></div><p>
                  In the example above, you would want to either allow all
                  options and subcommands or limit them to a few for security 
                  reasons, but forbidding a user from specifying any option at all 
                  would be pointless in this context.
                </p></td></tr></table></div></li><li class="step"><p>
              To let the user use their own password instead of the <code class="systemitem">root</code> 
              password, add the following line:
            </p><div class="verbatim-wrap"><pre class="screen">Defaults:tux !targetpw</pre></div><p>
              When active, this flag requires the user to enter the password of
              the target user, that is, <code class="systemitem">root</code>. This flag is enabled by
              default on any <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> system. Negate it using
              <code class="literal">!</code> to require the user to just enter their own
              password instead of the <code class="systemitem">root</code> password.
            </p></li><li class="step"><p>
              Save the configuration, leave the editor and open a second shell to test 
              whether <code class="command">sudo</code> honors your new configuration.
            </p></li></ol></div></div></div></div></section><section class="sect2" id="sudo-creating-custom-config-group" data-id-title="Create custom configurations by grouping items"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.3 </span><span class="title-name">Create custom configurations by grouping items</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sudo-creating-custom-config-group">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Modify the configuration from <a class="xref" href="cha-adm-sudo.html#ex-sudo-custom-config-user" title="Create a user-specific configuration file">Example 2.1, “Create a user-specific configuration file”</a> 
        so that a group of named users can run the <code class="command">useradd</code> 
        command without the need for the <code class="systemitem">root</code> password. Also, add the 
        <code class="command">usermod</code> and <code class="command">userdel</code> to the list of 
        commands available to this group.
      </p><div class="example" id="ex-sudo-custom-config-group" data-id-title="Create custom configurations by grouping items"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 2.2: </span><span class="title-name">Create custom configurations by grouping items </span></span><a title="Permalink" class="permalink" href="cha-adm-sudo.html#ex-sudo-custom-config-group">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
              To modify the example configuration, open it as system administrator with 
              <code class="command">visudo</code>:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">visudo /etc/sudoers.d/02_usermanagement</code></pre></div></li><li class="step"><p>
              Add more users to the rule in a comma-separated list:
            </p><div class="verbatim-wrap"><pre class="screen">tux, wilber ALL = /usr/sbin/useradd</pre></div></li><li class="step"><p>
              To allow the listed users to execute a list of commands, specify the 
              commands as a comma-separated list:
            </p><div class="verbatim-wrap"><pre class="screen">tux, wilber ALL = /usr/sbin/useradd, /usr/sbin/usermod, /usr/sbin/userdel</pre></div></li><li class="step"><p>
              To let the listed users use their own password instead of the <code class="systemitem">root</code> 
              password, add the following line:
            </p><div class="verbatim-wrap"><pre class="screen">Defaults:tux, wilber !targetpw</pre></div><p>
              When active, this flag requires the listed users to enter the
              password of the target user, that is, <code class="systemitem">root</code>. This flag is
              enabled by default on any <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> system. Negate it using
              <code class="literal">!</code> to require the listed users to just enter
              their own password instead of the <code class="systemitem">root</code> password.
            </p></li><li class="step"><p>
              Save the configuration, leave the editor and open a second shell to test 
              whether <code class="command">sudo</code> honors your new configuration.
            </p></li></ol></div></div></div></div></section><section class="sect2" id="sudo-creating-custom-config-aliases" data-id-title="Simplify configurations by applying aliases"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.4 </span><span class="title-name">Simplify configurations by applying aliases</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sudo-creating-custom-config-aliases">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Use aliases to simplify your custom configuration from 
        <a class="xref" href="cha-adm-sudo.html#ex-sudo-custom-config-group" title="Create custom configurations by grouping items">Example 2.2, “Create custom configurations by grouping items”</a> even further. Grouping items 
        helps to a certain extent, but using global aliases for users, 
        commands and hosts is the most efficient way to keep a clean and 
        lean <code class="command">sudo</code> configuration.
      </p><p>
        Using aliases and groups instead of lists is a much better way to address 
        changes in your setup. Should a user leave, just remove them from the 
        global <code class="literal">User_Alias</code> declaration in your alias declaration 
        file instead of scouring all the separate custom configuration files. 
        The same procedure applies for any other type of alias 
        (<code class="literal">Host_Alias</code>, <code class="literal">Cmnd_Alias</code> 
        and <code class="literal">Runas_Alias</code>).
      </p><div class="example" id="ex-sudo-custom-config-alias" data-id-title="Simplify configurations by applying aliases"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 2.3: </span><span class="title-name">Simplify configurations by applying aliases </span></span><a title="Permalink" class="permalink" href="cha-adm-sudo.html#ex-sudo-custom-config-alias">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
              Create a new file to hold your global alias definitions:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">visudo /etc/sudoers.d/01_aliases</code></pre></div></li><li class="step"><p>
              Add the following line to create the <code class="literal">TEAMLEADERS</code> 
              alias:
            </p><div class="verbatim-wrap"><pre class="screen">User_Alias    TEAMLEADERS = tux, wilber</pre></div></li><li class="step"><p>
              Add the following line to create the <code class="literal">USERMANAGEMENT</code> alias:
            </p><div class="verbatim-wrap"><pre class="screen">Cmnd_Alias    USERMANAGEMENT = /usr/sbin/useradd, /usr/sbin/usermod, /usr/sbin/userdel</pre></div></li><li class="step"><p>
              Save your changes and exit <code class="command">visudo</code>.
            </p></li><li class="step"><p>
              As system administrator, start <code class="command">visudo</code> to edit the 
              example configuration file:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">visudo -f /etc/sudoers.d/02_usermanagement</code></pre></div></li><li class="step"><p>
              Delete the previous rule and replace it with the following rule that 
              uses the aliases you have just defined above:
            </p><div class="verbatim-wrap"><pre class="screen">TEAMLEADERS ALL = USERMANAGEMENT</pre></div></li><li class="step"><p>
              To let all the users defined by <code class="literal">User_Alias</code> use 
              their own password instead of the <code class="systemitem">root</code> password, add
              the following line:
            </p><div class="verbatim-wrap"><pre class="screen">Defaults:TEAMLEADERS !targetpw</pre></div></li><li class="step"><p>
              Save the configuration, leave the editor and open a second shell to test 
              whether <code class="command">sudo</code> honors your new configuration.
            </p></li></ol></div></div></div></div></section><section class="sect2" id="sec-sudo-conf-syntax" data-id-title="Basic sudoers configuration syntax"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.5 </span><span class="title-name">Basic sudoers configuration syntax</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sec-sudo-conf-syntax">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The sudoers configuration files contain two types of options: strings
        and flags. While strings can contain any value, flags can be turned
        either ON or OFF. The most important syntax constructs for sudoers
        configuration files are as follows:
      </p><div class="verbatim-wrap"><pre class="screen"># Everything on a line after # is ignored <span class="callout" id="co-sudo-syntax-comment">1</span>
Defaults !insults # Disable the insults flag <span class="callout" id="co-sudo-syntax-flag">2</span>
Defaults env_keep += "DISPLAY HOME" # Add DISPLAY and HOME to env_keep
tux ALL = NOPASSWD: /usr/bin/frobnicate, PASSWD: /usr/bin/journalctl <span class="callout" id="co-sudo-syntax-rule">3</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-syntax-comment"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            There are two exceptions: <code class="literal">#include</code> and
            <code class="literal">#includedir</code> are regular commands.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-syntax-flag"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            Remove the <code class="literal">!</code> character to set the desired flag
            to ON.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-syntax-rule"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            See <a class="xref" href="cha-adm-sudo.html#sec-sudo-conf-rule" title="2.2.6. Basic sudoers rules">Section 2.2.6, “Basic sudoers rules”</a>.
          </p></td></tr></table></div><div class="variablelist" id="tab-adm-sudo-options" data-id-title="Useful flags and options"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Useful flags and options </span></span><a title="Permalink" class="permalink" href="cha-adm-sudo.html#tab-adm-sudo-options">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.3.3.6.9.5.2"><span class="term"><code class="literal">targetpw</code></span></dt><dd><p>
              This flag controls whether the invoking user is required to enter
              the password of the target user (ON) (for example <code class="systemitem">root</code>) or
              the invoking user (OFF).
            </p><div class="verbatim-wrap"><pre class="screen">Defaults targetpw # Turn targetpw flag ON</pre></div></dd><dt id="id-1.3.3.3.6.9.5.3"><span class="term"><code class="literal">rootpw</code></span></dt><dd><p>
              If set, <code class="command">sudo</code> prompts for the <code class="systemitem">root</code> password. The default
              is OFF.
            </p><div class="verbatim-wrap"><pre class="screen">Defaults !rootpw # Turn rootpw flag OFF</pre></div></dd><dt id="id-1.3.3.3.6.9.5.4"><span class="term"><code class="literal">env_reset</code></span></dt><dd><p>
              If set, <code class="command">sudo</code> constructs a minimal environment with
              <code class="envar">TERM</code>, <code class="envar">PATH</code>, <code class="envar">HOME</code>,
              <code class="envar">MAIL</code>, <code class="envar">SHELL</code>,
              <code class="envar">LOGNAME</code>, <code class="envar">USER</code>,
              <code class="envar">USERNAME</code>, and <code class="envar">SUDO_*</code>. Additionally,
              variables listed in <code class="literal">env_keep</code> are imported from
              the calling environment. The default is ON.
            </p><div class="verbatim-wrap"><pre class="screen">Defaults env_reset # Turn env_reset flag ON</pre></div></dd><dt id="id-1.3.3.3.6.9.5.5"><span class="term"><code class="literal">env_keep</code></span></dt><dd><p>
              List of environment variables to keep when the
              <code class="literal">env_reset</code> flag is ON.
            </p><div class="verbatim-wrap"><pre class="screen"># Set env_keep to contain EDITOR and PROMPT
Defaults env_keep = "EDITOR PROMPT"
Defaults env_keep += "JRE_HOME" # Add JRE_HOME
Defaults env_keep -= "JRE_HOME" # Remove JRE_HOME</pre></div></dd><dt id="id-1.3.3.3.6.9.5.6"><span class="term"><code class="literal">env_delete</code></span></dt><dd><p>
              List of environment variables to remove when the
              <code class="literal">env_reset</code> flag is OFF.
            </p><div class="verbatim-wrap"><pre class="screen"># Set env_delete to contain EDITOR and PROMPT
Defaults env_delete = "EDITOR PROMPT"
Defaults env_delete += "JRE_HOME" # Add JRE_HOME
Defaults env_delete -= "JRE_HOME" # Remove JRE_HOME</pre></div></dd></dl></div><p>
        The <code class="literal">Defaults</code> token can also be used to create
        aliases for a collection of users, hosts, and commands. Furthermore, it
        is possible to apply an option only to a specific set of users.
      </p><p>
        For detailed information about the sudoers configuration files, consult <code class="command">man 5
        sudoers</code>.
      </p></section><section class="sect2" id="sec-sudo-conf-rule" data-id-title="Basic sudoers rules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.6 </span><span class="title-name">Basic sudoers rules</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sec-sudo-conf-rule">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Each rule follows the following scheme (<code class="literal">[]</code> marks
        optional parts):
      </p><div class="verbatim-wrap"><pre class="screen">#Who      Where         As whom      Tag                What
User_List Host_List = [(User_List)] [NOPASSWD:|PASSWD:] Cmnd_List</pre></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">sudoers rule syntax </span></span><a title="Permalink" class="permalink" href="cha-adm-sudo.html#id-1.3.3.3.6.10.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.3.3.6.10.4.2"><span class="term"><code class="literal">User_List</code></span></dt><dd><p>
              One or several (separated by comma) identifiers: either a user
              name, a group in the format <code class="literal">%GROUPNAME</code>, or a
              user ID in the format <code class="literal">#UID</code>. Negation can be
              specified with the <code class="literal">!</code> prefix.
            </p></dd><dt id="id-1.3.3.3.6.10.4.3"><span class="term"><code class="literal">Host_List</code></span></dt><dd><p>
              One or several (separated by comma) identifiers: either a (fully
              qualified) host name or an IP address. Negation can be specified
              with the <code class="literal">!</code> prefix. <code class="literal">ALL</code> is a
              common choice for <code class="literal">Host_List</code>.
            </p></dd><dt id="id-1.3.3.3.6.10.4.4"><span class="term"><code class="literal">NOPASSWD:|PASSWD:</code></span></dt><dd><p>
              The user is not prompted for a password when running commands
              matching <code class="literal">Cmd_List</code> after
              <code class="literal">NOPASSWD:</code>.
            </p><p>
              <code class="literal">PASSWD</code> is the default. It only needs to be
              specified when both <code class="literal">PASSWD</code> and
              <code class="literal">NOPASSWD</code> are on the same line:
            </p><div class="verbatim-wrap"><pre class="screen">tux ALL = PASSWD: /usr/bin/foo, NOPASSWD: /usr/bin/bar</pre></div></dd><dt id="id-1.3.3.3.6.10.4.5"><span class="term"><code class="literal">Cmnd_List</code></span></dt><dd><p>
              One or several (separated by comma) specifiers: a path to an
              executable, followed by an optional allowed argument.
            </p><div class="verbatim-wrap"><pre class="screen">/usr/bin/foo     # Anything allowed
/usr/bin/foo bar # Only "/usr/bin/foo bar" allowed
/usr/bin/foo ""  # No arguments allowed</pre></div></dd></dl></div><p>
        <code class="literal">ALL</code> can be used as <code class="literal">User_List</code>,
        <code class="literal">Host_List</code>, and <code class="literal">Cmnd_List</code>.
      </p><p>
        A rule that allows <code class="systemitem">tux</code> to run all commands as root without
        entering a password:
      </p><div class="verbatim-wrap"><pre class="screen">tux ALL = NOPASSWD: ALL</pre></div><p>
        A rule that allows <code class="systemitem">tux</code> to run <code class="command">systemctl restart
        apache2</code>:
      </p><div class="verbatim-wrap"><pre class="screen">tux ALL = /usr/bin/systemctl restart apache2</pre></div><p>
        A rule that allows <code class="systemitem">tux</code> to run <code class="command">wall</code> as
        <code class="systemitem">admin</code> with no arguments:
      </p><div class="verbatim-wrap"><pre class="screen">tux ALL = (admin) /usr/bin/wall ""</pre></div><div id="id-1.3.3.3.6.10.12" data-id-title="Unsafe rules" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Unsafe rules</div><p>
          <span class="emphasis"><em>Do not</em></span> use rules like <code class="literal">ALL ALL =
          ALL</code> without <code class="literal">Defaults targetpw</code>. Otherwise
          anyone can run commands as <code class="systemitem">root</code>.
        </p></div><div id="id-1.3.3.3.6.10.13" data-id-title="Winbind and sudo" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Winbind and sudo</div><p>
          When specifying the group name in the <code class="filename">sudoers</code>
          file, make sure that you use the NetBIOS domain name instead of the
          realm, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><em class="replaceable">%DOMAIN</em>\\<em class="replaceable">GROUP_NAME</em> ALL = (ALL) ALL</pre></div><p>
          Keep in mind that when using winbindd, the format also depends on the
          <code class="option">winbind separator</code> option in the
          <code class="filename">smb.conf</code> file. By default, it is
          <code class="literal">\</code>. If it is changed, for example, to
          <code class="literal">+</code>, then the account format in the
          <code class="filename">sudoers</code> file must be
          <code class="literal">DOMAIN+GROUP_NAME</code>.
        </p></div></section></section><section class="sect1" id="sec-sudo-usecases-xorg" data-id-title="Using sudo with X.Org applications"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.3 </span><span class="title-name">Using <code class="command">sudo</code> with X.Org applications</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sec-sudo-usecases-xorg">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Starting graphical applications with <code class="command">sudo</code> normally results in the
      following error:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> xterm
xterm: Xt error: Can't open display: %s
xterm: DISPLAY is not set</pre></div><p>
      A simple workaround is to use xhost to temporarily allow the root user
      to access the local user's X session. This is done using the following
      command:
    </p><div class="verbatim-wrap"><pre class="screen">xhost si:localuser:root</pre></div><p>
      The command below removes the granted access:
    </p><div class="verbatim-wrap"><pre class="screen">xhost -si:localuser:root</pre></div><div id="id-1.3.3.3.7.8" data-id-title="Potential security issue" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Potential security issue</div><p>
        Running graphical applications with root privileges has security
        implications. It is recommended to enable root access for a graphical
        application only as an exception. It is also recommended to revoke
        the granted root access as soon as the graphical application is
        closed.
      </p></div></section><section class="sect1" id="sec-adm-sudo-moreinfo" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.4 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="cha-adm-sudo.html#sec-adm-sudo-moreinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The <code class="command">sudo --help</code> command offers a brief overview of the
      available command line options, while the <code class="command">man sudoers</code>
      command provides detailed information about <code class="filename">sudoers</code>
      and its configuration.
    </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-adm-shell.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 1 </span>Bash and Bash scripts</span></a> </div><div><a class="pagination-link next" href="cha-yast-gui.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 3 </span>Using YaST</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-adm-sudo.html#sec-adm-sudo-usage"><span class="title-number">2.1 </span><span class="title-name">Basic <code class="command">sudo</code> usage</span></a></span></li><li><span class="sect1"><a href="cha-adm-sudo.html#sec-sudo-conf"><span class="title-number">2.2 </span><span class="title-name">Configuring <code class="command">sudo</code></span></a></span></li><li><span class="sect1"><a href="cha-adm-sudo.html#sec-sudo-usecases-xorg"><span class="title-number">2.3 </span><span class="title-name">Using <code class="command">sudo</code> with X.Org applications</span></a></span></li><li><span class="sect1"><a href="cha-adm-sudo.html#sec-adm-sudo-moreinfo"><span class="title-number">2.4 </span><span class="title-name">More information</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>