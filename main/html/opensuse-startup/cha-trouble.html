<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Common problems and their solutions | Start-Up | openSUSE Leap 15.6</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Common problems and their solutions | openSUSE Leap 15…" />
<meta name="description" content="This chapter describes a range of potential problems and their solutions. Even if your situation is not precisely listed, there may be one similar enough to of…" />
<meta name="product-name" content="openSUSE Leap" />
<meta name="product-number" content="15.6" />
<meta name="book-title" content="Start-Up" />
<meta name="chapter-title" content="Chapter 21. Common problems and their solutions" />
<meta name="tracker-url" content="https://bugzilla.opensuse.org/enter_bug.cgi" />
<meta name="tracker-type" content="bsc" />
<meta name="tracker-bsc-assignee" content="fs@suse.com" />
<meta name="tracker-bsc-component" content="Documentation" />
<meta name="tracker-bsc-product" content="openSUSE Distribution" />
<meta name="tracker-bsc-version" content="Leap 15.4" />
<meta property="og:title" content="Common problems and their solutions | openSUSE Leap 15…" />
<meta property="og:description" content="This chapter describes a range of potential problems and their solutions. Even if your situation is not precisely listed, there may be one similar enough to of…" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Common problems and their solutions | openSUSE Leap 15…" />
<meta name="twitter:description" content="This chapter describes a range of potential problems and their solutions. Even if your situation is not precisely listed, there may be one similar enough to of…" />
<link rel="home" href="index.html" title="openSUSE Leap Documentation" /><link rel="up" href="part-help.html" title="Part VI. Help and troubleshooting" /><link rel="prev" href="cha-adminhelp.html" title="Chapter 20. Help and documentation" /><link rel="next" href="bk01apa.html" title="Appendix A. GNU licenses" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Start-Up"><span class="book-icon">Start-Up</span></a><span> › </span><a class="crumb" href="part-help.html">Help and troubleshooting</a><span> › </span><a class="crumb" href="cha-trouble.html">Common problems and their solutions</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Start-Up</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="preface-start-up.html"><span class="number"> </span><span class="name">About this guide</span></a></li><li class="inactive"><a href="part-basics.html"><span class="number">I </span><span class="name">Installation</span></a><ol><li class="inactive"><a href="art-opensuse-installquick.html"><span class="number">1 </span><span class="name">Installation Quick Start</span></a></li><li class="inactive"><a href="cha-boot-parameters.html"><span class="number">2 </span><span class="name">Boot parameters</span></a></li><li class="inactive"><a href="cha-install.html"><span class="number">3 </span><span class="name">Installation steps</span></a></li><li class="inactive"><a href="cha-installation-troubleshooting.html"><span class="number">4 </span><span class="name">Troubleshooting</span></a></li></ol></li><li class="inactive"><a href="part-reference-administration.html"><span class="number">II </span><span class="name">Administration</span></a><ol><li class="inactive"><a href="cha-yast-userman.html"><span class="number">5 </span><span class="name">Managing users with YaST</span></a></li><li class="inactive"><a href="cha-yast-lang.html"><span class="number">6 </span><span class="name">Changing language and country settings with YaST</span></a></li><li class="inactive"><a href="cha-print.html"><span class="number">7 </span><span class="name">Printer operation</span></a></li><li class="inactive"><a href="cha-fuse.html"><span class="number">8 </span><span class="name">Accessing file systems with FUSE</span></a></li></ol></li><li class="inactive"><a href="part-reference-software.html"><span class="number">III </span><span class="name">Managing and updating software</span></a><ol><li class="inactive"><a href="cha-yast-software.html"><span class="number">9 </span><span class="name">Installing or removing software</span></a></li><li class="inactive"><a href="cha-add-ons.html"><span class="number">10 </span><span class="name">Installing add-on products</span></a></li><li class="inactive"><a href="cha-onlineupdate-you.html"><span class="number">11 </span><span class="name">YaST online update</span></a></li><li class="inactive"><a href="cha-update-osuse.html"><span class="number">12 </span><span class="name">Upgrading the system and system changes</span></a></li></ol></li><li class="inactive"><a href="part-bash.html"><span class="number">IV </span><span class="name">The Bash shell</span></a><ol><li class="inactive"><a href="cha-new-bash.html"><span class="number">13 </span><span class="name">Shell basics</span></a></li><li class="inactive"><a href="cha-adm-shell.html"><span class="number">14 </span><span class="name">Bash and Bash scripts</span></a></li></ol></li><li class="inactive"><a href="part-hardware.html"><span class="number">V </span><span class="name">Hardware configuration</span></a><ol><li class="inactive"><a href="sec-yast-hw-keym.html"><span class="number">15 </span><span class="name">Setting up your system keyboard layout</span></a></li><li class="inactive"><a href="sec-yast-hw-sound.html"><span class="number">16 </span><span class="name">Setting up sound cards</span></a></li><li class="inactive"><a href="sec-yast-hw-print.html"><span class="number">17 </span><span class="name">Setting up a printer</span></a></li><li class="inactive"><a href="sec-yast-hw-scan.html"><span class="number">18 </span><span class="name">Setting up a scanner</span></a></li><li class="inactive"><a href="cha-nvdimm.html"><span class="number">19 </span><span class="name">Persistent memory</span></a></li></ol></li><li class="inactive"><a href="part-help.html"><span class="number">VI </span><span class="name">Help and troubleshooting</span></a><ol><li class="inactive"><a href="cha-adminhelp.html"><span class="number">20 </span><span class="name">Help and documentation</span></a></li><li class="inactive"><a href="cha-trouble.html"><span class="number">21 </span><span class="name">Common problems and their solutions</span></a></li></ol></li><li class="inactive"><a href="bk01apa.html"><span class="number">A </span><span class="name">GNU licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 20. Help and documentation" href="cha-adminhelp.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Appendix A. GNU licenses" href="bk01apa.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Start-Up"><span class="book-icon">Start-Up</span></a><span> › </span><a class="crumb" href="part-help.html">Help and troubleshooting</a><span> › </span><a class="crumb" href="cha-trouble.html">Common problems and their solutions</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 20. Help and documentation" href="cha-adminhelp.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Appendix A. GNU licenses" href="bk01apa.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha-trouble"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname "><span class="productname"><span class="phrase">openSUSE Leap</span></span></span> <span class="productnumber "><span class="productnumber"><span class="phrase">15.6</span></span></span></div><div><h2 class="title"><span class="number">21 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Common problems and their solutions</span> <a title="Permalink" class="permalink" href="cha-trouble.html#">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>cha-trouble</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha-trouble.html#sec-trouble-info"><span class="number">21.1 </span><span class="name">Finding and gathering information</span></a></span></dt><dt><span class="sect1"><a href="cha-trouble.html#sec-trouble-boot"><span class="number">21.2 </span><span class="name">Boot problems</span></a></span></dt><dt><span class="sect1"><a href="cha-trouble.html#sec-trouble-login"><span class="number">21.3 </span><span class="name">Login problems</span></a></span></dt><dt><span class="sect1"><a href="cha-trouble.html#sec-trouble-netconfig"><span class="number">21.4 </span><span class="name">Network problems</span></a></span></dt><dt><span class="sect1"><a href="cha-trouble.html#sec-trouble-data"><span class="number">21.5 </span><span class="name">Data problems</span></a></span></dt></dl></div></div><p>
    This chapter describes a range of potential problems and their solutions.
    Even if your situation is not precisely listed, there may be one
    similar enough to offer hints to the solution of your problem.
  </p><div class="sect1 " id="sec-trouble-info"><div class="titlepage"><div><div><h2 class="title"><span class="number">21.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Finding and gathering information</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-info">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-info</li></ul></div></div></div></div><p>
      Linux reports things in a detailed way. There are several places to look
      when you encounter problems with your system. Most of them are standard
      to Linux systems, and several are relevant to <span class="productname"><span class="phrase">openSUSE Leap</span></span>
      systems. Most log files can be viewed with YaST (<span class="guimenu ">Miscellaneous</span> › <span class="guimenu ">Start-Up Log</span>).
    </p><p>
      YaST offers the possibility to collect all system information needed by
      the support team. Use <span class="guimenu ">Other</span> › <span class="guimenu ">Support</span> and
      select the problem category. When all information is gathered, attach it
      to your support request.
    </p><p>
      A list of the most frequently checked log files follows with the
      description of their typical purpose. Paths containing
      <code class="filename">~</code> refer to the current user's home directory.
    </p><div class="table" id="tab-trouble-info"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 21.1: </span><span class="name">Log files </span><a title="Permalink" class="permalink" href="cha-trouble.html#tab-trouble-info">#</a></h6></div><div class="table-contents"><table class="table" summary="Log files" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
              <p>
                Log File
              </p>
            </th><th>
              <p>
                Description
              </p>
            </th></tr></thead><tbody><tr><td>
              <p>
                <code class="filename">~/.xsession-errors</code>
              </p>
            </td><td>
              <p>
                Messages from the desktop applications currently running.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/var/log/apparmor/</code>
              </p>
            </td><td>
              <p>
                Log files from AppArmor, see <span class="intraxref">Book “Security and Hardening Guide”</span>
                for detailed information.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/var/log/audit/audit.log</code>
              </p>
            </td><td>
              <p>
                Log file from Audit to track any access to files, directories,
                or resources of your system, and trace system calls. See
                <span class="intraxref">Book “Security and Hardening Guide”</span> for detailed information.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/var/log/mail.*</code>
              </p>
            </td><td>
              <p>
                Messages from the mail system.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/var/log/NetworkManager</code>
              </p>
            </td><td>
              <p>
                Log file from NetworkManager to collect problems with network
                connectivity
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/var/log/samba/</code>
              </p>
            </td><td>
              <p>
                Directory containing Samba server and client log messages.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/var/log/warn</code>
              </p>
            </td><td>
              <p>
                All messages from the kernel and system log daemon with the
                <span class="quote">“<span class="quote ">warning</span>”</span> level or higher.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/var/log/wtmp</code>
              </p>
            </td><td>
              <p>
                Binary file containing user login records for the current
                machine session. View it with <code class="command">last</code>.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/var/log/Xorg.*.log</code>
              </p>
            </td><td>
              <p>
                Start-up and runtime log files from the X Window
                System. It is useful for debugging failed X start-ups.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/var/log/YaST2/</code>
              </p>
            </td><td>
              <p>
                Directory containing YaST's actions and their results.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/var/log/zypper.log</code>
              </p>
            </td><td>
              <p>
                Log file of Zypper.
              </p>
            </td></tr></tbody></table></div></div><p>
      Apart from log files, your machine also supplies you with information
      about the running system. See
      <a class="xref" href="cha-trouble.html#tab-trouble-system" title="System information with the /proc file system">Table 21.2: System information with the <code class="filename">/proc</code> file system</a>
    </p><div class="table" id="tab-trouble-system"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 21.2: </span><span class="name">System information with the <code class="filename">/proc</code> file system </span><a title="Permalink" class="permalink" href="cha-trouble.html#tab-trouble-system">#</a></h6></div><div class="table-contents"><table class="table" summary="System information with the /proc file system" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
              <p>
                File
              </p>
            </th><th>
              <p>
                Description
              </p>
            </th></tr></thead><tbody><tr><td>
              <p>
                <code class="filename">/proc/cpuinfo</code>
              </p>
            </td><td>
              <p>
                Contains processor information, including its type, make,
                model, and performance.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/proc/dma</code>
              </p>
            </td><td>
              <p>
                Shows which DMA channels are currently being used.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/proc/interrupts</code>
              </p>
            </td><td>
              <p>
                Shows which interrupts are in use, and how many of each have
                been in use.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/proc/iomem</code>
              </p>
            </td><td>
              <p>
                Displays the status of I/O (input/output) memory.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/proc/ioports</code>
              </p>
            </td><td>
              <p>
                Shows which I/O ports are in use at the moment.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/proc/meminfo</code>
              </p>
            </td><td>
              <p>
                Displays memory status.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/proc/modules</code>
              </p>
            </td><td>
              <p>
                Displays the individual modules.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/proc/mounts</code>
              </p>
            </td><td>
              <p>
                Displays devices currently mounted.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/proc/partitions</code>
              </p>
            </td><td>
              <p>
                Shows the partitioning of all hard disks.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/proc/version</code>
              </p>
            </td><td>
              <p>
                Displays the current version of Linux.
              </p>
            </td></tr></tbody></table></div></div><p>
      Apart from the <code class="filename">/proc</code> file system, the Linux kernel
      exports information with the <code class="literal">sysfs</code> module, an
      in-memory file system. This module represents kernel objects, their
      attributes and relationships. For more information about
      <code class="literal">sysfs</code>, see the context of udev in
      <span class="intraxref">Book “Reference”, Chapter 16 “Dynamic kernel device management with <code class="systemitem">udev</code>”</span>.
      <a class="xref" href="cha-trouble.html#tab-trouble-sysfs" title="System information with the /sys file system">Table 21.3</a>
      contains an overview of the most common directories under
      <code class="filename">/sys</code>.
    </p><div class="table" id="tab-trouble-sysfs"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 21.3: </span><span class="name">System information with the <code class="filename">/sys</code> file system </span><a title="Permalink" class="permalink" href="cha-trouble.html#tab-trouble-sysfs">#</a></h6></div><div class="table-contents"><table class="table" summary="System information with the /sys file system" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
              <p>
                File
              </p>
            </th><th>
              <p>
                Description
              </p>
            </th></tr></thead><tbody><tr><td>
              <p>
                <code class="filename">/sys/block</code>
              </p>
            </td><td>
              <p>
                Contains subdirectories for each block device discovered in the
                system. Generally, these are mostly disk type devices.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/sys/bus</code>
              </p>
            </td><td>
              <p>
                Contains subdirectories for each physical bus type.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/sys/class</code>
              </p>
            </td><td>
              <p>
                Contains subdirectories grouped together as a functional types
                of devices (like graphics, net, printer, etc.)
              </p>
            </td></tr><tr><td>
              <p>
                <code class="filename">/sys/device</code>
              </p>
            </td><td>
              <p>
                Contains the global device hierarchy.
              </p>
            </td></tr></tbody></table></div></div><p>
      Linux comes with several tools for system analysis and monitoring. See
      <span class="intraxref">Book “System Analysis and Tuning Guide”, Chapter 2 “System monitoring utilities”</span> for a selection of the most important ones
      used in system diagnostics.
    </p><p>
      Each of the following scenarios begins with a header describing the
      problem followed by a paragraph or two offering suggested solutions,
      available references for more detailed solutions, and cross-references to
      other scenarios that are related.
    </p></div><div class="sect1 " id="sec-trouble-boot"><div class="titlepage"><div><div><h2 class="title"><span class="number">21.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Boot problems</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-boot">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-boot</li></ul></div></div></div></div><p>
      Boot problems are situations when your system does not boot properly
      (does not boot to the expected target and login screen).
    </p><div class="sect2 " id="sec-trouble-boot-nogrub"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The GRUB 2 boot loader fails to load</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-boot-nogrub">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-boot-nogrub</li></ul></div></div></div></div><p>
        If the hardware is functioning properly, it is possible that the boot
        loader is corrupted and Linux cannot start on the machine. In this
        case, it is necessary to repair the boot loader. To do so, you need to
        start the Rescue System as described in
        <a class="xref" href="cha-trouble.html#sec-trouble-data-recover-rescue" title="21.5.2. Using the rescue system">Section 21.5.2, “Using the rescue system”</a> and follow the
        instructions in <a class="xref" href="cha-trouble.html#sec-trouble-data-recover-rescue-grub" title="21.5.2.4. Modifying and re-installing the boot loader">Section 21.5.2.4, “Modifying and re-installing the boot loader”</a>.
      </p><p>
        Alternatively, you can use the Rescue System to fix the boot loader as
        follows. Boot your machine from the installation media. In the boot
        screen, choose <span class="guimenu ">More</span> › <span class="guimenu ">Boot Linux
        System</span>. Select the disk containing the installed
        system and kernel with the default kernel options.
      </p><div class="figure" id="fig-rescue-selectdisk"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/rescue_select_disk.png" target="_blank"><img src="images/rescue_select_disk.png" width="" alt="Select disk" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 21.1: </span><span class="name">Select disk </span><a title="Permalink" class="permalink" href="cha-trouble.html#fig-rescue-selectdisk">#</a></h6></div></div><p>
        When the system is booted, start YaST and switch to
        <span class="guimenu ">System</span> › <span class="guimenu ">Boot
        Loader</span>. Make sure that the <span class="guimenu ">Write
        generic Boot Code to MBR</span> option is enabled, and click
        <span class="guimenu ">OK</span>. This fixes the corrupted boot loader by
        overwriting it, or installs the boot loader if it is missing.
      </p><p>
        Other reasons for the machine not booting may be BIOS-related:
      </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.3.8.3.5.3.7.1"><span class="term ">BIOS settings</span></dt><dd><p>
              Check your BIOS for references to your hard disk. GRUB 2 may
              simply not be started if the hard disk itself cannot be found
              with the current BIOS settings.
            </p></dd><dt id="id-1.3.8.3.5.3.7.2"><span class="term ">BIOS boot order</span></dt><dd><p>
              Check whether your system's boot order includes the hard disk. If
              the hard disk option was not enabled, your system may install
              properly, but fails to boot when access to the hard disk is
              required.
            </p></dd></dl></div></div><div class="sect2 " id="sec-trouble-boot-hang"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">No login or prompt appears</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-boot-hang">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-boot-hang</li></ul></div></div></div></div><p>
        This behavior typically occurs after a failed kernel upgrade and it is
        known as a <span class="emphasis"><em>kernel panic</em></span> because of the type of
        error on the system console that sometimes can be seen at the final
        stage of the process. If, in fact, the machine has just been rebooted
        following a software update, the immediate goal is to reboot it using
        the old, proven version of the Linux kernel and associated files. This
        can be done in the GRUB 2 boot loader screen during the boot process as
        follows:
      </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
            Reboot the computer using the reset button, or switch it off and on
            again.
          </p></li><li class="step "><p>
            When the GRUB 2 boot screen becomes visible, select the
            <span class="guimenu ">Advanced Options</span> entry and choose the previous
            kernel from the menu. The machine will boot using the prior version
            of the kernel and its associated files.
          </p></li><li class="step " id="st-trouble-boot-hang-modify-grub"><p>
            After the boot process has completed, remove the newly installed
            kernel and, if necessary, set the default boot entry to the old
            kernel using the YaST <span class="guimenu ">Boot Loader</span> module. For
            more information, refer to <span class="intraxref">Book “Reference”, Chapter 12 “The boot loader GRUB 2”, Section 12.3 “Configuring the boot loader with YaST”</span>.
            However, doing this is not necessary because automated
            update tools normally modify it for you during the rollback
            process.
          </p></li><li class="step "><p>
            Reboot.
          </p></li></ol></div></div><p>
        If this does not fix the problem, boot the computer using the
        installation media. After the machine has booted, continue with
        <a class="xref" href="cha-trouble.html#st-trouble-boot-hang-modify-grub" title="Step 3">Step 3</a>.
      </p></div><div class="sect2 " id="sec-trouble-boot-prompt"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">No graphical login</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-boot-prompt">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-boot-prompt</li></ul></div></div></div></div><p>
        If the machine starts, but does not boot into the graphical login
        manager, anticipate problems either with the choice of the default
        systemd target or the configuration of the X Window System. To check
        the current systemd default target run the command <code class="command">sudo
        systemctl get-default</code>. If the value returned is
        <span class="emphasis"><em>not</em></span> <code class="literal">graphical.target</code>, run the
        command <code class="command">sudo systemctl isolate graphical.target</code>. If
        the graphical login screen starts, log in and start <span class="guimenu ">YaST</span> › <span class="guimenu ">System</span> › <span class="guimenu ">Services Manager</span> and set the
        <span class="guimenu ">Default System Target</span> to <span class="guimenu ">Graphical
        Interface</span>. From now on the system should boot into the
        graphical login screen.
      </p><p>
        If the graphical login screen does not start even if having booted or
        switched to the graphical target, your desktop or X Window software may
        be misconfigured or corrupted. Examine the log files at
        <code class="filename">/var/log/Xorg.*.log</code> for detailed messages from the
        X server as it attempted to start. If the desktop fails during start,
        it may log error messages to the system journal that can be queried
        with the command <code class="command">journalctl</code> (see
        <span class="intraxref">Book “Reference”, Chapter 11 “<code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal”</span> for more information). If these error
        messages hint at a configuration problem in the X server, try to fix
        these issues. If the graphical system still does not come up, consider
        reinstalling the graphical desktop.
      </p></div><div class="sect2 " id="sec-trouble-boot-btrfs"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.2.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Root Btrfs partition cannot be mounted</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-boot-btrfs">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-boot-btrfs</li></ul></div></div></div></div><p>
        If a <code class="systemitem">btrfs</code> root partition
        becomes corrupted, try the following options:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
            Mount the partition with the <code class="option">-o recovery</code> option.
          </p></li><li class="listitem "><p>
            If that fails, run <code class="command">btrfs-zero-log</code> on your root
            partition.
          </p></li></ul></div></div><div class="sect2 " id="sec-trouble-boot-forcecheck"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.2.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Force checking root partitions</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-boot-forcecheck">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-boot-forcecheck</li></ul></div></div></div></div><p>
        If the root partition becomes corrupted, use the parameter
        <em class="parameter ">forcefsck</em> on the boot prompt. This passes the
        option <code class="option">-f</code> (force) to the <code class="command">fsck</code>
        command.
      </p></div><div class="sect2 " id="sec-trouble-boot-disable-swap"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.2.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Disable swap to enable booting</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-boot-disable-swap">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-boot-disable-swap</li></ul></div></div></div></div><p>
        When a swap device is not available and the system cannot enable it
        during boot, booting may fail. Try disabling all swap devices by
        appending the following options to the kernel command line:
      </p><div class="verbatim-wrap"><pre class="screen">systemd.device_wants_unit=off systemd.mask=swap.target</pre></div><p>
        You may also try disabling specific swap devices:
      </p><div class="verbatim-wrap"><pre class="screen">systemd.mask=dev-sda1.swap</pre></div></div><div class="sect2 " id="sec-trouble-boot-dual-boot"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.2.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">GRUB 2 fails during reboot on a dual-boot system</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-boot-dual-boot">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-boot-dual-boot</li></ul></div></div></div></div><p>
        If GRUB 2 fails during reboot, disable the <code class="option">Fast Boot</code>
        setting in the BIOS.
      </p></div></div><div class="sect1 " id="sec-trouble-login"><div class="titlepage"><div><div><h2 class="title"><span class="number">21.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Login problems</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-login">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-login</li></ul></div></div></div></div><p>
      Login problems occur when your system refuses to accept the user name and
      password, or accepts them but then fails to start the graphic desktop,
      produces errors, or drops to a command line, for example.
    </p><div class="sect2 " id="sec-trouble-login-no"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Valid user name and password combinations fail</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-login-no">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-login-no</li></ul></div></div></div></div><p>
        This often occurs when the system is configured to use network
        authentication or directory services and cannot retrieve results from
        its configured servers. The <code class="systemitem">root</code> user is the only local user that
        can still log in to these machines. The following
        are common reasons a machine appears functional but cannot process
        logins correctly:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
            The network is not working. For further directions on this, turn to
            <a class="xref" href="cha-trouble.html#sec-trouble-netconfig" title="21.4. Network problems">Section 21.4, “Network problems”</a>.
          </p></li><li class="listitem "><p>
            DNS is not working at the moment (which prevents GNOME from
            working and the system from making validated requests to secure
            servers). One indication that this is the case is that the machine
            takes a long time to respond to any action. Find more information
            about this topic in <a class="xref" href="cha-trouble.html#sec-trouble-netconfig" title="21.4. Network problems">Section 21.4, “Network problems”</a>.
          </p></li><li class="listitem "><p>
            If the system is configured to use Kerberos, the system's local
            time may have drifted past the accepted variance with the Kerberos
            server time (this is typically 300 seconds). If NTP (network time
            protocol) is not working properly or local NTP servers are not
            working, Kerberos authentication ceases to function because it
            depends on common clock synchronization across the network.
          </p></li><li class="listitem "><p>
            The system's authentication configuration is misconfigured. Check
            the PAM configuration files involved for any typographical errors
            or misordering of directives. For additional background information
            about PAM and the syntax of the configuration files involved, refer
            to <span class="intraxref">Book “Security and Hardening Guide”, Chapter 2 “Authentication with PAM”</span>.
          </p></li><li class="listitem "><p>
            The home partition is encrypted. Find more information about this
            topic in <a class="xref" href="cha-trouble.html#sec-trouble-login-encrypted" title="21.3.3. Login to encrypted home partition fails">Section 21.3.3, “Login to encrypted home partition fails”</a>.
          </p></li></ul></div><p>
        In cases that do not involve external network problems, the solution is
        to log in as <code class="systemitem">root</code> and repair the configuration. If you cannot log
        in to the running system, reboot it into the rescue mode as outlined in
        <span class="intraxref">Book “Reference”, Chapter 12 “The boot loader GRUB 2”, Section 12.5 “Rescue mode”, Entering rescue mode</span>.
       </p></div><div class="sect2 " id="sec-trouble-login-pw"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Valid user name and password not accepted</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-login-pw">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-login-pw</li></ul></div></div></div></div><p>
        This is by far the most common problem users encounter, because there
        are many reasons this can occur. Depending on whether you use local
        user management and authentication or network authentication, login
        failures occur for different reasons.
      </p><p>
        Local user management can fail for the following reasons:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
            The user may have entered the wrong password.
          </p></li><li class="listitem "><p>
            The user's home directory containing the desktop configuration
            files is corrupted or write protected.
          </p></li><li class="listitem "><p>
            There may be problems with the X Window System authenticating this
            particular user, especially if the user's home directory has been
            used with another Linux distribution before installing the current
            one.
          </p></li></ul></div><p>
        To locate the reason for a local login failure, proceed as follows:
      </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
            Check whether the user remembered their password correctly before
            you start debugging the whole authentication mechanism. If the user
            may have not have remembered their password correctly, use the
            YaST User Management module to change the user's password. Pay
            attention to the <span class="keycap">Caps Lock</span> key and unlock it, if
            necessary.
          </p></li><li class="step "><p>
            Log in as <code class="systemitem">root</code> and check the system journal with
            <code class="command">journalctl -e</code> for error messages of the login
            process and of PAM.
          </p></li><li class="step "><p>
            Try to log in from a console (using <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>). If this is successful, the blame
            cannot be put on PAM, because it is possible to authenticate this
            user on this machine. Try to locate any problems with the X Window
            System or the GNOME desktop. For more information, refer to
            <a class="xref" href="cha-trouble.html#sec-trouble-login-dk" title="21.3.4. GNOME desktop has issues">Section 21.3.4, “GNOME desktop has issues”</a>.
          </p></li><li class="step "><p>
            If the user's home directory has been used with another Linux
            distribution, remove the <code class="filename">Xauthority</code> file in
            the user's home. Use a console login via <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> and run <code class="command">rm
            .Xauthority</code> as this user. This should eliminate X
            authentication problems for this user. Try graphical login again.
          </p></li><li class="step "><p>
            If the desktop could not start because of corrupt configuration
            files, proceed with <a class="xref" href="cha-trouble.html#sec-trouble-login-dk" title="21.3.4. GNOME desktop has issues">Section 21.3.4, “GNOME desktop has issues”</a>.
          </p></li></ol></div></div><p>
        In the following, common reasons a network authentication for a
        particular user may fail on a specific machine are listed:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
            The user may have entered the wrong password.
          </p></li><li class="listitem "><p>
            The user name exists in the machine's local authentication files
            and is also provided by a network authentication system, causing
            conflicts.
          </p></li><li class="listitem "><p>
            The home directory exists but is corrupt or unavailable. Perhaps it
            is write protected or is on a server that is inaccessible at the
            moment.
          </p></li><li class="listitem "><p>
            The user does not have permission to log in to that particular host
            in the authentication system.
          </p></li><li class="listitem "><p>
            The machine has changed host names, for whatever reason, and the
            user does not have permission to log in to that host.
          </p></li><li class="listitem "><p>
            The machine cannot reach the authentication server or directory
            server that contains that user's information.
          </p></li><li class="listitem "><p>
            There may be problems with the X Window System authenticating this
            particular user, especially if the user's home has been used with
            another Linux distribution before installing the current one.
          </p></li></ul></div><p>
        To locate the cause of the login failures with network authentication,
        proceed as follows:
      </p><div class="procedure " id="proc-trouble-login-pw"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
            Check whether the user remembered their password correctly before
            you start debugging the whole authentication mechanism.
          </p></li><li class="step "><p>
            Determine the directory server which the machine relies on for
            authentication and make sure that it is up and running and properly
            communicating with the other machines.
          </p></li><li class="step "><p>
            Determine that the user's user name and password work on other
            machines to make sure that their authentication data exists and is
            properly distributed.
          </p></li><li class="step "><p>
            See if another user can log in to the misbehaving machine. If
            another user can log in without difficulty or if <code class="systemitem">root</code> can log
            in, log in and examine the system journal with the <code class="command">journalctl
            -e</code> &gt; file. Locate the time stamps that correspond to
            the login attempts and determine if PAM has produced any error
            messages.
          </p></li><li class="step "><p>
            Try to log in from a console (using <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>). If this is successful, the
            problem is not with PAM or the directory server on which the user's
            home is hosted, because it is possible to authenticate this user on
            this machine. Try to locate any problems with the X Window System
            or the GNOME desktop. For more information, refer to
            <a class="xref" href="cha-trouble.html#sec-trouble-login-dk" title="21.3.4. GNOME desktop has issues">Section 21.3.4, “GNOME desktop has issues”</a>.
          </p></li><li class="step "><p>
            If the user's home directory has been used with another Linux
            distribution, remove the <code class="filename">Xauthority</code> file in
            the user's home. Use a console login via <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> and run <code class="command">rm
            .Xauthority</code> as this user. This should eliminate X
            authentication problems for this user. Try graphical login again.
          </p></li><li class="step "><p>
            If the desktop could not start because of corrupt configuration
            files, proceed with <a class="xref" href="cha-trouble.html#sec-trouble-login-dk" title="21.3.4. GNOME desktop has issues">Section 21.3.4, “GNOME desktop has issues”</a>.
          </p></li></ol></div></div></div><div class="sect2 " id="sec-trouble-login-encrypted"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.3.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Login to encrypted home partition fails</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-login-encrypted">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-login-encrypted</li></ul></div></div></div></div><p>
        It is recommended to use an encrypted home partition for laptops. If
        you cannot log in to your laptop, the reason might be that your
        partition could not be unlocked.
      </p><p>
        During the boot time, you need to enter the passphrase to unlock your
        encrypted partition. If you do not enter it, the boot process
        continues, leaving the partition locked.
      </p><p>
        To unlock your encrypted partition, proceed as follows:
      </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
            Switch to the text console with <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>.
          </p></li><li class="step "><p>
            Become <code class="systemitem">root</code>.
          </p></li><li class="step "><p>
            Restart the unlocking process again with:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemctl restart home.mount</pre></div></li><li class="step "><p>
            Enter your passphrase to unlock your encrypted partition.
          </p></li><li class="step "><p>
            Exit the text console and switch back to the login screen with
            <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F7</span>.
          </p></li><li class="step "><p>
            Log in as usual.
          </p></li></ol></div></div></div><div class="sect2 " id="sec-trouble-login-dk"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.3.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">GNOME desktop has issues</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-login-dk">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-login-dk</li></ul></div></div></div></div><p>
        If you are experiencing issues with the GNOME desktop, there are
        several ways to troubleshoot the misbehaving graphical desktop
        environment. The recommended procedure described below offers the
        safest option to fix a broken GNOME desktop.
      </p><div class="procedure " id="id-1.3.8.3.6.6.3"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 21.1: </span><span class="name">Troubleshooting GNOME </span><a title="Permalink" class="permalink" href="cha-trouble.html#id-1.3.8.3.6.6.3">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
            Launch YaST and switch to <span class="guimenu ">Security and Users</span>.
          </p></li><li class="step "><p>
            Open the <span class="guimenu ">User and Group Management</span> dialog and
            click <span class="guimenu ">Add</span>.
          </p></li><li class="step "><p>
            Fill out the required fields and click <span class="guimenu ">OK</span> to
            create a new user.
          </p></li><li class="step "><p>
            Log out and log in as the new user. This gives you a fresh GNOME
            environment.
          </p></li><li class="step "><p>
            Copy individual subdirectories from the
            <code class="filename">~/.local/</code> and <code class="filename">~/.config/</code>
            directories of the old user account to the respective directories
            of the new user account.
          </p><p>
            Log out and log in again as the new user after every copy operation
            to check whether GNOME still works correctly.
          </p></li><li class="step "><p>
            Repeat the previous step until you find the configuration file that
            breaks GNOME.
          </p></li><li class="step "><p>
            Log in as the old user, and move the offending configuration file
            to a different location. Log out and log in again as the old user.
          </p></li><li class="step "><p>
            Delete the previously created user.
          </p></li></ol></div></div></div></div><div class="sect1 " id="sec-trouble-netconfig"><div class="titlepage"><div><div><h2 class="title"><span class="number">21.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Network problems</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-netconfig">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-netconfig</li></ul></div></div></div></div><p>
      Many problems of your system may be network-related, although the symptoms
      look different. For example, the reason for a system not allowing users to
      log in may be a network problem. This section introduces a simple
      checklist you can apply to identify the cause of any network problem
      encountered.
    </p><div class="procedure " id="proc-trouble-config-net"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 21.2: </span><span class="name">How to identify network problems </span><a title="Permalink" class="permalink" href="cha-trouble.html#proc-trouble-config-net">#</a></h6></div><div class="procedure-contents"><p>
        When checking the network connection of your machine, proceed as
        follows:
      </p><ol class="procedure" type="1"><li class="step "><p>
          If you use an Ethernet connection, check the hardware first. Make
          sure that your network cable is properly plugged into your computer
          and router (or hub, etc.). The control lights next to your Ethernet
          connector are normally both be active.
        </p><p>
          If the connection fails, check whether your network cable works with
          another machine. If it does, your network card causes the failure. If
          hubs or switches are included in your network setup, they may be
          faulty, as well.
        </p></li><li class="step "><p>
          If using a wireless connection, check whether the wireless link can
          be established by other machines. If not, contact the wireless
          network's administrator.
        </p></li><li class="step "><p>
          When you have checked your basic network connectivity, try to find
          out which service is not responding. Gather the address information
          of all network servers needed in your setup. Either look them up in
          the appropriate YaST module or ask your system administrator. The
          following list gives typical network servers involved in a setup
          together with the symptoms of an outage.
        </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.3.8.3.7.3.5.2.1"><span class="term ">DNS (name service)</span></dt><dd><p>
                A broken or malfunctioning name service affects the network's
                functionality in many ways. If the local machine relies on any
                network servers for authentication and these servers cannot be
                found because of name resolution issues, users would not even
                be able to log in. Machines in the network managed by a broken
                name server would not be able to <span class="quote">“<span class="quote ">see</span>”</span> each other
                and communicate.
              </p></dd><dt id="id-1.3.8.3.7.3.5.2.2"><span class="term ">NTP (time service)</span></dt><dd><p>
                A malfunctioning or broken NTP service could affect Kerberos
                authentication and X server functionality.
              </p></dd><dt id="id-1.3.8.3.7.3.5.2.3"><span class="term ">NFS (file service)</span></dt><dd><p>
                If any application needs data stored in an NFS mounted
                directory, it cannot start or function properly if this service
                was down or misconfigured. In the worst case scenario, a user's
                personal desktop configuration would not come up if their home
                directory containing the <code class="filename">.gconf</code>
                subdirectory could not be found because of a faulty NFS server.
              </p></dd><dt id="id-1.3.8.3.7.3.5.2.4"><span class="term ">Samba (file service)</span></dt><dd><p>
                If any application needs data stored in a directory on a faulty
                Samba server, it cannot start or function properly.
              </p></dd><dt id="id-1.3.8.3.7.3.5.2.5"><span class="term ">NIS (user management)</span></dt><dd><p>
                If your <span class="productname"><span class="phrase">openSUSE Leap</span></span> system relies on a faulty NIS server to
                provide the user data, users cannot log in to this machine.
              </p></dd><dt id="id-1.3.8.3.7.3.5.2.6"><span class="term ">LDAP (user management)</span></dt><dd><p>
                If your <span class="productname"><span class="phrase">openSUSE Leap</span></span> system relies on a faulty LDAP server to
                provide the user data, users cannot log in to this machine.
              </p></dd><dt id="id-1.3.8.3.7.3.5.2.7"><span class="term ">Kerberos (authentication)</span></dt><dd><p>
                Authentication does not work and login to any machine fails.
              </p></dd><dt id="id-1.3.8.3.7.3.5.2.8"><span class="term ">CUPS (network printing)</span></dt><dd><p>
                Users cannot print.
              </p></dd></dl></div></li><li class="step "><p>
          Check whether the network servers are running and whether your
          network setup allows you to establish a connection:
        </p><div id="id-1.3.8.3.7.3.6.2" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg" /><h6>Important: Limitations</h6><p>
            The debugging procedure described below only applies to a simple
            network server/client setup that does not involve any internal
            routing. It assumes both server and client are members of the same
            subnet without the need for additional routing.
          </p></div><ol type="a" class="substeps "><li class="step "><p>
              Use <code class="command">ping</code>
              <em class="replaceable ">IP_ADDRESS/HOSTNAME</em> (replace with the
              host name or IP address of the server) to check whether each one
              of them is up and responding to the network. If this command is
              successful, it tells you that the host you were looking for is up
              and running and that the name service for your network is
              configured correctly.
            </p><p>
              If ping fails with <code class="literal">destination host
              unreachable</code>, either your system or the desired server
              is not properly configured or down. Check whether your system is
              reachable by running <code class="command">ping</code> <em class="replaceable ">IP
              address</em> or <em class="replaceable ">YOUR_HOSTNAME</em>
              from another machine. If you can reach your machine from another
              machine, it is the server that is not running or not configured
              correctly.
            </p><p>
              If ping fails with <code class="literal">unknown host</code>, the name
              service is not configured correctly or the host name used was
              incorrect. For further checks on this matter, refer to
              <a class="xref" href="cha-trouble.html#st-trouble-config-net-host" title="Step 4.b">Step 4.b</a>.
              If ping still fails, either your network card is not configured
              correctly or your network hardware is faulty.
            </p></li><li class="step " id="st-trouble-config-net-host"><p>
              Use <code class="command">host</code> <em class="replaceable ">HOSTNAME</em>
              to check whether the host name of the server you are trying to
              connect to is properly translated into an IP address and vice
              versa. If this command returns the IP address of this host, the
              name service is up and running. If the <code class="command">host</code>
              command fails, check all network configuration files relating to
              name and address resolution on your host:
            </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.3.8.3.7.3.6.3.2.2.1"><span class="term "><code class="filename">/var/run/netconfig/resolv.conf</code></span></dt><dd><p>
                    This file is used to keep track of the name server and
                    domain you are currently using. It is a symbolic link to
                    <code class="filename">/run/netconfig/resolv.conf</code> and is
                    usually automatically adjusted by YaST or DHCP. Make sure
                    that this file has the following structure and all network
                    addresses and domain names are correct:
                  </p><div class="verbatim-wrap"><pre class="screen">search <em class="replaceable ">FULLY_QUALIFIED_DOMAIN_NAME</em>
nameserver <em class="replaceable ">IPADDRESS_OF_NAMESERVER</em></pre></div><p>
                    This file can contain more than one name server address,
                    but at least one of them must be correct to provide name
                    resolution to your host. If needed, adjust this file using
                    the YaST Network Settings module (Hostname/DNS tab).
                  </p><p>
                    If your network connection is handled via DHCP, enable DHCP
                    to change host name and name service information by
                    selecting <span class="guimenu ">Set Hostname via DHCP</span> (can be
                    set globally for any interface or per interface) and
                    <span class="guimenu ">Update Name Servers and Search List via
                    DHCP</span> in the YaST Network Settings module
                    (Hostname/DNS tab).
                  </p></dd><dt id="id-1.3.8.3.7.3.6.3.2.2.2"><span class="term "><code class="filename">/etc/nsswitch.conf</code></span></dt><dd><p>
                    This file tells Linux where to look for name service
                    information. It should look like this:
                  </p><div class="verbatim-wrap"><pre class="screen"> ...
hosts: files dns
networks: files dns
...</pre></div><p>
                    The <code class="option">dns</code> entry is vital. It tells Linux to
                    use an external name server. Normally, these entries are
                    automatically managed by YaST, but it would be prudent to
                    check.
                  </p><p>
                    If all the relevant entries on the host are correct, let
                    your system administrator check the DNS server
                    configuration for the correct zone information.
                    <span class="phrase">For detailed information about DNS,
                    refer to <span class="intraxref">Book “Reference”, Chapter 19 “The domain name system”</span>.</span> If you have
                    made sure that the DNS configuration of your host and the
                    DNS server are correct, proceed with checking the
                    configuration of your network and network device.
                  </p></dd></dl></div></li><li class="step "><p>
              If your system cannot establish a connection to a network server
              and you have excluded name service problems from the list of
              possible culprits, check the configuration of your network card.
            </p><p>
              Use the command <code class="command">ip addr show</code>
              <em class="replaceable ">NETWORK_DEVICE</em> to check whether this
              device was properly configured. Make sure that the <code class="option">inet
              address</code> with the netmask
              (<code class="literal">/<em class="replaceable ">MASK</em></code>) is
              configured correctly. An error in the IP address or a missing bit
              in your network mask would render your network configuration
              unusable. If necessary, perform this check on the server as well.
            </p></li><li class="step "><p>
              If the name service and network hardware are properly configured
              and running, but certain external network connections still get
              long timeouts or fail entirely, use
              <code class="command">traceroute</code>
              <em class="replaceable ">FULLY_QUALIFIED_DOMAIN_NAME</em> (executed
              as <code class="systemitem">root</code>) to track the network route these requests are
              taking. This command lists any gateway (hop) that a request from
              your machine passes on its way to its destination. It lists the
              response time of each hop and whether this hop is reachable. Use
              a combination of traceroute and ping to track down the culprit
              and let the administrators know.
            </p></li></ol></li></ol></div></div><p>
      When you have identified the cause of your network trouble, you can
      resolve it yourself (if the problem is located on your machine) or let
      the system administrators of your network know about your findings so
      they can reconfigure the services or repair the necessary systems.
    </p><div class="sect2 " id="sec-trouble-networkmanager"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">NetworkManager problems</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-networkmanager">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-networkmanager</li></ul></div></div></div></div><p>
        If you have a problem with network connectivity, narrow it down as
        described in <a class="xref" href="cha-trouble.html#proc-trouble-config-net" title="How to identify network problems">Procedure 21.2, “How to identify network problems”</a>. If NetworkManager looks
        suspicious, proceed as follows to get logs providing hints on why NetworkManager
        fails:
      </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
            Open a shell and log in as <code class="systemitem">root</code>.
          </p></li><li class="step "><p>
            Restart the NetworkManager:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl restart NetworkManager</pre></div></li><li class="step "><p>
            Open a Web page, for example,
            <a class="link" href="https://www.opensuse.org" target="_blank">https://www.opensuse.org</a> as normal user to see,
            if you can connect.
          </p></li><li class="step "><p>
            Collect any information about the state of NetworkManager in
            <code class="filename">/var/log/NetworkManager</code>.
          </p></li></ol></div></div><p>
        For more information about NetworkManager, refer to
        <span class="intraxref">Book “Reference”, Chapter 28 “Using NetworkManager”</span>.
      </p></div></div><div class="sect1 " id="sec-trouble-data"><div class="titlepage"><div><div><h2 class="title"><span class="number">21.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Data problems</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-data">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-data</li></ul></div></div></div></div><p>
      Data problems are when the machine may or may not boot properly but, in
      either case, it is clear that there is data corruption on the system and
      that the system needs to be recovered. These situations call for a backup
      of your critical data, enabling you to recover the system state from
      before your system failed.
    </p><div class="sect2 " id="sec-trouble-data-partitions"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.5.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Managing partition images</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-data-partitions">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>sec-trouble-data-partitions</li></ul></div></div></div></div><p>
        Sometimes you need to perform a backup from an entire partition or even
        hard disk. Linux comes with the <code class="command">dd</code> tool which can
        create an exact copy of your disk. Combined with
        <code class="command">gzip</code> you save space.
      </p><div class="procedure " id="id-1.3.8.3.8.3.3"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 21.3: </span><span class="name">Backing up and restoring hard disks </span><a title="Permalink" class="permalink" href="cha-trouble.html#id-1.3.8.3.8.3.3">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
            Start a Shell as user <code class="systemitem">root</code>.
          </p></li><li class="step "><p>
            Select your source device. Typically this is something like
            <code class="filename">/dev/sda</code> (labeled as
            <em class="replaceable ">SOURCE</em>).
          </p></li><li class="step "><p>
            Decide where you want to store your image (labeled as
            <em class="replaceable ">BACKUP_PATH</em>). It must be different from
            your source device. In other words: if you make a backup from
            <code class="filename">/dev/sda</code>, your image file must not to be
            stored under <code class="filename">/dev/sda</code>.
          </p></li><li class="step "><p>
            Run the commands to create a compressed image file:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>dd if=/dev/<em class="replaceable ">SOURCE</em> | gzip &gt; /<em class="replaceable ">BACKUP_PATH</em>/image.gz</pre></div></li><li class="step "><p>
            Restore the hard disk with the following commands:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>gzip -dc /<em class="replaceable ">BACKUP_PATH</em>/image.gz | dd of=/dev/<em class="replaceable ">SOURCE</em></pre></div></li></ol></div></div><p>
        If you only need to back up a partition, replace the
        <em class="replaceable ">SOURCE</em> placeholder with your respective
        partition. In this case, your image file can lie on the same hard disk,
        but on a different partition.
      </p></div><div class="sect2 " id="sec-trouble-data-recover-rescue"><div class="titlepage"><div><div><h3 class="title"><span class="number">21.5.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Using the rescue system</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-data-recover-rescue">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>system_repair.xml</li><li><span class="ds-label">ID: </span>sec-trouble-data-recover-rescue</li></ul></div></div></div></div><p>
  There are several reasons a system could fail to come up and run properly. A
  corrupted file system following a system crash, corrupted configuration
  files, or a corrupted boot loader configuration are the most common ones.
 </p><p>
  To help you to resolve these situations, <span class="productname"><span class="phrase">openSUSE Leap</span></span> contains a rescue
  system that you can boot. The rescue system is a small Linux system that can
  be loaded into a RAM disk and mounted as root file system, allowing you to
  access your Linux partitions from the outside. Using the rescue system, you
  can recover or modify any important aspect of your system.
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    Manipulate any type of configuration file.
   </p></li><li class="listitem "><p>
    Check the file system for defects and start automatic repair processes.
   </p></li><li class="listitem "><p>
    Access the installed system in a <span class="quote">“<span class="quote ">change root</span>”</span> environment.
   </p></li><li class="listitem "><p>
    Check, modify, and re-install the boot loader configuration.
   </p></li><li class="listitem "><p>
    Recover from a badly installed device driver or unusable kernel.
   </p></li><li class="listitem "><p>
    Resize partitions using the parted command. Find more information about
    this tool at the GNU Parted Web site
    <a class="link" href="https://www.gnu.org/software/parted/parted.html" target="_blank">https://www.gnu.org/software/parted/parted.html</a>.
   </p></li></ul></div><p>
  The rescue system can be loaded from various sources and locations. The
  simplest option is to boot the rescue system from the original installation
  medium.
 </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
    Insert the installation medium into your DVD drive.
   </p></li><li class="step "><p>
    Reboot the system.
   </p></li><li class="step "><p>
    At the boot screen, press <span class="keycap">F4</span> and choose
    <span class="guimenu ">DVD-ROM</span>. Then choose <span class="guimenu ">Rescue System</span>
    from the main menu.
   </p></li><li class="step "><p>
    Enter <code class="literal">root</code> at the <code class="literal">Rescue:</code> prompt. A
    password is not required.
   </p></li></ol></div></div><div class="procedure " id="proc-trouble-data-recover-rescue-network"><div class="procedure-contents"><p>
   If your hardware setup does not include a DVD drive, you can boot the rescue
   system from a network source. The following example applies to a remote boot
   scenario—if using another boot medium, such as a DVD, modify the
   <code class="filename">info</code> file accordingly and boot as you would for a
   normal installation.
  </p><ol class="procedure" type="1"><li class="step "><p>
    Enter the configuration of your PXE boot setup and add the lines
    <code class="literal">install=<em class="replaceable ">PROTOCOL</em>://<em class="replaceable ">INSTSOURCE</em></code>
    and <code class="literal">rescue=1</code>. If you need to start the repair system,
    use <code class="literal">repair=1</code> instead. As with a normal installation,
    <em class="replaceable ">PROTOCOL</em> stands for any of the supported network
    protocols (NFS, HTTP, FTP, etc.) and <em class="replaceable ">INSTSOURCE</em>
    for the path to your network installation source.
   </p></li><li class="step "><p>
    Boot the system using <span class="quote">“<span class="quote ">Wake on LAN</span>”</span>.
   </p></li><li class="step "><p>
    Enter <code class="literal">root</code> at the <code class="literal">Rescue:</code> prompt. A
    password is not required.
   </p></li></ol></div></div><p>
  When you have entered the rescue system, you can use the virtual consoles
  that can be reached with
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> to
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F6</span>.
 </p><p>
  A shell and other useful utilities, such as the mount program, are
  available in the <code class="filename">/bin</code> directory. The
  <code class="filename">/sbin</code> directory contains important file and network
  utilities for reviewing and repairing the file system. This directory also
  contains the most important binaries for system maintenance, such as
  <code class="command">fdisk</code>, <code class="command">mkfs</code>, <code class="command">mkswap</code>,
  <code class="command">mount</code>, and <code class="command">shutdown</code>,
  <code class="command">ip</code> and <code class="command">ss</code> for maintaining the network.
  The directory <code class="filename">/usr/bin</code> contains the vi editor, find,
  less, and SSH.
 </p><p>
  To see the system messages, either use the command <code class="command">dmesg</code>
  or view the system log with <code class="command">journalctl</code>.
 </p><div class="sect3 " id="sec-trouble-data-recover-rescue-file"><div class="titlepage"><div><div><h4 class="title"><span class="number">21.5.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Checking and manipulating configuration files</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-data-recover-rescue-file">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit the source file for this section">Edit source</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>system_repair.xml</li><li><span class="ds-label">ID: </span>sec-trouble-data-recover-rescue-file</li></ul></div></div></div></div><p>
   As an example for a configuration that might be fixed using the rescue
   system, imagine you have a broken configuration file that prevents the
   system from booting properly. You can fix this using the rescue system.
  </p><div class="procedure "><div class="procedure-contents"><p>
    To manipulate a configuration file, proceed as follows:
   </p><ol class="procedure" type="1"><li class="step "><p>
     Start the rescue system using one of the methods described above.
    </p></li><li class="step "><p>
     To mount a root file system located under <code class="filename">/dev/sda6</code>
     to the rescue system, use the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> mount /dev/sda6 /mnt</pre></div><p>
     All directories of the system are now located under
     <code class="filename">/mnt</code>
    </p></li><li class="step "><p>
     Change the directory to the mounted root file system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> cd /mnt</pre></div></li><li class="step "><p>
     Open the problematic configuration file in the vi editor. Adjust and save
     the configuration.
    </p></li><li class="step "><p>
     Unmount the root file system from the rescue system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> umount /mnt</pre></div></li><li class="step "><p>
     Reboot the machine.
    </p></li></ol></div></div></div><div class="sect3 " id="sec-trouble-data-recover-rescue-filesystem"><div class="titlepage"><div><div><h4 class="title"><span class="number">21.5.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Repairing and checking file systems</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-data-recover-rescue-filesystem">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit the source file for this section">Edit source</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>system_repair.xml</li><li><span class="ds-label">ID: </span>sec-trouble-data-recover-rescue-filesystem</li></ul></div></div></div></div><p>
    Generally, file systems cannot be repaired on a running system. If you
    encounter serious problems, you may not even be able to mount your root
    file system and the system boot may end with a <span class="quote">“<span class="quote ">kernel panic</span>”</span>.
    In this case, the only way is to repair the system from the outside. The
    system contains the <code class="command">fsck</code> utility to check and repair
    multiple file system types, such as <code class="literal">ext2</code>,
    <code class="literal">ext3</code>, <code class="literal">ext4</code>, <code class="literal">msdos</code>,
    and <code class="literal">vfat</code>. Use the <code class="option">-t</code> option to specify
    which file system to check.
  </p><p>
    The following command checks all <code class="literal">ext4</code> file systems found
    in the <code class="filename">/etc/fstab</code> specification:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> fsck -t ext4 -A</pre></div><div id="id-1.3.8.3.8.4.13.5" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg" /><h6>Tip</h6><p>
    For Btrfs, you can use the <code class="command">btrfs check</code> command found in
    the <span class="package ">btrfsprogs</span> package.
  </p><p>
    Find topics about the Btrfs file system in the following
    places:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        The Storage Administration Guide includes <a class="link" href="https://documentation.suse.com/sles/html/SLES-all/cha-filesystems.html#sec-filesystems-major-btrfs" target="_blank">https://documentation.suse.com/sles/html/SLES-all/cha-filesystems.html#sec-filesystems-major-btrfs</a>
        and <a class="link" href="https://documentation.suse.com/sles/html/SLES-all/cha-resize-fs.html#sec-resize-fs-btrfs" target="_blank">https://documentation.suse.com/sles/html/SLES-all/cha-resize-fs.html#sec-resize-fs-btrfs</a>
        sections.
      </p></li><li class="listitem "><p>
        The following article describes how to recover from Btrfs 
        errors <a class="link" href="https://www.suse.com/support/kb/doc/?id=000018769" target="_blank">https://www.suse.com/support/kb/doc/?id=000018769</a>.
      </p></li><li class="listitem "><p>
        The following article includes links to multiple Btrfs-related topics
        <a class="link" href="https://www.suse.com/support/kb/doc/?id=000018779" target="_blank">https://www.suse.com/support/kb/doc/?id=000018779</a>.
      </p></li><li class="listitem "><p>
        The <code class="command">man 8 btrfs-check</code> man page details all options
        of the <code class="command">btrfs check</code> command.
      </p></li></ul></div></div></div><div class="sect3 " id="sec-trouble-data-recover-rescue-access"><div class="titlepage"><div><div><h4 class="title"><span class="number">21.5.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Accessing the installed system</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-data-recover-rescue-access">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit the source file for this section">Edit source</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>system_repair.xml</li><li><span class="ds-label">ID: </span>sec-trouble-data-recover-rescue-access</li></ul></div></div></div></div><p>
   If you need to access the installed system from the rescue system, you need
   to do this in a <span class="emphasis"><em>change root</em></span> environment. For example,
   to modify the boot loader configuration, or to execute a hardware
   configuration utility.
  </p><p>
   To set up a change root environment based on the installed system, proceed
   as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><div id="id-1.3.8.3.8.4.14.4.1.1" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg" /><h6>Tip: Import LVM volume groups</h6><p>
      If you are using an LVM setup (refer to <span class="intraxref">Book “Reference”, Chapter 5 “<span class="guimenu ">Expert Partitioner</span>”, Section 5.3 “LVM configuration”</span> for more
      general details), import all existing volume groups to be able to
      find and mount the device(s):
     </p><div class="verbatim-wrap"><pre class="screen"><code class="systemitem">root</code>vgimport -a</pre></div></div><p>
     Run <code class="command">lsblk</code> to check which node corresponds to the root
     partition. It is <code class="filename">/dev/sda2</code> in our example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>lsblk
NAME        MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT
sda           8:0    0 149,1G  0 disk
├─sda1        8:1    0     2G  0 part  [SWAP]
├─sda2        8:2    0    20G  0 part  /
└─sda3        8:3    0   127G  0 part
  └─cr_home 254:0    0   127G  0 crypt /home</pre></div></li><li class="step "><p>
     Mount the root partition from the installed system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> mount /dev/sda2 /mnt</pre></div></li><li class="step "><p>
     Mount <code class="filename">/proc</code>, <code class="filename">/dev</code>, and
     <code class="filename">/sys</code> partitions:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> mount -t proc none /mnt/proc
<code class="prompt user">&gt; </code><code class="command">sudo</code> mount --rbind /dev /mnt/dev
<code class="prompt user">&gt; </code><code class="command">sudo</code> mount --rbind /sys /mnt/sys</pre></div></li><li class="step "><p>
     Now you can <span class="quote">“<span class="quote ">change root</span>”</span> into the new environment, keeping
     the <code class="systemitem">bash</code> shell:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>chroot /mnt /bin/bash</pre></div></li><li class="step "><p>
     Finally, mount the remaining partitions from the installed system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>mount -a</pre></div></li><li class="step "><p>
     Now you have access to the installed system. Before rebooting the system,
     unmount the partitions with <code class="command">umount</code> <code class="option">-a</code>
     and leave the <span class="quote">“<span class="quote ">change root</span>”</span> environment with
     <code class="command">exit</code>.
    </p></li></ol></div></div><div id="id-1.3.8.3.8.4.14.5" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: Limitations</h6><p>
    Although you have full access to the files and applications of the
    installed system, there are some limitations. The kernel that is running is
    the one that was booted with the rescue system, not with the change root
    environment. It only supports essential hardware and it is not possible to
    add kernel modules from the installed system unless the kernel versions are
    identical. Always check the version of the currently running (rescue)
    kernel with <code class="command">uname -r</code> and then find out if a matching
    subdirectory exists in the <code class="filename">/lib/modules</code> directory in
    the change root environment. If yes, you can use the installed modules,
    otherwise you need to supply their correct versions on other media, such as
    a flash disk. Most often the rescue kernel version differs from the
    installed one — then you cannot simply access a sound card, for
    example. It is also not possible to start a graphical user interface.
   </p><p>
    Also note that you leave the <span class="quote">“<span class="quote ">change root</span>”</span> environment when
    you switch the console with
    <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> to
    <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F6</span>.
   </p></div></div><div class="sect3 " id="sec-trouble-data-recover-rescue-grub"><div class="titlepage"><div><div><h4 class="title"><span class="number">21.5.2.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Modifying and re-installing the boot loader</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-data-recover-rescue-grub">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit the source file for this section">Edit source</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>system_repair.xml</li><li><span class="ds-label">ID: </span>sec-trouble-data-recover-rescue-grub</li></ul></div></div></div></div><p>
   Sometimes a system cannot boot because the boot loader configuration is
   corrupted. The start-up routines cannot, for example, translate physical
   drives to the actual locations in the Linux file system without a working
   boot loader.
  </p><p>
   To check the boot loader configuration and re-install the boot loader,
   proceed as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Perform the necessary steps to access the installed system as described in
     <a class="xref" href="cha-trouble.html#sec-trouble-data-recover-rescue-access" title="21.5.2.3. Accessing the installed system">Section 21.5.2.3, “Accessing the installed system”</a>.
    </p></li><li class="step "><p>
     Check that the GRUB 2 boot loader is installed on the system. If not,
     install the package <code class="systemitem">grub2</code> and run
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> grub2-install /dev/sda</pre></div></li><li class="step "><p>
     Check whether the following files are correctly configured according to
     the GRUB 2 configuration principles outlined in
     <span class="intraxref">Book “Reference”, Chapter 12 “The boot loader GRUB 2”</span> and apply fixes if necessary.
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
       <code class="filename">/etc/default/grub</code>
      </p></li><li class="listitem "><p>
       <code class="filename">/boot/grub2/device.map</code>
      </p></li><li class="listitem "><p>
       <code class="filename">/boot/grub2/grub.cfg</code> (this file is generated, do
       not edit)
      </p></li><li class="listitem "><p>
       <code class="filename">/etc/sysconfig/bootloader</code>
      </p></li></ul></div></li><li class="step "><p>
     Re-install the boot loader using the following command sequence:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> grub2-mkconfig -o /boot/grub2/grub.cfg</pre></div></li><li class="step "><p>
     Unmount the partitions, log out of the <span class="quote">“<span class="quote ">change root</span>”</span>
     environment, and reboot the system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>umount -a
exit
reboot</pre></div></li></ol></div></div></div><div class="sect3 " id="sec-trouble-data-recover-rescue-dud"><div class="titlepage"><div><div><h4 class="title"><span class="number">21.5.2.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Fixing kernel installation</span> <a title="Permalink" class="permalink" href="cha-trouble.html#sec-trouble-data-recover-rescue-dud">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit the source file for this section">Edit source</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>system_repair.xml</li><li><span class="ds-label">ID: </span>sec-trouble-data-recover-rescue-dud</li></ul></div></div></div></div><p>
   A kernel update may introduce a new bug which can impact the operation of
   your system. For example a driver for a piece of hardware in your system may
   be faulty, which prevents you from accessing and using it. In this case,
   revert to the last working kernel (if available on the system) or install
   the original kernel from the installation media.
  </p><div id="id-1.3.8.3.8.4.16.3" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg" /><h6>Tip: How to keep last kernels after update</h6><p>
    To prevent failures to boot after a faulty kernel update, use the kernel
    multiversion feature and tell <code class="systemitem">libzypp</code> which
    kernels you want to keep after the update.
   </p><p>
    For example to always keep the last two kernels and the currently running
    one, add
   </p><div class="verbatim-wrap"><pre class="screen">multiversion.kernels = latest,latest-1,running</pre></div><p>
    to the <code class="filename">/etc/zypp/zypp.conf</code> file. See
    <span class="intraxref">Book “Reference”, Chapter 6 “Installing multiple kernel versions”</span> for more information.
   </p></div><p>
   A similar case is when you need to re-install or update a broken driver for
   a device not supported by <span class="productname"><span class="phrase">openSUSE Leap</span></span>. For example when a hardware vendor
   uses a specific device, such as a hardware RAID controller, which needs a
   binary driver to be recognized by the operating system. The vendor typically
   releases a Driver Update Disk (DUD) with the fixed or updated version of the
   required driver.
  </p><p>
   In both cases you need to access the installed system in the rescue mode and
   fix the kernel related problem, otherwise the system may fail to boot
   correctly:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Boot from the <span class="productname"><span class="phrase">openSUSE Leap</span></span> installation media.
    </p></li><li class="step "><p>
     If you are recovering after a faulty kernel update, skip this step. If you
     need to use a driver update disk (DUD), press <span class="keycap">F6</span> to load
     the driver update after the boot menu appears, and choose the path or URL
     to the driver update and confirm with <span class="guimenu ">Yes</span>.
    </p></li><li class="step "><p>
     Choose <span class="guimenu ">Rescue System</span> from the boot menu and press
     <span class="keycap">Enter</span>. If you chose to use DUD, you will be asked to
     specify where the driver update is stored.
    </p></li><li class="step "><p>
     Enter <code class="literal">root</code> at the <code class="literal">Rescue:</code> prompt. A
     password is not required.
    </p></li><li class="step "><p>
     Manually mount the target system and <span class="quote">“<span class="quote ">change root</span>”</span> into the
     new environment. For more information, see
     <a class="xref" href="cha-trouble.html#sec-trouble-data-recover-rescue-access" title="21.5.2.3. Accessing the installed system">Section 21.5.2.3, “Accessing the installed system”</a>.
    </p></li><li class="step "><p>
     If using DUD, install/re-install/update the faulty device driver package.
     Always make sure the installed kernel version exactly matches the version
     of the driver you are installing.
    </p><p>
     If fixing faulty kernel update installation, you can install the original
     kernel from the installation media with the following procedure.
    </p><ol type="a" class="substeps "><li class="step "><p>
       Identify your DVD device with <code class="command">hwinfo --cdrom</code> and
       mount it with <code class="command">mount /dev/sr0 /mnt</code>.
      </p></li><li class="step "><p>
       Navigate to the directory where your kernel files are stored on the DVD,
       for example <code class="command">cd /mnt/suse/x86_64/</code>.
      </p></li><li class="step "><p>
       Install required <code class="systemitem">kernel-*</code>,
       <code class="systemitem">kernel-*-base</code>, and
       <code class="systemitem">kernel-*-extra</code> packages of your flavor with the
       <code class="command">rpm -i</code> command.
      </p></li></ol></li><li class="step "><p>
     Update configuration files and reinitialize the boot loader if needed. For
     more information, see
     <a class="xref" href="cha-trouble.html#sec-trouble-data-recover-rescue-grub" title="21.5.2.4. Modifying and re-installing the boot loader">Section 21.5.2.4, “Modifying and re-installing the boot loader”</a>.
    </p></li><li class="step "><p>
     Remove any bootable media from the system drive and reboot.
    </p></li></ol></div></div></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="bk01apa.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Appendix A </span>GNU licenses</span></a><a class="nav-link" href="cha-adminhelp.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 20 </span>Help and documentation</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2024 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>