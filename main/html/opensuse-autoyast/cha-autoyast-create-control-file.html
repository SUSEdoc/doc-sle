<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Creating an AutoYaST control file | AutoYaST Guide | openSUSE Leap 15.6</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Creating an AutoYaST control file | openSUSE Leap 15.6" />
<meta name="description" content="To create the control file, you need to collect information about the systems you are going to install. This includes hardware data and network information amo…" />
<meta name="product-name" content="openSUSE Leap" />
<meta name="product-number" content="15.6" />
<meta name="book-title" content="AutoYaST Guide" />
<meta name="chapter-title" content="Chapter 3. Creating an AutoYaST control file" />
<meta name="tracker-url" content="https://bugzilla.opensuse.org/enter_bug.cgi" />
<meta name="tracker-type" content="bsc" />
<meta name="tracker-bsc-assignee" content="fs@suse.com" />
<meta name="tracker-bsc-component" content="Documentation" />
<meta name="tracker-bsc-product" content="openSUSE Distribution" />
<meta name="tracker-bsc-version" content="Leap 15.4" />
<meta property="og:title" content="Creating an AutoYaST control file | openSUSE Leap 15.6" />
<meta property="og:description" content="To create the control file, you need to collect information about the systems you are going to install. This includes hardware data and network information amo…" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Creating an AutoYaST control file | openSUSE Leap 15.6" />
<meta name="twitter:description" content="To create the control file, you need to collect information about the systems you are going to install. This includes hardware data and network information amo…" />
<link rel="home" href="index.html" title="openSUSE Leap Documentation" /><link rel="up" href="part-control.html" title="Part I. Understanding and creating the AutoYaST control file" /><link rel="prev" href="cha-autoyast-control-file.html" title="Chapter 2. The AutoYaST control file" /><link rel="next" href="part-configuration.html" title="Part II. AutoYaST configuration examples" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="AutoYaST Guide"><span class="book-icon">AutoYaST Guide</span></a><span> › </span><a class="crumb" href="part-control.html">Understanding and creating the AutoYaST control file</a><span> › </span><a class="crumb" href="cha-autoyast-create-control-file.html">Creating an AutoYaST control file</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>AutoYaST Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="ay-preface.html"><span class="number"> </span><span class="name">Preface</span></a></li><li class="inactive"><a href="cha-intro-to-autoyast.html"><span class="number">1 </span><span class="name">Introduction to AutoYaST</span></a></li><li class="inactive"><a href="part-control.html"><span class="number">I </span><span class="name">Understanding and creating the AutoYaST control file</span></a><ol><li class="inactive"><a href="cha-autoyast-control-file.html"><span class="number">2 </span><span class="name">The AutoYaST control file</span></a></li><li class="inactive"><a href="cha-autoyast-create-control-file.html"><span class="number">3 </span><span class="name">Creating an AutoYaST control file</span></a></li></ol></li><li class="inactive"><a href="part-configuration.html"><span class="number">II </span><span class="name">AutoYaST configuration examples</span></a><ol><li class="inactive"><a href="cha-configuration-installation-options.html"><span class="number">4 </span><span class="name">Configuration and installation options</span></a></li></ol></li><li class="inactive"><a href="part-dynamic-profiles.html"><span class="number">III </span><span class="name">Managing mass installations with dynamic profiles</span></a><ol><li class="inactive"><a href="dynamic-profiles.html"><span class="number">5 </span><span class="name">Supported approaches to dynamic profiles</span></a></li><li class="inactive"><a href="rulesandclass.html"><span class="number">6 </span><span class="name">Rules and classes</span></a></li><li class="inactive"><a href="erb-templates.html"><span class="number">7 </span><span class="name">ERB templates</span></a></li><li class="inactive"><a href="pre-scripts.html"><span class="number">8 </span><span class="name">Combining ERB templates and scripts</span></a></li></ol></li><li class="inactive"><a href="bk07pt04.html"><span class="number">IV </span><span class="name">Understanding the auto-installation process</span></a><ol><li class="inactive"><a href="Invoking.html"><span class="number">9 </span><span class="name">The auto-installation process</span></a></li></ol></li><li class="inactive"><a href="bk07pt05.html"><span class="number">V </span><span class="name">Uses for AutoYaST on installed systems</span></a><ol><li class="inactive"><a href="InstalledSystem.html"><span class="number">10 </span><span class="name">Running AutoYaST in an installed system</span></a></li></ol></li><li class="inactive"><a href="bk07pt06.html"><span class="number">VI </span><span class="name">Appendixes</span></a><ol><li class="inactive"><a href="handlingrules.html"><span class="number">A </span><span class="name">Handling rules</span></a></li><li class="inactive"><a href="app-ay-faq.html"><span class="number">B </span><span class="name">AutoYaST FAQ—frequently asked questions</span></a></li><li class="inactive"><a href="appendix-linuxrc.html"><span class="number">C </span><span class="name">Advanced <code class="command">linuxrc</code> options</span></a></li><li class="inactive"><a href="bk07pt06apd.html"><span class="number">D </span><span class="name">GNU licenses</span></a></li></ol></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 2. The AutoYaST control file" href="cha-autoyast-control-file.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Part II. AutoYaST configuration examples" href="part-configuration.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="AutoYaST Guide"><span class="book-icon">AutoYaST Guide</span></a><span> › </span><a class="crumb" href="part-control.html">Understanding and creating the AutoYaST control file</a><span> › </span><a class="crumb" href="cha-autoyast-create-control-file.html">Creating an AutoYaST control file</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 2. The AutoYaST control file" href="cha-autoyast-control-file.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Part II. AutoYaST configuration examples" href="part-configuration.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha-autoyast-create-control-file"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname "><span class="productname"><span class="phrase">openSUSE Leap</span></span></span> <span class="productnumber "><span class="productnumber"><span class="phrase">15.6</span></span></span></div><div><h2 class="title"><span class="number">3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Creating an AutoYaST control file</span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>ay_create_control_file.xml</li><li><span class="ds-label">ID: </span>cha-autoyast-create-control-file</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha-autoyast-create-control-file.html#Autoinstallation-collectInfo"><span class="number">3.1 </span><span class="name">Collecting information</span></a></span></dt><dt><span class="sect1"><a href="cha-autoyast-create-control-file.html#CreateProfile-CMS"><span class="number">3.2 </span><span class="name">Using the configuration management system (CMS)</span></a></span></dt><dt><span class="sect1"><a href="cha-autoyast-create-control-file.html#CreateProfile-Manual"><span class="number">3.3 </span><span class="name">Creating/editing a control file manually</span></a></span></dt><dt><span class="sect1"><a href="cha-autoyast-create-control-file.html#CreateProfile-XSLT"><span class="number">3.4 </span><span class="name">Creating a control file via script with XSLT</span></a></span></dt><dt><span class="sect1"><a href="cha-autoyast-create-control-file.html#check-profile"><span class="number">3.5 </span><span class="name">Checking a control file</span></a></span></dt></dl></div></div><div class="sect1 " id="Autoinstallation-collectInfo"><div class="titlepage"><div><div><h2 class="title"><span class="number">3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Collecting information</span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#Autoinstallation-collectInfo">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>ay_create_control_file.xml</li><li><span class="ds-label">ID: </span>Autoinstallation-collectInfo</li></ul></div></div></div></div><p>
   To create the control file, you need to collect information about the
   systems you are going to install. This includes hardware data and network
   information among other things. Make sure you have the following information
   about the machines you want to install:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Hard disk types and sizes
    </p></li><li class="listitem "><p>
     Graphical interface and attached monitor, if any
    </p></li><li class="listitem "><p>
     Network interface and MAC address if known (for example, when using DHCP)
    </p></li></ul></div><p>
   Also verify that both <span class="package ">autoyast2-installation</span> and
   <span class="package ">autoyast2</span> are installed.
  </p></div><div class="sect1 " id="CreateProfile-CMS"><div class="titlepage"><div><div><h2 class="title"><span class="number">3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Using the configuration management system (CMS)</span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-CMS">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>ay_create_control_file.xml</li><li><span class="ds-label">ID: </span>CreateProfile-CMS</li></ul></div></div></div></div><p>
   To create the control file for one or more computers, a configuration
   interface based on YaST is provided. This system depends on existing
   modules which are usually used to configure a computer in regular operation
   mode, for example, after <span class="productname"><span class="phrase">openSUSE Leap</span></span> is installed.
  </p><p>
   The configuration management system lets you easily create control files and
   manage a repository of configurations for use in a networked environment
   with multiple clients.
  </p><div class="figure" id="id-1.9.4.3.4.4"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/autoyast2-maindialog_kde.png" target="_blank"><img src="images/autoyast2-maindialog_kde.png" width="" alt="Configuration system" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 3.1: </span><span class="name">Configuration system </span><a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#id-1.9.4.3.4.4">#</a></h6></div></div><div class="sect2 " id="CreateProfile-CMS-new"><div class="titlepage"><div><div><h3 class="title"><span class="number">3.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Creating a new control file</span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-CMS-new">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>ay_create_control_file.xml</li><li><span class="ds-label">ID: </span>CreateProfile-CMS-new</li></ul></div></div></div></div><p>
    The easiest way to create an AutoYaST profile is to use an existing
    <span class="productname"><span class="phrase">openSUSE Leap</span></span> system as a template. On an already installed system, launch
    <span class="guimenu ">YaST</span> › <span class="guimenu ">Miscellaneous</span> › <span class="guimenu ">Autoinstallation Configuration</span>. Then select
    <span class="guimenu ">Tools</span> › <span class="guimenu ">Create Reference
    Profile</span> from the menu. Choose the system components
    you want to include in the profile. Alternatively, create a profile
    containing the complete system configuration by launching
    <span class="guimenu ">YaST</span> › <span class="guimenu ">Miscellaneous</span> › <span class="guimenu ">Autoinstallation Cloning System</span> or running
    <code class="command">sudo yast clone_system</code> from the command line.
   </p><p>
    Both methods will create the file <code class="filename">/root/autoinst.xml</code>.
    The cloned profile can be used to set up an identical clone of the system
    it was created from. However, you will usually want to adjust the file to
    allow for installing multiple machines that are very similar, but not
    identical. This can be done by adjusting the profile with your favorite
    text/XML editor.
   </p><div id="id-1.9.4.3.4.5.4" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: Sensitive data in profiles</h6><p>
     Be aware that the profile might contain sensitive information such as
     password hashes and registration keys.
    </p><p>
     Carefully review the exported profiles and make sure to keep file
     permissions restrictive.
    </p></div><p>
    With some exceptions, almost all resources of the control file can be
    configured using the configuration management system. The system offers
    flexibility and the configuration of some resources is identical to the one
    available in the YaST control center. In addition to the existing and
    familiar modules new interfaces were created for special and complex
    configurations, for example for partitioning, general options and software.
   </p><p>
    Furthermore, using a CMS guarantees the validity of the resulting control
    file and its direct use for starting automated installation.
   </p><p>
    Make sure the configuration system is installed (package
    <code class="systemitem">autoyast2</code>). Call AutoYaST using the
    YaST control center or as root with the following command (make sure the
    <code class="envar">DISPLAY</code> variable is set correctly to start the graphical
    user interface instead of the text-based one):
   </p><div class="verbatim-wrap"><pre class="screen">/sbin/yast2 autoyast</pre></div></div></div><div class="sect1 " id="CreateProfile-Manual"><div class="titlepage"><div><div><h2 class="title"><span class="number">3.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Creating/editing a control file manually</span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-Manual">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>ay_create_control_file.xml</li><li><span class="ds-label">ID: </span>CreateProfile-Manual</li></ul></div></div></div></div><p>
   If editing the control file manually, make sure it has a valid syntax. To
   check the syntax, use the tools already available on the distribution. For
   example, to verify that the file is well-formed (has a valid XML structure),
   use the utility <code class="command">xmllint</code> available with the
   <code class="systemitem">libxml2</code> package:
  </p><div class="verbatim-wrap"><pre class="screen">xmllint &lt;control file&gt;</pre></div><p>
   If the control file is not well formed, for example, if a tag is not closed,
   <code class="command">xmllint</code> will report the errors.
  </p><p>
   To validate the control file, use the tool <code class="command">jing</code> from the
   package with the same name. During validation, misplaced or missing tags and
   attributes and wrong attribute values are detected. 
  </p><div class="verbatim-wrap"><pre class="screen">jing /usr/share/YaST2/schema/autoyast/rng/profile.rng &lt;control file&gt;</pre></div><p>
   <code class="literal">/usr/share/YaST2/schema/autoyast/rng/profile.rng</code> is
   provided by the package <code class="literal">yast2-schema-default</code>. This
   file describes the syntax and classes of an AutoYaST profile.
  </p><div id="id-1.9.4.3.5.8" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note: Schema extensions</h6><p>
    AutoYaST can be extended by other products and modules, but the schema does not
    contain the specification for those extensions. As a consequence, when AutoYaST
    is given a profile that uses one of those extensions, it might report the
    profile as invalid.
   </p><p>
    Thus, starting in <span class="productname"><span class="phrase">openSUSE Leap</span></span>
    <span class="phrase">15.3</span>,
    AutoYaST does not validate top-level unknown sections, and ignores them. For
    example, in the example below, <code class="literal">&lt;sap-inst&gt;</code> is not
    validated. The rest is validated as usual.
   </p><div class="verbatim-wrap"><pre class="screen">&lt;general&gt;
  &lt;mode&gt;
    &lt;confirm config:type="boolean"&gt;true&lt;/confirm&gt;
  &lt;/mode&gt;
&lt;/general&gt;

&lt;sap-inst&gt;
  &lt;!-- this section is not validated --&gt;&gt;
&lt;/sap-inst&gt;</pre></div></div><p>
   Before going on with the autoinstallation, fix any errors resulting from
   such checks. The autoinstallation process cannot be started with an invalid
   and not well-formed control file.
  </p><p>
   You can use any XML editor available on your system or any text editor
   with XML support (for example, Emacs, Vim).
   <span class="phrase">However,
   it is not optimal to create the control file manually for multiple
   machines, and it should only be seen as an interface between the
   autoinstallation engine and the Configuration Management System (CMS)</span>.
  </p><div id="id-1.9.4.3.5.11" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg" /><h6>Tip: Using Emacs as an XML editor</h6><p>
    The built-in nxml-mode turns Emacs into a fully-fledged XML editor with
    automatic tag completion and validation. Refer to the Emacs help for
    instructions on how to set up nxml-mode.
   </p></div></div><div class="sect1 " id="CreateProfile-XSLT"><div class="titlepage"><div><div><h2 class="title"><span class="number">3.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Creating a control file via script with XSLT</span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-XSLT">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>ay_create_control_file.xml</li><li><span class="ds-label">ID: </span>CreateProfile-XSLT</li></ul></div></div></div></div><p>
   If you have a template and want to change a few things via script or command
   line, use an XSLT processor like <code class="literal">xsltproc</code>. For example,
   if you have an AutoYaST control file and want to fill out the host name via
   script for any reason. (If doing this often, you should consider scripting
   it.)
  </p><p>
   First, create an XSL file:
  </p><div class="example" id="id-1.9.4.3.6.4"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 3.1: </span><span class="name">Example file for replacing the host name/domain by script </span><a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#id-1.9.4.3.6.4">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:y2="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"
  xmlns="http://www.suse.com/1.0/yast2ns"
  version="1.0"&gt;
  &lt;xsl:output method="xml" encoding="UTF-8" indent="yes" omit-xml-declaration="no" cdata-section-elements="source"/&gt;

  &lt;!-- the parameter names --&gt;
  &lt;xsl:param name="hostname"/&gt;
  &lt;xsl:param name="domain"/&gt;

  &lt;xsl:template match="/"&gt;
    &lt;xsl:apply-templates select="@*|node()"/&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="y2:dns"&gt;
    &lt;xsl:copy&gt;
      &lt;!-- where to copy the parameters --&gt;
      &lt;domain&gt;&lt;xsl:value-of select="string($domain)"/&gt;&lt;/domain&gt;
      &lt;hostname&gt;&lt;xsl:value-of select="string($hostname)"/&gt;&lt;/hostname&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;


  &lt;xsl:template match="@*|node()" &gt;
    &lt;xsl:copy&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</pre></div></div></div><p>
   This file expects the host name and the domain name as parameters from the
   user.
  </p><div class="verbatim-wrap"><pre class="screen">&lt;xsl:param name="hostname"/&gt;
&lt;xsl:param name="domain"/&gt;</pre></div><p>
   There will be a copy of those parameters in the DNS section of the control
   file. This means that if there already is a domain element in the DNS
   section, you will get a second one, which will cause conflicts.
  </p><p>
   For more information about XSLT, go to the official Web page
   <a class="link" href="https://www.w3.org/TR/xslt" target="_blank">www.w3.org/TR/xslt</a>
  </p></div><div class="sect1 " id="check-profile"><div class="titlepage"><div><div><h2 class="title"><span class="number">3.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Checking a control file</span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#check-profile">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>ay_create_control_file.xml</li><li><span class="ds-label">ID: </span>check-profile</li></ul></div></div></div></div><p>
   Depending on the use case, creating an AutoYaST profile can be difficult,
   especially if you build a dynamic profile using rules/classes, ERB templates
   or pre-scripts. For more information, see
   <a class="xref" href="part-dynamic-profiles.html" title="Part III. Managing mass installations with dynamic profiles">Part III, “Managing mass installations with dynamic profiles”</a>.
  </p><p>
   Starting with <span class="productname"><span class="phrase">openSUSE Leap</span></span>
   <span class="phrase">15.3</span>, AutoYaST validates the profile
   during the installation, reporting any problem found to the user. Although
   it is recommended to check whether the profile is correct or not, you can
   disable this behavior by setting the
   <code class="literal">YAST_SKIP_XML_VALIDATION</code> boot parameter to
   <code class="literal">1</code>.
  </p><p>
   Moreover, to simplify the testing and debugging process, AutoYaST offers the
   <code class="literal">check-profile</code> command, which takes care of fetching,
   building and, optionally, importing the profile to detect any potential
   problem.
  </p><div id="id-1.9.4.3.7.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note: Results may vary</h6><p>
    Although this command uses the same approach as the installation, the
    results may vary depending on the differences between the current system
    and installation media: YaST package versions, architecture, etc.
   </p></div><div id="id-1.9.4.3.7.6" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: Use only trusted profiles</h6><p>
    You must be careful when running this command because pre-installation
    scripts and ERB code would run as the <code class="literal">root</code> user. Use
    only profiles that you trust.
   </p></div><div class="sect2 " id="sec-basic-checks"><div class="titlepage"><div><div><h3 class="title"><span class="number">3.5.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Basic checks</span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#sec-basic-checks">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>ay_create_control_file.xml</li><li><span class="ds-label">ID: </span>sec-basic-checks</li></ul></div></div></div></div><p>
    The simplest way to use this command is just to read and validate the
    profile:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=autoinst.xml output=result.xml</pre></div><p>
    The <code class="filename">result.xml</code> file contains the result of evaluating
    the profile. Bear in mind that, even if you do not use any advanced
    feature, the content of <code class="filename">autoinst.xml</code> and
    <code class="filename">result.xml</code> may differ. The reason is that AutoYaST does
    some cleaning up when it processes the profile.
   </p><p>
    <code class="literal">check-profile</code> can deal with remote files too:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=http://192.168.1.100/autoinst.xml output=result.xml</pre></div></div><div class="sect2 " id="sec-running-pre-scripts"><div class="titlepage"><div><div><h3 class="title"><span class="number">3.5.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Running pre-scripts</span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#sec-running-pre-scripts">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>ay_create_control_file.xml</li><li><span class="ds-label">ID: </span>sec-running-pre-scripts</li></ul></div></div></div></div><p>
    Optionally, AutoYaST can run the scripts that are included in the profile,
    reporting any error found during the execution. This is especially relevant
    if you are using a pre-installation script to modify the profile. To enable
    this feature, you need to set the <code class="literal">run-scripts</code> option to
    <code class="literal">true</code>.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=http://192.168.1.100/autoinst.xml output=result.xml run-scripts=true</pre></div><div id="id-1.9.4.3.7.8.4" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: Scripts run as root</h6><p>
     You must be careful when enabling the <code class="literal">run-scripts</code>
     option, because the scripts will run as root and they may affect the
     current system.
    </p></div></div><div class="sect2 " id="sec-importing-profile"><div class="titlepage"><div><div><h3 class="title"><span class="number">3.5.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Importing the profile</span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#sec-importing-profile">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/ay_create_control_file.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>ay_create_control_file.xml</li><li><span class="ds-label">ID: </span>sec-importing-profile</li></ul></div></div></div></div><p>
    It is possible to face some problems when importing a valid profile, even
    if it is correct. The reason is that AutoYaST does not perform any logic check
    when fetching, building and validating the profile.
   </p><p>
    To anticipate such problems, the <code class="literal">check-profile</code> command
    imports the profile and reports problems that it has detected. As it may
    take a while, you can disable this behavior by setting the
    <code class="literal">import-all</code> option to <code class="literal">false</code>.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  yast2 autoyast check-profile filename=http://192.168.1.100/autoinst.xml output=result.xml import-all=false</pre></div><p>
    Importing the profile is a safe operation and does not alter the underlying
    system in any way.
   </p></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="part-configuration.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Part II </span>AutoYaST configuration examples</span></a><a class="nav-link" href="cha-autoyast-control-file.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 2 </span>The AutoYaST control file</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2024 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>