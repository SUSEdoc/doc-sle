<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tuning the task scheduler | System Analysis and Tuning Guide | openSUSE Leap 15.6</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Tuning the task scheduler | openSUSE Leap 15.6" />
<meta name="description" content="Modern operating systems, such as openSUSE® Leap, normally run many tasks at the same time. For example, you can be searching in a text file while receiving an…" />
<meta name="product-name" content="openSUSE Leap" />
<meta name="product-number" content="15.6" />
<meta name="book-title" content="System Analysis and Tuning Guide" />
<meta name="chapter-title" content="Chapter 14. Tuning the task scheduler" />
<meta name="tracker-url" content="https://bugzilla.opensuse.org/enter_bug.cgi" />
<meta name="tracker-type" content="bsc" />
<meta name="tracker-bsc-assignee" content="fs@suse.com" />
<meta name="tracker-bsc-component" content="Documentation" />
<meta name="tracker-bsc-product" content="openSUSE Distribution" />
<meta name="tracker-bsc-version" content="Leap 15.4" />
<meta property="og:title" content="Tuning the task scheduler | openSUSE Leap 15.6" />
<meta property="og:description" content="Modern operating systems, such as openSUSE® Leap, normally run many tasks at the same time. For example, you can be searching in a text file while receiving an…" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Tuning the task scheduler | openSUSE Leap 15.6" />
<meta name="twitter:description" content="Modern operating systems, such as openSUSE® Leap, normally run many tasks at the same time. For example, you can be searching in a text file while receiving an…" />
<link rel="home" href="index.html" title="openSUSE Leap Documentation" /><link rel="up" href="part-tuning-kernel.html" title="Part V. Kernel tuning" /><link rel="prev" href="cha-tuning-io.html" title="Chapter 13. Tuning I/O performance" /><link rel="next" href="cha-tuning-memory.html" title="Chapter 15. Tuning the memory management subsystem" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="System Analysis and Tuning Guide"><span class="book-icon">System Analysis and Tuning Guide</span></a><span> › </span><a class="crumb" href="part-tuning-kernel.html">Kernel tuning</a><span> › </span><a class="crumb" href="cha-tuning-taskscheduler.html">Tuning the task scheduler</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>System Analysis and Tuning Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="preface-tuning.html"><span class="number"> </span><span class="name">Preface</span></a></li><li class="inactive"><a href="part-tuning-basics.html"><span class="number">I </span><span class="name">Basics</span></a><ol><li class="inactive"><a href="cha-tuning-basics.html"><span class="number">1 </span><span class="name">General notes on system tuning</span></a></li></ol></li><li class="inactive"><a href="part-tuning-monitoring.html"><span class="number">II </span><span class="name">System monitoring</span></a><ol><li class="inactive"><a href="cha-util.html"><span class="number">2 </span><span class="name">System monitoring utilities</span></a></li><li class="inactive"><a href="cha-tuning-syslog.html"><span class="number">3 </span><span class="name">System log files</span></a></li></ol></li><li class="inactive"><a href="part-tuning-kerneltrace.html"><span class="number">III </span><span class="name">Kernel monitoring</span></a><ol><li class="inactive"><a href="cha-tuning-systemtap.html"><span class="number">4 </span><span class="name">SystemTap—filtering and analyzing system data</span></a></li><li class="inactive"><a href="cha-tuning-kprobes.html"><span class="number">5 </span><span class="name">Kernel probes</span></a></li><li class="inactive"><a href="cha-perf.html"><span class="number">6 </span><span class="name">Hardware-based performance monitoring with Perf</span></a></li><li class="inactive"><a href="cha-tuning-oprofile.html"><span class="number">7 </span><span class="name">OProfile—system-wide profiler</span></a></li><li class="inactive"><a href="cha-tuning-dynamic-debug.html"><span class="number">8 </span><span class="name">Dynamic debug—kernel debugging messages</span></a></li></ol></li><li class="inactive"><a href="part-tuning-resources.html"><span class="number">IV </span><span class="name">Resource management</span></a><ol><li class="inactive"><a href="cha-tuning-resources.html"><span class="number">9 </span><span class="name">General system resource management</span></a></li><li class="inactive"><a href="cha-tuning-cgroups.html"><span class="number">10 </span><span class="name">Kernel control groups</span></a></li><li class="inactive"><a href="cha-tuning-numactl.html"><span class="number">11 </span><span class="name">Automatic Non-Uniform Memory Access (NUMA) balancing</span></a></li><li class="inactive"><a href="cha-tuning-power.html"><span class="number">12 </span><span class="name">Power management</span></a></li></ol></li><li class="inactive"><a href="part-tuning-kernel.html"><span class="number">V </span><span class="name">Kernel tuning</span></a><ol><li class="inactive"><a href="cha-tuning-io.html"><span class="number">13 </span><span class="name">Tuning I/O performance</span></a></li><li class="inactive"><a href="cha-tuning-taskscheduler.html"><span class="number">14 </span><span class="name">Tuning the task scheduler</span></a></li><li class="inactive"><a href="cha-tuning-memory.html"><span class="number">15 </span><span class="name">Tuning the memory management subsystem</span></a></li><li class="inactive"><a href="cha-tuning-network.html"><span class="number">16 </span><span class="name">Tuning the network</span></a></li></ol></li><li class="inactive"><a href="part-tuning-dumps.html"><span class="number">VI </span><span class="name">Handling system dumps</span></a><ol><li class="inactive"><a href="cha-tuning-tracing.html"><span class="number">17 </span><span class="name">Tracing tools</span></a></li><li class="inactive"><a href="cha-tuning-kexec.html"><span class="number">18 </span><span class="name">Kexec and Kdump</span></a></li><li class="inactive"><a href="cha-tuning-systemd-coredump.html"><span class="number">19 </span><span class="name">Using <code class="systemitem">systemd-coredump</code> to debug application crashes</span></a></li></ol></li><li class="inactive"><a href="part-tuning-ptp.html"><span class="number">VII </span><span class="name">Synchronized clocks with Precision Time Protocol</span></a><ol><li class="inactive"><a href="cha-tuning-ptp.html"><span class="number">20 </span><span class="name">Precision Time Protocol</span></a></li></ol></li><li class="inactive"><a href="bk05apa.html"><span class="number">A </span><span class="name">GNU licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 13. Tuning I/O performance" href="cha-tuning-io.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 15. Tuning the memory management subsystem" href="cha-tuning-memory.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="System Analysis and Tuning Guide"><span class="book-icon">System Analysis and Tuning Guide</span></a><span> › </span><a class="crumb" href="part-tuning-kernel.html">Kernel tuning</a><span> › </span><a class="crumb" href="cha-tuning-taskscheduler.html">Tuning the task scheduler</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 13. Tuning I/O performance" href="cha-tuning-io.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 15. Tuning the memory management subsystem" href="cha-tuning-memory.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha-tuning-taskscheduler"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname "><span class="productname"><span class="phrase">openSUSE Leap</span></span></span> <span class="productnumber "><span class="productnumber"><span class="phrase">15.6</span></span></span></div><div><h2 class="title"><span class="number">14 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Tuning the task scheduler</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>cha-tuning-taskscheduler</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-intro"><span class="number">14.1 </span><span class="name">Introduction</span></a></span></dt><dt><span class="sect1"><a href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-policy-class"><span class="number">14.2 </span><span class="name">Process classification</span></a></span></dt><dt><span class="sect1"><a href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-cfs"><span class="number">14.3 </span><span class="name">Completely Fair Scheduler</span></a></span></dt><dt><span class="sect1"><a href="cha-tuning-taskscheduler.html#cha-tuning-taskscheduler-moreinfo"><span class="number">14.4 </span><span class="name">More information</span></a></span></dt></dl></div></div><p>
    Modern operating systems, such as <span class="productname"><span class="phrase">openSUSE® Leap</span></span>, normally run many tasks
    at the same time. For example, you can be searching in a text file while
    receiving an e-mail and copying a big file to an external hard disk. These
    simple tasks require many additional processes to be run by the system. To
    provide each task with its required system resources, the Linux kernel
    needs a tool to distribute available system resources to individual tasks.
    And this is exactly what the <span class="emphasis"><em>task scheduler</em></span> does.
  </p><p>
    The following sections explain the most important terms related to a
    process scheduling. They also introduce information about the task
    scheduler policy, scheduling algorithm, description of the task scheduler
    used by <span class="productname"><span class="phrase">openSUSE Leap</span></span>, and references to other sources of relevant
    information.
  </p><div class="sect1 " id="sec-tuning-taskscheduler-intro"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Introduction</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-intro">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-intro</li></ul></div></div></div></div><p>
      The Linux kernel controls the way that tasks (or processes) are managed
      on the system. The task scheduler, sometimes called <span class="emphasis"><em>process
      scheduler</em></span>, is the part of the kernel that decides which task
      to run next. It is responsible for the optimal use of system resources to
      guarantee that multiple tasks are being executed simultaneously. This
      makes it a core component of any multitasking operating system.
    </p><div class="sect2 " id="sec-tuning-taskscheduler-intro-preemption"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Preemption</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-intro-preemption">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-intro-preemption</li></ul></div></div></div></div><p>
        The theory behind task scheduling is simple. If there are runnable
        processes in a system, at least one process must always be running. If
        there are more runnable processes than processors in a system, not all
        the processes can be running all the time.
      </p><p>
        Therefore, certain processes need to be stopped temporarily, or
        <span class="emphasis"><em>suspended</em></span>, so that others can be running again.
        The scheduler decides what process in the queue runs next.
      </p><p>
        As already mentioned, Linux, like all other Unix variants, is a
        <span class="emphasis"><em>multitasking</em></span> operating system. That means that
        several tasks can be running at the same time. Linux provides a so
        called <span class="emphasis"><em>preemptive</em></span> multitasking, where the
        scheduler decides when a process is suspended. This forced suspension
        is called <span class="emphasis"><em>preemption</em></span>. All Unix flavors have been
        providing preemptive multitasking since the beginning.
      </p></div><div class="sect2 " id="sec-tuning-taskscheduler-intro-timeslice"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Timeslice</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-intro-timeslice">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-intro-timeslice</li></ul></div></div></div></div><p>
        The time period for which a process runs before it is
        <span class="emphasis"><em>preempted</em></span> is defined in advance. It is called a
        <span class="emphasis"><em>timeslice</em></span> of a process and represents the amount
        of processor time that is provided to each process. By assigning
        timeslices, the scheduler makes global decisions for the running
        system, and prevents individual processes from taking control of the
        processor resources.
        
      </p></div><div class="sect2 " id="sec-tuning-taskscheduler-intro-priority"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Process priority</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-intro-priority">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-intro-priority</li></ul></div></div></div></div><p>
        The scheduler evaluates processes based on their priority. To calculate
        the current priority of a process, the task scheduler uses complex
        algorithms. As a result, each process is given a value according to
        which it is <span class="quote">“<span class="quote ">allowed</span>”</span> to run on a processor.
      </p></div></div><div class="sect1 " id="sec-tuning-taskscheduler-policy-class"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Process classification</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-policy-class">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-policy-class</li></ul></div></div></div></div><p>
      Processes are classified according to their purpose and behavior.
      Although the borderline is not always distinct, generally two criteria
      are used to sort them. These criteria are independent and do not exclude
      each other.
    </p><p>
      One approach is to classify a process either
      <span class="emphasis"><em>I/O-bound</em></span> or <span class="emphasis"><em>processor-bound</em></span>.
    </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.7.7.3.6.4.1"><span class="term ">I/O-bound</span></dt><dd><p>
            I/O stands for Input/Output devices, such as keyboards, mice, or
            optical and hard disks. <span class="emphasis"><em>I/O-bound processes</em></span>
            spend most of the time submitting and waiting for requests. They
            are run frequently, but at short time intervals, not to block other
            processes waiting for I/O requests.
          </p></dd><dt id="id-1.7.7.3.6.4.2"><span class="term ">processor-bound</span></dt><dd><p>
            <span class="emphasis"><em>Processor-bound</em></span> tasks use their time to
            execute a code, and run until they are preempted by the scheduler.
            They do not block processes waiting for I/O requests, and,
            therefore, can be run less frequently but for longer time
            intervals.
          </p></dd></dl></div><p>
      Another approach is to divide processes by type into
      <span class="emphasis"><em>interactive</em></span>, <span class="emphasis"><em>batch</em></span>, and
      <span class="emphasis"><em>real-time</em></span> processes.
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
          <span class="emphasis"><em>Interactive</em></span> processes spend a lot of time
          waiting for I/O requests, such as keyboard or mouse operations. The
          scheduler must wake up such processes quickly on user request, or the
          user finds the environment unresponsive. The typical delay is
          approximately 100 ms. Office applications, text editors or image
          manipulation programs represent typical interactive processes.
        </p></li><li class="listitem "><p>
          <span class="emphasis"><em>Batch</em></span> processes often run in the background and
          do not need to be responsive. They receive lower priority from the
          scheduler. Multimedia converters, database search engines, or log
          files analyzers are typical examples of batch processes.
        </p></li><li class="listitem "><p>
          <span class="emphasis"><em>Real-time</em></span> processes must never be blocked by
          low-priority processes, and the scheduler guarantees a short response
          time to them. Applications for editing multimedia content are a good
          example here.
        </p></li></ul></div></div><div class="sect1 " id="sec-tuning-taskscheduler-cfs"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Completely Fair Scheduler</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-cfs">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-cfs</li></ul></div></div></div></div><p>
      Since the Linux kernel version 2.6.23, a new approach has been taken to
      the scheduling of runnable processes. Completely Fair Scheduler (CFS)
      became the default Linux kernel scheduler. Since then, important changes
      and improvements have been made. The information in this chapter applies
      to <span class="productname"><span class="phrase">openSUSE Leap</span></span> with kernel version 2.6.32 and higher (including 3.x
      kernels). The scheduler environment was divided into several parts, and
      three main new features were introduced:
    </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.7.7.3.7.3.1"><span class="term ">Modular scheduler core</span></dt><dd><p>
            The core of the scheduler was enhanced with <span class="emphasis"><em>scheduling
            classes</em></span>. These classes are modular and represent
            scheduling policies.
          </p></dd><dt id="id-1.7.7.3.7.3.2"><span class="term ">Completely Fair Scheduler</span></dt><dd><p>
            Introduced in kernel 2.6.23 and extended in 2.6.24, CFS tries to
            assure that each process obtains its <span class="quote">“<span class="quote ">fair</span>”</span> share of
            the processor time.
          </p></dd><dt id="id-1.7.7.3.7.3.3"><span class="term ">Group scheduling</span></dt><dd><p>
            For example, if you split processes into groups according to which
            user is running them, CFS tries to provide each of these groups
            with the same amount of processor time.
          </p></dd></dl></div><p>
      As a result, CFS brings optimized scheduling for both servers and
      desktops.
    </p><div class="sect2 " id="sec-tuning-taskscheduler-cfs-howitworks"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">How CFS works</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-cfs-howitworks">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-cfs-howitworks</li></ul></div></div></div></div><p>
        CFS tries to guarantee a fair approach to each runnable task. To find
        the most balanced way of task scheduling, it uses the concept of
        <span class="emphasis"><em>red-black tree</em></span>. A red-black tree is a type of
        self-balancing data search tree which provides inserting and removing
        entries in a reasonable way so that it remains well balanced.
      </p><p>
        When CFS schedules a task it accumulates <span class="quote">“<span class="quote ">virtual runtime</span>”</span>
        or <span class="emphasis"><em>vruntime</em></span>. The next task picked to run is always
        the task with the minimum accumulated vruntime so far. By balancing the
        red-black tree when tasks are inserted into the <span class="emphasis"><em>run
        queue</em></span> (a planned time line of processes to be executed
        next), the task with the minimum vruntime is always the first entry in
        the red-black tree.
      </p><p>
        The amount of vruntime a task accrues is related to its priority. High
        priority tasks gain vruntime at a slower rate than low priority tasks,
        which results in high priority tasks being picked to run on the
        processor more often.
      </p></div><div class="sect2 " id="sec-tuning-taskscheduler-cfs-grouping"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Grouping processes</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-cfs-grouping">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-cfs-grouping</li></ul></div></div></div></div><p>
        Since the Linux kernel version 2.6.24, CFS can be tuned to be fair to
        groups rather than to tasks only. Runnable tasks are then grouped to
        form entities, and CFS tries to be fair to these entities instead of
        individual runnable tasks. The scheduler also tries to be fair to
        individual tasks within these entities.
      </p><p>
        The kernel scheduler lets you group runnable tasks using control
        groups. For more information, see <a class="xref" href="cha-tuning-cgroups.html" title="Chapter 10. Kernel control groups">Chapter 10, <em>Kernel control groups</em></a>.
      </p></div><div class="sect2 " id="sec-tuning-taskscheduler-cfs-kernelconfig"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.3.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Kernel configuration options</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-cfs-kernelconfig">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-cfs-kernelconfig</li></ul></div></div></div></div><p>
        Basic aspects of the task scheduler behavior can be set through the
        kernel configuration options. Setting these options is part of the
        kernel compilation process. Because kernel compilation process is a
        complex task and out of this document's scope, refer to relevant source
        of information.
      </p><div id="id-1.7.7.3.7.7.3" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: Kernel compilation</h6><p>
          If you run <span class="productname"><span class="phrase">openSUSE Leap</span></span> on a kernel that was not shipped with it,
          for example on a self-compiled kernel, you lose the entire support
          entitlement.
        </p></div></div><div class="sect2 " id="sec-tuning-taskscheduler-cfs-terms"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.3.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Terminology</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-cfs-terms">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-cfs-terms</li></ul></div></div></div></div><p>
        Documents regarding task scheduling policy often use several technical
        terms which you need to know to understand the information correctly. A
        few of them are as follows:
      </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.7.7.3.7.8.3.1"><span class="term ">Latency</span></dt><dd><p>
              Delay between the time a process is scheduled to run and the
              actual process execution.
            </p></dd><dt id="id-1.7.7.3.7.8.3.2"><span class="term ">Granularity</span></dt><dd><p>
              The relation between granularity and latency can be expressed by
              the following equation:
            </p><div class="verbatim-wrap"><pre class="screen">gran = ( lat / rtasks ) - ( lat / rtasks / rtasks )</pre></div><p>
              where <span class="emphasis"><em>gran</em></span> stands for granularity,
              <span class="emphasis"><em>lat</em></span> stand for latency, and
              <span class="emphasis"><em>rtasks</em></span> is the number of running tasks.
            </p></dd></dl></div><div class="sect3 " id="kernel-tasksched-policies"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.3.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Scheduling policies</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#kernel-tasksched-policies">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>kernel-tasksched-policies</li></ul></div></div></div></div><p>
          The Linux kernel supports the following scheduling policies:
        </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.7.7.3.7.8.4.3.1"><span class="term ">SCHED_FIFO</span></dt><dd><p>
                Scheduling policy designed for special time-critical
                applications. It uses the First In-First Out scheduling
                algorithm.
              </p></dd><dt id="id-1.7.7.3.7.8.4.3.2"><span class="term ">SCHED_BATCH</span></dt><dd><p>
                Scheduling policy designed for CPU-intensive tasks.
              </p></dd><dt id="id-1.7.7.3.7.8.4.3.3"><span class="term ">SCHED_IDLE</span></dt><dd><p>
                Scheduling policy intended for <span class="emphasis"><em>very</em></span>
                low-priority tasks.
              </p></dd><dt id="id-1.7.7.3.7.8.4.3.4"><span class="term ">SCHED_OTHER</span></dt><dd><p>
                Default Linux time-sharing scheduling policy used by most of
                the processes.
              </p></dd><dt id="id-1.7.7.3.7.8.4.3.5"><span class="term ">SCHED_RR</span></dt><dd><p>
                Similar to <code class="systemitem">SCHED_FIFO</code>, but uses the
                Round Robin scheduling algorithm.
              </p></dd></dl></div></div></div><div class="sect2 " id="sec-tuning-taskscheduler-cfs-chrt"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.3.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Changing real-time attributes of processes with <code class="command">chrt</code></span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-cfs-chrt">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-cfs-chrt</li></ul></div></div></div></div><p>
        The <code class="command">chrt</code> command sets or retrieves the real-time
        scheduling attributes of a running process, or runs a command with the
        specified attributes. You can get or retrieve both the scheduling
        policy and priority of a process.
      </p><p>
        In the following examples, a process whose PID is 16244 is used.
      </p><p>
        To <span class="emphasis"><em>retrieve</em></span> the real-time attributes of an
        existing task:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>chrt -p 16244
pid 16244's current scheduling policy: SCHED_OTHER
pid 16244's current scheduling priority: 0</pre></div><p>
        Before setting a new scheduling policy on the process, you need to find
        out the minimum and maximum valid priorities for each scheduling
        algorithm:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>chrt -m
SCHED_SCHED_OTHER min/max priority : 0/0
SCHED_SCHED_FIFO min/max priority : 1/99
SCHED_SCHED_RR min/max priority : 1/99
SCHED_SCHED_BATCH min/max priority : 0/0
SCHED_SCHED_IDLE min/max priority : 0/0</pre></div><p>
        In the above example, SCHED_OTHER, SCHED_BATCH, SCHED_IDLE polices only
        allow for priority 0, while that of SCHED_FIFO and SCHED_RR can range
        from 1 to 99.
      </p><p>
        To set SCHED_BATCH scheduling policy:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>chrt -b -p 0 16244
pid 16244's current scheduling policy: SCHED_BATCH
pid 16244's current scheduling priority: 0</pre></div><p>
        For more information on <code class="command">chrt</code>, see its man page
        (<code class="command">man 1 chrt</code>).
      </p></div><div class="sect2 " id="sec-tuning-taskscheduler-cfs-tuning"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.3.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Runtime tuning with <code class="command">sysctl</code></span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-cfs-tuning">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-cfs-tuning</li></ul></div></div></div></div><p>
        The <code class="command">sysctl</code> interface for examining and changing
        kernel parameters at runtime introduces important variables, using
        which you can change the default behavior of the task scheduler. The
        syntax of the <code class="command">sysctl</code> is simple, and all the
        following commands must be entered on the command line as <code class="systemitem">root</code>.
      </p><p>
        To read a value from a kernel variable, enter
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">sysctl <em class="replaceable ">VARIABLE</em></code></pre></div><p>
        To assign a value, enter
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">sysctl <em class="replaceable ">VARIABLE</em>=<em class="replaceable ">VALUE</em></code></pre></div><p>
        To get a list of all scheduler-related variables, run the
        <code class="command">sysctl</code> command, and use <code class="command">grep</code> to
        filter the output:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">sysctl -A | grep "sched" | grep -v "domain"</code>
kernel.sched_cfs_bandwidth_slice_us = 5000
kernel.sched_child_runs_first = 0
kernel.sched_compat_yield = 0
kernel.sched_latency_ns = 24000000
kernel.sched_migration_cost_ns = 500000
kernel.sched_min_granularity_ns = 8000000
kernel.sched_nr_migrate = 32
kernel.sched_rr_timeslice_ms = 25
kernel.sched_rt_period_us = 1000000
kernel.sched_rt_runtime_us = 950000
kernel.sched_schedstats = 0
kernel.sched_shares_window_ns = 10000000
kernel.sched_time_avg_ms = 1000
kernel.sched_tunable_scaling = 1
kernel.sched_wakeup_granularity_ns = 10000000</pre></div><p>
        Variables ending with <span class="quote">“<span class="quote ">_ns</span>”</span> and <span class="quote">“<span class="quote ">_us</span>”</span> accept
        values in nanoseconds and microseconds, respectively.
      </p><p>
        A list of the most important task scheduler <code class="command">sysctl</code>
        tuning variables (located at <code class="filename">/proc/sys/kernel/</code>)
        with a short description follows:
      </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.7.7.3.7.10.11.1"><span class="term "><code class="systemitem">sched_cfs_bandwidth_slice_us</code></span></dt><dd><p>
              When CFS bandwidth control is in use, this parameter controls the
              amount of runtime (bandwidth) transferred to a run queue from the
              task's control group bandwidth pool. Small values allow the
              global bandwidth to be shared in a fine-grained manner among
              tasks, larger values reduce transfer overhead. See
              <a class="link" href="https://www.kernel.org/doc/Documentation/scheduler/sched-bwc.txt" target="_blank">https://www.kernel.org/doc/Documentation/scheduler/sched-bwc.txt</a>.
            </p></dd><dt id="id-1.7.7.3.7.10.11.2"><span class="term "><code class="systemitem">sched_child_runs_first</code></span></dt><dd><p>
              A freshly forked child runs before the parent continues
              execution. Setting this parameter to <code class="literal">1</code> is
              beneficial for an application in which the child performs an
              execution after fork.
            </p></dd><dt id="id-1.7.7.3.7.10.11.3"><span class="term "><code class="systemitem">sched_compat_yield</code></span></dt><dd><p>
              Enables the aggressive CPU yielding behavior of the old
              <span class="emphasis"><em>O(1)</em></span> scheduler by moving the relinquishing
              task to the end of the runnable queue (right-most position in the
              red-black tree). Applications that depend on the
              <code class="option">sched_yield(2)</code> syscall behavior may see
              performance improvements by giving other processes a chance to
              run when there are highly contended resources (such as locks).
              Given that this call occurs in context switching, misusing the
              call can hurt the workload. Use it only when you see a drop in
              performance. The default value is <code class="literal">0</code>.
            </p></dd><dt id="id-1.7.7.3.7.10.11.4"><span class="term "><code class="systemitem">sched_migration_cost_ns</code></span></dt><dd><p>
              Amount of time after the last execution that a task is considered
              to be <span class="quote">“<span class="quote ">cache hot</span>”</span> in migration decisions. A
              <span class="quote">“<span class="quote ">hot</span>”</span> task has fewer chances of migration to another
              CPU, so increasing this variable reduces task migrations. The
              default value is <code class="literal">500000</code> (ns).
            </p><p>
              If the CPU idle time is higher than expected when there are
              runnable processes, try reducing this value. If tasks bounce
              between CPUs or nodes too often, try increasing it.
            </p></dd><dt id="id-1.7.7.3.7.10.11.5"><span class="term "><code class="systemitem">sched_latency_ns</code></span></dt><dd><p>
              Targeted preemption latency for CPU bound tasks. Increasing this
              variable increases a CPU bound task's timeslice. A task's
              timeslice is its weighted fair share of the scheduling period:
            </p><p>
              timeslice = scheduling period * (task's weight/total weight of
              tasks in the run queue)
            </p><p>
              The task's weight depends on the task's nice level and the
              scheduling policy. Minimum task weight for a SCHED_OTHER task is
              15, corresponding to nice 19. The maximum task weight is 88761,
              corresponding to nice -20.
            </p><p>
              Timeslices become smaller as the load increases. When the number
              of runnable tasks exceeds
              <code class="systemitem">sched_latency_ns</code>/<code class="systemitem">sched_min_granularity_ns</code>,
              the slice becomes number_of_running_tasks *
              <code class="systemitem">sched_min_granularity_ns</code>. Before that,
              the slice is equal to <code class="systemitem">sched_latency_ns</code>.
            </p><p>
              This value also specifies the maximum amount of time during which
              a sleeping task is considered to be running for entitlement
              calculations. Increasing this variable increases the amount of
              time a waking task may consume before being preempted, thus
              increasing scheduler latency for CPU bound tasks. The default
              value is <code class="literal">6000000</code> (ns).
            </p></dd><dt id="id-1.7.7.3.7.10.11.6"><span class="term "><code class="systemitem">sched_min_granularity_ns</code></span></dt><dd><p>
              Minimal preemption granularity for CPU bound tasks. See
              <code class="systemitem">sched_latency_ns</code> for details. The
              default value is <code class="literal">4000000</code> (ns).
            </p></dd><dt id="id-1.7.7.3.7.10.11.7"><span class="term "><code class="systemitem">sched_wakeup_granularity_ns</code></span></dt><dd><p>
              The wake-up preemption granularity. Increasing this variable
              reduces wake-up preemption, reducing disturbance of compute bound
              tasks. Lowering it improves wake-up latency and throughput for
              latency critical tasks, particularly when a short duty cycle load
              component must compete with CPU bound components. The default
              value is <code class="literal">2500000</code> (ns).
            </p><div id="id-1.7.7.3.7.10.11.7.2.2" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: Setting the right wake-up granularity value</h6><p>
                Settings larger than half of
                <code class="systemitem">sched_latency_ns</code> result in no wake-up
                preemption. Short duty cycle tasks cannot compete with CPU hogs
                effectively.
              </p></div></dd><dt id="id-1.7.7.3.7.10.11.8"><span class="term "><code class="systemitem">sched_rr_timeslice_ms</code></span></dt><dd><p>
              Quantum that SCHED_RR tasks are allowed to run before they are
              preempted and put to the end of the task list.
            </p></dd><dt id="id-1.7.7.3.7.10.11.9"><span class="term "><code class="systemitem">sched_rt_period_us</code></span></dt><dd><p>
              Period over which real-time task bandwidth enforcement is
              measured. The default value is <code class="literal">1000000</code> (µs).
            </p></dd><dt id="id-1.7.7.3.7.10.11.10"><span class="term "><code class="systemitem">sched_rt_runtime_us</code></span></dt><dd><p>
              Quantum allocated to real-time tasks during sched_rt_period_us.
              Setting to -1 disables RT bandwidth enforcement. By default, RT
              tasks may consume 95%CPU/sec, thus leaving 5%CPU/sec or 0.05 s to
              be used by SCHED_OTHER tasks. The default value is
              <code class="literal">950000</code> (µs).
            </p></dd><dt id="id-1.7.7.3.7.10.11.11"><span class="term "><code class="systemitem">sched_nr_migrate</code></span></dt><dd><p>
              Controls how many tasks can be migrated across processors for
              load-balancing purposes. Because balancing iterates the runqueue
              with interrupts disabled (softirq), it can incur in irq-latency
              penalties for real-time tasks. Therefore, increasing this value
              may give a performance boost to large SCHED_OTHER threads at the
              expense of increased irq-latencies for real-time tasks. The
              default value is <code class="literal">32</code>.
            </p></dd><dt id="id-1.7.7.3.7.10.11.12"><span class="term "><code class="systemitem">sched_time_avg_ms</code></span></dt><dd><p>
              This parameter sets the period over which the time spent running
              real-time tasks is averaged. That average assists CFS in making
              load-balancing decisions and gives an indication of how busy a
              CPU is with high-priority real-time tasks.
            </p><p>
              The optimal setting for this parameter is highly workload
              dependent and depends, among other things, on how frequently
              real-time tasks are running and for how long.
            </p></dd></dl></div><div id="id-1.7.7.3.7.10.12" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: A few scheduler parameters have been moved to <code class="systemitem">debugfs</code></h6><p>
          If the default Linux kernel version of your operating system is 5.13
          or later (which can be checked using the command <code class="code">rpm -q
          kernel-default</code>), you might notice messages in the kernel
          logs that are similar to the following example:
        </p><div class="verbatim-wrap"><pre class="screen">[ 20.485624] The sched.sched_min_granularity_ns sysctl was moved to debugfs in kernel 5.13 for CPU scheduler debugging only. This sysctl will be removed in a future SLE release.
[ 20.485632] The sched.sched_wakeup_granularity_ns sysctl was moved to debugfs in kernel 5.13 for CPU scheduler debugging only. This sysctl will be removed in a future SLE release.</pre></div><p>
          This happens because six scheduler parameters have been moved from
          <code class="filename">/proc/sys/kernel/sched_*</code> to
          <code class="filename">/sys/kernel/debug/sched/*</code>. The affected
          scheduler parameters are as follows:
        </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
              <code class="systemitem">sched_latency_ns</code>
            </p></li><li class="listitem "><p>
              <code class="systemitem">sched_migration_cost_ns</code>
            </p></li><li class="listitem "><p>
              <code class="systemitem">sched_min_granularity_ns</code>
            </p></li><li class="listitem "><p>
              <code class="systemitem">sched_nr_migrate</code>
            </p></li><li class="listitem "><p>
              <code class="systemitem">sched_tunable_scaling</code>
            </p></li><li class="listitem "><p>
              <code class="systemitem">sched_wakeup_granularity_n</code>
            </p></li></ul></div><p>
          For temporary convenience, the <code class="systemitem">sysctl</code> for
          these scheduler parameters still exists in <span class="productname"><span class="phrase">openSUSE Leap</span></span>. However,
          due to planned changes in the CPU scheduler implementation, there is
          no guarantee that either the <code class="systemitem">sysctl</code> or the
          <code class="systemitem">debugfs</code> options will exist in a future
          release of <span class="productname"><span class="phrase">openSUSE Leap</span></span>.
        </p><p>
          If any of your current system tuning configurations depend on these
          six scheduler parameters, we strongly recommend that you find an
          alternate method of achieving your objective and stop depending on
          them for production workloads.
        </p></div></div><div class="sect2 " id="sec-tuning-taskscheduler-cfs-debug"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.3.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Debugging interface and scheduler statistics</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-cfs-debug">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>sec-tuning-taskscheduler-cfs-debug</li></ul></div></div></div></div><p>
        CFS comes with a new improved debugging interface, and provides runtime
        statistics information. Relevant files were added to the
        <code class="filename">/proc</code> file system, which can be examined simply
        with the <code class="command">cat</code> or <code class="command">less</code> command. A
        list of the related <code class="filename">/proc</code> files follows with their
        short description:
      </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.7.7.3.7.11.3.1"><span class="term "><code class="filename">/proc/sched_debug</code></span></dt><dd><p>
              Contains the current values of all tunable variables (see
              <a class="xref" href="cha-tuning-taskscheduler.html#sec-tuning-taskscheduler-cfs-tuning" title="14.3.6. Runtime tuning with sysctl">Section 14.3.6, “Runtime tuning with <code class="command">sysctl</code>”</a>)
              that affect the task scheduler behavior, CFS statistics, and
              information about the run queues (CFS, RT and deadline) on all
              available processors. A summary of the task running on each
              processor is also shown, with the task name and PID, along with
              scheduler specific statistics. The first being the
              <code class="option">tree-key</code> column, it indicates the task's virtual
              runtime, and its name comes from the kernel sorting all runnable
              tasks by this key in a red-black tree. The
              <code class="option">switches</code> column indicates the total number of
              switches (involuntary or not), and the <code class="option">prio</code>
              refers to the process priority. The <code class="option">wait-time</code>
              value indicates the amount of time the task waited to be
              scheduled. Finally both <code class="option">sum-exec</code> and
              <code class="option">sum-sleep</code> account for the total amount of time
              (in nanoseconds) the task was running on the processor or asleep,
              respectively.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cat /proc/sched_debug
Sched Debug Version: v0.11, 6.4.0-150600.9-default #1
ktime                                   : 23533900.395978
sched_clk                               : 23543587.726648
cpu_clk                                 : 23533900.396165
jiffies                                 : 4300775771
sched_clock_stable                      : 0

sysctl_sched
  .sysctl_sched_latency                    : 6.000000
  .sysctl_sched_min_granularity            : 2.000000
  .sysctl_sched_wakeup_granularity         : 2.500000
  .sysctl_sched_child_runs_first           : 0
  .sysctl_sched_features                   : 154871
  .sysctl_sched_tunable_scaling            : 1 (logarithmic)

cpu#0, 2666.762 MHz
  .nr_running                    : 1
  .load                          : 1024
  .nr_switches                   : 1918946
[...]

cfs_rq[0]:/
  .exec_clock                    : 170176.383770
  .MIN_vruntime                  : 0.000001
  .min_vruntime                  : 347375.854324
  .max_vruntime                  : 0.000001
[...]

rt_rq[0]:/
  .rt_nr_running                 : 0
  .rt_throttled                  : 0
  .rt_time                       : 0.000000
  .rt_runtime                    : 950.000000

dl_rq[0]:
  .dl_nr_running                 : 0

  task   PID         tree-key  switches  prio     wait-time        [...]
------------------------------------------------------------------------
R  cc1 63477     98876.717832       197   120      0.000000         ...</pre></div></dd><dt id="id-1.7.7.3.7.11.3.2"><span class="term "><code class="filename">/proc/schedstat</code></span></dt><dd><p>
              Displays statistics relevant to the current run queue. Also
              domain-specific statistics for SMP systems are displayed for all
              connected processors. Because the output format is not
              user-friendly, read the contents of
              <code class="filename">/usr/src/linux/Documentation/scheduler/sched-stats.txt</code>
              for more information.
            </p></dd><dt id="id-1.7.7.3.7.11.3.3"><span class="term "><code class="filename">/proc/<em class="replaceable ">PID</em>/sched</code></span></dt><dd><p>
              Displays scheduling information on the process with id
              <em class="replaceable ">PID</em>.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cat /proc/$(pidof gdm)/sched
gdm (744, #threads: 3)
-------------------------------------------------------------------
se.exec_start                                :          8888.758381
se.vruntime                                  :          6062.853815
se.sum_exec_runtime                          :             7.836043
se.statistics.wait_start                     :             0.000000
se.statistics.sleep_start                    :          8888.758381
se.statistics.block_start                    :             0.000000
se.statistics.sleep_max                      :          1965.987638
[...]
se.avg.decay_count                           :                 8477
policy                                       :                    0
prio                                         :                  120
clock-delta                                  :                  128
mm-&gt;numa_scan_seq                            :                    0
numa_migrations, 0
numa_faults_memory, 0, 0, 1, 0, -1
numa_faults_memory, 1, 0, 0, 0, -1</pre></div></dd></dl></div></div></div><div class="sect1 " id="cha-tuning-taskscheduler-moreinfo"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">More information</span> <a title="Permalink" class="permalink" href="cha-tuning-taskscheduler.html#cha-tuning-taskscheduler-moreinfo">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_taskscheduler.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>tuning_taskscheduler.xml</li><li><span class="ds-label">ID: </span>cha-tuning-taskscheduler-moreinfo</li></ul></div></div></div></div><p>
      To get a compact knowledge about Linux kernel task scheduling, you need
      to explore several information sources. Here are some:
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
          For task scheduler System Calls description, see the relevant manual
          page (for example <code class="command">man 2 sched_setaffinity</code>).
        </p></li><li class="listitem "><p>
          A useful lecture on Linux scheduler policy and algorithm is available
          in
          <a class="link" href="https://www.inf.fu-berlin.de/lehre/SS01/OS/Lectures/Lecture08.pdf" target="_blank">https://www.inf.fu-berlin.de/lehre/SS01/OS/Lectures/Lecture08.pdf</a>.
        </p></li><li class="listitem "><p>
          A good overview of Linux process scheduling is given in
          <em class="citetitle ">Linux Kernel Development</em> by Robert Love
          (ISBN-10: 0-672-32512-8). See
          <a class="link" href="https://www.informit.com/articles/article.aspx?p=101760" target="_blank">https://www.informit.com/articles/article.aspx?p=101760</a>.
        </p></li><li class="listitem "><p>
          A comprehensive overview of the Linux kernel internals is given in
          <em class="citetitle ">Understanding the Linux Kernel</em> by Daniel P.
          Bovet and Marco Cesati (ISBN 978-0-596-00565-8).
        </p></li><li class="listitem "><p>
          Technical information about task scheduler is covered in files under
          <code class="filename">/usr/src/linux/Documentation/scheduler</code>.
        </p></li></ul></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha-tuning-memory.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 15 </span>Tuning the memory management subsystem</span></a><a class="nav-link" href="cha-tuning-io.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 13 </span>Tuning I/O performance</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2024 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>