<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Disk cache modes | Virtualization Guide | openSUSE Leap 15.7</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Disk cache modes | openSUSE Leap 15.7" />
<meta name="description" content="" />
<meta name="product-name" content="openSUSE Leap" />
<meta name="product-number" content="15.7" />
<meta name="book-title" content="Virtualization Guide" />
<meta name="chapter-title" content="Chapter 18. Disk cache modes" />
<meta name="tracker-url" content="https://bugzilla.opensuse.org/enter_bug.cgi" />
<meta name="tracker-type" content="bsc" />
<meta name="tracker-bsc-assignee" content="fs@suse.com" />
<meta name="tracker-bsc-component" content="Documentation" />
<meta name="tracker-bsc-product" content="openSUSE Distribution" />
<meta name="tracker-bsc-version" content="Leap 15.4" />
<meta property="og:title" content="Disk cache modes | openSUSE Leap 15.7" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Disk cache modes | openSUSE Leap 15.7" />
<meta name="twitter:description" content="" />
<link rel="home" href="index.html" title="openSUSE Leap Documentation" /><link rel="up" href="part-virt-common.html" title="Part III. Hypervisor-independent features" /><link rel="prev" href="part-virt-common.html" title="Part III. Hypervisor-independent features" /><link rel="next" href="sec-kvm-managing-clock.html" title="Chapter 19. VM Guest clock settings" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Virtualization Guide"><span class="book-icon">Virtualization Guide</span></a><span> › </span><a class="crumb" href="part-virt-common.html">Hypervisor-independent features</a><span> › </span><a class="crumb" href="cha-cachemodes.html">Disk cache modes</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Virtualization Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="cha-kvm.html"><span class="number"> </span><span class="name">Preface</span></a></li><li class="inactive"><a href="part-virt-intro.html"><span class="number">I </span><span class="name">Introduction</span></a><ol><li class="inactive"><a href="chap-virtualization-introduction.html"><span class="number">1 </span><span class="name">Virtualization technology</span></a></li><li class="inactive"><a href="cha-virtualization-scenarios.html"><span class="number">2 </span><span class="name">Virtualization scenarios</span></a></li><li class="inactive"><a href="cha-xen-basics.html"><span class="number">3 </span><span class="name">Introduction to Xen virtualization</span></a></li><li class="inactive"><a href="cha-kvm-intro.html"><span class="number">4 </span><span class="name">Introduction to KVM virtualization</span></a></li><li class="inactive"><a href="cha-tools-intro.html"><span class="number">5 </span><span class="name">Virtualization tools</span></a></li><li class="inactive"><a href="cha-vt-installation.html"><span class="number">6 </span><span class="name">Installation of virtualization components</span></a></li></ol></li><li class="inactive"><a href="part-virt-libvirt.html"><span class="number">II </span><span class="name">Managing virtual machines with <code class="systemitem">libvirt</code></span></a><ol><li class="inactive"><a href="cha-libvirt-overview.html"><span class="number">7 </span><span class="name"><code class="systemitem">libvirt</code> daemons</span></a></li><li class="inactive"><a href="cha-libvirt-host.html"><span class="number">8 </span><span class="name">Preparing the VM Host Server</span></a></li><li class="inactive"><a href="cha-kvm-inst.html"><span class="number">9 </span><span class="name">Guest installation</span></a></li><li class="inactive"><a href="cha-libvirt-managing.html"><span class="number">10 </span><span class="name">Basic VM Guest management</span></a></li><li class="inactive"><a href="cha-libvirt-connect.html"><span class="number">11 </span><span class="name">Connecting and authorizing</span></a></li><li class="inactive"><a href="cha-libvirt-storage.html"><span class="number">12 </span><span class="name">Advanced storage topics</span></a></li><li class="inactive"><a href="cha-libvirt-config-gui.html"><span class="number">13 </span><span class="name">Configuring virtual machines with Virtual Machine Manager</span></a></li><li class="inactive"><a href="cha-libvirt-config-virsh.html"><span class="number">14 </span><span class="name">Configuring virtual machines with <code class="command">virsh</code></span></a></li><li class="inactive"><a href="cha-vm-security.html"><span class="number">15 </span><span class="name">Enhancing virtual machine security with AMD SEV-SNP</span></a></li><li class="inactive"><a href="sec-libvirt-admin-migrate.html"><span class="number">16 </span><span class="name">Migrating VM Guests</span></a></li><li class="inactive"><a href="xen2kvm-migration.html"><span class="number">17 </span><span class="name">Xen to KVM migration guide</span></a></li></ol></li><li class="inactive"><a href="part-virt-common.html"><span class="number">III </span><span class="name">Hypervisor-independent features</span></a><ol><li class="inactive"><a href="cha-cachemodes.html"><span class="number">18 </span><span class="name">Disk cache modes</span></a></li><li class="inactive"><a href="sec-kvm-managing-clock.html"><span class="number">19 </span><span class="name">VM Guest clock settings</span></a></li><li class="inactive"><a href="chap-guestfs.html"><span class="number">20 </span><span class="name">libguestfs</span></a></li><li class="inactive"><a href="cha-qemu-ga.html"><span class="number">21 </span><span class="name">QEMU guest agent</span></a></li><li class="inactive"><a href="tpm.html"><span class="number">22 </span><span class="name">Software TPM emulator</span></a></li><li class="inactive"><a href="virt-crash-dump.html"><span class="number">23 </span><span class="name">Creating crash dumps of a VM Guest</span></a></li></ol></li><li class="inactive"><a href="part-virt-xen.html"><span class="number">IV </span><span class="name">Managing virtual machines with Xen</span></a><ol><li class="inactive"><a href="cha-xen-vhost.html"><span class="number">24 </span><span class="name">Setting up a virtual machine host</span></a></li><li class="inactive"><a href="cha-xen-network.html"><span class="number">25 </span><span class="name">Virtual networking</span></a></li><li class="inactive"><a href="cha-xen-manage.html"><span class="number">26 </span><span class="name">Managing a virtualization environment</span></a></li><li class="inactive"><a href="cha-xen-vbd.html"><span class="number">27 </span><span class="name">Block devices in Xen</span></a></li><li class="inactive"><a href="cha-xen-config.html"><span class="number">28 </span><span class="name">Virtualization: configuration options and settings</span></a></li><li class="inactive"><a href="cha-xen-admin.html"><span class="number">29 </span><span class="name">Administrative tasks</span></a></li><li class="inactive"><a href="cha-xen-xenstore.html"><span class="number">30 </span><span class="name">XenStore: configuration database shared between domains</span></a></li><li class="inactive"><a href="cha-xen-ha.html"><span class="number">31 </span><span class="name">Xen as a high-availability virtualization host</span></a></li><li class="inactive"><a href="pv-to-fv.html"><span class="number">32 </span><span class="name">Xen: converting a paravirtual (PV) guest into a fully virtual (FV/HVM) guest</span></a></li></ol></li><li class="inactive"><a href="part-virt-qemu.html"><span class="number">V </span><span class="name">Managing virtual machines with QEMU</span></a><ol><li class="inactive"><a href="cha-qemu-overview.html"><span class="number">33 </span><span class="name">QEMU overview</span></a></li><li class="inactive"><a href="cha-qemu-host.html"><span class="number">34 </span><span class="name">Setting up a KVM VM Host Server</span></a></li><li class="inactive"><a href="cha-qemu-guest-inst.html"><span class="number">35 </span><span class="name">Guest installation</span></a></li><li class="inactive"><a href="cha-qemu-running.html"><span class="number">36 </span><span class="name">Running virtual machines with qemu-system-ARCH</span></a></li><li class="inactive"><a href="cha-qemu-monitor.html"><span class="number">37 </span><span class="name">Virtual machine administration using QEMU monitor</span></a></li></ol></li><li class="inactive"><a href="part-virt-troubleshoot.html"><span class="number">VI </span><span class="name">Troubleshooting</span></a><ol><li class="inactive"><a href="cha-virt-help.html"><span class="number">38 </span><span class="name">Integrated help and package documentation</span></a></li><li class="inactive"><a href="cha-virt-logs.html"><span class="number">39 </span><span class="name">Gathering system information and logs</span></a></li></ol></li><li class="inactive"><a href="gloss-vt-glossary.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="app-gpu-passthru.html"><span class="number">A </span><span class="name">Configuring GPU Pass-Through for NVIDIA cards</span></a></li><li class="inactive"><a href="bk06apb.html"><span class="number">B </span><span class="name">GNU licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Part III. Hypervisor-independent features" href="part-virt-common.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 19. VM Guest clock settings" href="sec-kvm-managing-clock.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Virtualization Guide"><span class="book-icon">Virtualization Guide</span></a><span> › </span><a class="crumb" href="part-virt-common.html">Hypervisor-independent features</a><span> › </span><a class="crumb" href="cha-cachemodes.html">Disk cache modes</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Part III. Hypervisor-independent features" href="part-virt-common.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 19. VM Guest clock settings" href="sec-kvm-managing-clock.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha-cachemodes"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname "><span class="productname"><span class="phrase">openSUSE Leap</span></span></span> <span class="productnumber "><span class="productnumber"><span class="phrase">15.7</span></span></span></div><div><h2 class="title"><span class="number">18 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Disk cache modes</span> <a title="Permalink" class="permalink" href="cha-cachemodes.html#">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_cachemodes.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>vt_cachemodes.xml</li><li><span class="ds-label">ID: </span>cha-cachemodes</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha-cachemodes.html#what-is-disk-cache"><span class="number">18.1 </span><span class="name">What is a disk cache?</span></a></span></dt><dt><span class="sect1"><a href="cha-cachemodes.html#how-it-works-disk-cache"><span class="number">18.2 </span><span class="name">How does a disk cache work?</span></a></span></dt><dt><span class="sect1"><a href="cha-cachemodes.html#benefits-disk-cache"><span class="number">18.3 </span><span class="name">Benefits of disk caching</span></a></span></dt><dt><span class="sect1"><a href="cha-cachemodes.html#cachemodes-descr"><span class="number">18.4 </span><span class="name">Virtual disk cache modes</span></a></span></dt><dt><span class="sect1"><a href="cha-cachemodes.html#qemu-cachemodes-data-integrity"><span class="number">18.5 </span><span class="name">Cache modes and data integrity</span></a></span></dt><dt><span class="sect1"><a href="cha-cachemodes.html#sec-cache-mode-live-migration"><span class="number">18.6 </span><span class="name">Cache modes and live migration</span></a></span></dt></dl></div></div><div class="sect1 " id="what-is-disk-cache"><div class="titlepage"><div><div><h2 class="title"><span class="number">18.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">What is a disk cache?</span> <a title="Permalink" class="permalink" href="cha-cachemodes.html#what-is-disk-cache">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_cachemodes.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>vt_cachemodes.xml</li><li><span class="ds-label">ID: </span>what-is-disk-cache</li></ul></div></div></div></div><p>
      A disk cache is a memory used to speed up the process of storing and
      accessing data from the hard disk. Physical hard disks have their cache
      integrated as a standard feature. For virtual disks, the cache uses
      VM Host Server's memory and you can fine-tune its behavior, for example, by
      setting its type.
    </p></div><div class="sect1 " id="how-it-works-disk-cache"><div class="titlepage"><div><div><h2 class="title"><span class="number">18.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">How does a disk cache work?</span> <a title="Permalink" class="permalink" href="cha-cachemodes.html#how-it-works-disk-cache">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_cachemodes.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>vt_cachemodes.xml</li><li><span class="ds-label">ID: </span>how-it-works-disk-cache</li></ul></div></div></div></div><p>
      Normally, a disk cache stores the most recent and frequently used
      programs and data. When a user or program requests data, the operating
      system first checks the disk cache. If the data is there, the operating
      system quickly delivers the data to the program instead of re-reading the
      data from the disk.
    </p><div class="figure" id="fig-caching"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/virt-disk-cache.png" target="_blank"><img src="images/virt-disk-cache.png" width="" alt="Caching mechanism" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 18.1: </span><span class="name">Caching mechanism </span><a title="Permalink" class="permalink" href="cha-cachemodes.html#fig-caching">#</a></h6></div></div></div><div class="sect1 " id="benefits-disk-cache"><div class="titlepage"><div><div><h2 class="title"><span class="number">18.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Benefits of disk caching</span> <a title="Permalink" class="permalink" href="cha-cachemodes.html#benefits-disk-cache">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_cachemodes.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>vt_cachemodes.xml</li><li><span class="ds-label">ID: </span>benefits-disk-cache</li></ul></div></div></div></div><p>
      Caching of virtual disk devices affects the overall performance of guest
      machines. You can improve the performance by optimizing the combination
      of cache mode, disk image format, and storage subsystem.
    </p></div><div class="sect1 " id="cachemodes-descr"><div class="titlepage"><div><div><h2 class="title"><span class="number">18.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Virtual disk cache modes</span> <a title="Permalink" class="permalink" href="cha-cachemodes.html#cachemodes-descr">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_cachemodes.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>vt_cachemodes.xml</li><li><span class="ds-label">ID: </span>cachemodes-descr</li></ul></div></div></div></div><p>
      If you do not specify a cache mode, <code class="literal">writeback</code> is used
      by default. Each guest disk can use one of the following cache modes:
    </p><div class="variablelist "><dl class="variablelist"><dt id="cache-writeback"><span class="term ">writeback</span></dt><dd><p>
            <code class="literal">writeback</code> uses the host page cache. Writes are
            reported to the guest as completed when they are placed in the host
            cache. Cache management handles commitment to the storage device.
            The guest's virtual storage adapter is informed of the
            <span class="emphasis"><em>writeback</em></span> cache and therefore expected to send
            flush commands as needed to manage data integrity.
          </p></dd><dt id="cache-writethrough"><span class="term ">writethrough</span></dt><dd><p>
            Writes are reported as completed only when the data has been
            committed to the storage device. The guest's virtual storage
            adapter is informed that there is no <span class="emphasis"><em>writeback</em></span>
            cache, so the guest does not need to send flush commands to manage
            data integrity.
          </p></dd><dt id="cache-none"><span class="term ">none</span></dt><dd><p>
            The host cache is bypassed, and reads and writes happen directly
            between the hypervisor and the storage device. Because the actual
            storage device may report a write as completed when the data is
            still placed in its write queue only, the guest's virtual storage
            adapter is informed that there is a <span class="emphasis"><em>writeback</em></span>
            cache. This mode is equivalent to direct access to the host's disk.
          </p></dd><dt id="cache-unsafe"><span class="term ">unsafe</span></dt><dd><p>
            Similar to the <span class="emphasis"><em>writeback</em></span> mode, except all
            flush commands from the guests are ignored. Using this mode implies
            that the user prioritizes performance gain over the risk of data
            loss in case of a host failure. This mode can be useful during
            guest installation, but not for production workloads.
          </p></dd><dt id="cache-directsync"><span class="term ">directsync</span></dt><dd><p>
            Writes are reported as completed only when the data has been
            committed to the storage device and the host cache is bypassed.
            Similar to <span class="emphasis"><em>writethrough</em></span>, this mode can be
            useful for guests that do not send flushes when needed.
          </p></dd></dl></div></div><div class="sect1 " id="qemu-cachemodes-data-integrity"><div class="titlepage"><div><div><h2 class="title"><span class="number">18.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Cache modes and data integrity</span> <a title="Permalink" class="permalink" href="cha-cachemodes.html#qemu-cachemodes-data-integrity">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_cachemodes.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>vt_cachemodes.xml</li><li><span class="ds-label">ID: </span>qemu-cachemodes-data-integrity</li></ul></div></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="id-1.8.5.2.8.2.1"><span class="term ">writethrough, none, directsync</span></dt><dd><p>
            These modes are considered to be safest when the guest operating
            system uses flushes as needed. For unsafe or unstable guests, use
            <span class="emphasis"><em>writethough</em></span> or
            <span class="emphasis"><em>directsync</em></span>.
          </p></dd><dt id="id-1.8.5.2.8.2.2"><span class="term ">writeback</span></dt><dd><p>
            This mode informs the guest of the presence of a write cache, and
            it relies on the guest to send flush commands as needed to maintain
            data integrity within its disk image. This mode exposes the guest
            to data loss if the host fails. The reason is the gap between the
            moment a write is reported as completed and the time the write
            being committed to the storage device.
          </p></dd><dt id="id-1.8.5.2.8.2.3"><span class="term ">unsafe</span></dt><dd><p>
            This mode is similar to <span class="emphasis"><em>writeback</em></span> caching,
            except the guest flush commands are ignored. This means a higher
            risk of data loss caused by host failure.
          </p></dd></dl></div></div><div class="sect1 " id="sec-cache-mode-live-migration"><div class="titlepage"><div><div><h2 class="title"><span class="number">18.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Cache modes and live migration</span> <a title="Permalink" class="permalink" href="cha-cachemodes.html#sec-cache-mode-live-migration">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_cachemodes.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>vt_cachemodes.xml</li><li><span class="ds-label">ID: </span>sec-cache-mode-live-migration</li></ul></div></div></div></div><p>
      The caching of storage data restricts the configurations that support
      live migration. Currently, only <code class="literal">raw</code> and
      <code class="literal">qcow2</code> image formats can be used for live migration. If
      a clustered file system is used, all cache modes support live migration.
      Otherwise the only cache mode that supports live migration on read/write
      shared storage is <code class="literal">none</code>.
    </p><p>
      The <code class="systemitem">libvirt</code> management layer includes checks for migration
      compatibility based on several factors. If the guest storage is hosted on
      a clustered file system, is read-only, or is marked shareable, then the
      cache mode is ignored when determining if migration can be allowed.
      Otherwise <code class="systemitem">libvirt</code> does not allow migration unless the cache mode is set
      to <code class="literal">none</code>. However, this restriction can be overridden
      with the <span class="quote">“<span class="quote ">--unsafe</span>”</span> option to the migration APIs, which is
      also supported by <code class="command">virsh</code>. For example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>virsh migrate --live --unsafe</pre></div><div id="id-1.8.5.2.9.5" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg" /><h6>Tip</h6><p>
        The cache mode <code class="literal">none</code> is required for the AIO mode
        setting <code class="literal">native</code>. If another cache mode is used, the
        AIO mode is silently switched back to the default
        <code class="literal">threads</code>.
      </p></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="sec-kvm-managing-clock.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 19 </span>VM Guest clock settings</span></a><a class="nav-link" href="part-virt-common.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Part III </span>Hypervisor-independent features</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2024 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>