<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Block devices in Xen | Virtualization Guide | openSUSE Leap 15.6</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Block devices in Xen | openSUSE Leap 15.6" />
<meta name="description" content="" />
<meta name="product-name" content="openSUSE Leap" />
<meta name="product-number" content="15.6" />
<meta name="book-title" content="Virtualization Guide" />
<meta name="chapter-title" content="Chapter 26. Block devices in Xen" />
<meta name="tracker-url" content="https://bugzilla.opensuse.org/enter_bug.cgi" />
<meta name="tracker-type" content="bsc" />
<meta name="tracker-bsc-assignee" content="fs@suse.com" />
<meta name="tracker-bsc-component" content="Documentation" />
<meta name="tracker-bsc-product" content="openSUSE Distribution" />
<meta name="tracker-bsc-version" content="Leap 15.4" />
<meta property="og:title" content="Block devices in Xen | openSUSE Leap 15.6" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Block devices in Xen | openSUSE Leap 15.6" />
<meta name="twitter:description" content="" />
<link rel="home" href="index.html" title="openSUSE Leap Documentation" /><link rel="up" href="part-virt-xen.html" title="Part IV. Managing virtual machines with Xen" /><link rel="prev" href="cha-xen-manage.html" title="Chapter 25. Managing a virtualization environment" /><link rel="next" href="cha-xen-config.html" title="Chapter 27. Virtualization: configuration options and settings" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Virtualization Guide"><span class="book-icon">Virtualization Guide</span></a><span> › </span><a class="crumb" href="part-virt-xen.html">Managing virtual machines with Xen</a><span> › </span><a class="crumb" href="cha-xen-vbd.html">Block devices in Xen</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Virtualization Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="cha-kvm.html"><span class="number"> </span><span class="name">Preface</span></a></li><li class="inactive"><a href="part-virt-intro.html"><span class="number">I </span><span class="name">Introduction</span></a><ol><li class="inactive"><a href="chap-virtualization-introduction.html"><span class="number">1 </span><span class="name">Virtualization technology</span></a></li><li class="inactive"><a href="cha-virtualization-scenarios.html"><span class="number">2 </span><span class="name">Virtualization scenarios</span></a></li><li class="inactive"><a href="cha-xen-basics.html"><span class="number">3 </span><span class="name">Introduction to Xen virtualization</span></a></li><li class="inactive"><a href="cha-kvm-intro.html"><span class="number">4 </span><span class="name">Introduction to KVM virtualization</span></a></li><li class="inactive"><a href="cha-tools-intro.html"><span class="number">5 </span><span class="name">Virtualization tools</span></a></li><li class="inactive"><a href="cha-vt-installation.html"><span class="number">6 </span><span class="name">Installation of virtualization components</span></a></li></ol></li><li class="inactive"><a href="part-virt-libvirt.html"><span class="number">II </span><span class="name">Managing virtual machines with <code class="systemitem">libvirt</code></span></a><ol><li class="inactive"><a href="cha-libvirt-overview.html"><span class="number">7 </span><span class="name"><code class="systemitem">libvirt</code> daemons</span></a></li><li class="inactive"><a href="cha-libvirt-host.html"><span class="number">8 </span><span class="name">Preparing the VM Host Server</span></a></li><li class="inactive"><a href="cha-kvm-inst.html"><span class="number">9 </span><span class="name">Guest installation</span></a></li><li class="inactive"><a href="cha-libvirt-managing.html"><span class="number">10 </span><span class="name">Basic VM Guest management</span></a></li><li class="inactive"><a href="cha-libvirt-connect.html"><span class="number">11 </span><span class="name">Connecting and authorizing</span></a></li><li class="inactive"><a href="cha-libvirt-storage.html"><span class="number">12 </span><span class="name">Advanced storage topics</span></a></li><li class="inactive"><a href="cha-libvirt-config-gui.html"><span class="number">13 </span><span class="name">Configuring virtual machines with Virtual Machine Manager</span></a></li><li class="inactive"><a href="cha-libvirt-config-virsh.html"><span class="number">14 </span><span class="name">Configuring virtual machines with <code class="command">virsh</code></span></a></li><li class="inactive"><a href="sec-libvirt-admin-migrate.html"><span class="number">15 </span><span class="name">Migrating VM Guests</span></a></li><li class="inactive"><a href="xen2kvm-migration.html"><span class="number">16 </span><span class="name">Xen to KVM migration guide</span></a></li></ol></li><li class="inactive"><a href="part-virt-common.html"><span class="number">III </span><span class="name">Hypervisor-independent features</span></a><ol><li class="inactive"><a href="cha-cachemodes.html"><span class="number">17 </span><span class="name">Disk cache modes</span></a></li><li class="inactive"><a href="sec-kvm-managing-clock.html"><span class="number">18 </span><span class="name">VM Guest clock settings</span></a></li><li class="inactive"><a href="chap-guestfs.html"><span class="number">19 </span><span class="name">libguestfs</span></a></li><li class="inactive"><a href="cha-qemu-ga.html"><span class="number">20 </span><span class="name">QEMU guest agent</span></a></li><li class="inactive"><a href="tpm.html"><span class="number">21 </span><span class="name">Software TPM emulator</span></a></li><li class="inactive"><a href="virt-crash-dump.html"><span class="number">22 </span><span class="name">Creating crash dumps of a VM Guest</span></a></li></ol></li><li class="inactive"><a href="part-virt-xen.html"><span class="number">IV </span><span class="name">Managing virtual machines with Xen</span></a><ol><li class="inactive"><a href="cha-xen-vhost.html"><span class="number">23 </span><span class="name">Setting up a virtual machine host</span></a></li><li class="inactive"><a href="cha-xen-network.html"><span class="number">24 </span><span class="name">Virtual networking</span></a></li><li class="inactive"><a href="cha-xen-manage.html"><span class="number">25 </span><span class="name">Managing a virtualization environment</span></a></li><li class="inactive"><a href="cha-xen-vbd.html"><span class="number">26 </span><span class="name">Block devices in Xen</span></a></li><li class="inactive"><a href="cha-xen-config.html"><span class="number">27 </span><span class="name">Virtualization: configuration options and settings</span></a></li><li class="inactive"><a href="cha-xen-admin.html"><span class="number">28 </span><span class="name">Administrative tasks</span></a></li><li class="inactive"><a href="cha-xen-xenstore.html"><span class="number">29 </span><span class="name">XenStore: configuration database shared between domains</span></a></li><li class="inactive"><a href="cha-xen-ha.html"><span class="number">30 </span><span class="name">Xen as a high-availability virtualization host</span></a></li><li class="inactive"><a href="pv-to-fv.html"><span class="number">31 </span><span class="name">Xen: converting a paravirtual (PV) guest into a fully virtual (FV/HVM) guest</span></a></li></ol></li><li class="inactive"><a href="part-virt-qemu.html"><span class="number">V </span><span class="name">Managing virtual machines with QEMU</span></a><ol><li class="inactive"><a href="cha-qemu-overview.html"><span class="number">32 </span><span class="name">QEMU overview</span></a></li><li class="inactive"><a href="cha-qemu-host.html"><span class="number">33 </span><span class="name">Setting up a KVM VM Host Server</span></a></li><li class="inactive"><a href="cha-qemu-guest-inst.html"><span class="number">34 </span><span class="name">Guest installation</span></a></li><li class="inactive"><a href="cha-qemu-running.html"><span class="number">35 </span><span class="name">Running virtual machines with qemu-system-ARCH</span></a></li><li class="inactive"><a href="cha-qemu-monitor.html"><span class="number">36 </span><span class="name">Virtual machine administration using QEMU monitor</span></a></li></ol></li><li class="inactive"><a href="part-virt-troubleshoot.html"><span class="number">VI </span><span class="name">Troubleshooting</span></a><ol><li class="inactive"><a href="cha-virt-help.html"><span class="number">37 </span><span class="name">Integrated help and package documentation</span></a></li><li class="inactive"><a href="cha-virt-logs.html"><span class="number">38 </span><span class="name">Gathering system information and logs</span></a></li></ol></li><li class="inactive"><a href="gloss-vt-glossary.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="app-gpu-passthru.html"><span class="number">A </span><span class="name">Configuring GPU Pass-Through for NVIDIA cards</span></a></li><li class="inactive"><a href="bk06apb.html"><span class="number">B </span><span class="name">GNU licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 25. Managing a virtualization environment" href="cha-xen-manage.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 27. Virtualization: configuration options and settings" href="cha-xen-config.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Virtualization Guide"><span class="book-icon">Virtualization Guide</span></a><span> › </span><a class="crumb" href="part-virt-xen.html">Managing virtual machines with Xen</a><span> › </span><a class="crumb" href="cha-xen-vbd.html">Block devices in Xen</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 25. Managing a virtualization environment" href="cha-xen-manage.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 27. Virtualization: configuration options and settings" href="cha-xen-config.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha-xen-vbd"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname "><span class="productname"><span class="phrase">openSUSE Leap</span></span></span> <span class="productnumber "><span class="productnumber"><span class="phrase">15.6</span></span></span></div><div><h2 class="title"><span class="number">26 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Block devices in Xen</span> <a title="Permalink" class="permalink" href="cha-xen-vbd.html#">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen_block_devices.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>xen_block_devices.xml</li><li><span class="ds-label">ID: </span>cha-xen-vbd</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha-xen-vbd.html#sec-xen-config-disk"><span class="number">26.1 </span><span class="name">Mapping physical storage to virtual disks</span></a></span></dt><dt><span class="sect1"><a href="cha-xen-vbd.html#sec-xen-config-netdisk"><span class="number">26.2 </span><span class="name">Mapping network storage to virtual disk</span></a></span></dt><dt><span class="sect1"><a href="cha-xen-vbd.html#sec-xen-config-filedisk"><span class="number">26.3 </span><span class="name">File-backed virtual disks and loopback devices</span></a></span></dt><dt><span class="sect1"><a href="cha-xen-vbd.html#sec-xen-block-resize"><span class="number">26.4 </span><span class="name">Resizing block devices</span></a></span></dt><dt><span class="sect1"><a href="cha-xen-vbd.html#sec-xen-block-advstoragescripts"><span class="number">26.5 </span><span class="name">Scripts for managing advanced storage scenarios</span></a></span></dt></dl></div></div><div class="sect1 " id="sec-xen-config-disk"><div class="titlepage"><div><div><h2 class="title"><span class="number">26.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Mapping physical storage to virtual disks</span> <a title="Permalink" class="permalink" href="cha-xen-vbd.html#sec-xen-config-disk">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen_block_devices.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>xen_block_devices.xml</li><li><span class="ds-label">ID: </span>sec-xen-config-disk</li></ul></div></div></div></div><p>
      The disk specification for a Xen domain in the domain configuration
      file is as straightforward as the following example:
    </p><div class="verbatim-wrap"><pre class="screen">disk = [ 'format=raw,vdev=hdc,access=ro,devtype=cdrom,target=/root/image.iso' ]</pre></div><p>
      It defines a disk block device based on the
      <code class="filename">/root/image.iso</code> disk image file. The is seen as
      <code class="literal">hdc</code> by the guest, with read-only
      (<code class="literal">ro</code>) access. The type of the device is
      <code class="literal">cdrom</code> with <code class="literal">raw</code> format.
    </p><p>
      The following example defines an identical device, but using simplified
      positional syntax:
    </p><div class="verbatim-wrap"><pre class="screen">disk = [ '/root/image.iso,raw,hdc,ro,cdrom' ]</pre></div><p>
      You can include more disk definitions in the same line, each one
      separated by a comma. If a parameter is not specified, then its default
      value is taken:
    </p><div class="verbatim-wrap"><pre class="screen">disk = [ '/root/image.iso,raw,hdc,ro,cdrom','/dev/vg/guest-volume,,hda','...' ]</pre></div><div class="variablelist "><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">List of parameters </span><a title="Permalink" class="permalink" href="cha-xen-vbd.html#id-1.8.6.5.4.9">#</a></h6></div><dl class="variablelist"><dt id="id-1.8.6.5.4.9.2"><span class="term ">target</span></dt><dd><p>
            Source block device or disk image path.
          </p></dd><dt id="id-1.8.6.5.4.9.3"><span class="term ">format</span></dt><dd><p>
            The format of the image file. Default is <code class="literal">raw</code>.
          </p></dd><dt id="id-1.8.6.5.4.9.4"><span class="term ">vdev</span></dt><dd><p>
            Virtual device as seen by the guest. Supported values are hd[x],
            xvd[x], sd[x] etc. See
            <code class="filename">/usr/share/doc/packages/xen/misc/vbd-interface.txt</code>
            for more details. This parameter is mandatory.
          </p></dd><dt id="id-1.8.6.5.4.9.5"><span class="term ">access</span></dt><dd><p>
            Whether the block device is provided to the guest in read-only or
            read-write mode. Supported values are <code class="literal">ro</code> or
            <code class="literal">r</code> for read-only, and <code class="literal">rw</code> or
            <code class="literal">w</code> for read/write access. Default is
            <code class="literal">ro</code> for <code class="literal">devtype=cdrom</code>, and
            <code class="literal">rw</code> for other device types.
          </p></dd><dt id="id-1.8.6.5.4.9.6"><span class="term ">devtype</span></dt><dd><p>
            Qualifies virtual device type. Supported value is
            <code class="literal">cdrom</code>.
          </p></dd><dt id="id-1.8.6.5.4.9.7"><span class="term ">backendtype</span></dt><dd><p>
            The back-end implementation to use. Supported values are
            <code class="literal">phy</code>, <code class="literal">tap</code>, and
            <code class="literal">qdisk</code>. Normally this option should not be
            specified as the back-end type is automatically determined.
          </p></dd><dt id="id-1.8.6.5.4.9.8"><span class="term ">script</span></dt><dd><p>
            Specifies that <code class="literal">target</code> is not a normal host path,
            but rather information to be interpreted by the executable program.
            The specified script file is looked for in
            <code class="filename">/etc/xen/scripts</code> if it does not point to an
            absolute path. These scripts are normally called
            <code class="literal">block-&lt;script_name&gt;</code>.
          </p></dd></dl></div><p>
      For more information about specifying virtual disks, see
      <code class="filename">/usr/share/doc/packages/xen/misc/xl-disk-configuration.txt</code>.
    </p></div><div class="sect1 " id="sec-xen-config-netdisk"><div class="titlepage"><div><div><h2 class="title"><span class="number">26.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Mapping network storage to virtual disk</span> <a title="Permalink" class="permalink" href="cha-xen-vbd.html#sec-xen-config-netdisk">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen_block_devices.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>xen_block_devices.xml</li><li><span class="ds-label">ID: </span>sec-xen-config-netdisk</li></ul></div></div></div></div><p>
      Similar to mapping a local disk image (see
      <a class="xref" href="cha-xen-vbd.html#sec-xen-config-disk" title="26.1. Mapping physical storage to virtual disks">Section 26.1, “Mapping physical storage to virtual disks”</a>), you can map a network disk as a
      virtual disk as well.
    </p><p>
      The following example shows mapping of an RBD (RADOS Block Device) disk
      with multiple Ceph monitors and cephx authentication enabled:
    </p><div class="verbatim-wrap"><pre class="screen">disk = [ 'vdev=hdc, backendtype=qdisk, \
target=rbd:libvirt-pool/new-libvirt-image:\
id=libvirt:key=AQDsPWtW8JoXJBAAyLPQe7MhCC+JPkI3QuhaAw==:auth_supported=cephx;none:\
mon_host=137.65.135.205\\:6789;137.65.135.206\\:6789;137.65.135.207\\:6789' ]</pre></div><p>
      Following is an example of an NBD (Network Block Device) disk mapping:
    </p><div class="verbatim-wrap"><pre class="screen">disk = [ 'vdev=hdc, backendtype=qdisk, target=nbd:151.155.144.82:5555' ]</pre></div></div><div class="sect1 " id="sec-xen-config-filedisk"><div class="titlepage"><div><div><h2 class="title"><span class="number">26.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">File-backed virtual disks and loopback devices</span> <a title="Permalink" class="permalink" href="cha-xen-vbd.html#sec-xen-config-filedisk">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen_block_devices.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>xen_block_devices.xml</li><li><span class="ds-label">ID: </span>sec-xen-config-filedisk</li></ul></div></div></div></div><p>
      When a virtual machine is running, each of its file-backed virtual disks
      consumes a loopback device on the host. By default, the host allows up to
      64 loopback devices to be consumed.
    </p><p>
      To simultaneously run more file-backed virtual disks on a host, you can
      increase the number of available loopback devices by adding the following
      option to the host’s <code class="filename">/etc/modprobe.conf.local</code> file.
    </p><div class="verbatim-wrap"><pre class="screen">options loop max_loop=x</pre></div><p>
      where <code class="command">x</code> is the maximum number of loopback devices to
      create.
    </p><p>
      Changes take effect after the module is reloaded.
    </p><div id="id-1.8.6.5.6.7" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg" /><h6>Tip</h6><p>
        Enter <code class="command">rmmod loop</code> and <code class="command">modprobe
        loop</code> to unload and reload the module. In case
        <code class="command">rmmod</code> does not work, unmount all existing loop
        devices or reboot the computer.
      </p></div></div><div class="sect1 " id="sec-xen-block-resize"><div class="titlepage"><div><div><h2 class="title"><span class="number">26.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Resizing block devices</span> <a title="Permalink" class="permalink" href="cha-xen-vbd.html#sec-xen-block-resize">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen_block_devices.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>xen_block_devices.xml</li><li><span class="ds-label">ID: </span>sec-xen-block-resize</li></ul></div></div></div></div><p>
      While it is always possible to add new block devices to a VM Guest
      system, it is sometimes more desirable to increase the size of an
      existing block device. In case such a system modification is already
      planned during deployment of the VM Guest, several basic considerations
      should be done:
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
          Use a block device that may be increased in size. LVM devices and
          file system images are commonly used.
        </p></li><li class="listitem "><p>
          Do not partition the device inside the VM Guest, but use the main
          device directly to apply the file system. For example, use
          <code class="filename">/dev/xvdb</code> directly instead of adding partitions
          to <code class="filename">/dev/xvdb</code>.
        </p></li><li class="listitem "><p>
          Make sure that the file system to be used can be resized. Sometimes,
          for example, with Ext3, certain features must be switched off to be
          able to resize the file system. A file system that can be resized
          online and mounted is <code class="literal">XFS</code>. Use the command
          <code class="command">xfs_growfs</code> to resize that file system after the
          underlying block device has been increased in size. For more
          information about <code class="literal">XFS</code>, see <code class="command">man 8
          xfs_growfs</code>.
        </p></li></ul></div><p>
      When resizing an LVM device that is assigned to a VM Guest, the new size
      is automatically known to the VM Guest. No further action is needed to
      inform the VM Guest about the new size of the block device.
    </p><p>
      When using file system images, a loop device is used to attach the image
      file to the guest. For more information about resizing that image and
      refreshing the size information for the VM Guest, see
      <a class="xref" href="cha-xen-admin.html#sec-xen-config-sparse" title="28.2. Sparse image files and disk space">Section 28.2, “Sparse image files and disk space”</a>.
    </p></div><div class="sect1 " id="sec-xen-block-advstoragescripts"><div class="titlepage"><div><div><h2 class="title"><span class="number">26.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Scripts for managing advanced storage scenarios</span> <a title="Permalink" class="permalink" href="cha-xen-vbd.html#sec-xen-block-advstoragescripts">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/xen_block_devices.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>xen_block_devices.xml</li><li><span class="ds-label">ID: </span>sec-xen-block-advstoragescripts</li></ul></div></div></div></div><p>
      There are scripts that can help with managing advanced storage scenarios
      such as disk environments provided by <code class="command">dmmd</code>
      (<span class="quote">“<span class="quote ">device mapper—multi disk</span>”</span>) including LVM
      environments built upon a software RAID set, or a software RAID set built
      upon an LVM environment. These scripts are part of the
      <span class="package ">xen-tools</span> package. After installation, they can be
      found in <code class="filename">/etc/xen/scripts</code>:
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
          <code class="command">block-dmmd</code>
        </p></li><li class="listitem "><p>
          <code class="command">block-drbd-probe</code>
        </p></li><li class="listitem "><p>
          <code class="command">block-npiv</code>
        </p></li></ul></div><p>
      The scripts allow for external commands to perform specific action, or
      series of actions of the block devices before serving them up to a guest.
    </p><p>
      These scripts could formerly only be used with <code class="command">xl</code> or
      <code class="command">libxl</code> using the disk configuration syntax
      <code class="literal">script=</code>. They can now be used with libvirt by
      specifying the base name of the block script in the
      <code class="literal">&lt;source&gt;</code> element of the disk. For example:
    </p><div class="verbatim-wrap"><pre class="screen">&lt;source dev='dmmd:md;/dev/md0;lvm;/dev/vgxen/lv-vm01'/&gt;</pre></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha-xen-config.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 27 </span>Virtualization: configuration options and settings</span></a><a class="nav-link" href="cha-xen-manage.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 25 </span>Managing a virtualization environment</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2024 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>