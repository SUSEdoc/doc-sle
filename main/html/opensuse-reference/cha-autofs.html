<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>On-demand mounting with autofs | Reference | openSUSE Leap 15.6</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="On-demand mounting with autofs | openSUSE Leap 15.6" />
<meta name="description" content="autofs is a program that automatically mounts specified directories on an on-demand basis. It is based on a kernel module for high efficiency, and can manage b…" />
<meta name="product-name" content="openSUSE Leap" />
<meta name="product-number" content="15.6" />
<meta name="book-title" content="Reference" />
<meta name="chapter-title" content="Chapter 23. On-demand mounting with autofs" />
<meta name="tracker-url" content="https://bugzilla.opensuse.org/enter_bug.cgi" />
<meta name="tracker-type" content="bsc" />
<meta name="tracker-bsc-assignee" content="fs@suse.com" />
<meta name="tracker-bsc-component" content="Documentation" />
<meta name="tracker-bsc-product" content="openSUSE Distribution" />
<meta name="tracker-bsc-version" content="Leap 15.4" />
<meta property="og:title" content="On-demand mounting with autofs | openSUSE Leap 15.6" />
<meta property="og:description" content="autofs is a program that automatically mounts specified directories on an on-demand basis. It is based on a kernel module for high efficiency, and can manage b…" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="On-demand mounting with autofs | openSUSE Leap 15.6" />
<meta name="twitter:description" content="autofs is a program that automatically mounts specified directories on an on-demand basis. It is based on a kernel module for high efficiency, and can manage b…" />
<link rel="home" href="index.html" title="openSUSE Leap Documentation" /><link rel="up" href="part-reference-services.html" title="Part III. Services" /><link rel="prev" href="cha-nfs.html" title="Chapter 22. Sharing file systems with NFS" /><link rel="next" href="cha-apache2.html" title="Chapter 24. The Apache HTTP server" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Reference"><span class="book-icon">Reference</span></a><span> › </span><a class="crumb" href="part-reference-services.html">Services</a><span> › </span><a class="crumb" href="cha-autofs.html">On-demand mounting with autofs</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Reference</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="preface-reference.html"><span class="number"> </span><span class="name">About this guide</span></a></li><li class="inactive"><a href="part-reference-adv-admin.html"><span class="number">I </span><span class="name">Advanced administration</span></a><ol><li class="inactive"><a href="cha-yast-text.html"><span class="number">1 </span><span class="name">YaST in text mode</span></a></li><li class="inactive"><a href="cha-sw-cl.html"><span class="number">2 </span><span class="name">Managing software with command line tools</span></a></li><li class="inactive"><a href="cha-snapper.html"><span class="number">3 </span><span class="name">System recovery and snapshot management with Snapper</span></a></li><li class="inactive"><a href="cha-vnc.html"><span class="number">4 </span><span class="name">Remote graphical sessions with VNC</span></a></li><li class="inactive"><a href="cha-expert-partitioner.html"><span class="number">5 </span><span class="name"><span class="guimenu ">Expert Partitioner</span></span></a></li><li class="inactive"><a href="cha-tuning-multikernel.html"><span class="number">6 </span><span class="name">Installing multiple kernel versions</span></a></li><li class="inactive"><a href="cha-gui-desktop.html"><span class="number">7 </span><span class="name">Graphical user interface</span></a></li></ol></li><li class="inactive"><a href="part-reference-system.html"><span class="number">II </span><span class="name">System</span></a><ol><li class="inactive"><a href="cha-64bit.html"><span class="number">8 </span><span class="name">32-bit and 64-bit applications in a 64-bit system environment</span></a></li><li class="inactive"><a href="cha-boot.html"><span class="number">9 </span><span class="name">Introduction to the boot process</span></a></li><li class="inactive"><a href="cha-systemd.html"><span class="number">10 </span><span class="name">The <code class="systemitem">systemd</code> daemon</span></a></li><li class="inactive"><a href="cha-journalctl.html"><span class="number">11 </span><span class="name"><code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal</span></a></li><li class="inactive"><a href="cha-grub2.html"><span class="number">12 </span><span class="name">The boot loader GRUB 2</span></a></li><li class="inactive"><a href="cha-network.html"><span class="number">13 </span><span class="name">Basic networking</span></a></li><li class="inactive"><a href="cha-uefi.html"><span class="number">14 </span><span class="name">UEFI (Unified Extensible Firmware Interface)</span></a></li><li class="inactive"><a href="cha-suse.html"><span class="number">15 </span><span class="name">Special system features</span></a></li><li class="inactive"><a href="cha-udev.html"><span class="number">16 </span><span class="name">Dynamic kernel device management with <code class="systemitem">udev</code></span></a></li></ol></li><li class="inactive"><a href="part-reference-services.html"><span class="number">III </span><span class="name">Services</span></a><ol><li class="inactive"><a href="cha-slp.html"><span class="number">17 </span><span class="name">SLP</span></a></li><li class="inactive"><a href="cha-ntp.html"><span class="number">18 </span><span class="name">Time synchronization with NTP</span></a></li><li class="inactive"><a href="cha-dns.html"><span class="number">19 </span><span class="name">The domain name system</span></a></li><li class="inactive"><a href="cha-dhcp.html"><span class="number">20 </span><span class="name">DHCP</span></a></li><li class="inactive"><a href="cha-samba.html"><span class="number">21 </span><span class="name">Samba</span></a></li><li class="inactive"><a href="cha-nfs.html"><span class="number">22 </span><span class="name">Sharing file systems with NFS</span></a></li><li class="inactive"><a href="cha-autofs.html"><span class="number">23 </span><span class="name">On-demand mounting with autofs</span></a></li><li class="inactive"><a href="cha-apache2.html"><span class="number">24 </span><span class="name">The Apache HTTP server</span></a></li><li class="inactive"><a href="cha-ftp.html"><span class="number">25 </span><span class="name">Setting up an FTP server with YaST</span></a></li><li class="inactive"><a href="cha-squid.html"><span class="number">26 </span><span class="name">Squid caching proxy server</span></a></li></ol></li><li class="inactive"><a href="part-reference-mobility.html"><span class="number">IV </span><span class="name">Mobile computers</span></a><ol><li class="inactive"><a href="cha-mobile.html"><span class="number">27 </span><span class="name">Mobile computing with Linux</span></a></li><li class="inactive"><a href="cha-nm.html"><span class="number">28 </span><span class="name">Using NetworkManager</span></a></li><li class="inactive"><a href="cha-power-mgmt.html"><span class="number">29 </span><span class="name">Power management</span></a></li></ol></li><li class="inactive"><a href="app-nwscheme.html"><span class="number">A </span><span class="name">An example network</span></a></li><li class="inactive"><a href="bk02apb.html"><span class="number">B </span><span class="name">GNU licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 22. Sharing file systems with NFS" href="cha-nfs.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 24. The Apache HTTP server" href="cha-apache2.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Reference"><span class="book-icon">Reference</span></a><span> › </span><a class="crumb" href="part-reference-services.html">Services</a><span> › </span><a class="crumb" href="cha-autofs.html">On-demand mounting with autofs</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 22. Sharing file systems with NFS" href="cha-nfs.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 24. The Apache HTTP server" href="cha-apache2.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha-autofs"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname "><span class="productname"><span class="phrase">openSUSE Leap</span></span></span> <span class="productnumber "><span class="productnumber"><span class="phrase">15.6</span></span></span></div><div><h2 class="title"><span class="number">23 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">On-demand mounting with autofs</span> <a title="Permalink" class="permalink" href="cha-autofs.html#">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>cha-autofs</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="cha-autofs.html#id-1.4.5.8.2.2">#</a></h6></div><p>
    <code class="systemitem">autofs</code> is a program that automatically mounts
    specified directories on an on-demand basis. It is based on a kernel module
    for high efficiency, and can manage both local directories and network
    shares. These automatic mount points are mounted only when they are
    accessed, and unmounted after a certain period of inactivity. This
    on-demand behavior saves bandwidth and results in better performance than
    static mounts managed by <code class="filename">/etc/fstab</code>. While
    <code class="systemitem">autofs</code> is a control script,
    <code class="command">automount</code> is the command (daemon) that does the actual
    auto-mounting.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha-autofs.html#sec-autofs-installation"><span class="number">23.1 </span><span class="name">Installation</span></a></span></dt><dt><span class="sect1"><a href="cha-autofs.html#sec-autofs-configuration"><span class="number">23.2 </span><span class="name">Configuration</span></a></span></dt><dt><span class="sect1"><a href="cha-autofs.html#sec-autofs-debugging"><span class="number">23.3 </span><span class="name">Operation and debugging</span></a></span></dt><dt><span class="sect1"><a href="cha-autofs.html#sec-autofs-nfs"><span class="number">23.4 </span><span class="name">Auto-mounting an NFS share</span></a></span></dt><dt><span class="sect1"><a href="cha-autofs.html#sec-autofs-advanced"><span class="number">23.5 </span><span class="name">Advanced topics</span></a></span></dt></dl></div></div><div class="sect1 " id="sec-autofs-installation"><div class="titlepage"><div><div><h2 class="title"><span class="number">23.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Installation</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-installation">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-installation</li></ul></div></div></div></div><p>
   <code class="systemitem">autofs</code> is not installed on <span class="productname"><span class="phrase">openSUSE Leap</span></span> by
   default. To use its auto-mounting capabilities, first install it with
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install autofs</pre></div></div><div class="sect1 " id="sec-autofs-configuration"><div class="titlepage"><div><div><h2 class="title"><span class="number">23.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuration</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-configuration">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-configuration</li></ul></div></div></div></div><p>
   You need to configure <code class="systemitem">autofs</code> manually by editing
   its configuration files with a text editor, such as <code class="command">vim</code>.
   There are two basic steps to configure
   <code class="systemitem">autofs</code>—the <span class="emphasis"><em>master</em></span> map
   file, and specific map files.
  </p><div class="sect2 " id="sec-autofs-configuration-master-map"><div class="titlepage"><div><div><h3 class="title"><span class="number">23.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The master map file</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-configuration-master-map">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-configuration-master-map</li></ul></div></div></div></div><p>
    The default master configuration file for <code class="systemitem">autofs</code>
    is <code class="filename">/etc/auto.master</code>. You can change its location by
    changing the value of the <code class="option">DEFAULT_MASTER_MAP_NAME</code> option
    in <code class="filename">/etc/sysconfig/autofs</code>. Here is the content of the
    default one for <span class="productname"><span class="phrase">openSUSE Leap</span></span>:
   </p><div class="verbatim-wrap"><pre class="screen">#
# Sample auto.master file
# This is an automounter map and it has the following format
# key [ -mount-options-separated-by-comma ] location
# For details of the format look at autofs(5).<span id="co-autofs-manpage"></span><span class="callout">1</span>
#
#/misc  /etc/auto.misc<span id="co-autofs-map"></span><span class="callout">2</span>
#/net -hosts
#
# Include /etc/auto.master.d/*.autofs<span id="co-autofs-include"></span><span class="callout">3</span>
#
#+dir:/etc/auto.master.d
#
# Include central master map if it can be found using
# nsswitch sources.
#
# Note that if there are entries for /net or /misc (as
# above) in the included master map any keys that are the
# same will not be seen as the first read key seen takes
# precedence.
#
+auto.master<span id="co-autofs-plus"></span><span class="callout">4</span></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-autofs-manpage"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      The <code class="systemitem">autofs</code> manual page (<code class="command">man 5
      autofs</code>) offers a lot of valuable information on the format of
      the automounter maps.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-autofs-map"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      Although commented out (#) by default, this is an example of a simple
      automounter mapping syntax.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-autofs-include"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
      In case you need to split the master map into several files, uncomment
      the line, and put the mappings (suffixed with <code class="literal">.autofs</code>)
      in the <code class="filename">/etc/auto.master.d/</code> directory.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-autofs-plus"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
      <code class="literal">+auto.master</code> ensures that those using NIS
      <span class="phrase">(see <span class="intraxref">Book “Security and Hardening Guide”, Chapter 3 “Using NIS”, Section 3.1 “Configuring NIS servers”</span> for more
      information on NIS)</span> will still find their master map.
     </p></td></tr></table></div><p>
    Entries in <code class="filename">auto.master</code> have three fields with the
    following syntax:
   </p><div class="verbatim-wrap"><pre class="screen">mount point      map name      options</pre></div><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.5.8.4.3.7.1"><span class="term ">mount point</span></dt><dd><p>
       The base location where to mount the <code class="systemitem">autofs</code>
       file system, such as <code class="literal">/home</code>.
      </p></dd><dt id="id-1.4.5.8.4.3.7.2"><span class="term ">map name</span></dt><dd><p>
       The name of a map source to use for mounting. For the syntax of the map
       files, see <a class="xref" href="cha-autofs.html#sec-autofs-mapfiles" title="23.2.2. Map files">Section 23.2.2, “Map files”</a>.
      </p></dd><dt id="id-1.4.5.8.4.3.7.3"><span class="term ">options</span></dt><dd><p>
       These options (if specified) will apply as defaults to all entries in
       the given map.
      </p></dd></dl></div><div id="id-1.4.5.8.4.3.8" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg" /><h6>Tip: More information</h6><p>
     For more detailed information on the specific values of the optional
     <code class="literal">map-type</code>, <code class="literal">format</code>, and
     <code class="literal">options</code>, see the <span class="guimenu ">auto.master</span> manual
     page (<code class="command">man 5 auto.master</code>).
    </p></div><p>
    The following entry in <code class="filename">auto.master</code> tells
    <code class="systemitem">autofs</code> to look in
    <code class="filename">/etc/auto.smb</code>, and create mount points in the
    <code class="filename">/smb</code> directory:
   </p><div class="verbatim-wrap"><pre class="screen">/smb   /etc/auto.smb</pre></div><div class="sect3 " id="sec-autofs-directmount"><div class="titlepage"><div><div><h4 class="title"><span class="number">23.2.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Direct mounts</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-directmount">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-directmount</li></ul></div></div></div></div><p>
     Direct mounts create a mount point at the path specified inside the
     relevant map file. Instead of specifying the mount point in
     <code class="filename">auto.master</code>, replace the mount point field with
     <code class="literal">/-</code>. For example, the following line tells
     <code class="systemitem">autofs</code> to create a mount point in the place
     specified in <code class="filename">auto.smb</code>:
    </p><div class="verbatim-wrap"><pre class="screen">/-        /etc/auto.smb</pre></div><div id="id-1.4.5.8.4.3.11.4" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg" /><h6>Tip: Maps without full path</h6><p>
      If the map file is not specified with its full local or network path, it
      is located using the Name Service Switch (NSS) configuration:
     </p><div class="verbatim-wrap"><pre class="screen">/-        auto.smb</pre></div></div></div></div><div class="sect2 " id="sec-autofs-mapfiles"><div class="titlepage"><div><div><h3 class="title"><span class="number">23.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Map files</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-mapfiles">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-mapfiles</li></ul></div></div></div></div><div id="id-1.4.5.8.4.4.2" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg" /><h6>Important: Other types of maps</h6><p>
     Although <span class="emphasis"><em>files</em></span> are the most common types of maps for
     auto-mounting with <code class="systemitem">autofs</code>, there are other types
     as well. A map specification can be the output of a command, or a result
     of a query in LDAP or a database. For more detailed information on map
     types, see the manual page <code class="command">man 5 auto.master</code>.
    </p></div><p>
    Map files specify the (local or network) source location, and the mount
    point where to mount the source locally. The general format of maps is
    similar to the master map. The difference is that the
    <span class="emphasis"><em>options</em></span> appear between the mount point and the
    location instead of at the end of the entry:
   </p><div class="verbatim-wrap"><pre class="screen">mount point      options      location</pre></div><p>
    Make sure that map files are not marked as executable. You can remove
    the executable bits by executing <code class="command">chmod -x <em class="replaceable ">MAP_FILE</em></code>.
   </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.5.8.4.4.6.1"><span class="term ">mount point</span></dt><dd><p>
       Specifies where to mount the source location. This can be either a
       single directory name (so-called <span class="emphasis"><em>indirect</em></span> mount) to
       be added to the base mount point specified in
       <code class="filename">auto.master</code>, or the full path of the mount point
       (direct mount, see <a class="xref" href="cha-autofs.html#sec-autofs-directmount" title="23.2.1.1. Direct mounts">Section 23.2.1.1, “Direct mounts”</a>).
      </p></dd><dt id="id-1.4.5.8.4.4.6.2"><span class="term ">options</span></dt><dd><p>
       Specifies an optional comma-separated list of mount options for the
       relevant entries. If <code class="filename">auto.master</code> contains options
       for this map file as well, these are appended.
      </p></dd><dt id="id-1.4.5.8.4.4.6.3"><span class="term ">location</span></dt><dd><p>
       Specifies from where the file system is to be mounted. It is usually an
       NFS or SMB volume in the usual notation
       <code class="literal">host_name:path_name</code>. If the file system to be mounted
       begins with a '/' (such as local <code class="filename">/dev</code> entries or
       smbfs shares), a colon symbol ':' needs to be prefixed, such as
       <code class="literal">:/dev/sda1</code>.
      </p></dd></dl></div></div></div><div class="sect1 " id="sec-autofs-debugging"><div class="titlepage"><div><div><h2 class="title"><span class="number">23.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Operation and debugging</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-debugging">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-debugging</li></ul></div></div></div></div><p>
   This section introduces information on how to control the
   <code class="systemitem">autofs</code> service operation, and how to view more
   debugging information when tuning the automounter operation.
  </p><div class="sect2 " id="sec-autofs-debugging-service"><div class="titlepage"><div><div><h3 class="title"><span class="number">23.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Controlling the <code class="systemitem">autofs</code> service</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-debugging-service">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-debugging-service</li></ul></div></div></div></div><p>
    The operation of the <code class="systemitem">autofs</code> service is controlled
    by <code class="systemitem">systemd</code>. The general syntax of the <code class="command">systemctl</code>
    command for <code class="systemitem">autofs</code> is
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl <em class="replaceable ">SUB_COMMAND</em> autofs</pre></div><p>
    where <em class="replaceable ">SUB_COMMAND</em> is one of:
   </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.5.8.5.3.5.1"><span class="term ">enable</span></dt><dd><p>
       Starts the automounter daemon at boot.
      </p></dd><dt id="id-1.4.5.8.5.3.5.2"><span class="term ">start</span></dt><dd><p>
       Starts the automounter daemon.
      </p></dd><dt id="id-1.4.5.8.5.3.5.3"><span class="term ">stop</span></dt><dd><p>
       Stops the automounter daemon. Automatic mount points are not accessible.
      </p></dd><dt id="id-1.4.5.8.5.3.5.4"><span class="term ">status</span></dt><dd><p>
       Prints the current status of the <code class="systemitem">autofs</code> service
       together with a part of a relevant log file.
      </p></dd><dt id="id-1.4.5.8.5.3.5.5"><span class="term ">restart</span></dt><dd><p>
       Stops and starts the automounter, terminating all running daemons and
       starting new ones.
      </p></dd><dt id="id-1.4.5.8.5.3.5.6"><span class="term ">reload</span></dt><dd><p>
       Checks the current <code class="filename">auto.master</code> map, restarts those
       daemons whose entries have changed, and starts new ones for new entries.
      </p></dd></dl></div></div><div class="sect2 " id="sec-autofs-debugging-problems"><div class="titlepage"><div><div><h3 class="title"><span class="number">23.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Debugging automounter problems</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-debugging-problems">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-debugging-problems</li></ul></div></div></div></div><p>
    If you experience problems when mounting directories with
    <code class="systemitem">autofs</code>, it is useful to run the
    <code class="command">automount</code> daemon manually and watch its output messages:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Stop <code class="systemitem">autofs</code>.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl stop autofs</pre></div></li><li class="step "><p>
      From one terminal, run <code class="command">automount</code> manually in the
      foreground, producing verbose output.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> automount -f -v</pre></div></li><li class="step "><p>
      From another terminal, try to mount the auto-mounting file systems by
      accessing the mount points (for example by <code class="command">cd</code> or
      <code class="command">ls</code>).
     </p></li><li class="step "><p>
      Check the output of <code class="command">automount</code> from the first terminal
      for more information on why the mount failed, or why it was not even
      attempted.
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec-autofs-nfs"><div class="titlepage"><div><div><h2 class="title"><span class="number">23.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Auto-mounting an NFS share</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-nfs">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-nfs</li></ul></div></div></div></div><p>
   The following procedure illustrates how to configure
   <code class="systemitem">autofs</code> to auto-mount an NFS share available on your
   network. It uses the information mentioned above, and assumes you
   are familiar with NFS exports. For more information on NFS, see
   <a class="xref" href="cha-nfs.html" title="Chapter 22. Sharing file systems with NFS">Chapter 22, <em>Sharing file systems with NFS</em></a>.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Edit the master map file <code class="filename">/etc/auto.master</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> vim /etc/auto.master</pre></div><p>
     Add a new entry for the new NFS mount at the end of
     <code class="filename">/etc/auto.master</code>:
    </p><div class="verbatim-wrap"><pre class="screen">/nfs      /etc/auto.nfs      --timeout=10</pre></div><p>
     This tells <code class="systemitem">autofs</code> that the base mount point is
     <code class="filename">/nfs</code>, the NFS shares are specified in the
     <code class="filename">/etc/auto.nfs</code> map, and that all shares in this map
     will be automatically unmounted after 10 seconds of inactivity.
    </p></li><li class="step "><p>
     Create a new map file for NFS shares:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> vim /etc/auto.nfs</pre></div><p>
     <code class="filename">/etc/auto.nfs</code> normally contains a separate line for
     each NFS share. Its format is described in
     <a class="xref" href="cha-autofs.html#sec-autofs-mapfiles" title="23.2.2. Map files">Section 23.2.2, “Map files”</a>. Add the line describing the mount point
     and the NFS share network address:
    </p><div class="verbatim-wrap"><pre class="screen">export      jupiter.com:/home/geeko/doc/export</pre></div><p>
     The above line means that the <code class="filename">/home/geeko/doc/export</code>
     directory on the <code class="literal">jupiter.com</code> host will be auto-mounted
     to the <code class="filename">/nfs/export</code> directory on the local host
     (<code class="filename">/nfs</code> is taken from the
     <code class="filename">auto.master</code> map) when requested. The
     <code class="filename">/nfs/export</code> directory will be created automatically
     by <code class="systemitem">autofs</code>.
    </p></li><li class="step "><p>
     Optionally comment out the related line in <code class="filename">/etc/fstab</code>
     if you previously mounted the same NFS share statically. The line should
     look similar to this:
    </p><div class="verbatim-wrap"><pre class="screen">#jupiter.com:/home/geeko/doc/export /nfs/export nfs defaults 0 0</pre></div></li><li class="step "><p>
     Reload <code class="systemitem">autofs</code> and check if it works:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl restart autofs</pre></div><div class="verbatim-wrap"><pre class="screen"># ls -l /nfs/export
total 20
drwxr-xr-x  5 1001 users 4096 Jan 14  2017 .images/
drwxr-xr-x 10 1001 users 4096 Aug 16  2017 .profiled/
drwxr-xr-x  3 1001 users 4096 Aug 30  2017 .tmp/
drwxr-xr-x  4 1001 users 4096 Apr 25 08:56 manual/</pre></div><p>
     If you can see the list of files on the remote share, then
     <code class="systemitem">autofs</code> is functioning.
    </p></li></ol></div></div></div><div class="sect1 " id="sec-autofs-advanced"><div class="titlepage"><div><div><h2 class="title"><span class="number">23.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Advanced topics</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-advanced">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-advanced</li></ul></div></div></div></div><p>
   This section describes topics that are beyond the basic introduction to
   <code class="systemitem">autofs</code>—auto-mounting of NFS shares that are
   available on your network, using wild cards in map files, and information
   specific to the CIFS file system.
  </p><div class="sect2 " id="sec-autofs-advanced-net"><div class="titlepage"><div><div><h3 class="title"><span class="number">23.5.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="filename">/net</code> mount point</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-advanced-net">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-advanced-net</li></ul></div></div></div></div><p>
    This helper mount point is useful if you use a lot of NFS shares.
    <code class="filename">/net</code> auto-mounts all NFS shares on your local network
    on demand. The entry is already present in the
    <code class="filename">auto.master</code> file, so all you need to do is uncomment
    it and restart <code class="systemitem">autofs</code>:
   </p><div class="verbatim-wrap"><pre class="screen">/net      -hosts</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl restart autofs</pre></div><p>
    For example, if you have a server named <code class="literal">jupiter</code> with an
    NFS share called <code class="filename">/export</code>, you can mount it by typing
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> cd /net/jupiter/export</pre></div><p>
    on the command line.
   </p></div><div class="sect2 " id="sec-autofs-advanced-wildcards"><div class="titlepage"><div><div><h3 class="title"><span class="number">23.5.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Using wild cards to auto-mount subdirectories</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-advanced-wildcards">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-advanced-wildcards</li></ul></div></div></div></div><p>
    If you have a directory with subdirectories that you need to auto-mount
    individually—the typical case is the <code class="filename">/home</code>
    directory with individual users' home directories
    inside—<code class="systemitem">autofs</code> offers a clever solution.
   </p><p>
    In case of home directories, add the following line in
    <code class="filename">auto.master</code>:
   </p><div class="verbatim-wrap"><pre class="screen">/home      /etc/auto.home</pre></div><p>
    Now you need to add the correct mapping to the
    <code class="filename">/etc/auto.home</code> file, so that the users' home
    directories are mounted automatically. One solution is to create separate
    entries for each directory:
   </p><div class="verbatim-wrap"><pre class="screen">wilber      jupiter.com:/home/wilber
penguin      jupiter.com:/home/penguin
tux      jupiter.com:/home/tux
[...]</pre></div><p>
    This is very awkward as you need to manage the list of users inside
    <code class="filename">auto.home</code>. You can use the asterisk '*' instead of the
    mount point, and the ampersand '&amp;' instead of the directory to be
    mounted:
   </p><div class="verbatim-wrap"><pre class="screen">*      jupiter:/home/&amp;</pre></div></div><div class="sect2 " id="sec-autofs-advanced-cifs"><div class="titlepage"><div><div><h3 class="title"><span class="number">23.5.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Auto-mounting CIFS file system</span> <a title="Permalink" class="permalink" href="cha-autofs.html#sec-autofs-advanced-cifs">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/autofs.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>autofs.xml</li><li><span class="ds-label">ID: </span>sec-autofs-advanced-cifs</li></ul></div></div></div></div><p>
    If you want to auto-mount an SMB/CIFS share (see
    <a class="xref" href="cha-samba.html" title="Chapter 21. Samba">Chapter 21, <em>Samba</em></a> for more information on the SMB/CIFS protocol),
    you need to modify the syntax of the map file. Add
    <code class="option">-fstype=cifs</code> in the option field, and prefix the share
    location with a colon ':'.
   </p><div class="verbatim-wrap"><pre class="screen">mount point      -fstype=cifs      ://jupiter.com/export</pre></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha-apache2.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 24 </span>The Apache HTTP server</span></a><a class="nav-link" href="cha-nfs.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 22 </span>Sharing file systems with NFS</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2024 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>