<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Introduction to the boot process | Reference | openSUSE Leap 15.7</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Introduction to the boot process | openSUSE Leap 15.7" />
<meta name="description" content="Booting a Linux system involves different components and tasks. After a firmware and hardware initialization process, which depends on the machine's architectu…" />
<meta name="product-name" content="openSUSE Leap" />
<meta name="product-number" content="15.7" />
<meta name="book-title" content="Reference" />
<meta name="chapter-title" content="Chapter 9. Introduction to the boot process" />
<meta name="tracker-url" content="https://bugzilla.opensuse.org/enter_bug.cgi" />
<meta name="tracker-type" content="bsc" />
<meta name="tracker-bsc-assignee" content="fs@suse.com" />
<meta name="tracker-bsc-component" content="Documentation" />
<meta name="tracker-bsc-product" content="openSUSE Distribution" />
<meta name="tracker-bsc-version" content="Leap 15.4" />
<meta property="og:title" content="Introduction to the boot process | openSUSE Leap 15.7" />
<meta property="og:description" content="Booting a Linux system involves different components and tasks. After a firmware and hardware initialization process, which depends on the machine's architectu…" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Introduction to the boot process | openSUSE Leap 15.7" />
<meta name="twitter:description" content="Booting a Linux system involves different components and tasks. After a firmware and hardware initialization process, which depends on the machine's architectu…" />
<link rel="home" href="index.html" title="openSUSE Leap Documentation" /><link rel="up" href="part-reference-system.html" title="Part II. System" /><link rel="prev" href="cha-64bit.html" title="Chapter 8. 32-bit and 64-bit applications in a 64-bit system environment" /><link rel="next" href="cha-systemd.html" title="Chapter 10. The systemd daemon" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Reference"><span class="book-icon">Reference</span></a><span> › </span><a class="crumb" href="part-reference-system.html">System</a><span> › </span><a class="crumb" href="cha-boot.html">Introduction to the boot process</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Reference</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="preface-reference.html"><span class="number"> </span><span class="name">About this guide</span></a></li><li class="inactive"><a href="part-reference-adv-admin.html"><span class="number">I </span><span class="name">Advanced administration</span></a><ol><li class="inactive"><a href="cha-yast-text.html"><span class="number">1 </span><span class="name">YaST in text mode</span></a></li><li class="inactive"><a href="cha-sw-cl.html"><span class="number">2 </span><span class="name">Managing software with command line tools</span></a></li><li class="inactive"><a href="cha-snapper.html"><span class="number">3 </span><span class="name">System recovery and snapshot management with Snapper</span></a></li><li class="inactive"><a href="cha-vnc.html"><span class="number">4 </span><span class="name">Remote graphical sessions with VNC</span></a></li><li class="inactive"><a href="cha-expert-partitioner.html"><span class="number">5 </span><span class="name"><span class="guimenu ">Expert Partitioner</span></span></a></li><li class="inactive"><a href="cha-tuning-multikernel.html"><span class="number">6 </span><span class="name">Installing multiple kernel versions</span></a></li><li class="inactive"><a href="cha-gui-desktop.html"><span class="number">7 </span><span class="name">Graphical user interface</span></a></li></ol></li><li class="inactive"><a href="part-reference-system.html"><span class="number">II </span><span class="name">System</span></a><ol><li class="inactive"><a href="cha-64bit.html"><span class="number">8 </span><span class="name">32-bit and 64-bit applications in a 64-bit system environment</span></a></li><li class="inactive"><a href="cha-boot.html"><span class="number">9 </span><span class="name">Introduction to the boot process</span></a></li><li class="inactive"><a href="cha-systemd.html"><span class="number">10 </span><span class="name">The <code class="systemitem">systemd</code> daemon</span></a></li><li class="inactive"><a href="cha-journalctl.html"><span class="number">11 </span><span class="name"><code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal</span></a></li><li class="inactive"><a href="cha-grub2.html"><span class="number">12 </span><span class="name">The boot loader GRUB 2</span></a></li><li class="inactive"><a href="cha-network.html"><span class="number">13 </span><span class="name">Basic networking</span></a></li><li class="inactive"><a href="cha-uefi.html"><span class="number">14 </span><span class="name">UEFI (Unified Extensible Firmware Interface)</span></a></li><li class="inactive"><a href="cha-suse.html"><span class="number">15 </span><span class="name">Special system features</span></a></li><li class="inactive"><a href="cha-udev.html"><span class="number">16 </span><span class="name">Dynamic kernel device management with <code class="systemitem">udev</code></span></a></li></ol></li><li class="inactive"><a href="part-reference-services.html"><span class="number">III </span><span class="name">Services</span></a><ol><li class="inactive"><a href="cha-slp.html"><span class="number">17 </span><span class="name">SLP</span></a></li><li class="inactive"><a href="cha-ntp.html"><span class="number">18 </span><span class="name">Time synchronization with NTP</span></a></li><li class="inactive"><a href="cha-dns.html"><span class="number">19 </span><span class="name">The domain name system</span></a></li><li class="inactive"><a href="cha-dhcp.html"><span class="number">20 </span><span class="name">DHCP</span></a></li><li class="inactive"><a href="cha-samba.html"><span class="number">21 </span><span class="name">Samba</span></a></li><li class="inactive"><a href="cha-nfs.html"><span class="number">22 </span><span class="name">Sharing file systems with NFS</span></a></li><li class="inactive"><a href="cha-autofs.html"><span class="number">23 </span><span class="name">On-demand mounting with autofs</span></a></li><li class="inactive"><a href="cha-apache2.html"><span class="number">24 </span><span class="name">The Apache HTTP server</span></a></li><li class="inactive"><a href="cha-ftp.html"><span class="number">25 </span><span class="name">Setting up an FTP server with YaST</span></a></li><li class="inactive"><a href="cha-squid.html"><span class="number">26 </span><span class="name">Squid caching proxy server</span></a></li></ol></li><li class="inactive"><a href="part-reference-mobility.html"><span class="number">IV </span><span class="name">Mobile computers</span></a><ol><li class="inactive"><a href="cha-mobile.html"><span class="number">27 </span><span class="name">Mobile computing with Linux</span></a></li><li class="inactive"><a href="cha-nm.html"><span class="number">28 </span><span class="name">Using NetworkManager</span></a></li><li class="inactive"><a href="cha-power-mgmt.html"><span class="number">29 </span><span class="name">Power management</span></a></li></ol></li><li class="inactive"><a href="app-nwscheme.html"><span class="number">A </span><span class="name">An example network</span></a></li><li class="inactive"><a href="bk02apb.html"><span class="number">B </span><span class="name">GNU licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 8. 32-bit and 64-bit applications in a 64-bit system environment" href="cha-64bit.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 10. The systemd daemon" href="cha-systemd.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Reference"><span class="book-icon">Reference</span></a><span> › </span><a class="crumb" href="part-reference-system.html">System</a><span> › </span><a class="crumb" href="cha-boot.html">Introduction to the boot process</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 8. 32-bit and 64-bit applications in a 64-bit system environment" href="cha-64bit.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 10. The systemd daemon" href="cha-systemd.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha-boot"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname "><span class="productname"><span class="phrase">openSUSE Leap</span></span></span> <span class="productnumber "><span class="productnumber"><span class="phrase">15.7</span></span></span></div><div><h2 class="title"><span class="number">9 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Introduction to the boot process</span> <a title="Permalink" class="permalink" href="cha-boot.html#">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>cha-boot</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="cha-boot.html#id-1.4.4.3.2.1">#</a></h6></div><p>
    Booting a Linux system involves different components and tasks. After a
    firmware and hardware initialization process, which depends on the
    machine's architecture, the kernel is started by the boot loader
    GRUB 2. After this point, the boot process is controlled by the
    operating system and handled by <code class="systemitem">systemd</code>.  <code class="systemitem">systemd</code> provides a set of
    <span class="quote">“<span class="quote ">targets</span>”</span> that boot configurations for everyday usage,
    maintenance or emergencies.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha-boot.html#sec-boot-terminology"><span class="number">9.1 </span><span class="name">Terminology</span></a></span></dt><dt><span class="sect1"><a href="cha-boot.html#sec-boot-proc"><span class="number">9.2 </span><span class="name">The Linux boot process</span></a></span></dt></dl></div></div><div class="sect1 " id="sec-boot-terminology"><div class="titlepage"><div><div><h2 class="title"><span class="number">9.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Terminology</span> <a title="Permalink" class="permalink" href="cha-boot.html#sec-boot-terminology">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>sec-boot-terminology</li></ul></div></div></div></div><p>
   This chapter uses terms that can be interpreted ambiguously. To
   understand how they are used here, read the definitions below:
  </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.4.3.3.3.1"><span class="term "><code class="systemitem">init</code></span></dt><dd><p>
      Two different processes are commonly named <span class="quote">“<span class="quote ">init</span>”</span>:
     </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        The <code class="systemitem">initramfs</code> process mounting the root
        file system
       </p></li><li class="listitem "><p>
        The operating system process that starts all other processes that is
        executed from the real root file system
       </p></li></ul></div><p>
      In both cases, the <code class="systemitem">systemd</code> program is taking care of this task. It is
      first executed from the <code class="systemitem">initramfs</code> to mount the
      root file system. When that has succeeded, it is re-executed from the
      root file system as the initial process. To avoid confusing these two
      <code class="systemitem">systemd</code> processes, we refer to the first process as <span class="emphasis"><em>init on
      initramfs</em></span> and to the second one as
      <span class="emphasis"><em>systemd</em></span>.
     </p></dd><dt id="id-1.4.4.3.3.3.2"><span class="term ">
     <code class="systemitem">initrd</code>/<code class="systemitem">initramfs</code>
    </span></dt><dd><p>
      An <code class="systemitem">initrd</code> (initial RAM disk) is an image file
      containing a root file system image which is loaded by the kernel and
      mounted from <code class="filename">/dev/ram</code> as the temporary root file
      system. Mounting this file system requires a file system driver.
     </p><p>
      Beginning with kernel 2.6.13, the initrd has been replaced by the
      <code class="systemitem">initramfs</code> (initial RAM file system), which does
      not require a file system driver to be mounted. <span class="productname"><span class="phrase">openSUSE Leap</span></span> exclusively
      uses an <code class="systemitem">initramfs</code>. However, since the
      <code class="systemitem">initramfs</code> is stored as
      <code class="filename">/boot/initrd</code>, it is often called
      <span class="quote">“<span class="quote ">initrd</span>”</span>. In this chapter we exclusively use the name
      <code class="systemitem">initramfs</code>.
     </p></dd></dl></div></div><div class="sect1 " id="sec-boot-proc"><div class="titlepage"><div><div><h2 class="title"><span class="number">9.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The Linux boot process</span> <a title="Permalink" class="permalink" href="cha-boot.html#sec-boot-proc">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>sec-boot-proc</li></ul></div></div></div></div><p>
   The Linux boot process consists of several stages, each represented by a
   different component:
  </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>
     <a class="xref" href="cha-boot.html#sec-boot-proc-initialization" title="9.2.1. The initialization and boot loader phase">Section 9.2.1, “The initialization and boot loader phase”</a>
    </p></li><li class="listitem "><p>
     <a class="xref" href="cha-boot.html#sec-boot-proc-kernel" title="9.2.2. The kernel phase">Section 9.2.2, “The kernel phase”</a>
    </p></li><li class="listitem "><p>
     <a class="xref" href="cha-boot.html#sec-boot-initramfs" title="9.2.3. The init on initramfs phase">Section 9.2.3, “The init on initramfs phase”</a>
    </p></li><li class="listitem "><p>
     <a class="xref" href="cha-boot.html#sec-boot-systemd" title="9.2.4. The systemd phase">Section 9.2.4, “The systemd phase”</a>
    </p></li></ol></div><div class="sect2 " id="sec-boot-proc-initialization"><div class="titlepage"><div><div><h3 class="title"><span class="number">9.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The initialization and boot loader phase</span> <a title="Permalink" class="permalink" href="cha-boot.html#sec-boot-proc-initialization">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>sec-boot-proc-initialization</li></ul></div></div></div></div><p>
    During the initialization phase, the machine's hardware is set up, and the
    devices are prepared. This process differs across hardware architectures.
   </p><p>
    <span class="productname"><span class="phrase">openSUSE Leap</span></span> uses the boot loader GRUB 2 on all architectures. Depending
    on the architecture and firmware, starting the GRUB 2 boot loader can be a
    multi-step process. The purpose of the boot loader is to load the kernel
    and the initial, RAM-based file system (initramfs). For more information
    about GRUB 2, refer to <a class="xref" href="cha-grub2.html" title="Chapter 12. The boot loader GRUB 2">Chapter 12, <em>The boot loader GRUB 2</em></a>.
   </p><div class="sect3 " id="sec-boot-proc-initialization-x86-aarch"><div class="titlepage"><div><div><h4 class="title"><span class="number">9.2.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Initialization and boot loader phase on AArch64 and AMD64/Intel 64</span> <a title="Permalink" class="permalink" href="cha-boot.html#sec-boot-proc-initialization-x86-aarch">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit the source file for this section">Edit source</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>sec-boot-proc-initialization-x86-aarch</li></ul></div></div></div></div><p>
     After turning on the computer, the BIOS or the UEFI initializes the screen
     and keyboard, and tests the main memory. Up to this stage, the machine
     does not access any mass storage media. Subsequently, the information
     about the current date, time and the most important peripherals are
     loaded from the CMOS values. When the boot media and its geometry are
     recognized, the system control passes from the BIOS/UEFI to the boot
     loader.
    </p><p>
     On a machine equipped with a traditional BIOS, only code from the first
     physical 512-byte data sector (the Master Boot Record, MBR) of the boot
     disk can be loaded. Only a minimal GRUB 2 fits into the MBR. Its sole
     purpose is to load a GRUB 2 core image containing file system drivers from
     the gap between the MBR and the first partition (MBR partition table) or
     from the BIOS boot partition (GPT partition table). This image contains
     file system drivers and therefore is able to access
     <code class="filename">/boot</code> located on the root file
     system. <code class="filename">/boot</code> contains additional modules for GRUB 2
     core as well as the kernel and the initramfs image. When it has access to
     this partition, GRUB 2 loads the kernel and the initramfs image into
     memory and hands control over to the kernel.
    </p><p>
     When booting a BIOS system from an encrypted file system that includes an
     encrypted <code class="filename">/boot</code> partition, you need to enter the
     password for decryption twice. It is first needed by GRUB 2 to decrypt
     <code class="filename">/boot</code> and then for <code class="systemitem">systemd</code> to mount the encrypted
     volumes.
    </p><p>
     On machines with UEFI the boot process is much simpler than on machines
     with a traditional BIOS. The firmware is able to read from a FAT formatted
     system partition of disks with a GPT partition table. This EFI
     system-partition (in the running system mounted as
     <code class="filename">/boot/efi</code>) holds enough space to host a fully fledged
     GRUB 2 which is directly loaded and executed by the firmware.
    </p><p>
     If the BIOS/UEFI supports network booting, it is also possible to configure
     a boot server that provides the boot loader. The system can then be booted
     via PXE. The BIOS/UEFI acts as the boot loader. It gets the boot image from
     the boot server and starts the system, independent of local hard disks.
    </p></div></div><div class="sect2 " id="sec-boot-proc-kernel"><div class="titlepage"><div><div><h3 class="title"><span class="number">9.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The kernel phase</span> <a title="Permalink" class="permalink" href="cha-boot.html#sec-boot-proc-kernel">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>sec-boot-proc-kernel</li></ul></div></div></div></div><p>
    When the boot loader has passed on system control, the boot process is the
    same on all architectures. The boot loader loads both the kernel and an
    initial RAM-based file system (<code class="systemitem">initramfs</code>) into
    memory and the kernel takes over.
   </p><p>
    After the kernel has set up memory management and has detected the CPU type
    and its features, it initializes the hardware and mounts the temporary root
    file system from the memory that was loaded with the
    <code class="systemitem">initramfs</code>.
   </p><div class="sect3 " id="sec-boot-initrd"><div class="titlepage"><div><div><h4 class="title"><span class="number">9.2.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The <code class="systemitem">initramfs</code> file</span> <a title="Permalink" class="permalink" href="cha-boot.html#sec-boot-initrd">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit the source file for this section">Edit source</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>sec-boot-initrd</li></ul></div></div></div></div><p>
     <code class="systemitem">initramfs</code> (initial RAM file system) is a small
     cpio archive that the kernel can load into a RAM disk. It is located at
     <code class="filename">/boot/initrd</code>. It can be created with a tool called
     <code class="command">dracut</code>—refer to <code class="command">man 8 dracut</code>
     for details.
    </p><p>
     The <code class="systemitem">initramfs</code> provides a minimal Linux
     environment that enables the execution of programs before the actual root
     file system is mounted. This minimal Linux environment is loaded into
     memory by BIOS or UEFI routines and does not have specific hardware
     requirements other than sufficient memory. The
     <code class="systemitem">initramfs</code> archive must always provide an
     executable named <code class="systemitem">init</code> that executes the <code class="systemitem">systemd</code>
     daemon on the root file system for the boot process to proceed.
    </p><p>
     Before the root file system can be mounted and the operating system can be
     started, the kernel needs the corresponding drivers to access the device
     on which the root file system is located. These drivers may include
     special drivers for certain kinds of hard disks or even network drivers to
     access a network file system. The needed modules for the root file system
     are loaded by <code class="systemitem">init</code> on
     <code class="systemitem">initramfs</code>. After the modules are loaded,
     <code class="systemitem">udev</code> provides the
     <code class="systemitem">initramfs</code> with the needed devices. Later in the
     boot process, after changing the root file system, it is necessary to
     regenerate the devices. This is done by the <code class="systemitem">systemd</code> unit
     <code class="filename">systemd-udev-trigger.service</code>.
    </p><div class="sect4 " id="sec-boot-initrd-regenerate"><div class="titlepage"><div><div><h5 class="title"><span class="number">9.2.2.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Regenerating the initramfs</span> <a title="Permalink" class="permalink" href="cha-boot.html#sec-boot-initrd-regenerate">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit the source file for this section">Edit source</a></h5><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>sec-boot-initrd-regenerate</li></ul></div></div></div></div><p>
      Because the <code class="systemitem">initramfs</code> contains drivers, it needs
      to be updated whenever a new version of one of its drivers is available.
      This is done automatically when installing the package containing the
      driver update. YaST or zypper informs you about this by showing the
      output of the command that generates the
      <code class="systemitem">initramfs</code>. However, there are specific occasions
      when you need to regenerate an <code class="systemitem">initramfs</code>
      manually:
     </p><div class="variablelist "><dl class="variablelist"><dt id="var-initrd-regenerate-drivers"><span class="term ">Adding drivers because of hardware changes</span></dt><dd><p>
         If you need to change hardware, for example, hard disks, and this
         hardware requires different drivers to be in the kernel at boot time,
         you must update the <code class="systemitem">initramfs</code> file.
        </p><p>
         Open or create
         <code class="filename">/etc/dracut.conf.d/10-<em class="replaceable ">DRIVER</em>.conf</code>
         and add the following line (mind the leading blank space):
        </p><div class="verbatim-wrap"><pre class="screen">force_drivers+=" <em class="replaceable ">DRIVER1</em> "</pre></div><p>
         Replace <em class="replaceable ">DRIVER1</em> with the module name of the
         driver. If you need to add more than one driver, list them
         space-separated:
        </p><div class="verbatim-wrap"><pre class="screen">force_drivers+=" <em class="replaceable ">DRIVER1</em> <em class="replaceable ">DRIVER2</em> "</pre></div><p>
         Proceed with <a class="xref" href="cha-boot.html#pro-generate-initramfs" title="Generate an initramfs">Procedure 9.1, “Generate an initramfs”</a>.
        </p></dd><dt id="var-initrd-regenerate-raidroot"><span class="term ">Moving system directories to a RAID or LVM</span></dt><dd><p>
         Whenever you move swap files, or system directories like
         <code class="filename">/usr</code> in a running system to a RAID or logical
         volume, you need to create an <code class="systemitem">initramfs</code> that
         contains support for software RAID or LVM drivers.
        </p><p>
         To do so, create the respective entries in
         <code class="filename">/etc/fstab</code> and mount the new entries (for example
         with <code class="command">mount -a</code> and/or <code class="command">swapon -a</code>).
        </p><p>
         Proceed with <a class="xref" href="cha-boot.html#pro-generate-initramfs" title="Generate an initramfs">Procedure 9.1, “Generate an initramfs”</a>.
        </p></dd><dt id="var-initrd-regenerate-lvmadd"><span class="term ">Adding disks to an LVM group or Btrfs RAID containing the root
        file system</span></dt><dd><p>
         Whenever you add (or remove) a disk to a logical volume group
         or a Btrfs RAID containing the root file system, you need to create an
         <code class="systemitem">initramfs</code> that contains support for the
         enlarged volume. Follow the instructions at <a class="xref" href="cha-boot.html#pro-generate-initramfs" title="Generate an initramfs">Procedure 9.1, “Generate an initramfs”</a>.
        </p><p>
         Proceed with <a class="xref" href="cha-boot.html#pro-generate-initramfs" title="Generate an initramfs">Procedure 9.1, “Generate an initramfs”</a>.
        </p></dd><dt id="var-initrd-regenerate-kernelvars"><span class="term ">Changing kernel variables</span></dt><dd><p>
         If you change the values of kernel variables via the
         <code class="command">sysctl</code> interface by editing related files
         (<code class="filename">/etc/sysctl.conf</code> or
         <code class="filename">/etc/sysctl.d/*.conf</code>), the change will be lost on
         the next system reboot. Even if you load the values with <code class="command">sysctl
         --system</code> at runtime, the changes are not saved into the
         <code class="systemitem">initramfs</code> file. You need to update it by
         proceeding as outlined in <a class="xref" href="cha-boot.html#pro-generate-initramfs" title="Generate an initramfs">Procedure 9.1, “Generate an initramfs”</a>.
        </p></dd><dt id="id-1.4.4.3.4.5.4.5.3.5"><span class="term ">Adding or removing swap devices, re-creating swap area</span></dt><dd><p>
              Whenever you add or remove a swap device, or re-create a swap area
              with a different UUID, update the initramfs as
              outlined in <a class="xref" href="cha-boot.html#pro-generate-initramfs" title="Generate an initramfs">Procedure 9.1, “Generate an initramfs”</a>. You may also
              need to update <code class="option">GRUB_CMDLINE_*</code> variables that
              include the <code class="option">resume=</code> option in
              <code class="filename">/etc/default/grub</code>, and then regenerate
              <code class="filename">/boot/grub2/grub.cfg</code> as outlined in <a class="xref" href="cha-grub2.html#sec-grub2-cfg" title="12.2.1. The file /boot/grub2/grub.cfg">Section 12.2.1, “The file <code class="filename">/boot/grub2/grub.cfg</code>”</a>.
            </p></dd></dl></div><div class="procedure " id="pro-generate-initramfs"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 9.1: </span><span class="name">Generate an initramfs </span><a title="Permalink" class="permalink" href="cha-boot.html#pro-generate-initramfs">#</a></h6></div><div class="procedure-contents"><div id="id-1.4.4.3.4.5.4.5.4.2" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg" /><h6>Important</h6><p>
          All commands in the following procedure need to be executed as the
          <code class="systemitem">root</code> user.
        </p></div><ol class="procedure" type="1"><li class="step "><p>
        Enter your <code class="filename">/boot</code> directory:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cd /boot</pre></div></li><li class="step "><p>
        Generate a new <code class="systemitem">initramfs</code> file with
        <code class="command">dracut</code>, replacing 
        <em class="replaceable ">MY_INITRAMFS</em> with a file name of
        your choice:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>dracut <em class="replaceable ">MY_INITRAMFS</em></pre></div><p>
        Alternatively, run <code class="command">dracut -f</code>
        <em class="replaceable ">FILENAME</em>
        to replace an existing init file.
       </p></li><li class="step "><p>
        (Skip this step if you ran <code class="command">dracut -f</code> in the previous
        step.) Create a symbolic link from the <code class="systemitem">initramfs</code> 
        file you created in the previous step to <code class="systemitem">initrd</code>:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code> ln -sf <em class="replaceable ">MY_INITRAMFS</em> <code class="systemitem">initrd</code></pre></div></li></ol></div></div></div></div></div><div class="sect2 " id="sec-boot-initramfs"><div class="titlepage"><div><div><h3 class="title"><span class="number">9.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The init on initramfs phase</span> <a title="Permalink" class="permalink" href="cha-boot.html#sec-boot-initramfs">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>sec-boot-initramfs</li></ul></div></div></div></div><p>
    The temporary root file system mounted by the kernel from the
    <code class="systemitem">initramfs</code> contains the executable <code class="systemitem">systemd</code> (which
    is called <code class="systemitem">init</code> on
    <code class="systemitem">initramfs</code> in the following, also see <a class="xref" href="cha-boot.html#sec-boot-terminology" title="9.1. Terminology">Section 9.1, “Terminology”</a>. This program performs all actions needed
    to mount the proper root file system. It provides kernel functionality for
    the needed file system and device drivers for mass storage controllers with
    <code class="systemitem">udev</code>.
   </p><p>
    The main purpose of <code class="systemitem">init</code> on
    <code class="systemitem">initramfs</code> is to prepare the mounting of and access
    to the real root file system. Depending on your system configuration,
    <code class="systemitem">init</code> on <code class="systemitem">initramfs</code> is
    responsible for the following tasks.
   </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.4.3.4.6.4.1"><span class="term ">Loading kernel modules</span></dt><dd><p>
       Depending on your hardware configuration, special drivers may be needed
       to access the hardware components of your computer (the most important
       component being your hard disk). To access the final root file system,
       the kernel needs to load the proper file system drivers.
      </p></dd><dt id="id-1.4.4.3.4.6.4.2"><span class="term ">Providing block special files</span></dt><dd><p>
       The kernel generates device events depending on loaded modules.
       <code class="systemitem">udev</code> handles these events and
       generates the required special block files on a RAM file system in
       <code class="filename">/dev</code>. Without those special files, the file system
       and other devices would not be accessible.
      </p></dd><dt id="id-1.4.4.3.4.6.4.3"><span class="term ">Managing RAID and LVM setups</span></dt><dd><p>
       If you configured your system to hold the root file system under RAID or
       LVM, <code class="systemitem">init</code> on <code class="systemitem">initramfs</code>
       sets up LVM or RAID to enable access to the root file system later.
      </p></dd><dt id="id-1.4.4.3.4.6.4.4"><span class="term ">Managing the network configuration</span></dt><dd><p>
       If you configured your system to use a network-mounted root file system
       (mounted via NFS), <code class="systemitem">init</code> must make sure that the
       proper network drivers are loaded and that they are set up to allow
       access to the root file system.
      </p><p>
       If the file system resides on a network block device like iSCSI or SAN,
       the connection to the storage server is also set up by
       <code class="systemitem">init</code> on <code class="systemitem">initramfs</code>.
       <span class="productname"><span class="phrase">openSUSE Leap</span></span> supports booting from a secondary iSCSI target if the
       primary target is not available. .
      </p></dd></dl></div><div id="id-1.4.4.3.4.6.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note: Handling of mount failures</h6><p>
     If the root file system fails to mount from within the boot environment,
     it must be checked and repaired before the boot can continue. The file
     system checker will be automatically started for Ext3 and Ext4 file
     systems. The repair process is not automated for XFS and Btrfs file
     systems, and the user is presented with information describing the
     options available to repair the file system. When the file system has been
     successfully repaired, exiting the boot environment will cause the system
     to retry mounting the root file system. If successful, the boot will
     continue normally.
    </p></div><div class="sect3 " id="sec-boot-linuxrc-initramfs"><div class="titlepage"><div><div><h4 class="title"><span class="number">9.2.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The init on initramfs phase in the installation process</span> <a title="Permalink" class="permalink" href="cha-boot.html#sec-boot-linuxrc-initramfs">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit the source file for this section">Edit source</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>sec-boot-linuxrc-initramfs</li></ul></div></div></div></div><p>
     When <code class="systemitem">init</code> on <code class="systemitem">initramfs</code>
     is called during the initial boot as part of the installation process, its
     tasks differ from those mentioned above. The installation system also does
     not start <code class="systemitem">systemd</code> from
     <code class="systemitem">initramfs</code>—these tasks are performed by
     <code class="command">linuxrc</code>.
    </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.4.3.4.6.6.3.1"><span class="term ">Finding the installation medium</span></dt><dd><p>
        When starting the installation process, your machine loads an
        installation kernel and a special <code class="systemitem">init</code>
        containing the YaST installer. The YaST installer is running in a
        RAM file system and needs to have information about the location of the
        installation medium to access it for installing the operating system.
       </p></dd><dt id="id-1.4.4.3.4.6.6.3.2"><span class="term ">
       Initiating hardware recognition and loading appropriate kernel modules
      </span></dt><dd><p>
        As mentioned in <a class="xref" href="cha-boot.html#sec-boot-initrd" title="9.2.2.1. The initramfs file">Section 9.2.2.1, “The <code class="systemitem">initramfs</code> file”</a>, the boot process
        starts with a minimum set of drivers that can be used with most
        hardware configurations. On AArch64, POWER, and AMD64/Intel 64 machines,
        <code class="command">linuxrc</code> starts an initial hardware scanning process
        that determines the set of drivers suitable for your hardware
        configuration. On IBM Z, a list of drivers and their parameters
        needs to be provided, for example, via linuxrc or a parmfile.
       </p><p>
        These drivers are used to generate a custom
        <code class="systemitem">initramfs</code> that is needed to boot the
        system. If the modules are not needed for boot but for coldplug, the
        modules can be loaded with <code class="systemitem">systemd</code>; for more information, see <a class="xref" href="cha-systemd.html#sec-boot-systemd-advanced-kernel-modules" title="10.6.4. Loading kernel modules">Section 10.6.4, “Loading kernel modules”</a>.
       </p></dd><dt id="id-1.4.4.3.4.6.6.3.3"><span class="term ">Loading the installation system</span></dt><dd><p>
        When the hardware is properly recognized, the appropriate drivers are
        loaded. The <code class="systemitem">udev</code> program
        creates the special device files and <code class="command">linuxrc</code>
        starts the installation system with the YaST installer.
       </p></dd><dt id="id-1.4.4.3.4.6.6.3.4"><span class="term ">Starting YaST</span></dt><dd><p>
        Finally, <code class="command">linuxrc</code> starts YaST, which starts
        the package installation and the system configuration.
       </p></dd></dl></div></div></div><div class="sect2 " id="sec-boot-systemd"><div class="titlepage"><div><div><h3 class="title"><span class="number">9.2.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The systemd phase</span> <a title="Permalink" class="permalink" href="cha-boot.html#sec-boot-systemd">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>sec-boot-systemd</li></ul></div></div></div></div><p>
    After the <span class="quote">“<span class="quote ">real</span>”</span> root file system has been found, it is
    checked for errors and mounted. If this is successful, the
    <code class="systemitem">initramfs</code> is cleaned and the <code class="systemitem">systemd</code> daemon on
    the root file system is executed. <code class="systemitem">systemd</code> is Linux's system and service
    manager. It is the parent process that is started as PID 1 and acts as an
    init system which brings up and maintains user space services. See <a class="xref" href="cha-systemd.html" title="Chapter 10. The systemd daemon">Chapter 10, <em>The <code class="systemitem">systemd</code> daemon</em></a> for details.
   </p></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha-systemd.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 10 </span>The <code class="systemitem">systemd</code> daemon</span></a><a class="nav-link" href="cha-64bit.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 8 </span>32-bit and 64-bit applications in a 64-bit system environment</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2024 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>