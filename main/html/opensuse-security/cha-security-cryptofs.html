<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Encrypting partitions and files | Security and Hardening Guide | openSUSE Leap 15.7</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Encrypting partitions and files | openSUSE Leap 15.7" />
<meta name="description" content="Encrypting files, partitions, and entire disks prevents unauthorized access to your data and protects your confidential files and documents." />
<meta name="product-name" content="openSUSE Leap" />
<meta name="product-number" content="15.7" />
<meta name="book-title" content="Security and Hardening Guide" />
<meta name="chapter-title" content="Chapter 12. Encrypting partitions and files" />
<meta name="tracker-url" content="https://bugzilla.opensuse.org/enter_bug.cgi" />
<meta name="tracker-type" content="bsc" />
<meta name="tracker-bsc-assignee" content="fs@suse.com" />
<meta name="tracker-bsc-component" content="Documentation" />
<meta name="tracker-bsc-product" content="openSUSE Distribution" />
<meta name="tracker-bsc-version" content="Leap 15.4" />
<meta property="og:title" content="Encrypting partitions and files | openSUSE Leap 15.7" />
<meta property="og:description" content="Encrypting files, partitions, and entire disks prevents unauthorized access to your data and protects your confidential files and documents." />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Encrypting partitions and files | openSUSE Leap 15.7" />
<meta name="twitter:description" content="Encrypting files, partitions, and entire disks prevents unauthorized access to your data and protects your confidential files and documents." />
<link rel="home" href="index.html" title="openSUSE Leap Documentation" /><link rel="up" href="part-local-security.html" title="Part II. Local security" /><link rel="prev" href="sec-sec-file-management.html" title="Chapter 11. File management" /><link rel="next" href="cha-configure-cryptctl.html" title="Chapter 13. Storage encryption for hosted applications with cryptctl" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Security and Hardening Guide"><span class="book-icon">Security and Hardening Guide</span></a><span> › </span><a class="crumb" href="part-local-security.html">Local security</a><span> › </span><a class="crumb" href="cha-security-cryptofs.html">Encrypting partitions and files</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Security and Hardening Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="preface-security.html"><span class="number"> </span><span class="name">Preface</span></a></li><li class="inactive"><a href="cha-security.html"><span class="number">1 </span><span class="name">Security and confidentiality</span></a></li><li class="inactive"><a href="part-auth.html"><span class="number">I </span><span class="name">Authentication</span></a><ol><li class="inactive"><a href="cha-pam.html"><span class="number">2 </span><span class="name">Authentication with PAM</span></a></li><li class="inactive"><a href="cha-nis.html"><span class="number">3 </span><span class="name">Using NIS</span></a></li><li class="inactive"><a href="cha-security-auth.html"><span class="number">4 </span><span class="name">Setting up authentication clients using YaST</span></a></li><li class="inactive"><a href="cha-security-ldap.html"><span class="number">5 </span><span class="name">LDAP with 389 Directory Server</span></a></li><li class="inactive"><a href="cha-security-kerberos.html"><span class="number">6 </span><span class="name">Network authentication with Kerberos</span></a></li><li class="inactive"><a href="cha-security-ad.html"><span class="number">7 </span><span class="name">Active Directory support</span></a></li><li class="inactive"><a href="cha-security-freeradius.html"><span class="number">8 </span><span class="name">Setting up a freeRADIUS server</span></a></li></ol></li><li class="inactive"><a href="part-local-security.html"><span class="number">II </span><span class="name">Local security</span></a><ol><li class="inactive"><a href="cha-physical-security.html"><span class="number">9 </span><span class="name">Physical security</span></a></li><li class="inactive"><a href="sec-sec-software-management.html"><span class="number">10 </span><span class="name">Software management</span></a></li><li class="inactive"><a href="sec-sec-file-management.html"><span class="number">11 </span><span class="name">File management</span></a></li><li class="inactive"><a href="cha-security-cryptofs.html"><span class="number">12 </span><span class="name">Encrypting partitions and files</span></a></li><li class="inactive"><a href="cha-configure-cryptctl.html"><span class="number">13 </span><span class="name">Storage encryption for hosted applications with cryptctl</span></a></li><li class="inactive"><a href="sec-sec-user-management.html"><span class="number">14 </span><span class="name">User management</span></a></li><li class="inactive"><a href="cha-sec-cron-at.html"><span class="number">15 </span><span class="name">Restricting <code class="systemitem">cron</code> and <code class="systemitem">at</code></span></a></li><li class="inactive"><a href="cha-spectre.html"><span class="number">16 </span><span class="name">Spectre/Meltdown checker</span></a></li><li class="inactive"><a href="cha-security-yast-security.html"><span class="number">17 </span><span class="name">Configuring security settings with YaST</span></a></li><li class="inactive"><a href="cha-security-polkit.html"><span class="number">18 </span><span class="name">The Polkit authentication framework</span></a></li><li class="inactive"><a href="cha-security-acls.html"><span class="number">19 </span><span class="name">Access control lists in Linux</span></a></li><li class="inactive"><a href="cha-aide.html"><span class="number">20 </span><span class="name">Intrusion detection with AIDE</span></a></li></ol></li><li class="inactive"><a href="part-network-security.html"><span class="number">III </span><span class="name">Network security</span></a><ol><li class="inactive"><a href="cha-xauth.html"><span class="number">21 </span><span class="name">X Window System and X authentication</span></a></li><li class="inactive"><a href="cha-ssh.html"><span class="number">22 </span><span class="name">Securing network operations with OpenSSH</span></a></li><li class="inactive"><a href="cha-security-firewall.html"><span class="number">23 </span><span class="name">Masquerading and firewalls</span></a></li><li class="inactive"><a href="cha-security-vpnserver.html"><span class="number">24 </span><span class="name">Configuring a VPN server</span></a></li><li class="inactive"><a href="cha-security-xca.html"><span class="number">25 </span><span class="name">Managing a PKI with XCA, X certificate and key manager</span></a></li><li class="inactive"><a href="cha-sec-sysctl.html"><span class="number">26 </span><span class="name">Improving network security with <code class="command">sysctl</code> variables</span></a></li></ol></li><li class="inactive"><a href="part-apparmor.html"><span class="number">IV </span><span class="name">Confining privileges with <span class="phrase">AppArmor</span></span></a><ol><li class="inactive"><a href="cha-apparmor-intro.html"><span class="number">27 </span><span class="name">Introducing <span class="phrase">AppArmor</span></span></a></li><li class="inactive"><a href="cha-apparmor-start.html"><span class="number">28 </span><span class="name">Getting started</span></a></li><li class="inactive"><a href="cha-apparmor-concept.html"><span class="number">29 </span><span class="name">Immunizing programs</span></a></li><li class="inactive"><a href="cha-apparmor-profiles.html"><span class="number">30 </span><span class="name">Profile components and syntax</span></a></li><li class="inactive"><a href="cha-apparmor-repos.html"><span class="number">31 </span><span class="name"><span class="phrase">AppArmor</span> profile repositories</span></a></li><li class="inactive"><a href="cha-apparmor-yast.html"><span class="number">32 </span><span class="name">Building and managing profiles with YaST</span></a></li><li class="inactive"><a href="cha-apparmor-commandline.html"><span class="number">33 </span><span class="name">Building profiles from the command line</span></a></li><li class="inactive"><a href="cha-apparmor-hat.html"><span class="number">34 </span><span class="name">Profiling your Web applications using ChangeHat</span></a></li><li class="inactive"><a href="cha-apparmor-pam.html"><span class="number">35 </span><span class="name">Confining users with <code class="systemitem">pam_apparmor</code></span></a></li><li class="inactive"><a href="cha-apparmor-managing.html"><span class="number">36 </span><span class="name">Managing profiled applications</span></a></li><li class="inactive"><a href="cha-apparmor-support.html"><span class="number">37 </span><span class="name">Support</span></a></li><li class="inactive"><a href="cha-apparmor-glossary.html"><span class="number">38 </span><span class="name"><span class="phrase">AppArmor</span> glossary</span></a></li></ol></li><li class="inactive"><a href="part-selinux.html"><span class="number">V </span><span class="name">SELinux</span></a><ol><li class="inactive"><a href="cha-selinux.html"><span class="number">39 </span><span class="name">Configuring SELinux</span></a></li></ol></li><li class="inactive"><a href="part-audit.html"><span class="number">VI </span><span class="name">The Linux Audit Framework</span></a><ol><li class="inactive"><a href="cha-audit-comp.html"><span class="number">40 </span><span class="name">Understanding Linux audit</span></a></li><li class="inactive"><a href="cha-audit-setup.html"><span class="number">41 </span><span class="name">Setting up the Linux audit framework</span></a></li><li class="inactive"><a href="cha-audit-scenarios.html"><span class="number">42 </span><span class="name">Introducing an audit rule set</span></a></li><li class="inactive"><a href="cha-audit-moreinfo.html"><span class="number">43 </span><span class="name">Useful resources</span></a></li></ol></li><li class="inactive"><a href="bk04apa.html"><span class="number">A </span><span class="name">GNU licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 11. File management" href="sec-sec-file-management.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 13. Storage encryption for hosted applications with cryptctl" href="cha-configure-cryptctl.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Security and Hardening Guide"><span class="book-icon">Security and Hardening Guide</span></a><span> › </span><a class="crumb" href="part-local-security.html">Local security</a><span> › </span><a class="crumb" href="cha-security-cryptofs.html">Encrypting partitions and files</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 11. File management" href="sec-sec-file-management.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 13. Storage encryption for hosted applications with cryptctl" href="cha-configure-cryptctl.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha-security-cryptofs"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname "><span class="productname"><span class="phrase">openSUSE Leap</span></span></span> <span class="productnumber "><span class="productnumber"><span class="phrase">15.7</span></span></span></div><div><h2 class="title"><span class="number">12 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Encrypting partitions and files</span> <a title="Permalink" class="permalink" href="cha-security-cryptofs.html#">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptofs.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_cryptofs.xml</li><li><span class="ds-label">ID: </span>cha-security-cryptofs</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha-security-cryptofs.html#sec-security-cryptofs-y2"><span class="number">12.1 </span><span class="name">Setting up an encrypted file system with YaST</span></a></span></dt><dt><span class="sect1"><a href="cha-security-cryptofs.html#sec-security-cryptofs-gpg"><span class="number">12.2 </span><span class="name">Encrypting files with GPG</span></a></span></dt><dt><span class="sect1"><a href="cha-security-cryptofs.html#sec-security-cryptofs-rage"><span class="number">12.3 </span><span class="name">Encrypting files with Rage</span></a></span></dt></dl></div></div><p>
  Encrypting files, partitions, and entire disks prevents unauthorized access to your data and protects your confidential files and documents.
 </p><p>
  You can choose between the following encryption options:
 </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.6.5.5.5.1"><span class="term ">Encrypting a hard disk partition</span></dt><dd><p>
     It is possible to create an encrypted partition with YaST during
     installation or in an already installed system. For further info, see
     <a class="xref" href="cha-security-cryptofs.html#sec-security-cryptofs-y2-part-inst" title="12.1.1. Creating an encrypted partition during installation">Section 12.1.1, “Creating an encrypted partition during installation”</a> and
     <a class="xref" href="cha-security-cryptofs.html#sec-security-cryptofs-y2-part-run" title="12.1.2. Creating an encrypted partition on a running system">Section 12.1.2, “Creating an encrypted partition on a running system”</a>. This
     option can also be used for removable media, such as external hard
     disks, as described in
     <a class="xref" href="cha-security-cryptofs.html#sec-security-cryptofs-y2-removables" title="12.1.3. Encrypting the content of removable media">Section 12.1.3, “Encrypting the content of removable media”</a>.
    </p></dd><dt id="id-1.6.5.5.5.2"><span class="term ">Encrypting single files with GPG</span></dt><dd><p>
     To quickly encrypt one or more files, you can use the GPG tool. See
     <a class="xref" href="cha-security-cryptofs.html#sec-security-cryptofs-gpg" title="12.2. Encrypting files with GPG">Section 12.2, “Encrypting files with GPG”</a> for more information.
    </p></dd><dt id="id-1.6.5.5.5.3"><span class="term ">Encrypting single files with Rage</span></dt><dd><p>
     You can use the Rage encryption tool to encrypt one or more files. See
     <a class="xref" href="cha-security-cryptofs.html#sec-security-cryptofs-rage" title="12.3. Encrypting files with Rage">Section 12.3, “Encrypting files with Rage”</a> for more information.
    </p></dd></dl></div><div id="id-1.6.5.5.6" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: Encryption offers limited protection</h6><p>
   Encryption methods described in this chapter cannot protect your running
   system from being compromised. After the encrypted volume is successfully
   mounted, everybody with appropriate permissions can access it. However,
   encrypted media are useful in case of loss or theft of your computer, or to
   prevent unauthorized individuals from reading your confidential data.
  </p></div><div class="sect1 " id="sec-security-cryptofs-y2"><div class="titlepage"><div><div><h2 class="title"><span class="number">12.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Setting up an encrypted file system with YaST</span> <a title="Permalink" class="permalink" href="cha-security-cryptofs.html#sec-security-cryptofs-y2">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptofs.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_cryptofs.xml</li><li><span class="ds-label">ID: </span>sec-security-cryptofs-y2</li></ul></div></div></div></div><p>
   Use YaST to encrypt partitions or parts of your file system during
   installation or in an already installed system. However, encrypting a
   partition in an already-installed system is more difficult, because you
   need to resize and change existing partitions. In such cases, it may be
   more convenient to create an encrypted file of a defined size, in which
   to <span class="emphasis"><em>store</em></span> other files or parts of your file system.
   To encrypt an entire partition, dedicate a partition for encryption in
   the partition layout. The standard partitioning proposal, as suggested by
   YaST, does not include an encrypted partition by default. Add an
   encrypted partition manually in the partitioning dialog.
  </p><div class="sect2 " id="sec-security-cryptofs-y2-part-inst"><div class="titlepage"><div><div><h3 class="title"><span class="number">12.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Creating an encrypted partition during installation</span> <a title="Permalink" class="permalink" href="cha-security-cryptofs.html#sec-security-cryptofs-y2-part-inst">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptofs.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_cryptofs.xml</li><li><span class="ds-label">ID: </span>sec-security-cryptofs-y2-part-inst</li></ul></div></div></div></div><div id="id-1.6.5.5.7.3.2" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: Password input</h6><p>
     Make sure to memorize the password for your encrypted partitions well.
     Without that password, you cannot access or restore the encrypted data.
    </p></div><p>
    The YaST expert dialog for partitioning offers the options needed
    for creating an encrypted partition. To create a new encrypted partition
    proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Run the YaST Expert Partitioner with <span class="guimenu ">System</span> › <span class="guimenu ">Partitioner</span>.
     </p></li><li class="step "><p>
      Select a hard disk, click <span class="guimenu ">Add</span>, and select a primary
      or an extended partition.
     </p></li><li class="step "><p>
      Select the partition size or the region to use on the disk.
     </p></li><li class="step "><p>
      Select the file system, and mount point of this partition.
     </p></li><li class="step "><p>
      Activate the <span class="guimenu ">Encrypt device</span> check box.
     </p><div id="id-1.6.5.5.7.3.4.5.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note: Additional software required</h6><p>
       After checking <span class="guimenu ">Encrypt device</span>, a pop-up window
       asking for installing additional software may appear. Confirm to
       install all the required packages to ensure that the encrypted
       partition works well.
      </p></div></li><li class="step "><p>
      If the encrypted file system needs to be mounted when necessary,
      enable <span class="guimenu ">Do not mount partition</span> in the <span class="guimenu ">Fstab
      Options</span>. Otherwise enable <span class="guimenu ">Mount partition</span>
      and enter the mount point.
     </p></li><li class="step "><p>
      Click <span class="guimenu ">Next</span> and enter a password which is used to
      encrypt this partition. This password is not displayed. To prevent
      typing errors, you need to enter the password twice.
     </p></li><li class="step "><p>
      Complete the process by clicking <span class="guimenu ">Finish</span>. The
      newly encrypted partition is now created.
     </p></li></ol></div></div><p>
    During the boot process, the operating system asks for the password
    before mounting any encrypted partition which is set to be auto-mounted
    in <code class="filename">/etc/fstab</code>. Such a partition is then available
    to all users when it has been mounted.
   </p><p>
    To skip mounting the encrypted partition during start-up, press
    <span class="keycap">Enter</span> when prompted for the password. Then decline
    the offer to enter the password again. In this case, the encrypted file
    system is not mounted and the operating system continues booting,
    blocking access to your data.
   </p><p>
    To mount an encrypted partition which is not mounted
    during the boot process, open a file manager and click the partition
    entry in the pane listing common places on your file system. You are
    prompted for a password and the partition is mounted.
   </p><p>
    When you are installing your system on a machine where partitions
    already exist, you can also decide to encrypt an existing partition
    during installation. In this case follow the description in
    <a class="xref" href="cha-security-cryptofs.html#sec-security-cryptofs-y2-part-run" title="12.1.2. Creating an encrypted partition on a running system">Section 12.1.2, “Creating an encrypted partition on a running system”</a> and be aware that
    this action destroys all data on the existing partition.
   </p></div><div class="sect2 " id="sec-security-cryptofs-y2-part-run"><div class="titlepage"><div><div><h3 class="title"><span class="number">12.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Creating an encrypted partition on a running system</span> <a title="Permalink" class="permalink" href="cha-security-cryptofs.html#sec-security-cryptofs-y2-part-run">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptofs.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_cryptofs.xml</li><li><span class="ds-label">ID: </span>sec-security-cryptofs-y2-part-run</li></ul></div></div></div></div><div id="id-1.6.5.5.7.4.2" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: Activating encryption on a running system</h6><p>
     It is also possible to create encrypted partitions on a running system.
     However, encrypting an existing partition destroys all data on it, and
     requires re-sizing and restructuring of existing partitions.
    </p></div><p>
    On a running system, select <span class="guimenu ">System</span> › <span class="guimenu ">Partitioner</span> in the YaST control
    center. Click <span class="guimenu ">Yes</span> to proceed. In the <span class="guimenu ">Expert
    Partitioner</span>, select the partition to encrypt and click
    <span class="guimenu ">Edit</span>. The rest of the procedure is the same as
    described in <a class="xref" href="cha-security-cryptofs.html#sec-security-cryptofs-y2-part-inst" title="12.1.1. Creating an encrypted partition during installation">Section 12.1.1, “Creating an encrypted partition during installation”</a>.
   </p></div><div class="sect2 " id="sec-security-cryptofs-y2-removables"><div class="titlepage"><div><div><h3 class="title"><span class="number">12.1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Encrypting the content of removable media</span> <a title="Permalink" class="permalink" href="cha-security-cryptofs.html#sec-security-cryptofs-y2-removables">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptofs.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_cryptofs.xml</li><li><span class="ds-label">ID: </span>sec-security-cryptofs-y2-removables</li></ul></div></div></div></div><p>
    YaST treats removable media (like external hard disks or flash
    disks) the same as any other storage device. Virtual disks or partitions on
    external media can be encrypted as described above. However, you should disable
    mounting at boot time, because removable media is connected
    when the system is up and running.
   </p><p>
    If you encrypted your removable device with YaST, the GNOME desktop
    automatically recognizes the encrypted partition and prompts for the
    password when the device is detected. If you plug in a FAT-formatted
    removable device when running GNOME, the desktop user entering the
    password automatically becomes the owner of the device.
    For devices with a file system other than FAT, change the
    ownership explicitly for users other than <code class="systemitem">root</code> to give them
    read-write access to the device.
   </p></div></div><div class="sect1 " id="sec-security-cryptofs-gpg"><div class="titlepage"><div><div><h2 class="title"><span class="number">12.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Encrypting files with GPG</span> <a title="Permalink" class="permalink" href="cha-security-cryptofs.html#sec-security-cryptofs-gpg">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptofs.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_cryptofs.xml</li><li><span class="ds-label">ID: </span>sec-security-cryptofs-gpg</li></ul></div></div></div></div><p>
   GNU Privacy Guard (GPG) encryption software can be used to encrypt individual files and documents.
  </p><p>
   To encrypt a file with GPG, you need to generate a key pair first. To do
   this, run the <code class="command">gpg --gen-key</code> and follow the on-screen
   instructions. When generating the key pair, GPG creates a user ID (UID) to
   identify the key based on your real name, comments and email address. You
   need this UID (or just a part of it like your first name or email address)
   to specify the key you want to use to encrypt a file. To find the UID of
   an existing key, use the <code class="command">gpg --list-keys</code> command. To
   encrypt a file use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>gpg -e -a --cipher-algo AES256 -r <em class="replaceable ">UID</em> <em class="replaceable ">FILE</em></pre></div><p>
    Replace <em class="replaceable ">UID</em> with part of the UID (for example,
    your first name) and <em class="replaceable ">FILE</em> with the file you
    want to encrypt. For example:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>gpg -e -a --cipher-algo AES256 -r Tux secret.txt</pre></div><p>
    This command creates an encrypted version of the specified file
    recognizable by the <code class="filename">.asc</code> file extension (in
    this example, it is <code class="filename">secret.txt.asc</code>).
  </p><p>
    <code class="command">-a</code> formats the file as ASCII text, if you want the
    contents to be copy-able. Omit <code class="command">-a</code> to create a binary
    file, which in the above example would be <code class="filename">secret.txt.gpg</code>.
  </p><p>
    To decrypt an encrypted file, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>gpg -d -o <em class="replaceable ">DECRYPTED_FILE</em> <em class="replaceable ">ENCRYPTED_FILE</em></pre></div><p>
    Replace <em class="replaceable ">DECRYPTED_FILE</em> with the desired name for
    the decrypted file and <em class="replaceable ">ENCRYPTED_FILE</em> with the
    encrypted file you want to decrypt.
  </p><p>
    Keep in mind that the encrypted file can be decrypted using the same
    key that was used for encryption. To share an encrypted file
    with another person, you have to use that person's public key to encrypt
    the file.
  </p></div><div class="sect1 " id="sec-security-cryptofs-rage"><div class="titlepage"><div><div><h2 class="title"><span class="number">12.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Encrypting files with Rage</span> <a title="Permalink" class="permalink" href="cha-security-cryptofs.html#sec-security-cryptofs-rage">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptofs.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_cryptofs.xml</li><li><span class="ds-label">ID: </span>sec-security-cryptofs-rage</li></ul></div></div></div></div><p>
   Rage is a secure file encryption software to encrypt files. It has
   keys that are easy to exchange with other people, and has secure defaults
   to prevent accidental misuse or leaks of sensitive data. We recommend Rage to encrypt files.
  </p><p>You can install Rage with:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">zypper install rage-encryption</code></pre></div><p> The recipient must first generate a key pair to encrypt a file with Rage:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rage-keygen -o ~/rage.key 2 ~/rage.pub</pre></div><p>Two files are created; <span class="emphasis"><em>rage.pub</em></span> and <span class="emphasis"><em>rage.key</em></span>.
   </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.6.5.5.9.8.1"><span class="term "><code class="literal">rage.pub example</code>
    </span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>cat file.pub
    Public key: age17e4g67cs07jk3lmylyq6gduv26uf7tz7nm9jrsaxn8xxx9uc9amsdg4a5e</pre></div></dd><dt id="id-1.6.5.5.9.8.2"><span class="term "><code class="literal">rage.key example</code>
    </span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code> cat file.key
    # created: 2023-05-30T16:29:20+05:30
    # public key: age17e4g67cs07jk3lmylyq6gduv26uf7tz7nm9jrsaxn8xxx9uc9amsdg4a5e</pre></div></dd></dl></div><div id="id-1.6.5.5.9.9" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg" /><h6>Important</h6><p><span class="emphasis"><em>file.key</em></span> is a private key and should be kept confidential.</p></div><div class="variablelist "><dl class="variablelist"><dt id="id-1.6.5.5.9.10.1"><span class="term ">Encrypt</span></dt><dd><p> To encrypt a file, you need the generated public key:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rage -e -r <em class="replaceable ">PUBLIC_KEY</em> -o <em class="replaceable ">ENCRYPTED_FILE</em> <em class="replaceable ">FILE</em></pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rage -e -r age17e4g67cs07jk3lmylyq6gduv26uf7tz7nm9jrsaxn8xxx9uc9amsdg4a5e -o test.txt.age test.txt</pre></div></dd><dt id="id-1.6.5.5.9.10.2"><span class="term ">Decrypt</span></dt><dd><p>
     The encrypted file can be decrypted by the recipient who has the corresponding private key.
   To share an encrypted file with another person, you have to use that person's public key to encrypt the file.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rage -d -i ~/rage.key -o <em class="replaceable ">DECRYPTED_FILE</em> <em class="replaceable ">ENCRYPTED_FILE</em> <em class="replaceable ">FILE</em></pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rage -d -i ~/rage.key -o test.txt.decrypted test.txt.age</pre></div></dd><dt id="id-1.6.5.5.9.10.3"><span class="term ">Passphrases</span></dt><dd><p> You can encrypt files with passphrases with the <code class="envar">-p</code> or <code class="envar">--passphrase</code> arguments.
   By default, Rage automatically generates a secure passphrase, but you also have the option to enter a passphrase.  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rage -e -p -o <em class="replaceable ">ENCRYPTED_FILE</em> <em class="replaceable ">FILE</em></pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rage -e -p -o test.txt.age test.txt</pre></div></dd><dt id="id-1.6.5.5.9.10.4"><span class="term ">SSH</span></dt><dd><p> You can encrypt files with SSH (Secure Socket Shell) keys instead of Rage keys. Rage supports <span class="emphasis"><em>ssh-rsa</em></span> and <span class="emphasis"><em>ssh-ed25519</em></span>  public keys,and decrypting with the respective private key file. <span class="emphasis"><em>ssh-agent</em></span> and <span class="emphasis"><em>ssh-sk(FIDO)</em></span> are not supported. </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rage -e -p -o <em class="replaceable ">ENCRYPTED_FILE</em> <em class="replaceable ">FILE</em></pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rage -e -p -o test.txt.age test.txt</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code> ssh-keygen -t ed25519</pre></div><p>To encrypt:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code> rage -e -a -R <em class="replaceable ">PUBLIC_KEY_FILE</em> -o <em class="replaceable ">ENCRYPTED_FILE</em> <em class="replaceable ">FILE</em></pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code> rage -e -a -R id_ed25519.pub -o test.txt.age test.txt</pre></div><p>To decrypt:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code> rage -d -i <em class="replaceable ">SSH_PRIVATE_KEY_FILE</em> -o <em class="replaceable ">DECRYPTED_FILE</em><em class="replaceable ">ENCRYPTED_FILE</em></pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code> rage -d -i id_ed25519 -o test.txt.decrypted test.txt.age</pre></div><div id="id-1.6.5.5.9.10.4.2.15" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg" /><h6>Important</h6><p>You must enter the path to the key and files.</p></div></dd><dt id="id-1.6.5.5.9.10.5"><span class="term ">Multiple identities</span></dt><dd><p> Rage can encrypt to multiple identities at the same time. Any of the recipient's private keys can be used to decrypt the file.</p><div class="verbatim-wrap"><pre class="screen">rage -e -a -R <em class="replaceable ">FIRST_SSH_PUBLIC_KEY</em>-r <em class="replaceable ">FIRST_RAGE_PUBLIC_KEY</em>... -o <em class="replaceable ">ENCRYPTED_FILE</em> <em class="replaceable ">FILE</em></pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">rage -e -a -R id_ed25519.pub -r age1h8equ4vs5pyp8ykw0z8m9n8m3psy6swme52ztth0v66frgu65ussm8gq0t -o -r age1y2lc7x59jcqvrpf3ppmnj3f93ytaegfkdnl5vrdyv83l8ekcae4sexgwkg test.txt.age test.txt</pre></div></dd></dl></div><div id="id-1.6.5.5.9.11" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg" /><h6>Tip</h6><p>
   You can use the <code class="envar">-h</code> or <code class="envar">--help</code> argument to list all the Rage command arguments.
   </p></div><div class="sect2 " id="sec-security-cryptofs-rage-additional-resources"><div class="titlepage"><div><div><h3 class="title"><span class="number">12.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Additional Resources</span> <a title="Permalink" class="permalink" href="cha-security-cryptofs.html#sec-security-cryptofs-rage-additional-resources">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_cryptofs.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_cryptofs.xml</li><li><span class="ds-label">ID: </span>sec-security-cryptofs-rage-additional-resources</li></ul></div></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
          <a class="link" href="https://github.com/str4d/rage" target="_blank">https://github.com/str4d/rage</a> Rage Encryption GitHub repository
        </p></li><li class="listitem "><p>
          <a class="link" href="https://github.com/C2SP/C2SP/blob/main/age.md" target="_blank">https://github.com/C2SP/C2SP/blob/main/age.md</a> Age Encryption GitHub repository
        </p></li></ul></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha-configure-cryptctl.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 13 </span>Storage encryption for hosted applications with cryptctl</span></a><a class="nav-link" href="sec-sec-file-management.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 11 </span>File management</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2024 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>