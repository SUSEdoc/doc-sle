<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configuring a VPN server | Security and Hardening Guide | openSUSE Leap 15.7</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Configuring a VPN server | openSUSE Leap 15.7" />
<meta name="description" content="Internet connections are easily available and affordable. However, not all connections are secure. Using a Virtual Private Network (VPN), you can create a secu…" />
<meta name="product-name" content="openSUSE Leap" />
<meta name="product-number" content="15.7" />
<meta name="book-title" content="Security and Hardening Guide" />
<meta name="chapter-title" content="Chapter 24. Configuring a VPN server" />
<meta name="tracker-url" content="https://bugzilla.opensuse.org/enter_bug.cgi" />
<meta name="tracker-type" content="bsc" />
<meta name="tracker-bsc-assignee" content="fs@suse.com" />
<meta name="tracker-bsc-component" content="Documentation" />
<meta name="tracker-bsc-product" content="openSUSE Distribution" />
<meta name="tracker-bsc-version" content="Leap 15.4" />
<meta property="og:title" content="Configuring a VPN server | openSUSE Leap 15.7" />
<meta property="og:description" content="Internet connections are easily available and affordable. However, not all connections are secure. Using a Virtual Private Network (VPN), you can create a secu…" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Configuring a VPN server | openSUSE Leap 15.7" />
<meta name="twitter:description" content="Internet connections are easily available and affordable. However, not all connections are secure. Using a Virtual Private Network (VPN), you can create a secu…" />
<link rel="home" href="index.html" title="openSUSE Leap Documentation" /><link rel="up" href="part-network-security.html" title="Part III. Network security" /><link rel="prev" href="cha-security-firewall.html" title="Chapter 23. Masquerading and firewalls" /><link rel="next" href="cha-security-xca.html" title="Chapter 25. Managing a PKI with XCA, X certificate and key manager" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Security and Hardening Guide"><span class="book-icon">Security and Hardening Guide</span></a><span> › </span><a class="crumb" href="part-network-security.html">Network security</a><span> › </span><a class="crumb" href="cha-security-vpnserver.html">Configuring a VPN server</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Security and Hardening Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="preface-security.html"><span class="number"> </span><span class="name">Preface</span></a></li><li class="inactive"><a href="cha-security.html"><span class="number">1 </span><span class="name">Security and confidentiality</span></a></li><li class="inactive"><a href="part-auth.html"><span class="number">I </span><span class="name">Authentication</span></a><ol><li class="inactive"><a href="cha-pam.html"><span class="number">2 </span><span class="name">Authentication with PAM</span></a></li><li class="inactive"><a href="cha-nis.html"><span class="number">3 </span><span class="name">Using NIS</span></a></li><li class="inactive"><a href="cha-security-auth.html"><span class="number">4 </span><span class="name">Setting up authentication clients using YaST</span></a></li><li class="inactive"><a href="cha-security-ldap.html"><span class="number">5 </span><span class="name">LDAP with 389 Directory Server</span></a></li><li class="inactive"><a href="cha-security-kerberos.html"><span class="number">6 </span><span class="name">Network authentication with Kerberos</span></a></li><li class="inactive"><a href="cha-security-ad.html"><span class="number">7 </span><span class="name">Active Directory support</span></a></li><li class="inactive"><a href="cha-security-freeradius.html"><span class="number">8 </span><span class="name">Setting up a freeRADIUS server</span></a></li></ol></li><li class="inactive"><a href="part-local-security.html"><span class="number">II </span><span class="name">Local security</span></a><ol><li class="inactive"><a href="cha-physical-security.html"><span class="number">9 </span><span class="name">Physical security</span></a></li><li class="inactive"><a href="sec-sec-software-management.html"><span class="number">10 </span><span class="name">Software management</span></a></li><li class="inactive"><a href="sec-sec-file-management.html"><span class="number">11 </span><span class="name">File management</span></a></li><li class="inactive"><a href="cha-security-cryptofs.html"><span class="number">12 </span><span class="name">Encrypting partitions and files</span></a></li><li class="inactive"><a href="cha-configure-cryptctl.html"><span class="number">13 </span><span class="name">Storage encryption for hosted applications with cryptctl</span></a></li><li class="inactive"><a href="sec-sec-user-management.html"><span class="number">14 </span><span class="name">User management</span></a></li><li class="inactive"><a href="cha-sec-cron-at.html"><span class="number">15 </span><span class="name">Restricting <code class="systemitem">cron</code> and <code class="systemitem">at</code></span></a></li><li class="inactive"><a href="cha-spectre.html"><span class="number">16 </span><span class="name">Spectre/Meltdown checker</span></a></li><li class="inactive"><a href="cha-security-yast-security.html"><span class="number">17 </span><span class="name">Configuring security settings with YaST</span></a></li><li class="inactive"><a href="cha-security-polkit.html"><span class="number">18 </span><span class="name">The Polkit authentication framework</span></a></li><li class="inactive"><a href="cha-security-acls.html"><span class="number">19 </span><span class="name">Access control lists in Linux</span></a></li><li class="inactive"><a href="cha-aide.html"><span class="number">20 </span><span class="name">Intrusion detection with AIDE</span></a></li></ol></li><li class="inactive"><a href="part-network-security.html"><span class="number">III </span><span class="name">Network security</span></a><ol><li class="inactive"><a href="cha-xauth.html"><span class="number">21 </span><span class="name">X Window System and X authentication</span></a></li><li class="inactive"><a href="cha-ssh.html"><span class="number">22 </span><span class="name">Securing network operations with OpenSSH</span></a></li><li class="inactive"><a href="cha-security-firewall.html"><span class="number">23 </span><span class="name">Masquerading and firewalls</span></a></li><li class="inactive"><a href="cha-security-vpnserver.html"><span class="number">24 </span><span class="name">Configuring a VPN server</span></a></li><li class="inactive"><a href="cha-security-xca.html"><span class="number">25 </span><span class="name">Managing a PKI with XCA, X certificate and key manager</span></a></li><li class="inactive"><a href="cha-sec-sysctl.html"><span class="number">26 </span><span class="name">Improving network security with <code class="command">sysctl</code> variables</span></a></li></ol></li><li class="inactive"><a href="part-apparmor.html"><span class="number">IV </span><span class="name">Confining privileges with <span class="phrase">AppArmor</span></span></a><ol><li class="inactive"><a href="cha-apparmor-intro.html"><span class="number">27 </span><span class="name">Introducing <span class="phrase">AppArmor</span></span></a></li><li class="inactive"><a href="cha-apparmor-start.html"><span class="number">28 </span><span class="name">Getting started</span></a></li><li class="inactive"><a href="cha-apparmor-concept.html"><span class="number">29 </span><span class="name">Immunizing programs</span></a></li><li class="inactive"><a href="cha-apparmor-profiles.html"><span class="number">30 </span><span class="name">Profile components and syntax</span></a></li><li class="inactive"><a href="cha-apparmor-repos.html"><span class="number">31 </span><span class="name"><span class="phrase">AppArmor</span> profile repositories</span></a></li><li class="inactive"><a href="cha-apparmor-yast.html"><span class="number">32 </span><span class="name">Building and managing profiles with YaST</span></a></li><li class="inactive"><a href="cha-apparmor-commandline.html"><span class="number">33 </span><span class="name">Building profiles from the command line</span></a></li><li class="inactive"><a href="cha-apparmor-hat.html"><span class="number">34 </span><span class="name">Profiling your Web applications using ChangeHat</span></a></li><li class="inactive"><a href="cha-apparmor-pam.html"><span class="number">35 </span><span class="name">Confining users with <code class="systemitem">pam_apparmor</code></span></a></li><li class="inactive"><a href="cha-apparmor-managing.html"><span class="number">36 </span><span class="name">Managing profiled applications</span></a></li><li class="inactive"><a href="cha-apparmor-support.html"><span class="number">37 </span><span class="name">Support</span></a></li><li class="inactive"><a href="cha-apparmor-glossary.html"><span class="number">38 </span><span class="name"><span class="phrase">AppArmor</span> glossary</span></a></li></ol></li><li class="inactive"><a href="part-selinux.html"><span class="number">V </span><span class="name">SELinux</span></a><ol><li class="inactive"><a href="cha-selinux.html"><span class="number">39 </span><span class="name">Configuring SELinux</span></a></li></ol></li><li class="inactive"><a href="part-audit.html"><span class="number">VI </span><span class="name">The Linux Audit Framework</span></a><ol><li class="inactive"><a href="cha-audit-comp.html"><span class="number">40 </span><span class="name">Understanding Linux audit</span></a></li><li class="inactive"><a href="cha-audit-setup.html"><span class="number">41 </span><span class="name">Setting up the Linux audit framework</span></a></li><li class="inactive"><a href="cha-audit-scenarios.html"><span class="number">42 </span><span class="name">Introducing an audit rule set</span></a></li><li class="inactive"><a href="cha-audit-moreinfo.html"><span class="number">43 </span><span class="name">Useful resources</span></a></li></ol></li><li class="inactive"><a href="bk04apa.html"><span class="number">A </span><span class="name">GNU licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 23. Masquerading and firewalls" href="cha-security-firewall.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 25. Managing a PKI with XCA, X certificate and key manager" href="cha-security-xca.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Security and Hardening Guide"><span class="book-icon">Security and Hardening Guide</span></a><span> › </span><a class="crumb" href="part-network-security.html">Network security</a><span> › </span><a class="crumb" href="cha-security-vpnserver.html">Configuring a VPN server</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 23. Masquerading and firewalls" href="cha-security-firewall.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 25. Managing a PKI with XCA, X certificate and key manager" href="cha-security-xca.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha-security-vpnserver"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname "><span class="productname"><span class="phrase">openSUSE Leap</span></span></span> <span class="productnumber "><span class="productnumber"><span class="phrase">15.7</span></span></span></div><div><h2 class="title"><span class="number">24 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuring a VPN server</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>cha-security-vpnserver</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="cha-security-vpnserver.html#id-1.6.6.6.2.1">#</a></h6></div><p>
    Internet connections are easily available and affordable. However, not all connections are secure.
    Using a Virtual Private Network (VPN), you can create a secure network
    within an insecure network such as the Internet or Wi-Fi. It can be
    implemented in different ways and serves several purposes. In this chapter,
    we focus on the
    <a class="link" href="https://openvpn.net" target="_blank">OpenVPN</a> implementation
    to link branch offices via secure wide area networks (WANs).

        </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha-security-vpnserver.html#sec-security-vpn-overview"><span class="number">24.1 </span><span class="name">Conceptual overview</span></a></span></dt><dt><span class="sect1"><a href="cha-security-vpnserver.html#sec-security-vpn-simplest"><span class="number">24.2 </span><span class="name">Setting up a simple test scenario</span></a></span></dt><dt><span class="sect1"><a href="cha-security-vpnserver.html#sec-security-vpn-ca"><span class="number">24.3 </span><span class="name">Setting up your VPN server using a certificate authority</span></a></span></dt><dt><span class="sect1"><a href="cha-security-vpnserver.html#sec-security-yastvpn"><span class="number">24.4 </span><span class="name">Setting up a VPN server or client using YaST</span></a></span></dt><dt><span class="sect1"><a href="cha-security-vpnserver.html#sec-security-vpn-moreinfo"><span class="number">24.5 </span><span class="name">More information</span></a></span></dt></dl></div></div><div class="sect1 " id="sec-security-vpn-overview"><div class="titlepage"><div><div><h2 class="title"><span class="number">24.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Conceptual overview</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-overview">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-overview</li></ul></div></div></div></div><p>
   This section defines some terms regarding VPN and gives a brief overview
   of some scenarios.
  </p><div class="sect2 " id="sec-security-vpn-terminology"><div class="titlepage"><div><div><h3 class="title"><span class="number">24.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Terminology</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-terminology">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-terminology</li></ul></div></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="id-1.6.6.6.3.3.2.1"><span class="term ">Endpoint</span></dt><dd><p>
       The two <span class="quote">“<span class="quote ">ends</span>”</span> of a tunnel, the source or destination
       client.
      </p></dd><dt id="id-1.6.6.6.3.3.2.2"><span class="term ">Tap device</span></dt><dd><p>
       A tap device simulates an Ethernet device (layer 2 packets in the OSI
       model, such as Ethernet frames). A tap device is used for creating a
       network bridge. It works with Ethernet frames.
      </p></dd><dt id="id-1.6.6.6.3.3.2.3"><span class="term ">Tun device</span></dt><dd><p>
       A tun device simulates a point-to-point network (layer 3 packets in
       the OSI model, such as IP packets). A tun device is used with
       routing and works with IP frames.
      </p></dd><dt id="id-1.6.6.6.3.3.2.4"><span class="term ">Tunnel</span></dt><dd><p>
       Linking two locations through a primarily public network. From a more
       technical viewpoint, it is a connection between the client's device
       and the server's device. A tunnel is encrypted, but it does
       need to be by definition.
      </p></dd></dl></div></div><div class="sect2 " id="sec-security-vpn-scenarios"><div class="titlepage"><div><div><h3 class="title"><span class="number">24.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">VPN scenarios</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-scenarios">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-scenarios</li></ul></div></div></div></div><p>
    Whenever you set up a VPN connection, your IP packets are transferred
    over a secured <span class="emphasis"><em>tunnel</em></span>. A tunnel can use either a
    <span class="emphasis"><em>tun</em></span> or <span class="emphasis"><em>tap</em></span> device. They are
    virtual network kernel drivers which implement the transmission of
    Ethernet frames or IP frames/packets.
   </p><p>
    Any user space program, such as OpenVPN, can attach itself to a tun or tap
    device to receive packets sent by your operating system. The program is
    also able to write packets to the device.
   </p><p>
    There are many solutions to set up and build a VPN connection. This
    section focuses on the OpenVPN package. Compared to other VPN software,
    OpenVPN can be operated in two modes:
   </p><div class="variablelist "><dl class="variablelist"><dt id="id-1.6.6.6.3.4.5.1"><span class="term ">Routed VPN</span></dt><dd><p>
       Routing is an easy solution to set up. It is more efficient and
       scales better than a bridged VPN. Furthermore, it allows the user to
       tune MTU (Maximum Transfer Unit) to raise efficiency. However, in a
       heterogeneous environment, if you do not have a Samba server on the
       gateway, NetBIOS broadcasts do not work. If you need IPv6, the drivers
       for the tun devices on both ends must support this protocol explicitly.
       This scenario is depicted in <a class="xref" href="cha-security-vpnserver.html#fig-vpn-scenario-routed-1" title="Routed VPN">Figure 24.1, “Routed VPN”</a>.
      </p><div class="figure" id="fig-vpn-scenario-routed-1"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/vpn_routed1.png" target="_blank"><img src="images/vpn_routed1.png" width="" alt="Routed VPN" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 24.1: </span><span class="name">Routed VPN </span><a title="Permalink" class="permalink" href="cha-security-vpnserver.html#fig-vpn-scenario-routed-1">#</a></h6></div></div></dd><dt id="id-1.6.6.6.3.4.5.2"><span class="term ">Bridged VPN</span></dt><dd><p>
       Bridging is a more complex solution. It is recommended when you need
       to browse Windows file shares across the VPN without setting up a
       Samba or WINS server. Bridged VPN is also needed to use
       non-IP protocols (such as IPX) or applications relying on network
       broadcasts. However, it is less efficient than routed VPN. Another
       disadvantage is that it does not scale well. This scenario is
       depicted in the following figures.
      </p><div class="figure" id="fig-vpn-scenario-briged-1"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/vpn_bridged1.png" target="_blank"><img src="images/vpn_bridged1.png" width="" alt="Bridged VPN - scenario 1" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 24.2: </span><span class="name">Bridged VPN - scenario 1 </span><a title="Permalink" class="permalink" href="cha-security-vpnserver.html#fig-vpn-scenario-briged-1">#</a></h6></div></div><div class="figure" id="fig-vpn-scenario-briged-2"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/vpn_bridged2.png" target="_blank"><img src="images/vpn_bridged2.png" width="" alt="Bridged VPN - scenario 2" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 24.3: </span><span class="name">Bridged VPN - scenario 2 </span><a title="Permalink" class="permalink" href="cha-security-vpnserver.html#fig-vpn-scenario-briged-2">#</a></h6></div></div><div class="figure" id="fig-vpn-scenario-briged-3"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/vpn_bridged3.png" target="_blank"><img src="images/vpn_bridged3.png" width="" alt="Bridged VPN - scenario 3" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 24.4: </span><span class="name">Bridged VPN - scenario 3 </span><a title="Permalink" class="permalink" href="cha-security-vpnserver.html#fig-vpn-scenario-briged-3">#</a></h6></div></div></dd></dl></div><p>
    The major difference between bridging and routing is that a routed VPN
    cannot IP-broadcast while a bridged VPN can.
   </p></div></div><div class="sect1 " id="sec-security-vpn-simplest"><div class="titlepage"><div><div><h2 class="title"><span class="number">24.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Setting up a simple test scenario</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-simplest">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-simplest</li></ul></div></div></div></div><p>
   In the following example, we create a point-to-point VPN tunnel. The
   example demonstrates how to create a VPN tunnel between one client and a
   server. It is assumed that your VPN server uses private IP addresses
   like <code class="systemitem"><em class="replaceable ">IP_OF_SERVER</em></code>
   and your client uses the IP address
   <code class="systemitem"><em class="replaceable ">IP_OF_CLIENT</em></code>.
   Make sure you select addresses which do not conflict with other IP addresses.
  </p><div id="id-1.6.6.6.4.3" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning: Use only for testing</h6><p>
    This following scenario is provided as an example meant for familiarizing
    yourself with VPN technology. <span class="emphasis"><em>Do not</em></span> use this as a
    real world scenario, as it can compromise the security and safety of your IT
    infrastructure.
   </p></div><div id="id-1.6.6.6.4.4" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg" /><h6>Tip: Names for configuration file</h6><p>
    To simplify working with OpenVPN configuration files, we recommend the
    following:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Place your OpenVPN configuration files in the directory
      <code class="filename">/etc/openvpn</code>.
     </p></li><li class="listitem "><p>
      Name your configuration files
      <code class="filename"><em class="replaceable ">MY_CONFIGURATION</em>.conf</code>.
     </p></li><li class="listitem "><p>
      If there are multiple files that belong to the same configuration, place
      them in a subdirectory like
      <code class="filename">/etc/openvpn/<em class="replaceable ">MY_CONFIGURATION</em></code>.
     </p></li></ul></div></div><div class="sect2 " id="sec-security-vpn-simplest-vpnserv"><div class="titlepage"><div><div><h3 class="title"><span class="number">24.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuring the VPN server</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-simplest-vpnserv">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-simplest-vpnserv</li></ul></div></div></div></div><p>
    To configure a VPN server, proceed as follows:
   </p><div class="procedure " id="pro-security-vpn-simplest-vpnserv"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 24.1: </span><span class="name">VPN server configuration </span><a title="Permalink" class="permalink" href="cha-security-vpnserver.html#pro-security-vpn-simplest-vpnserv">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install the package <code class="systemitem">openvpn</code>
      on the machine that later becomes your VPN server.
     </p></li><li class="step "><p>
      Open a shell, become <code class="systemitem">root</code> and create the VPN secret key:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>openvpn --genkey secret /etc/openvpn/secret.key</pre></div></li><li class="step "><p>
      Copy the secret key to your client:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>scp /etc/openvpn/secret.key root@<em class="replaceable ">IP_OF_CLIENT</em>:/etc/openvpn/</pre></div></li><li class="step "><p>
      Create the file <code class="filename">/etc/openvpn/server.conf</code> with the
      following content:
     </p><div class="verbatim-wrap"><pre class="screen">dev tun
ifconfig <em class="replaceable ">IP_OF_SERVER</em> <em class="replaceable ">IP_OF_CLIENT</em>
secret secret.key</pre></div></li><li class="step "><p>
      Set up a tun device configuration by creating a file called
      <code class="filename">/etc/sysconfig/network/ifcfg-tun0</code> with the following
      content:
     </p><div class="verbatim-wrap"><pre class="screen">STARTMODE='manual'
BOOTPROTO='static'
TUNNEL='tun'
TUNNEL_SET_OWNER='nobody'
TUNNEL_SET_GROUP='nobody'
LINK_REQUIRED=no
PRE_UP_SCRIPT='systemd:openvpn@server'
PRE_DOWN_SCRIPT='systemd:openvpn@service'</pre></div><p>
      The notation <code class="literal">openvpn@server</code> points to the OpenVPN
      server configuration file located at
      <code class="filename">/etc/openvpn/server.conf</code>. For more information, see
      <code class="filename">/usr/share/doc/packages/openvpn/README.SUSE</code>.
     </p></li><li class="step " id="st-security-vpn-simplest-vpnserv-yast"><p>
      If you use a firewall, start YaST and open UDP port 1194
      (<span class="guimenu ">Security and
      Users</span> › <span class="guimenu ">Firewall</span> › <span class="guimenu ">Allowed
      Services</span>).
     </p></li><li class="step "><p>
      Start the OpenVPN server service by setting the tun device to
      <code class="literal">up</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">wicked ifup tun0</code></pre></div><p>
      You should see the confirmation:
     </p><div class="verbatim-wrap"><pre class="screen">tun0            up</pre></div></li></ol></div></div></div><div class="sect2 " id="sec-security-vpn-simplest-vpnclient"><div class="titlepage"><div><div><h3 class="title"><span class="number">24.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuring the VPN clients</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-simplest-vpnclient">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-simplest-vpnclient</li></ul></div></div></div></div><p>
    To configure the VPN client, do the following:
   </p><div class="procedure " id="id-1.6.6.6.4.6.3"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 24.2: </span><span class="name">VPN client configuration </span><a title="Permalink" class="permalink" href="cha-security-vpnserver.html#id-1.6.6.6.4.6.3">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install the package <code class="systemitem">openvpn</code>
      on your client VPN machine.
     </p></li><li class="step "><p>
      Create <code class="filename">/etc/openvpn/client.conf</code> with the
      following content:
     </p><div class="verbatim-wrap"><pre class="screen">remote <em class="replaceable ">DOMAIN_OR_PUBLIC_IP_OF_SERVER</em>
dev tun
ifconfig <em class="replaceable ">IP_OF_CLIENT</em> <em class="replaceable ">IP_OF_SERVER</em>
secret secret.key</pre></div><p>
      Replace the placeholder <em class="replaceable ">IP_OF_CLIENT</em> in the
      first line with either the domain name, or the public IP address of
      your server.
     </p></li><li class="step "><p>
      Set up a tun device configuration by creating a file called
      <code class="filename">/etc/sysconfig/network/ifcfg-tun0</code> with the following
      content:
     </p><div class="verbatim-wrap"><pre class="screen">STARTMODE='manual'
BOOTPROTO='static'
TUNNEL='tun'
TUNNEL_SET_OWNER='nobody'
TUNNEL_SET_GROUP='nobody'
LINK_REQUIRED=no
PRE_UP_SCRIPT='systemd:openvpn@client'
PRE_DOWN_SCRIPT='systemd:openvpn@client'</pre></div></li><li class="step "><p>
      If you use a firewall, start YaST and open UDP port 1194 as
      described in <a class="xref" href="cha-security-vpnserver.html#st-security-vpn-simplest-vpnserv-yast" title="Step 6">Step 6</a>
      of <a class="xref" href="cha-security-vpnserver.html#pro-security-vpn-simplest-vpnserv" title="VPN server configuration">Procedure 24.1, “VPN server configuration”</a>.
     </p></li><li class="step "><p>
      Start the OpenVPN server service by setting the tun device to
      <code class="literal">up</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">wicked ifup tun0</code></pre></div><p>
      You should see the confirmation:
     </p><div class="verbatim-wrap"><pre class="screen">tun0            up</pre></div></li></ol></div></div></div><div class="sect2 " id="sec-security-vpn-simplest-use"><div class="titlepage"><div><div><h3 class="title"><span class="number">24.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Testing the VPN example scenario</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-simplest-use">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-simplest-use</li></ul></div></div></div></div><p>
    After OpenVPN has successfully started, test the availability of the tun
    device with the following command:
   </p><div class="verbatim-wrap"><pre class="screen">ip addr show tun0</pre></div><p>
    To verify the VPN connection, use <code class="command">ping</code> on both client
    and server side to see if they can reach each other. Ping the server
    from the client:
   </p><div class="verbatim-wrap"><pre class="screen">ping -I tun0 <em class="replaceable ">IP_OF_SERVER</em></pre></div><p>
    Ping the client from the server:
   </p><div class="verbatim-wrap"><pre class="screen">ping -I tun0 <em class="replaceable ">IP_OF_CLIENT</em></pre></div></div></div><div class="sect1 " id="sec-security-vpn-ca"><div class="titlepage"><div><div><h2 class="title"><span class="number">24.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Setting up your VPN server using a certificate authority</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-ca">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-ca</li></ul></div></div></div></div><p>
   The example in
   <a class="xref" href="cha-security-vpnserver.html#sec-security-vpn-simplest" title="24.2. Setting up a simple test scenario">Section 24.2</a>
   is useful for testing, but not for daily work. This section explains how
   to build a VPN server that allows more than one connection at the same
   time. This is done with a public key infrastructure (PKI). A PKI consists
   of a pair of public and private keys for the server and each client, and
   a certificate authority (CA), which is used to sign every server
   and client certificate.
  </p><p>
   This setup involves the following basic steps:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     <a class="xref" href="cha-security-vpnserver.html#sec-security-vpn-certs" title="24.3.1. Creating certificates">Section 24.3.1, “Creating certificates”</a>
    </p></li><li class="step "><p>
     <a class="xref" href="cha-security-vpnserver.html#sec-security-vpn-config-server" title="24.3.2. Configuring the VPN server">Section 24.3.2, “Configuring the VPN server”</a>
    </p></li><li class="step "><p>
     <a class="xref" href="cha-security-vpnserver.html#sec-security-vpn-config-clients" title="24.3.3. Configuring the VPN clients">Section 24.3.3, “Configuring the VPN clients”</a>
    </p></li></ol></div></div><div class="sect2 " id="sec-security-vpn-certs"><div class="titlepage"><div><div><h3 class="title"><span class="number">24.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Creating certificates</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-certs">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-certs</li></ul></div></div></div></div><p>
    Before a VPN connection can be established, the client must authenticate
    the server certificate. Conversely, the server must also authenticate
    the client certificate. This is called <span class="emphasis"><em>mutual
    authentication</em></span>.
   </p><p>
    Creating certificates is not supported on <span class="productname"><span class="phrase">openSUSE Leap</span></span>. The following
    assumes you have created a CA certificate, a server certificate, and a
    client certificate on another system.
   </p><p>
    The server certificate is required in the PEM and unencrypted
    key in PEM formats. Copy the PEM version to
    <code class="filename">/etc/openvpn/server_crt.pem</code> on the VPN server. The
    unencrypted version needs to go to
    <code class="filename">/etc/openvpn/server_key.pem</code>.
   </p><p>
    Client certificates need to be of the format PKCS12 (preferred) or PEM. The
    certificate in PKCS12 format needs to contain the CA chain and needs to be
    copied to
    <code class="filename">/etc/openvpn/<em class="replaceable ">CLIENT</em>.p12</code>. In
    case you have client certificates in PEM format containing the CA chain,
    copy them to
    <code class="filename">/etc/openvpn/<em class="replaceable ">CLIENT</em>.pem</code>. In
    case you have split the PEM certificates into client certificate
    (<code class="filename">*.ca</code>), client key (<code class="filename">*.key</code>), and
    the CA certificate (<code class="filename">*.ca</code>), copy these files to
    <code class="filename">/etc/openvpn/</code> on each client.
   </p><p>
    The CA certificate needs to be copied to
    <code class="filename">/etc/openvpn/vpn_ca.pem</code> on the server and each client.
   </p><div id="id-1.6.6.6.5.5.7" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg" /><h6>Important: Splitting client certificates</h6><p>
     If you split client certificates into client certificate, client key, and
     the CA certificate, you need to provide the respective file names in the
     OpenVPN configuration file on the respective clients (see <a class="xref" href="cha-security-vpnserver.html#ex-vpn-serv-config" title="VPN server configuration file">Example 24.1, “VPN server configuration file”</a>).
    </p></div></div><div class="sect2 " id="sec-security-vpn-config-server"><div class="titlepage"><div><div><h3 class="title"><span class="number">24.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuring the VPN server</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-config-server">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-config-server</li></ul></div></div></div></div><p>
    As the basis of your configuration file, copy
    <code class="filename">/usr/share/doc/packages/openvpn/sample-config-files/server.conf</code>
    to <code class="filename">/etc/openvpn/</code>. Then customize it to your needs.
   </p><div class="example" id="ex-vpn-serv-config"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 24.1: </span><span class="name">VPN server configuration file </span><a title="Permalink" class="permalink" href="cha-security-vpnserver.html#ex-vpn-serv-config">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># /etc/openvpn/server.conf
port 1194 <span id="co-vpn-servconfig-port"></span><span class="callout">1</span>
proto udp <span id="co-vpn-servconfig-proto"></span><span class="callout">2</span>
dev tun0 <span id="co-vpn-servconfig-dev"></span><span class="callout">3</span>

# Security <span id="co-vpn-servconfig-security"></span><span class="callout">4</span>

ca    vpn_ca.pem
cert  server_crt.pem
key   server_key.pem

# ns-cert-type server 
remote-cert-tls client <span id="co-vpn-servconfig-remote-cert-tls"></span><span class="callout">5</span>
dh   server/dh2048.pem <span id="co-vpn-servconfig-dh"></span><span class="callout">6</span>

server 192.168.1.0 255.255.255.0 <span id="co-vpn-servconfig-server"></span><span class="callout">7</span>
ifconfig-pool-persist /var/run/openvpn/ipp.txt <span id="co-vpn-servconfig-pool"></span><span class="callout">8</span>

# Privileges <span id="co-vpn-serverconf-privilege"></span><span class="callout">9</span>
user nobody
group nobody

# Other configuration <span id="co-vpn-servconfig-misc"></span><span class="callout">10</span>
keepalive 10 120
comp-lzo
persist-key
persist-tun
# status      /var/log/openvpn-status.tun0.log <span id="co-vpn-serverconfig-status"></span><span class="callout">11</span>
# log-append  /var/log/openvpn-server.log <span id="co-vpn-serverconfig-log-append"></span><span class="callout">12</span>
verb 4</pre></div></div></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-servconfig-port"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      The TCP/UDP port on which OpenVPN listens. You need to open the port
      in the firewall, see <a class="xref" href="cha-security-firewall.html" title="Chapter 23. Masquerading and firewalls">Chapter 23, <em>Masquerading and firewalls</em></a>. The
      standard port for VPN is 1194, so you can leave that as
      it is.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-servconfig-proto"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      The protocol, either UDP or TCP.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-servconfig-dev"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
      The tun or tap device. For the difference between these, see
      <a class="xref" href="cha-security-vpnserver.html#sec-security-vpn-terminology" title="24.1.1. Terminology">Section 24.1.1, “Terminology”</a>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-servconfig-security"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
      The following lines contain the relative or absolute path to the root
      server CA certificate (<code class="literal">ca</code>), the root CA key
      (<code class="literal">cert</code>), and the private server key
      (<code class="literal">key</code>). These were generated in
      <a class="xref" href="cha-security-vpnserver.html#sec-security-vpn-certs" title="24.3.1. Creating certificates">Section 24.3.1, “Creating certificates”</a>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-servconfig-remote-cert-tls"><span class="callout">5</span></a> </p></td><td valign="top" align="left"><p> Require that peer certificates have been signed with an
            explicit key usage and extended key usage based on RFC3280
            TLS rules. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-servconfig-dh"><span class="callout">6</span></a> </p></td><td valign="top" align="left"><p> The Diffie-Hellman parameters. Create the required file with
            the following command: </p><div class="verbatim-wrap"><pre class="screen">openssl dhparam -out /etc/openvpn/dh2048.pem 2048</pre></div></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-servconfig-server"><span class="callout">7</span></a> </p></td><td valign="top" align="left"><p>
      Supplies a VPN subnet. The server can be reached by
      <code class="systemitem">192.168.1.1</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-servconfig-pool"><span class="callout">8</span></a> </p></td><td valign="top" align="left"><p>
      Records a mapping of clients and its virtual IP address in the given
      file. Useful when the server goes down and (after the restart) the
      clients get their previously assigned IP address.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-serverconf-privilege"><span class="callout">9</span></a> </p></td><td valign="top" align="left"><p>
      For security reasons, run the OpenVPN daemon with reduced privileges. To
      do so, specify that it should use the group and user
      <code class="systemitem">nobody</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-servconfig-misc"><span class="callout">10</span></a> </p></td><td valign="top" align="left"><p> Several configuration options—see the comment in the
            example configuration file:
              <code class="filename">/usr/share/doc/packages/openvpn/sample-config-files</code>. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-serverconfig-status"><span class="callout">11</span></a> </p></td><td valign="top" align="left"><p>
      Enable this option to write short status updates with statistical data
      (<span class="quote">“<span class="quote ">operational status dump</span>”</span>) to the named file.
      By default, this is not enabled.
     </p><p>
      All output is written to the system journal, which can be displayed with
      <code class="command">journalctl</code>. If you have more than one configuration
      file (for example, one for home and another for work), it is recommended
      to include the device name into the file name. This avoids overwriting
      output files accidentally. In this case, it is
      <code class="systemitem">tun0</code>, taken from the <code class="option">dev</code>
      directive—see <a class="xref" href="cha-security-vpnserver.html#co-vpn-servconfig-dev"><span class="callout">3</span></a>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-serverconfig-log-append"><span class="callout">12</span></a> </p></td><td valign="top" align="left"><p>
      By default, log messages go to syslog. Overwrite this behavior by
      removing the hash character. In that case, all messages go to
      <code class="filename">/var/log/openvpn-server.log</code>. Do not forget to
      configure a logrotate service. See <code class="command">man 8 logrotate</code>
      for further details.
     </p></td></tr></table></div><p>
    After having completed this configuration, you can see log messages of
    your OpenVPN server under <code class="filename">/var/log/openvpn.log</code>.
    After having started it for the first time, it should finish with:
   </p><div class="verbatim-wrap"><pre class="screen">... Initialization Sequence Completed</pre></div><p>
    If you do not see this message, check the log carefully for any hints of
    what is wrong in your configuration file.
   </p></div><div class="sect2 " id="sec-security-vpn-config-clients"><div class="titlepage"><div><div><h3 class="title"><span class="number">24.3.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuring the VPN clients</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-config-clients">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-config-clients</li></ul></div></div></div></div><p>
    As the basis of your configuration file, copy
    <code class="filename">/usr/share/doc/packages/openvpn/sample-config-files/client.conf</code>
    to <code class="filename">/etc/openvpn/</code>. Then customize it to your needs.
   </p><div class="example" id="id-1.6.6.6.5.7.3"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 24.2: </span><span class="name">VPN client configuration file </span><a title="Permalink" class="permalink" href="cha-security-vpnserver.html#id-1.6.6.6.5.7.3">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># /etc/openvpn/client.conf
client <span id="co-vpn-clientconf-client"></span><span class="callout">1</span>
dev tun <span id="co-vpn-clientconf-dev"></span><span class="callout">2</span>
proto udp <span id="co-vpn-clientconf-proto"></span><span class="callout">3</span>
remote <em class="replaceable ">IP_OR_HOST_NAME</em> 1194 <span id="co-vpn-clientconf-remote"></span><span class="callout">4</span>
resolv-retry infinite
nobind

remote-cert-tls server <span id="co-vpn-clientconf-remote-cert-tls"></span><span class="callout">5</span>

# Privileges <span id="co-vpn-clientconf-privileges"></span><span class="callout">6</span>
user nobody
group nobody

# Try to preserve some state across restarts.
persist-key
persist-tun

# Security <span id="co-vpn-clientconf-security"></span><span class="callout">7</span>
pkcs12 client1.p12

comp-lzo <span id="co-vpn-clientconf-compr"></span><span class="callout">8</span></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-clientconf-client"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
       Specifies that this machine is a client.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-clientconf-dev"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
       The network device. Both clients and server must use the same device.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-clientconf-proto"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
       The protocol. Use the same settings as on the server.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-clientconf-remote-cert-tls"><span class="callout">5</span></a> </p></td><td valign="top" align="left"><p>
       This is security option for clients which ensures that the host
       they connect to is a designated server.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-clientconf-remote"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
       Replace the placeholder <em class="replaceable ">IP_OR_HOST_NAME</em>
       with the respective host name or IP address of your VPN server. After
       the host name, the port of the server is given. You can have multiple
       lines of <code class="literal">remote</code> entries pointing to different VPN
       servers. This is useful for load balancing between different VPN
       servers.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-clientconf-privileges"><span class="callout">6</span></a> </p></td><td valign="top" align="left"><p>
       For security reasons, run the OpenVPN daemon with reduced privileges. To
       do so, specify that it should use the group and user
       <code class="systemitem">nobody</code>.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-clientconf-security"><span class="callout">7</span></a> </p></td><td valign="top" align="left"><p>
       Contains the client files. For security reasons, use a separate pair of
       files for each client.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vpn-clientconf-compr"><span class="callout">8</span></a> </p></td><td valign="top" align="left"><p>
       Turn on compression. Only use this parameter if compression is enabled
       on the server as well.
      </p></td></tr></table></div></div></div></div></div><div class="sect1 " id="sec-security-yastvpn"><div class="titlepage"><div><div><h2 class="title"><span class="number"> </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Setting up a VPN server or client using YaST</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-yastvpn">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver_yast.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver_yast.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
  You can also use YaST to set up a VPN server. However, the YaST module
  does not support OpenVPN. Instead, it provides support for the IPsec protocol
  (as implemented in the software
  <span class="productname">StrongSwan</span>). Like OpenVPN, IPsec
  is a widely supported VPN scheme.
 </p><div class="procedure " id="pro-security-yastvpn-server"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 24.3: </span><span class="name">Setting up an IPsec server </span><a title="Permalink" class="permalink" href="cha-security-vpnserver.html#pro-security-yastvpn-server">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     To start the YaST VPN module, select
     <span class="guimenu ">Applications</span> › <span class="guimenu ">VPN Gateways and Clients</span>.
    </p></li><li class="step "><p>
     Under <span class="guimenu ">Global Configuration</span>, activate
     <span class="guimenu ">Enable VPN Daemon</span>.
    </p></li><li class="step "><p>
     To create a new VPN, click <span class="guimenu ">New VPN</span>, then enter a name
     for the connection.
    </p></li><li class="step "><p>
     Under <span class="guimenu ">Type</span>, select <span class="guimenu ">Gateway (Server)</span>.
    </p></li><li class="step "><p>
     Then choose the scenario:
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
       The scenarios <span class="guimenu ">Secure communication with a pre-shared
       key</span> and <span class="guimenu ">Secure communication with a
       certificate</span> are best suited to Linux client setups.
      </p></li><li class="listitem "><p>
       The scenario <span class="guimenu ">Provide access to Android, iOS, Mac OS X
       clients</span> sets up a configuration that is natively supported by
       modern versions of Android, iOS, and macOS. It is based on a pre-shared
       key setup with an additional user name and password authentication.
      </p></li><li class="listitem "><p>
       The scenario <span class="guimenu ">Provide access to Windows 7, Windows 8
       clients</span> is a configuration that is natively supported by
       Windows and BlackBerry devices. It is based on a certificate setup
       with an additional user name and password authentication.
      </p></li></ul></div><p>
     For this example, choose <span class="guimenu ">Secure communication with a pre-shared
     key</span>.
    </p></li><li class="step "><p>
     To specify the key, click <span class="guimenu ">Edit Credentials</span>. Activate
     <span class="guimenu ">Show key</span>, then type the secret key. Confirm with
     <span class="guimenu ">OK</span>.
    </p></li><li class="step "><p>
     Choose whether and how to limit access within your VPN under
     <span class="guimenu ">Provide VPN clients access to</span>. To enable only certain
     IP ranges, specify these in CIDR format, separated by commas in
     <span class="guimenu ">Limited CIDRs</span>. For more information about the CIDR
     format, see
     <a class="link" href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing" target="_blank">https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing</a>.
    </p></li><li class="step "><p>
     Under <span class="guimenu ">Clients' address pool</span>, specify the format of IP
     addresses your VPN should provide to its clients.
    </p></li><li class="step "><p>
     To finish, click <span class="guimenu ">OK</span>. The YaST VPN module
     automatically adds and enables firewall rules to allow clients to connect to
     the new VPN.
    </p><p>
     To view the connection status,
     in the following confirmation window, click <span class="guimenu ">Yes</span>.
     You can see the output of
     <code class="command">systemctl status</code> for your VPN, which allows you to check
     if the VPN is running and configured correctly.
    </p></li></ol></div></div></div><div class="sect1 " id="sec-security-vpn-moreinfo"><div class="titlepage"><div><div><h2 class="title"><span class="number">24.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">More information</span> <a title="Permalink" class="permalink" href="cha-security-vpnserver.html#sec-security-vpn-moreinfo">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE/doc-sle/edit/main/xml/security_vpnserver.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security_vpnserver.xml</li><li><span class="ds-label">ID: </span>sec-security-vpn-moreinfo</li></ul></div></div></div></div><p>
   For more information on setting up a VPN connection using NetworkManager, see
   <span class="intraxref">Book “Reference”, Chapter 28 “Using NetworkManager”, Section 28.3.4 “NetworkManager and VPN”</span>.
  </p><p>
   For more information about VPN, see:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     <a class="link" href="https://openvpn.net" target="_blank">https://openvpn.net</a>: the OpenVPN home page
    </p></li><li class="listitem "><p>
     <code class="command">man</code> <code class="option">openvpn</code>
    </p></li><li class="listitem "><p>
     <code class="filename">/usr/share/doc/packages/openvpn/sample-config-files/</code>:
     example configuration files for different scenarios.
    </p></li><li class="listitem "><p>
     <code class="filename">/usr/src/linux/Documentation/networking/tuntap.txt</code>,
     to install the <code class="systemitem">kernel-source</code>
     package.
    </p></li></ul></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha-security-xca.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 25 </span>Managing a PKI with XCA, X certificate and key manager</span></a><a class="nav-link" href="cha-security-firewall.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 23 </span>Masquerading and firewalls</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2024 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>