<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLES 15 SP6 | Virtualization Guide | Installation of virtualization components</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Installation of virtualization components | SLES 15 SP6"/>
<meta name="description" content="To run a virtualization server (VM Host Server) that can host one or more guest systems (VM Guests), you need to install required virtualization comp…"/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="15 SP6"/>
<meta name="book-title" content="Virtualization Guide"/>
<meta name="chapter-title" content="Chapter 6. Installation of virtualization components"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Server 15 SP6"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Virtualization Guide"/>
<meta property="og:description" content="Learn all about virtualization and VM management"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Virtualization Guide"/>
<meta name="twitter:description" content="Learn all about virtualization and VM management"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Installation of virtualization components",
  
    "description": "Installation of virtualization components",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-06-26T00:00+02:00",
      
    "datePublished": "2024-06-26T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-tools-intro.html" title="Chapter 5. Virtualization tools"/><link rel="next" href="cha-virt-support.html" title="Chapter 7. Virtualization limits and support"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Virtualization Guide</a><span> / </span><a class="crumb" href="part-virt-intro.html">Introduction</a><span> / </span><a class="crumb" href="cha-vt-installation.html">Installation of virtualization components</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Virtualization Guide</div><ol><li><a href="cha-kvm.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li class="active"><a href="part-virt-intro.html" class="has-children you-are-here"><span class="title-number">I </span><span class="title-name">Introduction</span></a><ol><li><a href="chap-virtualization-introduction.html" class=" "><span class="title-number">1 </span><span class="title-name">Virtualization technology</span></a></li><li><a href="cha-virtualization-scenarios.html" class=" "><span class="title-number">2 </span><span class="title-name">Virtualization scenarios</span></a></li><li><a href="cha-xen-basics.html" class=" "><span class="title-number">3 </span><span class="title-name">Introduction to Xen virtualization</span></a></li><li><a href="cha-kvm-intro.html" class=" "><span class="title-number">4 </span><span class="title-name">Introduction to KVM virtualization</span></a></li><li><a href="cha-tools-intro.html" class=" "><span class="title-number">5 </span><span class="title-name">Virtualization tools</span></a></li><li><a href="cha-vt-installation.html" class=" you-are-here"><span class="title-number">6 </span><span class="title-name">Installation of virtualization components</span></a></li><li><a href="cha-virt-support.html" class=" "><span class="title-number">7 </span><span class="title-name">Virtualization limits and support</span></a></li></ol></li><li><a href="part-virt-libvirt.html" class="has-children "><span class="title-number">II </span><span class="title-name">Managing virtual machines with <code class="systemitem">libvirt</code></span></a><ol><li><a href="cha-libvirt-overview.html" class=" "><span class="title-number">8 </span><span class="title-name"><code class="systemitem">libvirt</code> daemons</span></a></li><li><a href="cha-libvirt-host.html" class=" "><span class="title-number">9 </span><span class="title-name">Preparing the VM Host Server</span></a></li><li><a href="cha-kvm-inst.html" class=" "><span class="title-number">10 </span><span class="title-name">Guest installation</span></a></li><li><a href="cha-libvirt-managing.html" class=" "><span class="title-number">11 </span><span class="title-name">Basic VM Guest management</span></a></li><li><a href="cha-libvirt-connect.html" class=" "><span class="title-number">12 </span><span class="title-name">Connecting and authorizing</span></a></li><li><a href="cha-libvirt-storage.html" class=" "><span class="title-number">13 </span><span class="title-name">Advanced storage topics</span></a></li><li><a href="cha-libvirt-config-gui.html" class=" "><span class="title-number">14 </span><span class="title-name">Configuring virtual machines with Virtual Machine Manager</span></a></li><li><a href="cha-libvirt-config-virsh.html" class=" "><span class="title-number">15 </span><span class="title-name">Configuring virtual machines with <code class="command">virsh</code></span></a></li><li><a href="sec-libvirt-admin-migrate.html" class=" "><span class="title-number">16 </span><span class="title-name">Migrating VM Guests</span></a></li><li><a href="xen2kvm-migration.html" class=" "><span class="title-number">17 </span><span class="title-name">Xen to KVM migration guide</span></a></li></ol></li><li><a href="part-virt-common.html" class="has-children "><span class="title-number">III </span><span class="title-name">Hypervisor-independent features</span></a><ol><li><a href="cha-cachemodes.html" class=" "><span class="title-number">18 </span><span class="title-name">Disk cache modes</span></a></li><li><a href="sec-kvm-managing-clock.html" class=" "><span class="title-number">19 </span><span class="title-name">VM Guest clock settings</span></a></li><li><a href="chap-guestfs.html" class=" "><span class="title-number">20 </span><span class="title-name">libguestfs</span></a></li><li><a href="cha-qemu-ga.html" class=" "><span class="title-number">21 </span><span class="title-name">QEMU guest agent</span></a></li><li><a href="tpm.html" class=" "><span class="title-number">22 </span><span class="title-name">Software TPM emulator</span></a></li><li><a href="virt-crash-dump.html" class=" "><span class="title-number">23 </span><span class="title-name">Creating crash dumps of a VM Guest</span></a></li></ol></li><li><a href="part-virt-xen.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Managing virtual machines with Xen</span></a><ol><li><a href="cha-xen-vhost.html" class=" "><span class="title-number">24 </span><span class="title-name">Setting up a virtual machine host</span></a></li><li><a href="cha-xen-network.html" class=" "><span class="title-number">25 </span><span class="title-name">Virtual networking</span></a></li><li><a href="cha-xen-manage.html" class=" "><span class="title-number">26 </span><span class="title-name">Managing a virtualization environment</span></a></li><li><a href="cha-xen-vbd.html" class=" "><span class="title-number">27 </span><span class="title-name">Block devices in Xen</span></a></li><li><a href="cha-xen-config.html" class=" "><span class="title-number">28 </span><span class="title-name">Virtualization: configuration options and settings</span></a></li><li><a href="cha-xen-admin.html" class=" "><span class="title-number">29 </span><span class="title-name">Administrative tasks</span></a></li><li><a href="cha-xen-xenstore.html" class=" "><span class="title-number">30 </span><span class="title-name">XenStore: configuration database shared between domains</span></a></li><li><a href="cha-xen-ha.html" class=" "><span class="title-number">31 </span><span class="title-name">Xen as a high-availability virtualization host</span></a></li><li><a href="pv-to-fv.html" class=" "><span class="title-number">32 </span><span class="title-name">Xen: converting a paravirtual (PV) guest into a fully virtual (FV/HVM) guest</span></a></li></ol></li><li><a href="part-virt-qemu.html" class="has-children "><span class="title-number">V </span><span class="title-name">Managing virtual machines with QEMU</span></a><ol><li><a href="cha-qemu-overview.html" class=" "><span class="title-number">33 </span><span class="title-name">QEMU overview</span></a></li><li><a href="cha-qemu-host.html" class=" "><span class="title-number">34 </span><span class="title-name">Setting up a KVM VM Host Server</span></a></li><li><a href="cha-qemu-guest-inst.html" class=" "><span class="title-number">35 </span><span class="title-name">Guest installation</span></a></li><li><a href="cha-qemu-running.html" class=" "><span class="title-number">36 </span><span class="title-name">Running virtual machines with qemu-system-ARCH</span></a></li><li><a href="cha-qemu-monitor.html" class=" "><span class="title-number">37 </span><span class="title-name">Virtual machine administration using QEMU monitor</span></a></li></ol></li><li><a href="part-virt-troubleshoot.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Troubleshooting</span></a><ol><li><a href="cha-virt-help.html" class=" "><span class="title-number">38 </span><span class="title-name">Integrated help and package documentation</span></a></li><li><a href="cha-virt-logs.html" class=" "><span class="title-number">39 </span><span class="title-name">Gathering system information and logs</span></a></li></ol></li><li><a href="gloss-vt-glossary.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="app-vmdp-driver.html" class=" "><span class="title-number">A </span><span class="title-name">Virtual machine drivers</span></a></li><li><a href="app-gpu-passthru.html" class=" "><span class="title-number">B </span><span class="title-name">Configuring GPU Pass-Through for NVIDIA cards</span></a></li><li><a href="cha-xmtoxl.html" class=" "><span class="title-number">C </span><span class="title-name">XM, XL toolstacks, and the <code class="systemitem">libvirt</code> framework</span></a></li><li><a href="bk10apd.html" class=" "><span class="title-number">D </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-vt-installation" data-id-title="Installation of virtualization components"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP6</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">6 </span><span class="title-name">Installation of virtualization components</span></span> <a title="Permalink" class="permalink" href="cha-vt-installation.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect1" id="introduction-install-virtualization-components" data-id-title="Introduction"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.1 </span><span class="title-name">Introduction</span></span> <a title="Permalink" class="permalink" href="cha-vt-installation.html#introduction-install-virtualization-components">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      To run a virtualization server (VM Host Server) that can host one or more guest
      systems (VM Guests), you need to install required virtualization
      components on the server. These components vary depending on which
      virtualization technology you want to use.
    </p></section><section class="sect1" id="install-virtualization-components" data-id-title="Installing virtualization components"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.2 </span><span class="title-name">Installing virtualization components</span></span> <a title="Permalink" class="permalink" href="cha-vt-installation.html#install-virtualization-components">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      You can install the virtualization tools required to run a VM Host Server in
      one of the following ways:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          By selecting a specific system role during <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> installation
          on the VM Host Server
        </p></li><li class="listitem"><p>
          By running the <span class="emphasis"><em>YaST Virtualization</em></span> module on
          an already installed and running <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
        </p></li><li class="listitem"><p>
          By installing specific installation patterns on an already installed
          and running <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
        </p></li></ul></div><section class="sect2" id="install-virtualization-components-system-role" data-id-title="Specifying a system role"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.2.1 </span><span class="title-name">Specifying a system role</span></span> <a title="Permalink" class="permalink" href="cha-vt-installation.html#install-virtualization-components-system-role">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        You can install all the tools required for virtualization during the
        installation of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> on the VM Host Server. During the installation,
        you are presented with the <span class="guimenu">System Role</span> screen.
      </p><div class="figure" id="id-1.12.3.7.4.4.3"><div class="figure-contents"><div class="mediaobject"><a href="images/virt-system-roles.png"><img src="images/virt-system-roles.png" width="75%" alt="System Role screen" title="System Role screen"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 6.1: </span><span class="title-name">System Role screen </span></span><a title="Permalink" class="permalink" href="cha-vt-installation.html#id-1.12.3.7.4.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml" title="Edit source document"> </a></div></div></div><p>
        Here you can select either the <span class="guimenu">KVM Virtualization
        Host</span> or the <span class="guimenu">Xen Virtualization Host</span> roles.
        The appropriate software selection and setup is automatically performed
        during <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> installation.
      </p><div id="id-1.12.3.7.4.4.5" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
          Both virtualization system roles create a dedicated
          <code class="filename">/var/lib/libvirt</code> partition, and enable the
          <code class="systemitem">firewalld</code> and Kdump services.
        </p></div></section><section class="sect2" id="install-virtualization-components-yast" data-id-title="Running the YaST Virtualization module"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.2.2 </span><span class="title-name">Running the <span class="emphasis"><em>YaST Virtualization</em></span> module</span></span> <a title="Permalink" class="permalink" href="cha-vt-installation.html#install-virtualization-components-yast">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Depending on the scope of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> installation on the VM Host Server,
        none of the virtualization tools may be installed on your system. They
        are automatically installed when configuring the hypervisor with the
        <span class="emphasis"><em>YaST Virtualization</em></span> module.
      </p><div id="id-1.12.3.7.4.5.3" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
          The <span class="emphasis"><em>YaST Virtualization</em></span> module is included in
          the <span class="package">yast2-vm</span> package. Verify it is installed on
          the VM Host Server before installing virtualization components.
        </p></div><div class="procedure" id="id-1.12.3.7.4.5.4" data-id-title="Installing the KVM environment"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 6.1: </span><span class="title-name">Installing the KVM environment </span></span><a title="Permalink" class="permalink" href="cha-vt-installation.html#id-1.12.3.7.4.5.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
          To install the KVM virtualization environment and related tools,
          proceed as follows:
        </p><ol class="procedure" type="1"><li class="step"><p>
            Start YaST and select
            <span class="guimenu">Virtualization</span> › <span class="guimenu">Install
            Hypervisor and Tools</span>.
          </p></li><li class="step"><p>
            Select <span class="guimenu">KVM server</span> for a minimal installation
            of QEMU and KVM environment. Select <span class="guimenu">KVM
            tools</span> to use the <code class="systemitem">libvirt</code>-based management
            stack as well. Confirm with <span class="guimenu">Accept</span>.
          </p></li><li class="step"><p>
            YaST offers to automatically configure a network bridge on the
            VM Host Server. It ensures proper networking capabilities of the
            VM Guest. Agree to do so by selecting <span class="guimenu">Yes</span>,
            otherwise choose <span class="guimenu">No</span>.
          </p></li><li class="step"><p>
            After the setup has been finished, you can start creating and
            configuring VM Guests. Rebooting the VM Host Server is not required.
          </p></li></ol></div></div><div class="procedure" id="id-1.12.3.7.4.5.5" data-id-title="Installing the Xen environment"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 6.2: </span><span class="title-name">Installing the Xen environment </span></span><a title="Permalink" class="permalink" href="cha-vt-installation.html#id-1.12.3.7.4.5.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
          To install the Xen virtualization environment, proceed as follows:
        </p><ol class="procedure" type="1"><li class="step"><p>
            Start YaST and select<span class="guimenu">Virtualization</span> › <span class="guimenu">Install Hypervisor and
            Tools</span>.
          </p></li><li class="step"><p>
            Select <span class="guimenu">Xen server</span> for a minimal installation
            of Xen environment. Select <span class="guimenu">Xen tools</span> to use
            the <code class="systemitem">libvirt</code>-based management stack as well. Confirm with
            <span class="guimenu">Accept</span>.
          </p></li><li class="step"><p>
            YaST offers to automatically configure a network bridge on the
            VM Host Server. It ensures proper networking capabilities of the
            VM Guest. Agree to do so by selecting <span class="guimenu">Yes</span>,
            otherwise choose <span class="guimenu">No</span>.
          </p></li><li class="step"><p>
            After the setup has been finished, you need to reboot the machine
            with the <span class="emphasis"><em>Xen kernel</em></span>.
          </p><div id="id-1.12.3.7.4.5.5.6.2" data-id-title="Default boot kernel" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Default boot kernel</div><p>
              If everything works as expected, change the default boot kernel
              with YaST and make the Xen-enabled kernel the default. For
              more information about changing the default kernel, see
              <span class="intraxref">Book “Administration Guide”, Chapter 18 “The boot loader GRUB 2”, Section 18.3 “Configuring the boot loader with YaST”</span>.
            </p></div></li></ol></div></div></section><section class="sect2" id="install-virtualization-components-pattern" data-id-title="Installing specific installation patterns"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.2.3 </span><span class="title-name">Installing specific installation patterns</span></span> <a title="Permalink" class="permalink" href="cha-vt-installation.html#install-virtualization-components-pattern">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Related software packages from <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> software repositories are
        organized into <span class="emphasis"><em>installation patterns</em></span>. You can use
        these patterns to install specific virtualization components on an
        already running <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. Use <code class="command">zypper</code> to install
        them:
      </p><div class="verbatim-wrap"><pre class="screen">zypper install -t pattern <em class="replaceable">PATTERN_NAME</em></pre></div><p>
        To install the KVM environment, consider the following patterns:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.12.3.7.4.6.5.1"><span class="term"><code class="literal">kvm_server</code></span></dt><dd><p>
              Installs basic VM Host Server with the KVM and QEMU environments.
            </p></dd><dt id="id-1.12.3.7.4.6.5.2"><span class="term"><code class="literal">kvm_tools</code></span></dt><dd><p>
              Installs <code class="systemitem">libvirt</code> tools for managing and monitoring VM Guests
              in KVM environment.
            </p></dd></dl></div><p>
        To install the Xen environment, consider the following patterns:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.12.3.7.4.6.7.1"><span class="term"><code class="literal">xen_server</code></span></dt><dd><p>
              Installs a basic Xen VM Host Server.
            </p></dd><dt id="id-1.12.3.7.4.6.7.2"><span class="term"><code class="literal">xen_tools</code></span></dt><dd><p>
              Installs <code class="systemitem">libvirt</code> tools for managing and monitoring VM Guests
              in Xen environment.
            </p></dd></dl></div></section></section><section class="sect1" id="sec-vt-installation-nested-vms" data-id-title="Enable nested virtualization in KVM"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.3 </span><span class="title-name">Enable nested virtualization in KVM</span></span> <a title="Permalink" class="permalink" href="cha-vt-installation.html#sec-vt-installation-nested-vms">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml" title="Edit source document"> </a></div></div></div></div></div><div id="id-1.12.3.7.5.2" data-id-title="Technology preview" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Technology preview</div><p>
        KVM's nested virtualization is still a technology preview. It is
        provided for testing purposes and is not supported.
      </p></div><p>
      Nested guests are KVM guests run in a KVM guest. When describing
      nested guests, we use the following virtualization layers:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.12.3.7.5.4.1"><span class="term">L0</span></dt><dd><p>
            A bare metal host running KVM.
          </p></dd><dt id="id-1.12.3.7.5.4.2"><span class="term">L1</span></dt><dd><p>
            A virtual machine running on L0. Because it can run another KVM,
            it is called a <span class="emphasis"><em>guest hypervisor</em></span>.
          </p></dd><dt id="id-1.12.3.7.5.4.3"><span class="term">L2</span></dt><dd><p>
            A virtual machine running on L1. It is called a <span class="emphasis"><em>nested
            guest</em></span>.
          </p></dd></dl></div><p>
      Nested virtualization has many advantages. You can benefit from it in the
      following scenarios:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          Manage your own virtual machines directly with your hypervisor of
          choice in cloud environments.
        </p></li><li class="listitem"><p>
          Enable the live migration of hypervisors and their guest virtual
          machines as a single entity.
        </p><div id="id-1.12.3.7.5.6.2.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
            Live migration of a nested VM Guest is not supported.
          </p></div></li><li class="listitem"><p>
          Use it for software development and testing.
        </p></li></ul></div><p>
      To enable nesting temporarily, remove the module and reload it with the
      <code class="option">nested</code> KVM module parameter:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          For Intel CPUs, run:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> modprobe -r kvm_intel &amp;&amp; modprobe kvm_intel nested=1</pre></div></li><li class="listitem"><p>
          For AMD CPUs, run:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> modprobe -r kvm_amd &amp;&amp; modprobe kvm_amd nested=1</pre></div></li></ul></div><p>
      To enable nesting permanently, enable the <code class="option">nested</code> KVM
      module parameter in the <code class="filename">/etc/modprobe.d/kvm_*.conf</code>
      file, depending on your CPU:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          For Intel CPUs, edit
          <code class="filename">/etc/modprobe.d/kvm_intel.conf</code> and add the
          following line:
        </p><div class="verbatim-wrap"><pre class="screen">options kvm_intel nested=1</pre></div></li><li class="listitem"><p>
          For AMD CPUs, edit <code class="filename">/etc/modprobe.d/kvm_amd.conf</code>
          and add the following line:
        </p><div class="verbatim-wrap"><pre class="screen">options kvm_amd nested=1</pre></div></li></ul></div><p>
      When your L0 host is capable of nesting, you can start an L1 guest in one
      of the following ways:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          Use the <code class="option">-cpu host</code> QEMU command line option.
        </p></li><li class="listitem"><p>
          Add the <code class="literal">vmx</code> (for Intel CPUs) or the
          <code class="literal">svm</code> (for AMD CPUs) CPU feature to the
          <code class="option">-cpu</code> QEMU command line option, which enables
          virtualization for the virtual CPU.
        </p></li></ul></div><section class="sect2" id="sec-vt-installation-nested-vms-esxi" data-id-title="VMware ESX as a guest hypervisor"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.3.1 </span><span class="title-name">VMware ESX as a guest hypervisor</span></span> <a title="Permalink" class="permalink" href="cha-vt-installation.html#sec-vt-installation-nested-vms-esxi">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vt_installation.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        If you use VMware ESX as a guest hypervisor on top of a KVM bare metal
        hypervisor, you may experience unstable network communication. This
        problem occurs especially between nested KVM guests and the KVM
        bare metal hypervisor or external network. The following default CPU
        configuration of the nested KVM guest is causing the problem:
      </p><div class="verbatim-wrap"><pre class="screen">&lt;cpu mode='host-model' check='partial'/&gt;</pre></div><p>
        To fix it, modify the CPU configuration as follow:
      </p><div class="verbatim-wrap"><pre class="screen">[...]
&lt;cpu mode='host-passthrough' check='none'&gt;
 &lt;cache mode='passthrough'/&gt;
&lt;/cpu&gt;
[...]</pre></div></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-tools-intro.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 5 </span>Virtualization tools</span></a> </div><div><a class="pagination-link next" href="cha-virt-support.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 7 </span>Virtualization limits and support</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-vt-installation.html#introduction-install-virtualization-components"><span class="title-number">6.1 </span><span class="title-name">Introduction</span></a></span></li><li><span class="sect1"><a href="cha-vt-installation.html#install-virtualization-components"><span class="title-number">6.2 </span><span class="title-name">Installing virtualization components</span></a></span></li><li><span class="sect1"><a href="cha-vt-installation.html#sec-vt-installation-nested-vms"><span class="title-number">6.3 </span><span class="title-name">Enable nested virtualization in KVM</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>