<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><title>SLE Micro 5.5 | Administration Guide</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Administration Guide | SLE Micro 5.5"/>
<meta name="description" content="This guide describes the administration of SUSE Linux Enterprise Micro."/>
<meta name="product-name" content="SUSE Linux Enterprise Micro"/>
<meta name="product-number" content="5.5"/>
<meta name="book-title" content="Administration Guide"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="jsindelarova@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE Linux Enterprise Micro 5.5"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Administration Guide | SLE Micro 5.5"/>
<meta property="og:description" content="This guide describes the administration of SUSE Linux Enter…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Administration Guide | SLE Micro 5.5"/>
<meta name="twitter:description" content="This guide describes the administration of SUSE Linux Enter…"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Administration Guide",
  
    "description": "This guide describes the administration of SUSE Linux Enterprise Micro.",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      

    "about": [
      {
        "@type": "Thing",
        "name": "Administration"
      }
    ],
  
    "mentions": [
      
      { "@type": "SoftwareApplication",
        "name": "SUSE Linux Enterprise Micro",
        "softwareVersion": "5.5",
        "applicationCategory": "Operating System",
        "operatingSystem": "Linux"
      }
      
    ],
    
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/book_admin_slemicro.xml"/></head><body class="draft single normal offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="#book-administration-slemicro">Administration Guide</a></div></div><main id="_content"><nav class="side-toc placebo" id="_side-toc-overall"> </nav><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section xml:lang="en" class="book" id="book-administration-slemicro" data-id-title="Administration Guide"><div class="titlepage"><div><div class="big-version-info"><span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Micro</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">5.5</span></span></span></div><div class="title-container"><h1 class="title">Administration Guide</h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_admin_slemicro.xml" title="Edit source document"> </a></div></div><div class="abstract"><p>
    This guide describes the administration of SUSE Linux Enterprise Micro.
   </p></div><div class="date"><span class="imprint-label">Publication Date: </span>October 08, 2024
</div></div></div><div class="toc"><ul><li><span class="preface"><a href="#preface-administration-slemicro"><span class="title-name">Preface</span></a></span><ul><li><span class="sect1"><a href="#id-1.8.2.3"><span class="title-name">Available documentation</span></a></span></li><li><span class="sect1"><a href="#id-1.8.2.4"><span class="title-name">Improving the documentation</span></a></span></li><li><span class="sect1"><a href="#id-1.8.2.5"><span class="title-name">Documentation conventions</span></a></span></li><li><span class="sect1"><a href="#id-1.8.2.6"><span class="title-name">Support</span></a></span></li></ul></li><li><span class="part"><a href="#part-common"><span class="title-number">I </span><span class="title-name">Common tasks</span></a></span><ul><li><span class="chapter"><a href="#cha-read-only-filesystem"><span class="title-number">1 </span><span class="title-name">Read-only file system</span></a></span><ul><li><span class="section"><a href="#sec-etc-overlay"><span class="title-number">1.1 </span><span class="title-name"><code class="filename">/etc</code> on a read-only file system</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-snapshots"><span class="title-number">2 </span><span class="title-name">Snapshots</span></a></span><ul><li><span class="section"><a href="#sec-exclude-directories"><span class="title-number">2.1 </span><span class="title-name">Directories excluded from snapshots</span></a></span></li><li><span class="section"><a href="#sec-snapshot-size"><span class="title-number">2.2 </span><span class="title-name">Showing exclusive disk space used by snapshots</span></a></span></li></ul></li><li><span class="chapter"><a href="#sec-transactional-udate"><span class="title-number">3 </span><span class="title-name">Administration using transactional updates</span></a></span><ul><li><span class="section"><a href="#sec-command-list"><span class="title-number">3.1 </span><span class="title-name"><code class="command">transactional-update</code> usage</span></a></span></li><li><span class="section"><a href="#sec-cleanup-algorithm"><span class="title-number">3.2 </span><span class="title-name">Snapshots cleanup</span></a></span></li><li><span class="section"><a href="#sec-rollback-procedure"><span class="title-number">3.3 </span><span class="title-name">System rollback</span></a></span></li><li><span class="section"><a href="#sec-automatic-updates"><span class="title-number">3.4 </span><span class="title-name">Managing automatic transactional updates</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-ulp"><span class="title-number">4 </span><span class="title-name">User space live patching</span></a></span><ul><li><span class="sect1"><a href="#sec-ulp"><span class="title-number">4.1 </span><span class="title-name">About user space live patching</span></a></span></li><li><span class="sect1"><a href="#sec-ulp-info"><span class="title-number">4.2 </span><span class="title-name">More information</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#part-networking-slemicro"><span class="title-number">II </span><span class="title-name">Networking</span></a></span><ul><li><span class="chapter"><a href="#cha-network"><span class="title-number">5 </span><span class="title-name">Basic networking</span></a></span><ul><li><span class="sect1"><a href="#sec-network-addresses"><span class="title-number">5.1 </span><span class="title-name">IP addresses and routing</span></a></span></li><li><span class="sect1"><a href="#sec-network-ipv6"><span class="title-number">5.2 </span><span class="title-name">IPv6—the next generation Internet</span></a></span></li><li><span class="sect1"><a href="#sec-network-nameres"><span class="title-number">5.3 </span><span class="title-name">Name resolution</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-nm-vs-wicked"><span class="title-number">6 </span><span class="title-name">NetworkManager and <code class="command">wicked</code></span></a></span><ul><li><span class="section"><a href="#sec-switching-wicked"><span class="title-number">6.1 </span><span class="title-name">Switching from <code class="command">wicked</code> to NetworkManager</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-nm-configuration"><span class="title-number">7 </span><span class="title-name">NetworkManager configuration and usage</span></a></span><ul><li><span class="section"><a href="#sec-restart-netmanager"><span class="title-number">7.1 </span><span class="title-name">Starting and stopping NetworkManager</span></a></span></li><li><span class="section"><a href="#sec-nmcli-interface"><span class="title-number">7.2 </span><span class="title-name">The <code class="command">nmcli</code> command</span></a></span></li><li><span class="section"><a href="#sec-networkmanager-conf"><span class="title-number">7.3 </span><span class="title-name">The <code class="filename">NetworkManager.conf</code> configuration file</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#part-slemicro-monitoring"><span class="title-number">III </span><span class="title-name">Monitoring and debugging</span></a></span><ul><li><span class="chapter"><a href="#cha-health-checker"><span class="title-number">8 </span><span class="title-name">Health checker</span></a></span><ul><li><span class="section"><a href="#sec-health-plugins"><span class="title-number">8.1 </span><span class="title-name">Adding custom plugins</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-admin-toolbox"><span class="title-number">9 </span><span class="title-name"><code class="literal">toolbox</code> for SLE Micro debugging</span></a></span></li><li><span class="chapter"><a href="#cha-performance-monitoring"><span class="title-number">10 </span><span class="title-name">Monitoring performance</span></a></span><ul><li><span class="section"><a href="#sec-getting-pcp"><span class="title-number">10.1 </span><span class="title-name">Getting the PCP container image</span></a></span></li><li><span class="section"><a href="#sec-starting-pcp"><span class="title-number">10.2 </span><span class="title-name">Running the PCP container</span></a></span></li><li><span class="section"><a href="#sec-pcp-services-configuration"><span class="title-number">10.3 </span><span class="title-name">Configuring PCP services</span></a></span></li><li><span class="section"><a href="#sec-autostart-onboot"><span class="title-number">10.4 </span><span class="title-name">Starting the PCP container automatically on boot</span></a></span></li><li><span class="section"><a href="#sec-collecting-metrics"><span class="title-number">10.5 </span><span class="title-name">Metrics management</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#part-slemicro-troubleshooting"><span class="title-number">IV </span><span class="title-name">Troubleshooting</span></a></span><ul><li><span class="chapter"><a href="#cha-adm-support-slemicro"><span class="title-number">11 </span><span class="title-name">Gathering system information for support</span></a></span><ul><li><span class="section"><a href="#sec-collecting-information"><span class="title-number">11.1 </span><span class="title-name">Collecting system information with <code class="command">supportconfig</code></span></a></span></li><li><span class="section"><a href="#sec-submitting-information"><span class="title-number">11.2 </span><span class="title-name">Submitting information to Global Technical Support</span></a></span></li><li><span class="section"><a href="#sec-gathering-yastlogs"><span class="title-number">11.3 </span><span class="title-name">Gathering information during the installation</span></a></span></li><li><span class="section"><a href="#sec-admsupport-kernel"><span class="title-number">11.4 </span><span class="title-name">Support of kernel modules</span></a></span></li></ul></li></ul></li></ul></div><div class="list-of-figures"><div class="toc-title">List of Figures</div><ul><li><span class="figure"><a href="#fig-net-basic-OSI"><span class="number">5.1 </span><span class="name">Simplified layer model for TCP/IP</span></a></span></li><li><span class="figure"><a href="#fig-net-basic-TCPPaket"><span class="number">5.2 </span><span class="name">TCP/IP Ethernet packet</span></a></span></li></ul></div><div class="list-of-tables"><div class="toc-title">List of Tables</div><ul><li><span class="table"><a href="#tab-net-basic-privat-net"><span class="number">5.1 </span><span class="name">Private IP address domains</span></a></span></li><li><span class="table"><a href="#tab-admsupport-features-and-filenames"><span class="number">11.1 </span><span class="name">Comparison of features and file names in the TAR archive</span></a></span></li></ul></div><div class="list-of-examples"><div class="toc-title">List of Examples</div><ul><li><span class="example"><a href="#aus-net-basic-ipaddress"><span class="number">5.1 </span><span class="name">Writing IP addresses</span></a></span></li><li><span class="example"><a href="#tab-net-basic-netmask"><span class="number">5.2 </span><span class="name">Linking IP addresses to the netmask</span></a></span></li><li><span class="example"><a href="#aus-net-ipv6-add"><span class="number">5.3 </span><span class="name">Sample IPv6 address</span></a></span></li><li><span class="example"><a href="#aus-net-ipv6-addpre"><span class="number">5.4 </span><span class="name">IPv6 address specifying the prefix length</span></a></span></li></ul></div><div><div xml:lang="en" class="legalnotice" id="id-1.8.1.7"><p>
  Copyright © 2006–2024

  SUSE LLC and contributors. All rights reserved.
 </p><p>
  Permission is granted to copy, distribute and/or modify this document under
  the terms of the GNU Free Documentation License, Version 1.2 or (at your
  option) version 1.3; with the Invariant Section being this copyright notice
  and license. A copy of the license version 1.2 is included in the section
  entitled <span class="quote">“<span class="quote">GNU Free Documentation License</span>”</span>.
 </p><p>
  For SUSE trademarks, see
  <a class="link" href="https://www.suse.com/company/legal/" target="_blank">https://www.suse.com/company/legal/</a>. All
  third-party trademarks are the property of their respective owners. Trademark
  symbols (®, ™ etc.) denote trademarks of SUSE and its affiliates.
  Asterisks (*) denote third-party trademarks.
 </p><p>
  All information found in this book has been compiled with utmost attention to
  detail. However, this does not guarantee complete accuracy. Neither
  SUSE LLC, its affiliates, the authors nor the translators shall be
  held liable for possible errors or the consequences thereof.
 </p></div></div><section class="preface" id="preface-administration-slemicro" data-id-title="Preface"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number"> </span><span class="title-name">Preface</span></span> <a title="Permalink" class="permalink" href="#preface-administration-slemicro">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/administration_intro.xml" title="Edit source document"> </a></div></div></div></div></div><section xml:lang="en" class="sect1" id="id-1.8.2.3" data-id-title="Available documentation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1 </span><span class="title-name">Available documentation</span></span> <a title="Permalink" class="permalink" href="#id-1.8.2.3">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_available_doc.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.2.3.3.1"><span class="term">Online documentation</span></dt><dd><p>
     Our documentation is available online at <a class="link" href="https://documentation.suse.com" target="_blank">https://documentation.suse.com</a>.
     Browse or download the documentation in various formats.
    </p><div id="id-1.8.2.3.3.1.2.2" data-id-title="Latest updates" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Latest updates</div><p>
      The latest updates are usually available in the English-language version of this documentation.
     </p></div></dd><dt id="id-1.8.2.3.3.2"><span class="term">SUSE Knowledgebase</span></dt><dd><p>
     If you run into an issue, check out the Technical Information
     Documents (TIDs) that are available online at <a class="link" href="https://www.suse.com/support/kb/" target="_blank">https://www.suse.com/support/kb/</a>.
     Search the SUSE Knowledgebase for known solutions driven by customer need.
     </p></dd><dt id="id-1.8.2.3.3.3"><span class="term">Release notes</span></dt><dd><p>
     For release notes, see
     <a class="link" href="https://www.suse.com/releasenotes/" target="_blank">https://www.suse.com/releasenotes/</a>.
    </p></dd><dt id="id-1.8.2.3.3.4"><span class="term">In your system</span></dt><dd><p>
      For offline use, the release notes are also available under
      <code class="filename">/usr/share/doc/release-notes</code> on your system.
      The documentation for individual packages is available at
      <code class="filename">/usr/share/doc/packages</code>.
    </p><p>
      Many commands are also described in their <span class="emphasis"><em>manual
      pages</em></span>. To view them, run <code class="command">man</code>, followed
      by a specific command name. If the <code class="command">man</code> command is
      not installed on your system, install it with <code class="command">sudo zypper
      install man</code>.
    </p></dd></dl></div></section><section xml:lang="en" class="sect1" id="id-1.8.2.4" data-id-title="Improving the documentation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2 </span><span class="title-name">Improving the documentation</span></span> <a title="Permalink" class="permalink" href="#id-1.8.2.4">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_feedback.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Your feedback and contributions to this documentation are welcome.
  The following channels for giving feedback are available:
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.2.4.4.1"><span class="term">Service requests and support</span></dt><dd><p>
     For services and support options available for your product, see
     <a class="link" href="https://www.suse.com/support/" target="_blank">https://www.suse.com/support/</a>.
    </p><p>
     To open a service request, you need a SUSE subscription registered at
     SUSE Customer Center.
     Go to <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a>, log
     in, and click <span class="guimenu">Create New</span>.
    </p></dd><dt id="id-1.8.2.4.4.2"><span class="term">Bug reports</span></dt><dd><p>
     Report issues with the documentation at <a class="link" href="https://bugzilla.suse.com/" target="_blank">https://bugzilla.suse.com/</a>.
    </p><p>
     To simplify this process, click the <span class="guimenu">Report
     an issue</span> icon next to a headline in the HTML
     version of this document. This preselects the right product and
     category in Bugzilla and adds a link to the current section.
     You can start typing your bug report right away.
    </p><p>
     A Bugzilla account is required.
    </p></dd><dt id="id-1.8.2.4.4.3"><span class="term">Contributions</span></dt><dd><p>
     To contribute to this documentation, click the <span class="guimenu">Edit source
     document</span> icon next to a headline in the HTML version of
     this document. This will take you to the source code on GitHub, where you
     can open a pull request.</p><p>
     A GitHub account is required.
    </p><div id="id-1.8.2.4.4.3.2.3" data-id-title="Edit source document only available for English" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: <span class="guimenu">Edit source document</span> only available for English</div><p>
      The <span class="guimenu">Edit source document</span> icons are only available for the
      English version of each document. For all other languages, use the
      <span class="guimenu">Report an issue</span> icons instead.
     </p></div><p>
     For more information about the documentation environment used for this
     documentation, see the repository's README.
    </p></dd><dt id="id-1.8.2.4.4.4"><span class="term">Mail</span></dt><dd><p>
     You can also report errors and send feedback concerning the
     documentation to &lt;<a class="email" href="mailto:doc-team@suse.com">doc-team@suse.com</a>&gt;. Include the
     document title, the product version, and the publication date of the
     document. Additionally, include the relevant section number and title (or
     provide the URL) and provide a concise description of the problem.
    </p></dd></dl></div></section><section xml:lang="en" class="sect1" id="id-1.8.2.5" data-id-title="Documentation conventions"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Documentation conventions</span></span> <a title="Permalink" class="permalink" href="#id-1.8.2.5">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_convention.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The following notices and typographic conventions are used in this
  document:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    <code class="filename">/etc/passwd</code>: Directory names and file names
   </p></li><li class="listitem"><p>
    <em class="replaceable">PLACEHOLDER</em>: Replace
    <em class="replaceable">PLACEHOLDER</em> with the actual value
   </p></li><li class="listitem"><p>
    <code class="envar">PATH</code>: An environment variable
   </p></li><li class="listitem"><p>
    <code class="command">ls</code>, <code class="option">--help</code>: Commands, options, and
    parameters
   </p></li><li class="listitem"><p>
    <code class="systemitem">user</code>: The name of a user or group
   </p></li><li class="listitem"><p>
    <span class="package">package_name</span>: The name of a software package
   </p></li><li class="listitem"><p>
    <span class="keycap">Alt</span>, <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>: A key to press or a key combination. Keys
    are shown in uppercase as on a keyboard.
   </p></li><li class="listitem"><p>
    <span class="guimenu">File</span>, <span class="guimenu">File</span> › <span class="guimenu">Save
    As</span>: menu items, buttons
   </p></li><li class="listitem"><p><strong class="arch-arrow-start">AMD/Intel</strong>
    This paragraph is only relevant for the AMD64/Intel 64 architectures. The
    arrows mark the beginning and the end of the text block.
   <strong class="arch-arrow-end"> </strong></p><p><strong class="arch-arrow-start">IBM Z, POWER</strong>
    This paragraph is only relevant for the architectures
    <code class="literal">IBM Z</code> and <code class="literal">POWER</code>. The arrows
    mark the beginning and the end of the text block.
   <strong class="arch-arrow-end"> </strong></p></li><li class="listitem"><p>
    <em class="citetitle">Chapter 1, <span class="quote">“<span class="quote">Example chapter</span>”</span></em>:
    A cross-reference to another chapter in this guide.
   </p></li><li class="listitem"><p>
    Commands that must be run with <code class="systemitem">root</code> privileges. You can also
    prefix these commands with the <code class="command">sudo</code> command to run them
    as a non-privileged user:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">command</code>
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">command</code></pre></div></li><li class="listitem"><p>
    Commands that can be run by non-privileged users:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">command</code></pre></div></li><li class="listitem"><p>
    Commands can be split into two or multiple lines by a backslash character
    (<code class="literal">\</code>) at the end of a line. The backslash informs the shell that
    the command invocation will continue after the end of the line:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">echo</code> a b \
c d</pre></div></li><li class="listitem"><p>
     A code block that shows both the command (preceded by a prompt)
     and the respective output returned by the shell:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">command</code>
output</pre></div></li><li class="listitem"><p>
    Notices
   </p><div id="id-1.8.2.5.4.15.2" data-id-title="Warning notice" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Warning notice</div><p>
     Vital information you must be aware of before proceeding. Warns you about
     security issues, potential loss of data, damage to hardware, or physical
     hazards.
    </p></div><div id="id-1.8.2.5.4.15.3" data-id-title="Important notice" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Important notice</div><p>
     Important information you should be aware of before proceeding.
    </p></div><div id="id-1.8.2.5.4.15.4" data-id-title="Note notice" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Note notice</div><p>
     Additional information, for example about differences in software
     versions.
    </p></div><div id="id-1.8.2.5.4.15.5" data-id-title="Tip notice" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Tip notice</div><p>
     Helpful information, like a guideline or a piece of practical advice.
    </p></div></li><li class="listitem"><p>
    Compact Notices
   </p><div id="id-1.8.2.5.4.16.2" class="admonition note compact"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><p>
     Additional information, for example about differences in software
     versions.
    </p></div><div id="id-1.8.2.5.4.16.3" class="admonition tip compact"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><p>
     Helpful information, like a guideline or a piece of practical advice.
    </p></div></li></ul></div></section><section xml:lang="en" class="sect1" id="id-1.8.2.6" data-id-title="Support"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4 </span><span class="title-name">Support</span></span> <a title="Permalink" class="permalink" href="#id-1.8.2.6">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Find the support statement for <span class="productname"><span class="phrase">SUSE Linux Enterprise Micro</span></span> and general information about
  technology previews below.
  For details about the product lifecycle, see
  <a class="link" href="https://www.suse.com/lifecycle" target="_blank">https://www.suse.com/lifecycle</a>.
  
  
 </p><p>
  If you are entitled to support, find details on how to collect information
  for a support ticket at
  <a class="link" href="https://documentation.suse.com/sles-15/html/SLES-all/cha-adm-support.html" target="_blank">https://documentation.suse.com/sles-15/html/SLES-all/cha-adm-support.html</a>.
 </p><section class="sect2" id="id-1.8.2.6.5" data-id-title="Support statement for SUSE Linux Enterprise Micro"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1 </span><span class="title-name">Support statement for <span class="productname"><span class="phrase">SUSE Linux Enterprise Micro</span></span></span></span> <a title="Permalink" class="permalink" href="#id-1.8.2.6.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To receive support, you need an appropriate subscription with SUSE.
   To view the specific support offers available to you, go to
   <a class="link" href="https://www.suse.com/support/" target="_blank">https://www.suse.com/support/</a> and select your product.
  </p><p>
   The support levels are defined as follows:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.2.6.5.4.1"><span class="term">L1</span></dt><dd><p>
      Problem determination, which means technical support designed to provide
      compatibility information, usage support, ongoing maintenance,
      information gathering and basic troubleshooting using available
      documentation.
     </p></dd><dt id="id-1.8.2.6.5.4.2"><span class="term">L2</span></dt><dd><p>
      Problem isolation, which means technical support designed to analyze
      data, reproduce customer problems, isolate a problem area and provide a
      resolution for problems not resolved by Level 1 or prepare for
      Level 3.
     </p></dd><dt id="id-1.8.2.6.5.4.3"><span class="term">L3</span></dt><dd><p>
      Problem resolution, which means technical support designed to resolve
      problems by engaging engineering to resolve product defects which have
      been identified by Level 2 Support.
     </p></dd></dl></div><p>
   For contracted customers and partners, <span class="productname"><span class="phrase">SUSE Linux Enterprise Micro</span></span> is delivered with L3
   support for all packages, except for the following:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Technology previews.
    </p></li><li class="listitem"><p>
     Sound, graphics, fonts, and artwork.
    </p></li><li class="listitem"><p>
     Packages that require an additional customer contract.
    </p></li><li class="listitem"><p>
     Packages with names ending in <span class="package">-devel</span> (containing header
     files and similar developer resources) will only be supported together
     with their main packages.
    </p></li></ul></div><p>
   SUSE will only support the usage of original packages.
   That is, packages that are unchanged and not recompiled.
  </p></section><section class="sect2" id="id-1.8.2.6.6" data-id-title="Technology previews"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.2 </span><span class="title-name">Technology previews</span></span> <a title="Permalink" class="permalink" href="#id-1.8.2.6.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Technology previews are packages, stacks, or features delivered by SUSE
   to provide glimpses into upcoming innovations.
   Technology previews are included for your convenience to give you a chance
   to test new technologies within your environment.
   We would appreciate your feedback.
   If you test a technology preview, please contact your SUSE representative
   and let them know about your experience and use cases.
   Your input is helpful for future development.
  </p><p>
   Technology previews have the following limitations:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Technology previews are still in development.
     Therefore, they may be functionally incomplete, unstable, or otherwise
     <span class="emphasis"><em>not</em></span> suitable for production use.
    </p></li><li class="listitem"><p>
     Technology previews are <span class="emphasis"><em>not</em></span> supported.
    </p></li><li class="listitem"><p>
     Technology previews may only be available for specific hardware
     architectures.
    </p></li><li class="listitem"><p>
     Details and functionality of technology previews are subject to change.
     As a result, upgrading to subsequent releases of a technology preview may
     be impossible and require a fresh installation.
    </p></li><li class="listitem"><p>
     SUSE may discover that a preview does not meet customer or market needs,
     or does not comply with enterprise standards.
     Technology previews can be removed from a product at any time.
     SUSE does not commit to providing a supported version of such
     technologies in the future.
    </p></li></ul></div><p>
   For an overview of technology previews shipped with your product, see the
   release notes at <a class="link" href="https://www.suse.com/releasenotes" target="_blank">https://www.suse.com/releasenotes</a>.
  </p></section></section></section><div class="part" id="part-common" data-id-title="Common tasks"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part I </span><span class="title-name">Common tasks </span></span><a title="Permalink" class="permalink" href="#part-common">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_admin_slemicro.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#cha-read-only-filesystem"><span class="title-number">1 </span><span class="title-name">Read-only file system</span></a></span></li><dd class="toc-abstract"><p>
    This chapter focuses on the characteristics of the read-only file system
    that is used by SLE Micro.  
   </p></dd><li><span class="chapter"><a href="#cha-snapshots"><span class="title-number">2 </span><span class="title-name">Snapshots</span></a></span></li><dd class="toc-abstract"><p>
    This chapter describes managing snapshots and gives details about directories included in snapshots.  
   </p></dd><li><span class="chapter"><a href="#sec-transactional-udate"><span class="title-number">3 </span><span class="title-name">Administration using transactional updates</span></a></span></li><dd class="toc-abstract"><p>This chapter describes the usage of the
      <code class="command">transactional-update</code> command.</p></dd><li><span class="chapter"><a href="#cha-ulp"><span class="title-number">4 </span><span class="title-name">User space live patching</span></a></span></li><dd class="toc-abstract"><p>
        This chapter describes the basic principles and usage of user space
        live patching.
      </p></dd></ul></div><section xml:lang="en" class="chapter" id="cha-read-only-filesystem" data-id-title="Read-only file system"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">1 </span><span class="title-name">Read-only file system</span></span> <a title="Permalink" class="permalink" href="#cha-read-only-filesystem">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_read-only_fs.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    This chapter focuses on the characteristics of the read-only file system
    that is used by SLE Micro.  
   </p></div></div></div></div><p>
  SLE Micro was designed to use a read-only root file system. This means that
  after the deployment is complete, you are not able to perform direct
  modifications to the root file system, e.g. by using
  <code class="command">zypper</code>. Instead, SUSE Linux Enterprise Micro introduces the concept of
  transactional updates which enables you to modify your system and keep it up
  to date.
 </p><p>
  The key features of transactional updates are the following:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    They are atomic - the update is applied only if it completes successfully.
   </p></li><li class="listitem"><p>
    Changes are applied in a separate snapshot and so do not influence the
    running system.
   </p></li><li class="listitem"><p>
    Changes can easily be rolled back.
   </p></li></ul></div><section class="sect1" id="sec-etc-overlay" data-id-title="/etc on a read-only file system"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.1 </span><span class="title-name"><code class="filename">/etc</code> on a read-only file system</span></span> <a title="Permalink" class="permalink" href="#sec-etc-overlay">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_read-only_fs.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Even though <code class="filename">/etc</code> is part of the read-only file system,
   using an <code class="literal">OverlayFS</code> layer on this directory enables you to
   write to this directory. All modifications that you performed on the content
   of <code class="filename">/etc</code> are written to the
   <code class="filename">/var/lib/overlay/<em class="replaceable">SNAPSHOT_NUMBER</em>/etc</code>.
   Each snapshot has one associated <code class="literal">OverlayFS</code> directory.
  </p><p>
   Whenever a new snapshot is created (for example, as a result of a system
   update), the content of <code class="filename">/etc</code> is synchronized and used
   as a base in the new snapshot. In the <code class="literal">OverlayFS</code>
   terminology, the current snapshot's <code class="filename">/etc</code> is mounted as
   <code class="literal">lowerdir</code>. The new snapshot's <code class="filename">/etc</code> is
   mounted as <code class="literal">upperdir</code>. If there were no changes in the
   <code class="literal">upperdir</code> <code class="filename">/etc</code>, any changes performed
   to the <code class="literal">lowerdir</code> are visible to the
   <code class="literal">upperdir</code>. Therefore, the new snapshot also contains the
   changes from the current snapshot's <code class="filename">/etc</code>.
  </p><div id="id-1.8.3.2.6.4" data-id-title="Concurrent modification of lowerdir and upperdir" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Concurrent modification of <code class="literal">lowerdir</code> and <code class="literal">upperdir</code></div><p>
    If <code class="filename">/etc</code> in both snapshots is modified, only the
    changes in the new snapshot (<code class="literal">upperdir</code>) persist. Changes
    made to the current snapshot (<code class="literal">lowerdir</code>) are not
    synchronized to the new snapshot. Therefore, we do not recommend changing
    <code class="filename">/etc</code> after a new snapshot has been created and the
    system has not been rebooted. However, you can still find the changes in
    the <code class="filename">/var/lib/overlay/</code> directory for the snapshot in
    which the changes were performed.
   </p></div><div id="id-1.8.3.2.6.5" data-id-title="Using the --continue option of the transactional-update command" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Using the <code class="literal">--continue</code> option of the <code class="command">transactional-update</code> command</div><p>
    If you use the <code class="literal">--continue</code> option of the
    <code class="command">transactional-update</code> command when performing changes to
    the file system, all <code class="filename">/etc</code> directory layers created by
    each separate run of <code class="command">transactional-update</code>, except for
    the one in the newest snapshot, are synchronized to the
    <code class="literal">lowerdir</code> (the <code class="literal">lowerdir</code> can have
    several mount points).
   </p></div></section></section><section xml:lang="en" class="chapter" id="cha-snapshots" data-id-title="Snapshots"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">2 </span><span class="title-name">Snapshots</span></span> <a title="Permalink" class="permalink" href="#cha-snapshots">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_snapshots.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    This chapter describes managing snapshots and gives details about directories included in snapshots.  
   </p></div></div></div></div><div id="id-1.8.3.3.3" data-id-title="Snapshots are mandatory" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Snapshots are mandatory</div><p>
   As snapshots are crucial for the correct functioning of SLE Micro, do not
   disable the feature, and ensure that the root partition is big enough to
   store the snapshots.
  </p></div><p>
  When a snapshot is created, both the snapshot and the original point to the
  same blocks in the file system. So, initially a snapshot does not occupy
  additional disk space. If data in the original file system is modified,
  changed data blocks are copied while the old data blocks are kept for the
  snapshot.
 </p><p>
  Snapshots always reside on the same partition or subvolume on which the
  snapshot has been taken. It is not possible to store snapshots on a different
  partition or subvolume. As a result, partitions containing snapshots need to
  be larger than partitions which do not contain snapshots. The exact amount
  depends strongly on the number of snapshots you keep and the amount of data
  modifications. As a rule of thumb, give partitions twice as much space as you
  normally would. To prevent disks from running out of space, old snapshots are
  automatically cleaned up.
 </p><p>
  Snapshots that are known to be working properly are marked as
  <span class="emphasis"><em>important</em></span>.
 </p><section class="sect1" id="sec-exclude-directories" data-id-title="Directories excluded from snapshots"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.1 </span><span class="title-name">Directories excluded from snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-exclude-directories">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_snapshots.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   As some directories store user-specific or volatile data, these directories
   are excluded from snapshots:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.3.3.7.3.1"><span class="term"><code class="filename">/home</code></span></dt><dd><p>
      Contains users' data. Excluded so that the data will not be included in
      snapshots and thus potentially overwritten by a rollback operation.
     </p></dd><dt id="id-1.8.3.3.7.3.2"><span class="term"><code class="filename">/root</code></span></dt><dd><p>
      Contains root's data. Excluded so that the data will not be included in
      snapshots and thus potentially overwritten by a rollback operation.
     </p></dd><dt id="id-1.8.3.3.7.3.3"><span class="term"><code class="filename">/opt</code></span></dt><dd><p>
      Third-party products usually get installed to <code class="filename">/opt</code>.
      Excluded so that these applications are not uninstalled during rollbacks.
     </p></dd><dt id="id-1.8.3.3.7.3.4"><span class="term"><code class="filename">/srv</code></span></dt><dd><p>
      Contains data for Web and FTP servers. Excluded in order to avoid data
      loss on rollbacks.
     </p></dd><dt id="id-1.8.3.3.7.3.5"><span class="term"><code class="filename">/usr/local</code></span></dt><dd><p>
      This directory is used when manually installing software. It is excluded
      to avoid uninstalling these installations on rollbacks.
     </p></dd><dt id="id-1.8.3.3.7.3.6"><span class="term"><code class="filename">/var</code></span></dt><dd><p>
      This directory contains many variable files, including logs, temporary
      caches, third-party products in <code class="filename">/var/opt</code>, and is the
      default location for virtual machine images and databases. Therefore, a
      separate subvolume is created with Copy-On-Write disabled, so as to
      exclude all of this variable data from snapshots.
     </p></dd><dt id="id-1.8.3.3.7.3.7"><span class="term"><code class="filename">/tmp</code></span></dt><dd><p>
      The directory contains temporary data.
     </p></dd><dt id="id-1.8.3.3.7.3.8"><span class="term">the architecture-specific <code class="filename">/boot/grub2</code> directory</span></dt><dd><p>
      Rollback of the boot loader binaries is not supported.
     </p></dd></dl></div></section><section class="sect1" id="sec-snapshot-size" data-id-title="Showing exclusive disk space used by snapshots"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.2 </span><span class="title-name">Showing exclusive disk space used by snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-snapshot-size">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_snapshots.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Snapshots share data, for efficient use of storage space, so using ordinary
   commands like <code class="command">du</code> and <code class="command">df</code> won't measure
   used disk space accurately. When you want to free up disk space on Btrfs
   with quotas enabled, you need to know how much exclusive disk space is used
   by each snapshot, rather than shared space. The <code class="command">btrfs</code>
   command provides a view of space used by snapshots:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>btrfs qgroup show -p /
qgroupid         rfer         excl parent  
--------         ----         ---- ------  
0/5          16.00KiB     16.00KiB ---     
[...]    
0/272         3.09GiB     14.23MiB 1/0     
0/273         3.11GiB    144.00KiB 1/0     
0/274         3.11GiB    112.00KiB 1/0     
0/275         3.11GiB    128.00KiB 1/0     
0/276         3.11GiB     80.00KiB 1/0     
0/277         3.11GiB    256.00KiB 1/0     
0/278         3.11GiB    112.00KiB 1/0     
0/279         3.12GiB     64.00KiB 1/0     
0/280         3.12GiB     16.00KiB 1/0     
1/0           3.33GiB    222.95MiB ---</pre></div><p>
   The <code class="literal">qgroupid</code> column displays the identification number
   for each subvolume, assigning a qgroup level/ID combination.
  </p><p>
   The <code class="literal">rfer</code> column displays the total amount of data
   referred to in the subvolume.
  </p><p>
   The <code class="literal">excl</code> column displays the exclusive data in each
   subvolume.
  </p><p>
   The <code class="literal">parent</code> column shows the parent qgroup of the
   subvolumes.
  </p><p>
   The final item, <code class="literal">1/0</code>, shows the totals for the parent
   qgroup. In the above example, 222.95 MiB will be freed if all subvolumes are
   removed. Run the following command to see which snapshots are associated
   with each subvolume:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>btrfs subvolume list -st /</pre></div></section></section><section xml:lang="en" class="chapter" id="sec-transactional-udate" data-id-title="Administration using transactional updates"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Administration using transactional updates</span></span> <a title="Permalink" class="permalink" href="#sec-transactional-udate">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>This chapter describes the usage of the
      <code class="command">transactional-update</code> command.</p></div></div></div></div><div id="id-1.8.3.4.3" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning</div><p>
      In case you do not reboot your machine before performing further changes,
      the <code class="command">transactional-update</code> command will create a new
      snapshot from the current root file system. This means that you will end
      up with several parallel snapshots, each including that particular change
      but not changes from the other invocations of the command. After reboot,
      the most recently created snapshot will be used as your new root file
      system, and it will not include changes done in the previous snapshots.
    </p></div><section class="sect1" id="sec-command-list" data-id-title="transactional-update usage"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.1 </span><span class="title-name"><code class="command">transactional-update</code> usage</span></span> <a title="Permalink" class="permalink" href="#sec-command-list">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The <code class="command">transactional-update</code> command enables the atomic
      installation or removal of updates; updates are applied only if all of
      them can be successfully installed.
      <code class="command">transactional-update</code> creates a snapshot of your system
      and uses it to update the system. Later you can restore this snapshot. All
      changes become active only after reboot.
    </p><p>
      The <code class="command">transactional-update</code> command syntax is as follows:
    </p><div class="verbatim-wrap"><pre class="screen">transactional-update <code class="option">[option]</code> <em class="replaceable">[general_command]</em> <em class="replaceable">[package_command]</em> <em class="replaceable">standalone_command</em></pre></div><div id="id-1.8.3.4.4.5" data-id-title="Running transactional-update without arguments" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Running <code class="command">transactional-update</code>
      without arguments</div><p>
        If you do not specify any command or option while running the
        <code class="command">transactional-update</code> command, the system updates
        itself.
      </p></div><p>
      Possible command parameters are described further.
    </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name"><code class="command">transactional-update</code> options </span></span><a title="Permalink" class="permalink" href="#id-1.8.3.4.4.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.8.3.4.4.7.2"><span class="term"><code class="literal">--interactive, -i</code></span></dt><dd><p>
            Can be used along with a package command to turn on interactive
            mode.
          </p></dd><dt id="id-1.8.3.4.4.7.3"><span class="term"><code class="literal">--non-interactive, -n</code></span></dt><dd><p>
            Can be used along with a package command to turn on non-interactive
            mode.
          </p></dd><dt id="id-1.8.3.4.4.7.4"><span class="term"><code class="literal">--continue [<em class="replaceable">number</em>], -c</code></span></dt><dd><p>
            The <code class="command">--continue</code> option is for making multiple
            changes to an existing snapshot without rebooting.
          </p><p>
            The default <code class="command">transactional-update</code> behavior is to
            create a new snapshot from the current root file system. If you
            forget something, such as installing a new package, you have to
            reboot to apply your previous changes, run
            <code class="command">transactional-update</code> again to install the
            forgotten package, and reboot again. You cannot run the
            <code class="command">transactional-update</code> command multiple times
            without rebooting to add more changes to the snapshot, because this
            will create separate independent snapshots that do not include
            changes from the previous snapshots.
          </p><p>
            Use the <code class="command">--continue</code> option to make as many
            changes as you want without rebooting. A separate snapshot is made
            each time, and each snapshot contains all the changes you made in
            the previous snapshots, plus your new changes. Repeat this process
            as many times as you want, and when the final snapshot includes
            everything you want, reboot the system, and your final snapshot
            becomes the new root file system.
          </p><p>
            Another useful feature of the <code class="command">--continue</code> option
            is that you may select any existing snapshot as the base for your new
            snapshot. The following example demonstrates running
            <code class="command">transactional-update</code> to install a new package in
            a snapshot based on snapshot 13, and then running it again to
            install another package:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg install <em class="replaceable">package_1</em></code></pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update --continue 13 pkg install <em class="replaceable">package_2</em></code></pre></div></dd><dt id="id-1.8.3.4.4.7.5"><span class="term"><code class="literal">--no-selfupdate</code></span></dt><dd><p>
            Disables self-updating of <code class="command">transactional-update</code>.
          </p></dd><dt id="id-1.8.3.4.4.7.6"><span class="term"><code class="literal">--drop-if-no-change, -d</code></span></dt><dd><p>
            Discards the snapshot created by
            <code class="command">transactional-update</code> if there were no changes to
            the root file system. If there are some changes to the
            <code class="filename">/etc</code> directory, those changes are
            merged back to the current file system.
          </p></dd><dt id="id-1.8.3.4.4.7.7"><span class="term"><code class="literal">--quiet</code></span></dt><dd><p>
            The <code class="command">transactional-update</code> command will not output
            to <code class="literal">stdout</code>.
          </p></dd><dt id="id-1.8.3.4.4.7.8"><span class="term"><code class="literal">--help, -h</code></span></dt><dd><p>
            Prints help for the <code class="command">transactional-update</code>
            command.
          </p></dd><dt id="id-1.8.3.4.4.7.9"><span class="term"><code class="literal">--version</code></span></dt><dd><p>
            Displays the version of the <code class="command">transactional-update</code>
            command.
          </p></dd></dl></div><p>
      The general commands are the following:
    </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">General commands </span></span><a title="Permalink" class="permalink" href="#id-1.8.3.4.4.9">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.8.3.4.4.9.2"><span class="term"><code class="literal">cleanup-snapshots</code></span></dt><dd><p>
            The command marks all unused snapshots that are intended to be
            removed.
          </p></dd><dt id="id-1.8.3.4.4.9.3"><span class="term"><code class="literal">cleanup-overlays</code></span></dt><dd><p>
            The command removes all unused overlay layers of
            <code class="filename">/etc</code>.
          </p></dd><dt id="id-1.8.3.4.4.9.4"><span class="term"><code class="literal">cleanup</code></span></dt><dd><p>
            The command combines the <code class="literal">cleanup-snapshots</code> and
            <code class="literal">cleanup-overlays</code> commands. For more
            details, refer to <a class="xref" href="#sec-cleanup-algorithm" title="3.2. Snapshots cleanup">Section 3.2, “Snapshots cleanup”</a>.
          </p></dd><dt id="id-1.8.3.4.4.9.5"><span class="term"><code class="literal">grub.cfg</code></span></dt><dd><p>
            Use this command to rebuild the GRUB boot loader configuration
            file.
          </p></dd><dt id="id-1.8.3.4.4.9.6"><span class="term"><code class="literal">bootloader</code></span></dt><dd><p>
            The command reinstalls the boot loader.
          </p></dd><dt id="id-1.8.3.4.4.9.7"><span class="term"><code class="literal">initrd</code></span></dt><dd><p>
            Use the command to rebuild <code class="literal">initrd</code>.
          </p></dd><dt id="id-1.8.3.4.4.9.8"><span class="term"><code class="literal">kdump</code></span></dt><dd><p>
            If you perform changes to your hardware or storage, you may
            need to rebuild the kdump initrd.
          </p></dd><dt id="id-1.8.3.4.4.9.9"><span class="term"><code class="literal">shell</code></span></dt><dd><p>
            Opens a read-write shell in the new snapshot before exiting. The
            command is typically used for debugging purposes.
          </p></dd><dt id="id-1.8.3.4.4.9.10"><span class="term"><code class="literal">reboot</code></span></dt><dd><p>
            The system reboots after the transactional-update is complete.
          </p></dd><dt id="id-1.8.3.4.4.9.11"><span class="term"><code class="literal">run </code><em class="replaceable">&lt;command&gt;</em></span></dt><dd><p>
            Runs the provided command in a new snapshot.
          </p></dd><dt id="id-1.8.3.4.4.9.12"><span class="term"><code class="literal">setup-selinux</code></span></dt><dd><p>
            Installs and enables the targeted SELinux policy.
          </p></dd></dl></div><p>
      The package commands are the following:
    </p><div id="id-1.8.3.4.4.11" data-id-title="Installing packages outside of the official SLE Micro repositories" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Installing packages outside of the official <span class="productname"><span class="phrase">SLE Micro</span></span> repositories</div><p>
        The installation of packages from repositories other than
        the official ones (for example, the SUSE Linux Enterprise Server repositories) is
        <span class="bold"><strong>not</strong></span> supported and not
        recommended. To use the tools available for SUSE Linux Enterprise Server, run the
        <code class="literal">toolbox</code> container and install the tools inside
        the container. For details about the <code class="literal">toolbox</code>
        container, refer to <a class="xref" href="#cha-admin-toolbox" title="Chapter 9. toolbox for SLE Micro debugging">Chapter 9, <em><code class="literal">toolbox</code> for SLE Micro debugging</em></a>.
      </p></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Package commands </span></span><a title="Permalink" class="permalink" href="#id-1.8.3.4.4.12">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.8.3.4.4.12.2"><span class="term"><code class="literal">dup</code></span></dt><dd><p>
            Performs an upgrade of your system. The default option for this
            command is <code class="literal">--non-interactive</code>.
          </p></dd><dt id="id-1.8.3.4.4.12.3"><span class="term"><code class="literal">migration</code></span></dt><dd><p>
            The command migrates your system to a selected target. Typically, it
            is used to upgrade your system if it has been registered via SUSE Customer Center.
          </p></dd><dt id="id-1.8.3.4.4.12.4"><span class="term"><code class="literal">patch</code></span></dt><dd><p>
            Checks for available patches and installs them. The default option
            for this command is <code class="literal">--non-interactive</code>.
          </p></dd><dt id="id-1.8.3.4.4.12.5"><span class="term"><code class="literal">pkg install</code></span></dt><dd><p>
            Installs individual packages from the available channels using the
            <code class="command">zypper install</code> command. This command can also be
            used to install Program Temporary Fix (PTF) RPM files. The default
            option for this command is <code class="literal">--interactive</code>.
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg install <em class="replaceable">package_name</em></code></pre></div><p>
            or
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg install <em class="replaceable">rpm1 rpm2</em></code></pre></div></dd><dt id="id-1.8.3.4.4.12.6"><span class="term"><code class="literal">pkg remove</code></span></dt><dd><p>
            Removes individual packages from the active snapshot using the
            <code class="command">zypper remove</code> command. This command can also be
            used to remove PTF RPM files. The default option for this command
            is <code class="literal">--interactive</code>.
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg remove <em class="replaceable">package_name</em></code></pre></div></dd><dt id="id-1.8.3.4.4.12.7"><span class="term"><code class="literal">pkg update</code></span></dt><dd><p>
            Updates individual packages from the active snapshot using the
            <code class="command">zypper update</code> command. Only packages that are
            part of the snapshot of the base file system can be updated. The
            default option for this command is
            <code class="literal">--interactive</code>.
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg update <em class="replaceable">package_name</em></code></pre></div></dd><dt id="id-1.8.3.4.4.12.8"><span class="term"><code class="literal">register</code></span></dt><dd><p>
            The <code class="literal">register</code> command enables you to
            register/deregister your system. For a complete usage
            description, refer to <a class="xref" href="#sec-register-command" title="3.1.1. The register command">Section 3.1.1, “The <code class="literal">register</code> command”</a>.
          </p></dd><dt id="id-1.8.3.4.4.12.9"><span class="term"><code class="literal">up</code></span></dt><dd><p>
            Updates installed packages to newer versions. The default option
            for this command is <code class="literal">--non-interactive</code>.
          </p></dd></dl></div><p>
      The standalone commands are the following:
    </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Standalone commands </span></span><a title="Permalink" class="permalink" href="#id-1.8.3.4.4.14">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.8.3.4.4.14.2"><span class="term"><code class="literal">rollback</code> <em class="replaceable">&lt;snapshot number&gt;</em></span></dt><dd><p>
            This sets the default subvolume. The current system is set as the
            new default root file system. If you specify a number, that
            snapshot is used as the default root file system. On a read-only
            file system, it does not create any additional snapshots.
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update rollback <em class="replaceable">snapshot_number</em></code></pre></div></dd><dt id="id-1.8.3.4.4.14.3"><span class="term"><code class="literal">rollback last</code></span></dt><dd><p>
            This command sets the last known to be working snapshot as the
            default.
          </p></dd></dl></div><section class="sect2" id="sec-register-command" data-id-title="The register command"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.1.1 </span><span class="title-name">The <code class="literal">register</code> command</span></span> <a title="Permalink" class="permalink" href="#sec-register-command">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The <code class="literal">register</code> command enables you to handle all tasks
        regarding registration and subscription management. You can supply the
        following options:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.3.4.4.15.3.1"><span class="term"><code class="literal">--list-extensions</code></span></dt><dd><p>
              With this option, the command will list available extensions for
              your system. You can use the output to find a product identifier
              for product activation.
            </p></dd><dt id="id-1.8.3.4.4.15.3.2"><span class="term"><code class="literal">-p, --product</code></span></dt><dd><p>
              Use this option to specify a product for activation. The product
              identifier has the following format:
              <span class="emphasis"><em>&lt;name&gt;/&lt;version&gt;/&lt;architecture&gt;</em></span>,
              for example,
              <code class="literal">sle-module-live-patching/15.3/x86_64</code>. The
              appropriate command will then be the following:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>transactional-update register -p sle-module-live-patching/15.3/x86_64</pre></div></dd><dt id="id-1.8.3.4.4.15.3.3"><span class="term"><code class="literal">-r, --regcode</code></span></dt><dd><p>
              Register your system with the provided registration code. The
              command will register the subscription and enable software
              repositories.
            </p></dd><dt id="id-1.8.3.4.4.15.3.4"><span class="term"><code class="literal">-d, --de-register</code></span></dt><dd><p>
              The option deregisters the system, or when used along with the
              <code class="literal">-p</code> option, deregisters an extension.
            </p></dd><dt id="id-1.8.3.4.4.15.3.5"><span class="term"><code class="literal">-e, --email</code></span></dt><dd><p>
              Specify an email address that will be used in SUSE Customer Center for
              registration.
            </p></dd><dt id="id-1.8.3.4.4.15.3.6"><span class="term"><code class="literal">--url</code></span></dt><dd><p>
              Specify the URL of your registration server. The URL is stored in
              the configuration and will be used in subsequent command
              invocations. For example:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>transactional-update register --url https://scc.suse.com</pre></div></dd><dt id="id-1.8.3.4.4.15.3.7"><span class="term"><code class="literal">-s, --status</code></span></dt><dd><p>
              Displays the current registration status in JSON format.
            </p></dd><dt id="id-1.8.3.4.4.15.3.8"><span class="term"><code class="literal">--write-config</code></span></dt><dd><p>
              Writes the provided options value to the
              <code class="filename">/etc/SUSEConnect</code> configuration file.
            </p></dd><dt id="id-1.8.3.4.4.15.3.9"><span class="term"><code class="literal">--cleanup</code></span></dt><dd><p>
              Removes old system credentials.
            </p></dd><dt id="id-1.8.3.4.4.15.3.10"><span class="term"><code class="literal">--version</code></span></dt><dd><p>
              Prints the version.
            </p></dd><dt id="id-1.8.3.4.4.15.3.11"><span class="term"><code class="literal">--help</code></span></dt><dd><p>
              Displays the usage of the command.
            </p></dd></dl></div></section></section><section class="sect1" id="sec-cleanup-algorithm" data-id-title="Snapshots cleanup"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.2 </span><span class="title-name">Snapshots cleanup</span></span> <a title="Permalink" class="permalink" href="#sec-cleanup-algorithm">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      If you run the command <code class="command">transactional-update cleanup</code>,
      all old snapshots without a cleanup algorithm will have one set. All
      important snapshots are also marked. The command also removes all
      unreferenced (and thus unused) <code class="filename">/etc</code> overlay
      directories in <code class="filename">/var/lib/overlay</code>.
    </p><p>
      The snapshots with the set <code class="literal">number</code> cleanup algorithm
      will be deleted according to the rules configured in
      <code class="filename">/etc/snapper/configs/root</code> by the following
      parameters:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.3.4.5.4.1"><span class="term">NUMBER_MIN_AGE</span></dt><dd><p>
            Defines the minimum age of a snapshot (in seconds) that can be
            automatically removed.
          </p></dd><dt id="id-1.8.3.4.5.4.2"><span class="term">NUMBER_LIMIT/NUMBER_LIMIT_IMPORTANT</span></dt><dd><p>
            Defines the maximum count of stored snapshots. The cleaning
            algorithms delete snapshots above the specified maximum value,
            without taking into account the snapshot and file system space. The
            algorithms also delete snapshots above the minimum value until the
            limits for the snapshot and file system are reached.
          </p></dd></dl></div><p>
      The snapshot cleanup is also regularly performed by <code class="systemitem">systemd</code>.
    </p></section><section class="sect1" id="sec-rollback-procedure" data-id-title="System rollback"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.3 </span><span class="title-name">System rollback</span></span> <a title="Permalink" class="permalink" href="#sec-rollback-procedure">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      GRUB 2 enables booting from btrfs snapshots and thus allows you to use
      any older functional snapshot in case the new snapshot does not work
      correctly.
    </p><p>
      When booting a snapshot, the parts of the file system included in the
      snapshot are mounted read-only; all other file systems and parts that are
      excluded from snapshots are mounted read-write and can be modified.
    </p><div id="id-1.8.3.4.6.4" data-id-title="Rolling back to a specific installation state" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Rolling back to a specific installation state</div><p>
        An initial bootable snapshot is created at the end of the initial
        system installation. You can go back to that state at any time by
        booting this snapshot. The snapshot can be identified by the
        description <code class="literal">after installation</code>.
      </p></div><p>
      There are two methods to perform a system rollback.
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          From a running system, you can set the default snapshot, see more in
          <a class="xref" href="#proc-running-snapshot" title="Rollback from a running system">Procedure 3.1, “Rollback from a running system”</a>.
        </p></li><li class="listitem"><p>
          Especially in cases where the current snapshot is broken, you can
          boot into the new snapshot and set it to default. For details, refer
          to <a class="xref" href="#proc-boot-snapshot" title="Rollback to a working snapshot">Procedure 3.2, “Rollback to a working snapshot”</a>.
        </p></li></ul></div><p>
      If your current snapshot is functional, you can use the following
      procedure for a system rollback.
    </p><div class="procedure" id="proc-running-snapshot" data-id-title="Rollback from a running system"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 3.1: </span><span class="title-name">Rollback from a running system </span></span><a title="Permalink" class="permalink" href="#proc-running-snapshot">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
          Choose the snapshot that should be set as default, run:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>snapper list</pre></div><p>
          to get a list of available snapshots. Note the number of the snapshot
          to be set as default.
        </p></li><li class="step"><p>
          Set the snapshot as default by running:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>transactional-update rollback <em class="replaceable">snapshot_number</em></pre></div><p>
          If you omit the <em class="replaceable">snapshot number</em>, the
          current snapshot will be set as default.
        </p></li><li class="step"><p>
          Reboot your system to boot into the new default snapshot.
        </p></li></ol></div></div><p>
      The following procedure is used in case the current snapshot is broken
      and you are not able to boot into it.
    </p><div class="procedure" id="proc-boot-snapshot" data-id-title="Rollback to a working snapshot"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 3.2: </span><span class="title-name">Rollback to a working snapshot </span></span><a title="Permalink" class="permalink" href="#proc-boot-snapshot">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
          Reboot your system and select <code class="literal">Start bootloader from a
          read-only snapshot</code>.
        </p></li><li class="step"><p>
          Choose a snapshot to boot. The snapshots are sorted according to the
          date of creation, with the latest one at the top.
        </p></li><li class="step"><p>
          Log in to your system and check whether everything works as expected.
          The data written to directories excluded from the snapshots will stay
          untouched.
        </p></li><li class="step"><p>
          If the snapshot you booted into is not suitable for the rollback,
          reboot your system and choose another one.
        </p><p>
          If the snapshot works as expected, you can perform the rollback by
          running the following command:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update rollback</code></pre></div><p>
          And reboot afterwards.
        </p></li></ol></div></div></section><section class="sect1" id="sec-automatic-updates" data-id-title="Managing automatic transactional updates"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.4 </span><span class="title-name">Managing automatic transactional updates</span></span> <a title="Permalink" class="permalink" href="#sec-automatic-updates">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Automatic updates are controlled by <code class="command">systemd.timer</code>
      that runs once per day. This applies all updates and informs
      <code class="command">rebootmgrd</code> that the machine should be rebooted. You
      may adjust the time when the update runs, see systemd.timer(5)
      documentation.
    </p><p>
      You can disable automatic transactional updates with this command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">systemctl --now disable transactional-update.timer</code></pre></div></section></section><section xml:lang="en" class="chapter" id="cha-ulp" data-id-title="User space live patching"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">4 </span><span class="title-name">User space live patching</span></span> <a title="Permalink" class="permalink" href="#cha-ulp">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
        This chapter describes the basic principles and usage of user space
        live patching.
      </p></div></div></div></div><section class="sect1" id="sec-ulp" data-id-title="About user space live patching"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.1 </span><span class="title-name">About user space live patching</span></span> <a title="Permalink" class="permalink" href="#sec-ulp">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><div id="id-1.8.3.5.3.2" data-id-title="Technical preview" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Technical preview</div><p>
        On SLE Micro, ULP is a technical preview only.
      </p></div><div id="id-1.8.3.5.3.3" data-id-title="Live patching on SLE Micro" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Live patching on SLE Micro</div><p>
        Only the currently running processes are affected by the live patches.
        As the libraries are changed in the new snapshot and
        <span class="bold"><strong>not</strong></span> in the current one, new processes
        started in the current snapshot still use the non-patched libraries
        until you reboot. After the reboot, the system switches to the new
        snapshot and all started processes will use the patched libraries.
      </p></div><p>
      User space live patching (ULP) refers to the process of applying
      patches to the libraries used by a running process without interrupting
      them. Every time a security fix is available as a live patch, customer
      services will be secured after applying the live patch without restarting
      the processes.
    </p><p>
      Live patching operations are performed using the
      <code class="systemitem">ulp</code> tool that is part of
      <code class="systemitem">libpulp</code>. <code class="systemitem">libpulp</code> is a
      framework that consists of the <code class="systemitem">libpulp.so</code>
      library and the <code class="command">ulp</code> binary that makes libraries live
      patchable and applies live patches.
    </p><div id="id-1.8.3.5.3.6" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
        You can run the <code class="command">ulp</code> command either as a normal user
        or a privileged user via the <code class="command">sudo</code> mechanism. The difference is that
        running <code class="command">ulp</code> via <code class="command">sudo</code> lets you view information of
        processes or patch processes that are running by <code class="systemitem">root</code>.
      </p></div><section class="sect2" id="sec-ulp-prereqs" data-id-title="Prerequisites"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1.1 </span><span class="title-name">Prerequisites</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-prereqs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        For ULP to work, two requirements must be met.
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
            Install the ULP on your system by running:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>transactional-update pkg in libpulp0 libpulp-tools</pre></div><p>
            After successful installation, reboot your system.
          </p></li><li class="listitem"><p>
            Applications with desired live patch support must be launched
            preloading the <code class="systemitem">libpulp.so.0</code> library. See
            <a class="xref" href="#sec-ulp-libpulp" title="4.1.3. Using libpulp">Section 4.1.3, “Using <code class="systemitem">libpulp</code>”</a> for more details.
          </p></li></ul></div></section><section class="sect2" id="sec-ulp-supported-libs" data-id-title="Supported libraries"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1.2 </span><span class="title-name">Supported libraries</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-supported-libs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Currently, only <code class="systemitem">glibc</code> and
        <code class="systemitem">openssl</code> (<code class="systemitem">openssl1_1</code>)
        are supported. Additional packages will be available after they are
        prepared for live patching. To receive <code class="systemitem">glibc</code>
        and <code class="systemitem">openssl</code> live patches, install both
        <span class="package">glibc-livepatches</span> and
        <span class="package">openssl-livepatches</span> packages:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>transactional-update pkg in glibc-livepatches openssl-livepatches</pre></div><p>
        After successful installation, reboot your system.
      </p></section><section class="sect2" id="sec-ulp-libpulp" data-id-title="Using libpulp"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1.3 </span><span class="title-name">Using <code class="systemitem">libpulp</code></span></span> <a title="Permalink" class="permalink" href="#sec-ulp-libpulp">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        To enable live patching on an application, you need to preload the
        <code class="systemitem">libpulp.so.0</code> library when starting the
        application:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>LD_PRELOAD=/usr/lib64/libpulp.so.0 <em class="replaceable">APPLICATION_CMD</em></pre></div><section class="sect3" id="sec-ulp-livepatch-check" data-id-title="Checking if a library is live patchable"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.1.3.1 </span><span class="title-name">Checking if a library is live patchable</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-livepatch-check">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          To check whether a library is live patchable, use the following
          command:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp livepatchable <em class="replaceable">PATH_TO_LIBRARY</em></pre></div></section><section class="sect3" id="sec-ulp-livepatch-container-check" data-id-title="Checking if a .so file is a live patch container"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.1.3.2 </span><span class="title-name">Checking if a <code class="filename">.so</code> file is a live patch container</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-livepatch-container-check">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          A shared object (<code class="filename">.so</code>) is a live patch container
          if it contains the ULP patch description embedded into it. You can
          verify it with the following command:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>readelf -S <em class="replaceable">SHARED_OBJECT</em> | grep .ulp</pre></div><p>
          If the output shows that there are both <code class="literal">.ulp</code> and
          <code class="literal">.ulp.rev</code> sections in the shared object, then it is
          a live patch container.
        </p></section><section class="sect3" id="sec-ulp-apply-livepatch" data-id-title="Applying live patches"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.1.3.3 </span><span class="title-name">Applying live patches</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-apply-livepatch">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          Live patches are applied using the <code class="command">ulp trigger</code>
          command, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp trigger -p <em class="replaceable">PID</em> <em class="replaceable">LIVEPATCH</em>.so</pre></div><p>
          Replace <code class="literal">PID</code> with the process ID of the running
          process that uses the library to be patched and
          <code class="literal">LIVEPATCH.so</code> with the actual live patch file. The
          command returns one of the following status messages:
        </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.3.5.3.9.6.5.1"><span class="term">SUCCESS</span></dt><dd><p>
                The live patching operation was successful.
              </p></dd><dt id="id-1.8.3.5.3.9.6.5.2"><span class="term">SKIPPED</span></dt><dd><p>
                The patch was skipped because it was not designed for any
                library that is loaded in the process.
              </p></dd><dt id="id-1.8.3.5.3.9.6.5.3"><span class="term">ERROR</span></dt><dd><p>
                An error occurred, and you can retrieve more information by
                inspecting the <code class="systemitem">libpulp</code> internal
                message buffer. See <a class="xref" href="#sec-ulp-internal-messages" title="4.1.3.6. View internal message queue">Section 4.1.3.6, “View internal message queue”</a>
                for more information.
              </p></dd></dl></div><p>
          It is also possible to apply multiple live patches by using
          wildcards, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp trigger '*.so'</pre></div><p>
          The command tries to apply every patch in the current folder to every
          process that have the <code class="systemitem">libpulp</code> library
          loaded. If the patch is not suitable for the process, it is
          automatically skipped. In the end, the tool shows how many patches it
          successfully applied to how many processes.
        </p></section><section class="sect3" id="sec-ulp-revert-livepatch" data-id-title="Reverting live patches"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.1.3.4 </span><span class="title-name">Reverting live patches</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-revert-livepatch">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          You can use the <code class="command">ulp trigger</code> command to revert live
          patches. There are two ways to revert live patches. You can revert a
          live patch by using the <code class="option">--revert</code> switch and passing
          the live patch container:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp trigger -p <em class="replaceable">PID</em> --revert <em class="replaceable">LIVEPATCH</em>.so</pre></div><p>
          Alternatively, it is possible to remove all patches associated with a
          particular library, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp trigger -p <em class="replaceable">PID</em> --revert-all=<em class="replaceable">LIBRARY</em></pre></div><p>
          In the example, <em class="replaceable">LIBRARY</em> refers to the
          actual library, such as <code class="systemitem">libcrypto.so.1.1</code>.
        </p><p>
          The latter approach can be useful when the source code of the
          original live patch is not available. Or you want to remove a
          specific old patch and apply a new one while the target application
          is still running a secure code, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp trigger -p <em class="replaceable">PID</em>  --revert-all=libcrypto.so.1.1 new_livepatch2.so</pre></div></section><section class="sect3" id="sec-ulp-verify-patches" data-id-title="View applied patches"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.1.3.5 </span><span class="title-name">View applied patches</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-verify-patches">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          It is possible to verify which applications have live patches applied
          by running:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp patches</pre></div><p>
          The output shows which libraries are live patchable and patches
          loaded in programs, as well which bugs the patch addresses:
        </p><div class="verbatim-wrap"><pre class="screen">PID: 10636, name: test
  Livepatchable libraries:
    in /lib64/libc.so.6:
      livepatch: libc_livepatch1.so
        bug labels: jsc#SLE-0000
    in /usr/lib64/libpulp.so.0:</pre></div><p>
          It is also possible to see which functions are patched by the live
          patch:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp dump <em class="replaceable">LIVEPATCH.so</em></pre></div></section><section class="sect3" id="sec-ulp-internal-messages" data-id-title="View internal message queue"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.1.3.6 </span><span class="title-name">View internal message queue</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-internal-messages">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          Log messages from <code class="systemitem">libpulp.so</code> are stored in a
          buffer inside the library and are not displayed unless requested by
          the user. To show these messages, run:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp messages -p <em class="replaceable">PID</em></pre></div></section></section></section><section class="sect1" id="sec-ulp-info" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.2 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-info">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Further information about <code class="systemitem">libpulp</code> is available
      in the project's <a class="link" href="https://github.com/SUSE/libpulp" target="_blank">Git
      repository</a>.
    </p></section></section></div><div class="part" id="part-networking-slemicro" data-id-title="Networking"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part II </span><span class="title-name">Networking </span></span><a title="Permalink" class="permalink" href="#part-networking-slemicro">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_admin_slemicro.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#cha-network"><span class="title-number">5 </span><span class="title-name">Basic networking</span></a></span></li><dd class="toc-abstract"><p>
    Linux offers the necessary networking tools and features for integration
    into all types of network structures. Network access using a network card
    can be configured with YaST. Manual configuration is also possible. In
    this chapter, only the fundamental mechanisms and the relevant network
    configuration files are covered.
   </p></dd><li><span class="chapter"><a href="#cha-nm-vs-wicked"><span class="title-number">6 </span><span class="title-name">NetworkManager and <code class="command">wicked</code></span></a></span></li><dd class="toc-abstract"><p>
    This chapter focuses on the difference between NetworkManager and
    <code class="command">wicked</code> and provides a description how to switch from <code class="command">wicked</code> to NetworkManager.
   </p></dd><li><span class="chapter"><a href="#cha-nm-configuration"><span class="title-number">7 </span><span class="title-name">NetworkManager configuration and usage</span></a></span></li><dd class="toc-abstract"><p>
    NetworkManager is shipped so it can run out of the box, but you might need to
    reconfigure or restart the tool. This chapter focuses on these tasks.
   </p></dd></ul></div><section class="chapter" id="cha-network" data-id-title="Basic networking"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">5 </span><span class="title-name">Basic networking</span></span> <a title="Permalink" class="permalink" href="#cha-network">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Linux offers the necessary networking tools and features for integration
    into all types of network structures. Network access using a network card
    can be configured with YaST. Manual configuration is also possible. In
    this chapter, only the fundamental mechanisms and the relevant network
    configuration files are covered.
   </p></div></div></div></div><p>
  Linux and other Unix operating systems use the TCP/IP protocol. It is not a
  single network protocol, but a family of network protocols that offer multiple
  services. The protocols listed in <a class="xref" href="#tab-net-basic-tcpproto" title="Several protocols in the TCP/IP protocol family">Several protocols in the TCP/IP protocol family</a>
  are provided for exchanging data between two machines via TCP/IP. Networks
  combined by TCP/IP, comprising a worldwide network, are also called
  <span class="quote">“<span class="quote">the Internet.</span>”</span>
 </p><p>
  RFC stands for <span class="emphasis"><em>Request for Comments</em></span>. RFCs are documents
  that describe Internet protocols and implementation procedures for
  the operating system and its applications. The RFC documents describe the
  setup of Internet protocols. For more information about RFCs, see
  <a class="link" href="https://datatracker.ietf.org/" target="_blank">https://datatracker.ietf.org/</a>.
 </p><div class="variablelist" id="tab-net-basic-tcpproto" data-id-title="Several protocols in the TCP/IP protocol family"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Several protocols in the TCP/IP protocol family </span></span><a title="Permalink" class="permalink" href="#tab-net-basic-tcpproto">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.8.4.2.5.2"><span class="term">TCP</span></dt><dd><p>
     Transmission Control Protocol: a connection-oriented secure protocol. The
     data to transmit is first sent by the application as a stream of data and
     converted into the appropriate format by the operating system. The data
     arrives at the respective application on the destination host in the
     original data stream format it was initially sent. TCP determines whether
     any data has been lost or jumbled during the transmission. TCP is
     implemented wherever the data sequence matters.
    </p></dd><dt id="id-1.8.4.2.5.3"><span class="term">UDP</span></dt><dd><p>
     User Datagram Protocol: a connectionless, insecure protocol. The data to
     transmit is sent in the form of packets generated by the application. The
     order in which the data arrives at the recipient is not guaranteed and
     data loss is possible. UDP is suitable for record-oriented applications.
     It features a smaller latency period than TCP.
    </p></dd><dt id="id-1.8.4.2.5.4"><span class="term">ICMP</span></dt><dd><p>
     Internet Control Message Protocol: this is not a protocol for the end
     user, but a special control protocol that issues error reports and can
     control the behavior of machines participating in TCP/IP data transfer. In
     addition, it provides a special echo mode that can be viewed using the
     program ping.
    </p></dd><dt id="id-1.8.4.2.5.5"><span class="term">IGMP</span></dt><dd><p>
     Internet Group Management Protocol: this protocol controls machine
     behavior when implementing IP multicast.
    </p></dd></dl></div><p>
  As shown in <a class="xref" href="#fig-net-basic-OSI" title="Simplified layer model for TCP/IP">Figure 5.1, “Simplified layer model for TCP/IP”</a>, data exchange takes place in
  different layers. The actual network layer is the insecure data transfer via
  IP (Internet protocol). On top of IP, TCP (transmission control protocol)
  guarantees, to a certain extent, security of the data transfer. The IP layer
  is supported by the underlying hardware-dependent protocol, such as Ethernet.
 </p><div class="figure" id="fig-net-basic-OSI"><div class="figure-contents"><div class="mediaobject"><a href="images/net_basic_osi.png"><img src="images/net_basic_osi.png" width="75%" alt="OSI and TCP" title="OSI and TCP"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 5.1: </span><span class="title-name">Simplified layer model for TCP/IP </span></span><a title="Permalink" class="permalink" href="#fig-net-basic-OSI">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div><p>
  The diagram provides one or two examples for each layer. The layers are
  ordered according to <span class="emphasis"><em>abstraction levels</em></span>. The lowest layer
  is close to the hardware. The uppermost layer, however, is almost a complete
  abstraction from the hardware. Every layer has its own special function. The
  special functions of each layer are implicit in their description. The data
  link and physical layers represent the physical network used, such as
  Ethernet.
 </p><p>
  Almost all hardware protocols work on a packet-oriented basis. The data to
  transmit is collected into <span class="emphasis"><em>packets</em></span> (it cannot be sent all
  at once). The maximum size of a TCP/IP packet is approximately 64 KB. Packets
  are normally small, as the network hardware can be a limiting factor. The
  maximum size of a data packet on Ethernet is about fifteen hundred bytes. The
  size of a TCP/IP packet is limited to this amount when the data is sent over
  Ethernet. If more data is transferred, more data packets need to be sent by
  the operating system.
 </p><p>
  For the layers to serve their designated functions, additional information
  regarding each layer must be saved in the data packet. This takes place in
  the <span class="emphasis"><em>header</em></span> of the packet. Every layer attaches a small
  block of data, called the protocol header, to the front of each emerging
  packet. A sample TCP/IP data packet traveling over an Ethernet cable is
  illustrated in <a class="xref" href="#fig-net-basic-TCPPaket" title="TCP/IP Ethernet packet">Figure 5.2, “TCP/IP Ethernet packet”</a>. The proof sum is
  located at the end of the packet, not at the beginning. This simplifies
  things for the network hardware.
 </p><div class="figure" id="fig-net-basic-TCPPaket"><div class="figure-contents"><div class="mediaobject"><a href="images/net_basic_tcppacket.png"><img src="images/net_basic_tcppacket.png" width="75%" alt="TCP/IP Ethernet packet" title="TCP/IP Ethernet packet"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 5.2: </span><span class="title-name">TCP/IP Ethernet packet </span></span><a title="Permalink" class="permalink" href="#fig-net-basic-TCPPaket">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div><p>
  When an application sends data over the network, the data passes through each
  layer, all implemented in the Linux kernel except the physical layer. Each
  layer handles preparing the data so it can be passed to the next layer. The
  lowest layer is ultimately responsible for sending the data. The entire
  procedure is reversed when data is received. Like the layers of an onion, in
  each layer the protocol headers are removed from the transported data.
  Finally, the transport layer handles making the data available for use by the
  applications at the destination. In this manner, one layer only communicates
  with the layer directly above or below it. For applications, it is irrelevant
  whether data is transmitted via a wireless or wired connection. Likewise, it
  is irrelevant for the data line which kind of data is transmitted, if packets
  are in the correct format.
 </p><section class="sect1" id="sec-network-addresses" data-id-title="IP addresses and routing"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.1 </span><span class="title-name">IP addresses and routing</span></span> <a title="Permalink" class="permalink" href="#sec-network-addresses">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The discussion in this section is limited to IPv4 networks. For information
   about IPv6 protocol, the successor to IPv4, refer to
   <a class="xref" href="#sec-network-ipv6" title="5.2. IPv6—the next generation Internet">Section 5.2, “IPv6—the next generation Internet”</a>.
  </p><section class="sect2" id="sec-network-addresses-ip" data-id-title="IP addresses"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">5.1.1 </span><span class="title-name">IP addresses</span></span> <a title="Permalink" class="permalink" href="#sec-network-addresses-ip">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Every computer on the Internet has a unique 32-bit address. These 32 bits
    (or 4 bytes) are normally written as illustrated in the second row in
    <a class="xref" href="#aus-net-basic-ipaddress" title="Writing IP addresses">Example 5.1, “Writing IP addresses”</a>.
   </p><div class="example" id="aus-net-basic-ipaddress" data-id-title="Writing IP addresses"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 5.1: </span><span class="title-name">Writing IP addresses </span></span><a title="Permalink" class="permalink" href="#aus-net-basic-ipaddress">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">IP Address (binary):  11000000 10101000 00000000 00010100
IP Address (decimal):      192.     168.       0.      20</pre></div></div></div><p>
    In decimal form, the four bytes are written in the decimal number system,
    separated by periods. The IP address is assigned to a host or a network
    interface. It can be used only once throughout the world. There are
    exceptions to this rule, but these are not relevant to the following
    passages.
   </p><p>
    The points in IP addresses indicate the hierarchical system. Until the
    1990s, IP addresses were strictly categorized in classes. However, this
    system proved too inflexible and was discontinued. Now, <span class="emphasis"><em>classless
    routing</em></span> (CIDR, classless interdomain routing) is used.
   </p></section><section class="sect2" id="sec-network-addresses-route" data-id-title="Netmasks and routing"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">5.1.2 </span><span class="title-name">Netmasks and routing</span></span> <a title="Permalink" class="permalink" href="#sec-network-addresses-route">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Netmasks are used to define the address range of a subnet. If two hosts are
    in the same subnet, they can reach each other directly. If they are not in
    the same subnet, they need the address of a gateway that handles all the
    traffic for the subnet. To check if two IP addresses are in the same
    subnet, simply <span class="quote">“<span class="quote">AND</span>”</span> both addresses with the netmask. If the
    result is identical, both IP addresses are in the same local network. If
    there are differences, the remote IP address, and thus the remote
    interface, can only be reached over a gateway.
   </p><p>
    To understand how the netmask works, look at
    <a class="xref" href="#tab-net-basic-netmask" title="Linking IP addresses to the netmask">Example 5.2, “Linking IP addresses to the netmask”</a>. The netmask consists of 32 bits
    that identify how much of an IP address belongs to the network. All those
    bits that are <code class="literal">1</code> mark the corresponding bit in the IP
    address as belonging to the network. All bits that are <code class="literal">0</code>
    mark bits inside the subnet. This means that the more bits are
    <code class="literal">1</code>, the smaller the subnet is. Because the netmask always
    consists of several successive <code class="literal">1</code> bits, it is also
    possible to count the number of bits in the netmask. In
    <a class="xref" href="#tab-net-basic-netmask" title="Linking IP addresses to the netmask">Example 5.2, “Linking IP addresses to the netmask”</a> the first net with 24 bits could
    also be written as <code class="literal">192.168.0.0/24</code>.
   </p><div class="example" id="tab-net-basic-netmask" data-id-title="Linking IP addresses to the netmask"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 5.2: </span><span class="title-name">Linking IP addresses to the netmask </span></span><a title="Permalink" class="permalink" href="#tab-net-basic-netmask">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">IP address (192.168.0.20):  11000000 10101000 00000000 00010100
Netmask   (255.255.255.0):  11111111 11111111 11111111 00000000
---------------------------------------------------------------
Result of the link:         11000000 10101000 00000000 00000000
In the decimal system:           192.     168.       0.       0

IP address (213.95.15.200): 11010101 10111111 00001111 11001000
Netmask    (255.255.255.0): 11111111 11111111 11111111 00000000
---------------------------------------------------------------
Result of the link:         11010101 10111111 00001111 00000000
In the decimal system:           213.      95.      15.       0</pre></div></div></div><p>
    To give another example: all machines connected with the same Ethernet
    cable are normally located in the same subnet and are directly accessible.
    Even when the subnet is physically divided by switches or bridges, these
    hosts can still be reached directly.
   </p><p>
    IP addresses outside the local subnet can only be reached if a gateway is
    configured for the target network. In the most common case, there is only
    one gateway that handles all traffic that is external. However, it is also
    possible to configure several gateways for different subnets.
   </p><p>
    If a gateway has been configured, all external IP packets are sent to the
    appropriate gateway. This gateway then attempts to forward the packets in
    the same manner—from host to host—until it reaches the
    destination host or the packet's TTL (time to live) expires.
   </p><div class="variablelist" id="net-basic-spezial-net" data-id-title="Specific addresses"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Specific addresses </span></span><a title="Permalink" class="permalink" href="#net-basic-spezial-net">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.8.4.2.13.4.8.2"><span class="term">Base Network Address</span></dt><dd><p>
       This is the netmask AND any address in the network, as shown in
       <a class="xref" href="#tab-net-basic-netmask" title="Linking IP addresses to the netmask">Example 5.2, “Linking IP addresses to the netmask”</a> under <code class="literal">Result</code>.
       This address cannot be assigned to any hosts.
      </p></dd><dt id="id-1.8.4.2.13.4.8.3"><span class="term">Broadcast Address</span></dt><dd><p>
       This could be paraphrased as: <span class="quote">“<span class="quote">Access all hosts in this
       subnet.</span>”</span> To generate this, the netmask is inverted in binary form
       and linked to the base network address with a logical OR. The above
       example therefore results in 192.168.0.255. This address cannot be
       assigned to any hosts.
      </p></dd><dt id="id-1.8.4.2.13.4.8.4"><span class="term">Local Host</span></dt><dd><p>
       The address <code class="systemitem">127.0.0.1</code> is
       assigned to the <span class="quote">“<span class="quote">loopback device</span>”</span> on each host. A
       connection can be set up to your own machine with this address and with
       all addresses from the complete
       <code class="systemitem">127.0.0.0/8</code> loopback network
       as defined with IPv4. With IPv6 there is only one loopback address
       (<code class="systemitem">::1</code>).
      </p></dd></dl></div><p>
    Because IP addresses must be unique all over the world, you cannot select
    random addresses. There are three address domains to use to set up a private
    IP-based network. These cannot get any connection from the rest of the
    Internet, because they cannot be transmitted over the Internet. These
    address domains are specified in RFC 1597 and listed in
    <a class="xref" href="#tab-net-basic-privat-net" title="Private IP address domains">Table 5.1, “Private IP address domains”</a>.
   </p><div class="table" id="tab-net-basic-privat-net" data-id-title="Private IP address domains"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 5.1: </span><span class="title-name">Private IP address domains </span></span><a title="Permalink" class="permalink" href="#tab-net-basic-privat-net">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Network/Netmask
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Domain
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="systemitem">10.0.0.0</code>/<code class="systemitem">255.0.0.0</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="systemitem">10.x.x.x</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="systemitem">172.16.0.0</code>/<code class="systemitem">255.240.0.0</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="systemitem">172.16.x.x</code> –
         <code class="systemitem">172.31.x.x</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <code class="systemitem">192.168.0.0</code>/<code class="systemitem">255.255.0.0</code>
        </p>
       </td><td>
        <p>
         <code class="systemitem">192.168.x.x</code>
        </p>
       </td></tr></tbody></table></div></div></section></section><section class="sect1" id="sec-network-ipv6" data-id-title="IPv6—the next generation Internet"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.2 </span><span class="title-name">IPv6—the next generation Internet</span></span> <a title="Permalink" class="permalink" href="#sec-network-ipv6">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Because of the emergence of the World Wide Web (WWW), the Internet has
   experienced explosive growth, with an increasing number of computers
   communicating via TCP/IP in the past fifteen years. Since Tim Berners-Lee at
   CERN (<a class="link" href="https://public.web.cern.ch" target="_blank">https://public.web.cern.ch</a>) invented the WWW in
   1990, the number of Internet hosts has grown from a few thousand to about a
   hundred million.
  </p><p>
   As mentioned, an IPv4 address consists of only 32 bits. Also, a few IP
   addresses are lost—they cannot be used because of the way
   networks are organized. The number of addresses available in your subnet is
   two to the power of the number of bits, minus two. A subnet has, for
   example, 2, 6 or 14 addresses available. To connect 128 hosts to the
   Internet, for example, you need a subnet with 256 IP addresses, from which
   only 254 are usable, because two IP addresses are needed for the structure
   of the subnet itself: the broadcast and the base network address.
  </p><p>
   Under the current IPv4 protocol, DHCP or NAT (network address translation)
   are the typical mechanisms used to circumvent the potential address
   shortage. Combined with the convention to keep private and public address
   spaces separate, these methods can certainly mitigate the shortage. To set
   up a host in an IPv4 network, you need several address items, such as the
   host's own IP address, the subnetmask, the gateway address, and maybe a name
   server address. All these items need to be known and cannot be derived from
   somewhere else.
  </p><p>
   With IPv6, both the address shortage and the complicated configuration
   should be a thing of the past. The following sections tell more about the
   improvements and benefits brought by IPv6 and about the transition from the
   old protocol to the new one.
  </p><section class="sect2" id="sec-network-ipv6-adv" data-id-title="Advantages"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">5.2.1 </span><span class="title-name">Advantages</span></span> <a title="Permalink" class="permalink" href="#sec-network-ipv6-adv">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The most important and most visible improvement brought by the IPv6
    protocol is the enormous expansion of the available address space. An IPv6
    address is made up of 128 bit values instead of the traditional 32 bits.
    This provides for as many as several quadrillion IP addresses.
   </p><p>
    However, IPv6 addresses are not only different from their predecessors with
    regard to their length. They also have a different internal structure that
    may contain more specific information about the systems and the networks to
    which they belong. More details about this are found in
    <a class="xref" href="#sec-network-ipv6-address" title="5.2.2. Address types and structure">Section 5.2.2, “Address types and structure”</a>.
   </p><p>
    The following is a list of other advantages of the IPv6 protocol:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.2.14.6.5.1"><span class="term">Autoconfiguration</span></dt><dd><p>
       IPv6 makes the network <span class="quote">“<span class="quote">plug and play</span>”</span> capable, which means
       that a newly configured system integrates into the (local) network
       without any manual configuration. The new host uses its automatic
       configuration mechanism to derive its own address from the information
       made available by the neighboring routers, relying on a protocol called
       the <span class="emphasis"><em>neighbor discovery</em></span> (ND) protocol. This method
       does not require any intervention on the administrator's part and there
       is no need to maintain a central server for address allocation—an
       additional advantage over IPv4, where automatic address allocation
       requires a DHCP server.
      </p><p>
       Nevertheless if a router is connected to a switch, the router should
       send periodic advertisements with flags telling the hosts of a network
       how they should interact with each other. For more information, see
       RFC 2462 and the <code class="systemitem">radvd.conf(5)</code> man page, and
       RFC 3315.
      </p></dd><dt id="id-1.8.4.2.14.6.5.2"><span class="term">Mobility</span></dt><dd><p>
       IPv6 makes it possible to assign several addresses to one network
       interface at the same time. This allows users to access several networks
       easily, something that could be compared with the international roaming
       services offered by mobile phone companies. When you take your mobile
       phone abroad, the phone automatically logs in to a foreign service when
       it enters the corresponding area, so you can be reached under the same
       number everywhere and can place an outgoing call, as you would in your
       home area.
      </p></dd><dt id="id-1.8.4.2.14.6.5.3"><span class="term">Secure communication</span></dt><dd><p>
       With IPv4, network security is an add-on function. IPv6 includes IPsec
       as one of its core features, allowing systems to communicate over a
       secure tunnel to avoid eavesdropping by outsiders on the Internet.
      </p></dd><dt id="id-1.8.4.2.14.6.5.4"><span class="term">Backward compatibility</span></dt><dd><p>
       Realistically, it would be impossible to switch the entire Internet from
       IPv4 to IPv6 at one time. Therefore, it is crucial that both protocols
       can coexist not only on the Internet, but also on one system. This is
       ensured by compatible addresses (IPv4 addresses can easily be translated
       into IPv6 addresses) and by using several tunnels. See
       <a class="xref" href="#sec-network-ipv6-coexist" title="5.2.3. Coexistence of IPv4 and IPv6">Section 5.2.3, “Coexistence of IPv4 and IPv6”</a>. Also, systems can rely on a
       <span class="emphasis"><em>dual stack IP</em></span> technique to support both protocols at
       the same time, meaning that they have two network stacks that are
       separate, such that there is no interference between the two protocol
       versions.
      </p></dd></dl></div></section><section class="sect2" id="sec-network-ipv6-address" data-id-title="Address types and structure"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">5.2.2 </span><span class="title-name">Address types and structure</span></span> <a title="Permalink" class="permalink" href="#sec-network-ipv6-address">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    As mentioned, the current IP protocol has two major limitations: there is
    an increasing shortage of IP addresses and configuring the network and
    maintaining the routing tables is becoming a more complex and burdensome
    task. IPv6 solves the first problem by expanding the address space to
    128 bits. The second one is mitigated by introducing a hierarchical address
    structure combined with sophisticated techniques to allocate network
    addresses, and <span class="emphasis"><em>multihoming</em></span> (the ability to assign
    several addresses to one device, giving access to several networks).
   </p><p>
    When dealing with IPv6, it is useful to know about three different types of
    addresses:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.2.14.7.4.1"><span class="term">Unicast</span></dt><dd><p>
       Addresses of this type are associated with exactly one network
       interface. Packets with such an address are delivered to only one
       destination. Accordingly, unicast addresses are used to transfer packets
       to individual hosts on the local network or the Internet.
      </p></dd><dt id="id-1.8.4.2.14.7.4.2"><span class="term">Multicast</span></dt><dd><p>
       Addresses of this type relate to a group of network interfaces. Packets
       with such an address are delivered to all destinations that belong to
       the group. Multicast addresses are mainly used by certain network
       services to communicate with certain groups of hosts in a well-directed
       manner.
      </p></dd><dt id="id-1.8.4.2.14.7.4.3"><span class="term">Anycast</span></dt><dd><p>
       Addresses of this type are related to a group of interfaces. Packets with
       such an address are delivered to the member of the group that is closest
       to the sender, according to the principles of the underlying routing
       protocol. Anycast addresses are used to make it easier for hosts to find
       out about servers offering certain services in the given network area.
       All servers of the same type have the same anycast address. Whenever a
       host requests a service, it receives a reply from the server with the
       closest location, as determined by the routing protocol. If this server
       should fail, the protocol automatically selects the second closest
       server, then the third one, and so forth.
      </p></dd></dl></div><p>
    An IPv6 address is made up of eight four-digit fields, each representing 16
    bits, written in hexadecimal notation. They are separated by colons
    (<code class="literal">:</code>). Any leading zero bytes within a given field may be
    dropped, but zeros within the field or at its end may not. Another
    convention is that more than four consecutive zero bytes may be collapsed
    into a double colon. However, only one such <code class="literal">::</code> is
    allowed per address. This kind of shorthand notation is shown in
    <a class="xref" href="#aus-net-ipv6-add" title="Sample IPv6 address">Example 5.3, “Sample IPv6 address”</a>, where all three lines represent the
    same address.
   </p><div class="example" id="aus-net-ipv6-add" data-id-title="Sample IPv6 address"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 5.3: </span><span class="title-name">Sample IPv6 address </span></span><a title="Permalink" class="permalink" href="#aus-net-ipv6-add">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">fe80 : 0000 : 0000 : 0000 : 0000 : 10 : 1000 : 1a4
fe80 :    0 :    0 :    0 :    0 : 10 : 1000 : 1a4
fe80 :                           : 10 : 1000 : 1a4</pre></div></div></div><p>
    Each part of an IPv6 address has a defined function. The first bytes form
    the prefix and specify the type of address. The center part is the network
    portion of the address, but it may be unused. The end of the address forms
    the host part. With IPv6, the netmask is defined by indicating the length
    of the prefix after a slash at the end of the address. An address, as shown
    in <a class="xref" href="#aus-net-ipv6-addpre" title="IPv6 address specifying the prefix length">Example 5.4, “IPv6 address specifying the prefix length”</a>, contains the information that the
    first 64 bits form the network part of the address and the last 64 form its
    host part. In other words, the <code class="literal">64</code> means that the netmask
    is filled with 64 1-bit values from the left. As with IPv4, the IP address
    is combined with AND with the values from the netmask to determine whether
    the host is located in the same subnet or in another one.
   </p><div class="example" id="aus-net-ipv6-addpre" data-id-title="IPv6 address specifying the prefix length"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 5.4: </span><span class="title-name">IPv6 address specifying the prefix length </span></span><a title="Permalink" class="permalink" href="#aus-net-ipv6-addpre">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">fe80::10:1000:1a4/64</pre></div></div></div><p>
    IPv6 knows about several predefined types of prefixes. Certain are shown in
    <a class="xref" href="#list-net-basic-ipv6-prefix" title="IPv6 prefixes">IPv6 prefixes</a>.
   </p><div class="variablelist" id="list-net-basic-ipv6-prefix" data-id-title="IPv6 prefixes"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">IPv6 prefixes </span></span><a title="Permalink" class="permalink" href="#list-net-basic-ipv6-prefix">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.8.4.2.14.7.10.2"><span class="term"><code class="systemitem">00</code></span></dt><dd><p>
       IPv4 addresses and IPv4 over IPv6 compatibility addresses. These are
       used to maintain compatibility with IPv4. Their use still requires a
       router able to translate IPv6 packets into IPv4 packets. Several special
       addresses, such as the one for the loopback device, have this prefix as
       well.
      </p></dd><dt id="id-1.8.4.2.14.7.10.3"><span class="term"><code class="systemitem">2</code> or <code class="systemitem">3</code> as the first digit</span></dt><dd><p>
       Aggregatable global unicast addresses. As is the case with IPv4, an
       interface can be assigned to form part of a certain subnet. Currently,
       there are the following address spaces:
       <code class="systemitem">2001::/16</code> (production quality
       address space) and <code class="systemitem">2002::/16</code>
       (6to4 address space).
      </p></dd><dt id="id-1.8.4.2.14.7.10.4"><span class="term"><code class="systemitem">fe80::/10</code></span></dt><dd><p>
       Link-local addresses. Addresses with this prefix should not be routed
       and should therefore only be reachable from within the same subnet.
      </p></dd><dt id="id-1.8.4.2.14.7.10.5"><span class="term"><code class="systemitem">fec0::/10</code></span></dt><dd><p>
       Site-local addresses. These may be routed, but only within the network
       of the organization to which they belong. In effect, they are the IPv6
       equivalent of the current private network address space, such as
       <code class="systemitem">10.x.x.x</code>.
      </p></dd><dt id="id-1.8.4.2.14.7.10.6"><span class="term"><code class="systemitem">ff</code></span></dt><dd><p>
       These are multicast addresses.
      </p></dd></dl></div><p>
    A unicast address consists of three basic components:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.2.14.7.12.1"><span class="term">Public topology</span></dt><dd><p>
       The first part (which also contains one of the prefixes mentioned above)
       is used to route packets through the public Internet. It includes
       information about the company or institution that provides the Internet
       access.
      </p></dd><dt id="id-1.8.4.2.14.7.12.2"><span class="term">Site topology</span></dt><dd><p>
       The second part contains routing information about the subnet to which
       to deliver the packet.
      </p></dd><dt id="id-1.8.4.2.14.7.12.3"><span class="term">Interface ID</span></dt><dd><p>
       The third part identifies the interface to which to deliver the packet.
       This also allows for the MAC to form part of the address. Given that the
       MAC is a globally unique, fixed identifier coded into the device by the
       hardware maker, the configuration procedure is simplified. In fact, the
       first 64 address bits are consolidated to form the
       <code class="literal">EUI-64</code> token, with the last 48 bits taken from the
       MAC, and the remaining 24 bits containing special information about the
       token type. This also makes it possible to assign an
       <code class="literal">EUI-64</code> token to interfaces that do not have a MAC,
       such as those based on point-to-point protocol (PPP).
      </p></dd></dl></div><p>
    On top of this basic structure, IPv6 distinguishes between five different
    types of unicast addresses:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.2.14.7.14.1"><span class="term"><code class="systemitem">::</code> (unspecified)</span></dt><dd><p>
       This address is used by the host as its source address when the
       interface is initialized for the first time (at which point, the address
       cannot yet be determined by other means).
      </p></dd><dt id="id-1.8.4.2.14.7.14.2"><span class="term"><code class="systemitem">::1</code> (loopback)</span></dt><dd><p>
       The address of the loopback device.
      </p></dd><dt id="id-1.8.4.2.14.7.14.3"><span class="term">IPv4 compatible addresses</span></dt><dd><p>
       The IPv6 address is formed by the IPv4 address and a prefix consisting
       of 96 zero bits. This type of compatibility address is used for
       tunneling (see <a class="xref" href="#sec-network-ipv6-coexist" title="5.2.3. Coexistence of IPv4 and IPv6">Section 5.2.3, “Coexistence of IPv4 and IPv6”</a>) to allow IPv4
       and IPv6 hosts to communicate with others operating in a pure IPv4
       environment.
      </p></dd><dt id="id-1.8.4.2.14.7.14.4"><span class="term">IPv4 addresses mapped to IPv6</span></dt><dd><p>
       This type of address specifies a pure IPv4 address in IPv6 notation.
      </p></dd><dt id="id-1.8.4.2.14.7.14.5"><span class="term">Local addresses</span></dt><dd><p>
       There are two address types for local use:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.2.14.7.14.5.2.2.1"><span class="term">link-local</span></dt><dd><p>
          This type of address can only be used in the local subnet. Packets
          with a source or target address of this type should not be routed to
          the Internet or other subnets. These addresses contain a special
          prefix (<code class="systemitem">fe80::/10</code>) and the
          interface ID of the network card, with the middle part consisting of
          zero bytes. Addresses of this type are used during automatic
          configuration to communicate with other hosts belonging to the same
          subnet.
         </p></dd><dt id="id-1.8.4.2.14.7.14.5.2.2.2"><span class="term">site-local</span></dt><dd><p>
          Packets with this type of address may be routed to other subnets, but
          not to the wider Internet—they must remain inside the
          organization's own network. Such addresses are used for intranets and
          are an equivalent of the private address space defined by IPv4. They
          contain a special prefix
          (<code class="systemitem">fec0::/10</code>), the interface
          ID, and a 16-bit field specifying the subnet ID. Again, the rest is
          filled with zero bytes.
         </p></dd></dl></div></dd></dl></div><p>
    As a new feature introduced with IPv6, each network interface normally gets
    several IP addresses, with the advantage that several networks can be
    accessed through the same interface. One of these networks can be configured
    automatically using the MAC and a known prefix with the result that all
    hosts on the local network can be reached when IPv6 is enabled (using the
    link-local address). With the MAC forming part of it, any IP address used in
    the world is unique. The only variable parts of the address are those
    specifying the <span class="emphasis"><em>site topology</em></span>
    and the <span class="emphasis"><em>public topology</em></span>, depending on the actual
    network in which the host is currently operating.
   </p><p>
    For a host to go back and forth between different networks, it needs at
    least two addresses. One of them, the <span class="emphasis"><em>home address</em></span>,
    not only contains the interface ID but also an identifier of the home
    network to which it normally belongs (and the corresponding prefix). The
    home address is a static address and, as such, it does not normally change.
    Still, all packets destined to the mobile host can be delivered to it,
    regardless of whether it operates in the home network or somewhere outside.
    This is made possible by new features introduced with IPv6,
    such as <span class="emphasis"><em>stateless autoconfiguration</em></span> and
    <span class="emphasis"><em>neighbor discovery</em></span>. In addition to its home address, a
    mobile host gets one or more additional addresses that belong to the
    foreign networks where it is roaming. These are called
    <span class="emphasis"><em>care-of</em></span> addresses. The home network has a facility that
    forwards any packets destined to the host when it is roaming outside. In an
    IPv6 environment, this task is performed by the <span class="emphasis"><em>home
    agent</em></span>, which takes all packets destined to the home address and
    relays them through a tunnel. Those packets destined to the care-of address
    are directly transferred to the mobile host without any special detours.
   </p></section><section class="sect2" id="sec-network-ipv6-coexist" data-id-title="Coexistence of IPv4 and IPv6"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">5.2.3 </span><span class="title-name">Coexistence of IPv4 and IPv6</span></span> <a title="Permalink" class="permalink" href="#sec-network-ipv6-coexist">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The migration of all hosts connected to the Internet from IPv4 to IPv6 is a
    gradual process. Both protocols can coexist for a certain time to
    come. The coexistence on one system is guaranteed where there is a
    <span class="emphasis"><em>dual stack</em></span> implementation of both protocols. That still
    leaves the question of how an IPv6 enabled host should communicate with an
    IPv4 host and how IPv6 packets should be transported by the current
    networks, which are predominantly IPv4-based. The best solutions offer
    tunneling and compatibility addresses (see <a class="xref" href="#sec-network-ipv6-address" title="5.2.2. Address types and structure">Section 5.2.2, “Address types and structure”</a>).
   </p><p>
    IPv6 hosts that are isolated in the (worldwide) IPv4 network can communicate
    through tunnels: IPv6 packets are encapsulated as IPv4 packets to move them
    across an IPv4 network. Such a connection between two IPv4 hosts is called a
    <span class="emphasis"><em>tunnel</em></span>. To achieve this, packets must include the IPv6
    destination address (or the corresponding prefix) and the IPv4 address of
    the remote host at the receiving end of the tunnel. A basic tunnel can be
    configured manually according to an agreement between the hosts'
    administrators. This is also called <span class="emphasis"><em>static tunneling</em></span>.
   </p><p>
    However, the configuration and maintenance of static tunnels is often too
    labor-intensive to use them for daily communication needs. Therefore, IPv6
    provides for three different methods of <span class="emphasis"><em>dynamic
    tunneling</em></span>:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.2.14.8.5.1"><span class="term">6over4</span></dt><dd><p>
       IPv6 packets are automatically encapsulated as IPv4 packets and sent over
       an IPv4 network capable of multicasting. IPv6 is tricked into seeing the
       whole network (Internet) as a local area network (LAN). This makes
       it possible to determine the receiving end of the IPv4 tunnel
       automatically. However, this method does not scale well and is also
       hampered because IP multicasting is far from widespread on the Internet.
       Therefore, it only provides a solution for smaller corporate or
       institutional networks where multicasting can be enabled. The
       specifications for this method are laid down in RFC 2529.
      </p></dd><dt id="id-1.8.4.2.14.8.5.2"><span class="term">6to4</span></dt><dd><p>
       With this method, IPv4 addresses are automatically generated from IPv6
       addresses, enabling isolated IPv6 hosts to communicate over an IPv4
       network. However, several problems have been reported regarding the
       communication between those isolated IPv6 hosts and the Internet. The
       method is described in RFC 3056.
      </p></dd><dt id="id-1.8.4.2.14.8.5.3"><span class="term">IPv6 tunnel broker</span></dt><dd><p>
       This method relies on special servers that provide dedicated tunnels for
       IPv6 hosts. It is described in RFC 3053.
      </p></dd></dl></div></section><section class="sect2" id="sec-network-ipv6-config" data-id-title="Configuring IPv6"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">5.2.4 </span><span class="title-name">Configuring IPv6</span></span> <a title="Permalink" class="permalink" href="#sec-network-ipv6-config">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To configure IPv6, you normally do not need to make any changes on the
    individual workstations. IPv6 is enabled by default. To disable or enable
    IPv6 on an installed system, use the YaST <span class="guimenu">Network
    Settings</span> module. On the <span class="guimenu">Global Options</span> tab,
    select or deselect the <span class="guimenu">Enable IPv6</span> option as necessary.
    
    To enable it temporarily until the next reboot, enter
    <code class="command">modprobe</code> <code class="option">-i ipv6</code> as
    <code class="systemitem">root</code>. It is impossible to unload
    the IPv6 module after it has been loaded.
   </p><p>
    Because of the autoconfiguration concept of IPv6, the network card is
    assigned an address in the <span class="emphasis"><em>link-local</em></span> network.
    Normally, no routing table management takes place on a workstation. The
    network routers can be queried by the workstation, using the
    <span class="emphasis"><em>router advertisement protocol</em></span>, for what prefix and
    gateways should be implemented. The radvd program can be used to set up an
    IPv6 router. This program informs the workstations which prefix to use for
    the IPv6 addresses and which routers. Alternatively, use FRR (see <a class="link" href="https://frrouting.org/" target="_blank">https://frrouting.org/</a>) for automatic configuration of both
    addresses and routing.
   </p></section></section><section class="sect1" id="sec-network-nameres" data-id-title="Name resolution"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.3 </span><span class="title-name">Name resolution</span></span> <a title="Permalink" class="permalink" href="#sec-network-nameres">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   DNS assists in assigning an IP address to one or more names and assigning a
   name to an IP address. In Linux, this conversion is normally carried out by a
   special type of software known as bind. The machine that takes care of this
   conversion is called a <span class="emphasis"><em>name server</em></span>. The names make up a
   hierarchical system in which each name component is separated by a period.
   The name hierarchy is, however, independent of the IP address hierarchy
   described above.
  </p><p>
   Consider a complete name, such as
   <code class="systemitem">jupiter.example.com</code>, written in the
   format <code class="systemitem">hostname.domain</code>. A full
   name, called a <span class="emphasis"><em>fully qualified domain name</em></span> (FQDN),
   consists of a host name and a domain name
   (<code class="systemitem">example.com</code>). The latter
   also includes the <span class="emphasis"><em>top level domain</em></span> or TLD
   (<code class="systemitem">com</code>).
  </p><p>
   TLD assignment has become confusing for historical reasons.
   Traditionally, three-letter domain names are used in the USA. In the rest of
   the world, the two-letter ISO national codes are the standard. Additionally,
   longer TLDs were introduced in 2000 that represent certain spheres of
   activity (for example, <code class="systemitem">.info</code>,
   <code class="systemitem">.name</code>,
   <code class="systemitem">.museum</code>).
  </p><p>
   In the early days of the Internet (before 1990), the file
   <code class="filename">/etc/hosts</code> was used to store the names of all the
   machines represented over the Internet. This quickly proved to be
   impractical in the face of the rapidly growing number of computers connected
   to the Internet. For this reason, a decentralized database was developed to
   store the host names in a widely distributed manner. This database, similar
   to the name server, does not have the data pertaining to all hosts in the
   Internet available, but can dispatch requests to other name servers.
  </p><p>
   The top of the hierarchy is occupied by <span class="emphasis"><em>root name
   servers</em></span>. These root name servers manage the top level domains and
   are run by the Network Information Center (NIC). Each root name server knows
   about the name servers responsible for a given top level domain. Information
   about top level domain NICs is available at
   <a class="link" href="https://www.internic.net" target="_blank">https://www.internic.net</a>.
  </p><p>
   DNS can do more than resolve host names. The name server also knows which
   host is receiving e-mails for an entire domain—the <span class="emphasis"><em>mail
   exchanger (MX)</em></span>.
  </p><p>
   For your machine to resolve an IP address, it must know about at least one
   name server and its IP address.  
  </p><div id="id-1.8.4.2.15.9" data-id-title="MDNS and .local domain names" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: MDNS and .local domain names</div><p>
    The <code class="literal">.local</code> top level domain is treated as link-local
    domain by the resolver. DNS requests are sent as multicast DNS requests
    instead of normal DNS requests. If you already use the
    <code class="literal">.local</code> domain in your name server configuration, you
    must switch this option off in <code class="filename">/etc/host.conf</code>. For
    more information, see the <code class="filename">host.conf</code> man page.
   </p><p>
    To switch off MDNS during installation, use <code class="literal">nomdns=1</code> as
    a boot parameter.
   </p><p>
    For more information on multicast DNS, see
    <a class="link" href="http://www.multicastdns.org" target="_blank">http://www.multicastdns.org</a>.
   </p></div></section></section><section xml:lang="en" class="chapter" id="cha-nm-vs-wicked" data-id-title="NetworkManager and wicked"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">6 </span><span class="title-name">NetworkManager and <code class="command">wicked</code></span></span> <a title="Permalink" class="permalink" href="#cha-nm-vs-wicked">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_vs_wicked.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    This chapter focuses on the difference between NetworkManager and
    <code class="command">wicked</code> and provides a description how to switch from <code class="command">wicked</code> to NetworkManager.
   </p></div></div></div></div><p>
  NetworkManager is a program that manages the primary network connection and other
  connection interfaces. NetworkManager has been designed to be fully automatic by
  default. NetworkManager is handled by <code class="systemitem">systemd</code> and is shipped with all necessary
  service unit files.
 </p><p>
  <code class="command">wicked</code> is a network management tool that provides network
  configuration as a service and enables changing the network configuration
  dynamically.
 </p><p>
  NetworkManager and <code class="command">wicked</code> provide similar functionality; however,
  they differ in the following points:
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.3.6.1"><span class="term"><code class="systemitem">root</code> privileges</span></dt><dd><p>
     If you use NetworkManager for network setup, you can easily switch, stop, or start
     your network connection at any time. NetworkManager also makes it possible to change
     and configure wireless card connections without requiring <code class="systemitem">root</code>
     privileges.
    </p><p>
     <code class="command">wicked</code> also provides some ways to switch, stop, or start
     the connection with or without user intervention, like user-managed
     devices. However, this always requires <code class="systemitem">root</code> privileges to change or
     configure a network device.
    </p></dd><dt id="id-1.8.4.3.6.2"><span class="term">Types of network connections</span></dt><dd><p>
     Both <code class="command">wicked</code> and NetworkManager can handle network connections
     with a wireless network (with WEP, WPA-PSK, and WPA-Enterprise access) and
     wired networks using DHCP and static configuration. They also support
     connection through dial-up and VPN. With NetworkManager, you can also connect a
     mobile broadband (3G) modem or set up a DSL connection, which is not
     possible with the traditional configuration.
    </p><p>
     NetworkManager tries to keep your computer connected at all times using the best
     connection available. If the network cable is accidentally disconnected,
     it tries to reconnect. NetworkManager can find the network with the best signal
     strength from the list of your wireless connections and automatically use
     it to connect. To get the same functionality with
     <code class="command">wicked</code>, more configuration effort is required.
    </p></dd><dt id="id-1.8.4.3.6.3"><span class="term">k8s integration</span></dt><dd><p>
     Some k8s plugins require NetworkManager to run and are not compatible with
     <code class="command">wicked</code>.
    </p></dd></dl></div><section class="sect1" id="sec-switching-wicked" data-id-title="Switching from wicked to NetworkManager"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.1 </span><span class="title-name">Switching from <code class="command">wicked</code> to NetworkManager</span></span> <a title="Permalink" class="permalink" href="#sec-switching-wicked">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_vs_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><div id="id-1.8.4.3.7.2" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
  Even though NetworkManager and <code class="command">wicked</code> are similar in functionalities, we cannot guarantee full feature parity. The conversion of the <code class="command">wicked</code> configuration or automated switching to NetworkManager is not supported.  
 </p></div><div id="id-1.8.4.3.7.3" data-id-title="The wicked configuration compatibility with NetworkManager" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: The <code class="command">wicked</code> configuration compatibility with NetworkManager</div><p>
  The <code class="filename">/etc/sysconfig/network/ifcfg-*</code> files are usually compatible except for some rare cases. But when you use the <code class="command">wicked</code> configuration located in <code class="filename">/etc/wicked/*.xml</code>, you need to migrate the configuration manually.
  </p></div><p>
  To change your networking managing service from <code class="command">wicked</code> to NetworkManager, proceed as follows:
  </p><div class="procedure" id="proc-wicked-switch" data-id-title="Switching from wicked to NetworkManager"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 6.1: </span><span class="title-name">Switching from <code class="command">wicked</code> to NetworkManager </span></span><a title="Permalink" class="permalink" href="#proc-wicked-switch">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_vs_wicked.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Run the following command to create a new snapshot where you perform all
     other changes to the system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>transactional-update shell</pre></div></li><li class="step"><p>
     Install NetworkManager:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>zypper in NetworkManager</pre></div></li><li class="step"><p>
     Remove <code class="command">wicked</code> from the system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>zypper rm wicked wicked-service</pre></div></li><li class="step"><p>
     Enable the NetworkManager service:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemctl enable NetworkManager</pre></div></li><li class="step"><p>
     If needed, configure the service according to your needs.
    </p></li><li class="step"><p>
     Close the <code class="command">transactional-update</code> shell:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>exit</pre></div></li><li class="step"><p>
     Reboot your system to switch to the new snapshot.
    </p></li></ol></div></div></section></section><section xml:lang="en" class="chapter" id="cha-nm-configuration" data-id-title="NetworkManager configuration and usage"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">7 </span><span class="title-name">NetworkManager configuration and usage</span></span> <a title="Permalink" class="permalink" href="#cha-nm-configuration">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_configuration.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    NetworkManager is shipped so it can run out of the box, but you might need to
    reconfigure or restart the tool. This chapter focuses on these tasks.
   </p></div></div></div></div><p>
  NetworkManager stores all network configuration as a connection, which is a collection
  of data that describes how to create or connect to a network. These
  connections are stored as files in the
  <code class="filename">/etc/NetworkManager/system-connections/</code> directory.
 </p><p>
  A connection is active when a particular device uses the connection. The
  device may have more than one connection configured, but only one can be
  active at a given time. The other connections can be used to fast switch from
  one connection to another. For example, if the active connection is not
  available, NetworkManager tries to connect the device to another configured connection.
 </p><p>
  To manage connections, use the <code class="command">nmcli</code>, described in the
  section below.
 </p><p>
  To change how NetworkManager behaves, change or add values to the configuration file
  described in <a class="xref" href="#sec-networkmanager-conf" title="7.3. The NetworkManager.conf configuration file">Section 7.3, “The <code class="filename">NetworkManager.conf</code> configuration file”</a>.
 </p><section class="sect1" id="sec-restart-netmanager" data-id-title="Starting and stopping NetworkManager"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.1 </span><span class="title-name">Starting and stopping NetworkManager</span></span> <a title="Permalink" class="permalink" href="#sec-restart-netmanager">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_configuration.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   As NetworkManager is a <code class="systemitem">systemd</code> service, you can use common <code class="systemitem">systemd</code> commands to
   start, stop, or restart NetworkManager.
  </p><p>
   To start NetworkManager:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemctl start network</pre></div><p>
   To restart NetworkManager:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemctl restart network</pre></div><p>
   To stop NetworkManager:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemctl stop network</pre></div></section><section class="sect1" id="sec-nmcli-interface" data-id-title="The nmcli command"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.2 </span><span class="title-name">The <code class="command">nmcli</code> command</span></span> <a title="Permalink" class="permalink" href="#sec-nmcli-interface">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_configuration.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   NetworkManager provides a CLI interface to manage your connections. By using the
   <code class="command">nmcli</code> interface, you can connect to a particular network,
   edit a connection, edit a device, etc. The generic syntax of the
   <code class="command">nmcli</code> is as follows:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli <em class="replaceable">OPTIONS</em> <em class="replaceable">SUBCOMMAND</em> <em class="replaceable">SUBCOMMAND_ARGUMENTS</em></pre></div><p>
   where <em class="replaceable">OPTIONS</em> are described in
   <a class="xref" href="#sec-nmcli-options" title="7.2.1. The nmcli command options">Section 7.2.1, “The <code class="command">nmcli</code> command options”</a> and
   <em class="replaceable">SUBCOMMAND</em> can be any of the following:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.4.8.5.1"><span class="term"><code class="command">connection</code></span></dt><dd><p>
      enables you to configure your network connection. For details, 
      refer to <a class="xref" href="#sec-connection-command" title="7.2.2. The connection subcommand">Section 7.2.2, “The <code class="command">connection</code> subcommand”</a>.
     </p></dd><dt id="id-1.8.4.4.8.5.2"><span class="term"><code class="command">device</code></span></dt><dd><p>
      For details, refer to <a class="xref" href="#sec-device-command" title="7.2.3. The device subcommand">Section 7.2.3, “The <code class="command">device</code> subcommand”</a>.
     </p></dd><dt id="id-1.8.4.4.8.5.3"><span class="term"><code class="command">general</code></span></dt><dd><p>
      shows status and permissions. For details refer to
      <a class="xref" href="#sec-general-command" title="7.2.4. The general subcommand">Section 7.2.4, “The <code class="command">general</code> subcommand”</a>.
     </p></dd><dt id="id-1.8.4.4.8.5.4"><span class="term"><code class="command">monitor</code></span></dt><dd><p>
      monitors activity of NetworkManager and watches for changes in the state of
      connectivity and devices. This subcommand does not take any arguments.
     </p></dd><dt id="id-1.8.4.4.8.5.5"><span class="term"><code class="command">networking</code></span></dt><dd><p>
      queries the networking status. For details, refer to
      <a class="xref" href="#sec-networking-command" title="7.2.5. The networking subcommand">Section 7.2.5, “The <code class="command">networking</code> subcommand”</a>.
     </p></dd></dl></div><section class="sect2" id="sec-nmcli-options" data-id-title="The nmcli command options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.2.1 </span><span class="title-name">The <code class="command">nmcli</code> command options</span></span> <a title="Permalink" class="permalink" href="#sec-nmcli-options">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_configuration.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Besides the subcommands and their arguments, the <code class="command">nmcli</code>
    command can take the following options:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.4.8.6.3.1"><span class="term"><code class="option">-a|--ask</code></span></dt><dd><p>
       the command will stop its run to ask for any missing arguments, for
       example, for a password to connect to a network.
      </p></dd><dt id="id-1.8.4.4.8.6.3.2"><span class="term"><code class="option">-c|--color {yes|no|auto}</code></span></dt><dd><p>
       controls the color output: <code class="literal">yes</code> to enable the colors,
       <code class="literal">no</code> to disable them, and <code class="literal">auto</code>
       creates color output only when the standard output is directed to a
       terminal.
      </p></dd><dt id="id-1.8.4.4.8.6.3.3"><span class="term"><code class="option">-m|--mode {tabular|multiline}</code></span></dt><dd><p>
       switches between <code class="literal">table</code> (each line describes a single
       entry, columns define particular properties of the entry) and
       <code class="literal">multiline</code> (each entry comprises more lines, each
       property is on its own line). <code class="literal">tabular</code> is the default
       value.
      </p></dd><dt id="id-1.8.4.4.8.6.3.4"><span class="term"><code class="option">-h|--help</code></span></dt><dd><p>
       prints help.
      </p></dd><dt id="id-1.8.4.4.8.6.3.5"><span class="term"><code class="option">-w|--wait seconds</code></span></dt><dd><p>
       sets a time-out period for which to wait for NetworkManager to finish operations.
       Using this option is recommended for commands that might take longer to
       complete, for example, connection activation.
      </p></dd></dl></div></section><section class="sect2" id="sec-connection-command" data-id-title="The connection subcommand"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.2.2 </span><span class="title-name">The <code class="command">connection</code> subcommand</span></span> <a title="Permalink" class="permalink" href="#sec-connection-command">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_configuration.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="command">connection</code> command enables you to manage connections
    or view any information about particular connections. The <code class="command">nmcli
    connection</code> provides the following commands to manage your network
    connections:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.4.8.7.3.1"><span class="term"><code class="command">show</code></span></dt><dd><p>
       to list connections:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection show</pre></div><p>
       You can also use this command to show details about a specified
       connection:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection show <em class="replaceable">CONNECTION_ID</em></pre></div><p>
       where <em class="replaceable">CONNECTION_ID</em> is any of the
       identifiers: <span class="emphasis"><em>a connection name, UUID, or a path</em></span>
      </p></dd><dt id="id-1.8.4.4.8.7.3.2"><span class="term"><code class="command">up</code></span></dt><dd><p>
       to activate the provided connection. Use the command to reload a
       connection. Also run this command after you perform any change to the
       connection.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection up [--active] [<em class="replaceable">CONNECTION_ID</em>]</pre></div><p>
       When <code class="option">--active</code> is specified, only the active profiles
       are displayed. The default is to display both active connections and
       static configuration.
      </p></dd><dt id="id-1.8.4.4.8.7.3.3"><span class="term"><code class="command">down</code></span></dt><dd><p>
       to deactivate a connection.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection down <em class="replaceable">CONNECTION_ID</em></pre></div><p>
       where: <em class="replaceable">CONNECTION_ID</em> is any of the
       identifiers: <span class="emphasis"><em>a connection name, UUID, or a path</em></span>
      </p><p>
       If you deactivate the connection, it will not reconnect later even if it
       has the <code class="literal">autoconnect</code> flag.
      </p></dd><dt id="id-1.8.4.4.8.7.3.4"><span class="term"><code class="command">modify</code></span></dt><dd><p>
       to change or delete a property of a connection.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection modify <em class="replaceable">CONNECTION_ID</em> <em class="replaceable">SETTING.PROPERTY</em> <em class="replaceable">PROPERTY_VALUE</em></pre></div><p>
       where:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         <em class="replaceable">CONNECTION_ID</em> is any of the identifiers:
         <span class="emphasis"><em>a connection name, UUID, or a path</em></span>
        </p></li><li class="listitem"><p>
         <em class="replaceable">SETTING.PROPERTY</em> is the name of the
         property, for example, <code class="literal">ipv4.addresses</code>
        </p></li><li class="listitem"><p>
         <em class="replaceable">PROPERTY_VALUE</em> is the desired value of
         <em class="replaceable">SETTING.PROPERTY</em>
        </p></li></ul></div><p>
       The following example deactivates the <code class="option">autoconnect</code>
       option on the <code class="literal">ethernet1</code> connection:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection modify ethernet1 connection.autoconnect no</pre></div></dd><dt id="id-1.8.4.4.8.7.3.5"><span class="term"><code class="command">add</code></span></dt><dd><p>
       to add a connection with the provided details. The command syntax is
       similar to the <code class="command">modify</code> command:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection add <em class="replaceable">CONNECTION_ID</em> <em class="replaceable">save YES|NO</em> <em class="replaceable">SETTING.PROPERTY</em> <em class="replaceable">PROPERTY_VALUE</em></pre></div><p>
       You should at least specify a <code class="literal">connection.type</code> or use
       <code class="literal">type</code>. The following example adds an Ethernet
       connection tied to the <code class="literal">eth0</code> interface with DHCP, and
       disables the connection's <code class="option">autoconnect</code> flag:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection add type ethernet autoconnect no ifname eth0</pre></div></dd><dt id="id-1.8.4.4.8.7.3.6"><span class="term"><code class="command">edit</code></span></dt><dd><p>
       to edit an existing connection using an interactive editor.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection edit <em class="replaceable">CONNECTION_ID</em></pre></div></dd><dt id="id-1.8.4.4.8.7.3.7"><span class="term"><code class="command">clone</code></span></dt><dd><p>
       to clone an already existing connection. The minimal syntax follows:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection clone <em class="replaceable">CONNECTION_ID</em> <em class="replaceable">NEW_NAME</em></pre></div><p>
       where <em class="replaceable">CONNECTION_ID</em> is the connection to be
       cloned.
      </p></dd><dt id="id-1.8.4.4.8.7.3.8"><span class="term"><code class="command">delete</code></span></dt><dd><p>
       to delete an existing connection:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection delete <em class="replaceable">CONNECTION_ID</em></pre></div></dd><dt id="id-1.8.4.4.8.7.3.9"><span class="term"><code class="command">monitor</code></span></dt><dd><p>
       to monitor the provided connection. Each time the connection changes,
       NetworkManager prints a line.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection monitor <em class="replaceable">CONNECTION_ID</em></pre></div></dd><dt id="id-1.8.4.4.8.7.3.10"><span class="term"><code class="command">reload</code></span></dt><dd><p>
       to reload all connection files from the disk. As NetworkManager does not monitor
       changes performed to the connection files, you need to use this command
       whenever you make changes to the files. This command does not take any
       further subcommands.
      </p></dd><dt id="id-1.8.4.4.8.7.3.11"><span class="term"><code class="command">load</code></span></dt><dd><p>
       to load/reload a particular connection file, run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli connection load <em class="replaceable">CONNECTION_FILE</em></pre></div></dd></dl></div><p>
    For details about the abovementioned commands, refer to the
    <a class="link" href="https://developer-old.gnome.org/NetworkManager/stable/nmcli.html" target="_blank"><code class="command">nmcli</code>
    documentation</a>.
   </p></section><section class="sect2" id="sec-device-command" data-id-title="The device subcommand"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.2.3 </span><span class="title-name">The <code class="command">device</code> subcommand</span></span> <a title="Permalink" class="permalink" href="#sec-device-command">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_configuration.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="command">device</code> subcommand enables you to show and manage
    network interfaces. The <code class="command">nmcli device</code> command recognizes
    the following commands:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.4.8.8.3.1"><span class="term"><code class="command">status</code></span></dt><dd><p>
       to print the status of all devices.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli device status</pre></div></dd><dt id="id-1.8.4.4.8.8.3.2"><span class="term"><code class="command">show</code></span></dt><dd><p>
       shows detailed information about a device. If no device is specified,
       all devices are displayed.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>mcli device show [<em class="replaceable">DEVICE_NAME</em>]</pre></div></dd><dt id="id-1.8.4.4.8.8.3.3"><span class="term"><code class="command">connect</code></span></dt><dd><p>
       to connect a device. NetworkManager tries to find a suitable connection that will
       be activated. If there is no compatible connection, a new profile is
       created.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli device connect <em class="replaceable">DEVICE_NAME</em></pre></div></dd><dt id="id-1.8.4.4.8.8.3.4"><span class="term"><code class="command">modify</code></span></dt><dd><p>
       performs temporary changes to the configuration that is active on the
       particular device. The changes are not stored in the connection profile.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli device modify <em class="replaceable">DEVICE_NAME</em> [+|-] <em class="replaceable">SETTING.PROPERTY</em> <em class="replaceable">VALUE</em></pre></div><p>
       For possible <em class="replaceable">SETTING.PROPERTY</em> values, refer
       to <span class="emphasis"><em>nm-settings-nmcli(5)</em></span>.
      </p><p>
       The example below starts the IPv4 shared connection sharing on the
       device <code class="literal">con1</code>.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli dev modify con1 ipv4.method shared</pre></div></dd><dt id="id-1.8.4.4.8.8.3.5"><span class="term"><code class="command">disconnect</code></span></dt><dd><p>
       disconnects a device and prevents the device from automatically
       activating further connections without manual intervention.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli device disconnect <em class="replaceable">DEVICE_NAME</em></pre></div></dd><dt id="id-1.8.4.4.8.8.3.6"><span class="term"><code class="command">delete</code></span></dt><dd><p>
       to delete the interface from the system. You can use the command to
       delete only software devices like bonds and bridges. You cannot delete
       hardware devices with this command.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli device <em class="replaceable">DEVICE_NAME</em></pre></div></dd><dt id="id-1.8.4.4.8.8.3.7"><span class="term"><code class="command">wifi</code></span></dt><dd><p>
       lists all available access points.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli device wifi</pre></div></dd><dt id="id-1.8.4.4.8.8.3.8"><span class="term"><code class="command">wifi connect</code></span></dt><dd><p>
       connects to a Wi-Fi network specified by its SSID or BSSID. The command
       takes the following options:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         <code class="option">password</code> - password for secured networks
        </p></li><li class="listitem"><p>
         <code class="option">ifname</code> - interface that will be used for activation
        </p></li><li class="listitem"><p>
         <code class="option">name</code> - you can give the connection a name
        </p></li></ul></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli device wifi connect <em class="replaceable">SSID</em> [password <em class="replaceable">PASSWORD_VALUE</em>] [ifname <em class="replaceable">INTERFACE_NAME</em>]</pre></div><p>
       To connect to a Wi-Fi <span class="emphasis"><em>GUESTWiFi</em></span> with a password
       <code class="literal">pass$word2#@@</code>, run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli device wifi connect <em class="replaceable">GUESTWiFi</em> password pass$word2#@@</pre></div></dd></dl></div></section><section class="sect2" id="sec-general-command" data-id-title="The general subcommand"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.2.4 </span><span class="title-name">The <code class="command">general</code> subcommand</span></span> <a title="Permalink" class="permalink" href="#sec-general-command">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_configuration.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can use this command to view NetworkManager status and permissions, and change the
    host name and logging level. The <code class="command">nmcli general</code>
    recognizes the following commands:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.4.8.9.3.1"><span class="term"><code class="command">status</code></span></dt><dd><p>
       displays the overall status of NetworkManager. Whenever you do not specify a
       command to the <code class="command">nmcli general</code> command, status is used
       by default.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli general status</pre></div></dd><dt id="id-1.8.4.4.8.9.3.2"><span class="term"><code class="command">hostname</code></span></dt><dd><p>
       if you do not provide a new host name as an argument, the current host
       name is displayed. If you specify a new host name, the value will be
       used to set a new value.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli general hostname [<em class="replaceable">HOSTNAME</em>]</pre></div><p>
       For example, to set <code class="literal">MyHostname</code>, run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli general hostname MyHostname</pre></div></dd><dt id="id-1.8.4.4.8.9.3.3"><span class="term"><code class="command">permissions</code></span></dt><dd><p>
       shows your permission for NetworkManager operations like enabling or disabling
       networking, modifying connections, etc.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli general permissions</pre></div></dd><dt id="id-1.8.4.4.8.9.3.4"><span class="term"><code class="command">logging</code></span></dt><dd><p>
       shows and changes NetworkManager logging levels and domains. Without any
       arguments, the command displays current logging levels and domains.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli general logging [level <em class="replaceable">LEVEL</em> domains <em class="replaceable">DOMAIN</em>]</pre></div><p>
       <em class="replaceable">LEVEL</em> is any of the values:
       <code class="literal">OFF</code>, <code class="literal">ERR</code>, <code class="literal">WARN</code>,
       <code class="literal">INFO</code>, <code class="literal">DEBUG</code>, or
       <code class="literal">TRACE</code>.
      </p><p>
       <em class="replaceable">DOMAIN</em> is a list of values that can be as
       follows: <code class="literal">PLATFORM, RFKILL, ETHER, WIFI, BT, MB, DHCP4, DHCP6,
       PPP, WIFI_SCAN, IP4, IP6, AUTOIP4, DNS, VPN, SHARING, SUPPLICANT,
       AGENTS, SETTINGS, SUSPEND, CORE, DEVICE, OLPC, WIMAX, INFINIBAND,
       FIREWALL, ADSL, BOND, VLAN, BRIDGE, DBUS_PROPS, TEAM, CONCHECK, DCB,
       DISPATCH, AUDIT, SYSTEMD, VPN_PLUGIN, PROXY</code>.
      </p></dd></dl></div></section><section class="sect2" id="sec-networking-command" data-id-title="The networking subcommand"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.2.5 </span><span class="title-name">The <code class="command">networking</code> subcommand</span></span> <a title="Permalink" class="permalink" href="#sec-networking-command">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_configuration.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The subcommand enables you to query the status of the network. Also, by
    using this command, you can enable or disable networking. The
    <code class="command">nmcli networking</code> command takes the following commands:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.4.4.8.10.3.1"><span class="term"><code class="command">on/off</code></span></dt><dd><p>
       enables or disables networking. The <code class="command">off</code> command
       deactivates all interfaces managed by NetworkManager.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli networking on</pre></div></dd><dt id="id-1.8.4.4.8.10.3.2"><span class="term">connectivity</span></dt><dd><p>
       displays the network connectivity state. If <code class="option">check</code> is
       used, NetworkManager performs a new check of the state. Otherwise, the last
       detected state is displayed.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>nmcli networking connectivity</pre></div><p>
       Possible states are the following:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         <span class="emphasis"><em>none</em></span> - the host is not connected to any network.
        </p></li><li class="listitem"><p>
         <span class="emphasis"><em>portal</em></span> - the host is behind a captive portal and
         cannot reach the full Internet.
        </p></li><li class="listitem"><p>
         <span class="emphasis"><em>limited</em></span> - the host is connected to a network, but
         it has no access to the Internet.
        </p></li><li class="listitem"><p>
         <span class="emphasis"><em>full</em></span> - the host is connected to a network and has
         full access to the Internet.
        </p></li><li class="listitem"><p>
         <span class="emphasis"><em>unknown</em></span> - NetworkManager could not determine the network
         state.
        </p></li></ul></div></dd></dl></div></section></section><section class="sect1" id="sec-networkmanager-conf" data-id-title="The NetworkManager.conf configuration file"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.3 </span><span class="title-name">The <code class="filename">NetworkManager.conf</code> configuration file</span></span> <a title="Permalink" class="permalink" href="#sec-networkmanager-conf">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_nm_configuration.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The main configuration file for the NetworkManager is
   <code class="filename">/etc/NetworkManager/NetworkManager.conf</code>. This file can
   be used to configure the behavior of NetworkManager.
  </p><p>
   The file consists of sections of key-value pairs. Each key-value pair must
   belong to a section. A section starts with a name enclosed in
   <span class="emphasis"><em>[]</em></span>. Lines beginning with a <span class="emphasis"><em>#</em></span> are
   considered comments. The minimal configuration needs to include the
   <code class="literal">[main]</code> section with the <code class="literal">plugins</code> value:
  </p><div class="verbatim-wrap"><pre class="screen">    [main]
plugins=keyfile</pre></div><p>
   The <code class="literal">keyfile</code> plugin supports all the connection types and
   capabilities of NetworkManager.
  </p><p>
   The default configuration file contains the <code class="literal">connectivity</code>
   section that specifies the URI to check the network connection.
  </p><p>
   On SLE Micro, you can also use other sections. For details, refer to
   <a class="link" href="https://linux.die.net/man/5/networkmanager.conf" target="_blank">networkmanager.conf(5)</a>
   or
   <a class="link" href="https://developer-old.gnome.org/NetworkManager/stable/NetworkManager.conf.html" target="_blank">Gnome's
   developer guide</a>.
  </p></section></section></div><div class="part" id="part-slemicro-monitoring" data-id-title="Monitoring and debugging"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part III </span><span class="title-name">Monitoring and debugging </span></span><a title="Permalink" class="permalink" href="#part-slemicro-monitoring">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_admin_slemicro.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#cha-health-checker"><span class="title-number">8 </span><span class="title-name">Health checker</span></a></span></li><dd class="toc-abstract"><p>
  Health checker is a program delivered with SLE Micro that checks whether
  services are running properly during booting of your system.
 </p></dd><li><span class="chapter"><a href="#cha-admin-toolbox"><span class="title-number">9 </span><span class="title-name"><code class="literal">toolbox</code> for SLE Micro debugging</span></a></span></li><dd class="toc-abstract"><p>
      This chapter describes the usage and purpose of the
      <code class="literal">toolbox</code> utility.
   </p></dd><li><span class="chapter"><a href="#cha-performance-monitoring"><span class="title-number">10 </span><span class="title-name">Monitoring performance</span></a></span></li><dd class="toc-abstract"><p>
    For performance monitoring purposes, SLE Micro provides a container image that
  enables you to run the Performance Co-Pilot (PCP) analysis toolkit in a
  container. The toolkit comprises tools for gathering and processing
  performance information collected either in real time or from PCP archive
  logs.
    </p></dd></ul></div><section xml:lang="en" class="chapter" id="cha-health-checker" data-id-title="Health checker"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">8 </span><span class="title-name">Health checker</span></span> <a title="Permalink" class="permalink" href="#cha-health-checker">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_health_checker.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Health checker is a program delivered with SLE Micro that checks whether
  services are running properly during booting of your system.
 </p><p>
  During the boot process, <code class="literal">systemd</code> calls Health checker,
  which in turn calls its plugins. Each plugin checks a particular service or
  condition. If each check passes, a status file
  (<code class="filename">/var/lib/misc/health-check.state</code>) is created. The
  status file marks the current root file system as correct.
 </p><p>
  If any of the health checker plugins reports an error, the action taken
  depends on a particular condition, as described below:
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.5.2.6.1"><span class="term"><span class="emphasis"><em>The snapshot is booted for the first time.</em></span></span></dt><dd><p>
     If the current snapshot is different from the last one that worked
     properly, an automatic rollback to the last working snapshot is performed.
     This means that the last change performed to the file system broke the
     snapshot.
    </p></dd><dt id="id-1.8.5.2.6.2"><span class="term"><span class="emphasis"><em>The snapshot has already booted correctly in the past.</em></span></span></dt><dd><p>
     There could be just a temporary problem, and the system is rebooted
     automatically.
    </p></dd><dt id="id-1.8.5.2.6.3"><span class="term"><span class="emphasis"><em>The reboot of a previously correctly booted snapshot has failed.</em></span></span></dt><dd><p>
     If there was already a problem during boot and automatic reboot has been
     triggered, but the problem still persists, then the system is kept running
     to enable to the administrator to fix the problem. The services that are
     tested by the health checker plugins are stopped if possible.
    </p></dd></dl></div><section class="sect1" id="sec-health-plugins" data-id-title="Adding custom plugins"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8.1 </span><span class="title-name">Adding custom plugins</span></span> <a title="Permalink" class="permalink" href="#sec-health-plugins">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_health_checker.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Health checker supports the addition of your own plugins to check services
   during the boot process. Each plugin is a bash script that must fulfill the
   following requirements:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Plugins are located within a specific
     directory—<code class="filename">/usr/libexec/health-checker</code>
    </p></li><li class="listitem"><p>
     The service that will be checked by the particular plugin must be defined
     in the <code class="literal">Unit</code> section of the
     <code class="filename">/usr/lib/systemd/system/health-checker.service</code> file.
     For example, the <code class="literal">etcd</code> service is defined as follows:
    </p><div class="verbatim-wrap"><pre class="screen">[Unit]
...
After=etcd.service
...</pre></div></li><li class="listitem"><p>
     Each plugin must have functions called <code class="literal">run.checks</code> and
     <code class="literal">stop_services</code> defined. The
     <code class="literal">run.checks</code> function checks whether a particular service
     has started properly. Bear in mind that service that has not been enabled
     by systemd, should be ignored. The function
     <code class="literal">stop_services</code> is called to stop the particular service
     in case the service has not been started properly. You can use the plugin
     template for your reference.
    </p></li></ul></div></section></section><section xml:lang="en" class="chapter" id="cha-admin-toolbox" data-id-title="toolbox for SLE Micro debugging"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">9 </span><span class="title-name"><code class="literal">toolbox</code> for SLE Micro debugging</span></span> <a title="Permalink" class="permalink" href="#cha-admin-toolbox">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_toolbox.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
      This chapter describes the usage and purpose of the
      <code class="literal">toolbox</code> utility.
   </p></div></div></div></div><p>
  SLE Micro uses the <code class="command">transactional-update</code> command to apply
  changes to the system, but the changes are applied only after reboot. That
  solution has several benefits, but it also has some disadvantages. If you
  need to debug your system and install a new tool, the tool will be available
  only after reboot. Therefore you are not able to debug the currently running
  system. For this reason a utility called <code class="literal">toolbox</code> has been
  developed.
 </p><p>
  <code class="literal">toolbox</code> is a small script that pulls a container image and
  runs a privileged container based on that image. In the toolbox container you
  can install any tool you want with <code class="command">zypper</code> and then use the
  tool without rebooting your system.
 </p><p>
  To start the <code class="literal">toolbox</code> container, run the following:
 </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>/usr/bin/toolbox</pre></div><p>
  If the script completes successfully, you will see the
  <code class="literal">toolbox</code> container prompt.
 </p><div id="id-1.8.5.3.8" data-id-title="Obtaining the toolbox image" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Obtaining the <code class="literal">toolbox</code> image</div><p>
   You can also use Podman or Cockpit to pull the <code class="literal">toolbox</code>
   image and start a container based on that image.
  </p></div></section><section xml:lang="en" class="chapter" id="cha-performance-monitoring" data-id-title="Monitoring performance"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">10 </span><span class="title-name">Monitoring performance</span></span> <a title="Permalink" class="permalink" href="#cha-performance-monitoring">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    For performance monitoring purposes, SLE Micro provides a container image that
  enables you to run the Performance Co-Pilot (PCP) analysis toolkit in a
  container. The toolkit comprises tools for gathering and processing
  performance information collected either in real time or from PCP archive
  logs.
    </p></div></div></div></div><p>
  The performance data are collected by <span class="emphasis"><em>performance metrics domain
  agents</em></span> and passed to the <span class="emphasis"><em>pmcd</em></span> daemon. The
  daemon coordinates the gathering and exporting of performance statistics in
  response to requests from the PCP monitoring tools.
  <code class="command">pmlogger</code> is then used to log the metrics. For details,
  refer to the
  <a class="link" href="https://pcp.readthedocs.io/en/latest/UAG/IntroductionToPcp.html#" target="_blank">PCP
  documentation</a>.
 </p><section class="sect1" id="sec-getting-pcp" data-id-title="Getting the PCP container image"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.1 </span><span class="title-name">Getting the PCP container image</span></span> <a title="Permalink" class="permalink" href="#sec-getting-pcp">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The PCP container image is based on the <span class="emphasis"><em>BCI-Init</em></span>
   container that utilizes <code class="systemitem">systemd</code> used to manage the PCP services.
  </p><p>
   You can pull the container image using podman or from the Cockpit web
   management console. To pull the image by using podman, run the following
   command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>podman pull registry.suse.com/suse/pcp:latest</pre></div><p>
   To get the container image using Cockpit, go to <span class="guimenu">Podman
   containers</span>, click <span class="guimenu">Get new image</span>, and search for
   <span class="emphasis"><em>pcp</em></span>. Then select the image from the
   <code class="literal">registry.suse.com</code> for SLE 15 SP4 and download it.
  </p></section><section class="sect1" id="sec-starting-pcp" data-id-title="Running the PCP container"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.2 </span><span class="title-name">Running the PCP container</span></span> <a title="Permalink" class="permalink" href="#sec-starting-pcp">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The following command shows minimal options that you need to use to run a
   PCP container:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>podman run -d  \
  --systemd always \
  -p <em class="replaceable">HOST_IP:HOST_PORT:CONTAINER_PORT</em> \
  -v <em class="replaceable">HOST_DIR</em>:/var/log/pcp/pmlogger \
  <em class="replaceable">PCP_CONTAINER_IMAGE</em></pre></div><p>
   where the options have the following meaning:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.5.4.5.5.1"><span class="term"><code class="option">-d</code></span></dt><dd><p>
      The container will run in a detached mode without tty.
     </p></dd><dt id="id-1.8.5.4.5.5.2"><span class="term"><code class="option">--systemd always</code></span></dt><dd><p>
      Runs the container in the <code class="systemitem">systemd</code> mode. All services needed to run in
      the PCP container will be started automatically by <code class="systemitem">systemd</code> in the
      container.
     </p></dd><dt id="id-1.8.5.4.5.5.3"><span class="term"><code class="option">--privileged</code></span></dt><dd><p>
      The container runs with extended privileges. Use this option if your
      system has SELinux enabled, otherwise the collected metrics will be
      incomplete.
     </p></dd><dt id="id-1.8.5.4.5.5.4"><span class="term"><code class="option">-v <em class="replaceable">HOST_DIR</em>:/var/log/pcp/pmlogger</code></span></dt><dd><p>
      Creates a bind mount so that <code class="command">pmlogger</code> archives are
      written to the <em class="replaceable">HOST_DIR</em> on the host. By
      default, <code class="command">pmlogger</code> stores the collected metrics in
      <code class="filename">/var/log/pcp/pmlogger</code>.
     </p></dd><dt id="id-1.8.5.4.5.5.5"><span class="term"><em class="replaceable">PCP_CONTAINER_IMAGE</em></span></dt><dd><p>
      Is the downloaded PCP container image.
     </p></dd></dl></div><p>
   Other useful options of the <code class="command">podman run</code> command follow:
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Other options </span></span><a title="Permalink" class="permalink" href="#id-1.8.5.4.5.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.8.5.4.5.7.2"><span class="term"><code class="option">-p <em class="replaceable">HOST_IP:HOST_PORT:CONTAINER_PORT</em></code></span></dt><dd><p>
      Publishes ports of the container by mapping a container port onto a host
      port. If you do not specify <em class="replaceable">HOST_IP</em>, the ports
      will be mapped on the local host. If you omit the
      <em class="replaceable">HOST_PORT</em> value, a random port number will be
      used. By default, the <code class="command">pmcd</code> daemon listens and exposes
      the PMAPI to receive metrics on the port <span class="emphasis"><em>44321</em></span>, so
      it is recommended to map this port on the same port number on the host.
      The <code class="command">pmproxy</code> daemon listens on and exposes the REST
      PMWEBAPI to access metrics on the <span class="emphasis"><em>44322</em></span> port by
      default, so it is recommended to map this port on the same host port
      number.
     </p></dd><dt id="id-1.8.5.4.5.7.3"><span class="term"><code class="option">--net host</code></span></dt><dd><p>
      The container uses the host's network. Use this option if you want to
      collect metrics from the host's network interfaces.
     </p></dd><dt id="id-1.8.5.4.5.7.4"><span class="term"><code class="option">-e</code></span></dt><dd><p>
      The option enables you to set the following environment variables:
     </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.5.4.5.7.4.2.2.1"><span class="term">PCP_SERVICES</span></dt><dd><p>
         Is a comma-separated list of services to start by <code class="systemitem">systemd</code> in the
         container.
        </p><p>
         Default services are: <code class="literal">pmcd</code>,
         <code class="literal">pmie</code>, <code class="literal">pmlogger</code>,
         <code class="literal">pmproxy</code>.
        </p><p>
         You can use this variable, if you want to run a container with a list
         of services that is different from the default one, for example, only
         with <code class="literal">pmlogger</code>:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>podman run -d \
  --name pmlogger \
  --systemd always \
  -e PCP_SERVICES=pmlogger  \
  -v pcp-archives:/var/log/pcp/pmlogger  \
  registry.suse.com/suse/pcp:latest</pre></div></dd><dt id="id-1.8.5.4.5.7.4.2.2.2"><span class="term">HOST_MOUNT</span></dt><dd><p>
         Is a path inside the container to the bind mount of the host's root
         file system. The default value is not set.
        </p></dd><dt id="id-1.8.5.4.5.7.4.2.2.3"><span class="term">REDIS_SERVERS</span></dt><dd><p>
         Specifies a connection to a Redis server. In a non-clustered setup,
         provide a comma-separated list of host specs. In a clustered setup,
         provide any individual cluster host, other hosts in the cluster are
         discovered automatically. The default value is:
         <code class="literal">localhost:6379</code>.
        </p></dd></dl></div><p>
      If you need to use a different configuration to the one provided by the
      environment variables, proceed as described in
      <a class="xref" href="#sec-pcp-services-configuration" title="10.3. Configuring PCP services">Section 10.3, “Configuring PCP services”</a>.
     </p></dd></dl></div></section><section class="sect1" id="sec-pcp-services-configuration" data-id-title="Configuring PCP services"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.3 </span><span class="title-name">Configuring PCP services</span></span> <a title="Permalink" class="permalink" href="#sec-pcp-services-configuration">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   All services that run inside the PCP container have a default configuration
   that might not suit your needs. If you need a custom configuration that
   cannot be covered by the environment variables described above, create
   configuration files for the PCP services and pass them to the PCP using a
   bind mount as follows:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>podman run -d \
  --name <em class="replaceable">CONTAINER_NAME</em> \
  --systemd always \
  -v $<em class="replaceable">HOST_CONFIG</em>:<em class="replaceable">CONTAINER_CONFIG_PATH</em>:z \
  -v <em class="replaceable">HOST_LOGS_PATH</em>:/var/log/pcp/pmlogger  \
  registry.suse.com/suse/pcp:latest</pre></div><p>
   Where:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.5.4.6.5.1"><span class="term"><em class="replaceable">CONTAINER_NAME</em></span></dt><dd><p>
      Is an optional container name.
     </p></dd><dt id="id-1.8.5.4.6.5.2"><span class="term"><em class="replaceable">HOST_CONFIG</em></span></dt><dd><p>
      Is an absolute path to the config you created on the host machine. You
      can choose any file name you want.
     </p></dd><dt id="id-1.8.5.4.6.5.3"><span class="term"><em class="replaceable">CONTAINER_CONFIG_PATH</em></span></dt><dd><p>
      Is an absolute path to a particular configuration file inside the
      container. Each available configuration file is described in the
      corresponding sections further.
     </p></dd><dt id="id-1.8.5.4.6.5.4"><span class="term"><em class="replaceable">HOST_LOGS_PATH</em></span></dt><dd><p>
      Is a directory that should be a bind mount to the container logs.
     </p></dd></dl></div><p>
   For example, a container called <code class="literal">pcp</code>, with the
   configuration file <code class="filename">pmcd</code> on the host machine and the
   <code class="filename">pcp-archives</code> directory for logs on the host machine, is
   run by the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>podman run -d \
  --name pcp  \
  --systemd always \
  -v $(pwd)/pcp-archives:/var/log/pcp/pmlogger \
  -v $(pwd)/pmcd:/etc/sysconfig/pmcd \
registry.suse.com/suse/pcp:latest</pre></div><section class="sect2" id="sec-pmcd-daemon-configuration" data-id-title="Custom pmcd daemon configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.3.1 </span><span class="title-name">Custom <code class="command">pmcd</code> daemon configuration</span></span> <a title="Permalink" class="permalink" href="#sec-pmcd-daemon-configuration">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="command">pmcd</code> daemon configuration is stored in the
    <code class="filename">/etc/sysconfig/pmcd</code> file. The file stores environment
    variables that modify the behavior of the <code class="command">pmcd</code> daemon.
   </p><section class="sect3" id="sec-sysconfig-pmcd" data-id-title="The /etc/sysconfig/pmcd file"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.3.1.1 </span><span class="title-name">The <code class="filename">/etc/sysconfig/pmcd</code> file</span></span> <a title="Permalink" class="permalink" href="#sec-sysconfig-pmcd">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     You can add the following variables to the file to configure the
     <code class="command">pmcd</code> daemon:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.5.4.6.8.3.3.1"><span class="term">PMCD_LOCAL</span></dt><dd><p>
        Defines whether the remote host can connect to the
        <code class="command">pmcd</code> daemon. If set to <span class="emphasis"><em>0</em></span>,
        remote connections to the daemon are allowed. If set to
        <span class="emphasis"><em>1</em></span>, the daemon listens only on the local host. The
        default value is <span class="emphasis"><em>0</em></span>.
       </p></dd><dt id="id-1.8.5.4.6.8.3.3.2"><span class="term">PMCD_MAXPENDING</span></dt><dd><p>
        Defines the maximum count of pending connections to the agent. The
        default value is 5.
       </p></dd><dt id="id-1.8.5.4.6.8.3.3.3"><span class="term">PMCD_ROOT_AGENT</span></dt><dd><p>
        If the <code class="literal">pmdaroot</code> is enabled (the value is set to
        <span class="emphasis"><em>1</em></span>), adding a new PDMA does not trigger restarting
        of other PMDAs. If <code class="literal">pmdaroot</code> is not enabled,
        <code class="command">pmcd</code> will require to restart all PMDAs when a new
        PMDA is added. The default value is <span class="emphasis"><em>1</em></span>.
       </p></dd><dt id="id-1.8.5.4.6.8.3.3.4"><span class="term">PMCD_RESTART_AGENTS</span></dt><dd><p>
        If set to <span class="emphasis"><em>1</em></span>, the <code class="command">pmcd</code> daemon
        tries to restart any exited PMDA. Enable this option only if you have
        enabled <code class="literal">pmdaroot</code>, as <code class="command">pmcd</code> itself
        does not have privileges to restart PMDA.
       </p></dd><dt id="id-1.8.5.4.6.8.3.3.5"><span class="term">PMCD_WAIT_TIMEOUT</span></dt><dd><p>
        Defines the maximum time in seconds <code class="command">pmcd</code> can wait
        to accept a connection. After this time, the connection is reported as
        failed. The default value is <span class="emphasis"><em>60</em></span>.
       </p></dd><dt id="id-1.8.5.4.6.8.3.3.6"><span class="term">PCP_NSS_INIT_MODE</span></dt><dd><p>
        Defines the mode in which <code class="command">pmcd</code> initializes the NSS
        certificate database when secured connections are used. The default
        value is <code class="literal">readonly</code>. You can set the mode to
        <code class="literal">readwrite</code>, but if the initialization fails, the
        default value is used as a fallback.
       </p></dd></dl></div><p>
     An example follows:
    </p><div class="verbatim-wrap"><pre class="screen">      PMCD_LOCAL=0
      PMCD_MAXPENDING=5
      PMCD_ROOT_AGENT=1
      PMCD_RESTART_AGENTS=1
      PMCD_WAIT_TIMEOUT=70
      PCP_NSS_INIT_MODE=readwrite</pre></div></section></section><section class="sect2" id="sec-pmlogger-configuration" data-id-title="Custom pmlogger configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.3.2 </span><span class="title-name">Custom <code class="command">pmlogger</code> configuration</span></span> <a title="Permalink" class="permalink" href="#sec-pmlogger-configuration">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The custom configuration for the <code class="command">pmlogger</code> is stored in
    the following configuration files:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <code class="filename">/etc/sysconfig/pmlogger</code>
     </p></li><li class="listitem"><p>
      <code class="filename">/etc/pcp/pmlogger/control.d/local</code>
     </p></li></ul></div><section class="sect3" id="sec-sysconfig-pmlogger" data-id-title="The /etc/sysconfig/pmlogger file"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.3.2.1 </span><span class="title-name">The <code class="filename">/etc/sysconfig/pmlogger</code> file</span></span> <a title="Permalink" class="permalink" href="#sec-sysconfig-pmlogger">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     You can use the following attributes to configure the
     <code class="command">pmlogger</code>:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.5.4.6.9.4.3.1"><span class="term">PMLOGGER_LOCAL</span></dt><dd><p>
        Defines whether <code class="command">pmlogger</code> allows connections from
        remote hosts. If set to <span class="emphasis"><em>1</em></span>,
        <code class="command">pmlogger</code> allows connections from local host only.
       </p></dd><dt id="id-1.8.5.4.6.9.4.3.2"><span class="term">PMLOGGER_MAXPENDING</span></dt><dd><p>
        Defines the maximum count of pending connections. The default value is
        5.
       </p></dd><dt id="id-1.8.5.4.6.9.4.3.3"><span class="term">PMLOGGER_INTERVAL</span></dt><dd><p>
        Defines the default sampling interval <code class="command">pmlogger</code> uses.
        The default value is <span class="emphasis"><em>60 s</em></span>. Keep in mind that
        this value can be overridden by the <code class="command">pmlogger</code> command
        line.
       </p></dd><dt id="id-1.8.5.4.6.9.4.3.4"><span class="term">PMLOGGER_CHECK_SKIP_LOGCONF</span></dt><dd><p>
        Setting this option to <span class="emphasis"><em>yes</em></span> disables the
        regeneration and checking of the <code class="command">pmlogger</code>
        configuration if the configuration <code class="command">pmlogger</code> comes
        from <code class="command">pmlogconf</code>. The default behavior is to
        regenerate configuration files and check for changes every time
        <code class="command">pmlogger</code> is started.
       </p></dd></dl></div><p>
     An example follows:
    </p><div class="verbatim-wrap"><pre class="screen">PMLOGGER_LOCAL=1
PMLOGGER_MAXPENDING=5
PMLOGGER_INTERVAL=10
PMLOGGER_CHECK_SKIP_LOGCONF=yes</pre></div></section><section class="sect3" id="sec-control-local" data-id-title="The /etc/pcp/pmlogger/control.d/local file"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.3.2.2 </span><span class="title-name">The <code class="filename">/etc/pcp/pmlogger/control.d/local</code> file</span></span> <a title="Permalink" class="permalink" href="#sec-control-local">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The file <code class="filename">/etc/pcp/pmlogger/control.d/local</code> stores
     specifications of the host, which metrics should be logged, the logging
     frequency (default is 24 hours), and <code class="command">pmlogger</code> options.
     For example:
    </p><div class="verbatim-wrap"><pre class="screen"># === VARIABLE ASSIGNMENTS ===
#
# DO NOT REMOVE OR EDIT THE FOLLOWING LINE
$version=1.1

# Uncomment one of the lines below to enable/disable compression behaviour
# that is different to the pmlogger_daily default.
# Value is days before compressing archives, 0 is immediate compression,
# "never" or "forever" suppresses compression.
#
#$PCP_COMPRESSAFTER=0
#$PCP_COMPRESSAFTER=3
#$PCP_COMPRESSAFTER=never

# === LOGGER CONTROL SPECIFICATIONS ===
#
#Host           P?  S?  directory                       args

# local primary logger
LOCALHOSTNAME   y   n   PCP_ARCHIVE_DIR/LOCALHOSTNAME   -r -T24h10m -c config.default -v 100Mb</pre></div><div id="id-1.8.5.4.6.9.5.4" data-id-title="Defaults point to local host" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Defaults point to local host</div><p>
      If you run the <code class="command">pmlogger</code> in a container on a different
      machine than the one that runs the <code class="command">pmcd</code> (a client),
      change the following line to point to the client:
     </p><div class="verbatim-wrap"><pre class="screen"># local primary logger
<em class="replaceable">CLIENT_HOSTNAME</em>   y   n   PCP_ARCHIVE_DIR/<em class="replaceable">CLIENT_HOSTNAME</em>   -r -T24h10m -c config.default -v 100Mb</pre></div><p>
      For example, for the <code class="literal">slemicro_1</code> host name, the line
      should look as follows:
     </p><div class="verbatim-wrap"><pre class="screen"># local primary logger
slemicro_1   y   n   PCP_ARCHIVE_DIR/slemicro_1   -r -T24h10m -c config.default -v 100Mb</pre></div></div></section></section></section><section class="sect1" id="sec-autostart-onboot" data-id-title="Starting the PCP container automatically on boot"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.4 </span><span class="title-name">Starting the PCP container automatically on boot</span></span> <a title="Permalink" class="permalink" href="#sec-autostart-onboot">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   After you run the PCP container, you can configure <code class="systemitem">systemd</code> to start the
   container on boot. To do so, follow the procedure below:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Create a unit file for the container by using the <code class="command">podman generate
     systemd</code> command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>podman generate systemd --name <em class="replaceable">CONTAINER_NAME</em> &gt; /etc/systemd/system/container-<em class="replaceable">CONTAINER_NAME</em>.service</pre></div><p>
     where <em class="replaceable">CONTAINER_NAME</em> is the name of the PCP
     container you used when running the container from the container image.
    </p></li><li class="step"><p>
     Enable the service in <code class="systemitem">systemd</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemctl enable container-<em class="replaceable">CONTAINER_NAME</em></pre></div></li></ol></div></div></section><section class="sect1" id="sec-collecting-metrics" data-id-title="Metrics management"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.5 </span><span class="title-name">Metrics management</span></span> <a title="Permalink" class="permalink" href="#sec-collecting-metrics">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect2" id="sec-listing-metrics" data-id-title="Listing available performance metrics"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.5.1 </span><span class="title-name">Listing available performance metrics</span></span> <a title="Permalink" class="permalink" href="#sec-listing-metrics">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    From within the container, you can use the command
    <code class="command">pminfo</code> to list metrics. For example, to list all
    available performance metrics, run:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>pminfo</pre></div><p>
    You can list a group of related metrics by specifying the metrics prefix:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>pminfo <em class="replaceable">METRIC_PREFIX</em></pre></div><p>
    For example, to list all metrics related to kernel, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>pminfo disk

disk.dev.r_await
disk.dm.await
disk.dm.r_await
disk.md.await
disk.md.r_await
...</pre></div><p>
    You can also specify additional strings to narrow down the list of metrics,
    for example:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>piminfo disk.dev

disk.dev.read
disk.dev.write
disk.dev.total
disk.dev.blkread
disk.dev.blkwrite
disk.dev.blktotal
...</pre></div><p>
    To get online help text of a particular metric, use the <code class="option">-t</code>
    option followed by the metric, for example:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>pminfo -t kernel.cpu.util.user

kernel.cpu.util.user [percentage of user time across all CPUs, including guest CPU time]</pre></div><p>
    To display a description text of a particular metric, use the
    <code class="option">-T</code> option followed by the metric, for example:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>pminfo -T kernel.cpu.util.user

Help:
percentage of user time across all CPUs, including guest CPU time</pre></div></section><section class="sect2" id="sec-local-metrics" data-id-title="Checking local metrics"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.5.2 </span><span class="title-name">Checking local metrics</span></span> <a title="Permalink" class="permalink" href="#sec-local-metrics">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    After you start the PCP container, you can verify that metrics are being
    recorded properly by running the following command inside the container:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>pcp

Performance Co-Pilot configuration on localhost:

 platform: Linux localhost 6.4.0-150600.9-default #1 SMP Wed May 4 11:29:09 UTC 2022 (ea30951) x86_64
 hardware: 1 cpu, 1 disk, 1 node, 1726MB RAM
 timezone: UTC
 services: pmcd pmproxy
     pmcd: Version 5.2.2-1, 9 agents, 4 clients
     pmda: root pmcd proc pmproxy xfs linux mmv kvm jbd2
 pmlogger: primary logger: /var/log/pcp/pmlogger/localhost/20220607.09.24
     pmie: primary engine: /var/log/pcp/pmie/localhost/pmie.log</pre></div><p>
    Now check if the logs are written to a proper destination:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>ls <em class="replaceable">PATH_TO_PMLOGGER_LOGS</em></pre></div><p>
    where <em class="replaceable">PATH_TO_PMLOGGER_LOGS</em> should be
    <code class="filename">/var/log/pcp/pmlogger/localhost/</code> in this case.
   </p></section><section class="sect2" id="sec-remote-metrics" data-id-title="Recording metrics from remote systems"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.5.3 </span><span class="title-name">Recording metrics from remote systems</span></span> <a title="Permalink" class="permalink" href="#sec-remote-metrics">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_pcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can deploy collector containers that collect metrics from different
    remote systems than the ones where the <code class="command">pmlogger</code>
    containers are running. Each remote collector system needs the
    <code class="command">pmcd</code> daemon and a set of <span class="emphasis"><em>pmda</em></span>. To
    deploy several collectors with a centralized monitoring system, proceed as
    follows.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      On each system you want to collect metrics from (clients), run a
      container with the <code class="command">pmcd</code> daemon:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>podman run -d \
    --name pcp-pmcd \
    --privileged \
    --net host \
    --systemd always \
    -e PCP_SERVICES=pmcd \
    -e HOST_MOUNT=/host \
    -v /:/host:ro,rslave \
    registry.suse.com/suse/pcp:latest</pre></div></li><li class="step" id="pmlogger-config"><p>
      On the monitoring system, create a <code class="command">pmlogger</code>
      configuration file for each client
      <code class="filename">control.<em class="replaceable">CLIENT</em></code> with the
      following content:
     </p><div class="verbatim-wrap"><pre class="screen">$version=1.1

<em class="replaceable">CLIENT_HOSTNAME</em> n n PCP_ARCHIVE_DIR/<em class="replaceable">CLIENT</em> -N -r -T24h10m -c config.default -v 100Mb</pre></div><p>
      Keep in mind that the <em class="replaceable">CLIENT_HOSTNAME</em> must be
      resolvable in DNS. You can use IP addresses or fully qualified domain
      names (FQDN) instead.
     </p></li><li class="step"><p>
      On the monitoring system, create a directory for each client to store the
      recorded logs:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>mkdir /root/pcp-archives/<em class="replaceable">CLIENT</em></pre></div><p>
      For example, for <code class="literal">slemicro_1</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>mkdir /root/pcp-archives/slemicro_1</pre></div></li><li class="step"><p>
      On the monitoring system, run a container with
      <code class="command">pmlogger</code> for each client:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>podman run -d \
    --name pcp-pmlogger-<em class="replaceable">CLIENT</em> \
    --systemd always \
    -e PCP_SERVICES=pmlogger \
    -v /root/pcp-archives/<em class="replaceable">CLIENT</em>:/var/log/pcp/pmlogger:z \
    -v $(pwd)/control.<em class="replaceable">CLIENT</em>:/etc/pcp/pmlogger/control.d/local:z \
    registry.suse.com/suse/pcp:latest</pre></div><p>
      For example, for a client called <code class="literal">slemicro_1</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>podman run -d \
    --name pcp-pmlogger-slemicro_1 \
    --systemd always \
    -e PCP_SERVICES=pmlogger \
    -v /root/pcp-archives:/var/log/pcp/pmlogger:z \
    -v $(pwd)/control.slemicro_1:/etc/pcp/pmlogger/control.d/local:z \
    registry.suse.com/suse/pcp:latest</pre></div><div id="id-1.8.5.4.8.4.3.4.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
       The second bind mount points to the configuration file created in
       <a class="xref" href="#pmlogger-config" title="Step 2">Step 2</a> and replaces the default
       <code class="command">pmlogger</code> configuration. If you do not create this
       bind mount, <code class="command">pmlogger</code> uses the default
       <code class="filename">/etc/pcp/pmlogger/control.d/local</code> file and logging
       from clients fails as the default configuration points to a local host.
       For details about the configuration file, refer to
       <a class="xref" href="#sec-control-local" title="10.3.2.2. The /etc/pcp/pmlogger/control.d/local file">Section 10.3.2.2, “The <code class="filename">/etc/pcp/pmlogger/control.d/local</code> file”</a>.
      </p></div></li><li class="step"><p>
      To check if the log collection is working properly, run:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>ls -l pcp-archives/<em class="replaceable">CLIENT</em>/<em class="replaceable">CLIENT</em></pre></div><p>
      For example:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>ls -l pcp-archives/slemicro_1/slemicro_1

total 1076
-rw-r--r--. 1 systemd-network systemd-network 876372 Jun  8 11:24 20220608.10.58.0
-rw-r--r--. 1 systemd-network systemd-network    312 Jun  8 11:22 20220608.10.58.index
-rw-r--r--. 1 systemd-network systemd-network 184486 Jun  8 10:58 20220608.10.58.meta
-rw-r--r--. 1 systemd-network systemd-network    246 Jun  8 10:58 Latest
-rw-r--r--. 1 systemd-network systemd-network  24595 Jun  8 10:58 pmlogger.log</pre></div></li></ol></div></div></section></section></section></div><div class="part" id="part-slemicro-troubleshooting" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part IV </span><span class="title-name">Troubleshooting </span></span><a title="Permalink" class="permalink" href="#part-slemicro-troubleshooting">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_admin_slemicro.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#cha-adm-support-slemicro"><span class="title-number">11 </span><span class="title-name">Gathering system information for support</span></a></span></li><dd class="toc-abstract"><p>
        In case of problems, a detailed system report may be created with the
        <code class="command">supportconfig</code> command-line tool. The tool will
        collect information about the system, such as the current kernel
        version, hardware, installed packages, partition setup, and much more.
        The result is a TAR archive of files. After opening a Service Request
        (SR), you can upload the TAR archive to Global Technical Support. It
        will help you to locate the reported issue and solve the problem.
      </p><p>
        You can analyze the <code class="command">supportconfig</code> output for known
        issues to help resolve problems faster.
      </p></dd></ul></div><section class="chapter" id="cha-adm-support-slemicro" data-id-title="Gathering system information for support"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">11 </span><span class="title-name">Gathering system information for support</span></span> <a title="Permalink" class="permalink" href="#cha-adm-support-slemicro">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
        In case of problems, a detailed system report may be created with the
        <code class="command">supportconfig</code> command-line tool. The tool will
        collect information about the system, such as the current kernel
        version, hardware, installed packages, partition setup, and much more.
        The result is a TAR archive of files. After opening a Service Request
        (SR), you can upload the TAR archive to Global Technical Support. It
        will help you to locate the reported issue and solve the problem.
      </p><p>
        You can analyze the <code class="command">supportconfig</code> output for known
        issues to help resolve problems faster.
      </p></div></div></div></div><section class="sect1" id="sec-collecting-information" data-id-title="Collecting system information with supportconfig"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">11.1 </span><span class="title-name">Collecting system information with <code class="command">supportconfig</code></span></span> <a title="Permalink" class="permalink" href="#sec-collecting-information">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      To create a TAR archive with detailed system information that you can
      hand over to Global Technical Support, use the command
      <code class="command">supportconfig</code>. The command-line tool is provided by
      the package <code class="systemitem">supportutils</code> which is installed by
      default.
    </p><p>
      Depending on which packages are installed on your system, some of these
      packages integrate <code class="command">supportconfig</code> plug-ins. When
      <code class="command">supportconfig</code> is executed, all plug-ins are executed
      as well, creating one or more result files for the archive. This has the
      benefit that the only topics checked are those that contain a specific
      plug-in for them. <code class="command">supportconfig</code> plug-ins are stored in
      the directory <code class="filename">/usr/lib/supportconfig/plugins/</code>.
    </p><p>
      The following procedure shows how to create a Supportconfig archive, but
      without submitting it to support directly. For uploading it, you need to
      run the command with certain options as described in
      <a class="xref" href="#pro-admsupport-submit-cli" title="Submitting information to support from command line">Procedure 11.1, “Submitting information to support from command line”</a>.
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
          Run <code class="command">supportconfig</code> as <code class="systemitem">root</code>. Usually, it is
          enough to run this tool without any options. Some options are very
          common and are displayed in the following list:
        </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.6.2.3.5.1.2.1"><span class="term"><code class="option">-E <em class="replaceable">MAIL</em></code>, </span><span class="term"><code class="option">-N <em class="replaceable">NAME</em></code>, </span><span class="term"><code class="option">-O <em class="replaceable">COMPANY</em></code>, </span><span class="term"><code class="option">-P <em class="replaceable">PHONE</em></code></span></dt><dd><p>
                Sets your contact data: e-mail address (<code class="option">-E</code>),
                company name (<code class="option">-O</code>), your name
                (<code class="option">-N</code>), and your phone number
                (<code class="option">-P</code>).
              </p></dd><dt id="id-1.8.6.2.3.5.1.2.2"><span class="term"><code class="option">-i <em class="replaceable">KEYWORDS</em></code>, </span><span class="term"><code class="option">-F</code></span></dt><dd><p>
                Limits the features to check. The placeholder
                <em class="replaceable">KEYWORDS</em> is a comma-separated list
                of case-sensitive keywords. Get a list of all keywords with
                <code class="command">supportconfig -F</code>.
              </p></dd></dl></div></li><li class="step"><p>
          Wait for the tool to complete the operation.
        </p></li><li class="step"><p>
          The default archive location is <code class="filename">/var/log</code>, with
          the file name format being
          <code class="filename">scc_<em class="replaceable">HOST</em>_<em class="replaceable">DATE</em>_<em class="replaceable">TIME</em>.txz</code>
        </p></li></ol></div></div><section class="sect2" id="sec-understanding-output-slemicro" data-id-title="Understanding the output of supportconfig"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">11.1.1 </span><span class="title-name">Understanding the output of <code class="command">supportconfig</code></span></span> <a title="Permalink" class="permalink" href="#sec-understanding-output-slemicro">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        If you run <code class="command">supportconfig</code>, the script gives you a
        summary of what it did.
      </p><div class="verbatim-wrap"><pre class="screen">                     Support Utilities - Supportconfig
                          Script Version: 3.1.11-46.2 
                          Library Version: 3.1.11-29.6
                          Script Date: 2022 10 18
[...]
Gathering system information
  Data Directory:    /var/log/scc_d251_180201_1525 <span class="callout" id="co-admsupport-script-datadir">1</span>

  Basic Server Health Check...                 Done <span class="callout" id="co-admsupport-script-done">2</span>
  RPM Database...                              Done <a class="xref" href="#co-admsupport-script-done"><span class="callout">2</span></a>
  Basic Environment...                         Done <a class="xref" href="#co-admsupport-script-done"><span class="callout">2</span></a>
  System Modules...                            Done <a class="xref" href="#co-admsupport-script-done"><span class="callout">2</span></a>
[...]
  File System List...                          Skipped <span class="callout" id="co-admsupport-script-skipped">3</span>
[...]
  Command History...                           Excluded <span class="callout" id="co-admsupport-script-excluded">4</span>
[...]
  Supportconfig Plugins:                       1 <span class="callout" id="co-admsupport-script-plugin">5</span>
    Plugin: pstree...                          Done
[...]
Creating Tar Ball

==[ DONE ]===================================================================
  Log file tar ball: /var/log/scc_d251_180201_1525.txz <span class="callout" id="co-admsupport-script-archive">6</span>
  Log file size:     732K
  Log file md5sum:   bf23e0e15e9382c49f92cbce46000d8b
=============================================================================</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-datadir"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The temporary data directory to store the results. This directory
            is archived as a tar file, see
            <a class="xref" href="#co-admsupport-script-archive"><span class="callout">6</span></a>.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-done"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The feature was enabled (either by default or selected manually)
            and executed successfully. The result is stored in a file (see
            <a class="xref" href="#tab-admsupport-features-and-filenames" title="Comparison of features and file names in the TAR archive">Table 11.1, “Comparison of features and file names in the TAR archive”</a>).
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-skipped"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The feature was skipped because some files of one or more RPM
            packages were changed.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-excluded"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The feature was excluded because it was deselected via the
            <code class="option">-x</code> option.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-plugin"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The script found one plug-in and executes the plug-in
            <code class="command">pstree</code>. The plug-in was found in the directory
            <code class="filename">/usr/lib/supportconfig/plugins/</code>.
            See the man page for details.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-archive"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The tar file name of the archive, compressed with
            <code class="command">xz</code> by default.
          </p></td></tr></table></div></section><section class="sect2" id="sec-slemicro-options" data-id-title="Common supportconfig options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">11.1.2 </span><span class="title-name">Common supportconfig options</span></span> <a title="Permalink" class="permalink" href="#sec-slemicro-options">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The <code class="command">supportconfig</code> utility is usually called without
        any options. Display a list of all options with
        <code class="command">supportconfig</code> <code class="option">-h</code>. The following
        list gives a brief overview of some common use cases:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.8.6.2.3.7.3.1"><span class="term">Reducing the amount of the information being gathered</span></dt><dd><p>
              Use the minimal option (<code class="option">-m</code>):
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>supportconfig -m</pre></div></dd><dt id="id-1.8.6.2.3.7.3.2"><span class="term">Limiting the information to a specific topic</span></dt><dd><p>
              If you have already localized a problem
              
              that relates to a specific area or feature set only, you should
              limit the collected information to the specific area for the next
              <code class="command">supportconfig</code> run. For example, you have
              detected problems with LVM and want to test a recent change that
              you introduced to the LVM configuration. In this case, it makes
              sense to gather the minimum Supportconfig information around LVM
              only:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>supportconfig -i LVM</pre></div><p>
              Additional keywords can be separated with commas. For example, an
              additional disk test:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>supportconfig -i LVM,DISK</pre></div><p>
              For a complete list of feature keywords that you can use for
              limiting the collected information to a specific area, run:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>supportconfig -F</pre></div></dd><dt id="id-1.8.6.2.3.7.3.3"><span class="term">Including additional contact information in the output:</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>supportconfig -E tux@example.org -N "Tux Penguin" -O "Penguin Inc." ...</pre></div><p>
              (all in one line)
            </p></dd><dt id="id-1.8.6.2.3.7.3.4"><span class="term">Collecting already rotated log files</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>supportconfig -l</pre></div><p>
              This is especially useful in high-logging environments or after a
              kernel crash when syslog rotates the log files after a reboot.
            </p></dd></dl></div></section><section class="sect2" id="sec-slemicro-archive-content" data-id-title="Overview of the archive content"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">11.1.3 </span><span class="title-name">Overview of the archive content</span></span> <a title="Permalink" class="permalink" href="#sec-slemicro-archive-content">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The TAR archive contains all the results from the features. Depending
        on what you have selected (all or only a small set), the archive can
        contain more or fewer files. The set of features can be limited using
        the <code class="option">-i</code> option (see
        <a class="xref" href="#sec-slemicro-options" title="11.1.2. Common supportconfig options">Section 11.1.2, “Common supportconfig options”</a>).
      </p><p>
        To list the contents of the archive, use the following
        <code class="command">tar</code> command:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">tar</code> xf /var/log/scc_earth_180131_1545.txz</pre></div><p>
        The following file names are always available inside the TAR archive:
      </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Minimum files in archive </span></span><a title="Permalink" class="permalink" href="#id-1.8.6.2.3.8.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.8.6.2.3.8.6.2"><span class="term"><code class="filename">basic-environment.txt</code></span></dt><dd><p>
              Contains the date when this script was executed and system
              information like version of the distribution, hypervisor
              information, and more.
            </p></dd><dt id="id-1.8.6.2.3.8.6.3"><span class="term"><code class="filename">basic-health-check.txt</code></span></dt><dd><p>
              Contains some basic health checks like uptime, virtual memory
              statistics, free memory and hard disk, checks for zombie
              processes, and more.
            </p></dd><dt id="id-1.8.6.2.3.8.6.4"><span class="term"><code class="filename">hardware.txt</code></span></dt><dd><p>
              Contains basic hardware checks like information about the CPU
              architecture, list of all connected hardware, interrupts, I/O
              ports, kernel boot messages, and more.
            </p></dd><dt id="id-1.8.6.2.3.8.6.5"><span class="term"><code class="filename">messages.txt</code></span></dt><dd><p>
              Contains log messages from the system journal.
            </p></dd><dt id="id-1.8.6.2.3.8.6.6"><span class="term"><code class="filename">rpm.txt</code></span></dt><dd><p>
              Contains a list of all installed RPM packages, their names and
              versions and where they come from.
            </p></dd><dt id="id-1.8.6.2.3.8.6.7"><span class="term"><code class="filename">summary.xml</code></span></dt><dd><p>
              Contains information in XML format, such as distribution, version
              and product-specific fragments.
            </p></dd><dt id="id-1.8.6.2.3.8.6.8"><span class="term"><code class="filename">supportconfig.txt</code></span></dt><dd><p>
              Contains information about the <code class="command">supportconfig</code>
              script itself.
            </p></dd><dt id="id-1.8.6.2.3.8.6.9"><span class="term"><code class="filename">y2log.txt</code></span></dt><dd><p>
              Contains YaST-specific information like specific packages,
              configuration files and log files.
            </p></dd></dl></div><p>
        <a class="xref" href="#tab-admsupport-features-and-filenames" title="Comparison of features and file names in the TAR archive">Table 11.1, “Comparison of features and file names in the TAR archive”</a> lists all
        available features and their file names.
      </p><div class="table" id="tab-admsupport-features-and-filenames" data-id-title="Comparison of features and file names in the TAR archive"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 11.1: </span><span class="title-name">Comparison of features and file names in the TAR archive </span></span><a title="Permalink" class="permalink" href="#tab-admsupport-features-and-filenames">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Feature</th><th style="border-bottom: 1px solid ; ">File name</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">APPARMOR</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">security-apparmor.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">AUDIT</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">security-audit.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">AUTOFS</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">fs-autofs.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">BOOT</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">boot.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">BTRFS</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">fs-btrfs.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DAEMONS</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">systemd.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">CIMOM</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">cimom.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">CRASH</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">crash.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">CRON</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">cron.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DHCP</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">dhcp.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DISK</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">fs-diskio.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DNS</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">dns.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DOCKER</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">docker.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DRBD</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">drbd.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">ENV</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">env.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">ETC</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">etc.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">HISTORY</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">shell_history.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">ISCSI</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">fs-iscsi.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">LDAP</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">ldap.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">LIVEPATCH</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">kernel-livepatch.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">LVM</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">lvm.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">MEM</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">memory.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">MOD</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">modules.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">MPIO</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">mpio.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">NET</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">network-*.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">NFS</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">nfs.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">NTP</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">ntp.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">NVME</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">nvme.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">OCFS2</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">ocfs2.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">PAM</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">pam.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">PODMAN</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">podman.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">PRINT</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">print.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">PROC</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">proc.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SAR</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">sar.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SLERT</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">slert.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SLP</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">slp.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SMT</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">smt.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SMART</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">fs-smartmon.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SMB</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">samba.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SRAID</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">fs-softraid.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SSH</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">ssh.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SSSD</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">sssd.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SYSCONFIG</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">sysconfig.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SYSFS</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">sysfs.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">TRANSACTIONAL</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">transactional-update.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">TUNED</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">tuned.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">UDEV</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">udev.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">UFILES</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">fs-files-additional.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">UP</em>
              </td><td style="border-bottom: 1px solid ; "><code class="filename">updates.txt</code>
              </td></tr><tr><td style="border-right: 1px solid ; "><em class="parameter">WEB</em>
              </td><td><code class="filename">web.txt</code>
              </td></tr></tbody></table></div></div></section></section><section class="sect1" id="sec-submitting-information" data-id-title="Submitting information to Global Technical Support"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">11.2 </span><span class="title-name">Submitting information to Global Technical Support</span></span> <a title="Permalink" class="permalink" href="#sec-submitting-information">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      After you have created the archive using the
      <code class="command">supportconfig</code> tool, you can submit the archive to
      SUSE.
    </p><section class="sect2" id="sec-slemicro-supportconfig-sr" data-id-title="Creating a service request number"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">11.2.1 </span><span class="title-name">Creating a service request number</span></span> <a title="Permalink" class="permalink" href="#sec-slemicro-supportconfig-sr">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Before handing over the <code class="command">supportconfig</code> data to Global
        Technical Support, you need to generate a service request number first.
        You will need it to upload the archive to support.
      </p><p>
        To create a service request, go to
        <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a> and follow
        the instructions on the screen. Write down the service request number.
      </p><div id="id-1.8.6.2.4.3.4" data-id-title="Privacy statement" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Privacy statement</div><p>
          SUSE treats system reports as confidential data. For details about
          our privacy commitment, see
          <a class="link" href="https://www.suse.com/company/policies/privacy/" target="_blank">https://www.suse.com/company/policies/privacy/</a>.
        </p></div></section><section class="sect2" id="sec-slemicro-targets" data-id-title="Upload targets"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">11.2.2 </span><span class="title-name">Upload targets</span></span> <a title="Permalink" class="permalink" href="#sec-slemicro-targets">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        After having created a service request number, you can upload your
        Supportconfig archives to Global Technical Support. In the examples
        below, the <span class="emphasis"><em>12345678901</em></span> serves as a placeholder for
        your service request number. Replace the placeholder with the service
        request number you created in
        <a class="xref" href="#sec-slemicro-supportconfig-sr" title="11.2.1. Creating a service request number">Section 11.2.1, “Creating a service request number”</a>.
      </p><div class="procedure" id="pro-admsupport-submit-cli" data-id-title="Submitting information to support from command line"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 11.1: </span><span class="title-name">Submitting information to support from command line </span></span><a title="Permalink" class="permalink" href="#pro-admsupport-submit-cli">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
          The following procedure assumes that you have already created a
          Supportconfig archive but have not uploaded it yet.
        </p><ol class="procedure" type="1"><li class="step"><p>
            Servers with Internet connectivity:
          </p><ol type="a" class="substeps"><li class="step"><p>
                To use the default upload target
                <a class="link" href="https://support-ftp.us.suse.com/incoming/upload.php?file={tarball}" target="_blank">https://support-ftp.us.suse.com/incoming/upload.php?file={tarball}</a>,
                run:
              </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -ur <em class="replaceable">12345678901</em></pre></div></li><li class="step"><p>
                For the FTPS upload target
                <a class="link" href="ftps://support-ftp.us.suse.com" target="_blank">ftps://support-ftp.us.suse.com</a>, use the
                following command:
              </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -ar <em class="replaceable">12345678901</em></pre></div><p>
                To use a different upload target, for example, for the EMEA
                area, use the <code class="option">-U</code> followed by the particular
                URL, either
                <a class="link" href="https://support-ftp.emea.suse.com/incoming/upload.php?file={tarball}" target="_blank">https://support-ftp.emea.suse.com/incoming/upload.php?file={tarball}</a>
                or
                <a class="link" href="ftps://support-ftp.emea.suse.com/incoming/" target="_blank">ftps://support-ftp.emea.suse.com/incoming/</a>
              </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -r <em class="replaceable">12345678901</em> -U <em class="replaceable">https://support-ftp.emea.suse.com/incoming</em></pre></div></li></ol></li><li class="step"><p>
            Servers <span class="emphasis"><em>without</em></span> Internet connectivity:
          </p><ol type="a" class="substeps"><li class="step"><p>
                Run the following:
              </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -r <em class="replaceable">12345678901</em></pre></div></li><li class="step"><p>
                Manually upload the
                <code class="filename">/var/log/scc_<em class="replaceable">SR12345678901</em>*txz</code>
                archive to one of our servers. The selection of a server
                depends on your location in the world:
              </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                    
                    North America: HTTPS
                    <a class="link" href="https://support-ftp.us.suse.com/incoming/upload.php?file={tarball}" target="_blank">https://support-ftp.us.suse.com/incoming/upload.php?file={tarball}</a>,
                    FTPS
                    <a class="link" href="ftps://support-ftp.us.suse.com/incoming/" target="_blank">ftps://support-ftp.us.suse.com/incoming/</a>
                  </p></li><li class="listitem"><p>
                    EMEA, Europe, the Middle East, and Africa: FTP
                    <a class="link" href="https://support-ftp.emea.suse.com/incoming/upload.php?file={tarball}" target="_blank">https://support-ftp.emea.suse.com/incoming/upload.php?file={tarball}</a>,
                    FTPS
                    <a class="link" href="ftps://support-ftp.emea.suse.com/incoming/" target="_blank">ftps://support-ftp.emea.suse.com/incoming/</a>
                  </p></li></ul></div></li></ol></li><li class="step"><p>
            After the TAR archive arrives in the incoming directory of our FTP
            server, it becomes automatically attached to your service request.
          </p></li></ol></div></div></section></section><section class="sect1" id="sec-gathering-yastlogs" data-id-title="Gathering information during the installation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">11.3 </span><span class="title-name">Gathering information during the installation</span></span> <a title="Permalink" class="permalink" href="#sec-gathering-yastlogs">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      When performing the manual installation, <code class="command">supportconfig</code>
      is not available. However, you can collect log files from YaST by using
      <code class="command">save_y2logs</code>. This command will create a
      <code class="filename">.tar.xz</code> archive in the directory
      <code class="filename">/tmp</code>.
    </p></section><section class="sect1" id="sec-admsupport-kernel" data-id-title="Support of kernel modules"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">11.4 </span><span class="title-name">Support of kernel modules</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-kernel">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      An important requirement for every enterprise operating system is the
      level of support you receive for your environment. Kernel modules are the
      most relevant connector between hardware (<span class="quote">“<span class="quote">controllers</span>”</span>) and
      the operating system. Every kernel module in <span class="productname"><span class="phrase">SLE Micro</span></span> has a
      <code class="literal">supported</code> flag that can take three possible values:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          <span class="quote">“<span class="quote">yes,</span>”</span> thus <code class="literal">supported</code>
        </p></li><li class="listitem"><p>
          <span class="quote">“<span class="quote">external,</span>”</span> thus <code class="literal">supported</code>
        </p></li><li class="listitem"><p>
          (empty, not set), thus <code class="literal">unsupported</code>
        </p></li></ul></div><p>
      The following rules apply:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          All modules of a self-recompiled kernel are by default marked as
          unsupported.
        </p></li><li class="listitem"><p>
          Kernel modules supported by SUSE partners and delivered using
          <code class="literal">SUSE SolidDriver Program</code> are marked
          <span class="quote">“<span class="quote">external.</span>”</span>
        </p></li><li class="listitem"><p>
          If the <code class="literal">supported</code> flag is not set, loading this
          module will taint the kernel. Tainted kernels are not supported.
        </p></li><li class="listitem"><p>
          Kernel modules not provided under a license compatible to the license
          of the Linux kernel will also taint the kernel. For details, see the
          state of <code class="filename">/proc/sys/kernel/tainted</code>.
        </p></li></ul></div><section class="sect2" id="sec-admsupport-kernel-background" data-id-title="Technical background"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">11.4.1 </span><span class="title-name">Technical background</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-kernel-background">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
            Linux kernel: The value of
            <code class="filename">/proc/sys/kernel/unsupported</code> defaults to
            <code class="literal">2</code>, which means that no syslog warning is
            generated when unsupported modules are loaded. This default is used
            in the installer and in the installed system.
          </p></li><li class="listitem"><p>
            <code class="command">modprobe</code>: The <code class="command">modprobe</code>
            utility for checking module dependencies and loading modules
            appropriately checks for the value of the
            <code class="literal">supported</code> flag. If the value is
            <span class="quote">“<span class="quote">yes</span>”</span> or <span class="quote">“<span class="quote">external,</span>”</span> the module will be
            loaded, otherwise it will not. For information on how to override
            this behavior, see
            <a class="xref" href="#sec-admsupport-kernel-unsupported" title="11.4.2. Working with unsupported modules">Section 11.4.2, “Working with unsupported modules”</a>.
          </p><div id="id-1.8.6.2.6.6.3.2.2" data-id-title="Support" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Support</div><p>
              SUSE does not generally support the removal of storage modules
              via <code class="command">modprobe -r</code>.
            </p></div></li></ul></div></section><section class="sect2" id="sec-admsupport-kernel-unsupported" data-id-title="Working with unsupported modules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">11.4.2 </span><span class="title-name">Working with unsupported modules</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-kernel-unsupported">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/slemicro_supportconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        While general supportability is important, situations can occur where
        loading an unsupported module is required. For example, for testing or
        debugging purposes, or if your hardware vendor provides a hotfix.
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
            To override the default, copy
            <code class="filename">/lib/modprobe.d/10-unsupported-modules.conf</code> to
            <code class="filename">/etc/modprobe.d/10-unsupported-modules.conf</code>
            and change the value of the variable
            <code class="varname">allow_unsupported_modules</code> from
            <code class="literal">0</code> to <code class="literal">1</code>. Do not edit
            <code class="filename">/lib/modprobe.d/10-unsupported-modules.conf</code>
            directly; any changes will be overwritten whenever the
            <span class="package">suse-module-tools</span> package is updated.
          </p><p>
            If an unsupported module is needed in the initrd, do not forget to
            run <code class="command">transactional-update initrd</code> to update the
            initrd.
          </p><p>
            If you only want to try loading a module once, you can use the
            <code class="option">--allow-unsupported-modules</code> option with
            <code class="command">modprobe</code>. For more information, see the comments
            in <code class="filename">/lib/modprobe.d/10-unsupported-modules.conf</code>
            and the <code class="command">modprobe</code> help.
          </p></li><li class="listitem"><p>
            To enforce the loading of unsupported modules during boot and
            afterward, use the kernel command-line option
            <code class="option">oem-modules</code>. While installing and initializing the
            <code class="systemitem">suse-module-tools</code>
            package, the kernel flag <code class="literal">TAINT_NO_SUPPORT</code>
            (<code class="filename">/proc/sys/kernel/tainted</code>) will be evaluated.
            If the kernel is already tainted,
            <code class="literal">allow_unsupported_modules</code> will be enabled. This
            will prevent unsupported modules from failing in the system being
            installed. If no unsupported modules are present during
            installation and the other special kernel command-line option
            (<code class="option">oem-modules=1</code>) is not used, the default is still
            to disallow unsupported modules.
          </p></li></ul></div><p>
        Remember that loading and running unsupported modules will make the
        kernel and the whole system unsupported by SUSE.
      </p></section></section></section></div></section></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>