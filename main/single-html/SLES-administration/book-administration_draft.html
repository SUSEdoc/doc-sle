<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><title>SLES 15 SP6 | Administration Guide</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Administration Guide | SLES 15 SP6"/>
<meta name="description" content="How to maintain, monitor and customize an installed SLES system"/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="15 SP6"/>
<meta name="book-title" content="Administration Guide"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise Server 15 SP6"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Administration Guide"/>
<meta property="og:description" content="Maintain, monitor and customize SLES"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Administration Guide"/>
<meta name="twitter:description" content="Maintain, monitor and customize SLES"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Administration Guide",
  
    "description": "How to maintain, monitor and customize an installed SLES system",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-06-26T00:00+02:00",
      
    "datePublished": "2024-06-26T00:00+02:00",
      

    "about": [
      {
        "@type": "Thing",
        "name": "Administration"
      },
      {
        "@type": "Thing",
        "name": "Configuration"
      },
      {
        "@type": "Thing",
        "name": "Maintenance"
      }
    ],
  
    "mentions": [
      
      { "@type": "SoftwareApplication",
        "name": "SUSE Linux Enterprise Server",
        "softwareVersion": "15 SP6",
        "applicationCategory": "Operating System",
        "operatingSystem": "Linux"
      }
      
    ],
    
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/main/xml/book_administration.xml"/></head><body class="draft single normal offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="#book-administration">Administration Guide</a></div></div><main id="_content"><nav class="side-toc placebo" id="_side-toc-overall"> </nav><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section xml:lang="en" class="book" id="book-administration" data-id-title="Administration Guide"><div class="titlepage"><div><div class="big-version-info"><span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP6</span></span></span></div><div class="title-container"><h1 class="title">Administration Guide</h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_administration.xml" title="Edit source document"> </a></div></div><div class="abstract"><p>
    This guide covers system administration tasks
     like maintaining, monitoring and customizing an initially installed
     system.
   </p></div><div><div class="titlepage-revhistory"><a aria-label="Revision History" hreflang="en" href="rh-book-administration.html" target="_blank">Revision History: Administration Guide</a></div></div><div class="date"><span class="imprint-label">Publication Date: </span>
  September 27, 2024
</div></div></div><div class="toc"><ul><li><span class="preface"><a href="#preface-administration"><span class="title-name">Preface</span></a></span><ul><li><span class="sect1"><a href="#id-1.3.2.3"><span class="title-name">Available documentation</span></a></span></li><li><span class="sect1"><a href="#id-1.3.2.4"><span class="title-name">Improving the documentation</span></a></span></li><li><span class="sect1"><a href="#id-1.3.2.5"><span class="title-name">Documentation conventions</span></a></span></li><li><span class="sect1"><a href="#id-1.3.2.6"><span class="title-name">Support</span></a></span></li></ul></li><li><span class="part"><a href="#part-administration"><span class="title-number">I </span><span class="title-name">Common tasks</span></a></span><ul><li><span class="chapter"><a href="#cha-adm-shell"><span class="title-number">1 </span><span class="title-name">Bash and Bash scripts</span></a></span><ul><li><span class="sect1"><a href="#sec-adm-whatistheshell"><span class="title-number">1.1 </span><span class="title-name">What is <span class="quote">“<span class="quote">the shell</span>”</span>?</span></a></span></li><li><span class="sect1"><a href="#sec-adm-shellscripts"><span class="title-number">1.2 </span><span class="title-name">Writing shell scripts</span></a></span></li><li><span class="sect1"><a href="#sec-adm-shell-redirect"><span class="title-number">1.3 </span><span class="title-name">Redirecting command events</span></a></span></li><li><span class="sect1"><a href="#sec-adm-alias"><span class="title-number">1.4 </span><span class="title-name">Using aliases</span></a></span></li><li><span class="sect1"><a href="#sec-adm-variables"><span class="title-number">1.5 </span><span class="title-name">Using variables in Bash</span></a></span></li><li><span class="sect1"><a href="#sec-adm-shell-grouping"><span class="title-number">1.6 </span><span class="title-name">Grouping and combining commands</span></a></span></li><li><span class="sect1"><a href="#sec-adm-shell-commonconstructs"><span class="title-number">1.7 </span><span class="title-name">Working with common flow constructs</span></a></span></li><li><span class="sect1"><a href="#sec-adm-shell-moreinfo"><span class="title-number">1.8 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-adm-sudo"><span class="title-number">2 </span><span class="title-name"><code class="command">sudo</code> basics</span></a></span><ul><li><span class="sect1"><a href="#sec-adm-sudo-usage"><span class="title-number">2.1 </span><span class="title-name">Basic <code class="command">sudo</code> usage</span></a></span></li><li><span class="sect1"><a href="#sec-sudo-conf"><span class="title-number">2.2 </span><span class="title-name">Configuring <code class="command">sudo</code></span></a></span></li><li><span class="sect1"><a href="#sec-sudo-usecases-xorg"><span class="title-number">2.3 </span><span class="title-name">Using <code class="command">sudo</code> with X.Org applications</span></a></span></li><li><span class="sect1"><a href="#sec-adm-sudo-moreinfo"><span class="title-number">2.4 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-yast-gui"><span class="title-number">3 </span><span class="title-name">Using YaST</span></a></span><ul><li><span class="sect1"><a href="#sec-yast2-gui"><span class="title-number">3.1 </span><span class="title-name">YaST interface overview</span></a></span></li><li><span class="sect1"><a href="#sec-yast-gui-key-combination"><span class="title-number">3.2 </span><span class="title-name">Useful key combinations</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-yast-text"><span class="title-number">4 </span><span class="title-name">YaST in text mode</span></a></span><ul><li><span class="sect1"><a href="#sec-yast-cli-navigate"><span class="title-number">4.1 </span><span class="title-name">Navigation in modules</span></a></span></li><li><span class="sect1"><a href="#sec-yast-cli-key-combination"><span class="title-number">4.2 </span><span class="title-name">Advanced key combinations</span></a></span></li><li><span class="sect1"><a href="#sec-yast-cli-restricted-keys"><span class="title-number">4.3 </span><span class="title-name">Restriction of key combinations</span></a></span></li><li><span class="sect1"><a href="#sec-yast-cli-options"><span class="title-number">4.4 </span><span class="title-name">YaST command line options</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-yast-lang"><span class="title-number">5 </span><span class="title-name">Changing language and country settings with YaST</span></a></span><ul><li><span class="sect1"><a href="#sec-yast-langmod"><span class="title-number">5.1 </span><span class="title-name">Changing the system language</span></a></span></li><li><span class="sect1"><a href="#sec-yast-country"><span class="title-number">5.2 </span><span class="title-name">Changing the country and time settings</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-yast-userman"><span class="title-number">6 </span><span class="title-name">Managing users with YaST</span></a></span><ul><li><span class="sect1"><a href="#sec-yast-userman-main"><span class="title-number">6.1 </span><span class="title-name">User and group administration dialog</span></a></span></li><li><span class="sect1"><a href="#sec-yast-userman-users"><span class="title-number">6.2 </span><span class="title-name">Managing user accounts</span></a></span></li><li><span class="sect1"><a href="#sec-yast-userman-adv"><span class="title-number">6.3 </span><span class="title-name">Additional options for user accounts</span></a></span></li><li><span class="sect1"><a href="#sec-yast-userman-defaults"><span class="title-number">6.4 </span><span class="title-name">Changing default settings for local users</span></a></span></li><li><span class="sect1"><a href="#sec-yast-userman-assign"><span class="title-number">6.5 </span><span class="title-name">Assigning users to groups</span></a></span></li><li><span class="sect1"><a href="#sec-yast-userman-groups"><span class="title-number">6.6 </span><span class="title-name">Managing groups</span></a></span></li><li><span class="sect1"><a href="#sec-yast-userman-authent"><span class="title-number">6.7 </span><span class="title-name">Changing the user authentication method</span></a></span></li><li><span class="sect1"><a href="#sec-yast-userman-defaultsystemusers"><span class="title-number">6.8 </span><span class="title-name">Default system users</span></a></span></li><li><span class="sect1"><a href="#default-system-groups"><span class="title-number">6.9 </span><span class="title-name">Default system groups</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-onlineupdate-you"><span class="title-number">7 </span><span class="title-name">YaST online update</span></a></span><ul><li><span class="sect1"><a href="#sec-onlineupdate-you-overview"><span class="title-number">7.1 </span><span class="title-name">The online update dialog</span></a></span></li><li><span class="sect1"><a href="#sec-onlineupdate-you-install"><span class="title-number">7.2 </span><span class="title-name">Installing patches</span></a></span></li><li><span class="sect1"><a href="#sec-onlineupdate-retracted-patches"><span class="title-number">7.3 </span><span class="title-name">Viewing retracted patches</span></a></span></li><li><span class="sect1"><a href="#sec-onlineupdate-you-automatically"><span class="title-number">7.4 </span><span class="title-name">Automatic online update</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-yast-software"><span class="title-number">8 </span><span class="title-name">Installing or removing software</span></a></span><ul><li><span class="sect1"><a href="#sec-onlineupdate-terms"><span class="title-number">8.1 </span><span class="title-name">Definition of terms</span></a></span></li><li><span class="sect1"><a href="#sec-yast-software-register"><span class="title-number">8.2 </span><span class="title-name">Registering an installed system</span></a></span></li><li><span class="sect1"><a href="#sec-yast-software-qt"><span class="title-number">8.3 </span><span class="title-name">Using the YaST software manager</span></a></span></li><li><span class="sect1"><a href="#sec-yast-software-instsource"><span class="title-number">8.4 </span><span class="title-name">Managing software repositories and services</span></a></span></li><li><span class="sect1"><a href="#sec-updater"><span class="title-number">8.5 </span><span class="title-name">The GNOME package updater</span></a></span></li><li><span class="sect1"><a href="#sec-updater-gnomesw"><span class="title-number">8.6 </span><span class="title-name">Updating packages with <span class="guimenu">GNOME Software</span></span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-sw-cl"><span class="title-number">9 </span><span class="title-name">Managing software with command line tools</span></a></span><ul><li><span class="sect1"><a href="#sec-zypper"><span class="title-number">9.1 </span><span class="title-name">Using Zypper</span></a></span></li><li><span class="sect1"><a href="#sec-rpm"><span class="title-number">9.2 </span><span class="title-name">RPM—the package manager</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-snapper"><span class="title-number">10 </span><span class="title-name">System recovery and snapshot management with Snapper</span></a></span><ul><li><span class="sect1"><a href="#sec-snapper-setup"><span class="title-number">10.1 </span><span class="title-name">Default setup</span></a></span></li><li><span class="sect1"><a href="#sec-snapper-undo"><span class="title-number">10.2 </span><span class="title-name">Using Snapper to undo changes</span></a></span></li><li><span class="sect1"><a href="#sec-snapper-snapshot-boot"><span class="title-number">10.3 </span><span class="title-name">System rollback by booting from snapshots</span></a></span></li><li><span class="sect1"><a href="#sec-snapper-homedirs"><span class="title-number">10.4 </span><span class="title-name">Enabling Snapper in user home directories</span></a></span></li><li><span class="sect1"><a href="#sec-snapper-config"><span class="title-number">10.5 </span><span class="title-name">Creating and modifying Snapper configurations</span></a></span></li><li><span class="sect1"><a href="#sec-snapper-manage"><span class="title-number">10.6 </span><span class="title-name">Manually creating and managing snapshots</span></a></span></li><li><span class="sect1"><a href="#sec-snapper-clean-up"><span class="title-number">10.7 </span><span class="title-name">Automatic snapshot clean-up</span></a></span></li><li><span class="sect1"><a href="#id-1.3.3.11.14"><span class="title-number">10.8 </span><span class="title-name">Showing exclusive disk space used by snapshots</span></a></span></li><li><span class="sect1"><a href="#sec-snapper-faqs"><span class="title-number">10.9 </span><span class="title-name">Frequently asked questions</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-klp"><span class="title-number">11 </span><span class="title-name">Live kernel patching with KLP</span></a></span><ul><li><span class="sect1"><a href="#sec-klp-advantages"><span class="title-number">11.1 </span><span class="title-name">Advantages of Kernel Live Patching</span></a></span></li><li><span class="sect1"><a href="#sec-klp-overview"><span class="title-number">11.2 </span><span class="title-name">Kernel Live Patching overview</span></a></span></li><li><span class="sect1"><a href="#sec-klp-enable-with-yast2"><span class="title-number">11.3 </span><span class="title-name">Activating Kernel Live Patching using YaST</span></a></span></li><li><span class="sect1"><a href="#sec-klp-enable-cli"><span class="title-number">11.4 </span><span class="title-name">Activating Kernel Live Patching from the command line</span></a></span></li><li><span class="sect1"><a href="#sec-klp-perform"><span class="title-number">11.5 </span><span class="title-name">Performing Kernel Live Patching</span></a></span></li><li><span class="sect1"><a href="#sec-klp-troubleshoot"><span class="title-number">11.6 </span><span class="title-name">Troubleshooting Kernel Live Patching issues</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-ulp"><span class="title-number">12 </span><span class="title-name">User space live patching</span></a></span><ul><li><span class="sect1"><a href="#sec-ulp"><span class="title-number">12.1 </span><span class="title-name">About user space live patching</span></a></span></li><li><span class="sect1"><a href="#sec-ulp-info"><span class="title-number">12.2 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-transactional-updates"><span class="title-number">13 </span><span class="title-name">Transactional updates</span></a></span><ul><li><span class="sect1"><a href="#sec-tu-limitations"><span class="title-number">13.1 </span><span class="title-name">Limitations</span></a></span></li><li><span class="sect1"><a href="#sec-install-tu"><span class="title-number">13.2 </span><span class="title-name">Enabling <span class="package">transactional-update</span></span></a></span></li><li><span class="sect1"><a href="#sec-tu-disable"><span class="title-number">13.3 </span><span class="title-name">Managing automatic updates</span></a></span></li><li><span class="sect1"><a href="#id-1.3.3.14.6"><span class="title-number">13.4 </span><span class="title-name">The <code class="command">transactional-update</code> command</span></a></span></li><li><span class="sect1"><a href="#sec-tu-troubleshooting"><span class="title-number">13.5 </span><span class="title-name">Troubleshooting</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-vnc"><span class="title-number">14 </span><span class="title-name">Remote graphical sessions with VNC</span></a></span><ul><li><span class="sect1"><a href="#sec-vnc-viewer"><span class="title-number">14.1 </span><span class="title-name">The <code class="command">vncviewer</code> client</span></a></span></li><li><span class="sect1"><a href="#vnc-remmina"><span class="title-number">14.2 </span><span class="title-name">Remmina: the remote desktop client</span></a></span></li><li><span class="sect1"><a href="#sec-vnc-one-time"><span class="title-number">14.3 </span><span class="title-name">Configuring one-time sessions on the VNC server</span></a></span></li><li><span class="sect1"><a href="#sec-vnc-persistent"><span class="title-number">14.4 </span><span class="title-name">Configuring persistent VNC server sessions</span></a></span></li><li><span class="sect1"><a href="#sec-vnc-encrypt"><span class="title-number">14.5 </span><span class="title-name">Configuring encryption on the VNC server</span></a></span></li><li><span class="sect1"><a href="#sec-vnc-wayland"><span class="title-number">14.6 </span><span class="title-name">Compatibility with Wayland</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-net-rsync"><span class="title-number">15 </span><span class="title-name">File copying with RSync</span></a></span><ul><li><span class="sect1"><a href="#sec-net-rsync-overview"><span class="title-number">15.1 </span><span class="title-name">Conceptual overview</span></a></span></li><li><span class="sect1"><a href="#sec-net-rsync-syntax"><span class="title-number">15.2 </span><span class="title-name">Basic syntax</span></a></span></li><li><span class="sect1"><a href="#sec-net-rsync-local-copy"><span class="title-number">15.3 </span><span class="title-name">Copying files and directories locally</span></a></span></li><li><span class="sect1"><a href="#sec-net-rsync-remote-copy"><span class="title-number">15.4 </span><span class="title-name">Copying files and directories remotely</span></a></span></li><li><span class="sect1"><a href="#sec-net-rsync-server"><span class="title-number">15.5 </span><span class="title-name">Configuring and using an rsync server</span></a></span></li><li><span class="sect1"><a href="#sec-net-rsync-summary"><span class="title-number">15.6 </span><span class="title-name">More information</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#part-boot"><span class="title-number">II </span><span class="title-name">Booting a Linux system</span></a></span><ul><li><span class="chapter"><a href="#cha-boot"><span class="title-number">16 </span><span class="title-name">Introduction to the boot process</span></a></span><ul><li><span class="sect1"><a href="#sec-boot-terminology"><span class="title-number">16.1 </span><span class="title-name">Terminology</span></a></span></li><li><span class="sect1"><a href="#sec-boot-proc"><span class="title-number">16.2 </span><span class="title-name">The Linux boot process</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-uefi"><span class="title-number">17 </span><span class="title-name">UEFI (Unified Extensible Firmware Interface)</span></a></span><ul><li><span class="sect1"><a href="#sec-uefi-secboot"><span class="title-number">17.1 </span><span class="title-name">Secure boot</span></a></span></li><li><span class="sect1"><a href="#sec-uefi-moreinfo"><span class="title-number">17.2 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-grub2"><span class="title-number">18 </span><span class="title-name">The boot loader GRUB 2</span></a></span><ul><li><span class="sect1"><a href="#sec-grub2-new-features"><span class="title-number">18.1 </span><span class="title-name">Main differences between GRUB legacy and GRUB 2</span></a></span></li><li><span class="sect1"><a href="#sec-grub2-file-structure"><span class="title-number">18.2 </span><span class="title-name">Configuration file structure</span></a></span></li><li><span class="sect1"><a href="#sec-grub2-yast2-config"><span class="title-number">18.3 </span><span class="title-name">Configuring the boot loader with YaST</span></a></span></li><li><span class="sect1"><a href="#sec-grub2-zseries"><span class="title-number">18.4 </span><span class="title-name">Differences in terminal usage on IBM Z</span></a></span></li><li><span class="sect1"><a href="#sec-grub2-commands"><span class="title-number">18.5 </span><span class="title-name">Helpful GRUB 2 commands</span></a></span></li><li><span class="sect1"><a href="#grub-rescue-target"><span class="title-number">18.6 </span><span class="title-name">Rescue mode</span></a></span></li><li><span class="sect1"><a href="#sec-grub2-info"><span class="title-number">18.7 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-systemd"><span class="title-number">19 </span><span class="title-name">The <code class="systemitem">systemd</code> daemon</span></a></span><ul><li><span class="sect1"><a href="#sec-boot-systemd-concept"><span class="title-number">19.1 </span><span class="title-name">The <code class="systemitem">systemd</code> concept</span></a></span></li><li><span class="sect1"><a href="#sec-boot-systemd-basics"><span class="title-number">19.2 </span><span class="title-name">Basic usage</span></a></span></li><li><span class="sect1"><a href="#sec-boot-systemd-boot"><span class="title-number">19.3 </span><span class="title-name">System start and target management</span></a></span></li><li><span class="sect1"><a href="#sec-boot-runlevel-edit"><span class="title-number">19.4 </span><span class="title-name">Managing services with YaST</span></a></span></li><li><span class="sect1"><a href="#sec-boot-systemd-custom"><span class="title-number">19.5 </span><span class="title-name">Customizing <code class="systemitem">systemd</code></span></a></span></li><li><span class="sect1"><a href="#sec-boot-systemd-advanced"><span class="title-number">19.6 </span><span class="title-name">Advanced usage</span></a></span></li><li><span class="sect1"><a href="#sec-boot-systemd-timer-units"><span class="title-number">19.7 </span><span class="title-name"><code class="systemitem">systemd</code> timer units</span></a></span></li><li><span class="sect1"><a href="#sec-boot-systemd-info"><span class="title-number">19.8 </span><span class="title-name">More information</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#part-system"><span class="title-number">III </span><span class="title-name">System</span></a></span><ul><li><span class="chapter"><a href="#cha-64bit"><span class="title-number">20 </span><span class="title-name">32-bit and 64-bit applications in a 64-bit system environment</span></a></span><ul><li><span class="sect1"><a href="#sec-64bit-runt"><span class="title-number">20.1 </span><span class="title-name">Runtime support</span></a></span></li><li><span class="sect1"><a href="#sec-64bit-kernel"><span class="title-number">20.2 </span><span class="title-name">Kernel specifications</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-journalctl"><span class="title-number">21 </span><span class="title-name"><code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal</span></a></span><ul><li><span class="sect1"><a href="#sec-journalctl-persistent"><span class="title-number">21.1 </span><span class="title-name">Making the journal persistent</span></a></span></li><li><span class="sect1"><a href="#sec-journalctl-switches"><span class="title-number">21.2 </span><span class="title-name"><code class="command">journalctl</code>: useful switches</span></a></span></li><li><span class="sect1"><a href="#sec-journalctl-filter"><span class="title-number">21.3 </span><span class="title-name">Filtering the journal output</span></a></span></li><li><span class="sect1"><a href="#sec-journalctl-investigate"><span class="title-number">21.4 </span><span class="title-name">Investigating <code class="systemitem">systemd</code> errors</span></a></span></li><li><span class="sect1"><a href="#sec-journalctl-config"><span class="title-number">21.5 </span><span class="title-name">Journald configuration</span></a></span></li><li><span class="sect1"><a href="#sec-journalctl-yast"><span class="title-number">21.6 </span><span class="title-name">Using YaST to filter the <code class="systemitem">systemd</code> journal</span></a></span></li><li><span class="sect1"><a href="#sec-journalctl-gnome-logs"><span class="title-number">21.7 </span><span class="title-name">Viewing logs in GNOME</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-update-alternative"><span class="title-number">22 </span><span class="title-name"><code class="command">update-alternatives</code>: managing multiple versions of commands and files</span></a></span><ul><li><span class="sect1"><a href="#sec-ua-concept"><span class="title-number">22.1 </span><span class="title-name">Overview</span></a></span></li><li><span class="sect1"><a href="#sec-ua-use-cases"><span class="title-number">22.2 </span><span class="title-name">Use cases</span></a></span></li><li><span class="sect1"><a href="#sec-ua-view-all"><span class="title-number">22.3 </span><span class="title-name">Getting an overview of alternatives</span></a></span></li><li><span class="sect1"><a href="#sec-ua-view"><span class="title-number">22.4 </span><span class="title-name">Viewing details on specific alternatives</span></a></span></li><li><span class="sect1"><a href="#sec-ua-set"><span class="title-number">22.5 </span><span class="title-name">Setting the default version of alternatives</span></a></span></li><li><span class="sect1"><a href="#sec-ua-install"><span class="title-number">22.6 </span><span class="title-name">Installing custom alternatives</span></a></span></li><li><span class="sect1"><a href="#sec-ua-slave"><span class="title-number">22.7 </span><span class="title-name">Defining dependent alternatives</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-network"><span class="title-number">23 </span><span class="title-name">Basic networking</span></a></span><ul><li><span class="sect1"><a href="#sec-network-addresses"><span class="title-number">23.1 </span><span class="title-name">IP addresses and routing</span></a></span></li><li><span class="sect1"><a href="#sec-network-ipv6"><span class="title-number">23.2 </span><span class="title-name">IPv6—the next generation Internet</span></a></span></li><li><span class="sect1"><a href="#sec-network-nameres"><span class="title-number">23.3 </span><span class="title-name">Name resolution</span></a></span></li><li><span class="sect1"><a href="#sec-network-yast"><span class="title-number">23.4 </span><span class="title-name">Configuring a network connection with YaST</span></a></span></li><li><span class="sect1"><a href="#sec-network-manconf"><span class="title-number">23.5 </span><span class="title-name">Configuring a network connection manually</span></a></span></li><li><span class="sect1"><a href="#sec-network-router"><span class="title-number">23.6 </span><span class="title-name">Basic router setup</span></a></span></li><li><span class="sect1"><a href="#sec-network-iface-bonding"><span class="title-number">23.7 </span><span class="title-name">Setting up bonding devices</span></a></span></li><li><span class="sect1"><a href="#sec-network-iface-teaming"><span class="title-number">23.8 </span><span class="title-name">Setting up team devices for Network Teaming</span></a></span></li><li><span class="sect1"><a href="#sec-network-openvswitch"><span class="title-number">23.9 </span><span class="title-name">Software-defined networking with <span class="productname">Open vSwitch</span></span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-print"><span class="title-number">24 </span><span class="title-name">Printer operation</span></a></span><ul><li><span class="sect1"><a href="#sec-print-workflow"><span class="title-number">24.1 </span><span class="title-name">The CUPS workflow</span></a></span></li><li><span class="sect1"><a href="#sec-print-method"><span class="title-number">24.2 </span><span class="title-name">Methods and protocols for connecting printers</span></a></span></li><li><span class="sect1"><a href="#sec-print-software"><span class="title-number">24.3 </span><span class="title-name">Installing the software</span></a></span></li><li><span class="sect1"><a href="#sec-print-net"><span class="title-number">24.4 </span><span class="title-name">Network printers</span></a></span></li><li><span class="sect1"><a href="#sec-print-net-config-cmdl"><span class="title-number">24.5 </span><span class="title-name">Configuring CUPS with command line tools</span></a></span></li><li><span class="sect1"><a href="#sec-print-appl-commandline"><span class="title-number">24.6 </span><span class="title-name">Printing from the command line</span></a></span></li><li><span class="sect1"><a href="#sec-print-special"><span class="title-number">24.7 </span><span class="title-name">Special features in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span></a></span></li><li><span class="sect1"><a href="#sec-print-prob"><span class="title-number">24.8 </span><span class="title-name">Troubleshooting</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-gui-desktop"><span class="title-number">25 </span><span class="title-name">Graphical user interface</span></a></span><ul><li><span class="sect1"><a href="#sec-gui-desktop-xorg"><span class="title-number">25.1 </span><span class="title-name">X Window System</span></a></span></li><li><span class="sect1"><a href="#sec-x11-fontsys"><span class="title-number">25.2 </span><span class="title-name">Installing and configuring fonts</span></a></span></li><li><span class="sect1"><a href="#sec-gui-desktop-gnome"><span class="title-number">25.3 </span><span class="title-name">GNOME configuration for administrators</span></a></span></li><li><span class="sect1"><a href="#sec-gui-desktop-suse-prime"><span class="title-number">25.4 </span><span class="title-name">Switching between Intel and NVIDIA Optimus GPUs with SUSE Prime</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-fuse"><span class="title-number">26 </span><span class="title-name">Accessing file systems with FUSE</span></a></span><ul><li><span class="sect1"><a href="#sec-fuse-config"><span class="title-number">26.1 </span><span class="title-name">Configuring FUSE</span></a></span></li><li><span class="sect1"><a href="#sec-fuse-ntfs"><span class="title-number">26.2 </span><span class="title-name">Mounting an NTFS partition</span></a></span></li><li><span class="sect1"><a href="#sec-fuse-moreinfo"><span class="title-number">26.3 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-tuning-multikernel"><span class="title-number">27 </span><span class="title-name">Installing multiple kernel versions</span></a></span><ul><li><span class="sect1"><a href="#sec-tuning-multikernel-enable"><span class="title-number">27.1 </span><span class="title-name">Enabling and configuring multiversion support</span></a></span></li><li><span class="sect1"><a href="#sec-tuning-multikernel-yast"><span class="title-number">27.2 </span><span class="title-name">Installing/removing multiple kernel versions with YaST</span></a></span></li><li><span class="sect1"><a href="#sec-tuning-multikernel-zypper"><span class="title-number">27.3 </span><span class="title-name">Installing/removing multiple kernel versions with Zypper</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-mod"><span class="title-number">28 </span><span class="title-name">Managing kernel modules</span></a></span><ul><li><span class="sect1"><a href="#sec-mod-lsmod"><span class="title-number">28.1 </span><span class="title-name">Listing loaded modules with lsmod and modinfo</span></a></span></li><li><span class="sect1"><a href="#sec-mod-modprobe"><span class="title-number">28.2 </span><span class="title-name">Adding and removing kernel modules</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-udev"><span class="title-number">29 </span><span class="title-name">Dynamic kernel device management with <code class="systemitem">udev</code></span></a></span><ul><li><span class="sect1"><a href="#sec-udev-devdir"><span class="title-number">29.1 </span><span class="title-name">The <code class="filename">/dev</code> directory</span></a></span></li><li><span class="sect1"><a href="#sec-udev-kernel"><span class="title-number">29.2 </span><span class="title-name">Kernel <code class="systemitem">uevents</code> and <code class="systemitem">udev</code></span></a></span></li><li><span class="sect1"><a href="#sec-udev-drivers"><span class="title-number">29.3 </span><span class="title-name">Drivers, kernel modules and devices</span></a></span></li><li><span class="sect1"><a href="#sec-udev-boot"><span class="title-number">29.4 </span><span class="title-name">Booting and initial device setup</span></a></span></li><li><span class="sect1"><a href="#sec-udev-debug"><span class="title-number">29.5 </span><span class="title-name">Monitoring the running <code class="systemitem">udev</code> daemon</span></a></span></li><li><span class="sect1"><a href="#sec-udev-rules"><span class="title-number">29.6 </span><span class="title-name">Influencing kernel device event handling with <code class="systemitem">udev</code> rules</span></a></span></li><li><span class="sect1"><a href="#sec-udev-persdev"><span class="title-number">29.7 </span><span class="title-name">Persistent device naming</span></a></span></li><li><span class="sect1"><a href="#sec-udev-files"><span class="title-number">29.8 </span><span class="title-name">Files used by <code class="systemitem">udev</code></span></a></span></li><li><span class="sect1"><a href="#sec-udev-moreinfo"><span class="title-number">29.9 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-suse"><span class="title-number">30 </span><span class="title-name">Special system features</span></a></span><ul><li><span class="sect1"><a href="#sec-suse-packages"><span class="title-number">30.1 </span><span class="title-name">Information about special software packages</span></a></span></li><li><span class="sect1"><a href="#sec-suse-virt-konsolen"><span class="title-number">30.2 </span><span class="title-name">Virtual consoles</span></a></span></li><li><span class="sect1"><a href="#sec-suse-kb"><span class="title-number">30.3 </span><span class="title-name">Keyboard mapping</span></a></span></li><li><span class="sect1"><a href="#sec-suse-l10n"><span class="title-number">30.4 </span><span class="title-name">Language and country-specific settings</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-nm"><span class="title-number">31 </span><span class="title-name">Using NetworkManager</span></a></span><ul><li><span class="sect1"><a href="#sec-nm-usecase"><span class="title-number">31.1 </span><span class="title-name">Use cases for NetworkManager</span></a></span></li><li><span class="sect1"><a href="#sec-nm-activate"><span class="title-number">31.2 </span><span class="title-name">Enabling or disabling NetworkManager</span></a></span></li><li><span class="sect1"><a href="#sec-nm-configure"><span class="title-number">31.3 </span><span class="title-name">Configuring network connections</span></a></span></li><li><span class="sect1"><a href="#sec-nm-security"><span class="title-number">31.4 </span><span class="title-name">NetworkManager and security</span></a></span></li><li><span class="sect1"><a href="#sec-nm-faq"><span class="title-number">31.5 </span><span class="title-name">Frequently asked questions</span></a></span></li><li><span class="sect1"><a href="#sec-nm-trouble"><span class="title-number">31.6 </span><span class="title-name">Troubleshooting</span></a></span></li><li><span class="sect1"><a href="#sec-nm-more"><span class="title-number">31.7 </span><span class="title-name">More information</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#part-hardware"><span class="title-number">IV </span><span class="title-name">Hardware configuration</span></a></span><ul><li><span class="chapter"><a href="#sec-yast-hw-keym"><span class="title-number">32 </span><span class="title-name">Setting up your system keyboard layout</span></a></span></li><li><span class="chapter"><a href="#sec-yast-hw-sound"><span class="title-number">33 </span><span class="title-name">Setting up sound cards</span></a></span></li><li><span class="chapter"><a href="#sec-yast-hw-print"><span class="title-number">34 </span><span class="title-name">Setting up a printer</span></a></span><ul><li><span class="sect1"><a href="#sec-yast-hw-print-local"><span class="title-number">34.1 </span><span class="title-name">Configuring printers</span></a></span></li><li><span class="sect1"><a href="#sec-yast-hw-print-network"><span class="title-number">34.2 </span><span class="title-name">Configuring printing via the network with YaST</span></a></span></li><li><span class="sect1"><a href="#sec-yast-hw-print-share"><span class="title-number">34.3 </span><span class="title-name">Sharing printers over the network</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-power-mgmt"><span class="title-number">35 </span><span class="title-name">Power management</span></a></span><ul><li><span class="sect1"><a href="#sec-power-mgmt-save"><span class="title-number">35.1 </span><span class="title-name">Power saving functions</span></a></span></li><li><span class="sect1"><a href="#sec-power-mgmt-acpi"><span class="title-number">35.2 </span><span class="title-name">Advanced configuration and power interface (ACPI)</span></a></span></li><li><span class="sect1"><a href="#sec-power-mgmt-silenthd"><span class="title-number">35.3 </span><span class="title-name">Rest for the hard disk</span></a></span></li><li><span class="sect1"><a href="#sec-power-mgmt-faq"><span class="title-number">35.4 </span><span class="title-name">Troubleshooting</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-nvdimm"><span class="title-number">36 </span><span class="title-name">Persistent memory</span></a></span><ul><li><span class="sect1"><a href="#sec-nvdimm-intro"><span class="title-number">36.1 </span><span class="title-name">Introduction</span></a></span></li><li><span class="sect1"><a href="#sec-nvdimm-terms"><span class="title-number">36.2 </span><span class="title-name">Terms</span></a></span></li><li><span class="sect1"><a href="#sec-nvdimm-uses"><span class="title-number">36.3 </span><span class="title-name">Use cases</span></a></span></li><li><span class="sect1"><a href="#sec-nvdimm-tools"><span class="title-number">36.4 </span><span class="title-name">Tools for managing persistent memory</span></a></span></li><li><span class="sect1"><a href="#sec-nvdimm-setup"><span class="title-number">36.5 </span><span class="title-name">Setting up persistent memory</span></a></span></li><li><span class="sect1"><a href="#sec-nvdimm-moreinfo"><span class="title-number">36.6 </span><span class="title-name">More information</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#part-services"><span class="title-number">V </span><span class="title-name">Services</span></a></span><ul><li><span class="chapter"><a href="#cha-yast-serviceman"><span class="title-number">37 </span><span class="title-name">Service management with YaST</span></a></span></li><li><span class="chapter"><a href="#cha-ntp"><span class="title-number">38 </span><span class="title-name">Time synchronization with NTP</span></a></span><ul><li><span class="sect1"><a href="#sec-ntp-yast"><span class="title-number">38.1 </span><span class="title-name">Configuring an NTP client with YaST</span></a></span></li><li><span class="sect1"><a href="#sec-net-xntp-netconf"><span class="title-number">38.2 </span><span class="title-name">Manually configuring NTP in the network</span></a></span></li><li><span class="sect1"><a href="#ntp-configure-nts"><span class="title-number">38.3 </span><span class="title-name">Configuring NTS</span></a></span></li><li><span class="sect1"><a href="#ntp-chronyc"><span class="title-number">38.4 </span><span class="title-name">Configure <code class="systemitem">chronyd</code> at runtime using <code class="command">chronyc</code></span></a></span></li><li><span class="sect1"><a href="#sec-net-xntp-dynamic"><span class="title-number">38.5 </span><span class="title-name">Dynamic time synchronization at runtime</span></a></span></li><li><span class="sect1"><a href="#sec-net-xntp-normal"><span class="title-number">38.6 </span><span class="title-name">Setting up a local reference clock</span></a></span></li><li><span class="sect1"><a href="#sec-net-xntp-etr"><span class="title-number">38.7 </span><span class="title-name">Clock synchronization to an external time reference (ETR)</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-dns"><span class="title-number">39 </span><span class="title-name">The domain name system</span></a></span><ul><li><span class="sect1"><a href="#sec-dns-basic"><span class="title-number">39.1 </span><span class="title-name">DNS terminology</span></a></span></li><li><span class="sect1"><a href="#sec-dns-install"><span class="title-number">39.2 </span><span class="title-name">Installation</span></a></span></li><li><span class="sect1"><a href="#sec-dns-yast"><span class="title-number">39.3 </span><span class="title-name">Configuration with YaST</span></a></span></li><li><span class="sect1"><a href="#sec-dns-bind"><span class="title-number">39.4 </span><span class="title-name">Starting the BIND name server</span></a></span></li><li><span class="sect1"><a href="#sec-dns-named"><span class="title-number">39.5 </span><span class="title-name">The /etc/named.conf configuration file</span></a></span></li><li><span class="sect1"><a href="#sec-dns-zonefile"><span class="title-number">39.6 </span><span class="title-name">Zone files</span></a></span></li><li><span class="sect1"><a href="#sec-dns-dynupdate"><span class="title-number">39.7 </span><span class="title-name">Dynamic update of zone data</span></a></span></li><li><span class="sect1"><a href="#sec-dns-tsig"><span class="title-number">39.8 </span><span class="title-name">Secure transactions</span></a></span></li><li><span class="sect1"><a href="#sec-dns-dnssec"><span class="title-number">39.9 </span><span class="title-name">DNS security</span></a></span></li><li><span class="sect1"><a href="#sec-dns-info"><span class="title-number">39.10 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-dhcp"><span class="title-number">40 </span><span class="title-name">DHCP</span></a></span><ul><li><span class="sect1"><a href="#sec-dhcp-yast"><span class="title-number">40.1 </span><span class="title-name">Configuring a DHCP server with YaST</span></a></span></li><li><span class="sect1"><a href="#sec-dhcp-soft"><span class="title-number">40.2 </span><span class="title-name">DHCP software packages</span></a></span></li><li><span class="sect1"><a href="#sec-dhcp-server"><span class="title-number">40.3 </span><span class="title-name">The DHCP server dhcpd</span></a></span></li><li><span class="sect1"><a href="#sec-dhcp-addinfo"><span class="title-number">40.4 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-slp"><span class="title-number">41 </span><span class="title-name">SLP</span></a></span><ul><li><span class="sect1"><a href="#sec-slp-sl-fend"><span class="title-number">41.1 </span><span class="title-name">The SLP front-end <code class="command">slptool</code></span></a></span></li><li><span class="sect1"><a href="#sec-slp-sl-reg"><span class="title-number">41.2 </span><span class="title-name">Providing services via SLP</span></a></span></li><li><span class="sect1"><a href="#sec-slp-info"><span class="title-number">41.3 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-apache2"><span class="title-number">42 </span><span class="title-name">The Apache HTTP server</span></a></span><ul><li><span class="sect1"><a href="#sec-apache2-quickstart"><span class="title-number">42.1 </span><span class="title-name">Quick start</span></a></span></li><li><span class="sect1"><a href="#sec-apache2-configuration"><span class="title-number">42.2 </span><span class="title-name">Configuring Apache</span></a></span></li><li><span class="sect1"><a href="#sec-apache2-start-stop"><span class="title-number">42.3 </span><span class="title-name">Starting and stopping Apache</span></a></span></li><li><span class="sect1"><a href="#sec-apache2-modules"><span class="title-number">42.4 </span><span class="title-name">Installing, activating and configuring modules</span></a></span></li><li><span class="sect1"><a href="#sec-apache2-cgi"><span class="title-number">42.5 </span><span class="title-name">Enabling CGI scripts</span></a></span></li><li><span class="sect1"><a href="#sec-apache2-ssl"><span class="title-number">42.6 </span><span class="title-name">Setting up a secure Web server with SSL</span></a></span></li><li><span class="sect1"><a href="#sec-apache2-multiple-instances"><span class="title-number">42.7 </span><span class="title-name">Running multiple Apache instances on the same server</span></a></span></li><li><span class="sect1"><a href="#sec-apache2-security"><span class="title-number">42.8 </span><span class="title-name">Avoiding security problems</span></a></span></li><li><span class="sect1"><a href="#sec-apache2-troubleeshooting"><span class="title-number">42.9 </span><span class="title-name">Troubleshooting</span></a></span></li><li><span class="sect1"><a href="#sec-apache2-more-information"><span class="title-number">42.10 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-ftp"><span class="title-number">43 </span><span class="title-name">Setting up an FTP server with YaST</span></a></span><ul><li><span class="sect1"><a href="#sec-ftp-start"><span class="title-number">43.1 </span><span class="title-name">Starting the FTP server</span></a></span></li><li><span class="sect1"><a href="#sec-ftp-general"><span class="title-number">43.2 </span><span class="title-name">FTP general settings</span></a></span></li><li><span class="sect1"><a href="#sec-ftp-performance"><span class="title-number">43.3 </span><span class="title-name">FTP performance settings</span></a></span></li><li><span class="sect1"><a href="#sec-ftp-auth"><span class="title-number">43.4 </span><span class="title-name">Authentication</span></a></span></li><li><span class="sect1"><a href="#sec-ftp-expert"><span class="title-number">43.5 </span><span class="title-name">Expert settings</span></a></span></li><li><span class="sect1"><a href="#sec-ftp-info"><span class="title-number">43.6 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-squid"><span class="title-number">44 </span><span class="title-name">Squid caching proxy server</span></a></span><ul><li><span class="sect1"><a href="#sec-squid-cacheinfos"><span class="title-number">44.1 </span><span class="title-name">Facts about proxy servers</span></a></span></li><li><span class="sect1"><a href="#sec-squid-sysneeds"><span class="title-number">44.2 </span><span class="title-name">System requirements</span></a></span></li><li><span class="sect1"><a href="#sec-squid-start"><span class="title-number">44.3 </span><span class="title-name">Basic usage of Squid</span></a></span></li><li><span class="sect1"><a href="#sec-squid-yast"><span class="title-number">44.4 </span><span class="title-name">The YaST Squid module</span></a></span></li><li><span class="sect1"><a href="#sec-squid-configfile"><span class="title-number">44.5 </span><span class="title-name">The Squid configuration file</span></a></span></li><li><span class="sect1"><a href="#sec-squid-proxyconfigtrans"><span class="title-number">44.6 </span><span class="title-name">Configuring a transparent proxy</span></a></span></li><li><span class="sect1"><a href="#sec-squid-cachemgr"><span class="title-number">44.7 </span><span class="title-name">Using the Squid cache manager CGI interface (<code class="systemitem">cachemgr.cgi</code>)</span></a></span></li><li><span class="sect1"><a href="#sec-squid-calamaris"><span class="title-number">44.8 </span><span class="title-name">Cache report generation with Calamaris</span></a></span></li><li><span class="sect1"><a href="#sec-squid-moreinfo"><span class="title-number">44.9 </span><span class="title-name">More Information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-wbem"><span class="title-number">45 </span><span class="title-name">Web Based Enterprise Management using SFCB</span></a></span><ul><li><span class="sect1"><a href="#sec-wbem-intro"><span class="title-number">45.1 </span><span class="title-name">Introduction and basic concept</span></a></span></li><li><span class="sect1"><a href="#sec-wbem-setting"><span class="title-number">45.2 </span><span class="title-name">Setting up SFCB</span></a></span></li><li><span class="sect1"><a href="#sec-wbem-config"><span class="title-number">45.3 </span><span class="title-name">SFCB CIMOM configuration</span></a></span></li><li><span class="sect1"><a href="#sec-wbem-advanced"><span class="title-number">45.4 </span><span class="title-name">Advanced SFCB tasks</span></a></span></li><li><span class="sect1"><a href="#sec-wbem-moreinfo"><span class="title-number">45.5 </span><span class="title-name">More information</span></a></span></li></ul></li></ul></li><li><span class="part"><a href="#part-trouble"><span class="title-number">VI </span><span class="title-name">Troubleshooting</span></a></span><ul><li><span class="chapter"><a href="#cha-adminhelp"><span class="title-number">46 </span><span class="title-name">Help and documentation</span></a></span><ul><li><span class="sect1"><a href="#sec-help-onboard-docdir"><span class="title-number">46.1 </span><span class="title-name">Documentation directory</span></a></span></li><li><span class="sect1"><a href="#sec-help-onboard-manpages"><span class="title-number">46.2 </span><span class="title-name">Man pages</span></a></span></li><li><span class="sect1"><a href="#sec-help-onboard-infopages"><span class="title-number">46.3 </span><span class="title-name">Info pages</span></a></span></li><li><span class="sect1"><a href="#sec-help-online"><span class="title-number">46.4 </span><span class="title-name">Online resources</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-adm-support"><span class="title-number">47 </span><span class="title-name">Gathering system information for support</span></a></span><ul><li><span class="sect1"><a href="#sec-admsupport-hostinfo"><span class="title-number">47.1 </span><span class="title-name">Displaying current system information</span></a></span></li><li><span class="sect1"><a href="#sec-admsupport-supportconfig"><span class="title-number">47.2 </span><span class="title-name">Collecting system information with supportconfig</span></a></span></li><li><span class="sect1"><a href="#sec-admsupport-submit"><span class="title-number">47.3 </span><span class="title-name">Submitting information to Global Technical Support</span></a></span></li><li><span class="sect1"><a href="#sec-admsupport-sca"><span class="title-number">47.4 </span><span class="title-name">Analyzing system information</span></a></span></li><li><span class="sect1"><a href="#sec-admsupport-install"><span class="title-number">47.5 </span><span class="title-name">Gathering information during the installation</span></a></span></li><li><span class="sect1"><a href="#sec-admsupport-kernel"><span class="title-number">47.6 </span><span class="title-name">Support of kernel modules</span></a></span></li><li><span class="sect1"><a href="#sec-admsupport-moreinfo"><span class="title-number">47.7 </span><span class="title-name">More information</span></a></span></li></ul></li><li><span class="chapter"><a href="#cha-trouble"><span class="title-number">48 </span><span class="title-name">Common problems and their solutions</span></a></span><ul><li><span class="sect1"><a href="#sec-trouble-info"><span class="title-number">48.1 </span><span class="title-name">Finding and gathering information</span></a></span></li><li><span class="sect1"><a href="#sec-trouble-boot"><span class="title-number">48.2 </span><span class="title-name">Boot problems</span></a></span></li><li><span class="sect1"><a href="#sec-trouble-login"><span class="title-number">48.3 </span><span class="title-name">Login problems</span></a></span></li><li><span class="sect1"><a href="#sec-trouble-netconfig"><span class="title-number">48.4 </span><span class="title-name">Network problems</span></a></span></li><li><span class="sect1"><a href="#sec-trouble-data"><span class="title-number">48.5 </span><span class="title-name">Data problems</span></a></span></li><li><span class="sect1"><a href="#sec-zseries-rescue"><span class="title-number">48.6 </span><span class="title-name">IBM Z: using initrd as a rescue system</span></a></span></li><li><span class="sect1"><a href="#sec-zseries-boot-new-kernel"><span class="title-number">48.7 </span><span class="title-name">IBM Z: After a kernel update the system boots into the previous kernel</span></a></span></li></ul></li></ul></li><li><span class="appendix"><a href="#app-nwscheme"><span class="title-number">A </span><span class="title-name">An example network</span></a></span></li><li><span class="appendix"><a href="#id-1.3.10"><span class="title-number">B </span><span class="title-name">GNU licenses</span></a></span><ul><li><span class="sect1"><a href="#id-1.3.10.4"><span class="title-number">B.1 </span><span class="title-name">GNU Free Documentation License</span></a></span></li></ul></li></ul></div><div class="list-of-figures"><div class="toc-title">List of Figures</div><ul><li><span class="figure"><a href="#fig-yast2-ncurses"><span class="number">4.1 </span><span class="name">Main window of YaST in text mode</span></a></span></li><li><span class="figure"><a href="#fig-yast2-ncurses-inst"><span class="number">4.2 </span><span class="name">The software installation module</span></a></span></li><li><span class="figure"><a href="#fig-y2-userman-main"><span class="number">6.1 </span><span class="name">YaST user and group administration</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.8.9.4"><span class="number">7.1 </span><span class="name">YaST online update</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.8.11.3"><span class="number">7.2 </span><span class="name">Viewing retracted patches and history</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.8.12.6.2.2"><span class="number">7.3 </span><span class="name">YaST online update configuration</span></a></span></li><li><span class="figure"><a href="#fig-y2-sw-packconfl"><span class="number">8.1 </span><span class="name">Conflict management of the software manager</span></a></span></li><li><span class="figure"><a href="#fig-y2-sw-repo-new"><span class="number">8.2 </span><span class="name">Adding a software repository</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.9.9.6"><span class="number">8.3 </span><span class="name">Update notification on GNOME desktop</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.9.10.6"><span class="number">8.4 </span><span class="name"><span class="guimenu">GNOME Software</span>—<span class="guimenu">Updates</span>
    view</span></a></span></li><li><span class="figure"><a href="#fig-snapper-snapshot-boot-identify"><span class="number">10.1 </span><span class="name">Boot loader: snapshots</span></a></span></li><li><span class="figure"><a href="#fig-vnc-viewer-connectgui"><span class="number">14.1 </span><span class="name">vncviewer</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.15.4.4.3"><span class="number">14.2 </span><span class="name">Remmina's main window</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.15.4.5.3"><span class="number">14.3 </span><span class="name">Remote desktop preference</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.15.4.6.3.3"><span class="number">14.4 </span><span class="name">Quick-starting</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.15.4.6.5.3"><span class="number">14.5 </span><span class="name">Remmina viewing remote session</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.15.4.8.5"><span class="number">14.6 </span><span class="name">Reading path to the profile file</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.15.5.4"><span class="number">14.7 </span><span class="name">Remote administration</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.15.6.4.4.3"><span class="number">14.8 </span><span class="name">VNC session settings</span></a></span></li><li><span class="figure"><a href="#id-1.3.3.15.6.4.5.3"><span class="number">14.9 </span><span class="name">Joining a persistent VNC session</span></a></span></li><li><span class="figure"><a href="#id-1.3.4.3.8.7.3.3"><span class="number">17.1 </span><span class="name">Secure boot support</span></a></span></li><li><span class="figure"><a href="#fig-uefi-secure-boot-mok2"><span class="number">17.2 </span><span class="name">UEFI: secure boot process</span></a></span></li><li><span class="figure"><a href="#fig-grub2-boot-editor"><span class="number">18.1 </span><span class="name">GRUB 2 boot editor</span></a></span></li><li><span class="figure"><a href="#fig-grub2-yast-boot-code-options0"><span class="number">18.2 </span><span class="name">Boot code options</span></a></span></li><li><span class="figure"><a href="#fig-grub2-yast-bootloader-options"><span class="number">18.3 </span><span class="name">Boot loader options</span></a></span></li><li><span class="figure"><a href="#fig-grub2-yast-kernel-parameters"><span class="number">18.4 </span><span class="name">Kernel parameters</span></a></span></li><li><span class="figure"><a href="#fig-yast2-runlevel"><span class="number">19.1 </span><span class="name">Services Manager</span></a></span></li><li><span class="figure"><a href="#fig-journalctl-yast"><span class="number">21.1 </span><span class="name">YaST systemd journal</span></a></span></li><li><span class="figure"><a href="#fig-net-basic-OSI"><span class="number">23.1 </span><span class="name">Simplified layer model for TCP/IP</span></a></span></li><li><span class="figure"><a href="#fig-net-basic-TCPPaket"><span class="number">23.2 </span><span class="name">TCP/IP Ethernet packet</span></a></span></li><li><span class="figure"><a href="#fig-yast2-neticard"><span class="number">23.3 </span><span class="name">Configuring network settings</span></a></span></li><li><span class="figure"><a href="#wicked-architecture"><span class="number">23.4 </span><span class="name"><code class="literal">wicked</code> architecture</span></a></span></li><li><span class="figure"><a href="#id-1.3.5.9.6.3.2.2"><span class="number">27.1 </span><span class="name">The YaST software manager: multiversion view</span></a></span></li><li><span class="figure"><a href="#id-1.3.5.13.8.5"><span class="number">31.1 </span><span class="name">GNOME Network Connections dialog</span></a></span></li><li><span class="figure"><a href="#id-1.3.5.13.9.8.2"><span class="number">31.2 </span><span class="name"><code class="systemitem">firewalld</code> zones in NetworkManager</span></a></span></li><li><span class="figure"><a href="#fig-yast-serviceman"><span class="number">37.1 </span><span class="name">YaST service manager</span></a></span></li><li><span class="figure"><a href="#id-1.3.7.3.6.4"><span class="number">38.1 </span><span class="name">NTP configuration window</span></a></span></li><li><span class="figure"><a href="#id-1.3.7.3.6.7.4"><span class="number">38.2 </span><span class="name">Adding a time server</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dnsinst-forwarders"><span class="number">39.1 </span><span class="name">DNS server installation: forwarder settings</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dnsinst-zones"><span class="number">39.2 </span><span class="name">DNS server installation: DNS zones</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dnsinst-finish"><span class="number">39.3 </span><span class="name">DNS server installation: finish wizard</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dns-logging"><span class="number">39.4 </span><span class="name">DNS server: logging</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dns-ddns"><span class="number">39.5 </span><span class="name">DNS server: Zone Editor (Basics)</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dns-nsrec"><span class="number">39.6 </span><span class="name">DNS server: Zone Editor (NS Records)</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dns-mxrec"><span class="number">39.7 </span><span class="name">DNS server: Zone Editor (MX Records)</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dns-soa"><span class="number">39.8 </span><span class="name">DNS server: Zone Editor (SOA)</span></a></span></li><li><span class="figure"><a href="#id-1.3.7.4.5.4.11.7.3.3.2"><span class="number">39.9 </span><span class="name">Adding a record for a primary zone</span></a></span></li><li><span class="figure"><a href="#id-1.3.7.4.5.4.11.7.3.4.2"><span class="number">39.10 </span><span class="name">Adding a reverse zone</span></a></span></li><li><span class="figure"><a href="#id-1.3.7.4.5.4.11.7.3.5.2"><span class="number">39.11 </span><span class="name">Adding a reverse record</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dhcp-wiz1"><span class="number">40.1 </span><span class="name">DHCP server: card selection</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dhcp-wiz2"><span class="number">40.2 </span><span class="name">DHCP server: global settings</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dhcp-wiz3"><span class="number">40.3 </span><span class="name">DHCP server: dynamic DHCP</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dhcp-start"><span class="number">40.4 </span><span class="name">DHCP server: start-up</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dhcp-statdhcp"><span class="number">40.5 </span><span class="name">DHCP server: host management</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dhcp-chroot"><span class="number">40.6 </span><span class="name">DHCP server: chroot jail and declarations</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dhcp-newdec"><span class="number">40.7 </span><span class="name">DHCP server: selecting a declaration type</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dhcp-sub"><span class="number">40.8 </span><span class="name">DHCP server: configuring subnets</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dhcp-tsig"><span class="number">40.9 </span><span class="name">DHCP server: TSIG configuration</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dhcp-dyndns"><span class="number">40.10 </span><span class="name">DHCP server: interface configuration for dynamic DNS</span></a></span></li><li><span class="figure"><a href="#fig-yast2-dhcp-fire"><span class="number">40.11 </span><span class="name">DHCP server: network interface and firewall</span></a></span></li><li><span class="figure"><a href="#fig-apache2-configuration-yast-host"><span class="number">42.1 </span><span class="name">HTTP server wizard: default host</span></a></span></li><li><span class="figure"><a href="#fig-apache2-configuration-yast-summary"><span class="number">42.2 </span><span class="name">HTTP server wizard: summary</span></a></span></li><li><span class="figure"><a href="#fig-apache2-configuration-yast-server-configuration-listen"><span class="number">42.3 </span><span class="name">HTTP server configuration: listen ports and addresses</span></a></span></li><li><span class="figure"><a href="#fig-apache2-configuration-yast-server-configuration-modules"><span class="number">42.4 </span><span class="name">HTTP server configuration: server modules</span></a></span></li><li><span class="figure"><a href="#fig-yast2-ftp-start-up"><span class="number">43.1 </span><span class="name">FTP server configuration — start-up</span></a></span></li><li><span class="figure"><a href="#fig-scatool-html"><span class="number">47.1 </span><span class="name">HTML report generated by SCA tool</span></a></span></li><li><span class="figure"><a href="#fig-sca-appl-html"><span class="number">47.2 </span><span class="name">HTML report generated by SCA appliance</span></a></span></li></ul></div><div class="list-of-tables"><div class="toc-title">List of Tables</div><ul><li><span class="table"><a href="#tab-adm-shell-config-loginshells"><span class="number">1.1 </span><span class="name">Bash configuration files for login shells</span></a></span></li><li><span class="table"><a href="#tab-adm-shell-configs-nonloginshells"><span class="number">1.2 </span><span class="name">Bash configuration files for non-login shells</span></a></span></li><li><span class="table"><a href="#id-1.3.3.2.3.3.10"><span class="number">1.3 </span><span class="name">Special files for Bash</span></a></span></li><li><span class="table"><a href="#id-1.3.3.2.3.4.4"><span class="number">1.4 </span><span class="name">Overview of a standard directory tree</span></a></span></li><li><span class="table"><a href="#tab-adm-envars"><span class="number">1.5 </span><span class="name">Useful environment variables</span></a></span></li><li><span class="table"><a href="#tab-rpm-query"><span class="number">9.1 </span><span class="name">Essential RPM query options</span></a></span></li><li><span class="table"><a href="#tab-rpm-verify"><span class="number">9.2 </span><span class="name">RPM verify options</span></a></span></li><li><span class="table"><a href="#id-1.3.4.5.7.6.9"><span class="number">19.1 </span><span class="name">Service management commands</span></a></span></li><li><span class="table"><a href="#id-1.3.4.5.7.7.3.4"><span class="number">19.2 </span><span class="name">Commands for enabling and disabling services</span></a></span></li><li><span class="table"><a href="#id-1.3.4.5.8.3.9"><span class="number">19.3 </span><span class="name">System V runlevels and <code class="systemitem">systemd</code> target units</span></a></span></li><li><span class="table"><a href="#tab-net-basic-privat-net"><span class="number">23.1 </span><span class="name">Private IP address domains</span></a></span></li><li><span class="table"><a href="#tab-net-param-hostconf"><span class="number">23.2 </span><span class="name">Parameters for /etc/host.conf</span></a></span></li><li><span class="table"><a href="#tab-net-nnswitch-db"><span class="number">23.3 </span><span class="name">Databases available via /etc/nsswitch.conf</span></a></span></li><li><span class="table"><a href="#tab-net-nnswitch-conf"><span class="number">23.4 </span><span class="name">Configuration options for NSS <span class="quote">“<span class="quote">databases</span>”</span></span></a></span></li><li><span class="table"><a href="#tab-team-comparison"><span class="number">23.5 </span><span class="name">Feature comparison between bonding and team</span></a></span></li><li><span class="table"><a href="#tab-x11-fontsys-example-alias"><span class="number">25.1 </span><span class="name">Generating PFL from fontconfig rules</span></a></span></li><li><span class="table"><a href="#tab-x11-fontsys-example-alias2"><span class="number">25.2 </span><span class="name">Results from generating PFL from fontconfig rules with changed order</span></a></span></li><li><span class="table"><a href="#tab-x11-fontsys-example-alias3"><span class="number">25.3 </span><span class="name">Results from generating PFL from fontconfig rules</span></a></span></li><li><span class="table"><a href="#tab-suse-packages-ulimit"><span class="number">30.1 </span><span class="name"><code class="command">ulimit</code>: Setting resources for the user</span></a></span></li><li><span class="table"><a href="#tab-wbem-setting-daemon-1"><span class="number">45.1 </span><span class="name">Commands for managing sfcbd</span></a></span></li><li><span class="table"><a href="#tab-help-mancategory"><span class="number">46.1 </span><span class="name">Man pages—categories and descriptions</span></a></span></li><li><span class="table"><a href="#tab-admsupport-features-and-filenames"><span class="number">47.1 </span><span class="name">Comparison of features and file names in the TAR archive</span></a></span></li><li><span class="table"><a href="#tab-trouble-info"><span class="number">48.1 </span><span class="name">Log files</span></a></span></li><li><span class="table"><a href="#tab-trouble-system"><span class="number">48.2 </span><span class="name">System information with the <code class="filename">/proc</code> file system</span></a></span></li><li><span class="table"><a href="#tab-trouble-sysfs"><span class="number">48.3 </span><span class="name">System information with the <code class="filename">/sys</code> file system</span></a></span></li></ul></div><div class="list-of-examples"><div class="toc-title">List of Examples</div><ul><li><span class="example"><a href="#id-1.3.3.2.4.3"><span class="number">1.1 </span><span class="name">A shell script printing a text</span></a></span></li><li><span class="example"><a href="#ex-sudo-custom-config-user"><span class="number">2.1 </span><span class="name">Create a user-specific configuration file</span></a></span></li><li><span class="example"><a href="#ex-sudo-custom-config-group"><span class="number">2.2 </span><span class="name">Create custom configurations by grouping items</span></a></span></li><li><span class="example"><a href="#ex-sudo-custom-config-alias"><span class="number">2.3 </span><span class="name">Simplify configurations by applying aliases</span></a></span></li><li><span class="example"><a href="#ex-zypper-repos"><span class="number">9.1 </span><span class="name">Zypper—list of known repositories</span></a></span></li><li><span class="example"><a href="#aus-update-rpm-i"><span class="number">9.2 </span><span class="name"><code class="command">rpm -q -i wget</code></span></a></span></li><li><span class="example"><a href="#dat-rpm-search"><span class="number">9.3 </span><span class="name">Script to search for packages</span></a></span></li><li><span class="example"><a href="#ex-snapper-config-timeline"><span class="number">10.1 </span><span class="name">Example timeline configuration</span></a></span></li><li><span class="example"><a href="#id-1.3.4.4.7.2.1.2.2"><span class="number">18.1 </span><span class="name">Usage of grub2-mkconfig</span></a></span></li><li><span class="example"><a href="#id-1.3.4.4.7.2.2.2.2"><span class="number">18.2 </span><span class="name">Usage of grub2-mkrescue</span></a></span></li><li><span class="example"><a href="#id-1.3.4.4.7.2.3.2.2"><span class="number">18.3 </span><span class="name">Usage of grub2-script-check</span></a></span></li><li><span class="example"><a href="#id-1.3.4.4.7.2.4.2.2"><span class="number">18.4 </span><span class="name">Usage of grub2-once</span></a></span></li><li><span class="example"><a href="#id-1.3.4.5.8.4.3.3"><span class="number">19.1 </span><span class="name">List active services</span></a></span></li><li><span class="example"><a href="#id-1.3.4.5.8.4.3.5"><span class="number">19.2 </span><span class="name">List failed services</span></a></span></li><li><span class="example"><a href="#id-1.3.4.5.11.8.5"><span class="number">19.3 </span><span class="name">List all processes belonging to a service</span></a></span></li><li><span class="example"><a href="#id-1.3.5.4.3.9"><span class="number">22.1 </span><span class="name">Alternatives System of the <code class="command">java</code> command</span></a></span></li><li><span class="example"><a href="#aus-net-basic-ipaddress"><span class="number">23.1 </span><span class="name">Writing IP addresses</span></a></span></li><li><span class="example"><a href="#tab-net-basic-netmask"><span class="number">23.2 </span><span class="name">Linking IP addresses to the netmask</span></a></span></li><li><span class="example"><a href="#aus-net-ipv6-add"><span class="number">23.3 </span><span class="name">Sample IPv6 address</span></a></span></li><li><span class="example"><a href="#aus-net-ipv6-addpre"><span class="number">23.4 </span><span class="name">IPv6 address specifying the prefix length</span></a></span></li><li><span class="example"><a href="#id-1.3.5.5.17.5.10.9"><span class="number">23.5 </span><span class="name">Common network interfaces and some static routes</span></a></span></li><li><span class="example"><a href="#dat-net-etc-resolv-conf"><span class="number">23.6 </span><span class="name"><code class="filename">/var/run/netconfig/resolv.conf</code></span></a></span></li><li><span class="example"><a href="#dat-net-etc-hosts"><span class="number">23.7 </span><span class="name"><code class="filename">/etc/hosts</code></span></a></span></li><li><span class="example"><a href="#dat-net-networks"><span class="number">23.8 </span><span class="name"><code class="filename">/etc/networks</code></span></a></span></li><li><span class="example"><a href="#dat-net-etc-hostconf"><span class="number">23.9 </span><span class="name"><code class="filename">/etc/host.conf</code></span></a></span></li><li><span class="example"><a href="#dat-net-nsswitchconf"><span class="number">23.10 </span><span class="name"><code class="filename">/etc/nsswitch.conf</code></span></a></span></li><li><span class="example"><a href="#ex-basicnet-manconf-ping"><span class="number">23.11 </span><span class="name">Output of the command ping</span></a></span></li><li><span class="example"><a href="#ex-team-lb"><span class="number">23.12 </span><span class="name">Configuration for load balancing with Network Teaming</span></a></span></li><li><span class="example"><a href="#ex-team-failover"><span class="number">23.13 </span><span class="name">Configuration for DHCP Network Teaming device</span></a></span></li><li><span class="example"><a href="#aus-d-lpd"><span class="number">24.1 </span><span class="name">Error message from <code class="command">lpd</code></span></a></span></li><li><span class="example"><a href="#aus-d-bcast"><span class="number">24.2 </span><span class="name">Broadcast from the CUPS network server</span></a></span></li><li><span class="example"><a href="#ex-x11-fontsys-fontconfig-rendering-algorithms"><span class="number">25.1 </span><span class="name">Specifying rendering algorithms</span></a></span></li><li><span class="example"><a href="#ex-x11-fontsys-fontconfig-aliases1"><span class="number">25.2 </span><span class="name">Aliases and family name substitutions</span></a></span></li><li><span class="example"><a href="#ex-x11-fontsys-fontconfig-aliases2"><span class="number">25.3 </span><span class="name">Aliases and family name substitutions</span></a></span></li><li><span class="example"><a href="#ex-x11-fontsys-fontconfig-aliases3"><span class="number">25.4 </span><span class="name">Aliases and family names substitutions</span></a></span></li><li><span class="example"><a href="#ex-rules"><span class="number">29.1 </span><span class="name">Example <code class="systemitem">udev</code> rules</span></a></span></li><li><span class="example"><a href="#ex-suse-packages-cron"><span class="number">30.1 </span><span class="name">Entry in /etc/crontab</span></a></span></li><li><span class="example"><a href="#ex-suse-packages-cron-time"><span class="number">30.2 </span><span class="name">/etc/crontab: remove time stamp files</span></a></span></li><li><span class="example"><a href="#ex-u-ulimit-bashrc"><span class="number">30.3 </span><span class="name"><code class="command">ulimit</code>: Settings in <code class="filename">~/.bashrc</code></span></a></span></li><li><span class="example"><a href="#ex-forward"><span class="number">39.1 </span><span class="name">Forwarding options in named.conf</span></a></span></li><li><span class="example"><a href="#ex-named-mini"><span class="number">39.2 </span><span class="name">A basic /etc/named.conf</span></a></span></li><li><span class="example"><a href="#ex-no-log"><span class="number">39.3 </span><span class="name">Entry to disable logging</span></a></span></li><li><span class="example"><a href="#ex-meine-domain"><span class="number">39.4 </span><span class="name">Zone entry for example.com</span></a></span></li><li><span class="example"><a href="#ex-andere-domain"><span class="number">39.5 </span><span class="name">Zone entry for example.net</span></a></span></li><li><span class="example"><a href="#ex-welt-zone"><span class="number">39.6 </span><span class="name">The /var/lib/named/example.com.zone file</span></a></span></li><li><span class="example"><a href="#dat-arpa"><span class="number">39.7 </span><span class="name">Reverse lookup</span></a></span></li><li><span class="example"><a href="#dat-dhcp-conf"><span class="number">40.1 </span><span class="name">The configuration file /etc/dhcpd.conf</span></a></span></li><li><span class="example"><a href="#dat-dhcp-conf-add"><span class="number">40.2 </span><span class="name">Additions to the configuration file</span></a></span></li><li><span class="example"><a href="#ex-apache2-virtual-hosts-name-based"><span class="number">42.1 </span><span class="name">Basic examples of name-based <code class="systemitem">VirtualHost</code> entries</span></a></span></li><li><span class="example"><a href="#ex-apache-directives-virtualhost-name-based"><span class="number">42.2 </span><span class="name">Name-based <code class="systemitem">VirtualHost</code> directives</span></a></span></li><li><span class="example"><a href="#ex-apache-directives-virtualhost-ip-based"><span class="number">42.3 </span><span class="name">IP-based <code class="systemitem">VirtualHost</code> directives</span></a></span></li><li><span class="example"><a href="#ex-apache-directives-virtualhost-basic-configuration"><span class="number">42.4 </span><span class="name">Basic <code class="systemitem">VirtualHost</code> configuration</span></a></span></li><li><span class="example"><a href="#ex-apache2-cgi-configuration"><span class="number">42.5 </span><span class="name">VirtualHost CGI configuration</span></a></span></li><li><span class="example"><a href="#ex-squidclient-request"><span class="number">44.1 </span><span class="name">A request with <code class="command">squidclient</code></span></a></span></li><li><span class="example"><a href="#ex-squid-school"><span class="number">44.2 </span><span class="name">Defining ACL rules</span></a></span></li><li><span class="example"><a href="#ex-support-hostinfo"><span class="number">47.1 </span><span class="name">Output of <code class="command">hostinfo</code> when logging in as <code class="systemitem">root</code></span></a></span></li></ul></div><div><div xml:lang="en" class="legalnotice" id="id-1.3.1.5"><p>
  Copyright © 2006–2024

  SUSE LLC and contributors. All rights reserved.
 </p><p>
  Permission is granted to copy, distribute and/or modify this document under
  the terms of the GNU Free Documentation License, Version 1.2 or (at your
  option) version 1.3; with the Invariant Section being this copyright notice
  and license. A copy of the license version 1.2 is included in the section
  entitled <span class="quote">“<span class="quote">GNU Free Documentation License</span>”</span>.
 </p><p>
  For SUSE trademarks, see
  <a class="link" href="https://www.suse.com/company/legal/" target="_blank">https://www.suse.com/company/legal/</a>. All
  third-party trademarks are the property of their respective owners. Trademark
  symbols (®, ™ etc.) denote trademarks of SUSE and its affiliates.
  Asterisks (*) denote third-party trademarks.
 </p><p>
  All information found in this book has been compiled with utmost attention to
  detail. However, this does not guarantee complete accuracy. Neither
  SUSE LLC, its affiliates, the authors nor the translators shall be
  held liable for possible errors or the consequences thereof.
 </p></div></div><section class="preface" id="preface-administration" data-id-title="Preface"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number"> </span><span class="title-name">Preface</span></span> <a title="Permalink" class="permalink" href="#preface-administration">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/sle_admin_intro.xml" title="Edit source document"> </a></div></div></div></div></div><section xml:lang="en" class="sect1" id="id-1.3.2.3" data-id-title="Available documentation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1 </span><span class="title-name">Available documentation</span></span> <a title="Permalink" class="permalink" href="#id-1.3.2.3">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_available_doc.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.2.3.3.1"><span class="term">Online documentation</span></dt><dd><p>
     Our documentation is available online at <a class="link" href="https://documentation.suse.com" target="_blank">https://documentation.suse.com</a>.
     Browse or download the documentation in various formats.
    </p><div id="id-1.3.2.3.3.1.2.2" data-id-title="Latest updates" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Latest updates</div><p>
      The latest updates are usually available in the English-language version of this documentation.
     </p></div></dd><dt id="id-1.3.2.3.3.2"><span class="term">SUSE Knowledgebase</span></dt><dd><p>
     If you run into an issue, check out the Technical Information
     Documents (TIDs) that are available online at <a class="link" href="https://www.suse.com/support/kb/" target="_blank">https://www.suse.com/support/kb/</a>.
     Search the SUSE Knowledgebase for known solutions driven by customer need.
     </p></dd><dt id="id-1.3.2.3.3.3"><span class="term">Release notes</span></dt><dd><p>
     For release notes, see
     <a class="link" href="https://www.suse.com/releasenotes/" target="_blank">https://www.suse.com/releasenotes/</a>.
    </p></dd><dt id="id-1.3.2.3.3.4"><span class="term">In your system</span></dt><dd><p>
      For offline use, the release notes are also available under
      <code class="filename">/usr/share/doc/release-notes</code> on your system.
      The documentation for individual packages is available at
      <code class="filename">/usr/share/doc/packages</code>.
    </p><p>
      Many commands are also described in their <span class="emphasis"><em>manual
      pages</em></span>. To view them, run <code class="command">man</code>, followed
      by a specific command name. If the <code class="command">man</code> command is
      not installed on your system, install it with <code class="command">sudo zypper
      install man</code>.
    </p></dd></dl></div></section><section xml:lang="en" class="sect1" id="id-1.3.2.4" data-id-title="Improving the documentation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2 </span><span class="title-name">Improving the documentation</span></span> <a title="Permalink" class="permalink" href="#id-1.3.2.4">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_feedback.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Your feedback and contributions to this documentation are welcome.
  The following channels for giving feedback are available:
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.2.4.4.1"><span class="term">Service requests and support</span></dt><dd><p>
     For services and support options available for your product, see
     <a class="link" href="https://www.suse.com/support/" target="_blank">https://www.suse.com/support/</a>.
    </p><p>
     To open a service request, you need a SUSE subscription registered at
     SUSE Customer Center.
     Go to <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a>, log
     in, and click <span class="guimenu">Create New</span>.
    </p></dd><dt id="id-1.3.2.4.4.2"><span class="term">Bug reports</span></dt><dd><p>
     Report issues with the documentation at <a class="link" href="https://bugzilla.suse.com/" target="_blank">https://bugzilla.suse.com/</a>.
    </p><p>
     To simplify this process, click the <span class="guimenu">Report
     an issue</span> icon next to a headline in the HTML
     version of this document. This preselects the right product and
     category in Bugzilla and adds a link to the current section.
     You can start typing your bug report right away.
    </p><p>
     A Bugzilla account is required.
    </p></dd><dt id="id-1.3.2.4.4.3"><span class="term">Contributions</span></dt><dd><p>
     To contribute to this documentation, click the <span class="guimenu">Edit source
     document</span> icon next to a headline in the HTML version of
     this document. This will take you to the source code on GitHub, where you
     can open a pull request.</p><p>
     A GitHub account is required.
    </p><div id="id-1.3.2.4.4.3.2.3" data-id-title="Edit source document only available for English" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: <span class="guimenu">Edit source document</span> only available for English</div><p>
      The <span class="guimenu">Edit source document</span> icons are only available for the
      English version of each document. For all other languages, use the
      <span class="guimenu">Report an issue</span> icons instead.
     </p></div><p>
     For more information about the documentation environment used for this
     documentation, see the repository's README.
    </p></dd><dt id="id-1.3.2.4.4.4"><span class="term">Mail</span></dt><dd><p>
     You can also report errors and send feedback concerning the
     documentation to &lt;<a class="email" href="mailto:doc-team@suse.com">doc-team@suse.com</a>&gt;. Include the
     document title, the product version, and the publication date of the
     document. Additionally, include the relevant section number and title (or
     provide the URL) and provide a concise description of the problem.
    </p></dd></dl></div></section><section xml:lang="en" class="sect1" id="id-1.3.2.5" data-id-title="Documentation conventions"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Documentation conventions</span></span> <a title="Permalink" class="permalink" href="#id-1.3.2.5">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_convention.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The following notices and typographic conventions are used in this
  document:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    <code class="filename">/etc/passwd</code>: Directory names and file names
   </p></li><li class="listitem"><p>
    <em class="replaceable">PLACEHOLDER</em>: Replace
    <em class="replaceable">PLACEHOLDER</em> with the actual value
   </p></li><li class="listitem"><p>
    <code class="envar">PATH</code>: An environment variable
   </p></li><li class="listitem"><p>
    <code class="command">ls</code>, <code class="option">--help</code>: Commands, options, and
    parameters
   </p></li><li class="listitem"><p>
    <code class="systemitem">user</code>: The name of a user or group
   </p></li><li class="listitem"><p>
    <span class="package">package_name</span>: The name of a software package
   </p></li><li class="listitem"><p>
    <span class="keycap">Alt</span>, <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>: A key to press or a key combination. Keys
    are shown in uppercase as on a keyboard.
   </p></li><li class="listitem"><p>
    <span class="guimenu">File</span>, <span class="guimenu">File</span> › <span class="guimenu">Save
    As</span>: menu items, buttons
   </p></li><li class="listitem"><p><strong class="arch-arrow-start">AMD/Intel</strong>
    This paragraph is only relevant for the AMD64/Intel 64 architectures. The
    arrows mark the beginning and the end of the text block.
   <strong class="arch-arrow-end"> </strong></p><p><strong class="arch-arrow-start">IBM Z, POWER</strong>
    This paragraph is only relevant for the architectures
    <code class="literal">IBM Z</code> and <code class="literal">POWER</code>. The arrows
    mark the beginning and the end of the text block.
   <strong class="arch-arrow-end"> </strong></p></li><li class="listitem"><p>
    <em class="citetitle">Chapter 1, <span class="quote">“<span class="quote">Example chapter</span>”</span></em>:
    A cross-reference to another chapter in this guide.
   </p></li><li class="listitem"><p>
    Commands that must be run with <code class="systemitem">root</code> privileges. You can also
    prefix these commands with the <code class="command">sudo</code> command to run them
    as a non-privileged user:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">command</code>
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">command</code></pre></div></li><li class="listitem"><p>
    Commands that can be run by non-privileged users:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">command</code></pre></div></li><li class="listitem"><p>
    Commands can be split into two or multiple lines by a backslash character
    (<code class="literal">\</code>) at the end of a line. The backslash informs the shell that
    the command invocation will continue after the end of the line:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">echo</code> a b \
c d</pre></div></li><li class="listitem"><p>
     A code block that shows both the command (preceded by a prompt)
     and the respective output returned by the shell:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">command</code>
output</pre></div></li><li class="listitem"><p>
    Notices
   </p><div id="id-1.3.2.5.4.15.2" data-id-title="Warning notice" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Warning notice</div><p>
     Vital information you must be aware of before proceeding. Warns you about
     security issues, potential loss of data, damage to hardware, or physical
     hazards.
    </p></div><div id="id-1.3.2.5.4.15.3" data-id-title="Important notice" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Important notice</div><p>
     Important information you should be aware of before proceeding.
    </p></div><div id="id-1.3.2.5.4.15.4" data-id-title="Note notice" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Note notice</div><p>
     Additional information, for example about differences in software
     versions.
    </p></div><div id="id-1.3.2.5.4.15.5" data-id-title="Tip notice" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Tip notice</div><p>
     Helpful information, like a guideline or a piece of practical advice.
    </p></div></li><li class="listitem"><p>
    Compact Notices
   </p><div id="id-1.3.2.5.4.16.2" class="admonition note compact"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><p>
     Additional information, for example about differences in software
     versions.
    </p></div><div id="id-1.3.2.5.4.16.3" class="admonition tip compact"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><p>
     Helpful information, like a guideline or a piece of practical advice.
    </p></div></li></ul></div></section><section xml:lang="en" class="sect1" id="id-1.3.2.6" data-id-title="Support"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4 </span><span class="title-name">Support</span></span> <a title="Permalink" class="permalink" href="#id-1.3.2.6">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Find the support statement for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> and general information about
  technology previews below.
  For details about the product lifecycle, see
  <a class="link" href="https://www.suse.com/lifecycle" target="_blank">https://www.suse.com/lifecycle</a>.
  
  
 </p><p>
  If you are entitled to support, find details on how to collect information
  for a support ticket at
  <a class="link" href="https://documentation.suse.com/sles-15/html/SLES-all/cha-adm-support.html" target="_blank">https://documentation.suse.com/sles-15/html/SLES-all/cha-adm-support.html</a>.
 </p><section class="sect2" id="id-1.3.2.6.5" data-id-title="Support statement for SUSE Linux Enterprise Server"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1 </span><span class="title-name">Support statement for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span></span> <a title="Permalink" class="permalink" href="#id-1.3.2.6.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To receive support, you need an appropriate subscription with SUSE.
   To view the specific support offers available to you, go to
   <a class="link" href="https://www.suse.com/support/" target="_blank">https://www.suse.com/support/</a> and select your product.
  </p><p>
   The support levels are defined as follows:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.2.6.5.4.1"><span class="term">L1</span></dt><dd><p>
      Problem determination, which means technical support designed to provide
      compatibility information, usage support, ongoing maintenance,
      information gathering and basic troubleshooting using available
      documentation.
     </p></dd><dt id="id-1.3.2.6.5.4.2"><span class="term">L2</span></dt><dd><p>
      Problem isolation, which means technical support designed to analyze
      data, reproduce customer problems, isolate a problem area and provide a
      resolution for problems not resolved by Level 1 or prepare for
      Level 3.
     </p></dd><dt id="id-1.3.2.6.5.4.3"><span class="term">L3</span></dt><dd><p>
      Problem resolution, which means technical support designed to resolve
      problems by engaging engineering to resolve product defects which have
      been identified by Level 2 Support.
     </p></dd></dl></div><p>
   For contracted customers and partners, <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is delivered with L3
   support for all packages, except for the following:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Technology previews.
    </p></li><li class="listitem"><p>
     Sound, graphics, fonts, and artwork.
    </p></li><li class="listitem"><p>
     Packages that require an additional customer contract.
    </p></li><li class="listitem"><p>
     Some packages shipped as part of the module <span class="emphasis"><em>Workstation
     Extension</em></span> are L2-supported only.
    </p></li><li class="listitem"><p>
     Packages with names ending in <span class="package">-devel</span> (containing header
     files and similar developer resources) will only be supported together
     with their main packages.
    </p></li></ul></div><p>
   SUSE will only support the usage of original packages.
   That is, packages that are unchanged and not recompiled.
  </p></section><section class="sect2" id="id-1.3.2.6.6" data-id-title="Technology previews"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.2 </span><span class="title-name">Technology previews</span></span> <a title="Permalink" class="permalink" href="#id-1.3.2.6.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_intro_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Technology previews are packages, stacks, or features delivered by SUSE
   to provide glimpses into upcoming innovations.
   Technology previews are included for your convenience to give you a chance
   to test new technologies within your environment.
   We would appreciate your feedback.
   If you test a technology preview, please contact your SUSE representative
   and let them know about your experience and use cases.
   Your input is helpful for future development.
  </p><p>
   Technology previews have the following limitations:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Technology previews are still in development.
     Therefore, they may be functionally incomplete, unstable, or otherwise
     <span class="emphasis"><em>not</em></span> suitable for production use.
    </p></li><li class="listitem"><p>
     Technology previews are <span class="emphasis"><em>not</em></span> supported.
    </p></li><li class="listitem"><p>
     Technology previews may only be available for specific hardware
     architectures.
    </p></li><li class="listitem"><p>
     Details and functionality of technology previews are subject to change.
     As a result, upgrading to subsequent releases of a technology preview may
     be impossible and require a fresh installation.
    </p></li><li class="listitem"><p>
     SUSE may discover that a preview does not meet customer or market needs,
     or does not comply with enterprise standards.
     Technology previews can be removed from a product at any time.
     SUSE does not commit to providing a supported version of such
     technologies in the future.
    </p></li></ul></div><p>
   For an overview of technology previews shipped with your product, see the
   release notes at <a class="link" href="https://www.suse.com/releasenotes" target="_blank">https://www.suse.com/releasenotes</a>.
  </p></section></section></section><div class="part" id="part-administration" data-id-title="Common tasks"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part I </span><span class="title-name">Common tasks </span></span><a title="Permalink" class="permalink" href="#part-administration">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_administration.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#cha-adm-shell"><span class="title-number">1 </span><span class="title-name">Bash and Bash scripts</span></a></span></li><dd class="toc-abstract"><p>
    Today, many people use computers with a graphical user interface (GUI)
    like GNOME. Although GUIs offer many features, they are limited
    when performing automated task execution. Shells complement
    GUIs well, and this chapter gives an overview of several aspects of
    shells, in this case the Bash shell.
   </p></dd><li><span class="chapter"><a href="#cha-adm-sudo"><span class="title-number">2 </span><span class="title-name"><code class="command">sudo</code> basics</span></a></span></li><dd class="toc-abstract"><p>
    Running certain commands requires root privileges. However, for security
    reasons and to avoid mistakes, it is not recommended to log in as
    <code class="systemitem">root</code>. A safer approach is to log in as a regular user, and then use
    <code class="command">sudo</code> to run commands with elevated privileges.
  </p></dd><li><span class="chapter"><a href="#cha-yast-gui"><span class="title-number">3 </span><span class="title-name">Using YaST</span></a></span></li><dd class="toc-abstract"><p>YaST is a SUSE Linux Enterprise Server tool that provides a graphical interface for all essential installation and system configuration tasks. Whether you need to update packages, configure a printer, modify firewall settings, set up an FTP server, or partition a hard disk—you can do it using YaST. …</p></dd><li><span class="chapter"><a href="#cha-yast-text"><span class="title-number">4 </span><span class="title-name">YaST in text mode</span></a></span></li><dd class="toc-abstract"><p>The ncurses-based pseudo-graphical YaST interface is designed primarily to help system administrators to manage systems without an X server. The interface offers several advantages compared to the conventional GUI. You can navigate the ncurses interface using the keyboard, and there are keyboard sho…</p></dd><li><span class="chapter"><a href="#cha-yast-lang"><span class="title-number">5 </span><span class="title-name">Changing language and country settings with YaST</span></a></span></li><dd class="toc-abstract"><p>
    This chapter explains how to configure language and country settings. You
    can change the language globally for the whole system, individually for
    certain users or desktops, or temporarily for single applications.
    Additionally, you can configure secondary languages and adjust the date and
    country settings.
   </p></dd><li><span class="chapter"><a href="#cha-yast-userman"><span class="title-number">6 </span><span class="title-name">Managing users with YaST</span></a></span></li><dd class="toc-abstract"><p>
  During installation, you may have created a local user for your system.
  With the YaST module <span class="guimenu">User and Group Management</span> you can
  add users or edit existing ones. It also lets you configure your system
  to authenticate users with a network server.
 </p></dd><li><span class="chapter"><a href="#cha-onlineupdate-you"><span class="title-number">7 </span><span class="title-name">YaST online update</span></a></span></li><dd class="toc-abstract"><p>SUSE offers a continuous stream of software security updates for your product. By default, the update applet is used to keep your system up to date. Refer to Section 8.5, “The GNOME package updater” for further information on the update applet. This chapter covers the alternative tool for updating s…</p></dd><li><span class="chapter"><a href="#cha-yast-software"><span class="title-number">8 </span><span class="title-name">Installing or removing software</span></a></span></li><dd class="toc-abstract"><p>
    Using YaST's software management module, you can search for software
    packages as well as install and remove them. When installing packages,
    YaST automatically resolves all dependencies. To install packages that are
    not on the installation medium, you can add software repositories and YaST
    to manage them. You can also keep your system up to date by managing
    software updates using the update applet.
   </p></dd><li><span class="chapter"><a href="#cha-sw-cl"><span class="title-number">9 </span><span class="title-name">Managing software with command line tools</span></a></span></li><dd class="toc-abstract"><p>
    This chapter describes Zypper and RPM, two command line tools for managing
    software. For a definition of the terminology used in this context (for
    example, <code class="literal">repository</code>, <code class="literal">patch</code>, or
    <code class="literal">update</code>) refer to
    <a class="xref" href="#sec-onlineupdate-terms" title="8.1. Definition of terms">Section 8.1, “Definition of terms”</a>.
   </p></dd><li><span class="chapter"><a href="#cha-snapper"><span class="title-number">10 </span><span class="title-name">System recovery and snapshot management with Snapper</span></a></span></li><dd class="toc-abstract"><p>
    Snapper allows creating and managing file system snapshots.
    File system snapshots allow keeping a copy of the state of a file system
    at a certain point of time.
    The standard setup of Snapper is designed to allow rolling back system
    changes.
    However, you can also use it to create on-disk backups of user data.
    As the basis for this functionality, Snapper uses the Btrfs file system or
    thinly provisioned LVM volumes with an XFS or Ext4 file system.
   </p></dd><li><span class="chapter"><a href="#cha-klp"><span class="title-number">11 </span><span class="title-name">Live kernel patching with KLP</span></a></span></li><dd class="toc-abstract"><p>
    This document describes the basic principles of the Kernel Live Patching (KLP)
    technology, and provides usage guidelines for the SLE Live Patching
    service.
   </p></dd><li><span class="chapter"><a href="#cha-ulp"><span class="title-number">12 </span><span class="title-name">User space live patching</span></a></span></li><dd class="toc-abstract"><p>
        This chapter describes the basic principles and usage of user space
        live patching.
      </p></dd><li><span class="chapter"><a href="#cha-transactional-updates"><span class="title-number">13 </span><span class="title-name">Transactional updates</span></a></span></li><dd class="toc-abstract"><p>
     Transactional updates are available in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> as a technology preview
     for updating SLES when the root file system is read-only. Transactional
     updates are atomic—all updates are applied only if all
     succeed—and support rollbacks. It does not affect a running system as
     no changes are activated until after the system is rebooted. As reboots are
     disruptive, the administrator must decide if a reboot is more expensive
     than disturbing running services. If reboots are too expensive then do not
     use transactional updates.
   </p><p>
    Transactional updates are run daily by the
    <code class="command">transactional-update</code> script. The script checks for
    available updates. If there are any updates, it creates a new snapshot of
    the root file system in the background, and then fetches updates from the
    release channels. After the new snapshot is updated, it is
    marked as active and will be the new default root file system after the next 
    reboot of the system. When <code class="command">transactional-update</code> is set to run
    automatically (which is the default behavior) it also reboots the system.
    Both the time that the update runs and the reboot maintenance window are
    configurable.
   </p><p>
    Only packages that are part of the snapshot of the root file system can be
    updated. If packages contain files that are not part of the snapshot, the
    update could fail or break the system.
   </p><p>
    RPMs that require a license to be accepted cannot be updated.
   </p></dd><li><span class="chapter"><a href="#cha-vnc"><span class="title-number">14 </span><span class="title-name">Remote graphical sessions with VNC</span></a></span></li><dd class="toc-abstract"><p>
    Virtual Network Computing (VNC) enables you to access a remote computer
    via a graphical desktop, and run remote graphical applications. VNC is 
    platform-independent and accesses the remote machine from any operating 
    system. This chapter describes how to connect to a VNC server with the 
    desktop clients vncviewer and Remmina, and how to operate a VNC server.
   </p><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> supports two different kinds of VNC sessions: one-time
    sessions that <span class="quote">“<span class="quote">live</span>”</span> While the VNC connection from the
    client is kept up, and persistent sessions that <span class="quote">“<span class="quote">live</span>”</span> until
    they are explicitly terminated.
   </p><p>
   A VNC server can offer both kinds of sessions simultaneously on different
   ports, but an open session cannot be converted from one type to the other.
  </p></dd><li><span class="chapter"><a href="#cha-net-rsync"><span class="title-number">15 </span><span class="title-name">File copying with RSync</span></a></span></li><dd class="toc-abstract"><p>
    Today, a typical user has several computers: home and workplace machines, a
    laptop, a smartphone or a tablet. This makes the task of keeping files and
    documents in synchronization across multiple devices all the more important.
   </p></dd></ul></div><section class="chapter" id="cha-adm-shell" data-id-title="Bash and Bash scripts"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">1 </span><span class="title-name">Bash and Bash scripts</span></span> <a title="Permalink" class="permalink" href="#cha-adm-shell">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Today, many people use computers with a graphical user interface (GUI)
    like GNOME. Although GUIs offer many features, they are limited
    when performing automated task execution. Shells complement
    GUIs well, and this chapter gives an overview of several aspects of
    shells, in this case the Bash shell.
   </p></div></div></div></div><section class="sect1" id="sec-adm-whatistheshell" data-id-title="What is the shell?"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.1 </span><span class="title-name">What is <span class="quote">“<span class="quote">the shell</span>”</span>?</span></span> <a title="Permalink" class="permalink" href="#sec-adm-whatistheshell">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Traditionally, <span class="emphasis"><em>the</em></span> Linux shell is Bash
   (Bourne again Shell). When this chapter speaks about <span class="quote">“<span class="quote">the shell</span>”</span>
   it means Bash. There are more shells available (ash, csh, ksh, zsh, …),
   each employing different features and characteristics.
  </p><section class="sect2" id="sec-adm-configfiles" data-id-title="Bash configuration files"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.1.1 </span><span class="title-name">Bash configuration files</span></span> <a title="Permalink" class="permalink" href="#sec-adm-configfiles">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    A shell can be invoked as an:
   </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="formalpara-title">Interactive login shell. </span>
       This is used when logging in to a machine, invoking Bash with the
       <code class="option">--login</code> option or when logging in to a remote machine
       with SSH.
      </p></li><li class="listitem"><p><span class="formalpara-title">Interactive non-login shell. </span>
       This is normally the case when starting xterm, konsole, gnome-terminal,
       or similar command line interface (CLI) tools.
      </p></li><li class="listitem"><p><span class="formalpara-title">Non-interactive non-login shell. </span>
       This is invoked when invoking a shell script at the command line.
      </p></li></ol></div><p>
    Each shell reads different configuration files. The following tables show
    the login and non-login shell configuration files.
   </p><div id="id-1.3.3.2.3.3.5" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
     Bash looks for its configuration files in a specific order depending on
     the type of shell where it is run. Find more details on the Bash man
     page (<code class="command">man 1 bash</code>). Search for the headline
     <code class="literal">INVOCATION</code>.
    </p></div><div class="table" id="tab-adm-shell-config-loginshells" data-id-title="Bash configuration files for login shells"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 1.1: </span><span class="title-name">Bash configuration files for login shells </span></span><a title="Permalink" class="permalink" href="#tab-adm-shell-config-loginshells">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         File
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Description
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="filename">/etc/profile</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Do not modify this file, otherwise your modifications may be destroyed
         during your next update.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="filename">/etc/profile.local</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Use this file if you extend <code class="filename">/etc/profile</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="filename">/etc/profile.d/</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Contains system-wide configuration files for specific programs
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <code class="filename">~/.profile</code>
        </p>
       </td><td>
        <p>
         Insert user specific configuration for login shells here
        </p>
       </td></tr></tbody></table></div></div><p>
    The login shell also sources the configuration files listed under
    <a class="xref" href="#tab-adm-shell-configs-nonloginshells" title="Bash configuration files for non-login shells">Table 1.2, “Bash configuration files for non-login shells”</a>.
   </p><div class="table" id="tab-adm-shell-configs-nonloginshells" data-id-title="Bash configuration files for non-login shells"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 1.2: </span><span class="title-name">Bash configuration files for non-login shells </span></span><a title="Permalink" class="permalink" href="#tab-adm-shell-configs-nonloginshells">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="filename">/etc/bash.bashrc</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Do not modify this file, otherwise your modifications may be destroyed
         during your next update.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="filename">/etc/bash.bashrc.local</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Use this file to insert your system-wide modifications for Bash only
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <code class="filename">~/.bashrc</code>
        </p>
       </td><td>
        <p>
         Insert user specific configuration here
        </p>
       </td></tr></tbody></table></div></div><p>
    Additionally, Bash uses multiple files:
   </p><div class="table" id="id-1.3.3.2.3.3.10" data-id-title="Special files for Bash"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 1.3: </span><span class="title-name">Special files for Bash </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.2.3.3.10">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         File
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Description
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="filename">~/.bash_history</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Contains a list of all commands you have typed
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="filename">~/.bash_logout</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Executed when logging out
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <code class="filename">~/.alias</code>
        </p>
       </td><td>
        <p>
         User defined aliases of frequently used commands. See
         <code class="command">man 1 alias</code> for more details about defining
         aliases.
        </p>
       </td></tr></tbody></table></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.3.2.3.3.11"><span class="name">No-Login Shells</span><a title="Permalink" class="permalink" href="#id-1.3.3.2.3.3.11">#</a></h2></div><p>
    There are special shells that block users from logging into
    the system: <code class="systemitem">/bin/false</code> and
    <code class="systemitem">/sbin/nologin</code>. Both fail silently
    when the user attempts to log into the system. This was intended
    as a security measure for system users, though modern
    Linux operating systems have more effective tools for controlling system
    access, such as PAM and AppArmor.
   </p><p>
    The default on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is to assign <code class="systemitem">/bin/bash</code>
    to human users, and <code class="systemitem">/bin/false</code> or
    <code class="systemitem">/sbin/nologin</code> to system users.
    The <code class="systemitem">nobody</code>
    user has <code class="systemitem">/bin/bash</code> for historical reasons, as it is
    a user with minimum privileges that used to be the default for system users.
    However, whatever little bit of security gained by using
    <code class="systemitem">nobody</code> is lost when
    multiple system users use it. It should be possible to change it to
    <code class="systemitem">/sbin/nologin</code>; the fastest way to test it is change
    it and see if it breaks any services or applications.
   </p><p>
    Use the following command to list which shells are assigned to all users,
    system and human users, in <code class="filename">/etc/passwd</code>. The output
    varies according to the services and users on your system:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sort -t: -k 7 /etc/passwd | awk -F: '{print $1"\t" $7}' | column -t
tux               /bin/bash
nobody            /bin/bash
root              /bin/bash
avahi             /bin/false
chrony            /bin/false
dhcpd             /bin/false
dnsmasq           /bin/false
ftpsecure         /bin/false
lightdm           /bin/false
mysql             /bin/false
postfix           /bin/false
rtkit             /bin/false
sshd              /bin/false
tftp              /bin/false
unbound           /bin/false
bin               /sbin/nologin
daemon            /sbin/nologin
ftp               /sbin/nologin
lp                /sbin/nologin
mail              /sbin/nologin
man               /sbin/nologin
nscd              /sbin/nologin
polkitd           /sbin/nologin
pulse             /sbin/nologin
qemu              /sbin/nologin
radvd             /sbin/nologin
rpc               /sbin/nologin
statd             /sbin/nologin
svn               /sbin/nologin
systemd-coredump  /sbin/nologin
systemd-network   /sbin/nologin
systemd-timesync  /sbin/nologin
usbmux            /sbin/nologin
vnc               /sbin/nologin
wwwrun            /sbin/nologin
messagebus        /usr/bin/false
scard             /usr/sbin/nologin</pre></div></section><section class="sect2" id="sec-adm-dirstructure" data-id-title="The directory structure"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.1.2 </span><span class="title-name">The directory structure</span></span> <a title="Permalink" class="permalink" href="#sec-adm-dirstructure">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/fs_structure_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The following table provides a short overview of the most important
  higher-level directories that you find on a Linux system. Find more detailed
  information about the directories and important subdirectories in the
  following list.
 </p><div class="table" id="id-1.3.3.2.3.4.4" data-id-title="Overview of a standard directory tree"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 1.4: </span><span class="title-name">Overview of a standard directory tree </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.2.3.4.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/fs_structure_i.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="1"/><col class="2"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       Directory
      </p>
     </th><th style="border-bottom: 1px solid ; ">
      <p>
       Contents
      </p>
     </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Root directory—the starting point of the directory tree.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/bin</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Essential binary files, such as commands that are needed by both the
       system administrator and normal users. Usually also contains the shells,
       such as Bash.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/boot</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Static files of the boot loader.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/dev</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Files needed to access host-specific devices.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/etc</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Host-specific system configuration files.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/home</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Holds the home directories of all users who have accounts on the system.
       However, <code class="systemitem">root</code>'s home directory is not located in
       <code class="filename">/home</code> but in <code class="filename">/root</code>.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/lib</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Essential shared libraries and kernel modules.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/media</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Mount points for removable media.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/mnt</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Mount point for temporarily mounting a file system.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/opt</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Add-on application software packages.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/root</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Home directory for the superuser <code class="systemitem">root</code>.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/sbin</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Essential system binaries.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/srv</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Data for services provided by the system.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/tmp</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Temporary files.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/usr</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Secondary hierarchy with read-only data.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
      <p>
       <code class="filename">/var</code>
      </p>
     </td><td style="border-bottom: 1px solid ; ">
      <p>
       Variable data such as log files.
      </p>
     </td></tr><tr><td style="border-right: 1px solid ; ">
      <p>
       <code class="filename">/windows</code>
      </p>
     </td><td>
      <p>
       Only available if you have both Microsoft Windows* and Linux installed
       on your system. Contains the Windows data.
      </p>
     </td></tr></tbody></table></div></div><p>
  The following list provides more detailed information and gives some examples
  of which files and subdirectories can be found in the directories:
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.2.3.4.6.1"><span class="term"><code class="filename">/bin</code>
   </span></dt><dd><p>
     Contains the basic shell commands that may be used both by <code class="systemitem">root</code> and
     by other users. These commands include <code class="command">ls</code>,
     <code class="command">mkdir</code>, <code class="command">cp</code>, <code class="command">mv</code>,
     <code class="command">rm</code> and <code class="command">rmdir</code>.
     <code class="filename">/bin</code> also contains Bash, the default shell in
     <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
    </p></dd><dt id="id-1.3.3.2.3.4.6.2"><span class="term"><code class="filename">/boot</code>
   </span></dt><dd><p>
     Contains data required for booting, such as the boot loader, the kernel,
     and other data that is used before the kernel begins executing user-mode
     programs.
    </p></dd><dt id="id-1.3.3.2.3.4.6.3"><span class="term"><code class="filename">/dev</code>
   </span></dt><dd><p>
     Holds device files that represent hardware components.
    </p></dd><dt id="id-1.3.3.2.3.4.6.4"><span class="term"><code class="filename">/etc</code>
   </span></dt><dd><p>
     Contains local configuration files that control the operation of programs
     like the X Window System. The <code class="filename">/etc/init.d</code>
     subdirectory contains LSB init scripts that can be executed during the
     boot process.
    </p></dd><dt id="id-1.3.3.2.3.4.6.5"><span class="term"><code class="filename">/home/<em class="replaceable">USERNAME</em></code>
   </span></dt><dd><p>
     Holds the private data of every user who has an account on the system. The
     files located here can only be modified by their owner or by the system
     administrator. By default, your e-mail directory and personal desktop
     configuration are located here in the form of hidden files and
     directories, such as <code class="filename">.gconf/</code> and
     <code class="filename">.config</code>.
    </p><div id="id-1.3.3.2.3.4.6.5.2.2" data-id-title="Home directory in a network environment" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Home directory in a network environment</div><p>
      If you are working in a network environment, your home directory may be
      mapped to a directory in the file system other than
      <code class="filename">/home</code>.
     </p></div></dd><dt id="id-1.3.3.2.3.4.6.6"><span class="term"><code class="filename">/lib</code>
   </span></dt><dd><p>
     Contains the essential shared libraries needed to boot the system and to
     run the commands in the root file system. The Windows equivalent for
     shared libraries are DLL files.
    </p></dd><dt id="id-1.3.3.2.3.4.6.7"><span class="term"><code class="filename">/media</code>
   </span></dt><dd><p>
     Contains mount points for removable media, such as CD-ROMs, flash disks,
     and digital cameras (if they use USB). <code class="filename">/media</code>
     generally holds any type of drive except the hard disk of your system.
     When your removable medium has been inserted or connected to the system
     and has been mounted, you can access it from here.
     
    </p></dd><dt id="id-1.3.3.2.3.4.6.8"><span class="term"><code class="filename">/mnt</code>
   </span></dt><dd><p>
     This directory provides a mount point for a temporarily mounted file
     system. <code class="systemitem">root</code> may mount file systems here.
    </p></dd><dt id="id-1.3.3.2.3.4.6.9"><span class="term"><code class="filename">/opt</code>
   </span></dt><dd><p>
     Reserved for the installation of third-party software. Optional software
     and larger add-on program packages can be found here.
    </p></dd><dt id="id-1.3.3.2.3.4.6.10"><span class="term"><code class="filename">/root</code>
   </span></dt><dd><p>
     Home directory for the <code class="systemitem">root</code> user. The personal data of <code class="systemitem">root</code> is
     located here.
    </p></dd><dt id="id-1.3.3.2.3.4.6.11"><span class="term"><code class="filename">/run</code>
   </span></dt><dd><p>
     A tmpfs directory used by <code class="systemitem">systemd</code> and various
     components. <code class="filename">/var/run</code> is a symbolic link to
     <code class="filename">/run</code>.
    </p></dd><dt id="id-1.3.3.2.3.4.6.12"><span class="term"><code class="filename">/sbin</code>
   </span></dt><dd><p>
     As the <code class="literal">s</code> indicates, this directory holds utilities for
     the superuser. <code class="filename">/sbin</code> contains the binaries essential
     for booting, restoring and recovering the system in addition to the
     binaries in <code class="filename">/bin</code>.
    </p></dd><dt id="id-1.3.3.2.3.4.6.13"><span class="term"><code class="filename">/srv</code>
   </span></dt><dd><p>
     Holds data for services provided by the system, such as FTP and HTTP.
    </p></dd><dt id="id-1.3.3.2.3.4.6.14"><span class="term"><code class="filename">/tmp</code>
   </span></dt><dd><p>
     This directory is used by programs that require temporary storage of
     files.
    </p><div id="id-1.3.3.2.3.4.6.14.2.2" data-id-title="Cleaning up /tmp at boot time" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Cleaning up <code class="filename">/tmp</code> at boot time</div><p>
      Data stored in <code class="filename">/tmp</code> is not guaranteed to survive a
      system reboot. It depends, for example, on settings made in
      <code class="filename">/etc/tmpfiles.d/tmp.conf</code>.
     </p></div></dd><dt id="id-1.3.3.2.3.4.6.15"><span class="term"><code class="filename">/usr</code>
   </span></dt><dd><p>
     <code class="literal">/usr</code> has nothing to do with users, but is the acronym
     for Unix system resources. The data in <code class="filename">/usr</code> is
     static, read-only data that can be shared among various hosts compliant
     with the <code class="literal">Filesystem Hierarchy Standard</code> (FHS). This
     directory contains all application programs including the graphical
     desktops such as GNOME and establishes a secondary hierarchy in the file
     system. <code class="filename">/usr</code> holds several subdirectories, such as
     <code class="filename">/usr/bin</code>, <code class="filename">/usr/sbin</code>,
     <code class="filename">/usr/local</code>, and <code class="filename">/usr/share/doc</code>.
    </p></dd><dt id="id-1.3.3.2.3.4.6.16"><span class="term"><code class="filename">/usr/bin</code>
   </span></dt><dd><p>
     Contains generally accessible programs.
    </p></dd><dt id="id-1.3.3.2.3.4.6.17"><span class="term"><code class="filename">/usr/sbin</code>
   </span></dt><dd><p>
     Contains programs reserved for the system administrator, such as repair
     functions.
    </p></dd><dt id="id-1.3.3.2.3.4.6.18"><span class="term"><code class="filename">/usr/local</code>
   </span></dt><dd><p>
     In this directory the system administrator can install local,
     distribution-independent extensions.
    </p></dd><dt id="id-1.3.3.2.3.4.6.19"><span class="term"><code class="filename">/usr/share/doc</code>
   </span></dt><dd><p>
     Holds various documentation files and the release notes for your system.
     In the <code class="filename">manual</code> subdirectory find an online version of
     this manual. If more than one language is installed, this directory may
     contain versions of the manuals for different languages.
    </p><p>
     Under <code class="filename">packages</code> find the documentation included in the
     software packages installed on your system. For every package, a
     subdirectory
     <code class="filename">/usr/share/doc/packages/<em class="replaceable">PACKAGENAME</em></code>
     is created that often holds README files for the package and sometimes
     examples, configuration files or additional scripts.
    </p><p>
     If HOWTOs are installed on your system <code class="filename">/usr/share/doc</code>
     also holds the <code class="filename">howto</code> subdirectory in which to find
     additional documentation on many tasks related to the setup and operation
     of Linux software.
    </p></dd><dt id="id-1.3.3.2.3.4.6.20"><span class="term"><code class="filename">/var</code>
   </span></dt><dd><p>
     Whereas <code class="filename">/usr</code> holds static, read-only data,
     <code class="filename">/var</code> is for data which is written during system
     operation and thus is variable data, such as log files or spooling data.
     For an overview of the most important log files you can find under
     <code class="filename">/var/log/</code>, refer to
     <a class="xref" href="#tab-trouble-info" title="Log files">Table 48.1, “Log files”</a>.
    </p></dd></dl></div></section></section><section class="sect1" id="sec-adm-shellscripts" data-id-title="Writing shell scripts"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.2 </span><span class="title-name">Writing shell scripts</span></span> <a title="Permalink" class="permalink" href="#sec-adm-shellscripts">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Shell scripts provide a convenient way to perform a wide range of tasks: collecting
   data, searching for a word or phrase in a text and other useful things.
   The following example shows a small shell script that prints a text:
  </p><div class="example" id="id-1.3.3.2.4.3" data-id-title="A shell script printing a text"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 1.1: </span><span class="title-name">A shell script printing a text </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.2.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">#!/bin/sh <span class="callout" id="co-adm-shell-shebang">1</span>
# Output the following line: <span class="callout" id="co-adm-shell-comment">2</span>
echo "Hello World" <span class="callout" id="co-adm-shell-echo">3</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-adm-shell-shebang"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      The first line begins with the <span class="emphasis"><em>Shebang</em></span>
      characters (<code class="literal">#!</code>) which indicate
      that this file is a script. The interpreter, specified after the <span class="emphasis"><em>Shebang</em></span>, executes the script. In this case,
      the specified interpreter is <code class="command">/bin/sh</code>.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-adm-shell-comment"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      The second line is a comment beginning with the hash sign. We recommend
      that you comment difficult lines. With proper commenting, you can remember
      the purpose and function of the line. Also, other readers can better
      understand your script. Commenting is considered good practice in the
      development community.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-adm-shell-echo"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      The third line uses the built-in command <code class="command">echo</code> to print
      the corresponding text.
     </p></td></tr></table></div></div></div><p>
   Before you can run this script, there are a few prerequisites:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
     Every script should contain a Shebang line (as in the example above). If
     the line is missing, you need to call the interpreter manually.
    </p></li><li class="listitem"><p>
     You can save the script wherever you want. However, it is a good idea to
     save it in a directory where the shell can find it. The search path in a
     shell is determined by the environment variable <code class="envar">PATH</code>.
     A normal user does not have write access to
     <code class="filename">/usr/bin</code>. Therefore it is recommended to save your
     scripts in the users' directory <code class="filename">~/bin/</code>. The above
     example gets the name <code class="filename">hello.sh</code>.
    </p></li><li class="listitem"><p>
     The script needs executable permissions. Set the permissions with the
     following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>chmod +x ~/bin/hello.sh</pre></div></li></ol></div><p>
   If you have fulfilled all the above prerequisites, you can execute the
   script in the following ways:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="formalpara-title">As absolute path. </span>
      The script can be executed with an absolute path. In our case, it is
      <code class="command">~/bin/hello.sh</code>.
     </p></li><li class="listitem"><p><span class="formalpara-title">Everywhere. </span>
      If the <code class="envar">PATH</code> environment variable contains the directory
      where the script is located, you can execute the script with
      <code class="command">hello.sh</code>.
     </p></li></ol></div></section><section class="sect1" id="sec-adm-shell-redirect" data-id-title="Redirecting command events"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.3 </span><span class="title-name">Redirecting command events</span></span> <a title="Permalink" class="permalink" href="#sec-adm-shell-redirect">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Each command can use three channels, either for input or output:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="formalpara-title">Standard output. </span>
      This is the default output channel. Whenever a command prints something,
      it uses the standard output channel.
     </p></li><li class="listitem"><p><span class="formalpara-title">Standard input. </span>
      If a command needs input from users or other commands, it uses this
      channel.
     </p></li><li class="listitem"><p><span class="formalpara-title">Standard error. </span>
      Commands use this channel for error reporting.
     </p></li></ul></div><p>
   To redirect these channels, there are the following possibilities:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.2.5.5.1"><span class="term"><code class="literal">Command &gt; File</code>
    </span></dt><dd><p>
      Saves the output of the command into a file, the existing file is deleted.
      For example, the <code class="command">ls</code> command writes its output into the
      file <code class="filename">listing.txt</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ls &gt; listing.txt</pre></div></dd><dt id="id-1.3.3.2.5.5.2"><span class="term"><code class="literal">Command &gt;&gt; File</code>
    </span></dt><dd><p>
      Appends the output of the command to a file. For example, the
      <code class="command">ls</code> command appends its output to the file
      <code class="filename">listing.txt</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ls &gt;&gt; listing.txt</pre></div></dd><dt id="id-1.3.3.2.5.5.3"><span class="term"><code class="literal">Command &lt; File</code>
    </span></dt><dd><p>
      Reads the file as input for the given command. For example, the
      <code class="command">read</code> command reads in the content of the file into the
      variable:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>read a &lt; foo</pre></div></dd><dt id="id-1.3.3.2.5.5.4"><span class="term"><code class="literal">Command1 | Command2</code>
    </span></dt><dd><p>
      Redirects the output of the left command as input for the right command.
      For example, the <code class="command">cat</code> command outputs the content of
      the <code class="filename">/proc/cpuinfo</code> file. This output is used by
      <code class="command">grep</code> to filter only those lines which contain
      <code class="literal">cpu</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>cat /proc/cpuinfo | grep cpu</pre></div></dd></dl></div><p>
   Every channel has a <span class="emphasis"><em>file descriptor</em></span>: 0 (zero) for
   standard input, 1 for standard output and 2 for standard error. It is
   allowed to insert this file descriptor before a <code class="literal">&lt;</code> or
   <code class="literal">&gt;</code> character. For example, the following line searches
   for a file starting with <code class="filename">foo</code>, but suppresses its errors
   by redirecting it to <code class="filename">/dev/null</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>find / -name "foo*" 2&gt;/dev/null</pre></div></section><section class="sect1" id="sec-adm-alias" data-id-title="Using aliases"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.4 </span><span class="title-name">Using aliases</span></span> <a title="Permalink" class="permalink" href="#sec-adm-alias">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   An alias is a shortcut definition of one or more commands. The syntax for an
   alias is:
  </p><div class="verbatim-wrap"><pre class="screen">alias <em class="replaceable">NAME</em>=<em class="replaceable">DEFINITION</em></pre></div><p>
   For example, the following line defines an alias <code class="command">lt</code> that
   outputs a long listing (option <code class="option">-l</code>), sorts it by
   modification time (<code class="option">-t</code>), and prints it in reverse sorted order (<code class="option">-r</code>):
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>alias lt='ls -ltr'</pre></div><p>
   To view all alias definitions, use <code class="command">alias</code>. Remove your
   alias with <code class="command">unalias</code> and the corresponding alias name.
  </p></section><section class="sect1" id="sec-adm-variables" data-id-title="Using variables in Bash"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.5 </span><span class="title-name">Using variables in Bash</span></span> <a title="Permalink" class="permalink" href="#sec-adm-variables">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A shell variable can be global or local. Global variables, or environment
   variables, can be accessed in all shells. In contrast, local variables are
   visible in the current shell only.
  </p><p>
   To view all environment variables, use the <code class="command">printenv</code>
   command. If you need to know the value of a variable, insert the name of
   your variable as an argument:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>printenv PATH</pre></div><p>
   A variable, be it global or local, can also be viewed with
   <code class="command">echo</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>echo $PATH</pre></div><p>
   To set a local variable, use a variable name followed by the equal sign,
   followed by the value:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>PROJECT="SLED"</pre></div><p>
   Do not insert spaces around the equal sign, otherwise you get an error. To
   set an environment variable, use <code class="command">export</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>export NAME="tux"</pre></div><p>
   To remove a variable, use <code class="command">unset</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>unset NAME</pre></div><p>
   The following table contains common environment variables that you can use in
   you shell scripts:
  </p><div class="table" id="tab-adm-envars" data-id-title="Useful environment variables"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 1.5: </span><span class="title-name">Useful environment variables </span></span><a title="Permalink" class="permalink" href="#tab-adm-envars">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="envar">HOME</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        the home directory of the current user
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="envar">HOST</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        the current host name
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="envar">LANG</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        when a tool is localized, it uses the language from this environment
        variable. English can also be set to <code class="literal">C</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="envar">PATH</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        the search path of the shell, a list of directories separated by colon
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="envar">PS1</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        specifies the normal prompt printed before each command
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="envar">PS2</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        specifies the secondary prompt printed when you execute a multi-line
        command
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="envar">PWD</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        current working directory
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        <code class="envar">USER</code>
       </p>
      </td><td>
       <p>
        the current user
       </p>
      </td></tr></tbody></table></div></div><section class="sect2" id="sec-adm-variables-argument" data-id-title="Using argument variables"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.5.1 </span><span class="title-name">Using argument variables</span></span> <a title="Permalink" class="permalink" href="#sec-adm-variables-argument">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    For example, if you have the script <code class="command">foo.sh</code> you can
    execute it like this:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>foo.sh "Tux Penguin" 2000</pre></div><p>
    To access all the arguments which are passed to your script, you need
    positional parameters. These are <code class="envar">$1</code> for the first argument,
    <code class="envar">$2</code> for the second, and so on. You can have up to nine
    parameters. To get the script name, use <code class="envar">$0</code>.
   </p><p>
    The following script <code class="command">foo.sh</code> prints all arguments from 1
    to 4:
   </p><div class="verbatim-wrap"><pre class="screen">#!/bin/sh
echo \"$1\" \"$2\" \"$3\" \"$4\"</pre></div><p>
    If you execute this script with the above arguments, you get:
   </p><div class="verbatim-wrap"><pre class="screen">"Tux Penguin" "2000" "" ""</pre></div></section><section class="sect2" id="sec-adm-shell-varsubst" data-id-title="Using variable substitution"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.5.2 </span><span class="title-name">Using variable substitution</span></span> <a title="Permalink" class="permalink" href="#sec-adm-shell-varsubst">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Variable substitutions apply a pattern to the content of a variable either
    from the left or right side. The following list contains the possible
    syntax forms:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.2.7.16.3.1"><span class="term"><code class="literal">${VAR#pattern}</code>
     </span></dt><dd><p>
       removes the shortest possible match from the left:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>file=/home/tux/book/book.tar.bz2
<code class="prompt user">&gt; </code>echo ${file#*/}
home/tux/book/book.tar.bz2</pre></div></dd><dt id="id-1.3.3.2.7.16.3.2"><span class="term"><code class="literal">${VAR##pattern}</code>
     </span></dt><dd><p>
       removes the longest possible match from the left:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>file=/home/tux/book/book.tar.bz2
<code class="prompt user">&gt; </code>echo ${file##*/}
book.tar.bz2</pre></div></dd><dt id="id-1.3.3.2.7.16.3.3"><span class="term"><code class="literal">${VAR%pattern}</code>
     </span></dt><dd><p>
       removes the shortest possible match from the right:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>file=/home/tux/book/book.tar.bz2
<code class="prompt user">&gt; </code>echo ${file%.*}
/home/tux/book/book.tar</pre></div></dd><dt id="id-1.3.3.2.7.16.3.4"><span class="term"><code class="literal">${VAR%%pattern}</code>
     </span></dt><dd><p>
       removes the longest possible match from the right:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>file=/home/tux/book/book.tar.bz2
<code class="prompt user">&gt; </code>echo ${file%%.*}
/home/tux/book/book</pre></div></dd><dt id="id-1.3.3.2.7.16.3.5"><span class="term"><code class="literal">${VAR/pattern_1/pattern_2}</code>
     </span></dt><dd><p>
       substitutes the content of <em class="replaceable">VAR</em> from the
       <em class="replaceable">PATTERN_1</em> with
       <em class="replaceable">PATTERN_2</em>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>file=/home/tux/book/book.tar.bz2
<code class="prompt user">&gt; </code>echo ${file/tux/wilber}
/home/wilber/book/book.tar.bz2</pre></div></dd></dl></div></section></section><section class="sect1" id="sec-adm-shell-grouping" data-id-title="Grouping and combining commands"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.6 </span><span class="title-name">Grouping and combining commands</span></span> <a title="Permalink" class="permalink" href="#sec-adm-shell-grouping">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Shells allow you to concatenate and group commands for conditional
   execution. Each command returns an exit code which determines the success or
   failure of its operation. If it is 0 (zero) the command was successful,
   everything else marks an error which is specific to the command.
  </p><p>
   The following list shows, how commands can be grouped:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.2.8.4.1"><span class="term"><code class="literal">Command1 ; Command2</code>
    </span></dt><dd><p>
      executes the commands in sequential order. The exit code is not checked.
      The following line displays the content of the file with
      <code class="command">cat</code> and then prints its file properties with
      <code class="command">ls</code> regardless of their exit codes:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>cat filelist.txt ; ls -l filelist.txt</pre></div></dd><dt id="id-1.3.3.2.8.4.2"><span class="term"><code class="literal">Command1 &amp;&amp; Command2</code>
    </span></dt><dd><p>
      runs the right command, if the left command was successful (logical AND).
      The following line displays the content of the file and prints its file
      properties only, when the previous command was successful (compare it
      with the previous entry in this list):
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>cat filelist.txt &amp;&amp; ls -l filelist.txt</pre></div></dd><dt id="id-1.3.3.2.8.4.3"><span class="term"><code class="literal">Command1 || Command2</code>
    </span></dt><dd><p>
      runs the right command, when the left command has failed (logical OR).
      The following line creates only a directory in
      <code class="filename">/home/wilber/bar</code> when the creation of the directory
      in <code class="filename">/home/tux/foo</code> has failed:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>mkdir /home/tux/foo || mkdir /home/wilber/bar</pre></div></dd><dt id="id-1.3.3.2.8.4.4"><span class="term"><code class="literal">funcname(){ ... }</code>
    </span></dt><dd><p>
      creates a shell function. You can use the positional parameters to access
      its arguments. The following line defines the function
      <code class="literal">hello</code> to print a short message:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>hello() { echo "Hello $1"; }</pre></div><p>
      You can call this function like this:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>hello Tux</pre></div><p>
      which prints:
     </p><div class="verbatim-wrap"><pre class="screen">Hello Tux</pre></div></dd></dl></div></section><section class="sect1" id="sec-adm-shell-commonconstructs" data-id-title="Working with common flow constructs"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.7 </span><span class="title-name">Working with common flow constructs</span></span> <a title="Permalink" class="permalink" href="#sec-adm-shell-commonconstructs">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To control the flow of your script, a shell has <code class="command">while</code>,
   <code class="command">if</code>, <code class="command">for</code> and <code class="command">case</code>
   constructs.
  </p><section class="sect2" id="sec-adm-shell-if" data-id-title="The if control command"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.7.1 </span><span class="title-name">The if control command</span></span> <a title="Permalink" class="permalink" href="#sec-adm-shell-if">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="command">if</code> command is used to check expressions. For
    example, the following code tests whether the current user is Tux:
   </p><div class="verbatim-wrap"><pre class="screen">if test $USER = "tux"; then
  echo "Hello Tux."
else
  echo "You are not Tux."
fi</pre></div><p>
    The test expression can be as complex or simple as possible. The following
    expression checks if the file <code class="filename">foo.txt</code> exists:
   </p><div class="verbatim-wrap"><pre class="screen">if test -e /tmp/foo.txt ; then
  echo "Found foo.txt"
fi</pre></div><p>
    The test expression can also be abbreviated in square brackets:
   </p><div class="verbatim-wrap"><pre class="screen">if [ -e /tmp/foo.txt ] ; then
  echo "Found foo.txt"
fi</pre></div><p>
    Find more useful expressions at
    <a class="link" href="https://bash.cyberciti.biz/guide/If..else..fi" target="_blank">https://bash.cyberciti.biz/guide/If..else..fi</a>.
   </p></section><section class="sect2" id="sec-adm-shell-for" data-id-title="Creating loops with the for command"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.7.2 </span><span class="title-name">Creating loops with the <code class="command">for</code> command</span></span> <a title="Permalink" class="permalink" href="#sec-adm-shell-for">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="command">for</code> loop allows you to execute commands to a list of
    entries. For example, the following code prints certain information about PNG
    files in the current directory:
   </p><div class="verbatim-wrap"><pre class="screen">for i in *.png; do
 ls -l $i
done</pre></div></section></section><section class="sect1" id="sec-adm-shell-moreinfo" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.8 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-adm-shell-moreinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_shell.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Important information about Bash is provided in the man pages <code class="command">man
   bash</code>. More about this topic can be found in the following list:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <a class="link" href="https://tldp.org/LDP/Bash-Beginners-Guide/html/index.html" target="_blank">https://tldp.org/LDP/Bash-Beginners-Guide/html/index.html</a>—Bash
     Guide for Beginners
    </p></li><li class="listitem"><p>
     <a class="link" href="https://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html" target="_blank">https://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html</a>—BASH
     Programming - Introduction HOW-TO
    </p></li><li class="listitem"><p>
     <a class="link" href="https://tldp.org/LDP/abs/html/index.html" target="_blank">https://tldp.org/LDP/abs/html/index.html</a>—Advanced
     Bash-Scripting Guide
    </p></li><li class="listitem"><p>
     <a class="link" href="https://www.grymoire.com/Unix/Sh.html" target="_blank">https://www.grymoire.com/Unix/Sh.html</a>—Sh - the
     Bourne Shell
    </p></li></ul></div></section></section><section class="chapter" id="cha-adm-sudo" data-id-title="sudo basics"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">2 </span><span class="title-name"><code class="command">sudo</code> basics</span></span> <a title="Permalink" class="permalink" href="#cha-adm-sudo">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Running certain commands requires root privileges. However, for security
    reasons and to avoid mistakes, it is not recommended to log in as
    <code class="systemitem">root</code>. A safer approach is to log in as a regular user, and then use
    <code class="command">sudo</code> to run commands with elevated privileges.
  </p><p>
    On <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, <code class="command">sudo</code> is configured to work similarly to
    <code class="command">su</code>. However, <code class="command">sudo</code> provides a flexible mechanism that
    allows users to run commands with privileges of any other user. This can be
    used to assign roles with specific privileges to certain users and groups.
    For example, it is possible to allow members of the group <code class="systemitem">users</code> to
    run a command with the privileges of user <code class="systemitem">wilber</code>. Access to the
    command can be further restricted by disallowing any command options. While
    su always requires the <code class="systemitem">root</code> password for authentication with PAM,
    <code class="command">sudo</code> can be configured to authenticate with your own credentials. This
    means that the users do not need to share the <code class="systemitem">root</code> password, which
    improves security.
  </p><section class="sect1" id="sec-adm-sudo-usage" data-id-title="Basic sudo usage"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.1 </span><span class="title-name">Basic <code class="command">sudo</code> usage</span></span> <a title="Permalink" class="permalink" href="#sec-adm-sudo-usage">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The following chapter provides an introduction to basic usage of <code class="command">sudo</code>.
    </p><section class="sect2" id="sec-adm-sudo-usage-cmd" data-id-title="Running a single command"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.1.1 </span><span class="title-name">Running a single command</span></span> <a title="Permalink" class="permalink" href="#sec-adm-sudo-usage-cmd">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        As a regular user, you can run any command as <code class="systemitem">root</code> by adding
        <code class="command">sudo</code> before it. This prompts you to provide the root password. If
        authenticated successfully, this runs the command as <code class="systemitem">root</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">id -un</code><span class="callout" id="co-sudo-usage-id">1</span>
tux
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">id -un</code>
root's password:<span class="callout" id="co-sudo-usage-pw">2</span>
root
<code class="prompt user">&gt; </code><code class="command">id -un</code>
tux<span class="callout" id="co-sudo-usage-after">3</span>
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">id -un</code>
<span class="callout" id="co-sudo-usage-nopw">4</span>
root</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-usage-id"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The <code class="command">id -un</code> command prints the login name of the
            current user.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-usage-pw"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The password is not shown during input, neither as clear text nor
            as masking characters.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-usage-after"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            Only commands that start with <code class="command">sudo</code> run with elevated privileges.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-usage-nopw"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The elevated privileges persist for a certain period of time, so
            you do not need to provide the <code class="systemitem">root</code> password again.
          </p></td></tr></table></div><div id="id-1.3.3.3.5.3.5" data-id-title="I/O redirection" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: I/O redirection</div><p>
          When using <code class="command">sudo</code>, I/O redirection does not work:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> echo s &gt; /proc/sysrq-trigger
bash: /proc/sysrq-trigger: Permission denied
<code class="prompt user">&gt; </code><code class="command">sudo</code> cat &lt; /proc/1/maps
bash: /proc/1/maps: Permission denied</pre></div><p>
          In the example above, only the <code class="command">echo</code> and
          <code class="command">cat</code> commands run with elevated privileges. The
          redirection is done by the user's shell with user privileges. To
          perform redirection with elevated privileges, either start a shell as
          in <a class="xref" href="#sec-sudo-shell" title="2.1.2. Starting a shell">Section 2.1.2, “Starting a shell”</a> or use the
          <code class="command">dd</code> utility:
        </p><div class="verbatim-wrap"><pre class="screen">echo s | sudo dd of=/proc/sysrq-trigger
sudo dd if=/proc/1/maps | cat</pre></div></div></section><section class="sect2" id="sec-sudo-shell" data-id-title="Starting a shell"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.1.2 </span><span class="title-name">Starting a shell</span></span> <a title="Permalink" class="permalink" href="#sec-sudo-shell">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Using <code class="command">sudo</code> every time to run a command with elevated privileges is
        not always practical. While you can use the <code class="command">sudo
        bash</code> command, it is recommended to use one of the built-in
        mechanisms to start a shell:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.3.5.4.3.1"><span class="term"><code class="literal">sudo -s (&lt;command&gt;)</code></span></dt><dd><p>
              Starts a shell specified by the <code class="envar">SHELL</code> environment
              variable or the target user's default shell. If a command is
              specified, it is passed to the shell (with the
              <code class="option">-c</code> option). Otherwise the shell runs in
              interactive mode.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux:~ &gt; </code>sudo -s
root's password:
<code class="prompt user">root:/home/tux # </code>exit
<code class="prompt user">tux:~ &gt; </code></pre></div></dd><dt id="id-1.3.3.3.5.4.3.2"><span class="term"><code class="literal">sudo -i (&lt;command&gt;)</code></span></dt><dd><p>
              Similar to <code class="option">-s</code>, but starts the shell as a login
              shell. This means that the shell's start-up files
              (<code class="filename">.profile</code> etc.) are processed, and the
              current working directory is set to the target user's home
              directory.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux:~ &gt; </code>sudo -i
root's password:
<code class="prompt user">root:~ # </code>exit
<code class="prompt user">tux:~ &gt; </code></pre></div></dd></dl></div><div id="id-1.3.3.3.5.4.4" data-id-title="Environment variables" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Environment variables</div><p>
          By default, <code class="command">sudo</code> does not propagate environment variables. This
          behavior can be changed using the <code class="literal">env_reset</code> option
          (see <a class="xref" href="#tab-adm-sudo-options" title="Useful flags and options">Useful flags and options</a>).
        </p></div></section></section><section class="sect1" id="sec-sudo-conf" data-id-title="Configuring sudo"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.2 </span><span class="title-name">Configuring <code class="command">sudo</code></span></span> <a title="Permalink" class="permalink" href="#sec-sudo-conf">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <code class="command">sudo</code> provides a wide range on configurable options.
    </p><div id="id-1.3.3.3.6.3" data-id-title="Locked yourself out of sudo" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Locked yourself out of sudo</div><p>
        If you accidentally locked yourself out of <code class="command">sudo</code>, use <code class="command">su
        -</code> and the <code class="systemitem">root</code> password to start a root shell. To fix
        the error, run <code class="command">visudo</code>.
      </p></div><div id="id-1.3.3.3.6.4" data-id-title="Example configurations are for demonstration purposes only" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Example configurations are for demonstration purposes only</div><p>
        The example rules outlined below are purely for demonstration purposes. 
        Use them to understand the general syntax of <code class="command">sudo</code> configuration files. 
        Do not use them in real-world setups, because they 
        do not reflect the complexity of these environments.
      </p></div><section class="sect2" id="sudo-creating-custom-configuration-bp" data-id-title="sudo configuration best practices"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.1 </span><span class="title-name"><code class="command">sudo</code> configuration best practices</span></span> <a title="Permalink" class="permalink" href="#sudo-creating-custom-configuration-bp">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Before you start, here are a few ground rules for maintaining <code class="command">sudo</code> configurations:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.3.6.5.3.1"><span class="term">Always use <code class="command">visudo</code> to edit <code class="command">sudo</code> configuration files</span></dt><dd><p>
              Any changes to the <code class="command">sudo</code> configuration should be done using the 
              <code class="command">visudo</code> command. <code class="command">visudo</code> is a 
              tailor-made tool that allows you to edit the <code class="command">sudo</code> configuration 
              files and runs basic syntax checks, making sure that the 
              configuration remains intact and functional. A faulty <code class="command">sudo</code> 
              configuration can result in a user being locked out of their own system.
            </p></dd><dt id="id-1.3.3.3.6.5.3.2"><span class="term">Always create custom configurations under <code class="filename">/etc/sudoers.d/</code></span></dt><dd><p>
              Custom configurations must reside under
              <code class="filename">/etc/sudoers.d/</code> to be pulled in by <code class="command">sudo</code>. 
              Settings in the custom configuration files take precedence over the 
              ones in the default configuration in <code class="filename">/etc/sudoers</code>. 
            </p></dd><dt id="id-1.3.3.3.6.5.3.3"><span class="term">Always mind the order in which configurations are read</span></dt><dd><p>
              To make sure the custom configurations are read in the correct order, prefix them with numbers.
              Use leading zeroes to establish the order in which the files are read. For example,
              <code class="filename">01_myfirstconfig</code> is parsed before
              <code class="filename">10_myotherconfig</code>. If a directive has been set 
              in a file that is read before another file that contains 
              conflicting information, the last-read directive is applied. 
            </p></dd><dt id="id-1.3.3.3.6.5.3.4"><span class="term">Always use descriptive file names</span></dt><dd><p>
              Use file names that hint at what the configuration file does. This 
              helps you keep track of what your <code class="command">sudo</code> setup is supposed to do.
            </p></dd></dl></div></section><section class="sect2" id="sudo-creating-custom-config-single-user" data-id-title="Create a user-specific configuration file"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.2 </span><span class="title-name">Create a user-specific configuration file</span></span> <a title="Permalink" class="permalink" href="#sudo-creating-custom-config-single-user">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Create a <code class="command">sudo</code> configuration file that allows a normal user (<code class="systemitem">tux</code>) 
        to use the <code class="command">useradd</code> command with their own password 
        instead of the <code class="systemitem">root</code> password. 
      </p><div class="example" id="ex-sudo-custom-config-user" data-id-title="Create a user-specific configuration file"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 2.1: </span><span class="title-name">Create a user-specific configuration file </span></span><a title="Permalink" class="permalink" href="#ex-sudo-custom-config-user">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
              As system administrator (<code class="systemitem">root</code>), create a custom configuration 
              file that holds the new user-specific directives by starting 
              <code class="command">visudo</code>. Use both numbering and a descriptive name:
            </p><div class="verbatim-wrap"><pre class="screen">  <code class="prompt root"># </code><code class="command">visudo -f /etc/sudoers.d/02_usermanagement</code></pre></div></li><li class="step"><p>
              Create a rule that allows <code class="systemitem">tux</code> to execute the 
              <code class="command">/usr/sbin/useradd</code> binary in the entire environment 
              that this <code class="command">sudo</code> configuration is applied to:
            </p><div class="verbatim-wrap"><pre class="screen">  tux<span class="callout" id="co-who">1</span> ALL<span class="callout" id="co-where">2</span> = /usr/sbin/useradd<span class="callout" id="co-what">3</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-who"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  Specify the user or group. List users by name or 
                  <code class="literal">#UID</code>, and groups by <code class="literal">%GROUPNAME</code>. 
                  Separate multiple items with commas. To negate entries, use <code class="literal">!</code>.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-where"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  Specify one or several (separated by commas) hosts. Use 
                  (fully qualified) host names or IP addresses. Add 
                  <code class="literal">ALL</code> to enforce this setting globally 
                  across all hosts. Use <code class="literal">!</code> for negations.
                </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-what"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                  Specify one or several executables (separated by commas). When 
                  specifying them, make sure to mind the following rules:
                </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.3.6.6.3.2.2.3.3.2.1"><span class="term"><code class="command">/usr/sbin/useradd</code></span></dt><dd><p>
                        Without any additional options added, this allows the 
                        execution of every possible <code class="command">useradd</code> command.
                      </p></dd><dt id="id-1.3.3.3.6.6.3.2.2.3.3.2.2"><span class="term"><code class="command">/usr/sbin/useradd -c</code></span></dt><dd><p>
                        If you explicitly specify an option, then that option is 
                        the only one that is allowed. Nothing else would be available
                        to the user you specified above.
                      </p></dd><dt id="id-1.3.3.3.6.6.3.2.2.3.3.2.3"><span class="term"><code class="command">/usr/sbin/useradd ""</code></span></dt><dd><p>
                        This would just let the user invoke a mere 
                        <code class="command">useradd</code> without any option at all. 
                      </p></dd></dl></div><p>
                  In the example above, you would want to either allow all
                  options and subcommands or limit them to a few for security 
                  reasons, but forbidding a user from specifying any option at all 
                  would be pointless in this context.
                </p></td></tr></table></div></li><li class="step"><p>
              To let the user use their own password instead of the <code class="systemitem">root</code> 
              password, add the following line:
            </p><div class="verbatim-wrap"><pre class="screen">Defaults:tux !targetpw</pre></div><p>
              When active, this flag requires the user to enter the password of
              the target user, that is, <code class="systemitem">root</code>. This flag is enabled by
              default on any <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> system. Negate it using
              <code class="literal">!</code> to require the user to just enter their own
              password instead of the <code class="systemitem">root</code> password.
            </p></li><li class="step"><p>
              Save the configuration, leave the editor and open a second shell to test 
              whether <code class="command">sudo</code> honors your new configuration.
            </p></li></ol></div></div></div></div></section><section class="sect2" id="sudo-creating-custom-config-group" data-id-title="Create custom configurations by grouping items"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.3 </span><span class="title-name">Create custom configurations by grouping items</span></span> <a title="Permalink" class="permalink" href="#sudo-creating-custom-config-group">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Modify the configuration from <a class="xref" href="#ex-sudo-custom-config-user" title="Create a user-specific configuration file">Example 2.1, “Create a user-specific configuration file”</a> 
        so that a group of named users can run the <code class="command">useradd</code> 
        command without the need for the <code class="systemitem">root</code> password. Also, add the 
        <code class="command">usermod</code> and <code class="command">userdel</code> to the list of 
        commands available to this group.
      </p><div class="example" id="ex-sudo-custom-config-group" data-id-title="Create custom configurations by grouping items"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 2.2: </span><span class="title-name">Create custom configurations by grouping items </span></span><a title="Permalink" class="permalink" href="#ex-sudo-custom-config-group">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
              To modify the example configuration, open it as system administrator with 
              <code class="command">visudo</code>:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">visudo /etc/sudoers.d/02_usermanagement</code></pre></div></li><li class="step"><p>
              Add more users to the rule in a comma-separated list:
            </p><div class="verbatim-wrap"><pre class="screen">tux, wilber ALL = /usr/sbin/useradd</pre></div></li><li class="step"><p>
              To allow the listed users to execute a list of commands, specify the 
              commands as a comma-separated list:
            </p><div class="verbatim-wrap"><pre class="screen">tux, wilber ALL = /usr/sbin/useradd, /usr/sbin/usermod, /usr/sbin/userdel</pre></div></li><li class="step"><p>
              To let the listed users use their own password instead of the <code class="systemitem">root</code> 
              password, add the following line:
            </p><div class="verbatim-wrap"><pre class="screen">Defaults:tux, wilber !targetpw</pre></div><p>
              When active, this flag requires the listed users to enter the
              password of the target user, that is, <code class="systemitem">root</code>. This flag is
              enabled by default on any <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> system. Negate it using
              <code class="literal">!</code> to require the listed users to just enter
              their own password instead of the <code class="systemitem">root</code> password.
            </p></li><li class="step"><p>
              Save the configuration, leave the editor and open a second shell to test 
              whether <code class="command">sudo</code> honors your new configuration.
            </p></li></ol></div></div></div></div></section><section class="sect2" id="sudo-creating-custom-config-aliases" data-id-title="Simplify configurations by applying aliases"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.4 </span><span class="title-name">Simplify configurations by applying aliases</span></span> <a title="Permalink" class="permalink" href="#sudo-creating-custom-config-aliases">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Use aliases to simplify your custom configuration from 
        <a class="xref" href="#ex-sudo-custom-config-group" title="Create custom configurations by grouping items">Example 2.2, “Create custom configurations by grouping items”</a> even further. Grouping items 
        helps to a certain extent, but using global aliases for users, 
        commands and hosts is the most efficient way to keep a clean and 
        lean <code class="command">sudo</code> configuration.
      </p><p>
        Using aliases and groups instead of lists is a much better way to address 
        changes in your setup. Should a user leave, just remove them from the 
        global <code class="literal">User_Alias</code> declaration in your alias declaration 
        file instead of scouring all the separate custom configuration files. 
        The same procedure applies for any other type of alias 
        (<code class="literal">Host_Alias</code>, <code class="literal">Cmnd_Alias</code> 
        and <code class="literal">Runas_Alias</code>).
      </p><div class="example" id="ex-sudo-custom-config-alias" data-id-title="Simplify configurations by applying aliases"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 2.3: </span><span class="title-name">Simplify configurations by applying aliases </span></span><a title="Permalink" class="permalink" href="#ex-sudo-custom-config-alias">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
              Create a new file to hold your global alias definitions:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">visudo /etc/sudoers.d/01_aliases</code></pre></div></li><li class="step"><p>
              Add the following line to create the <code class="literal">TEAMLEADERS</code> 
              alias:
            </p><div class="verbatim-wrap"><pre class="screen">User_Alias    TEAMLEADERS = tux, wilber</pre></div></li><li class="step"><p>
              Add the following line to create the <code class="literal">USERMANAGEMENT</code> alias:
            </p><div class="verbatim-wrap"><pre class="screen">Cmnd_Alias    USERMANAGEMENT = /usr/sbin/useradd, /usr/sbin/usermod, /usr/sbin/userdel</pre></div></li><li class="step"><p>
              Save your changes and exit <code class="command">visudo</code>.
            </p></li><li class="step"><p>
              As system administrator, start <code class="command">visudo</code> to edit the 
              example configuration file:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">visudo -f /etc/sudoers.d/02_usermanagement</code></pre></div></li><li class="step"><p>
              Delete the previous rule and replace it with the following rule that 
              uses the aliases you have just defined above:
            </p><div class="verbatim-wrap"><pre class="screen">TEAMLEADERS ALL = USERMANAGEMENT</pre></div></li><li class="step"><p>
              To let all the users defined by <code class="literal">User_Alias</code> use 
              their own password instead of the <code class="systemitem">root</code> password, add
              the following line:
            </p><div class="verbatim-wrap"><pre class="screen">Defaults:TEAMLEADERS !targetpw</pre></div></li><li class="step"><p>
              Save the configuration, leave the editor and open a second shell to test 
              whether <code class="command">sudo</code> honors your new configuration.
            </p></li></ol></div></div></div></div></section><section class="sect2" id="sec-sudo-conf-syntax" data-id-title="Basic sudoers configuration syntax"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.5 </span><span class="title-name">Basic sudoers configuration syntax</span></span> <a title="Permalink" class="permalink" href="#sec-sudo-conf-syntax">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The sudoers configuration files contain two types of options: strings
        and flags. While strings can contain any value, flags can be turned
        either ON or OFF. The most important syntax constructs for sudoers
        configuration files are as follows:
      </p><div class="verbatim-wrap"><pre class="screen"># Everything on a line after # is ignored <span class="callout" id="co-sudo-syntax-comment">1</span>
Defaults !insults # Disable the insults flag <span class="callout" id="co-sudo-syntax-flag">2</span>
Defaults env_keep += "DISPLAY HOME" # Add DISPLAY and HOME to env_keep
tux ALL = NOPASSWD: /usr/bin/frobnicate, PASSWD: /usr/bin/journalctl <span class="callout" id="co-sudo-syntax-rule">3</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-syntax-comment"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            There are two exceptions: <code class="literal">#include</code> and
            <code class="literal">#includedir</code> are regular commands.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-syntax-flag"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            Remove the <code class="literal">!</code> character to set the desired flag
            to ON.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-sudo-syntax-rule"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            See <a class="xref" href="#sec-sudo-conf-rule" title="2.2.6. Basic sudoers rules">Section 2.2.6, “Basic sudoers rules”</a>.
          </p></td></tr></table></div><div class="variablelist" id="tab-adm-sudo-options" data-id-title="Useful flags and options"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Useful flags and options </span></span><a title="Permalink" class="permalink" href="#tab-adm-sudo-options">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.3.3.6.9.5.2"><span class="term"><code class="literal">targetpw</code></span></dt><dd><p>
              This flag controls whether the invoking user is required to enter
              the password of the target user (ON) (for example <code class="systemitem">root</code>) or
              the invoking user (OFF).
            </p><div class="verbatim-wrap"><pre class="screen">Defaults targetpw # Turn targetpw flag ON</pre></div></dd><dt id="id-1.3.3.3.6.9.5.3"><span class="term"><code class="literal">rootpw</code></span></dt><dd><p>
              If set, <code class="command">sudo</code> prompts for the <code class="systemitem">root</code> password. The default
              is OFF.
            </p><div class="verbatim-wrap"><pre class="screen">Defaults !rootpw # Turn rootpw flag OFF</pre></div></dd><dt id="id-1.3.3.3.6.9.5.4"><span class="term"><code class="literal">env_reset</code></span></dt><dd><p>
              If set, <code class="command">sudo</code> constructs a minimal environment with
              <code class="envar">TERM</code>, <code class="envar">PATH</code>, <code class="envar">HOME</code>,
              <code class="envar">MAIL</code>, <code class="envar">SHELL</code>,
              <code class="envar">LOGNAME</code>, <code class="envar">USER</code>,
              <code class="envar">USERNAME</code>, and <code class="envar">SUDO_*</code>. Additionally,
              variables listed in <code class="literal">env_keep</code> are imported from
              the calling environment. The default is ON.
            </p><div class="verbatim-wrap"><pre class="screen">Defaults env_reset # Turn env_reset flag ON</pre></div></dd><dt id="id-1.3.3.3.6.9.5.5"><span class="term"><code class="literal">env_keep</code></span></dt><dd><p>
              List of environment variables to keep when the
              <code class="literal">env_reset</code> flag is ON.
            </p><div class="verbatim-wrap"><pre class="screen"># Set env_keep to contain EDITOR and PROMPT
Defaults env_keep = "EDITOR PROMPT"
Defaults env_keep += "JRE_HOME" # Add JRE_HOME
Defaults env_keep -= "JRE_HOME" # Remove JRE_HOME</pre></div></dd><dt id="id-1.3.3.3.6.9.5.6"><span class="term"><code class="literal">env_delete</code></span></dt><dd><p>
              List of environment variables to remove when the
              <code class="literal">env_reset</code> flag is OFF.
            </p><div class="verbatim-wrap"><pre class="screen"># Set env_delete to contain EDITOR and PROMPT
Defaults env_delete = "EDITOR PROMPT"
Defaults env_delete += "JRE_HOME" # Add JRE_HOME
Defaults env_delete -= "JRE_HOME" # Remove JRE_HOME</pre></div></dd></dl></div><p>
        The <code class="literal">Defaults</code> token can also be used to create
        aliases for a collection of users, hosts, and commands. Furthermore, it
        is possible to apply an option only to a specific set of users.
      </p><p>
        For detailed information about the sudoers configuration files, consult <code class="command">man 5
        sudoers</code>.
      </p></section><section class="sect2" id="sec-sudo-conf-rule" data-id-title="Basic sudoers rules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2.6 </span><span class="title-name">Basic sudoers rules</span></span> <a title="Permalink" class="permalink" href="#sec-sudo-conf-rule">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Each rule follows the following scheme (<code class="literal">[]</code> marks
        optional parts):
      </p><div class="verbatim-wrap"><pre class="screen">#Who      Where         As whom      Tag                What
User_List Host_List = [(User_List)] [NOPASSWD:|PASSWD:] Cmnd_List</pre></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">sudoers rule syntax </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.3.6.10.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.3.3.6.10.4.2"><span class="term"><code class="literal">User_List</code></span></dt><dd><p>
              One or several (separated by comma) identifiers: either a user
              name, a group in the format <code class="literal">%GROUPNAME</code>, or a
              user ID in the format <code class="literal">#UID</code>. Negation can be
              specified with the <code class="literal">!</code> prefix.
            </p></dd><dt id="id-1.3.3.3.6.10.4.3"><span class="term"><code class="literal">Host_List</code></span></dt><dd><p>
              One or several (separated by comma) identifiers: either a (fully
              qualified) host name or an IP address. Negation can be specified
              with the <code class="literal">!</code> prefix. <code class="literal">ALL</code> is a
              common choice for <code class="literal">Host_List</code>.
            </p></dd><dt id="id-1.3.3.3.6.10.4.4"><span class="term"><code class="literal">NOPASSWD:|PASSWD:</code></span></dt><dd><p>
              The user is not prompted for a password when running commands
              matching <code class="literal">Cmd_List</code> after
              <code class="literal">NOPASSWD:</code>.
            </p><p>
              <code class="literal">PASSWD</code> is the default. It only needs to be
              specified when both <code class="literal">PASSWD</code> and
              <code class="literal">NOPASSWD</code> are on the same line:
            </p><div class="verbatim-wrap"><pre class="screen">tux ALL = PASSWD: /usr/bin/foo, NOPASSWD: /usr/bin/bar</pre></div></dd><dt id="id-1.3.3.3.6.10.4.5"><span class="term"><code class="literal">Cmnd_List</code></span></dt><dd><p>
              One or several (separated by comma) specifiers: a path to an
              executable, followed by an optional allowed argument.
            </p><div class="verbatim-wrap"><pre class="screen">/usr/bin/foo     # Anything allowed
/usr/bin/foo bar # Only "/usr/bin/foo bar" allowed
/usr/bin/foo ""  # No arguments allowed</pre></div></dd></dl></div><p>
        <code class="literal">ALL</code> can be used as <code class="literal">User_List</code>,
        <code class="literal">Host_List</code>, and <code class="literal">Cmnd_List</code>.
      </p><p>
        A rule that allows <code class="systemitem">tux</code> to run all commands as root without
        entering a password:
      </p><div class="verbatim-wrap"><pre class="screen">tux ALL = NOPASSWD: ALL</pre></div><p>
        A rule that allows <code class="systemitem">tux</code> to run <code class="command">systemctl restart
        apache2</code>:
      </p><div class="verbatim-wrap"><pre class="screen">tux ALL = /usr/bin/systemctl restart apache2</pre></div><p>
        A rule that allows <code class="systemitem">tux</code> to run <code class="command">wall</code> as
        <code class="systemitem">admin</code> with no arguments:
      </p><div class="verbatim-wrap"><pre class="screen">tux ALL = (admin) /usr/bin/wall ""</pre></div><div id="id-1.3.3.3.6.10.12" data-id-title="Unsafe rules" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Unsafe rules</div><p>
          <span class="emphasis"><em>Do not</em></span> use rules like <code class="literal">ALL ALL =
          ALL</code> without <code class="literal">Defaults targetpw</code>. Otherwise
          anyone can run commands as <code class="systemitem">root</code>.
        </p></div><div id="id-1.3.3.3.6.10.13" data-id-title="Winbind and sudo" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Winbind and sudo</div><p>
          When specifying the group name in the <code class="filename">sudoers</code>
          file, make sure that you use the NetBIOS domain name instead of the
          realm, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><em class="replaceable">%DOMAIN</em>\\<em class="replaceable">GROUP_NAME</em> ALL = (ALL) ALL</pre></div><p>
          Keep in mind that when using winbindd, the format also depends on the
          <code class="option">winbind separator</code> option in the
          <code class="filename">smb.conf</code> file. By default, it is
          <code class="literal">\</code>. If it is changed, for example, to
          <code class="literal">+</code>, then the account format in the
          <code class="filename">sudoers</code> file must be
          <code class="literal">DOMAIN+GROUP_NAME</code>.
        </p></div></section></section><section class="sect1" id="sec-sudo-usecases-xorg" data-id-title="Using sudo with X.Org applications"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.3 </span><span class="title-name">Using <code class="command">sudo</code> with X.Org applications</span></span> <a title="Permalink" class="permalink" href="#sec-sudo-usecases-xorg">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Starting graphical applications with <code class="command">sudo</code> normally results in the
      following error:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> xterm
xterm: Xt error: Can't open display: %s
xterm: DISPLAY is not set</pre></div><p>
      A simple workaround is to use xhost to temporarily allow the root user
      to access the local user's X session. This is done using the following
      command:
    </p><div class="verbatim-wrap"><pre class="screen">xhost si:localuser:root</pre></div><p>
      The command below removes the granted access:
    </p><div class="verbatim-wrap"><pre class="screen">xhost -si:localuser:root</pre></div><div id="id-1.3.3.3.7.8" data-id-title="Potential security issue" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Potential security issue</div><p>
        Running graphical applications with root privileges has security
        implications. It is recommended to enable root access for a graphical
        application only as an exception. It is also recommended to revoke
        the granted root access as soon as the graphical application is
        closed.
      </p></div></section><section class="sect1" id="sec-adm-sudo-moreinfo" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2.4 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-adm-sudo-moreinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_sudo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The <code class="command">sudo --help</code> command offers a brief overview of the
      available command line options, while the <code class="command">man sudoers</code>
      command provides detailed information about <code class="filename">sudoers</code>
      and its configuration.
    </p></section></section><section class="chapter" id="cha-yast-gui" data-id-title="Using YaST"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Using YaST</span></span> <a title="Permalink" class="permalink" href="#cha-yast-gui">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_gui.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  YaST is a <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> tool that provides a graphical interface for
  all essential installation and system configuration tasks. Whether you need
  to update packages, configure a printer, modify firewall settings, set up an
  FTP server, or partition a hard disk—you can do it using
  YaST. Written in Ruby, YaST features an extensible architecture that
  makes it possible to add new functionality via modules.
 </p><p>
  Additional information about YaST is available on the project's official
  Web site at <a class="link" href="https://yast.opensuse.org/" target="_blank">https://yast.opensuse.org/</a>.
 </p><section class="sect1" id="sec-yast2-gui" data-id-title="YaST interface overview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.1 </span><span class="title-name">YaST interface overview</span></span> <a title="Permalink" class="permalink" href="#sec-yast2-gui">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_gui.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   YaST has two graphical interfaces: one for use with graphical desktop
   environments like KDE and GNOME, and an ncurses-based pseudo-graphical
   interface for use on systems without an X server (see <a class="xref" href="#cha-yast-text" title="Chapter 4. YaST in text mode">Chapter 4, <em>YaST in text mode</em></a>).
  </p><p>
   In the graphical version of YaST, all modules in YaST are grouped by
   category, and the navigation sidebar allows you to quickly access modules in
   the desired category. The search field at the top makes it possible to find
   modules by their names. To find a specific module, enter its name into the
   search field, and you should see the modules that match the entered string
   as you type.
  </p><div id="id-1.3.3.4.5.4" data-id-title="List of installed YaST modules" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: List of installed YaST modules</div><p>
      The list of installed modules for the ncurses-based and GUI version of YaST
      may differ. Before starting any YaST module, verify that it is installed
      for the version of YaST that you are using.
    </p></div></section><section class="sect1" id="sec-yast-gui-key-combination" data-id-title="Useful key combinations"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.2 </span><span class="title-name">Useful key combinations</span></span> <a title="Permalink" class="permalink" href="#sec-yast-gui-key-combination">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_gui.xml" title="Edit source document"> </a></div></div></div></div></div><p>The graphical version of YaST supports keyboard
  shortcuts</p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.4.6.3.1"><span class="term">
     <span class="keycap">Print Screen</span>
    </span></dt><dd><p>
      Take and save a screenshot. It may not work on certain desktop environments.
     </p></dd><dt id="id-1.3.3.4.6.3.2"><span class="term">
     <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F4</span>
    </span></dt><dd><p>
      Enable and disable the color palette optimized for visually impaired users.
     </p></dd><dt id="id-1.3.3.4.6.3.3"><span class="term">
     <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F7</span>
    </span></dt><dd><p>
      Enable/disable logging of debug messages.
     </p></dd><dt id="id-1.3.3.4.6.3.4"><span class="term">
     <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F8</span>
    </span></dt><dd><p>
      Open a file dialog to save log files to a user-defined location.
     </p></dd><dt id="id-1.3.3.4.6.3.5"><span class="term">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">D</span>
    </span></dt><dd><p>
      Send a DebugEvent. YaST modules can react to this by executing special debugging actions.
      The result depends on the specific YaST module.
     </p></dd><dt id="id-1.3.3.4.6.3.6"><span class="term">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">M</span>
    </span></dt><dd><p>
      Start and stop macro recorder.
     </p></dd><dt id="id-1.3.3.4.6.3.7"><span class="term">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">P</span>
    </span></dt><dd><p>
      Replay macro.
     </p></dd><dt id="id-1.3.3.4.6.3.8"><span class="term">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">S</span>
    </span></dt><dd><p>
      Show stylesheet editor.
     </p></dd><dt id="id-1.3.3.4.6.3.9"><span class="term">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">T</span>
    </span></dt><dd><p>
      Dump widget tree to the log file.
     </p></dd><dt id="id-1.3.3.4.6.3.10"><span class="term">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">X</span>
    </span></dt><dd><p>
      Open a terminal window (xterm). Useful for installation process via VNC.
     </p></dd><dt id="id-1.3.3.4.6.3.11"><span class="term">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">Y</span>
    </span></dt><dd><p>
      Show widget tree browser.
     </p></dd></dl></div></section></section><section class="chapter" id="cha-yast-text" data-id-title="YaST in text mode"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">4 </span><span class="title-name">YaST in text mode</span></span> <a title="Permalink" class="permalink" href="#cha-yast-text">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The ncurses-based pseudo-graphical YaST interface is designed primarily to
  help system administrators to manage systems without an X
  server. The interface offers several advantages compared to the
  conventional GUI. You can navigate the ncurses interface using the keyboard,
  and there are keyboard shortcuts for practically all interface elements. The
  ncurses interface is light on resources, and runs fast even on modest
  hardware. You can run the ncurses-based version of YaST via an SSH
  connection, so you can administer remote systems. Keep in mind that
  the minimum supported size of the terminal emulator in which to run YaST is
  80x25 characters.
 </p><div class="figure" id="fig-yast2-ncurses"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_ncurses_main.png"><img src="images/yast2_ncurses_main.png" width="75%" alt="Main window of YaST in text mode" title="Main window of YaST in text mode"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 4.1: </span><span class="title-name">Main window of YaST in text mode </span></span><a title="Permalink" class="permalink" href="#fig-yast2-ncurses">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div><p>
  To launch the ncurses-based version of YaST, open the terminal and run the
  <code class="command">sudo yast2</code> command. Use the <span class="keycap">→|</span> or
  arrow keys to navigate between interface elements like menu
  items, fields and buttons. All menu items and buttons in YaST can be
  accessed using the appropriate function keys or keyboard shortcuts. For
  example, you can cancel the current operation by pressing
  <span class="keycap">F9</span>, while the <span class="keycap">F10</span> key can be used to accept
  the changes. Each menu item and button in YaST's ncurses-based interface
  has a highlighted letter in its label. This letter is part of the keyboard
  shortcut assigned to the interface element. For example, the letter
  <code class="literal">Q</code> is highlighted in the <span class="guimenu">Quit</span>
  button. This means that you can activate the button by pressing
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">Alt+Q</span>.
 </p><div id="id-1.3.3.5.6" data-id-title="Refreshing YaST dialogs" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Refreshing YaST dialogs</div><p>
   If a YaST dialog gets corrupted or distorted, for example, while resizing
   the window, press
   <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">L</span>
   to refresh and restore its contents.
  </p></div><section class="sect1" id="sec-yast-cli-navigate" data-id-title="Navigation in modules"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.1 </span><span class="title-name">Navigation in modules</span></span> <a title="Permalink" class="permalink" href="#sec-yast-cli-navigate">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The following description of the control elements in the YaST modules
   assumes that all function keys and <span class="keycap">Alt</span> key combinations
   work and are not assigned to different global functions. Read
   <a class="xref" href="#sec-yast-cli-restricted-keys" title="4.3. Restriction of key combinations">Section 4.3, “Restriction of key combinations”</a> for information about
   possible exceptions.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.7.3.1"><span class="term">Moving between buttons and selection lists</span></dt><dd><p>
      Use <span class="keycap">→|</span> to move between the buttons and frames
      containing selection lists. To navigate in the opposite direction, use
      <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">→|</span> or <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">→|</span>
      combinations.
     </p></dd><dt id="id-1.3.3.5.7.3.2"><span class="term">Navigating in selection lists</span></dt><dd><p>
      Use the arrow keys (<span class="keycap">↑</span> and <span class="keycap">↓</span>) to move through the individual elements in an active
      frame containing a selection list. If individual entries are longer than
      the frame's width, use <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">→</span> or <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">←</span> to scroll
      horizontally. If the arrow key causes the selection to move to another frame, use <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">E</span> or <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">A</span> instead.
     </p></dd><dt id="id-1.3.3.5.7.3.3"><span class="term">Working with buttons, radio buttons, and check boxes</span></dt><dd><p>
      To select items with empty square brackets (check boxes) or empty
      parentheses (radio buttons), press <span class="keycap">Space</span> or
      <span class="keycap">Enter</span>. Alternatively, radio buttons and check boxes
      can be selected directly with <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">highlighted_letter</span>.
      In this case, you do not need to confirm with <span class="keycap">Enter</span>.
      If you navigate to an item with <span class="keycap">→|</span>, press
      <span class="keycap">Enter</span> to execute the selected action or activate the
      respective menu item.
     </p></dd><dt id="id-1.3.3.5.7.3.4"><span class="term">Function keys</span></dt><dd><p>
      The function keys (from <span class="keycap">F1</span> to <span class="keycap">F12</span>)
      enable quick access to the specific buttons. Available function key
      combinations (<code class="literal">F<em class="replaceable">X</em></code>) are shown
      in the bottom line of the YaST screen. Which function keys are really
      mapped to which buttons depend on the active YaST module, because the
      different modules offer different buttons (<span class="guimenu">Details</span>,
      <span class="guimenu">Info</span>, <span class="guimenu">Add</span>,
      <span class="guimenu">Delete</span>, etc.). Use <span class="keycap">F10</span> for
      <span class="guimenu">Accept</span>, <span class="guimenu">OK</span>,
      <span class="guimenu">Next</span>, and <span class="guimenu">Finish</span>. Press
      <span class="keycap">F1</span> to access the YaST help.
     </p></dd><dt id="id-1.3.3.5.7.3.5"><span class="term">Using the navigation tree</span></dt><dd><p>
      Certain YaST modules use a navigation tree in the left part of the
      window to select configuration dialogs. Use the arrow keys (<span class="keycap">↑</span> and <span class="keycap">↓</span>) to navigate in the tree.
      Use <span class="keycap">Space</span> to open or close tree items. In the ncurses
      mode, <span class="keycap">Enter</span> must be pressed after a selection in the
      navigation tree to show the selected dialog. This is an intentional
      behavior to save time-consuming redraws when browsing through the
      navigation tree.
     </p></dd><dt id="id-1.3.3.5.7.3.6"><span class="term">Selecting software in the software installation module</span></dt><dd><p>
      Use the filters on the left side to list packages matching the specified
      string. Installed packages are marked with the letter
      <code class="literal">i</code>. To change the status of a package, press <span class="keycap">Space</span> or <span class="keycap">Enter</span>. Alternatively, use the
      <span class="guimenu">Actions</span> menu to select the needed status change
      (install, delete, update, taboo or lock).
     </p></dd></dl></div><div class="figure" id="fig-yast2-ncurses-inst"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_ncurses_inst.png"><img src="images/yast2_ncurses_inst.png" width="75%" alt="The software installation module" title="The software installation module"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 4.2: </span><span class="title-name">The software installation module </span></span><a title="Permalink" class="permalink" href="#fig-yast2-ncurses-inst">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></section><section class="sect1" id="sec-yast-cli-key-combination" data-id-title="Advanced key combinations"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.2 </span><span class="title-name">Advanced key combinations</span></span> <a title="Permalink" class="permalink" href="#sec-yast-cli-key-combination">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The ncurses-based version of YaST offers several advanced key combinations.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.8.3.1"><span class="term"><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F1</span>
    </span></dt><dd><p>
      List advanced hotkeys.
     </p></dd><dt id="id-1.3.3.5.8.3.2"><span class="term"><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F4</span>
    </span></dt><dd><p>
      Change color schema.
     </p></dd><dt id="id-1.3.3.5.8.3.3"><span class="term"><span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Q</span>
    </span></dt><dd><p>
      Quit the application.
     </p></dd><dt id="id-1.3.3.5.8.3.4"><span class="term"><span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">L</span>
    </span></dt><dd><p>
      Refresh screen.
     </p></dd><dt id="id-1.3.3.5.8.3.5"><span class="term"><span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">D</span><span class="keycap">F1</span>
    </span></dt><dd><p>
      List advanced hotkeys.
     </p></dd><dt id="id-1.3.3.5.8.3.6"><span class="term"><span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">D</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">D</span>
    </span></dt><dd><p>
      Dump dialog to the log file as a screenshot.
     </p></dd><dt id="id-1.3.3.5.8.3.7"><span class="term"><span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">D</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Y</span>
    </span></dt><dd><p>
      Open YDialogSpy to see the widget hierarchy.
     </p></dd></dl></div></section><section class="sect1" id="sec-yast-cli-restricted-keys" data-id-title="Restriction of key combinations"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.3 </span><span class="title-name">Restriction of key combinations</span></span> <a title="Permalink" class="permalink" href="#sec-yast-cli-restricted-keys">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If your window manager uses global <span class="keycap">Alt</span> combinations,
   the <span class="keycap">Alt</span> combinations in YaST may not work. Keys
   like <span class="keycap">Alt</span> or <span class="keycap">Shift</span> can also be
   occupied by the settings of the terminal.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.9.3.1"><span class="term">Using <span class="keycap">Alt</span> instead of <span class="keycap">Esc</span>
    </span></dt><dd><p>
      <span class="keycap">Alt</span> shortcuts can be executed with
      <span class="keycap">Esc</span> instead of <span class="keycap">Alt</span>. For
      example, <span class="keycap">Esc</span><span class="key-connector">–</span><span class="keycap">H</span> replaces
      <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">H</span>. (Press
      <span class="keycap">Esc</span>, <span class="emphasis"><em>then</em></span> press
      <span class="keycap">H</span>.)
     </p></dd><dt id="id-1.3.3.5.9.3.2"><span class="term"> Backward and forward navigation with <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">F</span> and <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">B</span>
    </span></dt><dd><p>
      If the <span class="keycap">Alt</span> and <span class="keycap">Shift</span>
      combinations are taken over by the window manager or the terminal, use the
      combinations <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">F</span> (forward) and <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">B</span> (backward)
      instead.
     </p></dd><dt id="id-1.3.3.5.9.3.3"><span class="term">Restriction of function keys</span></dt><dd><p>
      The function keys (<span class="keycap">F1</span> ... <span class="keycap">F12</span>) are also
      used for functions. Certain function keys may be taken over by the
      terminal and may not be available for YaST. However, the
      <span class="keycap">Alt</span> key combinations and function keys should always
      be fully available on a text-only console.
     </p></dd></dl></div></section><section class="sect1" id="sec-yast-cli-options" data-id-title="YaST command line options"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4.4 </span><span class="title-name">YaST command line options</span></span> <a title="Permalink" class="permalink" href="#sec-yast-cli-options">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Besides the text mode interface, YaST provides a command line
   interface. To get a list of YaST command line options, use the following
   command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast -h</pre></div><section class="sect2" id="sec-yast-cli-options-install" data-id-title="Installing packages from the command line"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.4.1 </span><span class="title-name">Installing packages from the command line</span></span> <a title="Permalink" class="permalink" href="#sec-yast-cli-options-install">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you know the package name, and the package is provided by an active
    installation repository, you can use the command line option
    <code class="option">-i</code> to install the package:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast <em class="replaceable">-i package_name</em></pre></div><p>
    or
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast --install <em class="replaceable">-i package_name</em></pre></div><p>
    <em class="replaceable">package_name</em> can be a single short package name,
    for example, <span class="package">gvim</span>, installed with dependency checking,
    or the full path to an RPM package, which is installed without dependency
    checking.
   </p><p>
    While YaST offers basic functionality for managing software from the
    command line, consider using Zypper for more advanced package management
    tasks. Find more information on using Zypper in <a class="xref" href="#sec-zypper" title="9.1. Using Zypper">Section 9.1, “Using Zypper”</a>.
   </p></section><section class="sect2" id="sec-yast-cli-options-modules" data-id-title="Working with individual modules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.4.2 </span><span class="title-name">Working with individual modules</span></span> <a title="Permalink" class="permalink" href="#sec-yast-cli-options-modules">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To save time, you can start individual YaST modules using the following
    command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast <em class="replaceable">module_name</em></pre></div><p>
    View a list of all modules available on your system with <code class="command">yast
    -l</code> or <code class="command">yast --list</code>.
   </p></section><section class="sect2" id="sec-yast-cli-options-module-params" data-id-title="Command line parameters of YaST modules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.4.3 </span><span class="title-name">Command line parameters of YaST modules</span></span> <a title="Permalink" class="permalink" href="#sec-yast-cli-options-module-params">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To use YaST functionality in scripts, YaST provides command line
    support for individual modules. However, not all modules have command line
    support. To display the available options of a module, use the following
    command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast <em class="replaceable">module_name</em> help</pre></div><p>
    If a module does not provide command line support, it is started in a text
    mode with the following message:
   </p><div class="verbatim-wrap"><pre class="screen">This YaST module does not support the command line interface.</pre></div><p>
    The following sections describe all YaST modules with command line
    support, along with a brief explanation of all their commands and
    available options.
   </p><section class="sect3" id="id-1.3.3.5.10.6.7" data-id-title="Common YaST module commands"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.1 </span><span class="title-name">Common YaST module commands</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.7">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     All YaST modules support the following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.7.3.1"><span class="term">help</span></dt><dd><p>
        Lists all the module's supported commands with their
        description:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast lan help</pre></div></dd><dt id="id-1.3.3.5.10.6.7.3.2"><span class="term">longhelp</span></dt><dd><p>
        Same as <code class="command">help</code>, but adds a detailed list of all
        command's options and their descriptions:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast lan longhelp</pre></div></dd><dt id="id-1.3.3.5.10.6.7.3.3"><span class="term">xmlhelp</span></dt><dd><p>
        Same as <code class="command">longhelp</code>, but the output is structured as
        an XML document and redirected to a file:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast lan xmlhelp xmlfile=/tmp/yast_lan.xml</pre></div></dd><dt id="id-1.3.3.5.10.6.7.3.4"><span class="term">interactive</span></dt><dd><p>
	Enters the <span class="emphasis"><em>interactive</em></span> mode. This lets you run the
	module's commands without prefixing them with <code class="command">sudo
	yast</code>. Use <code class="literal">exit</code> to leave the interactive
	mode.
       </p></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.8" data-id-title="yast add-on"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.2 </span><span class="title-name">yast add-on</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.8">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Adds a new add-on product from the specified path:
    </p><div class="verbatim-wrap"><pre class="screen"> <code class="prompt user">&gt; </code><code class="command">sudo</code> yast add-on http://server.name/directory/Lang-AddOn-CD1/</pre></div><p>
     You can use the following protocols to specify the source path: http://
     ftp:// nfs:// disk:// cd:// or dvd://.
    </p></section><section class="sect3" id="id-1.3.3.5.10.6.9" data-id-title="yast audit-laf"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.3 </span><span class="title-name">yast audit-laf</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.9">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Displays and configures the Linux Audit Framework. Refer to the <span class="intraxref">Book “Security and Hardening Guide”</span> for more details. <code class="command">yast audit-laf</code>
     accepts the following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.9.3.1"><span class="term">set</span></dt><dd><p>
        Sets an option:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast audit-laf set log_file=/tmp/audit.log</pre></div><p>
        For a complete list of options, run <code class="command">yast audit-laf set help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.9.3.2"><span class="term">show</span></dt><dd><p>
        Displays settings of an option:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast audit-laf show diskspace
space_left: 75
space_left_action: SYSLOG
admin_space_left: 50
admin_space_left_action: SUSPEND
action_mail_acct: root
disk_full_action: SUSPEND
disk_error_action: SUSPEND</pre></div><p>
        For a complete list of options, run <code class="command">yast audit-laf show
        help</code>.
       </p></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.10" data-id-title="yast dhcp-server"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.4 </span><span class="title-name">yast dhcp-server</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.10">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Manages the DHCP server and configures its settings. <code class="command">yast
     dhcp-server</code> accepts the following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.10.3.1"><span class="term">disable</span></dt><dd><p>
        Disables the DHCP server service.
       </p></dd><dt id="id-1.3.3.5.10.6.10.3.2"><span class="term">enable</span></dt><dd><p>
        Enables the DHCP server service.
       </p></dd><dt id="id-1.3.3.5.10.6.10.3.3"><span class="term">host</span></dt><dd><p>
        Configures settings for individual hosts.
       </p></dd><dt id="id-1.3.3.5.10.6.10.3.4"><span class="term">interface</span></dt><dd><p>
        Specifies to which network interface to listen to:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast dhcp-server interface current
Selected Interfaces: eth0
Other Interfaces: bond0, pbu, eth1</pre></div><p>
        For a complete list of options, run <code class="command">yast dhcp-server interface
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.10.3.5"><span class="term">options</span></dt><dd><p>
        Manages global DHCP options. For a complete list of options, run
        <code class="command">yast dhcp-server options help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.10.3.6"><span class="term">status</span></dt><dd><p>
        Prints the status of the DHCP service.
       </p></dd><dt id="id-1.3.3.5.10.6.10.3.7"><span class="term">subnet</span></dt><dd><p>
        Manages the DHCP subnet options. For a complete list of options, run
        <code class="command">yast dhcp-server subnet help</code>.
       </p></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.11" data-id-title="yast dns-server"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.5 </span><span class="title-name">yast dns-server</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.11">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Manages the DNS server configuration. <code class="command">yast dns-server</code>
     accepts the following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.11.3.1"><span class="term">acls</span></dt><dd><p>
        Displays access control list settings:
       </p><div class="verbatim-wrap"><pre class="screen"> <code class="prompt user">&gt; </code><code class="command">sudo</code> yast dns-server acls show
 ACLs:
 -----
  Name       Type        Value
  ----------------------------
  any        Predefined
  localips   Predefined
  localnets  Predefined
  none       Predefined</pre></div></dd><dt id="id-1.3.3.5.10.6.11.3.2"><span class="term">dnsrecord</span></dt><dd><p>
        Configures zone resource records:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast dnsrecord add zone=example.org query=office.example.org type=NS value=ns3</pre></div><p>
        For a complete list of options, run <code class="command">yast dns-server dnsrecord
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.11.3.3"><span class="term">forwarders</span></dt><dd><p>
        Configures DNS forwarders:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast dns-server forwarders add ip=10.0.0.100
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast dns-server forwarders show
[...]
Forwarder IP
------------
10.0.0.100</pre></div><p>
        For a complete list of options, run <code class="command">yast dns-server forwarders
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.11.3.4"><span class="term">host</span></dt><dd><p>
        Handles <span class="quote">“<span class="quote">A</span>”</span> and its related <span class="quote">“<span class="quote">PTR</span>”</span> record at
        once:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast dns-server host show zone=example.org</pre></div><p>
        For a complete list of options, run <code class="command">yast dns-server host
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.11.3.5"><span class="term">logging</span></dt><dd><p>
        Configures logging settings:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast dns-server logging set updates=no transfers=yes</pre></div><p>
        For a complete list of options, run <code class="command">yast dns-server logging
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.11.3.6"><span class="term">mailserver</span></dt><dd><p>
        Configures zone mail servers:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast dns-server mailserver add zone=example.org mx=mx1 priority=100</pre></div><p>
        For a complete list of options, run <code class="command">yast dns-server mailserver
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.11.3.7"><span class="term">nameserver</span></dt><dd><p>
        Configures zone name servers:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast dns-server nameserver add zone=example.com ns=ns1</pre></div><p>
        For a complete list of options, run <code class="command">yast dns-server nameserver
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.11.3.8"><span class="term">soa</span></dt><dd><p>
        Configures the start of authority (SOA) record:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast dns-server soa set zone=example.org serial=2006081623 ttl=2D3H20S</pre></div><p>
        For a complete list of options, run <code class="command">yast dns-server soa help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.11.3.9"><span class="term">startup</span></dt><dd><p>
        Manages the DNS server service:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast dns-server startup atboot</pre></div><p>
        For a complete list of options, run <code class="command">yast dns-server startup help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.11.3.10"><span class="term">transport</span></dt><dd><p>
        Configures zone transport rules. For a complete list of options, run
        <code class="command">yast dns-server transport help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.11.3.11"><span class="term">zones</span></dt><dd><p>
        Manages DNS zones:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast dns-server zones add name=example.org zonetype=master</pre></div><p>
        For a complete list of options, run <code class="command">yast dns-server zones help</code>.
       </p></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.12" data-id-title="yast disk"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.6 </span><span class="title-name">yast disk</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.12">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Prints information about all disks or partitions. The only supported
     command is <code class="command">list</code> followed by either of the following
     options:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.12.3.1"><span class="term">disks</span></dt><dd><p>
        Lists all configured disks in the system:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast disk list disks
Device   | Size       | FS Type | Mount Point | Label | Model
---------+------------+---------+-------------+-------+-------------
/dev/sda | 119.24 GiB |         |             |       | SSD 840
/dev/sdb |  60.84 GiB |         |             |       | WD1003FBYX-0</pre></div></dd><dt id="id-1.3.3.5.10.6.12.3.2"><span class="term">partitions</span></dt><dd><p>
        Lists all partitions in the system:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast disk list partitions
Device         | Size       | FS Type | Mount Point | Label | Model
---------------+------------+---------+-------------+-------+------
/dev/sda1      |   1.00 GiB | Ext2    | /boot       |       |
/dev/sdb1      |   1.00 GiB | Swap    | swap        |       |
/dev/sdc1      | 698.64 GiB | XFS     | /mnt/extra  |       |
/dev/vg00/home | 580.50 GiB | Ext3    | /home       |       |
/dev/vg00/root | 100.00 GiB | Ext3    | /           |       |
[...]</pre></div></dd></dl></div></section><section class="sect3" id="sec-yast-ftp-server" data-id-title="yast ftp-server"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.7 </span><span class="title-name">yast ftp-server</span></span> <a title="Permalink" class="permalink" href="#sec-yast-ftp-server">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures FTP server settings. <code class="command">yast ftp-server</code> accepts
     the following options:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.13.3.1"><span class="term">SSL, TLS</span></dt><dd><p>
        Controls secure connections via SSL and TLS. SSL
        options are valid for the <code class="systemitem">vsftpd</code> only.
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server SSL enable
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server TLS disable</pre></div></dd><dt id="id-1.3.3.5.10.6.13.3.2"><span class="term">access</span></dt><dd><p>
        Configures access permissions:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server access authen_only</pre></div><p>
        For a complete list of options, run <code class="command">yast ftp-server access
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.13.3.3"><span class="term">anon_access</span></dt><dd><p>
        Configures access permissions for anonymous users:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server anon_access can_upload</pre></div><p>
        For a complete list of options, run <code class="command">yast ftp-server
        anon_access help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.13.3.4"><span class="term">anon_dir</span></dt><dd><p>
        Specifies the directory for anonymous users. The directory must already
        exist on the server:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server anon_dir set_anon_dir=/srv/ftp</pre></div><p>
        For a complete list of options, run <code class="command">yast ftp-server anon_dir
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.13.3.5"><span class="term">chroot</span></dt><dd><p>
        Controls <span class="emphasis"><em>change root</em></span> environment (chroot):
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server chroot enable
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server chroot disable</pre></div></dd><dt id="id-1.3.3.5.10.6.13.3.6"><span class="term">idle-time</span></dt><dd><p>
        Sets the maximum idle time in minutes before FTP server terminates the
        current connection:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server idle-time set_idle_time=15</pre></div></dd><dt id="id-1.3.3.5.10.6.13.3.7"><span class="term">logging</span></dt><dd><p>
        Determines whether to save the log messages into a log file:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server logging enable
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server logging disable</pre></div></dd><dt id="id-1.3.3.5.10.6.13.3.8"><span class="term">max_clients</span></dt><dd><p>
        Specifies the maximum number of concurrently connected clients:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server max_clients set_max_clients=1500</pre></div></dd><dt id="id-1.3.3.5.10.6.13.3.9"><span class="term">max_clients_ip</span></dt><dd><p>
        Specifies the maximum number of concurrently connected clients via IP:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server max_clients_ip set_max_clients=20</pre></div></dd><dt id="id-1.3.3.5.10.6.13.3.10"><span class="term">max_rate_anon</span></dt><dd><p>
        Specifies the maximum data transfer rate permitted for anonymous
        clients (KB/s):
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server max_rate_anon set_max_rate=10000</pre></div></dd><dt id="id-1.3.3.5.10.6.13.3.11"><span class="term">max_rate_authen</span></dt><dd><p>
        Specifies the maximum data transfer rate permitted for locally
        authenticated users (KB/s):
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server max_rate_authen set_max_rate=10000</pre></div></dd><dt id="id-1.3.3.5.10.6.13.3.12"><span class="term">port_range</span></dt><dd><p>
        Specifies the port range for passive connection replies:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server port_range set_min_port=20000 set_max_port=30000</pre></div><p>
        For a complete list of options, run <code class="command">yast ftp-server port_range help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.13.3.13"><span class="term">show</span></dt><dd><p>
        Displays FTP server settings.
       </p></dd><dt id="id-1.3.3.5.10.6.13.3.14"><span class="term">startup</span></dt><dd><p>
        Controls the FTP start-up method:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server startup atboot</pre></div><p>
        For a complete list of options, run <code class="command">yast ftp-server startup
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.13.3.15"><span class="term">umask</span></dt><dd><p>
        Specifies the file umask for <code class="literal">authenticated:anonymous</code>
        users:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server umask set_umask=177:077</pre></div></dd><dt id="id-1.3.3.5.10.6.13.3.16"><span class="term">welcome_message</span></dt><dd><p>
        Specifies the text to display when someone connects to the FTP server:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server welcome_message set_message="hello everybody"</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.14" data-id-title="yast http-server"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.8 </span><span class="title-name">yast http-server</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.14">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures the HTTP server (Apache2). <code class="command">yast http-server</code>
     accepts the following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.14.3.1"><span class="term">configure</span></dt><dd><p>
        Configures the HTTP server host settings:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast http-server configure host=main servername=www.example.com \
 serveradmin=admin@example.com</pre></div><p>
        For a complete list of options, run <code class="command">yast http-server configure
        help</code>.
       </p></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.14.4.1"><span class="term">hosts</span></dt><dd><p>
        Configures virtual hosts:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast http-server hosts create servername=www.example.com \
 serveradmin=admin@example.com documentroot=/var/www</pre></div><p>
        For a complete list of options, run <code class="command">yast http-server hosts
        help</code>.
       </p></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.14.5.1"><span class="term">listen</span></dt><dd><p>
        Specifies the ports and network addresses where the HTTP server should
        listen:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast http-server listen add=81
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast http-server listen list
Listen Statements:
==================
:80
:81
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast http-server delete=80</pre></div><p>
        For a complete list of options, run <code class="command">yast http-server listen
        help</code>.
       </p></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.14.6.1"><span class="term">mode</span></dt><dd><p>
        Enables or disables the wizard mode:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast http-server mode wizard=on</pre></div></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.14.7.1"><span class="term">modules</span></dt><dd><p>
        Controls the Apache2 server modules:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast http-server modules enable=php5,rewrite
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast http-server modules disable=ssl
<code class="prompt user">&gt; </code><code class="command">sudo</code> http-server modules list
[...]
Enabled rewrite
Disabled ssl
Enabled php5
[...]</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.15" data-id-title="yast kdump"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.9 </span><span class="title-name">yast kdump</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.15">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures <code class="systemitem">kdump</code> settings. For more information
     on <code class="systemitem">kdump</code>, refer to the
     <span class="intraxref">Book “System Analysis and Tuning Guide”, Chapter 20 “Kexec and Kdump”, Section 20.7 “Basic Kdump configuration”</span>. <code class="command">yast kdump</code>
     accepts the following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.15.3.1"><span class="term">copykernel</span></dt><dd><p>
        Copies the kernel into the dump directory.
       </p></dd><dt id="id-1.3.3.5.10.6.15.3.2"><span class="term">customkernel</span></dt><dd><p>
        Specifies the <em class="replaceable">kernel_string</em> part of the name
        of the custom kernel. The naming scheme is
        <code class="filename">/boot/vmlinu[zx]-<em class="replaceable">kernel_string</em>[.gz]</code>.
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump customkernel kernel=kdump</pre></div><p>
        For a complete list of options, run <code class="command">yast kdump customkernel
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.15.3.3"><span class="term">dumpformat</span></dt><dd><p>
        Specifies the (compression) format of the dump kernel image. Available
        formats are <span class="quote">“<span class="quote">none</span>”</span>, <span class="quote">“<span class="quote">ELF</span>”</span>,
        <span class="quote">“<span class="quote">compressed</span>”</span> or <span class="quote">“<span class="quote">lzo</span>”</span>:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump dumpformat dump_format=ELF</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.4"><span class="term">dumplevel</span></dt><dd><p>
        Specifies the dump level number in the range from 0 to 31:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump dumplevel dump_level=24</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.5"><span class="term">dumptarget</span></dt><dd><p>
        Specifies the destination for saving dump images:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> kdump dumptarget target=ssh server=name_server port=22 \
 dir=/var/log/dump user=user_name</pre></div><p>
        For a complete list of options, run <code class="command">yast kdump dumptarget
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.15.3.6"><span class="term">immediatereboot</span></dt><dd><p>
        Controls whether the system should reboot immediately after saving the
        core in the Kdump kernel:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump immediatereboot enable
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump immediatereboot disable</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.7"><span class="term">keepolddumps</span></dt><dd><p>
        Specifies how many old dump images are kept. Specify zero to keep them
        all:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump keepolddumps no=5</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.8"><span class="term">kernelcommandline</span></dt><dd><p>
        Specifies the command line that needs to be passed off to the Kdump
        kernel:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump kernelcommandline command="ro root=LABEL=/"</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.9"><span class="term">kernelcommandlineappend</span></dt><dd><p>
        Specifies the command line that you need to <span class="emphasis"><em>append</em></span>
        to the default command line string:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump kernelcommandlineappend command="ro root=LABEL=/"</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.10"><span class="term">notificationcc</span></dt><dd><p>
        Specifies an e-mail address for sending copies of notification messages:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump notificationcc email="user1@example.com user2@example.com"</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.11"><span class="term">notificationto</span></dt><dd><p>
        Specifies an e-mail address for sending notification messages:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump notificationto email="user1@example.com user2@example.com"</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.12"><span class="term">show</span></dt><dd><p>
        Displays <code class="systemitem">kdump</code> settings:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump show
Kdump is disabled
Dump Level: 31
Dump Format: compressed
Dump Target Settings
target: file
file directory: /var/crash
Kdump immediate reboots: Enabled
Numbers of old dumps: 5</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.13"><span class="term">smtppass</span></dt><dd><p>
        Specifies the file with the plain text SMTP password used for sending
        notification messages:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump smtppass pass=/path/to/file</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.14"><span class="term">smtpserver</span></dt><dd><p>
        Specifies the SMTP server host name used for sending notification
        messages:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump smtpserver server=smtp.server.com</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.15"><span class="term">smtpuser</span></dt><dd><p>
        Specifies the SMTP user name used for sending notification messages:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump smtpuser user=smtp_user</pre></div></dd><dt id="id-1.3.3.5.10.6.15.3.16"><span class="term">startup</span></dt><dd><p>
        Enables or disables start-up options:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump startup enable alloc_mem=128,256
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast kdump startup disable</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.16" data-id-title="yast keyboard"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.10 </span><span class="title-name">yast keyboard</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.16">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures the system keyboard for virtual consoles. It does not affect
     the keyboard settings in graphical desktop environments, such as GNOME
     or KDE. <code class="command">yast keyboard</code> accepts the following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.16.3.1"><span class="term">list</span></dt><dd><p>
        Lists all available keyboard layouts.
       </p></dd><dt id="id-1.3.3.5.10.6.16.3.2"><span class="term">set</span></dt><dd><p>
        Activates new keyboard layout setting:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast keyboard set layout=czech</pre></div></dd><dt id="id-1.3.3.5.10.6.16.3.3"><span class="term">summary</span></dt><dd><p>
        Displays the current keyboard configuration.
       </p></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.17" data-id-title="yast lan"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.11 </span><span class="title-name">yast lan</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.17">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures network cards. <code class="command">yast lan</code> accepts the
     following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.17.3.1"><span class="term">add</span></dt><dd><p>
        Configures a new network card:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast lan add name=vlan50 ethdevice=eth0 bootproto=dhcp</pre></div><p>
        For a complete list of options, run <code class="command">yast lan add
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.17.3.2"><span class="term">delete</span></dt><dd><p>
        Deletes an existing network card:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast lan delete id=0</pre></div></dd><dt id="id-1.3.3.5.10.6.17.3.3"><span class="term">edit</span></dt><dd><p>
        Changes the configuration of an existing network card:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast lan edit id=0 bootproto=dhcp</pre></div></dd><dt id="id-1.3.3.5.10.6.17.3.4"><span class="term">list</span></dt><dd><p>
        Displays a summary of network card configuration:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast lan list
id name,           bootproto
0 Ethernet Card 0, NONE
1 Network Bridge,  DHCP</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.18" data-id-title="yast language"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.12 </span><span class="title-name">yast language</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.18">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures system languages. <code class="command">yast language</code> accepts the
     following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.18.3.1"><span class="term">list</span></dt><dd><p>
        Lists all available languages.
       </p></dd><dt id="id-1.3.3.5.10.6.18.3.2"><span class="term">set</span></dt><dd><p>
        Specifies the main system languages and secondary languages:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast language set lang=cs_CZ languages=en_US,es_ES no_packages</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.19" data-id-title="yast mail"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.13 </span><span class="title-name">yast mail</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.19">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Displays the configuration of the mail system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast mail summary</pre></div></section><section class="sect3" id="id-1.3.3.5.10.6.20" data-id-title="yast nfs"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.14 </span><span class="title-name">yast nfs</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.20">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Controls the NFS client. <code class="command">yast nfs</code> accepts the following
     commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.20.3.1"><span class="term">add</span></dt><dd><p>
        Adds a new NFS mount:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nfs add spec=remote_host:/path/to/nfs/share file=/local/mount/point</pre></div><p>
        For a complete list of options, run <code class="command">yast nfs add help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.20.3.2"><span class="term">delete</span></dt><dd><p>
        Deletes an existing NFS mount:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nfs delete spec=remote_host:/path/to/nfs/share file=/local/mount/point</pre></div><p>
        For a complete list of options, run <code class="command">yast nfs delete help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.20.3.3"><span class="term">edit</span></dt><dd><p>
        Changes an existing NFS mount:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nfs edit spec=remote_host:/path/to/nfs/share \
 file=/local/mount/point type=nfs4</pre></div><p>
        For a complete list of options, run <code class="command">yast nfs edit help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.20.3.4"><span class="term">list</span></dt><dd><p>
        Lists existing NFS mounts:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nfs list
Server            Remote File System    Mount Point    Options
----------------------------------------------------------------
nfs.example.com   /mnt                  /nfs/mnt       nfs
nfs.example.com   /home/tux/nfs_share   /nfs/tux       nfs</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.21" data-id-title="yast nfs-server"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.15 </span><span class="title-name">yast nfs-server</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.21">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures the NFS server. <code class="command">yast nfs-server</code> accepts the
     following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.21.3.1"><span class="term">add</span></dt><dd><p>
        Adds a directory to export:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nfs-server add mountpoint=/nfs/export hosts=*.allowed_hosts.com</pre></div><p>
        For a complete list of options, run <code class="command">yast nfs-server add help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.21.3.2"><span class="term">delete</span></dt><dd><p>
        Deletes a directory from the NFS export:
       </p><div class="verbatim-wrap"><pre class="screen"> <code class="prompt user">&gt; </code><code class="command">sudo</code> yast nfs-server delete mountpoint=/nfs/export</pre></div></dd><dt id="id-1.3.3.5.10.6.21.3.3"><span class="term">set</span></dt><dd><p>
        Specifies additional parameters for the NFS server:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nfs-server set enablev4=yes security=yes</pre></div><p>
        For a complete list of options, run <code class="command">yast nfs-server set help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.21.3.4"><span class="term">start</span></dt><dd><p>
        Starts the NFS server service:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nfs-server start</pre></div></dd><dt id="id-1.3.3.5.10.6.21.3.5"><span class="term">stop</span></dt><dd><p>
        Stops the NFS server service:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nfs-server stop</pre></div></dd><dt id="id-1.3.3.5.10.6.21.3.6"><span class="term">summary</span></dt><dd><p>
        Displays a summary of the NFS server configuration:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nfs-server summary
NFS server is enabled
NFS Exports
* /mnt
* /home

NFSv4 support is enabled.
The NFSv4 domain for idmapping is localdomain.
NFS Security using GSS is enabled.</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.22" data-id-title="yast nis"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.16 </span><span class="title-name">yast nis</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.22">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures the NIS client. <code class="command">yast nis</code> accepts the
     following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.22.3.1"><span class="term">configure</span></dt><dd><p>
        Changes global settings of a NIS client:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nis configure server=nis.example.com broadcast=yes</pre></div><p>
        For a complete list of options, run <code class="command">yast nis configure
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.22.3.2"><span class="term">disable</span></dt><dd><p>
        Disables the NIS client:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nis disable</pre></div></dd><dt id="id-1.3.3.5.10.6.22.3.3"><span class="term">enable</span></dt><dd><p>
        Enables your machine as NIS client:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nis enable server=nis.example.com broadcast=yes automounter=yes</pre></div><p>
        For a complete list of options, run <code class="command">yast nis enable help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.22.3.4"><span class="term">find</span></dt><dd><p>
        Shows available NIS servers for a given domain:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nis find domain=nisdomain.com</pre></div></dd><dt id="id-1.3.3.5.10.6.22.3.5"><span class="term">summary</span></dt><dd><p>
        Displays a configuration summary of a NIS client.
       </p></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.23" data-id-title="yast nis-server"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.17 </span><span class="title-name">yast nis-server</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.23">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures a NIS server. <code class="command">yast nis-server</code> accepts the
     following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.23.3.1"><span class="term">master</span></dt><dd><p>
        Configures a NIS master server:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nis-server master domain=nisdomain.com yppasswd=yes</pre></div><p>
        For a complete list of options, run <code class="command">yast nis-server master help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.23.3.2"><span class="term">slave</span></dt><dd><p>
        Configures a NIS worker server:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nis-server slave domain=nisdomain.com master_ip=10.100.51.65</pre></div><p>
        For a complete list of options, run <code class="command">yast nis-server slave help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.23.3.3"><span class="term">stop</span></dt><dd><p>
        Stops a NIS server:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nis-server stop</pre></div></dd><dt id="id-1.3.3.5.10.6.23.3.4"><span class="term">summary</span></dt><dd><p>
        Displays a configuration summary of a NIS server:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast nis-server summary</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.24" data-id-title="yast proxy"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.18 </span><span class="title-name">yast proxy</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.24">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures proxy settings. <code class="command">yast proxy</code> accepts the
     following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.24.3.1"><span class="term">authentication</span></dt><dd><p>
        Specifies the authentication options for proxy:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast proxy authentication username=tux password=secret</pre></div><p>
        For a complete list of options, run <code class="command">yast proxy authentication
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.24.3.2"><span class="term">enable, disable</span></dt><dd><p>
        Enables or disables proxy settings.
       </p></dd><dt id="id-1.3.3.5.10.6.24.3.3"><span class="term">set</span></dt><dd><p>
        Changes the current proxy settings:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast proxy set https=proxy.example.com</pre></div><p>
        For a complete list of options, run <code class="command">yast proxy set help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.24.3.4"><span class="term">summary</span></dt><dd><p>
        Displays proxy settings.
       </p></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.25" data-id-title="yast rdp"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.19 </span><span class="title-name">yast rdp</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.25">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Controls remote desktop settings. <code class="command">yast rdp</code> accepts the
     following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.25.3.1"><span class="term">allow</span></dt><dd><p>
        Allows remote access to the server's desktop:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast rdp allow set=yes</pre></div></dd><dt id="id-1.3.3.5.10.6.25.3.2"><span class="term">list</span></dt><dd><p>
        Displays the remote desktop configuration summary.
       </p></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.26" data-id-title="yast samba-client"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.20 </span><span class="title-name">yast samba-client</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.26">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures the Samba client settings. <code class="command">yast samba-client</code>
     accepts the following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.26.3.1"><span class="term">configure</span></dt><dd><p>
        Changes global settings of Samba:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-client configure workgroup=FAMILY</pre></div></dd><dt id="id-1.3.3.5.10.6.26.3.2"><span class="term">isdomainmember</span></dt><dd><p>
        Checks whether the machine is a member of a domain:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-client isdomainmember domain=SMB_DOMAIN</pre></div></dd><dt id="id-1.3.3.5.10.6.26.3.3"><span class="term">joindomain</span></dt><dd><p>
        Makes the machine a member of a domain:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-client joindomain domain=SMB_DOMAIN user=username password=pwd</pre></div></dd><dt id="id-1.3.3.5.10.6.26.3.4"><span class="term">winbind</span></dt><dd><p>
        Enables or disables Winbind services (the
        <code class="systemitem">winbindd</code> daemon):
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-client winbind enable
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-client winbind disable</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.27" data-id-title="yast samba-server"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.21 </span><span class="title-name">yast samba-server</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.27">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures Samba server settings. <code class="command">yast samba-server</code>
     accepts the following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.27.3.1"><span class="term">backend</span></dt><dd><p>
        Specifies the back-end for storing user information:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-server backend smbpasswd</pre></div><p>
        For a complete list of options, run <code class="command">yast samba-server backend help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.27.3.2"><span class="term">configure</span></dt><dd><p>
        Configures global settings of the Samba server:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-server configure workgroup=FAMILY description='Home server'</pre></div><p>
        For a complete list of options, run <code class="command">yast samba-server configure help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.27.3.3"><span class="term">list</span></dt><dd><p>
        Displays a list of available shares:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-server list
Status     Type Name
==============================
Disabled   Disk profiles
Enabled    Disk print$
Enabled    Disk homes
Disabled   Disk groups
Enabled    Disk movies
Enabled    Printer printers</pre></div></dd><dt id="id-1.3.3.5.10.6.27.3.4"><span class="term">role</span></dt><dd><p>
        Specifies the role of the Samba server:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-server role standalone</pre></div><p>
        For a complete list of options, run <code class="command">yast samba-server role help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.27.3.5"><span class="term">service</span></dt><dd><p>
        Enables or disables the Samba services (<code class="systemitem">smb</code>
        and <code class="systemitem">nmb</code>):
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-server service enable
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-server service disable</pre></div></dd><dt id="id-1.3.3.5.10.6.27.3.6"><span class="term">share</span></dt><dd><p>
        Manipulates a single Samba share:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast samba-server share name=movies browseable=yes guest_ok=yes</pre></div><p>
        For a complete list of options, run <code class="command">yast samba-server share help</code>.
       </p></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.28" data-id-title="yast security"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.22 </span><span class="title-name">yast security</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.28">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Controls the security level of the host. <code class="command">yast security</code>
     accepts the following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.28.3.1"><span class="term">level</span></dt><dd><p>
        Specifies the security level of the host:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast security level server</pre></div><p>
        For a complete list of options, run <code class="command">yast security level help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.28.3.2"><span class="term">set</span></dt><dd><p>
        Sets the value of a specific option:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast security set passwd=sha512 crack=yes</pre></div><p>
        For a complete list of options, run <code class="command">yast security set help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.28.3.3"><span class="term">summary</span></dt><dd><p>
        Displays a summary of the current security configuration:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="command">sudo</code>yast security summary</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.29" data-id-title="yast sound"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.23 </span><span class="title-name">yast sound</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.29">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures sound card settings. <code class="command">yast sound</code> accepts the
     following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.29.3.1"><span class="term">add</span></dt><dd><p>
        Configures a new sound card. Without any parameters, the command adds
        the first detected card.
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sound add card=0 volume=75</pre></div><p>
        For a complete list of options, run <code class="command">yast sound add
        help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.29.3.2"><span class="term">channels</span></dt><dd><p>
        Lists available volume channels of a sound card:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sound channels card=0
Master 75
PCM 100</pre></div></dd><dt id="id-1.3.3.5.10.6.29.3.3"><span class="term">modules</span></dt><dd><p>
        Lists all available sound kernel modules:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sound modules
snd-atiixp ATI IXP AC97 controller (snd-atiixp)
snd-atiixp-modem ATI IXP MC97 controller (snd-atiixp-modem)
snd-virtuoso Asus Virtuoso driver (snd-virtuoso)
[...]</pre></div></dd><dt id="id-1.3.3.5.10.6.29.3.4"><span class="term">playtest</span></dt><dd><p>
        Plays a test sound on a sound card:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sound playtest card=0</pre></div></dd><dt id="id-1.3.3.5.10.6.29.3.5"><span class="term">remove</span></dt><dd><p>
        Removes a configured sound card:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sound remove card=0
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast sound remove all</pre></div></dd><dt id="id-1.3.3.5.10.6.29.3.6"><span class="term">set</span></dt><dd><p>
        Specifies new values for a sound card:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sound set card=0 volume=80</pre></div></dd><dt id="id-1.3.3.5.10.6.29.3.7"><span class="term">show</span></dt><dd><p>
        Displays detailed information about a sound card:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sound show card=0
Parameters of card 'ThinkPad X240' (using module snd-hda-intel):

align_buffer_size
 Force buffer and period sizes to be multiple of 128 bytes.
bdl_pos_adj
 BDL position adjustment offset.
beep_mode
 Select HDA Beep registration mode (0=off, 1=on) (default=1).
 Default Value: 0
enable_msi
 Enable Message Signaled Interrupt (MSI)
[...]</pre></div></dd><dt id="id-1.3.3.5.10.6.29.3.8"><span class="term">summary</span></dt><dd><p>
        Prints a configuration summary for all sound cards on the system:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sound summary</pre></div></dd><dt id="id-1.3.3.5.10.6.29.3.9"><span class="term">volume</span></dt><dd><p>
        Specifies the volume level of a sound card:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="command">sudo</code>yast sound volume card=0 play</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.30" data-id-title="yast sysconfig"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.24 </span><span class="title-name">yast sysconfig</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.30">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Controls the variables in files under <code class="filename">/etc/sysconfig</code>.
     <code class="command">yast sysconfig</code> accepts the following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.30.3.1"><span class="term">clear</span></dt><dd><p>
        Sets empty value to a variable:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sysconfig clear=POSTFIX_LISTEN</pre></div><div id="id-1.3.3.5.10.6.30.3.1.2.3" data-id-title="Variable in multiple files" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Variable in multiple files</div><p>
         If the variable is available in several files, use the
         <em class="replaceable">VARIABLE_NAME</em>$<em class="replaceable">FILE_NAME</em>
         syntax:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sysconfig clear=CONFIG_TYPE$/etc/sysconfig/mail</pre></div></div></dd><dt id="id-1.3.3.5.10.6.30.3.2"><span class="term">details</span></dt><dd><p>
        Displays detailed information about a variable:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sysconfig details variable=POSTFIX_LISTEN
Description:
Value:
File: /etc/sysconfig/postfix
Possible Values: Any value
Default Value:
Configuration Script: postfix
Description:
 Comma separated list of IP's
 NOTE: If not set, LISTEN on all interfaces</pre></div></dd><dt id="id-1.3.3.5.10.6.30.3.3"><span class="term">list</span></dt><dd><p>
        Displays summary of modified variables. Use <code class="command">all</code> to
        list all variables and their values:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sysconfig list all
AOU_AUTO_AGREE_WITH_LICENSES="false"
AOU_ENABLE_CRONJOB="true"
AOU_INCLUDE_RECOMMENDS="false"
[...]</pre></div></dd><dt id="id-1.3.3.5.10.6.30.3.4"><span class="term">set</span></dt><dd><p>
        Sets a value for a variable:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sysconfig set DISPLAYMANAGER=gdm</pre></div><div id="id-1.3.3.5.10.6.30.3.4.2.3" data-id-title="Variable in multiple files" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Variable in multiple files</div><p>
         If the variable is available in several files, use the
         <em class="replaceable">VARIABLE_NAME</em>$<em class="replaceable">FILE_NAME</em>
         syntax:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast sysconfig set CONFIG_TYPE$/etc/sysconfig/mail=advanced</pre></div></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.31" data-id-title="yast tftp-server"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.25 </span><span class="title-name">yast tftp-server</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.31">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures a TFTP server. <code class="command">yast tftp-server</code> accepts the
     following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.31.3.1"><span class="term">directory</span></dt><dd><p>
        Specifies the directory of the TFTP server:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast tftp-server directory path=/srv/tftp
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast tftp-server directory list
Directory Path: /srv/tftp</pre></div></dd><dt id="id-1.3.3.5.10.6.31.3.2"><span class="term">status</span></dt><dd><p>
        Controls the status of the TFTP server service:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast tftp-server status disable
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast tftp-server status show
Service Status: false
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast tftp-server status enable</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.32" data-id-title="yast timezone"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.26 </span><span class="title-name">yast timezone</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.32">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Configures the time zone. <code class="command">yast timezone</code> accepts the
     following commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.32.3.1"><span class="term">list</span></dt><dd><p>
        Lists all available time zones grouped by region:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast timezone list
Region: Africa
Africa/Abidjan (Abidjan)
Africa/Accra (Accra)
Africa/Addis_Ababa (Addis Ababa)
[...]</pre></div></dd><dt id="id-1.3.3.5.10.6.32.3.2"><span class="term">set</span></dt><dd><p>
        Specifies new values for the time zone configuration:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast timezone set timezone=Europe/Prague hwclock=local</pre></div></dd><dt id="id-1.3.3.5.10.6.32.3.3"><span class="term">summary</span></dt><dd><p>
        Displays the time zone configuration summary:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast timezone summary
Current Time Zone: Europe/Prague
Hardware Clock Set To: Local time
Current Time and Date: Mon 12. March 2018, 11:36:21 CET</pre></div></dd></dl></div></section><section class="sect3" id="id-1.3.3.5.10.6.33" data-id-title="yast users"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">4.4.3.27 </span><span class="title-name">yast users</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.5.10.6.33">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ncurses.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Manages user accounts. <code class="command">yast users</code> accepts the following
     commands:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.5.10.6.33.3.1"><span class="term">add</span></dt><dd><p>
        Adds a new user:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast users add username=user1 password=secret home=/home/user1</pre></div><p>
        For a complete list of options, run <code class="command">yast users add help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.33.3.2"><span class="term">delete</span></dt><dd><p>
        Deletes an existing user account:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast users delete username=user1 delete_home</pre></div><p>
        For a complete list of options, run <code class="command">yast users delete help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.33.3.3"><span class="term">edit</span></dt><dd><p>
        Changes an existing user account:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast users edit username=user1 password=new_secret</pre></div><p>
        For a complete list of options, run <code class="command">yast users edit help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.33.3.4"><span class="term">list</span></dt><dd><p>
        Lists existing users filtered by user type:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast users list system</pre></div><p>
        For a complete list of options, run <code class="command">yast users list help</code>.
       </p></dd><dt id="id-1.3.3.5.10.6.33.3.5"><span class="term">show</span></dt><dd><p>
        Displays details about a user:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> yast users show username=wwwrun
Full Name: WWW daemon apache
List of Groups: www
Default Group: wwwrun
Home Directory: /var/lib/wwwrun
Login Shell: /sbin/nologin
Login Name: wwwrun
UID: 456</pre></div><p>
        For a complete list of options, run <code class="command">yast users show help</code>.
       </p></dd></dl></div></section></section></section></section><section class="chapter" id="cha-yast-lang" data-id-title="Changing language and country settings with YaST"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">5 </span><span class="title-name">Changing language and country settings with YaST</span></span> <a title="Permalink" class="permalink" href="#cha-yast-lang">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_lang.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    This chapter explains how to configure language and country settings. You
    can change the language globally for the whole system, individually for
    certain users or desktops, or temporarily for single applications.
    Additionally, you can configure secondary languages and adjust the date and
    country settings.
   </p></div></div></div></div><p>
  If you work in different countries or in a multilingual environment, you
  should configure your system accordingly. <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> can handle
  different <code class="literal">locales</code> in parallel. A locale is a set of
  parameters that defines the language and country settings reflected in the
  user interface.
 </p><p>
  The main system language is selected during installation, and keyboard and
  time zone settings are adjusted accordingly. However, you can install
  additional languages and determine which of the installed languages should be
  the default.
 </p><p>
  For those tasks, use the YaST language module as described in
  <a class="xref" href="#sec-yast-langmod" title="5.1. Changing the system language">Section 5.1, “Changing the system language”</a>. Install secondary languages to get optional
  localization if you need to start applications or desktops in languages other
  than the primary one.
 </p><p>
  The YaST time zone module allows you to adjust your country
  and time zone settings accordingly. It also lets you synchronize your system
  clock against a time server. For details, refer to
  <a class="xref" href="#sec-yast-country" title="5.2. Changing the country and time settings">Section 5.2, “Changing the country and time settings”</a>.
 </p><section class="sect1" id="sec-yast-langmod" data-id-title="Changing the system language"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.1 </span><span class="title-name">Changing the system language</span></span> <a title="Permalink" class="permalink" href="#sec-yast-langmod">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_lang.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Depending on how you use your desktop and whether you want to switch the
   entire system to another language or only the desktop environment,
   you have several options:
  </p><div class="variablelist"><dl class="variablelist"><dt id="vle-lang-system"><span class="term">Changing the system language globally</span></dt><dd><p>
      Proceed as described in <a class="xref" href="#sec-yast-lang-primsec" title="5.1.1. Modifying system languages with YaST">Section 5.1.1, “Modifying system languages with YaST”</a> and
      <a class="xref" href="#sec-yast-lang-switch" title="5.1.2. Switching the default system language">Section 5.1.2, “Switching the default system language”</a> to install additional localized
      packages with YaST and to set the default language. Changes are
      effective after the next login. To ensure that the entire system reflects
      the change, reboot the system or close and restart all running services,
      applications and programs.
     </p></dd><dt id="vle-lang-desktop"><span class="term">Changing the language for the desktop only</span></dt><dd><p>
      Provided you have previously installed the desired language packages for
      your desktop environment with YaST as described below, you can switch
      the language of your desktop using the desktop's control center.
       After the
      X server has been restarted, your entire desktop reflects your new choice
      of language. Applications not belonging to your desktop framework are not
      affected by this change and may still appear in the language that was set
      in YaST.
     </p></dd><dt id="vle-lang-application"><span class="term">Temporarily switching languages for one application only</span></dt><dd><p>
      You can also run a single application in another language (that has
      already been installed with YaST). To do so, start it from the command
      line by specifying the language code as described in
      <a class="xref" href="#sec-yast-lang-applications" title="5.1.3. Switching languages for standard X and GNOME applications">Section 5.1.3, “Switching languages for standard X and GNOME applications”</a>.
     </p></dd></dl></div><section class="sect2" id="sec-yast-lang-primsec" data-id-title="Modifying system languages with YaST"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">5.1.1 </span><span class="title-name">Modifying system languages with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-yast-lang-primsec">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_lang.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    YaST supports two different language categories:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.6.7.4.3.1"><span class="term"><span class="guimenu">Primary Language</span></span></dt><dd><p>
       The primary language set in YaST applies to the entire system,
       including YaST and the desktop environment. This language is used
       whenever available unless you manually specify another language.
      </p></dd><dt id="id-1.3.3.6.7.4.3.2"><span class="term"><span class="guimenu">Secondary Languages</span></span></dt><dd><p>
       Install secondary languages to make your system multilingual. Languages
       installed as secondary can be selected manually, when needed. For example, use a secondary language to start an application
       in a certain language to do word processing in this language.
      </p></dd></dl></div><p>
    Before installing additional languages, determine which of them should be
    the default system language (primary language).
   </p><p>
    To access the YaST language module, start YaST and click <span class="guimenu">System</span> › <span class="guimenu">Language</span>.
    Alternatively, start the <span class="guimenu">Languages</span> dialog directly by
    running <code class="command">sudo yast2 language &amp;</code> from a command line.
   </p><div class="informalfigure"><div class="mediaobject"><a href="images/yast2_language.png"><img src="images/yast2_language.png" width="75%" alt="Image" title="Image"/></a></div></div><div class="procedure" id="pro-yast-lang-additional" data-id-title="Installing additional languages"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 5.1: </span><span class="title-name">Installing additional languages </span></span><a title="Permalink" class="permalink" href="#pro-yast-lang-additional">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_lang.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
     When installing additional languages, YaST allows you to
     set different locale settings for the user <code class="systemitem">root</code>, see <a class="xref" href="#st-yast-lang-additional-root" title="Step 4">Step 4</a>. The option
     <span class="guimenu">Locale Settings for User root</span> determines how
     the locale variables (<code class="envar">LC_*</code>) in the file
     <code class="filename">/etc/sysconfig/language</code> are set for
     <code class="systemitem">root</code>. You can set them to the same locale as for regular
     users. Alternatively, you can keep them unaffected by any language
     changes, or only set the variable <code class="envar">RC_LC_CTYPE</code> to
     the same values as for the regular users. The
     <code class="envar">RC_LC_CTYPE</code> variable sets the localization for
     language-specific function calls.
    </p><ol class="procedure" type="1"><li class="step"><p>
      To add languages in the YaST language module, select the
      <span class="guimenu">Secondary Languages</span> you want to install.
     </p></li><li class="step"><p>
      To make a language the default language, set it as <span class="guimenu">Primary
      Language</span>.
     </p></li><li class="step"><p>
      Additionally, adapt the keyboard to the new primary language and adjust
      the time zone, if appropriate.
     </p><div id="id-1.3.3.6.7.4.7.5.2" data-id-title="Advanced settings" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Advanced settings</div><p>
       For advanced keyboard or time zone settings, select <span class="guimenu">Hardware</span> › <span class="guimenu">System Keyboard Layout</span> or <span class="guimenu">System</span> › <span class="guimenu">Date
       and Time</span> in YaST. For more information, refer to <a class="xref" href="#sec-yast-hw-keym" title="Chapter 32. Setting up your system keyboard layout">Chapter 32, <em>Setting up your system keyboard layout</em></a> and <a class="xref" href="#sec-yast-country" title="5.2. Changing the country and time settings">Section 5.2, “Changing the country and time settings”</a>.
      </p></div></li><li class="step" id="st-yast-lang-additional-root"><p>
      To change language settings specific to the user <code class="systemitem">root</code>, click
      <span class="guimenu">Details</span>.
     </p><ol type="a" class="substeps"><li class="step"><p>
        Set <span class="guimenu">Locale Settings for User root</span> to the desired
        value. For more information, click <span class="guimenu">Help</span>.
       </p></li><li class="step"><p>
        Decide whether to use <span class="guimenu">Use UTF-8 Encoding</span> for
        <code class="systemitem">root</code> or not.
       </p></li></ol></li><li class="step"><p>
      If your locale was not included in the list of primary languages
      available, try specifying it with <span class="guimenu">Detailed Locale
      Setting</span>. However, this may result in certain locales being
      incomplete.
     </p></li><li class="step"><p>
      Confirm the changes in the dialogs with <span class="guimenu">OK</span>. If you
      have selected secondary languages, YaST installs the localized software
      packages for the additional languages.
     </p></li></ol></div></div><p>
    The system is now multilingual. However, to start an application in a
    language other than the primary one, you need to set the desired language
    explicitly as explained in <a class="xref" href="#sec-yast-lang-applications" title="5.1.3. Switching languages for standard X and GNOME applications">Section 5.1.3, “Switching languages for standard X and GNOME applications”</a>.
   </p></section><section class="sect2" id="sec-yast-lang-switch" data-id-title="Switching the default system language"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">5.1.2 </span><span class="title-name">Switching the default system language</span></span> <a title="Permalink" class="permalink" href="#sec-yast-lang-switch">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_lang.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To globally change the default language of a system, use the following procedure:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start the YaST language module.
     </p></li><li class="step"><p>
      Select the desired new system language as <span class="guimenu">Primary
      Language</span>.
     </p><div id="id-1.3.3.6.7.5.3.2.2" data-id-title="Deleting former system languages" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Deleting former system languages</div><p>
       If you switch to a different primary language, the localized software
       packages for the former primary language gets removed from the
       system. To switch the default system language but keep the former
       primary language as an additional language, add it as <span class="guimenu">Secondary
       Language</span> by selecting the respective check box.
      </p></div></li><li class="step"><p>
      Adjust the keyboard and time zone options as desired.
     </p></li><li class="step"><p>
      Confirm your changes with <span class="guimenu">OK</span>.
     </p></li><li class="step"><p>
      After YaST has applied the changes, restart current X sessions (for
      example, by logging out and logging in again) to make YaST and the
      desktop applications reflect your new language settings.
     </p></li></ol></div></div></section><section class="sect2" id="sec-yast-lang-applications" data-id-title="Switching languages for standard X and GNOME applications"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">5.1.3 </span><span class="title-name">Switching languages for standard X and GNOME applications</span></span> <a title="Permalink" class="permalink" href="#sec-yast-lang-applications">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_lang.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    After you have installed the respective language with YaST, you can run a
    single application in another language.
   </p><p>
    Start the application from the command line by using the following command:
   </p><div class="verbatim-wrap"><pre class="screen">LANG=<em class="replaceable">LANGUAGE</em> <em class="replaceable">application</em></pre></div><p>
    For example, to start f-spot in German, run
    <code class="command">LANG=de_DE f-spot</code>. For other languages, use the
    appropriate language code. Get a list of all language codes available with
    the <code class="command">locale </code> <code class="option">-av</code> command.
   </p></section></section><section class="sect1" id="sec-yast-country" data-id-title="Changing the country and time settings"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.2 </span><span class="title-name">Changing the country and time settings</span></span> <a title="Permalink" class="permalink" href="#sec-yast-country">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_lang.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Using the YaST date and time module, adjust your system date, clock and
   time zone information to the area you are working in. To access the YaST
   module, start YaST and click <span class="guimenu">System</span> › <span class="guimenu">Date and Time</span>. Alternatively, start the
   <span class="guimenu">Clock and Time Zone</span> dialog directly by running
   <code class="command">sudo yast2 timezone &amp;</code> from a command line.
  </p><div class="informalfigure"><div class="mediaobject"><a href="images/yast2_timezone.png"><img src="images/yast2_timezone.png" width="75%" alt="Image" title="Image"/></a></div></div><p>
   First, select a general region, such as <span class="guimenu">Europe</span>. Choose an
   appropriate country that matches the one you are working in, for example,
   <span class="guimenu">Germany</span>.
  </p><p>
   Depending on which operating systems run on your workstation, adjust the
   hardware clock settings accordingly:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     If you run another operating system on your machine, such as Microsoft
     Windows*, your system may not use UTC, but local time. In this case,
     deactivate <span class="guimenu">Hardware Clock Set To UTC</span>.
    </p></li><li class="listitem"><p>
     If you only run Linux on your machine, set the hardware clock to UTC and
     have the switch from standard time to daylight saving time performed
     automatically.
    </p></li></ul></div><div id="id-1.3.3.6.8.7" data-id-title="Set the hardware clock to UTC" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Set the hardware clock to UTC</div><p>
    The switch from standard time to daylight saving time (and vice versa) can
    only be performed automatically when the hardware clock (CMOS clock) is set
    to UTC. This also applies if you use automatic time synchronization with
    NTP, because automatic synchronization is only performed if the time
    difference between the hardware and system clock is less than 15 minutes.
   </p><p>
    Since a wrong system time can cause serious problems (missed backups,
    dropped mail messages, mount failures on remote file systems, etc.) it is
    strongly recommended to <span class="emphasis"><em>always</em></span> set the hardware clock
    to UTC.
   </p></div><p>
   You can change the date and time manually or opt for synchronizing your
   machine against an NTP server, either permanently or only for adjusting your
   hardware clock.
  </p><div class="procedure" id="id-1.3.3.6.8.9" data-id-title="Manually adjusting time and date"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 5.2: </span><span class="title-name">Manually adjusting time and date </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.6.8.9">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_lang.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     In the YaST timezone module, click <span class="guimenu">Other Settings</span> to
     set date and time.
    </p></li><li class="step"><p>
     Select <span class="guimenu">Manually</span> and enter date and time values.
    </p></li><li class="step"><p>
     Confirm your changes.
    </p></li></ol></div></div><div class="procedure" id="id-1.3.3.6.8.10" data-id-title="Setting date and time with NTP server"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 5.3: </span><span class="title-name">Setting date and time with NTP server </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.6.8.10">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_lang.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Click <span class="guimenu">Other Settings</span> to set date and time.
    </p></li><li class="step"><p>
     Select <span class="guimenu">Synchronize with NTP Server</span>.
    </p></li><li class="step"><p>
     Enter the address of an NTP server, if not already populated.
    </p><div class="informalfigure"><div class="mediaobject"><a href="images/yast2_timezone_ntp.png"><img src="images/yast2_timezone_ntp.png" width="75%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
     With the <span class="guimenu">Configure</span> button, you can open the advanced
     NTP configuration. For details, see <a class="xref" href="#sec-ntp-yast" title="38.1. Configuring an NTP client with YaST">Section 38.1, “Configuring an NTP client with YaST”</a>.
    </p></li><li class="step"><p>
     Confirm your changes.
    </p></li></ol></div></div></section></section><section class="chapter" id="cha-yast-userman" data-id-title="Managing users with YaST"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">6 </span><span class="title-name">Managing users with YaST</span></span> <a title="Permalink" class="permalink" href="#cha-yast-userman">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  During installation, you may have created a local user for your system.
  With the YaST module <span class="guimenu">User and Group Management</span> you can
  add users or edit existing ones. It also lets you configure your system
  to authenticate users with a network server.
 </p><section class="sect1" id="sec-yast-userman-main" data-id-title="User and group administration dialog"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.1 </span><span class="title-name">User and group administration dialog</span></span> <a title="Permalink" class="permalink" href="#sec-yast-userman-main">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To administer users or groups, start YaST and click <span class="guimenu">Security and Users</span> › <span class="guimenu">User and Group
   Management</span>. Alternatively, start the <span class="guimenu">User
   and Group Administration</span> dialog directly by running <code class="command">sudo
   yast2 users &amp;</code> from a command line.
  </p><div class="figure" id="fig-y2-userman-main"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_users_main_qt.png"><img src="images/yast2_users_main_qt.png" width="70%" alt="YaST user and group administration" title="YaST user and group administration"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 6.1: </span><span class="title-name">YaST user and group administration </span></span><a title="Permalink" class="permalink" href="#fig-y2-userman-main">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div><p>
   Every user is assigned a system-wide user ID (UID). Apart from the users
   that can log in to your machine, there are also several <span class="emphasis"><em>system
   users</em></span> for internal use only. Each user is assigned to one or more
   groups. Similar to <span class="emphasis"><em>system users</em></span>, there are also
   <span class="emphasis"><em>system groups</em></span> for internal use.
  </p><p>
  The main window shows several tabs, depending on the set of users (local users, network users, system users) you choose to view and modify. The tabs allow you to perform the following tasks:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.7.4.6.1"><span class="term">Managing user accounts</span></dt><dd><p>
      From the <span class="guimenu">Users</span> tab create, modify, delete or
      temporarily disable user accounts as described in
      <a class="xref" href="#sec-yast-userman-users" title="6.2. Managing user accounts">Section 6.2, “Managing user accounts”</a>. Learn about advanced options like
      enforcing password policies, using encrypted home directories, or
      managing disk quotas in <a class="xref" href="#sec-yast-userman-adv" title="6.3. Additional options for user accounts">Section 6.3, “Additional options for user accounts”</a>.
     </p></dd><dt id="id-1.3.3.7.4.6.2"><span class="term">Changing default settings</span></dt><dd><p>
      Local user accounts are created according to the settings defined on the
      <span class="guimenu">Defaults for New Users</span> tab. Learn how to change the
      default group assignment, or the default path and access permissions for
      home directories in <a class="xref" href="#sec-yast-userman-defaults" title="6.4. Changing default settings for local users">Section 6.4, “Changing default settings for local users”</a>.
     </p></dd><dt id="id-1.3.3.7.4.6.3"><span class="term">Assigning users to groups</span></dt><dd><p>
      Learn how to change the group assignment for individual users in
      <a class="xref" href="#sec-yast-userman-assign" title="6.5. Assigning users to groups">Section 6.5, “Assigning users to groups”</a>.
     </p></dd><dt id="id-1.3.3.7.4.6.4"><span class="term">Managing groups</span></dt><dd><p>
      From the <span class="guimenu">Groups</span> tab, you can add, modify or delete
      existing groups. Refer to <a class="xref" href="#sec-yast-userman-groups" title="6.6. Managing groups">Section 6.6, “Managing groups”</a> for
      information on how to do this.
     </p></dd><dt id="id-1.3.3.7.4.6.5"><span class="term">Changing user authentication method</span></dt><dd><p>
      When your machine is connected to a network that provides user
      authentication methods like NIS or LDAP, you can choose between several
      authentication methods on the <span class="guimenu">Authentication Settings</span>
      tab. For more information, refer to
      <a class="xref" href="#sec-yast-userman-authent" title="6.7. Changing the user authentication method">Section 6.7, “Changing the user authentication method”</a>.
     </p></dd></dl></div><p>
   For user and group management, the dialog provides similar functionality.
   You can easily switch between the user and group administration view by
   choosing the appropriate tab at the top of the dialog.
  </p><p>
   Filter options allow you to define the set of users or groups you want to
   modify: on the <span class="guimenu">Users</span> or <span class="guimenu">Group</span> tab,
   click <span class="guimenu">Set Filter</span> to view and edit users or groups.
   They are listed according to certain categories, such as <span class="guimenu">Local Users</span> or
   <span class="guimenu">LDAP Users</span>, if applicable. With <span class="guimenu">Set Filter</span> › <span class="guimenu">Customize Filter</span> you can also set up and
   use a custom filter.
  </p><p>
   Depending on the filter you choose, not all the following options and
   functions may be available from the dialog.
  </p></section><section class="sect1" id="sec-yast-userman-users" data-id-title="Managing user accounts"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.2 </span><span class="title-name">Managing user accounts</span></span> <a title="Permalink" class="permalink" href="#sec-yast-userman-users">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   YaST allows you to create, modify, delete or temporarily disable
   user accounts. Do not modify user accounts unless you are an experienced
   user or administrator.
  </p><div id="id-1.3.3.7.5.3" data-id-title="Changing user IDs of existing users" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Changing user IDs of existing users</div><p>
    File ownership is bound to the user ID, not to the user name. After a user
    ID change, the files in the user's home directory are automatically
    adjusted to reflect this change. However, after an ID change, the user no
    longer owns the files they created elsewhere in the file system unless the
    file ownership for those files is manually modified.
   </p></div><p>
   The following instructions demonstrate how to set up default user accounts.
   For further options, refer to
   <a class="xref" href="#sec-yast-userman-adv" title="6.3. Additional options for user accounts">Section 6.3, “Additional options for user accounts”</a>.
  </p><div class="procedure" id="id-1.3.3.7.5.5" data-id-title="Adding or modifying user accounts"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 6.1: </span><span class="title-name">Adding or modifying user accounts </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.7.5.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open the YaST <span class="guimenu">User and Group Administration</span> dialog
     and click the <span class="guimenu">Users</span> tab.
    </p></li><li class="step"><p>
     With <span class="guimenu">Set Filter</span> define the set of users you want to
     manage. The dialog lists users in the system and the groups the users
     belong to.
    </p></li><li class="step"><p>
     To modify options for an existing user, select an entry and click
     <span class="guimenu">Edit</span>.
    </p><p>
     To create a new user account, click <span class="guimenu">Add</span>.
    </p></li><li class="step"><p>
     Enter the appropriate user data on the first tab, such as
     <span class="guimenu">Username </span> (which is used for login) and
     <span class="guimenu">Password</span>. This data is sufficient to create a new user.
     If you click <span class="guimenu">OK</span> now, the system automatically
     assigns a user ID and sets all other values as default.
    </p></li><li class="step"><p>
     Activate <span class="guimenu">Receive System Mail</span> if you want system
     notifications to be delivered to this user's mailbox. This creates a mail
     alias for <code class="systemitem">root</code> and the user can read the system mail without having
     to first log in as <code class="systemitem">root</code>.
    </p><p>
     The mails sent by system services are stored in the local mailbox
     <code class="filename">/var/spool/mail/</code><em class="replaceable">USERNAME</em>,
     where <em class="replaceable">USERNAME</em> is the login name of the
     selected user. To read e-mails, you can use the <code class="command">mail</code>
     command.
    </p></li><li class="step"><p>
     To adjust further details such as the user ID or the path to
     the user's home directory, do so on the <span class="guimenu">Details</span> tab.
    </p><p>
     If you need to relocate the home directory of an existing user, enter the
     path to the new home directory there and move the contents of the current
     home directory with <span class="guimenu">Move to New Location</span>. Otherwise, a
     new home directory is created without any of the existing data.
    </p></li><li class="step"><p>
     To force users to regularly change their password or set other password
     options, switch to <span class="guimenu">Password Settings</span> and adjust the
     options. For more details, refer to
     <a class="xref" href="#sec-yast-userman-adv-passw" title="6.3.2. Enforcing password policies">Section 6.3.2, “Enforcing password policies”</a>.
    </p></li><li class="step"><p>
     If all options are set according to your wishes, click
     <span class="guimenu">OK</span>.
    </p></li><li class="step"><p>
     Click <span class="guimenu">OK</span> to close the administration dialog and to save
     the changes. A newly added user can now log in to the system using the
     login name and password you created.
    </p><p>
     Alternatively, to save all changes without exiting the
     <span class="guimenu">User and Group Administration</span> dialog, click
     <span class="guimenu">Expert Options</span> › <span class="guimenu">Write Changes
     Now</span>.
    </p></li></ol></div></div><div id="id-1.3.3.7.5.6" data-id-title="Do not rename the root account" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Do not rename the <code class="systemitem">root</code> account</div><p>
      While it is technically possible to rename the <code class="systemitem">root</code> account, certain
      applications, scripts or third-party products may rely on the existence of
      a user called <code class="systemitem">root</code>. While such a configuration always targets
      individual environments, necessary adjustments could be overwritten by
      vendor updates, so this becomes an ongoing task rather than a one-time
      setting. This is especially true in complex setups involving third-party
      applications, where it needs to be verified with every vendor involved
      whether a rename of the <code class="systemitem">root</code> account is supported.
    </p><p>
      As the implications for renaming the <code class="systemitem">root</code> account cannot be foreseen, SUSE does not
      support renaming the <code class="systemitem">root</code> account.
    </p><p>
      Usually, the idea behind renaming the <code class="systemitem">root</code> account is to hide it or make it unpredictable.
      However, <code class="filename">/etc/passwd</code> requires <code class="literal">644</code> permissions for
      regular users, so any user of the system can retrieve the login name for the
      user ID 0.
      <span class="phrase">For better ways to secure the <code class="systemitem">root</code> account, refer to
        <span class="intraxref">Book “Security and Hardening Guide”, Chapter 14 “User management”, Section 14.5 “Restricting <code class="systemitem">root</code> logins”</span> and
        <span class="intraxref">Book “Security and Hardening Guide”, Chapter 14 “User management”, Section 14.5.3 “Restricting SSH logins”</span>.</span>
    </p></div><div id="id-1.3.3.7.5.7" data-id-title="Matching user IDs" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Matching user IDs</div><p>
    It is useful to match the (local) user ID to the ID in the network.
    For example, a new (local) user on a laptop should be integrated into a
    network environment with the same user ID. This ensures that the
    file ownership of the files the user creates <span class="quote">“<span class="quote">offline</span>”</span> is the
    same as if they had created them directly on the network.
   </p></div><div class="procedure" id="id-1.3.3.7.5.8" data-id-title="Disabling or deleting user accounts"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 6.2: </span><span class="title-name">Disabling or deleting user accounts </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.7.5.8">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open the YaST <span class="guimenu">User and Group Administration</span> dialog
     and click the <span class="guimenu">Users</span> tab.
    </p></li><li class="step"><p>
     To temporarily disable a user account without deleting it, select the user
     from the list and click <span class="guimenu">Edit</span>. Activate <span class="guimenu">Disable
     User Login</span>. The user cannot log in to your machine until you
     enable the account again.
    </p></li><li class="step"><p>
     To delete a user account, select the user from the list and click
     <span class="guimenu">Delete</span>. Choose if you also want to delete the user's
     home directory or to retain the data.
    </p></li></ol></div></div></section><section class="sect1" id="sec-yast-userman-adv" data-id-title="Additional options for user accounts"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.3 </span><span class="title-name">Additional options for user accounts</span></span> <a title="Permalink" class="permalink" href="#sec-yast-userman-adv">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Besides the settings for a default user account, <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> offers
   further options. For example, options to enforce password policies, use
   encrypted home directories or define disk quotas for users and groups.
  </p><section class="sect2" id="sec-yast-userman-adv-login" data-id-title="Automatic login and passwordless login"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.3.1 </span><span class="title-name">Automatic login and passwordless login</span></span> <a title="Permalink" class="permalink" href="#sec-yast-userman-adv-login">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you use the GNOME desktop environment you can configure <span class="emphasis"><em>Auto
    Login</em></span> for a certain user and <span class="emphasis"><em>Passwordless
    Login</em></span> for all users. Auto login causes a user to become
    automatically logged in to the desktop environment on boot. This
    functionality can only be activated for one user at a time. Login without
    password allows all users to log in to the system after they have entered
    their user name in the login manager.
   </p><div id="id-1.3.3.7.6.3.3" data-id-title="Security risk" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Security risk</div><p>
     Enabling <span class="emphasis"><em>Auto Login</em></span> or <span class="emphasis"><em>Passwordless
     Login</em></span> on a machine that can be accessed by more than one person
     is a security risk. Without the need to authenticate, any user can gain
     access to your system and your data. If your system contains confidential
     data, do not use this functionality.
    </p></div><p>
    To activate auto login or login without password, access these
    functions in the YaST <span class="guimenu">User and Group Administration</span>
    with <span class="guimenu">Expert Options</span> › <span class="guimenu">Login
    Settings</span>.
   </p></section><section class="sect2" id="sec-yast-userman-adv-passw" data-id-title="Enforcing password policies"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.3.2 </span><span class="title-name">Enforcing password policies</span></span> <a title="Permalink" class="permalink" href="#sec-yast-userman-adv-passw">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    On any system with multiple users, it is a good idea to enforce at least
    basic password security policies. Users should change their passwords
    regularly and use strong passwords that cannot easily be exploited. For
    local users, proceed as follows:

   </p><div class="procedure" id="id-1.3.3.7.6.4.3" data-id-title="Configuring password settings"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 6.3: </span><span class="title-name">Configuring password settings </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.7.6.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Open the YaST <span class="guimenu">User and Group Administration</span> dialog
      and select the <span class="guimenu">Users</span> tab.
     </p></li><li class="step"><p>
      Select user and click <span class="guimenu">Edit</span>.
     </p></li><li class="step"><p>
      Switch to the <span class="guimenu">Password Settings</span> tab. The user's last
      password change is displayed on the tab.
     </p></li><li class="step"><p>
      To make the user change their password at next login, activate
      <span class="guimenu">Force Password Change</span>.
     </p></li><li class="step"><p>
      To enforce password rotation, set a <span class="guimenu">Maximum Number of Days for
      the Same Password</span> and a <span class="guimenu">Minimum Number of Days for the
      Same Password</span>.
     </p></li><li class="step"><p>
      To remind the user to change their password before it expires, set the
      number of <span class="guimenu">Days before Password Expiration to Issue
      Warning</span>.
     </p></li><li class="step"><p>
      To restrict the period of time the user can log in after their password has
      expired, change the value in <span class="guimenu">Days after Password Expires with
      Usable Login</span>.
     </p></li><li class="step"><p>
      You can also specify a certain expiration date for the complete account.
      Enter the <span class="guimenu">Expiration Date</span> in
      <em class="replaceable">YYYY-MM-DD</em> format. This setting is not
      password-related but rather applies to the account itself.
     </p></li><li class="step"><p>
      For more information about options and default values, click
      <span class="guimenu">Help</span>.
     </p></li><li class="step"><p>
      Apply your changes with <span class="guimenu">OK</span>.
     </p></li></ol></div></div></section><section class="sect2" id="sec-yast-userman-adv-quota" data-id-title="Managing quotas"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">6.3.3 </span><span class="title-name">Managing quotas</span></span> <a title="Permalink" class="permalink" href="#sec-yast-userman-adv-quota">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To prevent system capacities from being exhausted without notification,
    system administrators can set up quotas for users or groups. Quotas can be
    defined for one or more file systems and restrict the amount of disk space
    that can be used and the number of inodes (index nodes) that can be created
    there. Inodes are data structures on a file system that store basic
    information about a regular file, directory or other file system object.
    They store all attributes of a file system object (like user and group
    ownership, read, write or execute permissions), except file name and
    contents.
   </p><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> allows usage of <code class="literal">soft</code> and
    <code class="literal">hard</code> quotas. Additionally, grace intervals can be
    defined that allow users or groups to temporarily exceed their quotas by
    certain amounts.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.7.6.5.4.1"><span class="term">Soft quota</span></dt><dd><p>
       Defines a warning level at which users are informed that they are nearing
       their limit. Administrators may urge the users to clean up and reduce
       their data on the partition. The soft quota limit is normally lower than
       the hard quota limit.
      </p></dd><dt id="id-1.3.3.7.6.5.4.2"><span class="term">Hard quota</span></dt><dd><p>
       Defines the limit at which write requests are denied. When the hard
       quota is reached, no more data can be stored and applications may crash.
      </p></dd><dt id="id-1.3.3.7.6.5.4.3"><span class="term">Grace period</span></dt><dd><p>
       Defines the time between the overflow of the soft quota and a warning
       being issued. Normally set to a rather low value of one or several hours.
      </p></dd></dl></div><div class="procedure" id="id-1.3.3.7.6.5.5" data-id-title="Enabling quota support for a partition"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 6.4: </span><span class="title-name">Enabling quota support for a partition </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.7.6.5.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
     To configure quotas for certain users and groups, you need to enable quota
     support for the respective partition in the YaST Expert Partitioner
     first.
    </p><div id="id-1.3.3.7.6.5.5.3" data-id-title="Quotas for Btrfs partitions" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Quotas for Btrfs partitions</div><p>

      Quotas for Btrfs partitions are handled differently. For more
      information, see <span class="intraxref">Book “Storage Administration Guide”, Chapter 1 “Overview of file systems in Linux”, Section 1.2.5 “Btrfs quota support for subvolumes”</span>.

      
     </p></div><ol class="procedure" type="1"><li class="step"><p>
      In YaST, select <span class="guimenu">System</span> › <span class="guimenu">Partitioner</span> and click
      <span class="guimenu">Yes</span> to proceed.
     </p></li><li class="step"><p>
      In the <span class="guimenu">Expert Partitioner</span>, select the partition for
      which to enable quotas and click <span class="guimenu">Edit</span>.
     </p></li><li class="step"><p>

      Click <span class="guimenu">Fstab Options</span> and activate <span class="guimenu">Enable Quota
      Support</span>. If the <code class="systemitem">quota</code> package is not
      already installed, it will be installed when you confirm the respective
      message with <span class="guimenu">Yes</span>.
     </p></li><li class="step"><p>
      Confirm your changes and leave the <span class="guimenu">Expert Partitioner</span>.
     </p></li><li class="step"><p>
      Make sure the service <code class="systemitem">quotaon</code> is
      running by entering the following command:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl status quotaon.service</pre></div><p>
      It should be marked as being <code class="literal">active</code>. If this is not
      the case, start it with the command <code class="command">systemctl start
      quotaon.service</code>.
     </p></li></ol></div></div><div class="procedure" id="id-1.3.3.7.6.5.6" data-id-title="Setting up quotas for users or groups"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 6.5: </span><span class="title-name">Setting up quotas for users or groups </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.7.6.5.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
     Now you can define soft or hard quotas for specific users or groups and
     set time periods as grace intervals.
    </p><ol class="procedure" type="1"><li class="step"><p>
      In the YaST <span class="guimenu">User and Group Administration</span>, select
      the user or the group you want to set the quotas for and click
      <span class="guimenu">Edit</span>.
     </p></li><li class="step"><p>
      On the <span class="guimenu">Plug-Ins</span> tab, select the <span class="guimenu">Manage User
      Quota</span> entry and click <span class="guimenu">Launch</span> to open the
      <span class="guimenu">Quota Configuration</span> dialog.
     </p></li><li class="step"><p>
      From <span class="guimenu">File System</span>, select the partition to which the
      quota should apply.
     </p><div class="informalfigure"><div class="mediaobject"><a href="images/yast2_users_quota_qt.png"><img src="images/yast2_users_quota_qt.png" width="70%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
      Below <span class="guimenu">Size Limits</span>, restrict the amount of disk space.
      Enter the number of 1 KB blocks the user or group may have on this
      partition. Specify a <span class="guimenu">Soft Limit</span> and a <span class="guimenu">Hard
      Limit</span> value.
     </p></li><li class="step"><p>
      Additionally, you can restrict the number of inodes the user or group may
      have on the partition. Below <span class="guimenu">Inodes Limits</span>, enter a
      <span class="guimenu">Soft Limit</span> and <span class="guimenu">Hard Limit</span>.
     </p></li><li class="step"><p>
      You can only define grace intervals if the user or group has already
      exceeded the soft limit specified for size or inodes. Otherwise, the
      time-related text boxes are not activated. Specify the time period for
      which the user or group is allowed to exceed the limits set above.
     </p></li><li class="step"><p>
      Confirm your settings with <span class="guimenu">OK</span>.
     </p></li><li class="step"><p>
      Click <span class="guimenu">OK</span> to close the administration dialog and save
      the changes.
     </p><p>
      Alternatively, to save all changes without exiting the
      <span class="guimenu">User and Group Administration</span> dialog, click
      <span class="guimenu">Expert Options</span> › <span class="guimenu">Write Changes
      Now</span>.
     </p></li></ol></div></div><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> also ships command line tools like
    <code class="literal">repquota</code> or <code class="literal">warnquota</code>. System
    administrators can use these tools to control the disk usage or send e-mail
    notifications to users exceeding their quota. Using
    <code class="command">quota_nld</code>, administrators can also forward kernel
    messages about exceeded quotas to D-BUS. For more information, refer to the
    <code class="systemitem">repquota</code>, the <code class="systemitem">warnquota</code>
    and the <code class="command">quota_nld</code> man page.

   </p></section></section><section class="sect1" id="sec-yast-userman-defaults" data-id-title="Changing default settings for local users"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.4 </span><span class="title-name">Changing default settings for local users</span></span> <a title="Permalink" class="permalink" href="#sec-yast-userman-defaults">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   When creating new local users, several default settings are used by YaST.
    These include, for example, the group the user belongs to, or the access
    permissions of the user's home directory. You can change these default
    settings to meet your requirements:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open the YaST <span class="guimenu">User and Group Administration</span> dialog
     and select the <span class="guimenu">Defaults for New Users</span> tab.
    </p></li><li class="step"><p>
     To change the group the new users should automatically belong to,
     select another group from <span class="guimenu">Default Group</span>.
    </p></li><li class="step"><p>
     If you do not want to use
     <code class="filename">/home/<em class="replaceable">USERNAME</em></code> as the default
     path for new users' home directories, modify the <span class="guimenu">Path Prefix for
     Home Directory</span>.
    </p></li><li class="step"><p>
     To change the default permission modes for newly created home directories,
     adjust the umask value in <span class="guimenu">Umask for Home Directory</span>. For
     more information about umask, refer to <span class="intraxref">Book “Security and Hardening Guide”, Chapter 19 “Access control lists in Linux”</span>
     and to the <code class="command">umask</code> man page.
    </p></li><li class="step"><p>
     For information about the individual options, click
     <span class="guimenu">Help</span>.
    </p></li><li class="step"><p>
     Apply your changes with <span class="guimenu">OK</span>.
    </p></li></ol></div></div></section><section class="sect1" id="sec-yast-userman-assign" data-id-title="Assigning users to groups"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.5 </span><span class="title-name">Assigning users to groups</span></span> <a title="Permalink" class="permalink" href="#sec-yast-userman-assign">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Local users are assigned to several groups according to the
   default settings, which you can access from the <span class="guimenu">User and Group
   Administration</span> dialog on the <span class="guimenu">Defaults for New
   Users</span> tab. In the following, learn how to modify an individual
   user's group assignment. If you need to change the default group assignments
   for new users, refer to <a class="xref" href="#sec-yast-userman-defaults" title="6.4. Changing default settings for local users">Section 6.4, “Changing default settings for local users”</a>.
  </p><div class="procedure" id="id-1.3.3.7.8.3" data-id-title="Changing a users group assignment"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 6.6: </span><span class="title-name">Changing a user's group assignment </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.7.8.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open the YaST <span class="guimenu">User and Group Administration</span> dialog
     and click the <span class="guimenu">Users</span> tab. It lists users and the
     groups the users belong to.
    </p></li><li class="step"><p>
     Click <span class="guimenu">Edit</span> and switch to the <span class="guimenu">Details</span>
     tab.
    </p></li><li class="step"><p>
     To change the group the user belongs to, click <span class="guimenu">Default
     Group</span> and select the group from the list.
    </p></li><li class="step"><p>
     To assign the user additional secondary groups, activate the corresponding
     check boxes in the <span class="guimenu">Additional Groups</span> list.
    </p></li><li class="step"><p>
     Click <span class="guimenu">OK</span> to apply your changes.
    </p></li><li class="step"><p>
     Click <span class="guimenu">OK</span> to close the administration dialog and save
     the changes.
    </p><p>
     Alternatively, to save all changes without exiting the
     <span class="guimenu">User and Group Administration</span> dialog, click
     <span class="guimenu">Expert Options</span> › <span class="guimenu">Write Changes
     Now</span>.
    </p></li></ol></div></div></section><section class="sect1" id="sec-yast-userman-groups" data-id-title="Managing groups"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.6 </span><span class="title-name">Managing groups</span></span> <a title="Permalink" class="permalink" href="#sec-yast-userman-groups">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   With YaST you can also easily add, modify or delete groups.
  </p><div class="procedure" id="id-1.3.3.7.9.3" data-id-title="Creating and modifying groups"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 6.7: </span><span class="title-name">Creating and modifying groups </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.7.9.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open the YaST <span class="guimenu">User and Group Management</span> dialog and
     click the <span class="guimenu">Groups</span> tab.
    </p></li><li class="step"><p>
     With <span class="guimenu">Set Filter</span> define the set of groups you want to
     manage. The dialog lists groups in the system.
    </p></li><li class="step"><p>
     To create a new group, click <span class="guimenu">Add</span>.
    </p></li><li class="step"><p>
     To modify an existing group, select the group and click
     <span class="guimenu">Edit</span>.
    </p></li><li class="step"><p>
     In the following dialog, enter or change the data. The list on the right
     shows an overview of all available users and system users which can be
     members of the group.
    </p><div class="informalfigure"><div class="mediaobject"><a href="images/yast2_groups_edit_qt.png"><img src="images/yast2_groups_edit_qt.png" width="75%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
     To add existing users to a new group select them from the list of possible
     <span class="guimenu">Group Members</span> by checking the corresponding box. To
     remove them from the group deactivate the box.
    </p></li><li class="step"><p>
     Click <span class="guimenu">OK</span> to apply your changes.
    </p></li><li class="step"><p>
     Click <span class="guimenu">OK</span> to close the administration dialog and save
     the changes.
    </p><p>
     Alternatively, to save all changes without exiting the
     <span class="guimenu">User and Group Administration</span> dialog, click
     <span class="guimenu">Expert Options</span> › <span class="guimenu">Write Changes
     Now</span>.
    </p></li></ol></div></div><p>
   To delete a group, it must not contain any group members. To delete a group,
   select it from the list and click <span class="guimenu">Delete</span>. Click
   <span class="guimenu">OK</span> to close the administration dialog and save the
   changes. Alternatively, to save all changes without exiting the
   <span class="guimenu">User and Group Administration</span> dialog, click <span class="guimenu">Expert Options</span> › <span class="guimenu">Write Changes Now</span>.
  </p></section><section class="sect1" id="sec-yast-userman-authent" data-id-title="Changing the user authentication method"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.7 </span><span class="title-name">Changing the user authentication method</span></span> <a title="Permalink" class="permalink" href="#sec-yast-userman-authent">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   When your machine is connected to a network, you can change the
   authentication method. The following options are available:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.7.10.3.1"><span class="term">NIS</span></dt><dd><p>
      Users are administered centrally on a NIS server for all systems
      in the network. For details, see <span class="intraxref">Book “Security and Hardening Guide”, Chapter 3 “Using NIS”</span>.
     </p></dd><dt id="id-1.3.3.7.10.3.2"><span class="term">SSSD</span></dt><dd><p>
      The <span class="emphasis"><em>System Security Services Daemon</em></span> (SSSD)
      can locally cache user data  and then allow users to use the
      data, even if the real directory service is (temporarily)
      unreachable. For details, see <span class="intraxref">Book “Security and Hardening Guide”, Chapter 4 “Setting up authentication clients using YaST”, Section 4.2 “SSSD”</span>.
     </p></dd><dt id="id-1.3.3.7.10.3.3"><span class="term">Samba</span></dt><dd><p>
      SMB authentication is often used in mixed Linux and Windows
      networks. For details, see <span class="intraxref">Book “Storage Administration Guide”, Chapter 20 “Samba”</span>
      .
     </p></dd></dl></div><p>
   To change the authentication method, proceed as follows:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open the <span class="guimenu">User and Group Administration</span> dialog in
     YaST.
    </p></li><li class="step"><p>
     Click the <span class="guimenu">Authentication Settings</span> tab to show an
     overview of the available authentication methods and the current settings.
    </p></li><li class="step"><p>
     To change the authentication method, click <span class="guimenu">Configure</span>
     and select the authentication method you want to modify. This takes you
     directly to the client configuration modules in YaST. For information
     about the configuration of the appropriate client, refer to the following
     sections:
    </p><p><span class="formalpara-title">NIS:</span>
      <span class="intraxref">Book “Security and Hardening Guide”, Chapter 3 “Using NIS”, Section 3.2 “Configuring NIS clients”</span>
     </p><p><span class="formalpara-title">LDAP:</span>
      <span class="phrase"><span class="intraxref">Book “Security and Hardening Guide”, Chapter 4 “Setting up authentication clients using YaST”, Section 4.1 “Configuring an authentication client with YaST”</span></span>
     </p><p><span class="formalpara-title">Samba:</span>
      <span class="intraxref">Book “Storage Administration Guide”, Chapter 20 “Samba”, Section 20.5.1 “Configuring a Samba client with YaST”</span>
     </p><p><span class="formalpara-title">SSSD:</span>
      <span class="intraxref">Book “Security and Hardening Guide”, Chapter 4 “Setting up authentication clients using YaST”, Section 4.2 “SSSD”</span>
     </p></li><li class="step"><p>
     After accepting the configuration, return to the <span class="guimenu">User and Group
     Administration</span> overview.
    </p></li><li class="step"><p>
     Click <span class="guimenu">OK</span> to close the administration dialog.
    </p></li></ol></div></div></section><section class="sect1" id="sec-yast-userman-defaultsystemusers" data-id-title="Default system users"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.8 </span><span class="title-name">Default system users</span></span> <a title="Permalink" class="permalink" href="#sec-yast-userman-defaultsystemusers">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   By default, <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> creates user names, which cannot be deleted. These
   users are typically defined in the Linux Standard Base (see <a class="link" href="https://refspecs.linuxfoundation.org/lsb.shtml" target="_blank">https://refspecs.linuxfoundation.org/lsb.shtml</a>).  The
   following list provides the common user names and their purpose:
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Common user names installed by default </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.7.11.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.3.7.11.3.2"><span class="term"><code class="systemitem">bin</code>, </span><span class="term"><code class="systemitem">daemon</code></span></dt><dd><p>
      Legacy user, included for compatibility with legacy applications. New
      applications should no longer use this user name.
     </p></dd><dt id="id-1.3.3.7.11.3.3"><span class="term"><code class="systemitem">gdm</code></span></dt><dd><p>
      Used by GNOME Display Manager (GDM) to provide graphical logins and
      manage local and remote displays.
     </p></dd><dt id="id-1.3.3.7.11.3.4"><span class="term"><code class="systemitem">lp</code></span></dt><dd><p>
      Used by the Printer daemon for Common Unix Printing System (CUPS).
     </p></dd><dt id="id-1.3.3.7.11.3.5"><span class="term"><code class="systemitem">mail</code></span></dt><dd><p>
      User reserved for mailer programs like <code class="command">sendmail</code>
      or <code class="command">postfix</code>.
     </p></dd><dt id="id-1.3.3.7.11.3.6"><span class="term"><code class="systemitem">man</code></span></dt><dd><p>
      Used by man to access man pages.
     </p></dd><dt id="id-1.3.3.7.11.3.7"><span class="term"><code class="systemitem">messagebus</code></span></dt><dd><p>
      Used to access D-Bus (desktop bus), a software bus for inter-process
      communication. Daemon is <code class="systemitem">dbus-daemon</code>.
     </p></dd><dt id="id-1.3.3.7.11.3.8"><span class="term"><code class="systemitem">nobody</code></span></dt><dd><p>
      User that owns no files and is in no privileged groups. Nowadays,
      its use is limited as it is recommended by Linux Standard Base to provide
      a separate user account for each daemon.
     </p></dd><dt id="id-1.3.3.7.11.3.9"><span class="term"><code class="systemitem">nscd</code></span></dt><dd><p>
      Used by the Name Service Caching Daemon. This daemon is a lookup
      service to improve performance with NIS and LDAP.
      Daemon is <code class="systemitem">nscd</code>.
     </p></dd><dt id="id-1.3.3.7.11.3.10"><span class="term"><code class="systemitem">polkitd</code></span></dt><dd><p>
      Used by the PolicyKit Authorization Framework, which defines and
      handles authorization requests for unprivileged processes.
      Daemon is <code class="systemitem">polkitd</code>.
     </p></dd><dt id="id-1.3.3.7.11.3.11"><span class="term"><code class="systemitem">postfix</code></span></dt><dd><p>
      Used by the Postfix mailer.
     </p></dd><dt id="id-1.3.3.7.11.3.12"><span class="term"><code class="systemitem">pulse</code></span></dt><dd><p>
      Used by the Pulseaudio sound server.
     </p></dd><dt id="id-1.3.3.7.11.3.13"><span class="term"><code class="systemitem">root</code></span></dt><dd><p>
      Used by the system administrator, providing all appropriate privileges.
     </p></dd><dt id="id-1.3.3.7.11.3.14"><span class="term"><code class="systemitem">rpc</code></span></dt><dd><p>
      Used by the <code class="command">rpcbind</code> command, an RPC
      port mapper.
     </p></dd><dt id="id-1.3.3.7.11.3.15"><span class="term"><code class="systemitem">rtkit</code></span></dt><dd><p>
      Used by the <span class="package">rtkit</span> package providing a
      D-Bus system service for real time scheduling mode.
     </p></dd><dt id="id-1.3.3.7.11.3.16"><span class="term"><code class="systemitem">salt</code></span></dt><dd><p>
      User for parallel remote execution provided by Salt. Daemon
      is named <code class="systemitem">salt-master</code>.
     </p></dd><dt id="id-1.3.3.7.11.3.17"><span class="term"><code class="systemitem">scard</code></span></dt><dd><p>
      User for communication with smart cards and readers. Daemon is named
      <code class="systemitem">pcscd</code>.
     </p></dd><dt id="id-1.3.3.7.11.3.18"><span class="term"><code class="systemitem">srvGeoClue</code></span></dt><dd><p>
      Used by the GeoClue D-Bus service to provide location information.
     </p></dd><dt id="id-1.3.3.7.11.3.19"><span class="term"><code class="systemitem">sshd</code></span></dt><dd><p>
      Used by the Secure Shell daemon (SSH) to ensure secured and encrypted
      communication over an insecure network.
     </p></dd><dt id="id-1.3.3.7.11.3.20"><span class="term"><code class="systemitem">statd</code></span></dt><dd><p>
      Used by the Network Status Monitor protocol (NSM), implemented in the
      <code class="systemitem">rpc.statd</code> daemon, to listen
      for reboot notifications.
     </p></dd><dt id="id-1.3.3.7.11.3.21"><span class="term"><code class="systemitem">systemd-coredump</code></span></dt><dd><p>
      Used by the <code class="command">/usr/lib/systemd/systemd-coredump</code> command
      to acquire, save and process core dumps.
     </p></dd><dt id="id-1.3.3.7.11.3.22"><span class="term"><code class="systemitem">systemd-timesync</code></span></dt><dd><p>
      Used by the <code class="command">/usr/lib/systemd/systemd-timesyncd</code> command
      to synchronize the local system clock with a remote Network Time
      Protocol (NTP) server.
     </p></dd></dl></div></section><section class="sect1" id="default-system-groups" data-id-title="Default system groups"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6.9 </span><span class="title-name">Default system groups</span></span> <a title="Permalink" class="permalink" href="#default-system-groups">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_userman.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    By default, SLE creates multiple user groups that are used by system
    services. The following list describes examples of required and common
    optional groups.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.7.12.3.1"><span class="term"><code class="systemitem">root</code></span></dt><dd><p>
            Administrative group with all privileges.
          </p></dd><dt id="id-1.3.3.7.12.3.2"><span class="term"><code class="systemitem">bin</code></span></dt><dd><p>
            Included for compatibility with legacy applications. New
            applications should not use this group.
          </p></dd><dt id="id-1.3.3.7.12.3.3"><span class="term"><code class="systemitem">daemon</code></span></dt><dd><p>
            Previously used to limit daemons' access to the system. Daemons
            should run under their own UID/GID now to separate daemons from
            one another.
          </p></dd><dt id="id-1.3.3.7.12.3.4"><span class="term"><code class="systemitem">audio</code></span></dt><dd><p>
            Privileges for audio devices.
          </p></dd><dt id="id-1.3.3.7.12.3.5"><span class="term"><code class="systemitem">gdm</code></span></dt><dd><p>
            Privileges for the GNOME Display Manager.
          </p></dd><dt id="id-1.3.3.7.12.3.6"><span class="term"><code class="systemitem">chrony</code></span></dt><dd><p>
            Privileges for the time synchronization service.
          </p></dd><dt id="id-1.3.3.7.12.3.7"><span class="term"><code class="systemitem">kvm</code></span></dt><dd><p>
            Privileges for the QEMU machine emulator toolkit.
          </p></dd><dt id="id-1.3.3.7.12.3.8"><span class="term"><code class="systemitem">libvirt</code></span></dt><dd><p>
            Privileges for virtualization stack.
          </p></dd><dt id="id-1.3.3.7.12.3.9"><span class="term"><code class="systemitem">lp</code></span></dt><dd><p>
            Privileges for printer operation.
          </p></dd><dt id="id-1.3.3.7.12.3.10"><span class="term"><code class="systemitem">mail</code></span></dt><dd><p>
          Privileges for mail services.
        </p></dd><dt id="id-1.3.3.7.12.3.11"><span class="term"><code class="systemitem">man</code></span></dt><dd><p>
            Privileges specific to manual pages and the <code class="command">man</code>
            command.
          </p></dd><dt id="id-1.3.3.7.12.3.12"><span class="term"><code class="systemitem">sshd</code></span></dt><dd><p>
            Privileges for SSH communication protocol daemon.
          </p></dd></dl></div></section></section><section class="chapter" id="cha-onlineupdate-you" data-id-title="YaST online update"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">7 </span><span class="title-name">YaST online update</span></span> <a title="Permalink" class="permalink" href="#cha-onlineupdate-you">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_you.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  SUSE offers a continuous stream of software security updates for your
  product. By default, the update applet is used to keep your system
  up to date. Refer to <a class="xref" href="#sec-updater" title="8.5. The GNOME package updater">Section 8.5, “The GNOME package updater”</a> for further information on
  the update applet. This chapter covers the alternative tool for updating
  software packages: YaST Online Update.
 </p><p>
  The current patches for <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> are available from an update
  software repository. <span class="phrase">If you have
  registered your product during the installation, an update repository is
  already configured. If you have not registered <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, you can do so
  by starting the <span class="guimenu">Product Registration</span> in YaST.</span>
  Alternatively, you can manually add an update repository from a source you
  trust. To add or remove repositories, start the Repository Manager with
  <span class="guimenu">Software</span> › <span class="guimenu">Software Repositories</span> in YaST. Learn more
  about the Repository Manager in <a class="xref" href="#sec-yast-software-instsource" title="8.4. Managing software repositories and services">Section 8.4, “Managing software repositories and services”</a>.
 </p><div id="id-1.3.3.8.5" data-id-title="Error on accessing the update catalog" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Error on accessing the update catalog</div><p>
   If you are not able to access the update catalog, this may happen because of
   an expired subscription. Normally, <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> comes with a one-year or
   three-year subscription, during which you have access to the update catalog.
   This access will be denied after the subscription ends.
  </p><p>
   If an access to the update catalog is denied, you can see a warning
   message prompting you to visit the SUSE Customer Center and check your
   subscription. The SUSE Customer Center is available at <a class="link" href="https://scc.suse.com//" target="_blank">https://scc.suse.com//</a>.
  </p></div><div id="id-1.3.3.8.6" data-id-title="Firewall settings for receiving updates" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Firewall settings for receiving updates</div><p>
  If your system is behind a firewall that blocks outgoing traffic,
  make sure to allow connections to <code class="uri">https://scc.suse.com/</code> and
  <code class="uri">https://updates.suse.com</code> on ports 80 and 443 in order
  to receive updates. For more information such as IP addresses and proxy server
  configuration, refer to
  <a class="link" href="https://www.suse.com/support/kb/doc/?id=000021034" target="_blank">https://www.suse.com/support/kb/doc/?id=000021034</a>.
 </p></div><p>
  SUSE provides updates with different relevance levels:
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.8.8.1"><span class="term">Security updates</span></dt><dd><p>
     Fix severe security hazards and should always be installed.
    </p></dd><dt id="id-1.3.3.8.8.2"><span class="term">Recommended updates</span></dt><dd><p>
     Fix issues that could compromise your computer.
    </p></dd><dt id="id-1.3.3.8.8.3"><span class="term">Optional updates</span></dt><dd><p>
     Fix non-security relevant issues or provide enhancements.
    </p></dd></dl></div><section class="sect1" id="sec-onlineupdate-you-overview" data-id-title="The online update dialog"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.1 </span><span class="title-name">The online update dialog</span></span> <a title="Permalink" class="permalink" href="#sec-onlineupdate-you-overview">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_you.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To open the YaST <span class="guimenu">Online Update</span> dialog, start YaST and
   select <span class="guimenu">Software </span> › <span class="guimenu">Online
   Update</span>. Alternatively, start it from the command
   line with <code class="command">yast2 online_update</code>.
  </p><p>
   The <span class="guimenu">Online Update</span> window consists of four sections.
  </p><div class="figure" id="id-1.3.3.8.9.4"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_you.png"><img src="images/yast2_you.png" width="75%" alt="YaST online update" title="YaST online update"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 7.1: </span><span class="title-name">YaST online update </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.8.9.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_you.xml" title="Edit source document"> </a></div></div></div><p>
   The <span class="guimenu">Summary</span> section on the left lists the available
   patches for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. The patches are sorted by security relevance:
   <code class="literal">security</code>, <code class="literal">recommended</code>, and
   <code class="literal">optional</code>. You can change the view of the
   <span class="guimenu">Summary</span> section by selecting one of the following options
   from <span class="guimenu">Show Patch Category</span>:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.8.9.6.1"><span class="term"><span class="guimenu">Needed patches</span> (default view)</span></dt><dd><p>
      Non-installed patches that apply to packages installed on your system.
     </p></dd><dt id="id-1.3.3.8.9.6.2"><span class="term"><span class="guimenu">Unneeded patches</span>
    </span></dt><dd><p>
      Patches that either apply to packages not installed on your system, or
      patches that have requirements which have already have been fulfilled
      (because the relevant packages have already been updated from another
      source).
     </p></dd><dt id="id-1.3.3.8.9.6.3"><span class="term"><span class="guimenu">All patches</span>
    </span></dt><dd><p>
      All patches available for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
     </p></dd></dl></div><p>
   Each list entry in the <span class="guimenu">Summary</span> section consists of a
   symbol and the patch name. For an overview of the possible symbols and their
   meaning, press <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F1</span>. Actions required by <code class="literal">Security</code> and
   <code class="literal">Recommended</code> patches are automatically preset. These
   actions are <span class="guimenu">Autoinstall</span>, <span class="guimenu">Autoupdate</span>
   and <span class="guimenu">Autodelete</span>.
  </p><p>
   If you install an up-to-date package from a repository other than the update
   repository, the requirements of a patch for this package may be fulfilled
   with this installation. In this case, a check mark is displayed in front of
   the patch summary. The patch is visible in the list until you mark it
   for installation. This does not install the patch (because the
   package already is up to date), but mark the patch as having been installed.
  </p><p>
   Select an entry in the <span class="guimenu">Summary</span> section to view a short
   <span class="guimenu">Patch Description</span> at the bottom left corner of the
   dialog. The upper right section lists the packages included in the selected
   patch (a patch can consist of several packages). Click an entry in the upper
   right section to view details about the respective package that is included
   in the patch.
  </p></section><section class="sect1" id="sec-onlineupdate-you-install" data-id-title="Installing patches"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.2 </span><span class="title-name">Installing patches</span></span> <a title="Permalink" class="permalink" href="#sec-onlineupdate-you-install">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_you.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The YaST Online Update dialog allows you to either install all available
   patches at once or manually select the desired patches. You may also revert patches that have been applied to the
   system.
  </p><p>
   By default, all new patches (except <code class="literal">optional</code> ones) that
   are currently available for your system are already marked for installation.
   They will be applied automatically once you click <span class="guimenu">Accept</span>
   or <span class="guimenu">Apply</span>.

   If one or multiple patches require a system reboot, you will be notified
   about this before the patch installation starts. You can then either decide
   to continue with the installation of the selected patches, skip the
   installation of all patches that need rebooting and install the rest, or go
   back to the manual patch selection.
  </p><div class="procedure" id="id-1.3.3.8.10.4" data-id-title="Applying patches with YaST online update"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 7.1: </span><span class="title-name">Applying patches with YaST online update </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.8.10.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_you.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Start YaST and select <span class="guimenu">Software</span> › <span class="guimenu">Online Update</span>.
    </p></li><li class="step"><p>
     To automatically apply all new patches (except <code class="literal">optional</code>
     ones) that are currently available for your system, click
     <span class="guimenu">Apply</span> or <span class="guimenu">Accept</span>.
    </p></li><li class="step"><p>
     First modify the selection of patches that you want to apply:
    </p><ol type="a" class="substeps"><li class="step"><p>
       Use the respective filters and views that the interface provides. For
       details, refer to <a class="xref" href="#sec-onlineupdate-you-overview" title="7.1. The online update dialog">Section 7.1, “The online update dialog”</a>.
      </p></li><li class="step"><p>
       Select or deselect patches according to your needs and wishes by
       right-clicking the patch and choosing the respective action from the
       context menu.
      </p><div id="id-1.3.3.8.10.4.4.2.2.2" data-id-title="Always apply security updates" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Always apply security updates</div><p>
        Do not deselect any <code class="literal">security</code>-related patches without
        a good reason. These patches fix severe security hazards and prevent
        your system from being exploited.
       </p></div></li><li class="step"><p>
       Most patches include updates for several packages. To change
       actions for single packages, right-click a package in the package view
       and choose an action.
      </p></li><li class="step"><p>
       To confirm your selection and apply the selected patches, proceed with
       <span class="guimenu">Apply</span> or <span class="guimenu">Accept</span>.
      </p></li></ol></li><li class="step"><p>
     After the installation is complete, click <span class="guimenu">Finish</span> to
     leave the YaST <span class="guimenu">Online Update</span>. Your system is now
     up to date.
    </p></li></ol></div></div></section><section class="sect1" id="sec-onlineupdate-retracted-patches" data-id-title="Viewing retracted patches"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.3 </span><span class="title-name">Viewing retracted patches</span></span> <a title="Permalink" class="permalink" href="#sec-onlineupdate-retracted-patches">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_you.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Maintenance updates are carefully tested to minimize the risk
    of introducing a bug. If a patch proves to contain a bug, it is
    automatically retracted. A new update (with a higher version number) is 
    issued to revert the buggy patch, and is blocked from being installed 
    again. You can see retracted patches, and their history, on the 
    <span class="guimenu">Package Classification</span> tab.
  </p><div class="figure" id="id-1.3.3.8.11.3"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_retracted_patches.png"><img src="images/yast2_retracted_patches.png" width="75%" alt="Viewing retracted patches and history" title="Viewing retracted patches and history"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 7.2: </span><span class="title-name">Viewing retracted patches and history </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.8.11.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_you.xml" title="Edit source document"> </a></div></div></div></section><section class="sect1" id="sec-onlineupdate-you-automatically" data-id-title="Automatic online update"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.4 </span><span class="title-name">Automatic online update</span></span> <a title="Permalink" class="permalink" href="#sec-onlineupdate-you-automatically">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_you.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You may configure automatic updates with a daily, weekly or 
   monthly schedule with YaST. Install the
   <code class="systemitem">yast2-online-update-configuration</code>
   package.
  </p><p>
   By default, updates are downloaded as delta RPMs. Since rebuilding RPM
   packages from delta RPMs is a memory- and processor-intensive task, certain
   setups or hardware configurations may require you to disable the use of
   delta RPMs for the sake of performance.
  </p><p>
   Certain patches, such as kernel updates or packages requiring license
   agreements, require user interaction, which would cause the automatic update
   procedure to stop. You can configure skipping patches that require user
   interaction.
  </p><p>
      Use the <span class="guimenu">Patches</span> tab in the YaST
      <span class="guimenu">Software</span> module to review available and installed
      patches, including references to bug reports and CVE bulletins.
  </p><div class="procedure" id="id-1.3.3.8.12.6" data-id-title="Configuring the automatic online update"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 7.2: </span><span class="title-name">Configuring the automatic online update </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.8.12.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_you.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     After installation, start YaST and select <span class="guimenu">Software</span> › <span class="guimenu">Online Update</span>. Choose <span class="guimenu">Configuration</span> › <span class="guimenu">Online Update</span>. If the
     <span class="package">yast2-online-update-configuration</span> is not installed, you
     will be prompted to do that.
    </p><div class="figure" id="id-1.3.3.8.12.6.2.2"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_autoupdate.png"><img src="images/yast2_autoupdate.png" width="75%" alt="YaST online update configuration" title="YaST online update configuration"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 7.3: </span><span class="title-name">YaST online update configuration </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.8.12.6.2.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_you.xml" title="Edit source document"> </a></div></div></div><p>
     Alternatively, start the module with
     <code class="command">yast2 online_update_configuration</code> from the command
     line.
    </p></li><li class="step"><p>
     Choose the update interval: <span class="guimenu">Daily</span>,
     <span class="guimenu">Weekly</span>, or <span class="guimenu">Monthly</span>.
    </p></li><li class="step"><p>
     Sometimes patches may require the attention of the administrator, for
     example when restarting critical services. For example, this might be an
     update for Docker Open Source Engine that requires all containers to be restarted. Before
     these
     patches are installed, the user is informed about the consequences and is
     asked to confirm the installation of the patch. Such patches are called
     <span class="quote">“<span class="quote">Interactive Patches</span>”</span>.
    </p><p>
     When installing patches automatically, it is assumed that you have
     accepted the installation of interactive patches. If you prefer to
     review these patches before they get installed, check <span class="guimenu">Skip
     Interactive Patches</span>. In this case, interactive patches will be
     skipped during automated patching. Make sure to periodically run a manual
     online update, to check whether interactive patches are waiting to be
     installed.
    </p></li><li class="step"><p>
     To automatically accept any license agreements, activate <span class="guimenu">Agree
     with Licenses</span>.
    </p></li><li class="step"><p>
     To automatically install all packages recommended by updated packages,
     activate <span class="guimenu">Include Recommended Packages</span>.
    </p></li><li class="step"><p>
     To disable the use of delta RPMs (for performance reasons), un-check
     <span class="guimenu">Use Delta RPMs</span>.
    </p></li><li class="step"><p>
     To filter the patches by category (such as security or recommended),
     check <span class="guimenu">Filter by Category</span> and add the appropriate
     patch categories from the list. Only patches of the selected categories
     will be installed. It is a good practice to enable only automatic
     <span class="guimenu">Security</span> updates, and to manually review all others.
     Patching is normally reliable, but you may wish to test non-security
     patches, and roll them back if you encounter any problems. 
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="guimenu">Packagemanager and YaST</span> supply patches
                for package management and YaST features and modules.
            </p></li><li class="listitem"><p><span class="guimenu">Security</span> patches provide crucial
                updates and bugfixes.
            </p></li><li class="listitem"><p><span class="guimenu">Recommended</span> patches are optional
                bugfixes and enhancements.
            </p></li><li class="listitem"><p><span class="guimenu">Optional</span> are new packages.</p></li><li class="listitem"><p><span class="guimenu">Other</span> is equivalent to miscellaneous.
                </p></li><li class="listitem"><p><span class="guimenu">Document</span> is unused.
            </p></li></ul></div></li><li class="step"><p>
     Confirm your configuration by clicking <span class="guimenu">OK</span>.
    </p></li></ol></div></div><p>
   The automatic online update does not automatically restart the system
   afterward. If there are package updates that require a system reboot, you
   need to do this manually.
  </p></section></section><section class="chapter" id="cha-yast-software" data-id-title="Installing or removing software"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">8 </span><span class="title-name">Installing or removing software</span></span> <a title="Permalink" class="permalink" href="#cha-yast-software">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Using YaST's software management module, you can search for software
    packages as well as install and remove them. When installing packages,
    YaST automatically resolves all dependencies. To install packages that are
    not on the installation medium, you can add software repositories and YaST
    to manage them. You can also keep your system up to date by managing
    software updates using the update applet.
   </p></div></div></div></div><p>
  The YaST Software Manager makes it possible to manage software sources on
  your system. There are two versions of this YaST module: a graphical version
  for X Window and a text-based version to use with the command line. The
  graphical flavor is described below—for details on the text-based
  YaST, see <a class="xref" href="#cha-yast-text" title="Chapter 4. YaST in text mode">Chapter 4, <em>YaST in text mode</em></a>.
 </p><div id="id-1.3.3.9.4" data-id-title="Confirmation and review of changes" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Confirmation and review of changes</div><p>
   When installing, updating or removing packages, any changes in the Software
   Manager are only applied after clicking <span class="guimenu">Accept</span> or
   <span class="guimenu">Apply</span>. YaST maintains a list with all actions, allowing
   you to review and modify your changes before applying them to the system.
  </p></div><section class="sect1" id="sec-onlineupdate-terms" data-id-title="Definition of terms"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8.1 </span><span class="title-name">Definition of terms</span></span> <a title="Permalink" class="permalink" href="#sec-onlineupdate-terms">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The following terms are important for understanding installing and removing
   software in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.9.5.3.1"><span class="term">Repository</span></dt><dd><p>
      A local or remote directory containing packages, plus additional
      information about these packages (package metadata).
     </p></dd><dt id="id-1.3.3.9.5.3.2"><span class="term">(Repository) alias/repository name</span></dt><dd><p>
      A short name for a repository (called <code class="literal">Alias</code> within
      Zypper and <span class="guimenu">Repository Name</span> within YaST). It can be
      chosen by the user when adding a repository and must be unique.
     </p></dd><dt id="id-1.3.3.9.5.3.3"><span class="term">Repository description files</span></dt><dd><p>
      Each repository provides files describing content of the repository
      (package names, versions, etc.). These repository description files are
      downloaded to a local cache that is used by YaST.
     </p></dd><dt id="id-1.3.3.9.5.3.4"><span class="term">Product</span></dt><dd><p>
      Represents a whole product, for example, <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span>.
     </p></dd><dt id="id-1.3.3.9.5.3.5"><span class="term">Pattern</span></dt><dd><p>
      A pattern is an installable group of packages dedicated to a certain
      purpose. For example, the <code class="systemitem">Laptop</code> pattern
      contains all packages that are needed in a mobile computing environment.
      Patterns define package dependencies (such as required or recommended
      packages) and come with a preselection of packages marked for
      installation. This ensures that the most important packages needed for a
      certain purpose are available on your system after installation of the
      pattern. If necessary, you can manually select or deselect
      packages within a pattern.
     </p></dd><dt id="id-1.3.3.9.5.3.6"><span class="term">Package</span></dt><dd><p>
      A package is a compressed file in <code class="literal">rpm</code> format that
      contains the files for a particular program.
     </p></dd><dt id="vle-patch"><span class="term">Patch</span></dt><dd><p>
       A fix or compilation of fixes released by SUSE to correct operation
       defects (program bugs) in SUSE products. A patch can contain one or
       multiple files to replace or enhance existing executables, programs,
       applications or documents.
     </p><p>
      A patch consists of one or more packages and may be applied by delta RPMs.
      It may also introduce dependencies to packages that are not installed yet.
     </p></dd><dt id="id-1.3.3.9.5.3.8"><span class="term">Resolvable</span></dt><dd><p>
      A generic term for product, pattern, package or patch. The most commonly
      used type of resolvable is a package or a patch.
     </p></dd><dt id="id-1.3.3.9.5.3.9"><span class="term">Delta RPM</span></dt><dd><p>
      A delta RPM consists only of the binary diff between two defined versions
      of a package, and therefore has the smallest download size. Before being
      installed, the full RPM package is rebuilt on the local machine.
     </p></dd><dt id="id-1.3.3.9.5.3.10"><span class="term">Package dependencies</span></dt><dd><p>
      Certain packages are dependent on other packages, such as shared
      libraries. In other terms, a package may <code class="literal">require</code> other
      packages—if the required packages are not available, the package
      cannot be installed. Besides dependencies (package requirements) that must
      be fulfilled, certain packages <code class="literal">recommend</code> other
      packages. These recommended packages are only installed if they are
      available, otherwise they are ignored and the package recommending them is
      installed nevertheless.
     </p></dd></dl></div></section><section class="sect1" id="sec-yast-software-register" data-id-title="Registering an installed system"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8.2 </span><span class="title-name">Registering an installed system</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-register">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If you skip registration during installation, or you want to re-register your
   system, you can register the system at any time. Use the YaST module
   <span class="emphasis"><em>Product Registration</em></span> or the command line tool
   <code class="command">SUSEConnect</code>.
  </p><section class="sect2" id="sec-yast-software-register-yast" data-id-title="Registering with YaST"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">8.2.1 </span><span class="title-name">Registering with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-register-yast">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To register the system, start YaST and switch to
    <span class="guimenu">Software</span>, then <span class="guimenu">Product
    Registration</span>.
   </p><p>
    By default the system is registered with the SUSE Customer Center. If your
    organization provides local registration servers, you can either
    choose one from the list of auto-detected servers or provide the
    URL manually.
   </p></section><section class="sect2" id="sec-yast-software-register-suseconnect" data-id-title="Registering with SUSEConnect"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">8.2.2 </span><span class="title-name">Registering with SUSEConnect</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-register-suseconnect">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To register from the command line, use the command
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">SUSEConnect -r <em class="replaceable">REGISTRATION_CODE</em> -e <em class="replaceable">EMAIL_ADDRESS</em></code></pre></div><p>
    Replace <em class="replaceable">REGISTRATION_CODE</em> with the registration
    code you received with your copy of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
    Replace <em class="replaceable">EMAIL_ADDRESS</em> with
    the e-mail address associated with the SUSE account you or your
    organization uses to manage subscriptions.
   </p><p>
    To register with a local registration server, also provide the URL to
    the server:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">SUSEConnect -r <em class="replaceable">REGISTRATION_CODE</em> -e <em class="replaceable">EMAIL_ADDRESS</em> --url "<em class="replaceable">URL</em>"</code></pre></div></section></section><section class="sect1" id="sec-yast-software-qt" data-id-title="Using the YaST software manager"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8.3 </span><span class="title-name">Using the YaST software manager</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-qt">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Start the software manager from the <span class="guimenu">YaST Control Center</span>
   by choosing <span class="guimenu">Software</span> › <span class="guimenu">Software
   Management</span>.
  </p><div class="informalfigure"><div class="mediaobject"><a href="images/yast2_sw_manager.png"><img src="images/yast2_sw_manager.png" width="65%" alt="YaST software manager screen" title="YaST software manager screen"/></a></div></div><section class="sect2" id="sec-yast-software-search" data-id-title="Searching software"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">8.3.1 </span><span class="title-name">Searching software</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-search">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The YaST software manager can install packages or patterns from all
    currently enabled repositories. It offers different views and filters to
    make it easier to find the software you are searching for. The
    <span class="guimenu">Search</span> view is the default view of the window. To change
    view, click <span class="guimenu">View</span> and select one of the following entries
    from the drop-down box. The selected view opens in a new tab.
   </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Views for searching packages or patterns </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.9.7.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.3.9.7.4.3.2"><span class="term"><span class="guimenu">Patterns</span></span></dt><dd><p>
       Lists all patterns available for installation on your system.
      </p></dd><dt id="id-1.3.3.9.7.4.3.3"><span class="term"><span class="guimenu">Package Groups</span></span></dt><dd><p>
       Lists all packages sorted by groups such as <span class="guimenu">Graphics</span>,
       <span class="guimenu">Programming</span>, or <span class="guimenu">Security</span>.
      </p></dd><dt id="id-1.3.3.9.7.4.3.4"><span class="term"><span class="guimenu">Languages</span></span></dt><dd><p>
       A filter to list all packages needed to add a new system language.
      </p></dd><dt id="id-1.3.3.9.7.4.3.5"><span class="term"><span class="guimenu">Repositories</span></span></dt><dd><p>
       A filter to list packages by repository. To select more than one
       repository, hold the <span class="keycap">Ctrl</span> key while clicking
       repository names. The <span class="quote">“<span class="quote">pseudo repository</span>”</span>
       <span class="guimenu">@System</span> lists all packages currently installed.
      </p></dd><dt id="id-1.3.3.9.7.4.3.6"><span class="term"><span class="guimenu">Services</span></span></dt><dd><p>
       Shows which packages belong to a certain module or extension. Select an
       entry (for example, <code class="literal">Basesystem</code> or <code class="literal">High
       Availability</code>) to display a list of packages that
       belong to this module or extension.
      </p></dd><dt id="id-1.3.3.9.7.4.3.7"><span class="term"><span class="guimenu">Search</span></span></dt><dd><p>
       Lets you search for a package according to certain criteria. Enter a
       search term and press <span class="keycap">Enter</span>. Refine your search by
       specifying where to <span class="guimenu">Search In</span> and by changing the
       <span class="guimenu">Search Mode</span>. For example, if you do not know the
       package name but only the name of the application that you are searching
       for, try including the package <span class="guimenu">Description</span> in the
       search process.
      </p></dd><dt id="id-1.3.3.9.7.4.3.8"><span class="term"><span class="guimenu">Installation Summary</span></span></dt><dd><p>
       If you have already selected packages for installation, update or
       removal, this view shows the changes that will be applied to your system
       when you click <span class="guimenu">Accept</span>. To filter for packages with a
       certain status in this view, activate or deactivate the respective check
       boxes. Press <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F1</span> for details on the status flags.
      </p></dd></dl></div><div id="id-1.3.3.9.7.4.4" data-id-title="Finding packages not belonging to an active repository" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Finding packages not belonging to an active repository</div><p>
     To list all packages that do not belong to an active repository, choose
     <span class="guimenu">View</span> › <span class="guimenu">Repositories</span> › <span class="guimenu">@System</span> and then choose <span class="guimenu">Secondary Filter</span> › <span class="guimenu">Unmaintained
     Packages</span>. This is useful, for example, if you have
     deleted a repository and want to make sure no packages from that
     repository remain installed.
    </p></div><div id="tip-yast-software-search-online" data-id-title="Searching software online" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Searching software online</div><p>
     The online search feature allows searching for packages across all
     registered and unregistered modules and extensions.
    </p><div class="procedure" id="id-1.3.3.9.7.4.5.3" data-id-title="Searching software online"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 8.1: </span><span class="title-name">Searching software online </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.9.7.4.5.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
      To search for software packages online, perform the following steps:
     </p><ol class="procedure" type="1"><li class="step"><p>
       Open the online search window with <span class="guimenu">Extras</span> › <span class="guimenu">Search Online</span>.
      </p></li><li class="step"><p>
       Enter a <span class="guimenu">Package Name</span> and press
       <span class="keycap">Enter</span> or click <span class="guimenu">Search</span>.
       YaST contacts the SUSE Customer Center and shows the results in a table, including the
       module or extension of each package. Select a package to see additional
       details.
      </p></li><li class="step"><p>
       Select one or more packages for installation by clicking the
       corresponding table row and <span class="guimenu">Toggle Selection</span>.
       Alternatively, you can double-click a row. If the package belongs to
       an unregistered module or extension, YaST asks for confirmation to
       register it.
      </p></li><li class="step"><p>
       Click <span class="guimenu">Next</span>, review the changes, and install the
       packages.
      </p></li></ol></div></div></div></section><section class="sect2" id="sec-yast-software-install" data-id-title="Installing and removing packages or patterns"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">8.3.2 </span><span class="title-name">Installing and removing packages or patterns</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-install">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Certain packages are dependent on other packages, such as shared libraries.
    Several packages cannot coexist with others on the system. If possible, YaST
    automatically resolves these dependencies or conflicts. If your choice
    results in a dependency conflict that cannot be automatically solved, you
    need to solve it manually as described in
    <a class="xref" href="#sec-yast-software-dependencies" title="8.3.4. Package dependencies">Section 8.3.4, “Package dependencies”</a>.
   </p><div id="id-1.3.3.9.7.5.3" data-id-title="Removal of packages" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Removal of packages</div><p>
     When removing any packages, by default YaST only removes the selected
     packages. If you want YaST to also remove any other packages that become
     unneeded after removal of the specified package, select <span class="guimenu">Options</span> › <span class="guimenu">Cleanup when deleting
     packages</span> from the main menu.
    </p></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Search for packages as described in <a class="xref" href="#sec-yast-software-search" title="8.3.1. Searching software">Section 8.3.1, “Searching software”</a>.
     </p></li><li class="step"><p>
      The packages found are listed in the right pane. To install a package or
      remove it, right-click it and choose <span class="guimenu">Install</span> or
      <span class="guimenu">Delete</span>. If the relevant option is not available, check
      the package status indicated by the symbol in front of the package
      name—press <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F1</span> for help.
     </p><div id="id-1.3.3.9.7.5.4.2.2" data-id-title="Applying an action to all packages listed" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Applying an action to all packages listed</div><p>
       To apply an action to all packages listed in the right pane, go to the
       main menu and choose an action from <span class="guimenu">Package</span> › <span class="guimenu">All in This List</span>.
      </p></div></li><li class="step"><p>
      To install a pattern, right-click the pattern name and choose
      <span class="guimenu">Install</span>.
     </p></li><li class="step"><p>
      It is not possible to remove a pattern. Instead, select the
      packages for the pattern you want to remove and mark them for removal.
     </p></li><li class="step"><p>
      To select more packages, repeat the steps mentioned above.
     </p></li><li class="step"><p>
      Before applying your changes, you can review or modify them by clicking
      <span class="guimenu">View</span> › <span class="guimenu">Installation
      Summary</span>. By default, all packages that will
      change status are listed.
     </p></li><li class="step"><p>
      To revert the status for a package, right-click the package and
      select one of the following entries: <span class="guimenu">Keep</span> if the
      package was scheduled to be deleted or updated, or <span class="guimenu">Do Not
      Install</span> if it was scheduled for installation. To abandon all
      changes and quit the Software Manager, click <span class="guimenu">Cancel</span>
      and <span class="guimenu">Abandon</span>.
     </p></li><li class="step"><p>
      When you are finished, click <span class="guimenu">Accept</span> to apply your
      changes.
     </p></li><li class="step"><p>
      If YaST finds additional dependencies, it shows a list of related
      packages to install, update or remove. Click <span class="guimenu">Continue</span>
      to accept them.
     </p><p>
      After all selected packages are installed, updated or removed, the YaST
      Software Manager automatically closes.
     </p></li></ol></div></div><div id="id-1.3.3.9.7.5.5" data-id-title="Installing source packages" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Installing source packages</div><p>
     Installing source packages with YaST Software Manager is not possible at
     the moment. Use the command line tool <code class="command">zypper</code> for this
     purpose. For more information, see
     <a class="xref" href="#sec-zypper-softman-sources" title="9.1.3.5. Installing or downloading source packages">Section 9.1.3.5, “Installing or downloading source packages”</a>.
    </p></div></section><section class="sect2" id="sec-yast-software-update" data-id-title="Updating packages"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">8.3.3 </span><span class="title-name">Updating packages</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-update">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Instead of updating individual packages, you can also update all installed
    packages or all packages from a certain repository. When mass updating
    packages, the following aspects are generally considered:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      priorities of the repositories that provide the package,
     </p></li><li class="listitem"><p>
      architecture of the package (for example, AMD64/Intel 64),
     </p></li><li class="listitem"><p>
      version number of the package,
     </p></li><li class="listitem"><p>
      package vendor.
     </p></li></ul></div><p>
    Which of the aspects has the highest importance for choosing the update
    candidates depends on the respective update option you choose.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      To update all installed packages to the latest version, choose
      <span class="guimenu">Package</span> › <span class="guimenu">All Packages</span> › <span class="guimenu">Update if Newer Version Available</span> from
      the main menu.
     </p><p>
      All repositories are checked for possible update candidates, using the
      following policy: YaST first tries to restrict the search to packages
      with the same architecture and vendor as the installed one. If the
      search is positive, the <span class="quote">“<span class="quote">best</span>”</span> update candidate from those
      is selected according to the process below. However, if no comparable
      package of the same vendor can be found, the search is expanded to all
      packages with the same architecture. If still no comparable package can
      be found, all packages are considered and the <span class="quote">“<span class="quote">best</span>”</span> update
      candidate is selected according to the following criteria:
     </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
        Repository priority: prefer the package from the repository with the
        highest priority.
       </p></li><li class="listitem"><p>
        If more than one package results from this selection, choose the one
        with the <span class="quote">“<span class="quote">best</span>”</span> architecture (best choice: matching the
        architecture of the installed one).
       </p></li></ol></div><p>
      If the resulting package has a higher version number than the installed
      one, the installed package is updated and replaced with the selected
      update candidate.
     </p><p>
      This option tries to avoid changes in architecture and vendor for the
      installed packages, but under certain circumstances, they are tolerated.
     </p><div id="id-1.3.3.9.7.6.5.1.6" data-id-title="Update unconditionally" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Update unconditionally</div><p>
       If you choose <span class="guimenu">Package</span> › <span class="guimenu">All
       Packages</span> › <span class="guimenu">Update Unconditionally</span> instead, the same criteria apply but any candidate package
       found is installed unconditionally. Thus, choosing this option may
       lead to downgrading certain packages.
      </p></div></li><li class="step"><p>
      To make sure that the packages for a mass update derive from a certain
      repository:
     </p><ol type="a" class="substeps"><li class="step"><p>
        Choose the repository from which to update as described in
        <a class="xref" href="#sec-yast-software-search" title="8.3.1. Searching software">Section 8.3.1, “Searching software”</a> .
       </p></li><li class="step"><p>
        On the right hand side of the window, click <span class="guimenu">Switch system
        packages to the versions in this repository</span>. This explicitly
        allows YaST to change the package vendor when replacing the packages.
       </p><p>
        When you proceed with <span class="guimenu">Accept</span>, all installed packages
        are replaced by packages deriving from this repository, if
        available. This may lead to changes in vendor and architecture and even
        to downgrading certain packages.
       </p></li><li class="step"><p>
        To refrain from this, click <span class="guimenu">Cancel switching system packages
        to the versions in this repository</span>. You can only
        cancel this until you click the <span class="guimenu">Accept</span> button.
       </p></li></ol></li><li class="step"><p>
      Before applying your changes, you can review or modify them by clicking
      <span class="guimenu">View</span> › <span class="guimenu">Installation
      Summary</span>. By default, all packages that will
      change status, are listed.
     </p></li><li class="step"><p>
      If all options are set according to your wishes, confirm your changes
      with <span class="guimenu">Accept</span> to start the mass update.
     </p></li></ol></div></div></section><section class="sect2" id="sec-yast-software-dependencies" data-id-title="Package dependencies"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">8.3.4 </span><span class="title-name">Package dependencies</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-dependencies">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Most packages are dependent on other packages. If a package, for example,
    uses a shared library, it is dependent on the package providing this
    library. Certain packages cannot coexist, causing a conflict (for example,
    you can only install one mail transfer agent: sendmail or postfix). When
    installing or removing software, the Software Manager makes sure no
    dependencies or conflicts remain unsolved to ensure system integrity.
   </p><p>
    In case there exists only one solution to resolve a dependency or a
    conflict, it is resolved automatically. Multiple solutions always cause a
    conflict which needs to be resolved manually. If solving a conflict
    involves a vendor or architecture change, it also needs to be solved
    manually. When clicking <span class="guimenu">Accept</span> to apply any changes in
    the Software Manager, you get an overview of all actions triggered by the
    automatic resolver which you need to confirm.
   </p><p>
    By default, dependencies are automatically checked. A check is performed
    every time you change a package status (for example, by marking a package
    for installation or removal). This is generally useful, but can become
    exhausting when manually resolving a dependency conflict. To disable this
    function, go to the main menu and deactivate <span class="guimenu">Dependencies</span> › <span class="guimenu">Autocheck</span>.
    Manually perform a dependency check with <span class="guimenu">Dependencies</span> › <span class="guimenu">Check Now</span>.
    A consistency check is always performed when you confirm your selection
    with <span class="guimenu">Accept</span>.
   </p><p>
    To review a package's dependencies, right-click it and choose <span class="guimenu">Show
    Solver Information</span>. A map showing the dependencies opens.
    Packages that are already installed are displayed in a green frame.
   </p><div id="id-1.3.3.9.7.7.6" data-id-title="Manually solving package conflicts" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Manually solving package conflicts</div><p>
     Unless you are experienced, follow the suggestions YaST makes when
     handling package conflicts, otherwise you may not be able to resolve them.
     Keep in mind that every change you make potentially triggers other
     conflicts, so you can easily end up with a steadily increasing number of
     conflicts. In case this happens, <span class="guimenu">Cancel</span> the Software
     Manager, <span class="guimenu">Abandon</span> all your changes and start again.
    </p></div><div class="figure" id="fig-y2-sw-packconfl"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_package_conflict.png"><img src="images/yast2_package_conflict.png" width="65%" alt="Conflict management of the software manager" title="Conflict management of the software manager"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 8.1: </span><span class="title-name">Conflict management of the software manager </span></span><a title="Permalink" class="permalink" href="#fig-y2-sw-packconfl">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div></section><section class="sect2" id="sec-yast-software-recommendations" data-id-title="Handling package recommendations"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">8.3.5 </span><span class="title-name">Handling package recommendations</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-recommendations">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In addition to the hard dependencies required to run a program (for
    example a certain library), a package can also have weak dependencies,
    which add for example extra functionality or translations. These weak
    dependencies are called package recommendations.
   </p><p>
    When installing a new package, recommended packages are still
    installed by default. When updating an existing package, missing
    recommendations are not be installed automatically. To change this, set
    <code class="envar">PKGMGR_RECOMMENDED="yes"</code> in
    <code class="filename">/etc/sysconfig/yast2</code>. To install all missing
    recommendations for already installed packages, start <span class="guimenu">YaST</span> › <span class="guimenu">Software Manager</span> and choose <span class="guimenu">Extras</span> › <span class="guimenu">Install All Matching Recommended Packages</span>.
   </p><p>
    To disable the installation of recommended packages when installing new
    packages, deactivate <span class="guimenu">Dependencies</span> › <span class="guimenu">Install Recommended Packages</span> in the
    YaST Software Manager. When using the command-line tool Zypper to install
    packages, use the option <code class="option">--no-recommends.</code>
   </p></section></section><section class="sect1" id="sec-yast-software-instsource" data-id-title="Managing software repositories and services"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8.4 </span><span class="title-name">Managing software repositories and services</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-instsource">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw_repo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  To install third-party software, add software repositories to your
  system. By default, product repositories such as
  <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>-DVD <span class="productnumber"><span class="phrase">15 SP6</span></span> and a matching update repository
  are automatically configured<span class="phrase"> when you
  register your system. For more information about registration, see
  <span class="intraxref">Book “Deployment Guide”, Chapter 9 “Installation steps”, Section 9.7 “Registration”</span> or <span class="intraxref">Book “Upgrade Guide”, Chapter 4 “Upgrading offline”, Section 4.8 “Registering your system”</span></span>. Depending on the
  initially selected product, an additional repository containing
  translations, dictionaries, etc. might also be configured.
 </p><p>
  To manage repositories, start YaST and select <span class="guimenu">Software</span> › <span class="guimenu">Software Repositories</span>. The <span class="guimenu">Configured Software Repositories</span> dialog
  opens. Here, you can also manage subscriptions to
  <span class="guimenu">Services</span> by changing the <span class="guimenu">View</span> at the
  right corner of the dialog to <span class="guimenu">All Services</span>. A Service in
  this context is a <span class="guimenu">Repository Index Service</span> (RIS) that can
  offer one or more software repositories. Such a Service can be changed
  dynamically by its administrator or vendor.
 </p><p>
  Each repository provides files describing repository content (package
  names, versions, etc.). YaST downloads these repository description files to
  a local cache. To ensure their integrity, software
  repositories can be signed with the GPG Key of the repository maintainer.
  Whenever you add a new repository, YaST offers the ability to import its
  key.
 </p><div id="id-1.3.3.9.8.6" data-id-title="Trusting external software sources" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Trusting external software sources</div><p>
   Before adding external software repositories to your list of repositories,
   make sure this repository can be trusted. SUSE is not responsible for any
   problems arising from software installed from third-party software
   repositories.
  </p></div><section class="sect2" id="sec-yast-software-instsource-add" data-id-title="Adding software repositories"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">8.4.1 </span><span class="title-name">Adding software repositories</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-instsource-add">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw_repo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You can either add repositories from DVD/CD, a USB flash drive, a local
   directory, an ISO image, or a network source.
  </p><p>
   To add repositories from the <span class="guimenu">Configured Software
   Repositories</span> dialog in YaST proceed as follows:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Click <span class="guimenu">Add</span>.
    </p></li><li class="step"><p>
     Select one of the options listed in the dialog:
    </p><div class="figure" id="fig-y2-sw-repo-new"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_addon_new.png"><img src="images/yast2_addon_new.png" width="65%" alt="Adding a software repository" title="Adding a software repository"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 8.2: </span><span class="title-name">Adding a software repository </span></span><a title="Permalink" class="permalink" href="#fig-y2-sw-repo-new">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw_repo.xml" title="Edit source document"> </a></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       To scan your network for installation servers announcing their services
       via SLP, select <span class="guimenu">Scan Using SLP</span> and click
       <span class="guimenu">Next</span>.
      </p></li><li class="listitem"><p>
       To add a repository from a removable medium, choose the relevant option
       and insert the medium or connect the USB device to the machine,
       respectively. Click <span class="guimenu">Next</span> to start the installation.
      </p></li><li class="listitem"><p>
       For the majority of repositories, you will be asked to specify the path
       (or URL) to the media after selecting the respective option and clicking
       <span class="guimenu">Next</span>. Specifying a <span class="guimenu">Repository Name</span>
       is optional. If none is specified, YaST will use the product name or
       the URL as repository name.
      </p></li></ul></div><p>
     The option <span class="guimenu">Download Repository Description Files</span> is
     activated by default. If you deactivate the option, YaST will
     automatically download the files later, if needed.
    </p></li><li class="step"><p>
     Depending on the repository you add, you may be prompted to import
     the repository's GPG key or asked to agree to a
     license.
    </p><p>
     After confirming, YaST will download and parse the
     metadata. It will add the repository to the list of <span class="guimenu">Configured
     Repositories</span>.
    </p></li><li class="step"><p>
     If needed, adjust the repository <span class="guimenu">Properties</span> as
     described in <a class="xref" href="#sec-yast-software-instsource-manage" title="8.4.2. Managing repository properties">Section 8.4.2, “Managing repository properties”</a>.
    </p></li><li class="step"><p>
     Confirm your changes with <span class="guimenu">OK</span> to close the configuration
     dialog.
    </p></li><li class="step"><p>
     After having successfully added the repository, the software manager
     starts and you can install packages from this repository. For details,
     refer to <a class="xref" href="#cha-yast-software" title="Chapter 8. Installing or removing software">Chapter 8, <em>Installing or removing software</em></a>.
    </p></li></ol></div></div></section><section class="sect2" id="sec-yast-software-instsource-manage" data-id-title="Managing repository properties"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">8.4.2 </span><span class="title-name">Managing repository properties</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-instsource-manage">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw_repo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <span class="guimenu">Configured Software Repositories</span> overview of the
   <span class="guimenu">Software Repositories</span> lets you change the following
   repository properties:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.9.8.8.3.1"><span class="term">Status</span></dt><dd><p>
      The repository status can either be <span class="guimenu">Enabled</span> or
      <span class="guimenu">Disabled</span>. You can only install packages from
      repositories that are enabled. To turn a repository off temporarily,
      select it and deactivate <span class="guimenu">Enable</span>. You can also
      double-click a repository name to toggle its status. To
      remove a repository completely, click <span class="guimenu">Delete</span>.
     </p></dd><dt id="id-1.3.3.9.8.8.3.2"><span class="term">Refresh</span></dt><dd><p>
      When refreshing a repository, its content description (package names,
      versions, etc.) is downloaded to a local cache that is used by YaST. It
      is sufficient to do this once for static repositories such as CDs or
      DVDs, whereas repositories whose content changes often should be
      refreshed frequently. The easiest way to keep a repository's cache
      up to date is to choose <span class="guimenu">Automatically Refresh</span>. To do a
      manual refresh click <span class="guimenu">Refresh</span> and select one of the
      options.
     </p></dd><dt id="id-1.3.3.9.8.8.3.3"><span class="term"><span class="guimenu">Keep Downloaded Packages</span>
    </span></dt><dd><p>
      Packages from remote repositories are downloaded before being installed.
      By default, they are deleted upon successful installation. Activating
      <span class="guimenu">Keep Downloaded Packages</span> prevents the deletion of
      downloaded packages. The download location is configured in
      <code class="filename">/etc/zypp/zypp.conf</code>, by default it is
      <code class="filename">/var/cache/zypp/packages</code>.
     </p></dd><dt id="id-1.3.3.9.8.8.3.4"><span class="term"><span class="guimenu">Priority</span>
    </span></dt><dd><p>
      The <span class="guimenu">Priority</span> of a repository is a value between
      <code class="literal">1</code> and <code class="literal">200</code>, with
      <code class="literal">1</code> being the highest priority and
      <code class="literal">200</code> the lowest priority. Any new repositories that are
      added with YaST get a priority of <code class="literal">99</code> by default. If
      you do not care about a priority value for a certain repository, you can
      also set the value to <code class="literal">0</code> to apply the default priority
      to that repository (<code class="literal">99</code>). If a package is available in
      more than one repository, then the repository with the highest priority
      takes precedence. This is useful to avoid downloading
      packages unnecessarily from the Internet by giving a local repository
      (for example, a DVD) a higher priority.
     </p><div id="id-1.3.3.9.8.8.3.4.2.2" data-id-title="Priority compared to version" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Priority compared to version</div><p>
       The repository with the highest priority takes precedence in any case.
       Therefore, make sure that the update repository always has the highest
       priority, otherwise you might install an outdated version that will not
       be updated until the next online update.
      </p></div></dd><dt id="id-1.3.3.9.8.8.3.5"><span class="term">Name and URL</span></dt><dd><p>
      To change a repository name or its URL, select it from the list with a
      single-click and then click <span class="guimenu">Edit</span>.
     </p></dd></dl></div></section><section class="sect2" id="sec-yast-software-repo-gpg-keys" data-id-title="Managing repository keys"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">8.4.3 </span><span class="title-name">Managing repository keys</span></span> <a title="Permalink" class="permalink" href="#sec-yast-software-repo-gpg-keys">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sw_repo.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To ensure their integrity, software repositories can be signed with the
   GPG Key of the repository maintainer. Whenever you add a new repository,
   YaST offers to import its key. Verify it as you would do with any other
   GPG key and make sure it does not change. If you detect a key change,
   something might be wrong with the repository. Disable the repository as an
   installation source until you know the cause of the key change.
  </p><p>
   To manage all imported keys, click <span class="guimenu">GPG Keys</span> in the
   <span class="guimenu">Configured Software Repositories</span> dialog. Select an entry
   with the mouse to show the key properties at the bottom of the window.
   <span class="guimenu">Add</span>, <span class="guimenu">Edit</span>, or <span class="guimenu">Delete</span>
   keys with a click on the respective buttons.
  </p></section></section><section class="sect1" id="sec-updater" data-id-title="The GNOME package updater"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8.5 </span><span class="title-name">The GNOME package updater</span></span> <a title="Permalink" class="permalink" href="#sec-updater">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/updater_gnome.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  SUSE offers a continuous stream of software security patches and updates
  for your product. They can be installed using tools available with your
  desktop or by running the <a class="xref" href="#cha-onlineupdate-you" title="Chapter 7. YaST online update"><em>YaST online update</em></a>
  module. This section describes how to update the system from the GNOME
  desktop using the <span class="guimenu">Package Updater</span>.
 </p><p>
  Contrary to the YaST Online Update module, the GNOME <span class="guimenu">Package
  Updater</span> not only offers to install patches from the update
  repositories, but also new versions of packages that are already
  installed. (Patches fix security issues or malfunctions; the functionality
  and version number is usually not changed. New versions of a package increase
  the version number and add functionality or introduce major changes.)
 </p><p>
  Whenever new patches or package updates are available, GNOME shows a
  notification in the notification area or on the lock screen.
 </p><div class="figure" id="id-1.3.3.9.9.6"><div class="figure-contents"><div class="mediaobject"><a href="images/gnome_update_notification_desktop.png"><img src="images/gnome_update_notification_desktop.png" width="75%" alt="Update notification on GNOME desktop" title="Update notification on GNOME desktop"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 8.3: </span><span class="title-name">Update notification on GNOME desktop </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.9.9.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/updater_gnome.xml" title="Edit source document"> </a></div></div></div><p>
  To configure the notification settings for the <span class="guimenu">Package
  Updater</span>, start GNOME <span class="guimenu">Settings</span> and choose
  <span class="guimenu">Notifications</span> › <span class="guimenu">Package Updater</span>.
 </p><div class="procedure" id="id-1.3.3.9.9.8" data-id-title="Installing patches and updates with the GNOME package updater"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 8.2: </span><span class="title-name">Installing patches and updates with the GNOME package updater </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.9.9.8">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/updater_gnome.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    To install the patches and updates, click the notification message. This
    opens the GNOME <span class="guimenu">Package Updater</span>. Alternatively, open
    the updater from <span class="guimenu">Activities</span> by typing <code class="literal">package
    U</code> and choosing <span class="guimenu">Package Updater</span>.
   </p><div class="informalfigure"><div class="mediaobject"><a href="images/gupdater_updates.png"><img src="images/gupdater_updates.png" width="75%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
    Updates are sorted into four categories:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.9.9.8.3.2.1"><span class="term">Security updates (patches)</span></dt><dd><p>
       Fix severe security hazards and should always be installed.
      </p></dd><dt id="id-1.3.3.9.9.8.3.2.2"><span class="term">Recommended updates (patches)</span></dt><dd><p>
       Fix issues that could compromise your computer. Installing them is
       strongly recommended.
      </p></dd><dt id="id-1.3.3.9.9.8.3.2.3"><span class="term">Optional updates (patches)</span></dt><dd><p>
       Fix non-security relevant issues or provide enhancements.
      </p></dd><dt id="id-1.3.3.9.9.8.3.2.4"><span class="term">Other updates</span></dt><dd><p>
       New versions of packages that are installed.
      </p></dd></dl></div><p>
    All available updates are preselected for installation. If you do not want
    to install all updates, deselect unwanted updates first. It is strongly
    recommended to always install all security and recommended updates.
   </p><p>
    To get detailed information on an update, click its title and then
    <span class="guimenu">Details</span>. The information is displayed in a box
    beneath the package list.
   </p></li><li class="step"><p>
     Click <span class="guimenu">Install Updates</span> to start the installation.
    </p></li><li class="step"><p>
     Some updates may require to restart the machine or to log out. Check
     the message displayed after installation for instructions.
    </p></li></ol></div></div></section><section class="sect1" id="sec-updater-gnomesw" data-id-title="Updating packages with GNOME Software"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8.6 </span><span class="title-name">Updating packages with <span class="guimenu">GNOME Software</span></span></span> <a title="Permalink" class="permalink" href="#sec-updater-gnomesw">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/updater_gnome_sw.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  In addition to the GNOME <span class="guimenu">Package Updater</span>, GNOME provides
  <span class="guimenu">GNOME Software</span> which has the following functionality:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Install, update, and remove software delivered as an RPM via PackageKit
   </p></li><li class="listitem"><p>
    Install, update, and remove software delivered as a Flatpak
   </p></li><li class="listitem"><p>
    Install, update, and remove GNOME shell extensions
    (<a class="link" href="https://extensions.gnome.org" target="_blank">https://extensions.gnome.org</a>)
   </p></li><li class="listitem"><p>
    Update firmware for hardware devices using <span class="emphasis"><em>Linux Vendor
    Firmware Service</em></span> (LVFS, <a class="link" href="https://fwupd.org" target="_blank">https://fwupd.org</a>)
   </p></li></ul></div><p>
  <span class="guimenu">GNOME Software</span> also provides screenshots,
  ratings, and reviews for software.
 </p><div class="figure" id="id-1.3.3.9.10.6"><div class="figure-contents"><div class="mediaobject"><a href="images/gnome-software-updates.png"><img src="images/gnome-software-updates.png" width="75%" alt="GNOME Software—Updates view" title="GNOME Software—Updates view"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 8.4: </span><span class="title-name"><span class="guimenu">GNOME Software</span>—<span class="guimenu">Updates</span>
    view </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.9.10.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/updater_gnome_sw.xml" title="Edit source document"> </a></div></div></div><p>
  <span class="guimenu">GNOME Software</span> has the following differences to other
  tools provided on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Unlike YaST or Zypper, for installing software packaged as an RPM,
    <span class="guimenu">GNOME Software</span> is restricted to software that
    provides AppStream metadata. This includes most desktop applications.
   </p></li><li class="listitem"><p>
    While the GNOME <span class="guimenu">Package Updater</span> updates packages within
    the running system (forcing you to restart the respective applications),
    <span class="guimenu">GNOME Software</span> downloads the updates and applies
    them after reboot.
   </p></li></ul></div></section></section><section class="chapter" id="cha-sw-cl" data-id-title="Managing software with command line tools"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">9 </span><span class="title-name">Managing software with command line tools</span></span> <a title="Permalink" class="permalink" href="#cha-sw-cl">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/sw_managing_commandline.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    This chapter describes Zypper and RPM, two command line tools for managing
    software. For a definition of the terminology used in this context (for
    example, <code class="literal">repository</code>, <code class="literal">patch</code>, or
    <code class="literal">update</code>) refer to
    <a class="xref" href="#sec-onlineupdate-terms" title="8.1. Definition of terms">Section 8.1, “Definition of terms”</a>.
   </p></div></div></div></div><section class="sect1" id="sec-zypper" data-id-title="Using Zypper"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.1 </span><span class="title-name">Using Zypper</span></span> <a title="Permalink" class="permalink" href="#sec-zypper">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Zypper is a command line package manager for installing, updating, and
  removing packages. It also manages repositories. It is especially useful for
  accomplishing remote software management tasks or managing software from
  shell scripts.
 </p><section class="sect2" id="sec-zypper-usage" data-id-title="General usage"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.1 </span><span class="title-name">General usage</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-usage">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The general syntax of Zypper is:
  </p><div class="verbatim-wrap"><pre class="screen">zypper <code class="option">[--global-options]</code> <em class="replaceable">COMMAND</em> <code class="option"> [--command-options]</code> <code class="option">[arguments]</code></pre></div><p>
   The components enclosed in brackets are not required. See <code class="command">zypper
   help</code> for a list of general options and all commands. To get help
   for a specific command, type <code class="command">zypper help</code>
   <em class="replaceable">COMMAND</em>.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.10.3.4.5.1"><span class="term">Zypper commands</span></dt><dd><p>
      The simplest way to execute Zypper is to type its name, followed by a
      command. For example, to apply all needed patches to the system, use:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper patch</pre></div></dd><dt id="id-1.3.3.10.3.4.5.2"><span class="term">Global options</span></dt><dd><p>
      Additionally, you can choose from one or more global options by typing
      them immediately before the command:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper --non-interactive patch</pre></div><p>
      In the above example, the option <code class="option">--non-interactive</code> means
      that the command is run without asking anything (automatically applying
      the default answers).
     </p></dd><dt id="id-1.3.3.10.3.4.5.3"><span class="term">Command-specific options</span></dt><dd><p>
      To use options that are specific to a particular command, type them
      immediately after the command:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper patch --auto-agree-with-licenses</pre></div><p>
      In the above example, <code class="option">--auto-agree-with-licenses</code> is used
      to apply all needed patches to a system without you being asked to
      confirm any licenses. Instead, licenses will be accepted automatically.
     </p></dd><dt id="id-1.3.3.10.3.4.5.4"><span class="term">Arguments</span></dt><dd><p>
      Some commands require one or more arguments. For example, when using the
      command <code class="command">install</code>, you need to specify which package or
      which packages you want to <span class="emphasis"><em>install</em></span>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install mplayer</pre></div><p>
      Some options also require a single argument. The following command will
      list all known patterns:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper search -t pattern</pre></div></dd></dl></div><p>
   You can combine all of the above. For example, the following command will
   install the <span class="package">mc</span> and <span class="package">vim</span> packages from
   the <code class="literal">factory</code> repository while being verbose:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper -v install --from factory mc vim</pre></div><p>
   The <code class="option">--from</code> option keeps all repositories
   enabled (for solving any dependencies) while requesting the package from the
   specified repository. <code class="option">--repo</code> is an alias for <code class="option">--from</code>, and you may use either one.
  </p><p>
   Most Zypper commands have a <code class="literal">dry-run</code> option that does a
   simulation of the given command. It can be used for test purposes.
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper remove --dry-run MozillaFirefox</pre></div><p>
   Zypper supports the global <code class="option">--userdata
   <em class="replaceable">STRING</em></code> option. You can specify a string
   with this option, which gets written to Zypper's log files and plug-ins
   (such as the Btrfs plug-in). It can be used to mark and identify
   transactions in log files.
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper --userdata <em class="replaceable">STRING</em> patch</pre></div></section><section class="sect2" id="sec-zypper-subcommands" data-id-title="Using Zypper subcommands"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.2 </span><span class="title-name">Using Zypper subcommands</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-subcommands">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Zypper subcommands are executables that are stored in the directory
   specified by the <code class="option">zypper_execdir</code> configuration option. It is
   <code class="filename">/usr/lib/zypper/commands</code> by default. If a subcommand
   is not found there, Zypper automatically searches the rest of your $PATH
   locations for it. This lets you create your own local extensions and store
   them in user space.
  </p><p>
   Executing subcommands in the Zypper shell, and using global Zypper options
   are not supported.
  </p><p>
   List your available subcommands:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper help subcommand
[...]
Available zypper subcommands in '/usr/lib/zypper/commands'

  appstream-cache
  lifecycle
  migration
  search-packages

Zypper subcommands available from elsewhere on your $PATH

  log                   Zypper logfile reader
                            (/usr/sbin/zypper-log)</pre></div><p>
   View the help screen for a subcommand:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper help appstream-cache</pre></div></section><section class="sect2" id="sec-zypper-softman" data-id-title="Installing and removing software with Zypper"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.3 </span><span class="title-name">Installing and removing software with Zypper</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-softman">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To install or remove packages, use the following commands:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install <em class="replaceable">PACKAGE_NAME</em>
<code class="prompt user">&gt; </code><code class="command">sudo</code> zypper remove <em class="replaceable">PACKAGE_NAME</em></pre></div><div id="id-1.3.3.10.3.6.4" data-id-title="Do not remove mandatory system packages" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Do not remove mandatory system packages</div><p>
    Do not remove mandatory system packages like <span class="package">glibc</span> ,
    <span class="package">zypper</span> , <span class="package">kernel</span> . If they are
    removed, the system can become unstable or stop working altogether.
   </p></div><section class="sect3" id="sec-zypper-selectpackage" data-id-title="Selecting which packages to install or remove"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.3.1 </span><span class="title-name">Selecting which packages to install or remove</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-selectpackage">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    There are various ways to address packages with the commands
    <code class="command">zypper install</code> and <code class="command">zypper remove</code>.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.10.3.6.5.3.1"><span class="term">By exact package name</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install MozillaFirefox</pre></div></dd><dt id="id-1.3.3.10.3.6.5.3.2"><span class="term">By exact package name and version number</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install MozillaFirefox-52.2</pre></div></dd><dt id="id-1.3.3.10.3.6.5.3.3"><span class="term">By repository alias and package name</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install mozilla:MozillaFirefox</pre></div><p>
       Where <code class="literal">mozilla</code> is the alias of the repository from
       which to install.
      </p></dd><dt id="id-1.3.3.10.3.6.5.3.4"><span class="term">By package name using wild cards</span></dt><dd><p>
       You can select all packages that have names starting or ending with a
       certain string. Use wild cards with care, especially when removing
       packages. The following command will install all packages starting with
       <span class="quote">“<span class="quote">Moz</span>”</span>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install 'Moz*'</pre></div><div id="id-1.3.3.10.3.6.5.3.4.2.3" data-id-title="Removing all -debuginfo packages" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Removing all <code class="filename">-debuginfo</code> packages</div><p>
        When debugging a problem, you sometimes need to temporarily install a
        lot of <code class="filename">-debuginfo</code> packages which give you more
        information about running processes. After your debugging session
        finishes and you need to clean the environment, run the following:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper remove '*-debuginfo'</pre></div></div></dd><dt id="id-1.3.3.10.3.6.5.3.5"><span class="term">By capability</span></dt><dd><p>
       For example, to install a package without knowing its name, capabilities
       come in handy. The following command will install the package
       <span class="package">MozillaFirefox</span>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install firefox</pre></div></dd><dt id="id-1.3.3.10.3.6.5.3.6"><span class="term">By capability, hardware architecture, or version</span></dt><dd><p>
       Together with a capability, you can specify a hardware architecture and
       a version:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         The name of the desired hardware architecture is appended to the
         capability after a full stop. For example, to specify the AMD64/Intel 64
         architectures (which in Zypper is named <code class="literal">x86_64</code>),
         use:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install 'firefox.x86_64'</pre></div></li><li class="listitem"><p>
         Versions must be appended to the end of the string and must be
         preceded by an operator: <code class="literal">&lt;</code> (lesser than),
         <code class="literal">&lt;=</code> (lesser than or equal), <code class="literal">=</code>
         (equal), <code class="literal">&gt;=</code> (greater than or equal),
         <code class="literal">&gt;</code> (greater than).
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install 'firefox&gt;=74.2'</pre></div></li><li class="listitem"><p>
         You can also combine a hardware architecture and version requirement:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install 'firefox.x86_64&gt;=74.2'</pre></div></li></ul></div></dd><dt id="id-1.3.3.10.3.6.5.3.7"><span class="term">By path to the RPM file</span></dt><dd><p>
       You can also specify a local or remote path to a package:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install /tmp/install/MozillaFirefox.rpm
<code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install http://download.example.com/MozillaFirefox.rpm</pre></div></dd></dl></div></section><section class="sect3" id="sec-zypper-combineinstall" data-id-title="Combining installation and removal of packages"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.3.2 </span><span class="title-name">Combining installation and removal of packages</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-combineinstall">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To install and remove packages simultaneously, use the
    <code class="literal">+/-</code> modifiers. To install <span class="package">emacs</span> and
    simultaneously remove <span class="package">vim</span> , use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install emacs -vim</pre></div><p>
    To remove <span class="package">emacs</span> and simultaneously install
    <span class="package">vim</span> , use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper remove emacs +vim</pre></div><p>
    To prevent the package name starting with the <code class="literal">-</code> being
    interpreted as a command option, always use it as the second argument. If
    this is not possible, precede it with <code class="literal">--</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install -emacs +vim       # Wrong
<code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install vim -emacs        # Correct
<code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install -- -emacs +vim    # Correct
<code class="prompt user">&gt; </code><code class="command">sudo</code> zypper remove emacs +vim         # Correct</pre></div></section><section class="sect3" id="sec-zypper-clean" data-id-title="Cleaning up dependencies of removed packages"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.3.3 </span><span class="title-name">Cleaning up dependencies of removed packages</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-clean">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If (together with a certain package), you automatically want to remove any
    packages that become unneeded after removing the specified package, use the
    <code class="option">--clean-deps</code> option:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper rm --clean-deps <em class="replaceable">PACKAGE_NAME</em></pre></div></section><section class="sect3" id="sec-zypper-script" data-id-title="Using Zypper in scripts"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.3.4 </span><span class="title-name">Using Zypper in scripts</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-script">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    By default, Zypper asks for a confirmation before installing or removing a
    selected package, or when a problem occurs. You can override this behavior
    using the <code class="option">--non-interactive</code> option. This option must be
    given before the actual command (<code class="command">install</code>,
    <code class="command">remove</code>, and <code class="command">patch</code>), as can be seen in
    the following:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper <code class="option">--non-interactive</code> install <em class="replaceable">PACKAGE_NAME</em></pre></div><p>
    This option allows the use of Zypper in scripts and cron jobs.
   </p></section><section class="sect3" id="sec-zypper-softman-sources" data-id-title="Installing or downloading source packages"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.3.5 </span><span class="title-name">Installing or downloading source packages</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-softman-sources">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To install the corresponding source package of a package, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper source-install <em class="replaceable">PACKAGE_NAME</em></pre></div><p>
    When executed as <code class="systemitem">root</code>, the default location to install source
    packages is <code class="filename">/usr/src/packages/</code> and
    <code class="filename">~/rpmbuild</code> when run as user. These values can be
    changed in your local <code class="command">rpm</code> configuration.
   </p><p>
    This command will also install the build dependencies of the specified
    package. If you do not want this, add the switch <code class="literal">-D</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper source-install -D <em class="replaceable">PACKAGE_NAME</em></pre></div><p>
    To install only the build dependencies use <code class="literal">-d</code>.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper source-install -d <em class="replaceable">PACKAGE_NAME</em></pre></div><p>
    Of course, this will only work if you have the repository with the source
    packages enabled in your repository list (it is added by default, but not
    enabled). See <a class="xref" href="#sec-zypper-instrepo" title="9.1.6. Managing repositories with Zypper">Section 9.1.6, “Managing repositories with Zypper”</a> for details on
    repository management.
   </p><p>
    A list of all source packages available in your repositories can be
    obtained with:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper search -t srcpackage</pre></div><p>
    You can also download source packages for all installed packages to a local
    directory. To download source packages, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper source-download</pre></div><p>
    The default download directory is
    <code class="filename">/var/cache/zypper/source-download</code>. You can change it
    using the <code class="option">--directory</code> option. To only show missing or
    extraneous packages without downloading or deleting anything, use the
    <code class="option">--status</code> option. To delete extraneous source packages, use
    the <code class="option">--delete</code> option. To disable deleting, use the
    <code class="option">--no-delete</code> option.
   </p></section><section class="sect3" id="sec-zypper-softman-pluscontent" data-id-title="Installing packages from disabled repositories"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.3.6 </span><span class="title-name">Installing packages from disabled repositories</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-softman-pluscontent">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Normally you can only install or refresh packages from enabled
    repositories. The <code class="option">--plus-content
    <em class="replaceable">TAG</em></code> option helps you specify
    repositories to be refreshed, temporarily enabled during the current Zypper
    session, and disabled after it completes.
   </p><p>
    For example, to enable repositories that may provide additional
    <code class="filename">-debuginfo</code> or <code class="filename">-debugsource</code>
    packages, use <code class="option">--plus-content debug</code>. You can specify this
    option multiple times.
   </p><p>
    To temporarily enable such 'debug' repositories to install a specific
    <code class="filename">-debuginfo</code> package, use the option as follows:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper --plus-content debug \
   install "debuginfo(build-id)=eb844a5c20c70a59fc693cd1061f851fb7d046f4"</pre></div><p>
    The <code class="literal">build-id</code> string is reported by
    <code class="command">gdb</code> for missing debuginfo packages.
   </p><div id="id-1.3.3.10.3.6.10.7" data-id-title="Disabled installation media" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Disabled installation media</div><p>
     
     Repositories from the <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> installation media are still
     configured but disabled after successful installation. You can use the
     <code class="option">--plus-content</code> option to install packages from the
     installation media instead of the online repositories. Before calling
     <code class="command">zypper</code>, ensure the media is available, for example by
     inserting the DVD into the computer's drive.
    </p></div></section><section class="sect3" id="sec-zypper-softman-util" data-id-title="Utilities"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.3.7 </span><span class="title-name">Utilities</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-softman-util">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To verify whether all dependencies are still fulfilled and to repair
    missing dependencies, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper verify</pre></div><p>
    In addition to dependencies that must be fulfilled, some packages
    <span class="quote">“<span class="quote">recommend</span>”</span> other packages. These recommended packages are
    only installed if actually available and installable. In case recommended
    packages were made available after the recommending package has been
    installed (by adding additional packages or hardware), use the following
    command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install-new-recommends</pre></div><p>
    This command is very useful after plugging in a Web cam or Wi-Fi device. It
    will install drivers for the device and related software, if available.
    Drivers and related software are only installable if certain hardware
    dependencies are fulfilled.
   </p></section></section><section class="sect2" id="sec-zypper-softup" data-id-title="Updating software with Zypper"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.4 </span><span class="title-name">Updating software with Zypper</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-softup">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   There are three different ways to update software using Zypper: by
   installing patches, by installing a new version of a package or by updating
   the entire distribution. The latter is achieved with <code class="command">zypper
   dist-upgrade</code>. Upgrading <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is discussed in

   <span class="phrase"><span class="intraxref">Book “Upgrade Guide”, Chapter 2 “Upgrade paths and methods”</span></span>.
  </p><section class="sect3" id="sec-zypper-softup-patch" data-id-title="Installing all needed patches"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.4.1 </span><span class="title-name">Installing all needed patches</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-softup-patch">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <span class="emphasis"><em>Patching</em></span> <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is the most reliable way to install
    new versions of installed packages. It guarantees that all required
    packages with correct versions are installed and ensures that package versions
    considered as <span class="emphasis"><em>conflicting</em></span> are omitted.
   </p><p>
    To install all officially released patches that apply to your system, run:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper patch</pre></div><p>
    All patches available from repositories configured on your computer are
    checked for their relevance to your installation. If they are relevant (and
    not classified as <code class="literal">optional</code> or
    <code class="literal">feature</code>), they are installed immediately.
    If <code class="command">zypper patch</code> succeeds, it is guaranteed that no
    vulnerable version package is installed unless you confirm the exception.
    <span class="phrase">Note that the official update repository is only
    available after registering your <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> installation.</span>
   </p><p>
    If a patch that is about to be installed includes changes that require a
    system reboot, you will be warned before.
   </p><p>
    The plain <code class="command">zypper patch</code> command does not apply patches
    from third party repositories. To update also the third party repositories,
    use the <code class="literal">with-update</code> command option as follows:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper patch --with-update</pre></div><p>
    To install also optional patches, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper patch --with-optional</pre></div><p>
    To install all patches relating to a specific Bugzilla issue, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper patch --bugzilla=<em class="replaceable">NUMBER</em></pre></div><p>
    To install all patches relating to a specific CVE database entry, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper patch --cve=<em class="replaceable">NUMBER</em></pre></div><p>
    For example, to install a security patch with the CVE number
    <code class="literal">CVE-2010-2713</code>, execute:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper patch --cve=CVE-2010-2713</pre></div><p>
    To install only patches which affect Zypper and the package management
    itself, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper patch --updatestack-only</pre></div><p>
    Bear in mind that other command options that would also update other
    repositories will be dropped if you use the
    <code class="literal">updatestack-only</code> command option.
   </p></section><section class="sect3" id="sec-zypper-softup-listpatch" data-id-title="Listing patches"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.4.2 </span><span class="title-name">Listing patches</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-softup-listpatch">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To find out whether patches are available, Zypper allows viewing the
    following information:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.10.3.7.4.3.1"><span class="term">Number of needed patches</span></dt><dd><p>
       To list the number of needed patches (patches that apply to your system
       but are not yet installed), use <code class="command">patch-check</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper patch-check
Loading repository data...
Reading installed packages...
5 patches needed (1 security patch)</pre></div><p>
       This command can be combined with the
       <code class="option">--updatestack-only</code> option to list only the patches
       which affect Zypper and the package management itself.
      </p></dd><dt id="id-1.3.3.10.3.7.4.3.2"><span class="term">List of needed patches</span></dt><dd><p>
       To list all needed patches (patches that apply to your system but are
       not yet installed), use <code class="command">zypper list-patches</code>.
      </p></dd><dt id="id-1.3.3.10.3.7.4.3.3"><span class="term">List of all patches</span></dt><dd><p>
       To list all patches available for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, regardless of whether
       they are already installed or apply to your installation, use
       <code class="command">zypper patches</code>.
      </p></dd></dl></div><p>
    It is also possible to list and install patches relevant to specific
    issues. To list specific patches, use the <code class="command">zypper
    list-patches</code> command with the following options:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.10.3.7.4.5.1"><span class="term">By Bugzilla issues</span></dt><dd><p>
       To list all needed patches that relate to Bugzilla issues, use the
       option <code class="option">--bugzilla</code>.
      </p><p>
       To list patches for a specific bug, you can also specify a bug number:
       <code class="option">--bugzilla=<em class="replaceable">NUMBER</em></code>. To search
       for patches relating to multiple Bugzilla issues, add commas between the
       bug numbers, for example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper list-patches --bugzilla=972197,956917</pre></div></dd><dt id="id-1.3.3.10.3.7.4.5.2"><span class="term">By CVE number</span></dt><dd><p>
       To list all needed patches that relate to an entry in the CVE database
       (Common Vulnerabilities and Exposures), use the option
       <code class="option">--cve</code>.
      </p><p>
       To list patches for a specific CVE database entry, you can also specify
       a CVE number: <code class="option">--cve=<em class="replaceable">NUMBER</em></code>.
       To search for patches relating to multiple CVE database entries, add
       commas between the CVE numbers, for example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper list-patches --cve=CVE-2016-2315,CVE-2016-2324</pre></div></dd><dt id="id-1.3.3.10.3.7.4.5.3"><span class="term">List retracted patches</span></dt><dd><p>
          In the SUSE Linux Enterprise 15 codestream, some patches are automatically
          retracted. Maintenance updates are carefully tested, because there
          is a risk that an update contains a new bug. If an update proves to
          contain a bug, a new update (with a higher version number) is
          issued to revert the buggy update, and the buggy update is blocked
          from being installed again. You can list retracted patches with
          <code class="command">zypper</code>:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">zypper lp --all |grep retracted</code>
SLE-Module-Basesystem15-SP3-Updates | SUSE-SLE-Module-Basesystem-15-SP3-2021-1965
 | recommended | important | ---    | retracted  | Recommended update for multipath-tools
SLE-Module-Basesystem15-SP3-Updates | SUSE-SLE-Module-Basesystem-15-SP3-2021-2689
 | security    | important | ---    | retracted  | Security update for cpio
SLE-Module-Basesystem15-SP3-Updates | SUSE-SLE-Module-Basesystem-15-SP3-2021-3655
 | security    | important | reboot | retracted  | Security update for the Linux Kernel</pre></div><p>
          See complete information on a retracted (or any) patch:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">zypper patch-info SUSE-SLE-Product-SLES-15-2021-2689</code>
Loading repository data...
Reading installed packages...

Information for patch SUSE-SLE-Product-SLES-15-2021-2689:
---------------------------------------------------------
Repository  : SLE-Product-SLES15-LTSS-Updates
Name        : SUSE-SLE-Product-SLES-15-2021-2689
Version     : 1
Arch        : noarch
Vendor      : maint-coord@suse.de
Status      : retracted
Category    : security
Severity    : important
Created On  : Mon 16 Aug 2021 03:44:00 AM PDT
Interactive : ---
Summary     : Security update for cpio
Description :
    This update for cpio fixes the following issues:

    It was possible to trigger Remote code execution due to a integer overflow
    (CVE-2021-38185, bsc#1189206)

    UPDATE:
    This update was buggy and could lead to hangs, so it has been retracted.
    There will be a follow up update.
    [...]</pre></div></dd><dt id="id-1.3.3.10.3.7.4.5.4"><span class="term">Patch with conflicting packages</span></dt><dd><div class="verbatim-wrap"><pre class="screen">Information for patch openSUSE-SLE-15.3-2022-333:
-------------------------------------------------
Repository  : Update repository with updates from SUSE Linux Enterprise 15
Name        : openSUSE-SLE-15.3-2022-333
Version     : 1
Arch        : noarch
Vendor      : maint-coord@suse.de
Status      : needed
Category    : security
Severity    : important
Created On  : Fri Feb  4 09:30:32 2022
Interactive : reboot
Summary     : Security update for xen
Description :
    This update for xen fixes the following issues:

    - CVE-2022-23033: Fixed guest_physmap_remove_page not removing the p2m mappings. (XSA-393) (bsc#1194576)
    - CVE-2022-23034: Fixed possible DoS by a PV guest Xen while unmapping a grant. (XSA-394) (bsc#1194581)
    - CVE-2022-23035: Fixed insufficient cleanup of passed-through device IRQs. (XSA-395) (bsc#1194588)
Provides    : patch:openSUSE-SLE-15.3-2022-333 = 1
Conflicts   : [22]
    xen.src &lt; 4.14.3_06-150300.3.18.2
    xen.noarch &lt; 4.14.3_06-150300.3.18.2
    xen.x86_64 &lt; 4.14.3_06-150300.3.18.2
    xen-devel.x86_64 &lt; 4.14.3_06-150300.3.18.2
    xen-devel.noarch &lt; 4.14.3_06-150300.3.18.2
[...]</pre></div><p>
         The above patch conflicts with the affected or vulnerable versions of
         22 packages. If any of these affected or vulnerable packages are
         installed, it triggers a conflict, and the patch is classified as
         <span class="emphasis"><em>needed</em></span>. <code class="command">zypper patch</code> tries to
         install all available patches. If it encounters problems, it reports
         them, thus informing you that not all updates are installed. The
         conflict can be resolved by either updating the affected or vulnerable
         packages or by removing them. Because SUSE update repositories also
         ship fixed packages, updating is a standard way to resolve conflicts.
         If the package cannot be updated—for example, because of dependency
         issues or package locks—it is deleted after the user's approval.
        </p></dd></dl></div><p>
    To list all patches regardless of whether they are needed, use the option
    <code class="option">--all</code> additionally. For example, to list all patches with
    a CVE number assigned, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper list-patches --all --cve
Issue | No.           | Patch             | Category    | Severity  | Status
------+---------------+-------------------+-------------+-----------+----------
cve   | CVE-2019-0287 | SUSE-SLE-Module.. | recommended | moderate  | needed
cve   | CVE-2019-3566 | SUSE-SLE-SERVER.. | recommended | moderate  | not needed
[...]</pre></div></section><section class="sect3" id="sec-zypper-softup-update" data-id-title="Installing new package versions"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.4.3 </span><span class="title-name">Installing new package versions</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-softup-update">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If a repository contains only new packages, but does not provide patches,
    <code class="command">zypper patch</code> does not show any effect. To update
    all installed packages with newer available versions, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper update</pre></div><div id="id-1.3.3.10.3.7.5.4" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
  <code class="command">zypper update</code> ignores problematic packages.
  For example, if a package is locked, <code class="command">zypper update</code>
  omits the package, even if a higher version of it is available. Conversely,
  <code class="command">zypper patch</code> reports a conflict if the package is
  considered vulnerable.
 </p></div><p>
    To update individual packages, specify the package with either the update
    or install command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper update <em class="replaceable">PACKAGE_NAME</em>
<code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install <em class="replaceable">PACKAGE_NAME</em></pre></div><p>
    A list of all new installable packages can be obtained with the command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper list-updates</pre></div><p>
    Note that this command only lists packages that match the following
    criteria:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      has the same vendor like the already installed package,
     </p></li><li class="listitem"><p>
      is provided by repositories with at least the same priority than the
      already installed package,
     </p></li><li class="listitem"><p>
      is installable (all dependencies are satisfied).
     </p></li></ul></div><p>
    A list of <span class="emphasis"><em>all</em></span> new available packages (regardless
    whether installable or not) can be obtained with:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper list-updates --all</pre></div><p>
    To find out why a new package cannot be installed, use the <code class="command">zypper
    install</code> or <code class="command">zypper update</code> command as described
    above.
   </p></section><section class="sect3" id="sec-zypper-softup-orphaned" data-id-title="Identifying orphaned packages"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.4.4 </span><span class="title-name">Identifying orphaned packages</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-softup-orphaned">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Whenever you remove a repository from Zypper or upgrade your system, some
    packages can get in an <span class="quote">“<span class="quote">orphaned</span>”</span> state. These
    <span class="emphasis"><em>orphaned</em></span> packages belong to no active repository
    anymore. The following command gives you a list of these:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper packages --orphaned</pre></div><p>
    With this list, you can decide if a package is still needed or can be
    removed safely.
   </p></section></section><section class="sect2" id="sec-zypper-ps" data-id-title="Identifying processes and services using deleted files"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.5 </span><span class="title-name">Identifying processes and services using deleted files</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-ps">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   When patching, updating, or removing packages, there may be running processes
   on the system which continue to use files having been deleted by the update
   or removal. Use <code class="command">zypper ps</code> to list processes using deleted
   files. In case the process belongs to a known service, the service name is
   listed, making it easy to restart the service. By default <code class="command">zypper
   ps</code> shows a table:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper ps
PID   | PPID | UID | User  | Command      | Service      | Files
------+------+-----+-------+--------------+--------------+-------------------
814   | 1    | 481 | avahi | avahi-daemon | avahi-daemon | /lib64/ld-2.19.s-&gt;
      |      |     |       |              |              | /lib64/libdl-2.1-&gt;
      |      |     |       |              |              | /lib64/libpthrea-&gt;
      |      |     |       |              |              | /lib64/libc-2.19-&gt;
[...]</pre></div><table style="border: 0; " class="simplelist"><tr><td><span class="bold"><strong>PID</strong></span>: ID of the process
   </td></tr><tr><td><span class="bold"><strong>PPID</strong></span>: ID of the parent process
   </td></tr><tr><td><span class="bold"><strong>UID</strong></span>: ID of the user running the
    process
   </td></tr><tr><td><span class="bold"><strong>Login</strong></span>: Login name of the user
    running the process
   </td></tr><tr><td><span class="bold"><strong>Command</strong></span>: Command used to
    execute the process
   </td></tr><tr><td><span class="bold"><strong>Service</strong></span>: Service name (only if command
    is associated with a system service)
   </td></tr><tr><td><span class="bold"><strong>Files</strong></span>: The list of the deleted
    files
   </td></tr></table><p>
   The output format of <code class="command">zypper ps</code> can be controlled as
   follows:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.10.3.8.6.1"><span class="term"><code class="command">zypper ps</code><code class="option">-s</code></span></dt><dd><p>
      Create a short table not showing the deleted files.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper ps -s
PID   | PPID | UID  | User    | Command      | Service
------+------+------+---------+--------------+--------------
814   | 1    | 481  | avahi   | avahi-daemon | avahi-daemon
817   | 1    | 0    | root    | irqbalance   | irqbalance
1567  | 1    | 0    | root    | sshd         | sshd
1761  | 1    | 0    | root    | master       | postfix
1764  | 1761 | 51   | postfix | pickup       | postfix
1765  | 1761 | 51   | postfix | qmgr         | postfix
2031  | 2027 | 1000 | tux     | bash         |</pre></div></dd><dt id="id-1.3.3.10.3.8.6.2"><span class="term"><code class="command">zypper ps</code><code class="option">-ss</code></span></dt><dd><p>
      Show only processes associated with a system service.
     </p><div class="verbatim-wrap"><pre class="screen">PID   | PPID | UID  | User    | Command      | Service
------+------+------+---------+--------------+--------------
814   | 1    | 481  | avahi   | avahi-daemon | avahi-daemon
817   | 1    | 0    | root    | irqbalance   | irqbalance
1567  | 1    | 0    | root    | sshd         | sshd
1761  | 1    | 0    | root    | master       | postfix
1764  | 1761 | 51   | postfix | pickup       | postfix
1765  | 1761 | 51   | postfix | qmgr         | postfix</pre></div></dd><dt id="id-1.3.3.10.3.8.6.3"><span class="term"><code class="command">zypper ps</code><code class="option">-sss</code></span></dt><dd><p>
      Only show system services using deleted files.
     </p><div class="verbatim-wrap"><pre class="screen">avahi-daemon
irqbalance
postfix
sshd</pre></div></dd><dt id="id-1.3.3.10.3.8.6.4"><span class="term"><code class="command">zypper ps</code><code class="option">--print "systemctl status %s"</code></span></dt><dd><p>
      Show the commands to retrieve status information for services which might
      need a restart.
     </p><div class="verbatim-wrap"><pre class="screen">systemctl status avahi-daemon
systemctl status irqbalance
systemctl status postfix
systemctl status sshd</pre></div></dd></dl></div><p>
   For more information about service handling refer to
   <a class="xref" href="#cha-systemd" title="Chapter 19. The systemd daemon">Chapter 19, <em>The <code class="systemitem">systemd</code> daemon</em></a>.
  </p></section><section class="sect2" id="sec-zypper-instrepo" data-id-title="Managing repositories with Zypper"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.6 </span><span class="title-name">Managing repositories with Zypper</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-instrepo">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   All installation or patch commands of Zypper rely on a list of known
   repositories. To list all repositories known to the system, use the command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper repos</pre></div><p>
   The result will look similar to the following output:
  </p><div class="example" id="ex-zypper-repos" data-id-title="Zypper—list of known repositories"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 9.1: </span><span class="title-name">Zypper—list of known repositories </span></span><a title="Permalink" class="permalink" href="#ex-zypper-repos">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper repos
# | Alias        | Name          | Enabled | Refresh
--+--------------+---------------+---------+--------
1 | SLEHA-15-GEO | SLEHA-15-GEO  | Yes     | No
2 | SLEHA-15     | SLEHA-15      | Yes     | No
3 | SLES15       | SLES15        | Yes     | No</pre></div></div></div><p>
   When specifying repositories in various commands, an alias, URI or
   repository number from the <code class="command">zypper repos</code> command output
   can be used. A repository alias is a short version of the repository name
   for use in repository handling commands. Note that the repository numbers
   can change after modifying the list of repositories. The alias will never
   change by itself.
  </p><p>
   By default, details such as the URI or the priority of the repository are
   not displayed. Use the following command to list all details:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper repos -d</pre></div><section class="sect3" id="sec-zypper-instrepo-add" data-id-title="Adding repositories"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.6.1 </span><span class="title-name">Adding repositories</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-instrepo-add">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To add a repository, run
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper addrepo <em class="replaceable">URI</em> <em class="replaceable">ALIAS</em></pre></div><p>
    <em class="replaceable">URI</em> can either be an Internet repository, a
    network resource, a directory or a CD or DVD (see
    <a class="link" href="https://en.opensuse.org/openSUSE:Libzypp_URIs" target="_blank">https://en.opensuse.org/openSUSE:Libzypp_URIs</a> for
    details). The <em class="replaceable">ALIAS</em> is a shorthand and unique
    identifier of the repository. You can freely choose it, with the only
    exception that it needs to be unique. Zypper will issue a warning if you
    specify an alias that is already in use.
   </p></section><section class="sect3" id="sec-zypper-instrepo-refresh" data-id-title="Refreshing repositories"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.6.2 </span><span class="title-name">Refreshing repositories</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-instrepo-refresh">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <code class="command">zypper</code> enables you to fetch changes in packages from
    configured repositories. To fetch the changes, run:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper refresh</pre></div><div id="id-1.3.3.10.3.9.10.4" data-id-title="Default behavior of zypper" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Default behavior of <code class="command">zypper</code></div><p>
     By default, some commands perform <code class="command">refresh</code>
     automatically, so you do not need to run the command explicitly.
    </p></div><p>
    The <code class="command">refresh</code> command enables you to view changes also in
    disabled repositories, by using the <code class="literal">--plus-content</code>
    option:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper --plus-content refresh</pre></div><p>
    This option fetches changes in repositories, but keeps the disabled
    repositories in the same state—disabled.
   </p></section><section class="sect3" id="sec-zypper-instrepo-rm" data-id-title="Removing repositories"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.6.3 </span><span class="title-name">Removing repositories</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-instrepo-rm">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To remove a repository from the list, use the command <code class="command">zypper
    removerepo</code> together with the alias or number of the repository
    you want to delete. For example, to remove the repository
    <code class="literal">SLEHA-12-GEO</code>
    from <a class="xref" href="#ex-zypper-repos" title="Zypper—list of known repositories">Example 9.1, “Zypper—list of known repositories”</a>, use one of the following commands:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper removerepo 1
<code class="prompt user">&gt; </code><code class="command">sudo</code> zypper removerepo "SLEHA-12-GEO"</pre></div></section><section class="sect3" id="sec-zypper-instrepo-modify" data-id-title="Modifying repositories"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.6.4 </span><span class="title-name">Modifying repositories</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-instrepo-modify">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Enable or disable repositories with <code class="command">zypper modifyrepo</code>.
    You can also alter the repository's properties (such as refreshing
    behavior, name or priority) with this command. The following command will
    enable the repository named <code class="literal">updates</code>, turn on
    auto-refresh and set its priority to 20:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper modifyrepo -er -p 20 'updates'</pre></div><p>
    Modifying repositories is not limited to a single repository—you can
    also operate on groups:
   </p><table style="border: 0; " class="simplelist"><tr><td><code class="option">-a</code>: all repositories</td></tr><tr><td><code class="option">-l</code>: local repositories</td></tr><tr><td><code class="option">-t</code>: remote repositories</td></tr><tr><td><code class="option">-m <em class="replaceable">TYPE</em></code>: repositories
     of a certain type (where <em class="replaceable">TYPE</em> can be one of the
     following: <code class="literal">http</code>, <code class="literal">https</code>, <code class="literal">ftp</code>,
     <code class="literal">cd</code>, <code class="literal">dvd</code>, <code class="literal">dir</code>, <code class="literal">file</code>,
     <code class="literal">cifs</code>, <code class="literal">smb</code>, <code class="literal">nfs</code>, <code class="literal">hd</code>,
     <code class="literal">iso</code>) </td></tr></table><p>
    To rename a repository alias, use the <code class="literal">renamerepo</code>
    command. The following example changes the alias from <code class="literal">Mozilla
    Firefox</code> to <code class="literal">firefox</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper renamerepo 'Mozilla Firefox' firefox</pre></div></section></section><section class="sect2" id="sec-zypper-query" data-id-title="Querying repositories and packages with Zypper"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.7 </span><span class="title-name">Querying repositories and packages with Zypper</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-query">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Zypper offers various methods to query repositories or packages. To get
   lists of all products, patterns, packages or patches available, use the
   following commands:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper products
<code class="prompt user">&gt; </code>zypper patterns
<code class="prompt user">&gt; </code>zypper packages
<code class="prompt user">&gt; </code>zypper patches</pre></div><p>
   To query all repositories for certain packages, use
   <code class="literal">search</code>. To get information regarding particular packages,
   use the <code class="literal">info</code> command.
  </p><section class="sect3" id="sec-zypper-query-search" data-id-title="Searching for software"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.7.1 </span><span class="title-name">Searching for software</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-query-search">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="command">zypper search</code> command works on package names, or,
    optionally, on package summaries and descriptions. Strings wrapped in
    <code class="literal">/</code> are interpreted as regular expressions. By default,
    the search is not case-sensitive.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.10.3.10.5.3.1"><span class="term">Simple search for a package name containing <code class="literal">fire</code></span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper search "fire"</pre></div></dd><dt id="id-1.3.3.10.3.10.5.3.2"><span class="term">Simple search for the exact package <code class="literal">MozillaFirefox</code></span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper search --match-exact "MozillaFirefox"</pre></div></dd><dt id="id-1.3.3.10.3.10.5.3.3"><span class="term">Also search in package descriptions and summaries</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper search -d fire</pre></div></dd><dt id="id-1.3.3.10.3.10.5.3.4"><span class="term">Only display packages not already installed</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper search -u fire</pre></div></dd><dt id="id-1.3.3.10.3.10.5.3.5"><span class="term">Display packages containing the string <code class="literal">fir</code> not followed be <code class="literal">e</code></span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper se "/fir[^e]/"</pre></div></dd></dl></div></section><section class="sect3" id="sec-zypper-query-search-packages" data-id-title="Searching for packages across all SLE modules"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.7.2 </span><span class="title-name">Searching for packages across all SLE modules</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-query-search-packages">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To search for packages both within and outside of currently enabled SLE
    modules, use the <code class="command">search-packages</code> subcommand. This
    command contacts the SUSE Customer Center and searches all modules for matching packages,
    for example:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper search-packages <em class="replaceable">package1</em> <em class="replaceable">package2</em></pre></div><p>
    <code class="command">zypper search-packages</code> provides the following options:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Search for an exact match of your search string: <code class="option">-x</code>,
      <code class="option">--match-exact</code>
     </p></li><li class="listitem"><p>
      Group the results by module (default: group by package):
      <code class="option">-g,</code> <code class="option">--group-by-module</code>
     </p></li><li class="listitem"><p>
      Display more detailed information about packages: <code class="option">-d</code>,
      <code class="option">--details</code>
     </p></li><li class="listitem"><p>
      Output search results in XML: <code class="option">--xmlout</code>
     </p></li></ul></div></section><section class="sect3" id="sec-zypper-query-what-provides" data-id-title="Searching for specific capability"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.7.3 </span><span class="title-name">Searching for specific capability</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-query-what-provides">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To search for packages which provide a special capability, use the command
    <code class="literal">what-provides</code>. For example, if you want to know which
    package provides the Perl module <code class="literal">SVN::Core</code>, use the
    following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper what-provides 'perl(SVN::Core)'</pre></div><p>
    The <code class="literal">what-provides
    <em class="replaceable">PACKAGE_NAME</em></code> is similar to
    <code class="command">rpm -q --whatprovides</code>
    <em class="replaceable">PACKAGE_NAME</em>, but RPM is only able to query the
    RPM database (that is the database of all installed packages). Zypper, on
    the other hand, will tell you about providers of the capability from any
    repository, not only those that are installed.
   </p></section><section class="sect3" id="sec-zypper-query-info" data-id-title="Showing package information"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">9.1.7.4 </span><span class="title-name">Showing package information</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-query-info">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To query single packages, use <code class="command">info</code> with an exact package
    name as an argument. This displays detailed information about a package. In
    case the package name does not match any package name from repositories,
    the command outputs detailed information for non-package matches. If you
    request a specific type (by using the <code class="literal">-t</code> option) and the
    type does not exist, the command outputs other available matches but
    without detailed information.
   </p><p>
    If you specify a source package, the command displays binary packages built
    from the source package. If you specify a binary package, the command
    outputs the source packages used to build the binary package.
   </p><p>
    To also show what is required/recommended by the package, use the options
    <code class="option">--requires</code> and <code class="option">--recommends</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper info --requires MozillaFirefox</pre></div></section></section><section class="sect2" id="sec-zypper-lifecycle" data-id-title="Showing lifecycle information"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.8 </span><span class="title-name">Showing lifecycle information</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-lifecycle">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   SUSE products are generally supported for 10 years. Often, you can extend
   that standard lifecycle by using the extended support offerings of SUSE
   which add three years of support. Depending on your product, find the exact
   support lifecycle at <a class="link" href="https://www.suse.com/lifecycle" target="_blank">https://www.suse.com/lifecycle</a>.
  </p><p>
   To check the lifecycle of your product and the supported package, use the
   <code class="command">zypper lifecycle</code> command as shown below:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">zypper lifecycle</code>
    Product end of support
Codestream: SUSE Linux Enterprise Server 15             2028-07-31
    Product: SUSE Linux Enterprise Server 15 SP3        n/a*

Module end of support
Basesystem Module                                       n/a*
Desktop Applications Module                             n/a*
Server Applications Module                              n/a*

Package end of support if different from product:
autofs                                   Now, installed 5.1.3-7.3.1, update available 5.1.3-7.6.1</pre></div></section><section class="sect2" id="sec-zypper-configure" data-id-title="Configuring Zypper"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.9 </span><span class="title-name">Configuring Zypper</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-configure">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Zypper now comes with a configuration file, allowing you to permanently
   change Zypper's behavior (either system-wide or user-specific). For
   system-wide changes, edit <code class="filename">/etc/zypp/zypper.conf</code>. For
   user-specific changes, edit <code class="filename">~/.zypper.conf</code>. If
   <code class="filename">~/.zypper.conf</code> does not yet exist, you can use
   <code class="filename">/etc/zypp/zypper.conf</code> as a template: copy it to
   <code class="filename">~/.zypper.conf</code> and adjust it to your liking. Refer to
   the comments in the file for help about the available options.
  </p></section><section class="sect2" id="sec-zypper-trouble" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.10 </span><span class="title-name">Troubleshooting</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-trouble">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If you have trouble accessing packages from configured repositories (for
   example, Zypper cannot find a certain package even though you know it exists
   in one of the repositories), refreshing the repositories may help:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper refresh</pre></div><p>
   If that does not help, try
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper refresh -fdb</pre></div><p>
   This forces a complete refresh and rebuild of the database, including a
   forced download of raw metadata.
  </p></section><section class="sect2" id="sec-zypper-rollback" data-id-title="Zypper rollback feature on Btrfs file system"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.11 </span><span class="title-name">Zypper rollback feature on Btrfs file system</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-rollback">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If the Btrfs file system is used on the root partition and
   <code class="command">snapper</code> is installed, Zypper automatically calls
   <code class="command">snapper</code> when committing changes to the file system to
   create appropriate file system snapshots. These snapshots can be used to
   revert any changes made by Zypper. See <a class="xref" href="#cha-snapper" title="Chapter 10. System recovery and snapshot management with Snapper">Chapter 10, <em>System recovery and snapshot management with Snapper</em></a> for
   more information.
  </p></section><section class="sect2" id="sec-zypper-more" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.1.12 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-zypper-more">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zypper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For more information on managing software from the command line, enter
   <code class="command">zypper help</code>, <code class="command">zypper help </code>
   <em class="replaceable">COMMAND</em> or refer to the
   <code class="command">zypper(8)</code> man page. For a complete and detailed command
   reference, <code class="literal">cheat sheets</code> with the most important commands,
   and information on how to use Zypper in scripts and applications, refer to
   <a class="link" href="https://en.opensuse.org/SDB:Zypper_usage" target="_blank">https://en.opensuse.org/SDB:Zypper_usage</a>. A list of
   software changes for the latest <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> version can be found at
   <a class="link" href="https://en.opensuse.org/openSUSE:Zypper_versions" target="_blank">https://en.opensuse.org/openSUSE:Zypper_versions</a>.
  </p></section></section><section class="sect1" id="sec-rpm" data-id-title="RPM—the package manager"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.2 </span><span class="title-name">RPM—the package manager</span></span> <a title="Permalink" class="permalink" href="#sec-rpm">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  RPM (RPM Package Manager) is used for managing software packages. Its main
  commands are <code class="command">rpm</code> and <code class="command">rpmbuild</code>. The
  powerful RPM database can be queried by the users, system administrators and
  package builders for detailed information about the installed software.
 </p><p>
  <code class="command">rpm</code> has five modes: installing, uninstalling
  (or updating) software packages, rebuilding the RPM database, querying RPM
  bases or individual RPM archives, integrity checking of packages and signing
  packages. <code class="command">rpmbuild</code> can be used to build installable
  packages from pristine sources.
 </p><p>
  Installable RPM archives are packed in a special binary format. These
  archives consist of the program files to install and certain meta information
  used during the installation by <code class="command">rpm</code> to configure the
  software package or stored in the RPM database for documentation purposes.
  RPM archives normally have the extension <code class="filename">.rpm</code>.
 </p><div id="id-1.3.3.10.4.6" data-id-title="Software development packages" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Software development packages</div><p>
   For several packages, the components needed for software development
   (libraries, headers, include files, etc.) have been put into separate
   packages. These development packages are only needed if you want to compile
   software yourself (for example, the most recent GNOME packages). They can
   be identified by the name extension <code class="literal">-devel</code>, such as the
   packages <code class="systemitem">alsa-devel</code> and
   <code class="systemitem">gimp-devel</code>.
  </p></div><section class="sect2" id="sec-rpm-package-auth" data-id-title="Verifying package authenticity"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.2.1 </span><span class="title-name">Verifying package authenticity</span></span> <a title="Permalink" class="permalink" href="#sec-rpm-package-auth">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   RPM packages have a GPG signature. To verify the signature of an RPM
   package, use the command <code class="command">rpm --checksig </code>
   <em class="replaceable">PACKAGE</em>-1.2.3.rpm to determine whether the
   package originates from SUSE or from another trustworthy facility. This is
   especially recommended for update packages from the Internet.
  </p><p>
   While fixing issues in the operating system, you might need to install a
   Problem Temporary Fix (PTF) into a production system. The packages provided
   by SUSE are signed against a special PTF key. However, in contrast to
   SUSE Linux Enterprise 11, this key is not imported by default on SUSE Linux Enterprise 12 systems. To
   manually import the key, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> rpm --import \
/usr/share/doc/packages/suse-build-key/suse_ptf_key.asc</pre></div><p>
   After importing the key, you can install PTF packages on your system.
  </p></section><section class="sect2" id="sec-rpm-packages-manage" data-id-title="Managing packages: install, update, and uninstall"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.2.2 </span><span class="title-name">Managing packages: install, update, and uninstall</span></span> <a title="Permalink" class="permalink" href="#sec-rpm-packages-manage">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Normally, the installation of an RPM archive is quite simple: <code class="command">rpm
   -i</code> <em class="replaceable">PACKAGE</em>.rpm. With this command the
   package is installed, but only if its dependencies are fulfilled and if
   there are no conflicts with other packages. With an error message,
   <code class="command">rpm</code> requests those packages that need to be installed to
   meet dependency requirements. In the background, the RPM database ensures
   that no conflicts arise—a specific file can only belong to one
   package. By choosing different options, you can force <code class="command">rpm</code>
   to ignore these defaults, but this is only for experts. Otherwise, you risk
   compromising the integrity of the system and possibly jeopardize the ability
   to update the system.
  </p><p>
   The options <code class="option">-U</code> or <code class="option">--upgrade</code> and
   <code class="option">-F</code> or <code class="option">--freshen</code> can be used to update a
   package (for example, <code class="command">rpm -F</code>
   <em class="replaceable">PACKAGE</em>.rpm). This command removes the files of
   the old version and immediately installs the new files. The difference
   between the two versions is that <code class="option">-U</code> installs packages that
   previously did not exist in the system, while <code class="option">-F</code> merely
   updates previously installed packages. When updating, <code class="command">rpm</code>
   updates configuration files carefully using the following strategy:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     If a configuration file was not changed by the system administrator,
     <code class="command">rpm</code> installs the new version of the appropriate file.
     No action by the system administrator is required.
    </p></li><li class="listitem"><p>
     If a configuration file was changed by the system administrator before the
     update, <code class="command">rpm</code> saves the changed file with the extension
     <code class="filename">.rpmorig</code> or <code class="filename">.rpmsave</code> (backup
     file) and installs the version from the new package. This is done only if
     the originally installed file and the newer version are different. If this is
     the case, compare the backup file (<code class="filename">.rpmorig</code> or
     <code class="filename">.rpmsave</code>) with the newly installed file and make your
     changes again in the new file. Afterward, delete all
     <code class="filename">.rpmorig</code> and <code class="filename">.rpmsave</code> files to
     avoid problems with future updates.
    </p></li><li class="listitem"><p>
     <code class="filename">.rpmnew</code> files appear if the configuration file
     already exists <span class="emphasis"><em>and</em></span> if the <code class="option">noreplace</code>
     label was specified in the <code class="filename">.spec</code> file.
    </p></li></ul></div><p>
   Following an update, <code class="filename">.rpmsave</code> and
   <code class="filename">.rpmnew</code> files should be removed after comparing them,
   so they do not obstruct future updates. The <code class="filename">.rpmorig</code>
   extension is assigned if the file has not previously been recognized by the
   RPM database.
  </p><p>
   Otherwise, <code class="filename">.rpmsave</code> is used. In other words,
   <code class="filename">.rpmorig</code> results from updating from a foreign format to
   RPM. <code class="filename">.rpmsave</code> results from updating from an older RPM
   to a newer RPM. <code class="filename">.rpmnew</code> does not disclose any
   information to whether the system administrator has made any changes to the
   configuration file. A list of these files is available in
   <code class="filename">/var/adm/rpmconfigcheck</code>. Some configuration files (like
   <code class="filename">/etc/httpd/httpd.conf</code>) are not overwritten to allow
   continued operation.
  </p><p>
   The <code class="option">-U</code> switch is <span class="emphasis"><em>not</em></span> only an
   equivalent to uninstalling with the <code class="option">-e</code> option and
   installing with the <code class="option">-i</code> option. Use <code class="option">-U</code>
   whenever possible.
  </p><p>
   To remove a package, enter <code class="command">rpm -e</code>
   <em class="replaceable">PACKAGE</em>. This command only deletes the package if
   there are no unresolved dependencies. It is theoretically impossible to
   delete Tcl/Tk, for example, as long as another application requires it. Even
   in this case, RPM calls for assistance from the database. If such a deletion
   is, for whatever reason, impossible (even if <span class="emphasis"><em>no</em></span>
   additional dependencies exist), it may be helpful to rebuild the RPM
   database using the option <code class="option">--rebuilddb</code>.
  </p></section><section class="sect2" id="sec-rpm-delta" data-id-title="Delta RPM packages"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.2.3 </span><span class="title-name">Delta RPM packages</span></span> <a title="Permalink" class="permalink" href="#sec-rpm-delta">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Delta RPM packages contain the difference between an old and a new version
   of an RPM package. Applying a delta RPM onto an old RPM results in a
   completely new RPM. It is not necessary to have a copy of the old RPM
   because a delta RPM can also work with an installed RPM. The delta RPM
   packages are even smaller in size than patch RPMs, which is an advantage
   when transferring update packages over the Internet. The drawback is that
   update operations with delta RPMs involved consume considerably more CPU
   cycles than plain or patch RPMs.
  </p><p>
   The <code class="command">makedeltarpm</code> and <code class="command">applydelta</code>
   binaries are part of the delta RPM suite (package
   <code class="systemitem">deltarpm</code>) and help you create and apply delta RPM
   packages. With the following commands, you can create a delta RPM called
   <code class="filename">new.delta.rpm</code>. The following command assumes that
   <code class="filename">old.rpm</code> and <code class="filename">new.rpm</code> are present:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> makedeltarpm old.rpm new.rpm new.delta.rpm</pre></div><p>
   Using <code class="command">applydeltarpm</code>, you can reconstruct the new RPM from
   the file system if the old package is already installed:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> applydeltarpm new.delta.rpm new.rpm</pre></div><p>
   To derive it from the old RPM without accessing the file system, use the
   <code class="option">-r</code> option:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> applydeltarpm -r old.rpm new.delta.rpm new.rpm</pre></div><p>
   See <code class="filename">/usr/share/doc/packages/deltarpm/README</code> for
   technical details.
  </p></section><section class="sect2" id="sec-rpm-query" data-id-title="RPM queries"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.2.4 </span><span class="title-name">RPM queries</span></span> <a title="Permalink" class="permalink" href="#sec-rpm-query">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   With the <code class="option">-q</code> option <code class="command">rpm</code> initiates
   queries, making it possible to inspect an RPM archive (by adding the option
   <code class="option">-p</code>) and to query the RPM database of installed packages.
   Several switches are available to specify the type of information required.
   See <a class="xref" href="#tab-rpm-query" title="Essential RPM query options">Table 9.1, “Essential RPM query options”</a>.
  </p><div class="table" id="tab-rpm-query" data-id-title="Essential RPM query options"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 9.1: </span><span class="title-name">Essential RPM query options </span></span><a title="Permalink" class="permalink" href="#tab-rpm-query">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">-i</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Package information
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">-l</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        File list
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">-f FILE</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Query the package that contains the file
        <em class="replaceable">FILE</em> (the full path must be specified with
        <em class="replaceable">FILE</em>)
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">-s</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        File list with status information (implies <code class="option">-l</code>)
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">-d</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        List only documentation files (implies <code class="literal">-l</code>)
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">-c</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        List only configuration files (implies <code class="option">-l</code>)
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">--dump</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        File list with complete details (to be used with <code class="option">-l</code>,
        <code class="option">-c</code>, or <code class="option">-d</code>)
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">--provides</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        List features of the package that another package can request with
        <code class="option">--requires</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">--requires</code>, <code class="option">-R</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Capabilities the package requires
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        <code class="option">--scripts</code>
       </p>
      </td><td>
       <p>
        Installation scripts (preinstall, postinstall, uninstall)
       </p>
      </td></tr></tbody></table></div></div><p>
   For example, the command <code class="command">rpm -q -i wget</code> displays the
   information shown in <a class="xref" href="#aus-update-rpm-i" title="rpm -q -i wget">Example 9.2, “<code class="command">rpm -q -i wget</code>”</a>.
  </p><div class="example" id="aus-update-rpm-i" data-id-title="rpm -q -i wget"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 9.2: </span><span class="title-name"><code class="command">rpm -q -i wget</code> </span></span><a title="Permalink" class="permalink" href="#aus-update-rpm-i">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">Name        : wget
Version     : 1.14
Release     : 17.1
Architecture: x86_64
Install Date: Mon 30 Jan 2017 14:01:29 CET
Group       : Productivity/Networking/Web/Utilities
Size        : 2046483
License     : GPL-3.0+
Signature   : RSA/SHA256, Thu 08 Dec 2016 07:48:44 CET, Key ID 70af9e8139db7c82
Source RPM  : wget-1.14-17.1.src.rpm
Build Date  : Thu 08 Dec 2016 07:48:34 CET
Build Host  : sheep09
Relocations : (not relocatable)
Packager    : https://www.suse.com/
Vendor      : SUSE LLC &lt;https://www.suse.com/&gt;
URL         : http://www.gnu.org/software/wget/
Summary     : A Tool for Mirroring FTP and HTTP Servers
Description :
Wget enables you to retrieve WWW documents or FTP files from a server.
This can be done in script files or via the command line.
Distribution: SUSE Linux Enterprise 15</pre></div></div></div><p>
   The option <code class="option">-f</code> only works if you specify the complete file
   name with its full path. Provide as many file names as desired. For example:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rpm -q -f /bin/rpm /usr/bin/wget
rpm-4.14.1-lp151.13.10.x86_64
wget-1.19.5-lp151.4.1.x86_64</pre></div><p>
   If only part of the file name is known, use a shell script as shown in
   <a class="xref" href="#dat-rpm-search" title="Script to search for packages">Example 9.3, “Script to search for packages”</a>. Pass the partial file name to the script
   shown as a parameter when running it.
  </p><div class="example" id="dat-rpm-search" data-id-title="Script to search for packages"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 9.3: </span><span class="title-name">Script to search for packages </span></span><a title="Permalink" class="permalink" href="#dat-rpm-search">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">#! /bin/sh
for i in $(rpm -q -a -l | grep $1); do
    echo "\"$i\" is in package:"
    rpm -q -f $i
    echo ""
done</pre></div></div></div><p>
   The command <code class="command">rpm -q --changelog</code>
   <em class="replaceable">PACKAGE</em> displays a detailed list of change
   information about a specific package, sorted by date.
  </p><p>
   With the installed RPM database, verification checks can be made. Initiate
   these with <code class="option">-V</code>, or <code class="option">--verify</code>. With this
   option, <code class="command">rpm</code> shows all files in a package that have been
   changed since installation. <code class="command">rpm</code> uses eight character
   symbols to give some hints about the following changes:
  </p><div class="table" id="tab-rpm-verify" data-id-title="RPM verify options"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 9.2: </span><span class="title-name">RPM verify options </span></span><a title="Permalink" class="permalink" href="#tab-rpm-verify">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">5</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        MD5 check sum
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">S</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        File size
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">L</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Symbolic link
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">T</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Modification time
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">D</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Major and minor device numbers
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">U</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Owner
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">G</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Group
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        <code class="option">M</code>
       </p>
      </td><td>
       <p>
        Mode (permissions and file type)
       </p>
      </td></tr></tbody></table></div></div><p>
   In the case of configuration files, the letter <code class="option">c</code> is
   printed. For example, for changes to <code class="filename">/etc/wgetrc</code>
   (<code class="systemitem">wget</code> package):
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rpm -V wget
S.5....T c /etc/wgetrc</pre></div><p>
   The files of the RPM database are placed in
   <code class="filename">/var/lib/rpm</code>. If the partition
   <code class="filename">/usr</code> has a size of 1 GB, this database can occupy
   nearly 30 MB, especially after a complete update. If the database is
   much larger than expected, it is useful to rebuild the database with the
   option <code class="option">--rebuilddb</code>. Before doing this, make a backup of the
   old database. The <code class="command">cron</code> script
   <code class="command">cron.daily</code> makes daily copies of the database (packed
   with gzip) and stores them in <code class="filename">/var/adm/backup/rpmdb</code>.
   The number of copies is controlled by the variable
   <code class="systemitem">MAX_RPMDB_BACKUPS</code> (default: <code class="option">5</code>) in
   <code class="filename">/etc/sysconfig/backup</code>. The size of a single backup is
   approximately 1 MB for 1 GB in <code class="filename">/usr</code>.
  </p></section><section class="sect2" id="sec-rpm-sources" data-id-title="Installing and compiling source packages"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.2.5 </span><span class="title-name">Installing and compiling source packages</span></span> <a title="Permalink" class="permalink" href="#sec-rpm-sources">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   All source packages carry a <code class="filename">.src.rpm</code> extension (source
   RPM).
  </p><div id="id-1.3.3.10.4.11.3" data-id-title="Installed source packages" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Installed source packages</div><p>
    Source packages can be copied from the installation medium to the hard disk
    and unpacked with YaST. They are not, however, marked as installed
    (<code class="literal">[i]</code>) in the package manager. This is because the source
    packages are not entered in the RPM database. Only
    <span class="emphasis"><em>installed</em></span> operating system software is listed in the
    RPM database. When you <span class="quote">“<span class="quote">install</span>”</span> a source package, only the
    source code is added to the system.
   </p></div><p>
   The following directories must be available for <code class="command">rpm</code> and
   <code class="command">rpmbuild</code> in <code class="filename">/usr/src/packages</code>
   (unless you specified custom settings in a file like
   <code class="filename">/etc/rpmrc</code>):
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.10.4.11.5.1"><span class="term"><code class="filename">SOURCES</code>
    </span></dt><dd><p>
      for the original sources (<code class="filename">.tar.bz2</code> or
      <code class="filename">.tar.gz</code> files, etc.) and for distribution-specific
      adjustments (mostly <code class="filename">.diff</code> or
      <code class="filename">.patch</code> files)
     </p></dd><dt id="id-1.3.3.10.4.11.5.2"><span class="term"><code class="filename">SPECS</code>
    </span></dt><dd><p>
      for the <code class="filename">.spec</code> files, similar to a meta Makefile,
      which control the <span class="emphasis"><em>build</em></span> process
     </p></dd><dt id="id-1.3.3.10.4.11.5.3"><span class="term"><code class="filename">BUILD</code>
    </span></dt><dd><p>
      all the sources are unpacked, patched and compiled in this directory
     </p></dd><dt id="id-1.3.3.10.4.11.5.4"><span class="term"><code class="filename">RPMS</code>
    </span></dt><dd><p>
      where the completed binary packages are stored
     </p></dd><dt id="id-1.3.3.10.4.11.5.5"><span class="term"><code class="filename">SRPMS</code>
    </span></dt><dd><p>
      here are the source RPMs
     </p></dd></dl></div><p>
   When you install a source package with YaST, all the necessary components
   are installed in <code class="filename">/usr/src/packages</code>: the sources and the
   adjustments in <code class="filename">SOURCES</code> and the relevant
   <code class="filename">.spec</code> file in <code class="filename">SPECS</code>.
  </p><div id="id-1.3.3.10.4.11.7" data-id-title="System integrity" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: System integrity</div><p>
    Do not experiment with system components
    (<code class="systemitem">glibc</code>,
    <code class="systemitem">rpm</code>, etc.), because this
    endangers the stability of your system.
   </p></div><p>
   The following example uses the <code class="filename">wget.src.rpm</code> package.
   After installing the source package, you should have files similar to those
   in the following list:
  </p><div class="verbatim-wrap"><pre class="screen">/usr/src/packages/SOURCES/wget-1.19.5.tar.bz2
/usr/src/packages/SOURCES/wgetrc.patch
/usr/src/packages/SPECS/wget.spec</pre></div><p>
   <code class="command">rpmbuild</code> <code class="option">-b<em class="replaceable">X</em></code>
   <code class="filename">/usr/src/packages/SPECS/wget.spec</code> starts the
   compilation. <em class="replaceable">X</em> is a wild card for various stages
   of the build process (see the output of <code class="option">--help</code> or the RPM
   documentation for details). The following is merely a brief explanation:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.10.4.11.11.1"><span class="term"><code class="option">-bp</code>
    </span></dt><dd><p>
      Prepare sources in <code class="filename">/usr/src/packages/BUILD</code>: unpack
      and patch.
     </p></dd><dt id="id-1.3.3.10.4.11.11.2"><span class="term"><code class="option">-bc</code>
    </span></dt><dd><p>
      Do the same as <code class="option">-bp</code>, but with additional compilation.
     </p></dd><dt id="id-1.3.3.10.4.11.11.3"><span class="term"><code class="option">-bi</code>
    </span></dt><dd><p>
      Do the same as <code class="option">-bp</code>, but with additional installation of
      the built software. Caution: if the package does not support the
      BuildRoot feature, you might overwrite configuration files.
     </p></dd><dt id="id-1.3.3.10.4.11.11.4"><span class="term"><code class="option">-bb</code>
    </span></dt><dd><p>
      Do the same as <code class="option">-bi</code>, but with the additional creation of
      the binary package. If the compile was successful, the binary should be
      in <code class="filename">/usr/src/packages/RPMS</code>.
     </p></dd><dt id="id-1.3.3.10.4.11.11.5"><span class="term"><code class="option">-ba</code>
    </span></dt><dd><p>
      Do the same as <code class="option">-bb</code>, but with the additional creation of
      the source RPM. If the compilation was successful, the binary should be
      in <code class="filename">/usr/src/packages/SRPMS</code>.
     </p></dd><dt id="id-1.3.3.10.4.11.11.6"><span class="term"><code class="option">--short-circuit</code>
    </span></dt><dd><p>
      Skip some steps.
     </p></dd></dl></div><p>
   The binary RPM created can now be installed with <code class="command">rpm</code>
   <code class="option">-i</code> or, preferably, with <code class="command">rpm</code>
   <code class="option">-U</code>. Installation with <code class="command">rpm</code> makes it
   appear in the RPM database.
  </p><p>
   Keep in mind that the <code class="literal">BuildRoot</code> directive in the spec
   file is deprecated. If you still need this feature, use the
   <code class="option">--buildroot</code> option as a workaround.
  </p></section><section class="sect2" id="sec-rpm-build" data-id-title="Compiling RPM packages with build"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.2.6 </span><span class="title-name">Compiling RPM packages with build</span></span> <a title="Permalink" class="permalink" href="#sec-rpm-build">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The danger with many packages is that unwanted files are added to the
   running system during the build process. To prevent this use
   <code class="systemitem">build</code>, which creates a defined environment in which
   the package is built. To establish this chroot environment, the
   <code class="command">build</code> script must be provided with a complete package
   tree. This tree can be made available on the hard disk, via NFS, or from
   DVD. Set the position with <code class="command">build --rpms</code>
   <em class="replaceable">DIRECTORY</em>. Unlike <code class="command">rpm</code>, the
   <code class="command">build</code> command looks for the <code class="filename">.spec</code>
   file in the source directory. To build <code class="filename">wget</code> (like in
   the above example) with the DVD mounted in the system under
   <code class="filename">/media/dvd</code>, use the following commands as
   <code class="systemitem">root</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cd /usr/src/packages/SOURCES/
<code class="prompt root"># </code>mv ../SPECS/wget.spec .
<code class="prompt root"># </code>build --rpms /media/dvd/suse/ wget.spec</pre></div><p>
   Subsequently, a minimum environment is established at
   <code class="filename">/var/tmp/build-root</code>. The package is built in this
   environment. Upon completion, the resulting packages are located in
   <code class="filename">/var/tmp/build-root/usr/src/packages/RPMS</code>.
  </p><p>
   The <code class="command">build</code> script offers several additional options. For
   example, cause the script to prefer your own RPMs, omit the initialization
   of the build environment or limit the <code class="command">rpm</code> command to one
   of the above-mentioned stages. Access additional information with
   <code class="command">build</code> <code class="option">--help</code> and by reading the
   <code class="command">build</code> man page.
  </p></section><section class="sect2" id="sec-rpm-tools" data-id-title="Tools for RPM archives and the RPM database"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">9.2.7 </span><span class="title-name">Tools for RPM archives and the RPM database</span></span> <a title="Permalink" class="permalink" href="#sec-rpm-tools">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/rpm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Midnight Commander (<code class="command">mc</code>) can display the contents of RPM
   archives and copy parts of them. It represents archives as virtual file
   systems, offering all usual menu options of Midnight Commander. Display the
   <code class="filename">HEADER</code> with <span class="keycap">F3</span>. View the archive
   structure with the cursor keys and <span class="keycap">Enter</span>. Copy archive
   components with <span class="keycap">F5</span>.
  </p><p>
   A full-featured package manager is available as a YaST module. For
   details, see <a class="xref" href="#cha-yast-software" title="Chapter 8. Installing or removing software">Chapter 8, <em>Installing or removing software</em></a>.
  </p></section></section></section><section class="chapter" id="cha-snapper" data-id-title="System recovery and snapshot management with Snapper"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">10 </span><span class="title-name">System recovery and snapshot management with Snapper</span></span> <a title="Permalink" class="permalink" href="#cha-snapper">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Snapper allows creating and managing file system snapshots.
    File system snapshots allow keeping a copy of the state of a file system
    at a certain point of time.
    The standard setup of Snapper is designed to allow rolling back system
    changes.
    However, you can also use it to create on-disk backups of user data.
    As the basis for this functionality, Snapper uses the Btrfs file system or
    thinly provisioned LVM volumes with an XFS or Ext4 file system.
   </p></div></div></div></div><p>
  Snapper has a command line interface and a YaST interface.
  Snapper lets you create and manage file system snapshots on the following
  types of file systems:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Btrfs, a copy-on-write file system for Linux that natively supports
    file system snapshots of subvolumes.
    (Subvolumes are separately mountable file systems within a physical
    partition.)
   </p><p>
    You can also boot from <code class="literal">Btrfs</code> snapshots. For more
    information, see <a class="xref" href="#sec-snapper-snapshot-boot" title="10.3. System rollback by booting from snapshots">Section 10.3, “System rollback by booting from snapshots”</a>.
   </p></li><li class="listitem"><p>
    Thinly provisioned LVM volumes formatted with XFS or Ext4.
   </p></li></ul></div><p>
  Using Snapper, you can perform the following tasks:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Undo system changes made by <code class="command">zypper</code> and YaST. See
    <a class="xref" href="#sec-snapper-undo" title="10.2. Using Snapper to undo changes">Section 10.2, “Using Snapper to undo changes”</a> for details.
   </p></li><li class="listitem"><p>
    Restore files from previous snapshots. See
    <a class="xref" href="#sec-snapper-undo-delete-file" title="10.2.2. Using Snapper to restore files">Section 10.2.2, “Using Snapper to restore files”</a> for details.
   </p></li><li class="listitem"><p>
    Do a system rollback by booting from a snapshot. See
    <a class="xref" href="#sec-snapper-snapshot-boot" title="10.3. System rollback by booting from snapshots">Section 10.3, “System rollback by booting from snapshots”</a> for details.
   </p></li><li class="listitem"><p>
    Manually create and manage snapshots, within the running system. See
    <a class="xref" href="#sec-snapper-manage" title="10.6. Manually creating and managing snapshots">Section 10.6, “Manually creating and managing snapshots”</a> for details.
   </p></li></ul></div><section class="sect1" id="sec-snapper-setup" data-id-title="Default setup"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.1 </span><span class="title-name">Default setup</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-setup">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Snapper on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is set up as an undo and recovery
   tool for system changes. By default, the root partition
   (<code class="filename">/</code>) of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is formatted with
   <code class="literal">Btrfs</code>. Taking snapshots is automatically enabled if the
   root partition (<code class="filename">/</code>) is big enough (more
   than approximately 16 GB). By default, snapshots are disabled on partitions
   other than <code class="filename">/</code>.
  </p><div id="id-1.3.3.11.7.3" data-id-title="Enabling Snapper in the installed system" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Enabling Snapper in the installed system</div><p>
    If you disabled Snapper during the installation, you can enable it at
    any time later. To do so, create a default Snapper configuration for the
    root file system by running:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c root create-config /</pre></div><p>
    Afterward enable the different snapshot types as described in <a class="xref" href="#sec-snapper-setup-customize-auto-snapshots" title="10.1.4.1. Disabling/enabling snapshots">Section 10.1.4.1, “Disabling/enabling snapshots”</a>.
   </p><p>
    On a Btrfs root file system, snapshots require a file system with subvolumes
    configured as proposed by the installer and a partition size of at least 16 GB.
   </p></div><p>
   When a snapshot is created, both the snapshot and the original point to the
   same blocks in the file system. So, initially a snapshot does not occupy
   additional disk space. If data in the original file system is modified,
   changed data blocks are copied while the old data blocks are kept for the
   snapshot. Therefore, a snapshot occupies the same amount of space as the
   data modified. So, over time, the amount of space a snapshot allocates,
   constantly grows. As a consequence, deleting files from a
   <code class="literal">Btrfs</code> file system containing snapshots may
   <span class="emphasis"><em>not</em></span> free disk space.
  </p><div id="id-1.3.3.11.7.5" data-id-title="Snapshot location" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Snapshot location</div><p>
    Snapshots always reside on the same partition or subvolume on which the
    snapshot has been taken. It is not possible to store snapshots on a
    different partition or subvolume.
   </p></div><p>
   As a result, partitions containing snapshots need to be larger than
   partitions not containing snapshots. The exact amount depends strongly on the
   number of snapshots you keep and the amount of data modifications. As a rule
   of thumb, give partitions twice as much space as you normally would.
   To prevent disks from running out of space, old snapshots are automatically
   cleaned up. Refer to
   <a class="xref" href="#sec-snapper-setup-customize-archiving" title="10.1.4.4. Controlling snapshot archiving">Section 10.1.4.4, “Controlling snapshot archiving”</a> for details.
  </p><section class="sect2" id="snapper-default-settings" data-id-title="Default settings"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.1.1 </span><span class="title-name">Default settings</span></span> <a title="Permalink" class="permalink" href="#snapper-default-settings">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.7.7.2.1"><span class="term">Disks larger than 16 GB</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Configuration file: <code class="filename">/etc/snapper/configs/root</code></p></li><li class="listitem"><p><code class="literal">USE_SNAPPER=yes</code></p></li><li class="listitem"><p><code class="literal">TIMELINE_CREATE=no</code></p></li></ul></div></dd><dt id="id-1.3.3.11.7.7.2.2"><span class="term">Disks smaller than 16 GB</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Configuration file: not created</p></li><li class="listitem"><p><code class="literal">USE_SNAPPER=no</code></p></li><li class="listitem"><p><code class="literal">TIMELINE_CREATE=yes</code></p></li></ul></div></dd></dl></div></section><section class="sect2" id="snapper-snapshot-type" data-id-title="Types of snapshots"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.1.2 </span><span class="title-name">Types of snapshots</span></span> <a title="Permalink" class="permalink" href="#snapper-snapshot-type">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Although snapshots themselves do not differ in a technical sense, we
    distinguish between three types of snapshots, based on the events that trigger them:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.7.8.3.1"><span class="term">Timeline snapshots</span></dt><dd><p>
        A single snapshot is created every hour. Using the YaST OS
        installation method (default), timeline snapshots are enabled, except
        for the root file system. You can configure timeline snapshots to be
        taken at different intervals: hourly, daily, weekly, monthly and yearly.
        Old snapshots are automatically deleted. By default, the first snapshot
        of the last ten days, months and years is kept.
      </p></dd><dt id="id-1.3.3.11.7.8.3.2"><span class="term">Installation snapshots</span></dt><dd><p>
        Whenever one or more packages are installed with Zypper or YaST,
        three installation snapshots are created. In case an important system
        component such as the kernel has been installed, the snapshot pair is
        marked as important. Old snapshots are automatically deleted.
        Installation snapshots are enabled by default.
      </p></dd><dt id="id-1.3.3.11.7.8.3.3"><span class="term">Administration snapshots</span></dt><dd><p>
         Whenever you make changes to the system using Zypper or YaST, a
         pair of snapshots is created: one prior to the system change
         (<span class="quote">“<span class="quote">pre</span>”</span>) and the other one after the system change
         (<span class="quote">“<span class="quote">post</span>”</span>). Old snapshots are automatically deleted.
         Administration snapshots are enabled by default.
       </p></dd></dl></div></section><section class="sect2" id="snapper-dir-excludes" data-id-title="Directories that are excluded from snapshots"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.1.3 </span><span class="title-name">Directories that are excluded from snapshots</span></span> <a title="Permalink" class="permalink" href="#snapper-dir-excludes">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Certain directories need to be excluded from snapshots for different reasons.
    The following list shows all directories that are excluded:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.7.9.3.2"><span class="term"><code class="filename">/boot/grub2/i386-pc</code>,
   <code class="filename">/boot/grub2/x86_64-efi</code>,
   <code class="filename">/boot/grub2/powerpc-ieee1275</code>,
   <code class="filename">/boot/grub2/s390x-emu</code>
  </span></dt><dd><p>
    A rollback of the boot loader configuration is not supported. The
    directories listed above are architecture-specific. The first two
    directories are present on AMD64/Intel 64 machines, the latter two on IBM
    POWER and on IBM Z, respectively.
   </p></dd><dt id="id-1.3.3.11.7.9.3.3"><span class="term"><code class="filename">/home</code>
  </span></dt><dd><p>
    If <code class="filename">/home</code> does not reside on a separate partition, it
    is excluded to avoid data loss on rollbacks.
   </p></dd><dt id="id-1.3.3.11.7.9.3.4"><span class="term"><code class="filename">/opt</code>
  </span></dt><dd><p>
    Third-party products usually get installed to <code class="filename">/opt</code>. It
    is excluded to avoid uninstalling these applications on rollbacks.
   </p></dd><dt id="id-1.3.3.11.7.9.3.5"><span class="term"><code class="filename">/srv</code>
  </span></dt><dd><p>
    Contains data for Web and FTP servers. It is excluded to avoid data loss on
    rollbacks.
   </p></dd><dt id="id-1.3.3.11.7.9.3.6"><span class="term"><code class="filename">/tmp</code>
  </span></dt><dd><p>
    All directories containing temporary files and caches are excluded from
    snapshots.
   </p></dd><dt id="id-1.3.3.11.7.9.3.7"><span class="term"><code class="filename">/usr/local</code>
  </span></dt><dd><p>
    This directory is used when manually installing software. It is excluded to
    avoid uninstalling these installations on rollbacks.
   </p></dd><dt id="id-1.3.3.11.7.9.3.8"><span class="term"><code class="filename">/var</code>
  </span></dt><dd><p>
    This directory contains many variable files, including logs, temporary
    caches, third party products in <code class="filename">/var/opt</code>, and is the
    default location for virtual machine images and databases. Therefore this
    subvolume is created to exclude all of this variable data from snapshots
    and has Copy-On-Write disabled.
   </p></dd></dl></div></section><section class="sect2" id="sec-snapper-setup-customize" data-id-title="Customizing the setup"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.1.4 </span><span class="title-name">Customizing the setup</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-setup-customize">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> comes with a reasonable default setup, which should be
    sufficient for most use cases. However, all aspects of taking automatic
    snapshots and snapshot keeping can be configured according to your needs.
   </p><section class="sect3" id="sec-snapper-setup-customize-auto-snapshots" data-id-title="Disabling/enabling snapshots"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.1.4.1 </span><span class="title-name">Disabling/enabling snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-setup-customize-auto-snapshots">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Each of the three snapshot types (timeline, installation, administration)
     can be enabled or disabled independently.
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.7.10.3.3.1"><span class="term">Disabling/enabling timeline snapshots</span></dt><dd><p><span class="formalpara-title">Enabling. </span>
         <code class="command">snapper -c root set-config "TIMELINE_CREATE=yes"</code>
        </p><p><span class="formalpara-title">Disabling. </span>
         <code class="command">snapper -c root set-config "TIMELINE_CREATE=no"</code>
        </p><p>
        Using the YaST OS installation method (default), timeline snapshots
        are enabled, except for the root file system.
       </p></dd><dt id="id-1.3.3.11.7.10.3.3.2"><span class="term">Disabling/enabling installation snapshots</span></dt><dd><p><span class="formalpara-title">Enabling:</span>
         Install the package
         <code class="systemitem">snapper-zypp-plugin</code>
        </p><p><span class="formalpara-title">Disabling:</span>
         Uninstall the package
         <code class="systemitem">snapper-zypp-plugin</code>
        </p><p>
        Installation snapshots are enabled by default.
       </p></dd><dt id="id-1.3.3.11.7.10.3.3.3"><span class="term">Disabling/enabling administration snapshots</span></dt><dd><p><span class="formalpara-title">Enabling:</span>
         Set <code class="envar">USE_SNAPPER</code> to <code class="literal">yes</code> in
         <code class="filename">/etc/sysconfig/yast2</code>.
        </p><p><span class="formalpara-title">Disabling:</span>
         Set <code class="envar">USE_SNAPPER</code> to <code class="literal">no</code> in
         <code class="filename">/etc/sysconfig/yast2</code>.
        </p><p>
        Administration snapshots are enabled by default.
       </p></dd></dl></div></section><section class="sect3" id="sec-snapper-setup-customize-inst-snapshots" data-id-title="Controlling installation snapshots"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.1.4.2 </span><span class="title-name">Controlling installation snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-setup-customize-inst-snapshots">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Taking snapshot pairs upon installing packages with YaST or Zypper is
     handled by the
     <code class="systemitem">snapper-zypp-plugin</code>. An XML
     configuration file, <code class="filename">/etc/snapper/zypp-plugin.conf</code>
     defines, when to make snapshots. By default the file looks like the
     following:
    </p><div class="verbatim-wrap"><pre class="screen"> 1 &lt;?xml version="1.0" encoding="utf-8"?&gt;
 2 &lt;snapper-zypp-plugin-conf&gt;
 3  &lt;solvables&gt;
 4   &lt;solvable match="w"<span class="callout" id="zypp-conf-match">1</span> important="true"<span class="callout" id="zypp-conf-important">2</span>&gt;kernel-*<span class="callout" id="zypp-conf-kernel">3</span>&lt;/solvable&gt;
 5   &lt;solvable match="w" important="true"&gt;dracut&lt;/solvable&gt;
 6   &lt;solvable match="w" important="true"&gt;glibc&lt;/solvable&gt;
 7   &lt;solvable match="w" important="true"&gt;systemd*&lt;/solvable&gt;
 8   &lt;solvable match="w" important="true"&gt;udev&lt;/solvable&gt;
 9   &lt;solvable match="w"&gt;*&lt;/solvable&gt;<span class="callout" id="zypp-conf-packages">4</span>
10  &lt;/solvables&gt;
11 &lt;/snapper-zypp-plugin-conf&gt;</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#zypp-conf-match"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       The match attribute defines whether the pattern is a Unix shell-style
       wild card (<code class="literal">w</code>) or a Python regular expression
       (<code class="literal">re</code>).
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#zypp-conf-important"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       If the given pattern matches and the corresponding package is marked as
       important (for example, kernel packages), the snapshot is also
       marked as important.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#zypp-conf-kernel"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Pattern to match a package name. Based on the setting of the
       <code class="literal">match</code> attribute, special characters are either
       interpreted as shell wild cards or regular expressions. This pattern
       matches all package names starting with <code class="literal">kernel-</code>.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#zypp-conf-packages"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       This line unconditionally matches all packages.
      </p></td></tr></table></div><p>
     With this configuration snapshot, pairs are made whenever a package is
     installed (line 9). When the kernel, dracut, glibc, systemd or udev
     packages marked as important are installed, the snapshot pair is also
     marked as important (lines 4 to 8). All rules are evaluated.
    </p><p>
     To disable a rule, either delete it or deactivate it using XML comments.
     To prevent the system from making snapshot pairs for every package
     installation for example, comment line 9:
    </p><div class="verbatim-wrap"><pre class="screen"> 1 &lt;?xml version="1.0" encoding="utf-8"?&gt;
 2 &lt;snapper-zypp-plugin-conf&gt;
 3  &lt;solvables&gt;
 4   &lt;solvable match="w" important="true"&gt;kernel-*&lt;/solvable&gt;
 5   &lt;solvable match="w" important="true"&gt;dracut&lt;/solvable&gt;
 6   &lt;solvable match="w" important="true"&gt;glibc&lt;/solvable&gt;
 7   &lt;solvable match="w" important="true"&gt;systemd*&lt;/solvable&gt;
 8   &lt;solvable match="w" important="true"&gt;udev&lt;/solvable&gt;
 9   &lt;!-- &lt;solvable match="w"&gt;*&lt;/solvable&gt; --&gt;
10  &lt;/solvables&gt;
11 &lt;/snapper-zypp-plugin-conf&gt;</pre></div></section><section class="sect3" id="sec-snapper-setup-customizing-new-subvolume" data-id-title="Creating and mounting new subvolumes"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.1.4.3 </span><span class="title-name">Creating and mounting new subvolumes</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-setup-customizing-new-subvolume">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Creating a new subvolume underneath the <code class="filename">/</code> hierarchy
     and permanently mounting it is supported. Such a subvolume is excluded from
     snapshots. You need to make sure not to create it inside an existing
     snapshot, since you would not be able to delete snapshots anymore after a
     rollback.
    </p><p>
     <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is configured with the <code class="filename">/@/</code> subvolume
     which serves as an independent root for permanent subvolumes such as
     <code class="filename">/opt</code>, <code class="filename">/srv</code>,
     <code class="filename">/home</code> and others. Any new subvolumes you create and
     permanently mount need to be created in this initial root file system.
    </p><p>
     To do so, run the following commands. In this example, a new subvolume
     <code class="filename">/usr/important</code> is created from
     <code class="filename">/dev/sda2</code>.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> mount /dev/sda2 -o subvol=@ /mnt
<code class="prompt user">&gt; </code><code class="command">sudo</code> btrfs subvolume create /mnt/usr/important
<code class="prompt user">&gt; </code><code class="command">sudo</code> umount /mnt</pre></div><p>
     The corresponding entry in <code class="filename">/etc/fstab</code> needs to look
     like the following:
    </p><div class="verbatim-wrap"><pre class="screen">/dev/sda2 /usr/important btrfs subvol=@/usr/important 0 0</pre></div><div id="id-1.3.3.11.7.10.5.8" data-id-title="Disable copy-on-write (cow)" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Disable copy-on-write (cow)</div><p>
      A subvolume may contain files that constantly change, such as
      virtualized disk images, database files, or log files. If so, consider
      disabling the copy-on-write feature for this volume, to avoid duplication
      of disk blocks. Use the <code class="option">nodatacow</code> mount option in
      <code class="filename">/etc/fstab</code> to do so:
     </p><div class="verbatim-wrap"><pre class="screen">/dev/sda2 /usr/important btrfs nodatacow,subvol=@/usr/important 0 0</pre></div><p>
      To alternatively disable copy-on-write for single files or directories,
      use the command <code class="command">chattr +C
      <em class="replaceable">PATH</em></code>.
     </p></div></section><section class="sect3" id="sec-snapper-setup-customize-archiving" data-id-title="Controlling snapshot archiving"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.1.4.4 </span><span class="title-name">Controlling snapshot archiving</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-setup-customize-archiving">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Snapshots occupy disk space. To prevent disks from running out of space and
     thus causing system outages, old snapshots are automatically deleted. By
     default, up to ten important installation and administration snapshots and
     up to ten regular installation and administration snapshots are kept. If
     these snapshots occupy more than 50% of the root file system size,
     additional snapshots are deleted. A minimum of four important and two
     regular snapshots are always kept.
    </p><p>
     Refer to <a class="xref" href="#sec-snapper-config-modify" title="10.5.1. Managing existing configurations">Section 10.5.1, “Managing existing configurations”</a> for instructions on
     how to change these values.
    </p></section><section class="sect3" id="sec-snapper-lvm" data-id-title="Using Snapper on thinly provisioned LVM volumes"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.1.4.5 </span><span class="title-name">Using Snapper on thinly provisioned LVM volumes</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-lvm">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Apart from snapshots on <code class="literal">Btrfs</code> file systems, Snapper
     also supports taking snapshots on thinly provisioned LVM volumes (snapshots
     on regular LVM volumes are <span class="emphasis"><em>not</em></span> supported) formatted
     with XFS, Ext4 or Ext3. For more information and setup instructions on LVM
     volumes, refer to <span class="intraxref">Book “Deployment Guide”, Chapter 11 “<span class="guimenu">Expert Partitioner</span>”, Section 11.3 “LVM configuration”</span>.
    </p><p>
     To use Snapper on a thinly provisioned LVM volume, you need to create a
     Snapper configuration for it. On LVM it is required to specify the file
     system with
     <code class="option">--fstype=lvm(<em class="replaceable">FILESYSTEM</em>)</code>.
     <code class="literal">ext3</code>, <code class="literal">etx4</code> or <code class="literal">xfs</code>
     are valid values for <em class="replaceable">FILESYSTEM</em>. Example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c lvm create-config --fstype="lvm(xfs)" /thin_lvm</pre></div><p>
     You can adjust this configuration according to your needs as described in
     <a class="xref" href="#sec-snapper-config-modify" title="10.5.1. Managing existing configurations">Section 10.5.1, “Managing existing configurations”</a>.
    </p></section></section></section><section class="sect1" id="sec-snapper-undo" data-id-title="Using Snapper to undo changes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.2 </span><span class="title-name">Using Snapper to undo changes</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-undo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Snapper on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is preconfigured to serve as a tool that lets you
   undo changes made by <code class="command">zypper</code> and YaST. For this purpose,
   Snapper is configured to create a pair of snapshots before and after each
   run of <code class="command">zypper</code> and YaST. Snapper also lets you restore
   system files that have been accidentally deleted or modified. Timeline
   snapshots for the root partition need to be enabled for this
   purpose—see
   <a class="xref" href="#sec-snapper-setup-customize-auto-snapshots" title="10.1.4.1. Disabling/enabling snapshots">Section 10.1.4.1, “Disabling/enabling snapshots”</a> for details.
  </p><p>
   By default, automatic snapshots as described above are configured for the
   root partition and its subvolumes. To make snapshots available for other
   partitions such as <code class="filename">/home</code> for example, you can create
   custom configurations.
  </p><div id="id-1.3.3.11.8.4" data-id-title="Undoing changes compared to rollback" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Undoing changes compared to rollback</div><p>
    When working with snapshots to restore data, it is important to know that
    there are two fundamentally different scenarios Snapper can handle:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.8.4.3.1"><span class="term">Undoing changes</span></dt><dd><p>
       When undoing changes as described in the following, two snapshots are
       being compared and the changes between these two snapshots are made
       undone. Using this method also allows to explicitly select the files
       that should be restored.
      </p></dd><dt id="id-1.3.3.11.8.4.3.2"><span class="term">Rollback</span></dt><dd><p>
       When doing rollbacks as described in
       <a class="xref" href="#sec-snapper-snapshot-boot" title="10.3. System rollback by booting from snapshots">Section 10.3, “System rollback by booting from snapshots”</a>, the system is reset to the
       state at which the snapshot was taken.
      </p></dd></dl></div><p>
    When undoing changes, it is also possible to compare a snapshot against the
    current system. When restoring <span class="emphasis"><em>all</em></span> files from such a
    comparison, this will have the same result as doing a rollback. However,
    using the method described in <a class="xref" href="#sec-snapper-snapshot-boot" title="10.3. System rollback by booting from snapshots">Section 10.3, “System rollback by booting from snapshots”</a>
    for rollbacks should be preferred, since it is faster and allows you to
    review the system before doing the rollback.
   </p></div><div id="id-1.3.3.11.8.5" data-id-title="Data consistency" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Data consistency</div><p>
    There is no mechanism to ensure data consistency when creating a snapshot.
    Whenever a file (for example, a database) is written at the same time as the
    snapshot is being created, it will result in a corrupted or partly written
    file. Restoring such a file will cause problems. Furthermore, certain system
    files such as <code class="filename">/etc/mtab</code> must never be restored.
    Therefore it is strongly recommended to <span class="emphasis"><em>always</em></span> closely
    review the list of changed files and their diffs. Only restore files that
    really belong to the action you want to revert.
   </p></div><section class="sect2" id="sec-snapper-undo-yast" data-id-title="Undoing YaST and Zypper changes"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.2.1 </span><span class="title-name">Undoing YaST and Zypper changes</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-undo-yast">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you set up the root partition with <code class="literal">Btrfs</code> during the
    installation, Snapper—preconfigured for doing rollbacks of YaST or
    Zypper changes—will automatically be installed. Every time you start
    a YaST module or a Zypper transaction, two snapshots are created: a
    <span class="quote">“<span class="quote">pre-snapshot</span>”</span> capturing the state of the file system before
    the start of the module and a <span class="quote">“<span class="quote">post-snapshot</span>”</span> after the module
    has been finished.
   </p><p>
    Using the YaST Snapper module or the <code class="command">snapper</code> command
    line tool, you can undo the changes made by YaST/Zypper by restoring
    files from the <span class="quote">“<span class="quote">pre-snapshot</span>”</span>. Comparing two snapshots the
    tools also allow you to see which files have been changed. You can also
    display the differences between two versions of a file (diff).
   </p><div class="procedure" id="proc-snapper-undo-yast" data-id-title="Undoing changes using the YaST Snapper module"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 10.1: </span><span class="title-name">Undoing changes using the YaST <span class="guimenu">Snapper</span> module </span></span><a title="Permalink" class="permalink" href="#proc-snapper-undo-yast">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start the <span class="guimenu">Snapper</span> module from the
      <span class="guimenu">Miscellaneous</span> section in YaST or by entering
      <code class="command">yast2 snapper</code>.
     </p></li><li class="step"><p>
      Make sure <span class="guimenu">Current Configuration</span> is set to
      <span class="guimenu">root</span>. This is always the case unless you have manually
      added own Snapper configurations.
     </p></li><li class="step"><p>
      Choose a pair of pre- and post-snapshots from the list. Both, YaST and
      Zypper snapshot pairs are of the type <span class="guimenu">Pre &amp; Post</span>.
      YaST snapshots are labeled as <code class="literal">zypp(y2base)</code> in the
      <span class="guimenu">Description column</span>; Zypper snapshots are labeled
      <code class="literal">zypp(zypper)</code>.
     </p><div class="informalfigure"><div class="mediaobject"><a href="images/snapper_yast2_list.png"><img src="images/snapper_yast2_list.png" width="75%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
      Click <span class="guimenu">Show Changes</span> to open the list of files that
      differ between the two snapshots.
     </p><div class="informalfigure"><div class="mediaobject"><a href="images/snapper_yast2_changes.png"><img src="images/snapper_yast2_changes.png" width="75%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
      Review the list of files. To display a <span class="quote">“<span class="quote">diff</span>”</span> between the
      pre- and post-version of a file, select it from the list.
     </p><div class="informalfigure"><div class="mediaobject"><a href="images/snapper_yast2_diff.png"><img src="images/snapper_yast2_diff.png" width="75%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
      To restore one or more files, select the relevant files or directories by
      activating the respective check box. Click <span class="guimenu">Restore
      Selected</span> and confirm the action by clicking
      <span class="guimenu">Yes</span>.
     </p><div class="informalfigure"><div class="mediaobject"><a href="images/snapper_yast2_restore.png"><img src="images/snapper_yast2_restore.png" width="75%" alt="Image" title="Image"/></a></div></div><p>
      To restore a single file, activate its diff view by clicking its name.
      Click <span class="guimenu">Restore From First</span> and confirm your choice with
      <span class="guimenu">Yes</span>.
     </p></li></ol></div></div><div class="procedure" id="proc-snapper-yast-cmdline" data-id-title="Undoing changes using the snapper command"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 10.2: </span><span class="title-name">Undoing changes using the <code class="command">snapper</code> command </span></span><a title="Permalink" class="permalink" href="#proc-snapper-yast-cmdline">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Get a list of YaST and Zypper snapshots by running <code class="command">snapper
      list -t pre-post</code>. YaST snapshots are labeled
      as <code class="literal">yast <em class="replaceable">MODULE_NAME</em></code> in the
      <span class="guimenu">Description column</span>; Zypper snapshots are labeled
      <code class="literal">zypp(zypper)</code>.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper list -t pre-post
Pre # | Post # | Pre Date                      | Post Date                     | Description
------+--------+-------------------------------+-------------------------------+--------------
311   | 312    | Tue 06 May 2018 14:05:46 CEST | Tue 06 May 2018 14:05:52 CEST | zypp(y2base)
340   | 341    | Wed 07 May 2018 16:15:10 CEST | Wed 07 May 2018 16:15:16 CEST | zypp(zypper)
342   | 343    | Wed 07 May 2018 16:20:38 CEST | Wed 07 May 2018 16:20:42 CEST | zypp(y2base)
344   | 345    | Wed 07 May 2018 16:21:23 CEST | Wed 07 May 2018 16:21:24 CEST | zypp(zypper)
346   | 347    | Wed 07 May 2018 16:41:06 CEST | Wed 07 May 2018 16:41:10 CEST | zypp(y2base)
348   | 349    | Wed 07 May 2018 16:44:50 CEST | Wed 07 May 2018 16:44:53 CEST | zypp(y2base)
350   | 351    | Wed 07 May 2018 16:46:27 CEST | Wed 07 May 2018 16:46:38 CEST | zypp(y2base)</pre></div></li><li class="step"><p>
      Get a list of changed files for a snapshot pair with <code class="command">snapper
      status</code>
      <em class="replaceable">PRE</em>..<em class="replaceable">POST</em>. Files
      with content changes are marked with <span class="guimenu">c</span>, files that
      have been added are marked with <span class="guimenu">+</span> and deleted files
      are marked with <span class="guimenu">-</span>.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper status 350..351
+..... /usr/share/doc/packages/mikachan-fonts
+..... /usr/share/doc/packages/mikachan-fonts/COPYING
+..... /usr/share/doc/packages/mikachan-fonts/dl.html
c..... /usr/share/fonts/truetype/fonts.dir
c..... /usr/share/fonts/truetype/fonts.scale
+..... /usr/share/fonts/truetype/みかちゃん-p.ttf
+..... /usr/share/fonts/truetype/みかちゃん-pb.ttf
+..... /usr/share/fonts/truetype/みかちゃん-ps.ttf
+..... /usr/share/fonts/truetype/みかちゃん.ttf
c..... /var/cache/fontconfig/7ef2298fde41cc6eeb7af42e48b7d293-x86_64.cache-4
c..... /var/lib/rpm/Basenames
c..... /var/lib/rpm/Dirnames
c..... /var/lib/rpm/Group
c..... /var/lib/rpm/Installtid
c..... /var/lib/rpm/Name
c..... /var/lib/rpm/Packages
c..... /var/lib/rpm/Providename
c..... /var/lib/rpm/Requirename
c..... /var/lib/rpm/Sha1header
c..... /var/lib/rpm/Sigmd5</pre></div></li><li class="step"><p>
      To display the diff for a certain file, run <code class="command">snapper
      diff</code>
      <em class="replaceable">PRE</em>..<em class="replaceable">POST</em>
      <em class="replaceable">FILENAME</em>. If you do not specify
      <em class="replaceable">FILENAME</em>, a diff for all files will be
      displayed.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper diff 350..351 /usr/share/fonts/truetype/fonts.scale
--- /.snapshots/350/snapshot/usr/share/fonts/truetype/fonts.scale       2014-04-23 15:58:57.000000000 +0200
+++ /.snapshots/351/snapshot/usr/share/fonts/truetype/fonts.scale       2014-05-07 16:46:31.000000000 +0200
@@ -1,4 +1,4 @@
-1174
+1486
 ds=y:ai=0.2:luximr.ttf -b&amp;h-luxi mono-bold-i-normal--0-0-0-0-c-0-iso10646-1
 ds=y:ai=0.2:luximr.ttf -b&amp;h-luxi mono-bold-i-normal--0-0-0-0-c-0-iso8859-1
[...]</pre></div></li><li class="step"><p>
      To restore one or more files run <code class="command">snapper -v undochange</code>
      <em class="replaceable">PRE</em>..<em class="replaceable">POST</em>
      <em class="replaceable">FILENAMES</em>. If you do not specify a
      <em class="replaceable">FILENAMES</em>, all changed files will be restored.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -v undochange 350..351
     create:0 modify:13 delete:7
     undoing change...
     deleting /usr/share/doc/packages/mikachan-fonts
     deleting /usr/share/doc/packages/mikachan-fonts/COPYING
     deleting /usr/share/doc/packages/mikachan-fonts/dl.html
     deleting /usr/share/fonts/truetype/みかちゃん-p.ttf
     deleting /usr/share/fonts/truetype/みかちゃん-pb.ttf
     deleting /usr/share/fonts/truetype/みかちゃん-ps.ttf
     deleting /usr/share/fonts/truetype/みかちゃん.ttf
     modifying /usr/share/fonts/truetype/fonts.dir
     modifying /usr/share/fonts/truetype/fonts.scale
     modifying /var/cache/fontconfig/7ef2298fde41cc6eeb7af42e48b7d293-x86_64.cache-4
     modifying /var/lib/rpm/Basenames
     modifying /var/lib/rpm/Dirnames
     modifying /var/lib/rpm/Group
     modifying /var/lib/rpm/Installtid
     modifying /var/lib/rpm/Name
     modifying /var/lib/rpm/Packages
     modifying /var/lib/rpm/Providename
     modifying /var/lib/rpm/Requirename
     modifying /var/lib/rpm/Sha1header
     modifying /var/lib/rpm/Sigmd5
     undoing change done</pre></div></li></ol></div></div><div id="id-1.3.3.11.8.6.6" data-id-title="Reverting user additions" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Reverting user additions</div><p>
     Reverting user additions via undoing changes with Snapper is not
     recommended. Since certain directories are excluded from snapshots, files
     belonging to these users will remain in the file system. If a user with
     the same user ID as a deleted user is created, this user will inherit the
     files. Therefore it is strongly recommended to use the YaST
     <span class="guimenu">User and Group Management</span> tool to remove users.
    </p></div></section><section class="sect2" id="sec-snapper-undo-delete-file" data-id-title="Using Snapper to restore files"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.2.2 </span><span class="title-name">Using Snapper to restore files</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-undo-delete-file">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Apart from the installation and administration snapshots, Snapper creates
    timeline snapshots. You can use these backup snapshots to restore files
    that have accidentally been deleted or to restore a previous version of a
    file. By using Snapper's diff feature you can also find out which
    modifications have been made at a certain point of time.
   </p><p>
    Being able to restore files is especially interesting for data, which may
    reside on subvolumes or partitions for which snapshots are not taken by
    default. To be able to restore files from home directories, for example,
    create a separate Snapper configuration for <code class="filename">/home</code>
    doing automatic timeline snapshots. See
    <a class="xref" href="#sec-snapper-config" title="10.5. Creating and modifying Snapper configurations">Section 10.5, “Creating and modifying Snapper configurations”</a> for instructions.
   </p><div id="id-1.3.3.11.8.7.4" data-id-title="Restoring files compared to rollback" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Restoring files compared to rollback</div><p>
     Snapshots taken from the root file system (defined by Snapper's root
     configuration), can be used to do a system rollback. The recommended way
     to do such a rollback is to boot from the snapshot and then perform the
     rollback. See <a class="xref" href="#sec-snapper-snapshot-boot" title="10.3. System rollback by booting from snapshots">Section 10.3, “System rollback by booting from snapshots”</a> for details.
    </p><p>
     Performing a rollback would also be possible by restoring all files from a
     root file system snapshot as described below. However, this is not
     recommended. You may restore single files, for example, a configuration
     file from the <code class="systemitem">/etc</code> directory, but not the
     complete list of files from the snapshot.
    </p><p>
     This restriction only affects snapshots taken from the root file system.
    </p></div><div class="procedure" id="proc-snapper-restore-yast" data-id-title="Restoring files using the YaST Snapper module"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 10.3: </span><span class="title-name">Restoring files using the YaST <span class="guimenu">Snapper</span> module </span></span><a title="Permalink" class="permalink" href="#proc-snapper-restore-yast">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start the <span class="guimenu">Snapper</span> module from the
      <span class="guimenu">Miscellaneous</span> section in YaST or by entering
      <code class="command">yast2 snapper</code>.
     </p></li><li class="step"><p>
      Choose the <span class="guimenu">Current Configuration</span> from which to choose
      a snapshot.
     </p></li><li class="step"><p>
      Select a timeline snapshot from which to restore a file and choose
      <span class="guimenu">Show Changes</span>. Timeline snapshots are of the type
      <span class="guimenu">Single</span> with a description value of
      <span class="guimenu">timeline</span>.
     </p></li><li class="step"><p>
      Select a file from the text box by clicking the file name. The difference
      between the snapshot version and the current system is shown. Activate
      the check box to select the file for restore. Do so for all files you
      want to restore.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Restore Selected</span> and confirm the action by
      clicking <span class="guimenu">Yes</span>.
     </p></li></ol></div></div><div class="procedure" id="proc-snapper-restore-cmdl" data-id-title="Restoring files using the snapper command"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 10.4: </span><span class="title-name">Restoring files using the <code class="command">snapper</code> command </span></span><a title="Permalink" class="permalink" href="#proc-snapper-restore-cmdl">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Get a list of timeline snapshots for a specific configuration by running
      the following command:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable">CONFIG</em> list -t single | grep timeline</pre></div><p>
      <em class="replaceable">CONFIG</em> needs to be replaced by an existing
      Snapper configuration. Use <code class="command">snapper list-configs</code> to
      display a list.
     </p></li><li class="step"><p>
      Get a list of changed files for a given snapshot by running the following
      command:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable">CONFIG</em> status <em class="replaceable">SNAPSHOT_ID</em>..0</pre></div><p>
      Replace <em class="replaceable">SNAPSHOT_ID</em> by the ID for the snapshot
      from which you want to restore the files.
     </p></li><li class="step"><p>
      Optionally list the differences between the current file version and the
      one from the snapshot by running
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable">CONFIG</em> diff <em class="replaceable">SNAPSHOT_ID</em>..0 <em class="replaceable">FILE NAME</em></pre></div><p>
      If you do not specify <em class="replaceable">&lt;FILE NAME&gt;</em>, the
      difference for all files are shown.
     </p></li><li class="step"><p>
      To restore one or more files, run
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable">CONFIG</em> -v undochange <em class="replaceable">SNAPSHOT_ID</em>..0 <em class="replaceable">FILENAME1</em> <em class="replaceable">FILENAME2</em></pre></div><p>
      If you do not specify file names, all changed files will be restored.
     </p></li></ol></div></div></section></section><section class="sect1" id="sec-snapper-snapshot-boot" data-id-title="System rollback by booting from snapshots"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.3 </span><span class="title-name">System rollback by booting from snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-snapshot-boot">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The GRUB 2 version included on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> can boot from Btrfs snapshots.
   Together with Snapper's rollback feature, this allows to recover a
   misconfigured system. Only snapshots created for the default Snapper
   configuration (<code class="literal">root</code>) are bootable.
  </p><div id="id-1.3.3.11.9.3" data-id-title="Supported configuration" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Supported configuration</div><p>

    As of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP6</span></span> system rollbacks are only supported if
    the default subvolume configuration of the root partition has not been
    changed.
   </p></div><p>
   When booting a snapshot, the parts of the file system included in the
   snapshot are mounted read-only; all other file systems and parts that are
   excluded from snapshots are mounted read-write and can be modified.
  </p><div id="id-1.3.3.11.9.5" data-id-title="Undoing changes compared to rollback" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Undoing changes compared to rollback</div><p>
    When working with snapshots to restore data, it is important to know that
    there are two fundamentally different scenarios Snapper can handle:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.9.5.3.1"><span class="term">Undoing changes</span></dt><dd><p>
       When undoing changes as described in <a class="xref" href="#sec-snapper-undo" title="10.2. Using Snapper to undo changes">Section 10.2, “Using Snapper to undo changes”</a>,
       two snapshots are compared and the changes between these two snapshots
       are reverted. Using this method also allows to explicitly exclude
       selected files from being restored.
      </p></dd><dt id="id-1.3.3.11.9.5.3.2"><span class="term">Rollback</span></dt><dd><p>
       When doing rollbacks as described in the following, the system is reset
       to the state at which the snapshot was taken.
      </p></dd></dl></div></div><p>
   To do a rollback from a bootable snapshot, the following requirements must
   be met. When doing a default installation, the system is set up accordingly.
  </p><div class="itemizedlist"><div class="title-container"><div class="itemizedlist-title-wrap"><div class="itemizedlist-title"><span class="title-number-name"><span class="title-name">Requirements for a rollback from a bootable snapshot </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.11.9.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div><ul class="itemizedlist"><li class="listitem"><p>
     The root file system needs to be Btrfs. Booting from LVM volume snapshots
     is not supported.
    </p></li><li class="listitem"><p>
     The root file system needs to be on a single device. To check, run
     <code class="command">sudo /sbin/btrfs filesystem show</code>. It needs to report
     <code class="literal">Total devices 1</code>. If more than <code class="literal">1</code>
     device is listed, your setup is not supported.
    </p><div id="id-1.3.3.11.9.7.3.2" data-id-title="Directories excluded from snapshots" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Directories excluded from snapshots</div><p>
      Directories that are excluded from snapshots such as
      <code class="filename">/srv</code> (see <a class="xref" href="#snapper-dir-excludes" title="10.1.3. Directories that are excluded from snapshots">Section 10.1.3, “Directories that are excluded from snapshots”</a>
      for a full list) may reside on separate devices.
     </p></div></li><li class="listitem"><p>
     The system needs to be bootable via the installed boot loader.
    </p></li><li class="listitem"><p>
     Only contents of the subvolume <code class="filename">/</code> will be rolled
     back. It is not possible to include other subvolumes.
    </p></li></ul></div><p>
   To perform a rollback from a bootable snapshot, do as follows:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Boot the system. In the boot menu choose <span class="guimenu">Bootable
     snapshots</span> and select the snapshot you want to boot. The list of
     snapshots is listed by date—the most recent snapshot is listed
     first.
    </p></li><li class="step"><p>
     Log in to the system. Carefully check whether everything works as
     expected. Note that you cannot write to any directory that is part of the
     snapshot. Data you write to other directories will
     <span class="emphasis"><em>not</em></span> get lost, regardless of what you do next.
    </p></li><li class="step"><p>
     Depending on whether you want to perform the rollback or not, choose your
     next step:
    </p><ol type="a" class="substeps"><li class="step"><p>
       If the system is in a state where you do not want to do a rollback,
       reboot to boot into the current system state. You can then choose a different
       snapshot, or start the rescue system.
      </p></li><li class="step"><p>
       To perform the rollback, run
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper rollback</pre></div><p>
       and reboot afterward. On the boot screen, choose the default boot entry
       to reboot into the reinstated system. A snapshot of the file system status
       before the rollback is created. The default subvolume for root will
       be replaced with a fresh read-write snapshot.
       For details, see <a class="xref" href="#sec-snapper-snapshot-boot-rollback" title="10.3.1. Snapshots after rollback">Section 10.3.1, “Snapshots after rollback”</a>.
       </p><p>
        It is useful to add a description for the snapshot with the <code class="option">-d</code> option.
        For example:
       </p><div class="verbatim-wrap"><pre class="screen">New file system root since rollback on <em class="replaceable">DATE</em> <em class="replaceable">TIME</em></pre></div></li></ol></li></ol></div></div><div id="id-1.3.3.11.9.10" data-id-title="Rolling back to a specific installation state" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Rolling back to a specific installation state</div><p>
    If snapshots are not disabled during installation, an initial bootable
    snapshot is created at the end of the initial system installation. You can
    go back to that state at any time by booting this snapshot. The snapshot
    can be identified by the description <code class="literal">after installation</code>.
   </p><p>
    A bootable snapshot is also created when starting a system upgrade to a
    service pack or a new major release (provided snapshots are not disabled).
   </p></div><section class="sect2" id="sec-snapper-snapshot-boot-rollback" data-id-title="Snapshots after rollback"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.3.1 </span><span class="title-name">Snapshots after rollback</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-snapshot-boot-rollback">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Before a rollback is performed, a snapshot of the running file system
    is created. The description references the ID of the snapshot that
    was restored in the rollback.
   </p><p>
    Snapshots created by rollbacks receive the value <code class="literal">number</code>
    for the <code class="literal">Cleanup</code> attribute. The rollback snapshots are
    therefore automatically deleted when the set number of snapshots is reached.
    Refer to <a class="xref" href="#sec-snapper-clean-up" title="10.7. Automatic snapshot clean-up">Section 10.7, “Automatic snapshot clean-up”</a> for details.
    If the snapshot contains important data, extract the data from the snapshot
    before it is removed.
   </p><section class="sect3" id="sec-snapper-snapshot-boot-rollback-example" data-id-title="Example of rollback snapshot"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.3.1.1 </span><span class="title-name">Example of rollback snapshot</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-snapshot-boot-rollback-example">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     For example, after a fresh installation the following snapshots are
     available on the system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">snapper</code> --iso list
Type   | # |     | Cleanup | Description           | Userdata
-------+---+ ... +---------+-----------------------+--------------
single | 0 |     |         | current               |
single | 1 |     |         | first root filesystem |
single | 2 |     | number  | after installation    | important=yes</pre></div><p>
     After running <code class="command">sudo snapper rollback</code> snapshot
     <code class="literal">3</code> is created and contains the state of the system
     before the rollback was executed. Snapshot <code class="literal">4</code> is
     the new default Btrfs subvolume and thus the system after a reboot.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">snapper</code> --iso list
Type   | # |     | Cleanup | Description           | Userdata
-------+---+ ... +---------+-----------------------+--------------
single | 0 |     |         | current               |
single | 1 |     | number  | first root filesystem |
single | 2 |     | number  | after installation    | important=yes
single | 3 |     | number  | rollback backup of #1 | important=yes
single | 4 |     |         |                       |</pre></div></section></section><section class="sect2" id="sec-snapper-snapshot-boot-identify" data-id-title="Accessing and identifying snapshot boot entries"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.3.2 </span><span class="title-name">Accessing and identifying snapshot boot entries</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-snapshot-boot-identify">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To boot from a snapshot, reboot your machine and choose <span class="guimenu">Start
    Bootloader from a read-only snapshot</span>. A screen listing all
    bootable snapshots opens. The most recent snapshot is listed first, the
    oldest last. Use the keys <span class="keycap">↓</span> and
    <span class="keycap">↑</span> to navigate and press <span class="keycap">Enter</span> to
    activate the selected snapshot. Activating a snapshot from the boot menu
    does not reboot the machine immediately, but rather opens the boot loader
    of the selected snapshot.
   </p><div class="figure" id="fig-snapper-snapshot-boot-identify"><div class="figure-contents"><div class="mediaobject"><a href="images/boot_snapshots.png"><img src="images/boot_snapshots.png" width="75%" alt="Boot loader: snapshots" title="Boot loader: snapshots"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 10.1: </span><span class="title-name">Boot loader: snapshots </span></span><a title="Permalink" class="permalink" href="#fig-snapper-snapshot-boot-identify">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div><div id="id-1.3.3.11.9.12.4" data-id-title="Booting Xen from a Btrfs snapshot using UEFI currently fails" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Booting Xen from a Btrfs snapshot using UEFI currently fails</div><p>
     Refer to <a class="link" href="https://www.suse.com/support/kb/doc/?id=000020602" target="_blank">https://www.suse.com/support/kb/doc/?id=000020602</a> for more
     details.
    </p></div><p>
    Each snapshot entry in the boot loader follows a naming scheme which makes
    it possible to identify it easily:
   </p><div class="verbatim-wrap"><pre class="screen">[*]<span class="callout" id="snapper-boot-important">1</span><em class="replaceable">OS</em><span class="callout" id="snapper-boot-os">2</span> (<em class="replaceable">KERNEL</em><span class="callout" id="snapper-boot-kernel">3</span>,<em class="replaceable">DATE</em><span class="callout" id="snapper-boot-date">4</span>T<em class="replaceable">TIME</em><span class="callout" id="snapper-boot-time">5</span>,<em class="replaceable">DESCRIPTION</em><span class="callout" id="snapper-boot-description">6</span>)</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#snapper-boot-important"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      If the snapshot was marked <code class="literal">important</code>, the entry is
      marked with a <code class="literal">*</code>.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#snapper-boot-os"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Operating system label.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#snapper-boot-date"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Date in the format <code class="literal">YYYY-MM-DD</code>.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#snapper-boot-time"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Time in the format <code class="literal">HH:MM</code>.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#snapper-boot-description"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      This field contains a description of the snapshot. In case of a manually
      created snapshot this is the string created with the option
      <code class="option">--description</code> or a custom string (see
      <a class="xref" href="#tip-snapper-snapshot-boot-custom-descr" title="Tip: Setting a custom description for boot loader snapshot entries">Tip: Setting a custom description for boot loader snapshot entries</a>). In case
      of an automatically created snapshot, it is the tool that was called, for
      example <code class="literal">zypp(zypper)</code> or
      <code class="literal">yast_sw_single</code>. Long descriptions may be truncated,
      depending on the size of the boot screen.
     </p></td></tr></table></div><div id="tip-snapper-snapshot-boot-custom-descr" data-id-title="Setting a custom description for boot loader snapshot entries" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Setting a custom description for boot loader snapshot entries</div><p>
     It is possible to replace the default string in the description field of a
     snapshot with a custom string. This is for example useful if an
     automatically created description is not sufficient, or a user-provided
     description is too long. To set a custom string
     <em class="replaceable">STRING</em> for snapshot
     <em class="replaceable">NUMBER</em>, use the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper modify --userdata "bootloader=<em class="replaceable">STRING</em>" <em class="replaceable">NUMBER</em></pre></div><p>
     The description should be no longer than 25 characters—everything
     that exceeds this size will not be readable on the boot screen.
    </p></div></section><section class="sect2" id="sec-snapper-snapshot-boot-limits" data-id-title="Limitations"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.3.3 </span><span class="title-name">Limitations</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-snapshot-boot-limits">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    A <span class="emphasis"><em>complete</em></span> system rollback, restoring the complete
    system to the identical state as it was in when a snapshot was taken, is
    not possible.
   </p><section class="sect3" id="sec-snapper-limits-snapshot-boot-excludes" data-id-title="Directories excluded from snapshots"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.3.3.1 </span><span class="title-name">Directories excluded from snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-limits-snapshot-boot-excludes">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Root file system snapshots do not contain all directories. See
     <a class="xref" href="#snapper-dir-excludes" title="10.1.3. Directories that are excluded from snapshots">Section 10.1.3, “Directories that are excluded from snapshots”</a> for details and reasons. As a
     general consequence, data from these directories is not restored,
     resulting in the following limitations.
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.9.13.3.3.1"><span class="term">
       Add-ons and third-party software may be unusable after a rollback
      </span></dt><dd><p>
        Applications and add-ons installing data in subvolumes excluded from
        the snapshot, such as <code class="filename">/opt</code>, may not work after a
        rollback if other parts of the application data are also installed on
        subvolumes included in the snapshot. Re-install the application or the
        add-on to solve this problem.
       </p></dd><dt id="id-1.3.3.11.9.13.3.3.2"><span class="term">File access problems</span></dt><dd><p>
        If an application had changed file permissions and/or ownership in
        between snapshot and current system, the application may not be able to
        access these files. Reset permissions and/or ownership for the affected
        files after the rollback.
       </p></dd><dt id="id-1.3.3.11.9.13.3.3.3"><span class="term">Incompatible data formats</span></dt><dd><p>
        If a service or an application has established a new data format in
        between snapshot and current system, the application may not be able to
        read the affected data files after a rollback.
       </p></dd><dt id="id-1.3.3.11.9.13.3.3.4"><span class="term">Subvolumes with a mixture of code and data</span></dt><dd><p>
        Subvolumes like <code class="filename">/srv</code> may contain a mixture of code
        and data. A rollback may result in non-functional code. A downgrade of
        the PHP version, for example, may result in broken PHP scripts for the
        Web server.
       </p></dd><dt id="id-1.3.3.11.9.13.3.3.5"><span class="term">User data</span></dt><dd><p>
        If a rollback removes users from the system, data that is owned by
        these users in directories excluded from the snapshot, is not removed.
        If a user with the same user ID is created, this user will inherit the
        files. Use a tool like <code class="command">find</code> to locate and remove
        orphaned files.
       </p></dd></dl></div></section><section class="sect3" id="sec-snapper-limits-snapshot-boot-grub" data-id-title="No rollback of boot loader data"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.3.3.2 </span><span class="title-name">No rollback of boot loader data</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-limits-snapshot-boot-grub">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     A rollback of the boot loader is not possible, since all
     <span class="quote">“<span class="quote">stages</span>”</span> of the boot loader must fit together. This cannot be
     guaranteed when doing rollbacks of <code class="filename">/boot</code>.
    </p></section></section></section><section class="sect1" id="sec-snapper-homedirs" data-id-title="Enabling Snapper in user home directories"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.4 </span><span class="title-name">Enabling Snapper in user home directories</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-homedirs">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
         You may enable snapshots for users' <code class="filename">/home</code> 
         directories, which supports several use cases:
     </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                 Individual users may manage their own snapshots and rollbacks.
             </p></li><li class="listitem"><p>
                 System users, for example, database, system, and network admins
                 who want to track copies of configuration files, documentation, 
                 and so on.
             </p></li><li class="listitem"><p>
                 Samba shares with home directories and Btrfs back-end.
             </p></li></ul></div><p>
         Each user's directory is a Btrfs subvolume of <code class="filename">/home</code>.         
         It is possible to set this up manually 
         (see <a class="xref" href="#sec-snapper-manual-home-config" title="10.4.3. Manually enabling snapshots in home directories">Section 10.4.3, “Manually enabling snapshots in home directories”</a>). However, a 
         more convenient way is to use <code class="literal">pam_snapper</code>.
         The <code class="literal">pam_snapper</code> package installs the 
         <code class="literal">pam_snapper.so</code> module and helper scripts, which 
         automate user creation and Snapper configuration. 
     </p><p>
         <code class="literal">pam_snapper</code> provides integration with the 
         <code class="command">useradd</code> command, pluggable authentication modules
         (PAM), and Snapper. By default it creates snapshots at user login and
         logout, and also creates time-based snapshots as certain users remain
         logged in for extended periods of time. You may change the defaults
         using the normal Snapper commands and configuration files.
     </p><section class="sect2" id="sec-snapper-install-pam-snapper" data-id-title="Installing pam_snapper and creating users"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.4.1 </span><span class="title-name">Installing pam_snapper and creating users</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-install-pam-snapper">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
             The easiest way is to start with a new <code class="filename">/home</code> 
             directory formatted with Btrfs, and no existing users. Install
             <code class="literal">pam_snapper</code>:
         </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>zypper in pam_snapper</pre></div><p>
             Add this line to <code class="filename">/etc/pam.d/common-session</code>:
         </p><div class="verbatim-wrap"><pre class="screen">session optional pam_snapper.so</pre></div><p>
             Use the <code class="command">/usr/lib/pam_snapper/pam_snapper_useradd.sh</code>
             script to create a new user and home directory. By default the script
             performs a dry run. Edit the script to change 
             <code class="literal">DRYRUN=1</code> to <code class="literal">DRYRUN=0</code>. Now you
             can create a new user:
         </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>/usr/lib/pam_snapper/pam_snapper_useradd.sh \
<em class="replaceable">username</em> <em class="replaceable">group</em> passwd=<em class="replaceable">password</em>
Create subvolume '/home/username'
useradd: warning: the home directory already exists.
Not copying any file from skel directory into it.</pre></div><p>
             The files from <code class="filename">/etc/skel</code> will be copied
             into the user's home directory at their first login. Verify that
             the user's configuration was created by listing your Snapper 
             configurations:
         </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>snapper list --all
Config: home_username, subvolume: /home/username
Type   | # | Pre # | Date | User | Cleanup | Description | Userdata
-------+---+-------+------+------+---------+-------------+---------
single | 0 |       |      | root |         | current     |</pre></div><p>
            Over time, this output will become populated with a list of snapshots,
            which the user can manage with the standard Snapper commands.
        </p></section><section class="sect2" id="sec-snapper-remove-user" data-id-title="Removing users"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.4.2 </span><span class="title-name">Removing users</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-remove-user">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
             Remove users with the 
             <code class="command">/usr/lib/pam_snapper/pam_snapper_userdel.sh</code>
             script. By default it performs a dry run, so edit it to change 
             <code class="literal">DRYRUN=1</code> to <code class="literal">DRYRUN=0</code>. This 
             removes the user, the user's home subvolume, Snapper configuration, 
             and deletes all snapshots.
         </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>/usr/lib/pam_snapper/pam_snapper_userdel.sh username</pre></div></section><section class="sect2" id="sec-snapper-manual-home-config" data-id-title="Manually enabling snapshots in home directories"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.4.3 </span><span class="title-name">Manually enabling snapshots in home directories</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-manual-home-config">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
            These are the steps for manually setting up users' home directories
            with Snapper. <code class="filename">/home</code> must be formatted with Btrfs,
            and the users not yet created.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>btrfs subvol create /home/<em class="replaceable">username</em>
<code class="prompt root"># </code>snapper -c home_<em class="replaceable">username</em> create-config /home/<em class="replaceable">username</em>
<code class="prompt root"># </code>sed -i -e "s/ALLOW_USERS=\"\"/ALLOW_USERS=\"<em class="replaceable">username</em>\"/g" \
/etc/snapper/configs/home_<em class="replaceable">username</em>
<code class="prompt root"># </code>yast users add username=<em class="replaceable">username</em> home=/home/<em class="replaceable">username</em> password=<em class="replaceable">password</em>
<code class="prompt root"># </code>chown <em class="replaceable">username</em>.<em class="replaceable">group</em> /home/<em class="replaceable">username</em>
<code class="prompt root"># </code>chmod 755 /home/<em class="replaceable">username</em>/.snapshots</pre></div></section></section><section class="sect1" id="sec-snapper-config" data-id-title="Creating and modifying Snapper configurations"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.5 </span><span class="title-name">Creating and modifying Snapper configurations</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-config">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The way Snapper behaves is defined in a configuration file that is specific
   for each partition or <code class="literal">Btrfs</code> subvolume. These
   configuration files reside under <code class="filename">/etc/snapper/configs/</code>.
  </p><p>
   In case the root file system is big enough (approximately 12 GB), snapshots
   are automatically enabled for the root file system <code class="filename">/</code>
   upon installation. The corresponding default configuration is named
   <code class="filename">root</code>. It creates and manages the YaST and Zypper
   snapshot. See <a class="xref" href="#sec-snapper-config-modify-values" title="10.5.1.1. Configuration data">Section 10.5.1.1, “Configuration data”</a> for a list
   of the default values.
  </p><div id="id-1.3.3.11.11.4" data-id-title="Minimum root file system size for enabling snapshots" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Minimum root file system size for enabling snapshots</div><p>
    As explained in <a class="xref" href="#sec-snapper-setup" title="10.1. Default setup">Section 10.1, “Default setup”</a>, enabling snapshots
    requires additional free space in the root file system. The amount depends
    on the amount of packages installed and the amount of changes made to the
    volume that is included in snapshots. The snapshot frequency and the number
    of snapshots that get archived also matter.
   </p><p>
    There is a minimum root file system size that is required to automatically
    enable snapshots during the installation. Currently this size is
    approximately 12 GB. This value may change in the future, depending on
    architecture and the size of the base system. It depends on the values for
    the following tags in the file <code class="filename">/control.xml</code> from the
    installation media:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;root_base_size&gt;
&lt;btrfs_increase_percentage&gt;</pre></div><p>
    It is calculated with the following formula: <em class="replaceable">ROOT_BASE_SIZE</em> * (1 + <em class="replaceable">BTRFS_INCREASE_PERCENTAGE</em>/100)
   </p><p>
    Keep in mind that this value is a minimum size. Consider using more space
    for the root file system. As a rule of thumb, double the size you would use
    when not having enabled snapshots.
   </p></div><p>
   You may create your own configurations for other partitions formatted with
   <code class="literal">Btrfs</code> or existing subvolumes on a
   <code class="literal">Btrfs</code> partition. In the following example we will set up
   a Snapper configuration for backing up the Web server data residing on a
   separate, <code class="literal">Btrfs</code>-formatted partition mounted at
   <code class="filename">/srv/www</code>.
  </p><p>
   After a configuration has been created, you can either use
   <code class="command">snapper</code> itself or the YaST <span class="guimenu">Snapper</span>
   module to restore files from these snapshots. In YaST you need to select
   your <span class="guimenu">Current Configuration</span>, while you need to specify
   your configuration for <code class="command">snapper</code> with the global switch
   <code class="option">-c</code> (for example, <code class="command">snapper -c myconfig
   list</code>).
  </p><p>
   To create a new Snapper configuration, run <code class="command">snapper
   create-config</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c www-data<span class="callout" id="snapper-create-name">1</span> create-config /srv/www<span class="callout" id="snapper-create-volume">2</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#snapper-create-name"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     Name of configuration file.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#snapper-create-volume"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     Mount point of the partition or <code class="literal">Btrfs</code> subvolume on
     which to take snapshots.
    </p></td></tr></table></div><p>
   This command will create a new configuration file
   <code class="filename">/etc/snapper/configs/www-data</code> with reasonable default
   values (taken from
   <code class="filename">/etc/snapper/config-templates/default</code>). Refer to
   <a class="xref" href="#sec-snapper-config-modify" title="10.5.1. Managing existing configurations">Section 10.5.1, “Managing existing configurations”</a> for instructions on how to
   adjust these defaults.
  </p><div id="id-1.3.3.11.11.11" data-id-title="Configuration defaults" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Configuration defaults</div><p>
    Default values for a new configuration are taken from
    <code class="filename">/etc/snapper/config-templates/default</code>. To use your own
    set of defaults, create a copy of this file in the same directory and
    adjust it to your needs. To use it, specify the <code class="option">-t</code> option
    with the create-config command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c www-data create-config -t <em class="replaceable">MY_DEFAULTS</em> /srv/www</pre></div></div><section class="sect2" id="sec-snapper-config-modify" data-id-title="Managing existing configurations"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.5.1 </span><span class="title-name">Managing existing configurations</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-config-modify">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="command">snapper</code> command offers several subcommands for managing
    existing configurations. You can list, show, delete and modify them:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.11.12.3.1"><span class="term">Listing configurations</span></dt><dd><p>
       Use the subcommand <code class="command">snapper list-configs</code> to get all
       existing configurations:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper list-configs
Config | Subvolume
-------+----------
root   | /
usr    | /usr
local  | /local</pre></div></dd><dt id="id-1.3.3.11.11.12.3.2"><span class="term">Showing a configuration</span></dt><dd><p>
       Use the subcommand <code class="command">snapper -c
       <em class="replaceable">CONFIG</em> get-config</code> to display the
       specified configuration. Replace <em class="replaceable">CONFIG</em> with
       one of the configuration names shown by
       <code class="command">snapper list-configs</code>.
       For more information about the configuration options, see
       <a class="xref" href="#sec-snapper-config-modify-values" title="10.5.1.1. Configuration data">Section 10.5.1.1, “Configuration data”</a>.
      </p><p>
       To display the default configuration, run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c root get-config</pre></div></dd><dt id="id-1.3.3.11.11.12.3.3"><span class="term">Modifying a configuration</span></dt><dd><p>
       Use the subcommand <code class="command">snapper -c <em class="replaceable">CONFIG</em>
       set-config
       <em class="replaceable">OPTION</em>=<em class="replaceable">VALUE</em></code>
       to modify an option in the specified configuration.
       Replace <em class="replaceable">CONFIG</em> with one of the
       configuration names shown by <code class="command">snapper list-configs</code>.
       Possible values for <em class="replaceable">OPTION</em> and
       <em class="replaceable">VALUE</em> are listed in <a class="xref" href="#sec-snapper-config-modify-values" title="10.5.1.1. Configuration data">Section 10.5.1.1, “Configuration data”</a>.
      </p></dd><dt id="id-1.3.3.11.11.12.3.4"><span class="term">Deleting a configuration</span></dt><dd><p>
       Use the subcommand <code class="command">snapper -c
       <em class="replaceable">CONFIG</em> delete-config</code> to delete a
       configuration. Replace <em class="replaceable">CONFIG</em> with one of the
       configuration names shown by <code class="command">snapper list-configs</code>.
      </p></dd></dl></div><section class="sect3" id="sec-snapper-config-modify-values" data-id-title="Configuration data"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.5.1.1 </span><span class="title-name">Configuration data</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-config-modify-values">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Each configuration contains a list of options that can be modified from
     the command line. The following list provides details for each option. To
     change a value, run <code class="command">snapper -c <em class="replaceable">CONFIG</em>
     set-config
     "<em class="replaceable">KEY</em>=<em class="replaceable">VALUE</em>"</code>.
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.11.12.4.3.1"><span class="term"><code class="literal">ALLOW_GROUPS</code>,
      <code class="literal">ALLOW_USERS</code>
      </span></dt><dd><p>
        Granting permissions to use snapshots to regular users. See
        <a class="xref" href="#sec-snapper-config-user" title="10.5.1.2. Using Snapper as regular user">Section 10.5.1.2, “Using Snapper as regular user”</a> for more information.
       </p><p>
        The default value is <code class="literal">""</code>.
       </p></dd><dt id="id-1.3.3.11.11.12.4.3.2"><span class="term"><code class="literal">BACKGROUND_COMPARISON</code>
      </span></dt><dd><p>
        Defines whether pre and post snapshots should be compared in the
        background after creation.
       </p><p>
        The default value is <code class="literal">"yes"</code>.
       </p></dd><dt id="id-1.3.3.11.11.12.4.3.3"><span class="term"><code class="literal">EMPTY_*</code>
      </span></dt><dd><p>
        Defines the clean-up algorithm for snapshots pairs with identical pre
        and post snapshots. See <a class="xref" href="#sec-snapper-clean-up-empty" title="10.7.3. Cleaning up snapshot pairs that do not differ">Section 10.7.3, “Cleaning up snapshot pairs that do not differ”</a>
        for details.
       </p></dd><dt id="id-1.3.3.11.11.12.4.3.4"><span class="term"><code class="literal">FSTYPE</code>
      </span></dt><dd><p>
        File system type of the partition. Do not change.
       </p><p>
        The default value is <code class="literal">"btrfs"</code>.
       </p></dd><dt id="id-1.3.3.11.11.12.4.3.5"><span class="term"><code class="literal">NUMBER_*</code></span></dt><dd><p>
        Defines the clean-up algorithm for installation and administration
        snapshots. See <a class="xref" href="#sec-snapper-clean-up-number" title="10.7.1. Cleaning up numbered snapshots">Section 10.7.1, “Cleaning up numbered snapshots”</a> for
        details.
       </p></dd><dt id="id-1.3.3.11.11.12.4.3.6"><span class="term"><code class="literal">QGROUP</code> / <code class="literal">SPACE_LIMIT</code>
      </span></dt><dd><p>
        Adds quota support to the clean-up algorithms. See
        <a class="xref" href="#sec-snapper-clean-up-quota" title="10.7.5. Adding disk quota support">Section 10.7.5, “Adding disk quota support”</a> for details.
       </p></dd><dt id="id-1.3.3.11.11.12.4.3.7"><span class="term"><code class="literal">SUBVOLUME</code>
      </span></dt><dd><p>
        Mount point of the partition or subvolume to snapshot. Do not change.
       </p><p>
        The default value is <code class="literal">"/"</code>.
       </p></dd><dt id="id-1.3.3.11.11.12.4.3.8"><span class="term"><code class="literal">SYNC_ACL</code>
      </span></dt><dd><p>
        If Snapper is used by regular users (see
        <a class="xref" href="#sec-snapper-config-user" title="10.5.1.2. Using Snapper as regular user">Section 10.5.1.2, “Using Snapper as regular user”</a>), the users must be able to
        access the <code class="filename">.snapshot</code> directories and to read files
        within them. If SYNC_ACL is set to <code class="literal">yes</code>, Snapper
        automatically makes them accessible using ACLs for users and groups
        from the ALLOW_USERS or ALLOW_GROUPS entries.
       </p><p>
        The default value is <code class="literal">"no"</code>.
       </p></dd><dt id="id-1.3.3.11.11.12.4.3.9"><span class="term"><code class="literal">TIMELINE_CREATE</code>
      </span></dt><dd><p>
        If set to <code class="literal">yes</code>, hourly snapshots are created. Valid
        values: <code class="literal">yes</code>, <code class="literal">no</code>.
       </p><p>
        The default value is <code class="literal">"no"</code>.
       </p></dd><dt id="id-1.3.3.11.11.12.4.3.10"><span class="term"><code class="literal">TIMELINE_CLEANUP</code> /
       <code class="literal">TIMELINE_LIMIT_*</code>
      </span></dt><dd><p>
        Defines the clean-up algorithm for timeline snapshots. See
        <a class="xref" href="#sec-snapper-clean-up-timeline" title="10.7.2. Cleaning up timeline snapshots">Section 10.7.2, “Cleaning up timeline snapshots”</a> for details.
       </p></dd></dl></div></section><section class="sect3" id="sec-snapper-config-user" data-id-title="Using Snapper as regular user"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.5.1.2 </span><span class="title-name">Using Snapper as regular user</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-config-user">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     By default Snapper can only be used by <code class="systemitem">root</code>. However, there are
     cases in which certain groups or users need to be able to create snapshots
     or undo changes by reverting to a snapshot:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       Web site administrators who want to take snapshots of
       <code class="filename">/srv/www</code>
      </p></li><li class="listitem"><p>
       Users who want to take a snapshot of their home directory
      </p></li></ul></div><p>
     For these purposes, you can create Snapper configurations that grant
     permissions to users or/and groups. The corresponding
     <code class="filename">.snapshots</code> directory needs to be readable and
     accessible by the specified users. The easiest way to achieve this is to
     set the SYNC_ACL option to <code class="literal">yes</code>.
    </p><div class="procedure" id="id-1.3.3.11.11.12.5.5" data-id-title="Enabling regular users to use Snapper"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 10.5: </span><span class="title-name">Enabling regular users to use Snapper </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.11.11.12.5.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
      All steps in this procedure need to be run by <code class="systemitem">root</code>.
     </p><ol class="procedure" type="1"><li class="step"><p>
       If a Snapper configuration does not exist yet, create one for the partition or
       subvolume on which the user should be able to use Snapper. Refer to
       <a class="xref" href="#sec-snapper-config" title="10.5. Creating and modifying Snapper configurations">Section 10.5, “Creating and modifying Snapper configurations”</a> for instructions. Example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper --config web_data create /srv/www</pre></div></li><li class="step"><p>
       The configuration file is created under
       <code class="filename">/etc/snapper/configs/<em class="replaceable">CONFIG</em></code>,
       where CONFIG is the value you specified with
       <code class="option">-c/--config</code> in the previous step (for example
       <code class="filename">/etc/snapper/configs/web_data</code>). Adjust it according
       to your needs. For more information, see
       <a class="xref" href="#sec-snapper-config-modify" title="10.5.1. Managing existing configurations">Section 10.5.1, “Managing existing configurations”</a>.
      </p></li><li class="step"><p>
       Set values for <code class="envar">ALLOW_USERS</code> and/or
       <code class="envar">ALLOW_GROUPS</code> to grant permissions to users and/or groups,
       respectively. Multiple entries need to be separated by
       <span class="keycap">Space</span>. To grant permissions to the user
       <code class="systemitem">www_admin</code> for example, run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c web_data set-config "ALLOW_USERS=www_admin" SYNC_ACL="yes"</pre></div></li><li class="step"><p>
       The given Snapper configuration can now be used by the specified users
       and/or groups. You can test it with the <code class="literal">list</code>
       command, for example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">www_admin:~ &gt; </code>snapper -c web_data list</pre></div></li></ol></div></div></section></section></section><section class="sect1" id="sec-snapper-manage" data-id-title="Manually creating and managing snapshots"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.6 </span><span class="title-name">Manually creating and managing snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-manage">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Snapper is not restricted to creating and managing snapshots automatically
   by configuration; you can also create snapshot pairs (<span class="quote">“<span class="quote">before and
   after</span>”</span>) or single snapshots manually using either the command-line
   tool or the YaST module.
  </p><p>
   All Snapper operations are carried out for an existing configuration (see
   <a class="xref" href="#sec-snapper-config" title="10.5. Creating and modifying Snapper configurations">Section 10.5, “Creating and modifying Snapper configurations”</a> for details). You can only take
   snapshots of partitions or volumes for which a configuration exists. By
   default the system configuration (<code class="literal">root</code>) is used.
   To create or manage snapshots for your own configuration you need to
   explicitly choose it. Use the <span class="guimenu">Current Configuration</span>
   drop-down box in YaST or specify the <code class="option">-c</code> on the command
   line (<code class="command">snapper -c <em class="replaceable">MYCONFIG</em>
   <em class="replaceable">COMMAND</em></code>).
  </p><section class="sect2" id="sec-snapper-manage-metadata" data-id-title="Snapshot metadata"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.6.1 </span><span class="title-name">Snapshot metadata</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-manage-metadata">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Each snapshot consists of the snapshot itself and certain metadata. When
    creating a snapshot you also need to specify the metadata. Modifying a
    snapshot means changing its metadata—you cannot modify its content.
    Use <code class="command">snapper list</code> to show existing snapshots and their
    metadata:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.12.4.3.1"><span class="term"><code class="command">snapper --config home list</code>
     </span></dt><dd><p>
       Lists snapshots for the configuration <code class="literal">home</code>. To list
       snapshots for the default configuration (root), use <code class="command">snapper -c
       root list</code> or <code class="command">snapper list</code>.
      </p></dd><dt id="id-1.3.3.11.12.4.3.2"><span class="term"><code class="command">snapper list -a</code>
     </span></dt><dd><p>
       Lists snapshots for all existing configurations.
      </p></dd><dt id="id-1.3.3.11.12.4.3.3"><span class="term"><code class="command">snapper list -t pre-post</code>
     </span></dt><dd><p>
       Lists all pre and post snapshot pairs for the default
       (<code class="literal">root</code>) configuration.
      </p></dd><dt id="id-1.3.3.11.12.4.3.4"><span class="term"><code class="command">snapper list -t single</code>
     </span></dt><dd><p>
       Lists all snapshots of the type <code class="literal">single</code> for the
       default (<code class="literal">root</code>) configuration.
      </p></dd></dl></div><p>
    The following metadata is available for each snapshot:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <span class="bold"><strong>Type</strong></span>: snapshot type, see
      <a class="xref" href="#sec-snapper-manage-metadata-type" title="10.6.1.1. Snapshot types">Section 10.6.1.1, “Snapshot types”</a> for details. This data
      cannot be changed.
     </p></li><li class="listitem"><p>
      <span class="bold"><strong>Number</strong></span>: unique number of the snapshot.
      This data cannot be changed.
     </p></li><li class="listitem"><p>
      <span class="bold"><strong>Pre Number</strong></span>: specifies the number of the
      corresponding pre snapshot. For snapshots of type post only. This data
      cannot be changed.
     </p></li><li class="listitem"><p>
      <span class="bold"><strong>Description</strong></span>: a description of the
      snapshot.
     </p></li><li class="listitem"><p>
      <span class="bold"><strong>Userdata</strong></span>: an extended description where
      you can specify custom data in the form of a comma-separated key=value
      list: <code class="literal">reason=testing, project=foo</code>. This field is also
      used to mark a snapshot as important (<code class="literal">important=yes</code>)
      and to list the user that created the snapshot
      (user=tux).
     </p></li><li class="listitem"><p>
      <span class="bold"><strong>Cleanup-Algorithm</strong></span>: cleanup-algorithm for
      the snapshot, see <a class="xref" href="#sec-snapper-clean-up" title="10.7. Automatic snapshot clean-up">Section 10.7, “Automatic snapshot clean-up”</a> for details.
     </p></li></ul></div><section class="sect3" id="sec-snapper-manage-metadata-type" data-id-title="Snapshot types"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.6.1.1 </span><span class="title-name">Snapshot types</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-manage-metadata-type">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Snapper knows three different types of snapshots: pre, post and single.
     Physically they do not differ, but Snapper handles them differently.
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.12.4.6.3.1"><span class="term"><code class="literal">pre</code>
      </span></dt><dd><p>
        Snapshot of a file system <span class="emphasis"><em>before</em></span> a modification.
        Each <code class="literal">pre</code> snapshot corresponds to a
        <code class="literal">post</code> snapshot.
        For example, this is used for the automatic YaST/Zypper snapshots.
       </p></dd><dt id="id-1.3.3.11.12.4.6.3.2"><span class="term"><code class="literal">post</code>
      </span></dt><dd><p>
        Snapshot of a file system <span class="emphasis"><em>after</em></span> a modification.
        Each <code class="literal">post</code> snapshot corresponds to a
        <code class="literal">pre</code> snapshot.
        For example, this is used for the automatic YaST/Zypper snapshots.
       </p></dd><dt id="id-1.3.3.11.12.4.6.3.3"><span class="term"><code class="literal">single</code>
      </span></dt><dd><p>
        Stand-alone snapshot.
        For example, this is used for the automatic hourly snapshots.
        This is the default type when creating snapshots.
       </p></dd></dl></div></section><section class="sect3" id="sec-snapper-manage-metadata-cleanup" data-id-title="Cleanup algorithms"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">10.6.1.2 </span><span class="title-name">Cleanup algorithms</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-manage-metadata-cleanup">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Snapper provides three algorithms to clean up old snapshots. The
     algorithms are executed in a daily
     <code class="systemitem">cron</code> job.
     It is possible to define the
     number of different types of snapshots to keep in the Snapper
     configuration (see <a class="xref" href="#sec-snapper-config-modify" title="10.5.1. Managing existing configurations">Section 10.5.1, “Managing existing configurations”</a> for
     details).
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.12.4.7.3.1"><span class="term">number</span></dt><dd><p>
        Deletes old snapshots when a certain snapshot count is reached.
       </p></dd><dt id="id-1.3.3.11.12.4.7.3.2"><span class="term">timeline</span></dt><dd><p>
        Deletes old snapshots having passed a certain age but keeps several
        hourly, daily, monthly and yearly snapshots.
       </p></dd><dt id="id-1.3.3.11.12.4.7.3.3"><span class="term">empty-pre-post</span></dt><dd><p>
        Deletes pre/post snapshot pairs with empty diffs.
       </p></dd></dl></div></section></section><section class="sect2" id="sec-snapper-manage-create" data-id-title="Creating snapshots"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.6.2 </span><span class="title-name">Creating snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-manage-create">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To create a snapshot, run <code class="command">snapper create</code> or
    click <span class="guimenu">Create</span> in the YaST module
    <span class="guimenu">Snapper</span>. The following examples explain how to create
    snapshots from the command line.
    The YaST interface for Snapper is not explicitly described here but
    provides equivalent functionality.
   </p><div id="id-1.3.3.11.12.5.3" data-id-title="Snapshot description" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Snapshot description</div><p>
     Always specify a meaningful description to later be able to
     identify its purpose. You can also specify additional information via
     the option <code class="option">--userdata</code>.
    </p></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.12.5.5.1"><span class="term"><code class="command">snapper create --from <em class="replaceable">17</em> --description 
        "with package2"</code>
     </span></dt><dd><p>
       Creates a stand-alone snapshot (type single) from an existing snapshot, which is specified
       by the snapshot's number from <code class="command">snapper list</code>. (This applies to Snapper version
       0.8.4 and newer.)
      </p></dd><dt id="id-1.3.3.11.12.5.5.2"><span class="term"><code class="command">snapper create --description "Snapshot for week 2
      2014"</code>
     </span></dt><dd><p>
       Creates a stand-alone snapshot (type single) for the default
       (<code class="literal">root</code>) configuration with a description. Because no
       cleanup-algorithm is specified, the snapshot will never be deleted
       automatically.
      </p></dd><dt id="id-1.3.3.11.12.5.5.3"><span class="term"><code class="command">snapper --config home create --description "Cleanup in
     ~tux"</code>
     </span></dt><dd><p>
       Creates a stand-alone snapshot (type single) for a custom configuration
       named <code class="literal">home</code> with a description. Because no
       cleanup-algorithm is specified, the snapshot will never be deleted
       automatically.
      </p></dd><dt id="id-1.3.3.11.12.5.5.4"><span class="term"><code class="command">snapper --config home create --description "Daily data
     backup" --cleanup-algorithm timeline</code>&gt;
     </span></dt><dd><p>
       Creates a stand-alone snapshot (type single) for a custom configuration
       named <code class="literal">home</code> with a description. The snapshot will
       automatically be deleted when it meets the criteria specified for the
       timeline cleanup-algorithm in the configuration.
      </p></dd><dt id="id-1.3.3.11.12.5.5.5"><span class="term"><code class="command">snapper create --type pre --print-number --description
     "Before the Apache config cleanup" --userdata "important=yes"</code>
     </span></dt><dd><p>
       Creates a snapshot of the type <code class="literal">pre</code> and prints the
       snapshot number. First command needed to create a pair of snapshots used
       to save a <span class="quote">“<span class="quote">before</span>”</span> and <span class="quote">“<span class="quote">after</span>”</span> state. The
       snapshot is marked as important.
      </p></dd><dt id="id-1.3.3.11.12.5.5.6"><span class="term"><code class="command">snapper create --type post --pre-number 30 --description
     "After the Apache config cleanup" --userdata "important=yes"</code>
     </span></dt><dd><p>
       Creates a snapshot of the type <code class="literal">post</code> paired with the
       <code class="literal">pre</code> snapshot number <code class="literal">30</code>. Second
       command needed to create a pair of snapshots used to save a
       <span class="quote">“<span class="quote">before</span>”</span> and <span class="quote">“<span class="quote">after</span>”</span> state. The snapshot is
       marked as important.
      </p></dd><dt id="id-1.3.3.11.12.5.5.7"><span class="term"><code class="command">snapper create --command <em class="replaceable">COMMAND</em>
     --description "Before and after COMMAND"</code>
     </span></dt><dd><p>
       Automatically creates a snapshot pair before and after running
       <em class="replaceable">COMMAND</em>. This option is only available when
       using snapper on the command line.
      </p></dd></dl></div></section><section class="sect2" id="sec-snapper-manage-modify" data-id-title="Modifying snapshot metadata"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.6.3 </span><span class="title-name">Modifying snapshot metadata</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-manage-modify">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Snapper allows you to modify the description, the cleanup algorithm, and
    the user data of a snapshot. All other metadata cannot be changed. The
    following examples explain how to modify snapshots from the command line.
    It should be easy to adopt them when using the YaST interface.
   </p><p>
    To modify a snapshot on the command line, you need to know its number. Use
    <code class="command">snapper list</code> to display all snapshots
    and their numbers.
   </p><p>
    The YaST <span class="guimenu">Snapper</span> module already lists all snapshots.
    Choose one from the list and click <span class="guimenu">Modify</span>.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.12.6.5.1"><span class="term"><code class="command">snapper modify --cleanup-algorithm "timeline"</code>
      10
     </span></dt><dd><p>
       Modifies the metadata of snapshot 10 for the default
       (<code class="literal">root</code>) configuration. The cleanup algorithm is set to
       <code class="literal">timeline</code>.
      </p></dd><dt id="id-1.3.3.11.12.6.5.2"><span class="term"><code class="command">snapper --config home modify --description "daily backup"
     -cleanup-algorithm "timeline" 120</code>
     </span></dt><dd><p>
       Modifies the metadata of snapshot 120 for a custom configuration named
       <code class="literal">home</code>. A new description is set and the cleanup
       algorithm is unset.
      </p></dd></dl></div></section><section class="sect2" id="sec-snapper-manage-delete" data-id-title="Deleting snapshots"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.6.4 </span><span class="title-name">Deleting snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-manage-delete">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To delete a snapshot with the YaST <span class="guimenu">Snapper</span> module,
    choose a snapshot from the list and click <span class="guimenu">Delete</span>.
   </p><p>
    To delete a snapshot with the command-line tool, you need to know its
    number. Get it by running <code class="command">snapper list</code>. To delete a
    snapshot, run <code class="command">snapper delete</code>
    <em class="replaceable">NUMBER</em>.
   </p><p>
    Deleting the current default subvolume snapshot is not allowed.
   </p><p>
    When deleting snapshots with Snapper, the freed space will be claimed by a
    Btrfs process running in the background. Thus the visibility and the
    availability of free space is delayed. In case you need space freed by
    deleting a snapshot to be available immediately, use the option
    <code class="option">--sync</code> with the delete command.
   </p><div id="id-1.3.3.11.12.7.6" data-id-title="Deleting snapshot pairs" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Deleting snapshot pairs</div><p>
     When deleting a <code class="literal">pre</code> snapshot, you should always delete
     its corresponding <code class="literal">post</code> snapshot (and vice versa).
    </p></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.12.7.7.1"><span class="term"><code class="command">snapper delete 65</code>
     </span></dt><dd><p>
       Deletes snapshot 65 for the default (<code class="literal">root</code>)
       configuration.
      </p></dd><dt id="id-1.3.3.11.12.7.7.2"><span class="term"><code class="command">snapper -c home delete 89 90</code>
     </span></dt><dd><p>
       Deletes snapshots 89 and 90 for a custom configuration named
       <code class="literal">home</code>.
      </p></dd><dt id="id-1.3.3.11.12.7.7.3"><span class="term"><code class="command">snapper delete --sync 23</code></span></dt><dd><p>
       Deletes snapshot 23 for the default (<code class="literal">root</code>)
       configuration and makes the freed space available immediately.
      </p></dd></dl></div><div id="id-1.3.3.11.12.7.8" data-id-title="Delete unreferenced snapshots" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Delete unreferenced snapshots</div><p>
     Sometimes the Btrfs snapshot is present but the XML file containing the
     metadata for Snapper is missing. In this case, the snapshot is not visible
     for Snapper and needs to be deleted manually:
    </p><div class="verbatim-wrap"><pre class="screen">btrfs subvolume delete /.snapshots/<em class="replaceable">SNAPSHOTNUMBER</em>/snapshot
rm -rf /.snapshots/SNAPSHOTNUMBER</pre></div></div><div id="id-1.3.3.11.12.7.9" data-id-title="Old snapshots occupy more disk space" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Old snapshots occupy more disk space</div><p>
     If you delete snapshots to free space on your hard disk, make sure to
     delete old snapshots first. The older a snapshot is, the more disk space
     it occupies.
    </p></div><p>
    Snapshots are also automatically deleted by a daily cron job. Refer to
    <a class="xref" href="#sec-snapper-manage-metadata-cleanup" title="10.6.1.2. Cleanup algorithms">Section 10.6.1.2, “Cleanup algorithms”</a> for details.
   </p></section></section><section class="sect1" id="sec-snapper-clean-up" data-id-title="Automatic snapshot clean-up"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.7 </span><span class="title-name">Automatic snapshot clean-up</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-clean-up">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Snapshots occupy disk space and over time the amount of disk space occupied
   by the snapshots may become large. To prevent disks from running out of
   space, Snapper offers algorithms to automatically delete old snapshots.
   These algorithms differentiate between timeline snapshots and numbered
   snapshots (administration plus installation snapshot pairs). You can specify
   the number of snapshots to keep for each type.
  </p><p>
   Additionally, you can optionally specify a disk space quota, defining
   the maximum amount of disk space the snapshots may occupy. It is also
   possible to automatically delete pre and post snapshots pairs that do not
   differ.
  </p><p>
   A clean-up algorithm is always bound to a single Snapper configuration, so
    you need to configure algorithms for each configuration. To prevent certain
    snapshots from being automatically deleted, refer to <a class="xref" href="#faq-snapper-permanent" title="Q:"><em>
      Can a snapshot be protected from deletion?
     </em></a>.
  </p><p>
   The default setup (<code class="literal">root</code>) is configured to do clean-up
   for numbered snapshots and empty pre and post snapshot pairs. Quota support
   is enabled—snapshots may not occupy more than 50% of the available
   disk space of the root partition. Timeline snapshots are disabled by
   default, therefore the timeline clean-up algorithm is also disabled.
  </p><section class="sect2" id="sec-snapper-clean-up-number" data-id-title="Cleaning up numbered snapshots"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.7.1 </span><span class="title-name">Cleaning up numbered snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-clean-up-number">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Cleaning up numbered snapshots—administration plus installation
    snapshot pairs—is controlled by the following parameters of a Snapper
    configuration.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.13.6.3.1"><span class="term"><code class="literal">NUMBER_CLEANUP</code>
     </span></dt><dd><p>
       Enables or disables clean-up of installation and admin snapshot pairs.
       If enabled, snapshot pairs are deleted when the total snapshot count
       exceeds a number specified with <code class="literal">NUMBER_LIMIT</code> and/or
       <code class="literal">NUMBER_LIMIT_IMPORTANT</code> <span class="emphasis"><em>and</em></span> an
       age specified with <code class="literal">NUMBER_MIN_AGE</code>. Valid values:
       <code class="literal">yes</code> (enable), <code class="literal">no</code> (disable).
      </p><p>
       The default value is <code class="literal">"yes"</code>.
      </p><p>
       Example command to change or set:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable">CONFIG</em> set-config "NUMBER_CLEANUP=no"</pre></div></dd><dt id="id-1.3.3.11.13.6.3.2"><span class="term"><code class="literal">NUMBER_LIMIT</code> /
      <code class="literal">NUMBER_LIMIT_IMPORTANT</code>
     </span></dt><dd><p>
       Defines how many regular and/or important installation and
       administration snapshot pairs to keep. Ignored if
       <code class="literal">NUMBER_CLEANUP</code> is set to
       <code class="literal">"no"</code>.
      </p><p>
       The default value is <code class="literal">"2-10"</code> for
       <code class="literal">NUMBER_LIMIT</code> and <code class="literal">"4-10"</code>
       for <code class="literal">NUMBER_LIMIT_IMPORTANT</code>. The cleaning
       algorithms delete snapshots above the specified maximum value,
       without taking the snapshot and file system space into
       account. The algorithms also delete snapshots above the minimum
       value until the limits for the snapshot and file system are
       reached.
      </p><p>
       Example command to change or set:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable">CONFIG</em> set-config "NUMBER_LIMIT=10"</pre></div><div id="id-1.3.3.11.13.6.3.2.2.5" data-id-title="Ranged compared to constant values" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Ranged compared to constant values</div><p>
        If quota support is enabled (see
        <a class="xref" href="#sec-snapper-clean-up-quota" title="10.7.5. Adding disk quota support">Section 10.7.5, “Adding disk quota support”</a>), the limit needs
        to be specified as a minimum-maximum range, for example,
        <code class="literal">2-10</code>. If quota support is disabled, a constant
        value, for example, <code class="literal">10</code>, needs to be provided,
        otherwise cleaning up  fails with an error.
       </p></div></dd><dt id="id-1.3.3.11.13.6.3.3"><span class="term"><code class="literal">NUMBER_MIN_AGE</code>
     </span></dt><dd><p>
       Defines the minimum age in seconds a snapshot must have before it can
       automatically be deleted. Snapshots younger than the value specified
       here will not be deleted, regardless of how many exist.
      </p><p>
       The default value is <code class="literal">"1800"</code>.
      </p><p>
       Example command to change or set:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable">CONFIG</em> set-config "NUMBER_MIN_AGE=864000"</pre></div></dd></dl></div><div id="id-1.3.3.11.13.6.4" data-id-title="Limit and age" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Limit and age</div><p>
     <code class="literal">NUMBER_LIMIT</code>, <code class="literal">NUMBER_LIMIT_IMPORTANT</code>
     and <code class="literal">NUMBER_MIN_AGE</code> are always evaluated. Snapshots are
     only deleted when <span class="emphasis"><em>all</em></span> conditions are met.
    </p><p>
     If you always want to keep the number of snapshots defined with
     <code class="literal">NUMBER_LIMIT*</code> regardless of their age, set
     <code class="literal">NUMBER_MIN_AGE</code> to <code class="literal">0</code>.
    </p><p>
     The following example shows a configuration to keep the last 10 important
     and regular snapshots regardless of age:
    </p><div class="verbatim-wrap"><pre class="screen">NUMBER_CLEANUP=yes
NUMBER_LIMIT_IMPORTANT=10
NUMBER_LIMIT=10
NUMBER_MIN_AGE=0</pre></div><p>
     If you do not want to keep snapshots beyond a certain
     age, set <code class="literal">NUMBER_LIMIT*</code> to <code class="literal">0</code> and
     provide the age with <code class="literal">NUMBER_MIN_AGE</code>.
    </p><p>
     The following example shows a configuration to only keep snapshots younger
     than ten days:
    </p><div class="verbatim-wrap"><pre class="screen">NUMBER_CLEANUP=yes
NUMBER_LIMIT_IMPORTANT=0
NUMBER_LIMIT=0
NUMBER_MIN_AGE=864000</pre></div></div></section><section class="sect2" id="sec-snapper-clean-up-timeline" data-id-title="Cleaning up timeline snapshots"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.7.2 </span><span class="title-name">Cleaning up timeline snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-clean-up-timeline">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Cleaning up timeline snapshots is controlled by the following
    parameters of a Snapper configuration.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.13.7.3.1"><span class="term"><code class="literal">TIMELINE_CLEANUP</code>
     </span></dt><dd><p>
       Enables or disables clean-up of timeline snapshots. If enabled,
       snapshots are deleted when the total snapshot count exceeds a number
       specified with <code class="literal">TIMELINE_LIMIT_*</code>
       <span class="emphasis"><em>and</em></span> an age specified with
       <code class="literal">TIMELINE_MIN_AGE</code>. Valid values:
       <code class="literal">yes</code>, <code class="literal">no</code>.
      </p><p>
       The default value is <code class="literal">"yes"</code>.
      </p><p>
       Example command to change or set:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable">CONFIG</em> set-config "TIMELINE_CLEANUP=yes"</pre></div></dd><dt id="id-1.3.3.11.13.7.3.2"><span class="term"><code class="literal">TIMELINE_LIMIT_DAILY</code>,
      <code class="literal">TIMELINE_LIMIT_HOURLY</code>,
      <code class="literal">TIMELINE_LIMIT_MONTHLY</code>,
      <code class="literal">TIMELINE_LIMIT_WEEKLY</code>,
      <code class="literal">TIMELINE_LIMIT_YEARLY</code>
     </span></dt><dd><p>
       Number of snapshots to keep for hour, day, month, week and year.
      </p><p>
       The default value for each entry is <code class="literal">"10"</code>, except for
       <code class="literal">TIMELINE_LIMIT_WEEKLY</code>, which is set to
       <code class="literal">"0"</code> by default.
      </p></dd><dt id="id-1.3.3.11.13.7.3.3"><span class="term"><code class="literal">TIMELINE_MIN_AGE</code>
     </span></dt><dd><p>
       Defines the minimum age in seconds a snapshot must have before it can
       automatically be deleted.
      </p><p>
       The default value is <code class="literal">"1800"</code>.
      </p></dd></dl></div><div class="complex-example"><div class="example" id="ex-snapper-config-timeline" data-id-title="Example timeline configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 10.1: </span><span class="title-name">Example timeline configuration </span></span><a title="Permalink" class="permalink" href="#ex-snapper-config-timeline">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">TIMELINE_CLEANUP="yes"
TIMELINE_CREATE="yes"
TIMELINE_LIMIT_DAILY="7"
TIMELINE_LIMIT_HOURLY="24"
TIMELINE_LIMIT_MONTHLY="12"
TIMELINE_LIMIT_WEEKLY="4"
TIMELINE_LIMIT_YEARLY="2"
TIMELINE_MIN_AGE="1800"</pre></div><p>
     This example configuration enables hourly snapshots which are
     automatically cleaned up. <code class="literal">TIMELINE_MIN_AGE</code> and
     <code class="literal">TIMELINE_LIMIT_*</code> are always both evaluated. In this
     example, the minimum age of a snapshot before it can be deleted is set to
     30 minutes (1800 seconds). Since we create hourly snapshots, this ensures
     that only the latest snapshots are kept. If
     <code class="literal">TIMELINE_LIMIT_DAILY</code> is set to not zero, this means
     that the first snapshot of the day is kept, too.
    </p><div class="itemizedlist"><div class="title-container"><div class="itemizedlist-title-wrap"><div class="itemizedlist-title"><span class="title-number-name"><span class="title-name">Snapshots to be kept </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.11.13.7.4.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div><ul class="itemizedlist"><li class="listitem"><p>
       Hourly: the last 24 snapshots that have been made.
      </p></li><li class="listitem"><p>
       Daily: the first daily snapshot that has been made is kept from the last
       seven days.
      </p></li><li class="listitem"><p>
       Monthly: the first snapshot made on the last day of the month is kept
       for the last twelve months.
      </p></li><li class="listitem"><p>
       Weekly: the first snapshot made on the last day of the week is kept from
       the last four weeks.
      </p></li><li class="listitem"><p>
       Yearly: the first snapshot made on the last day of the year is kept for
       the last two years.
      </p></li></ul></div></div></div></div></section><section class="sect2" id="sec-snapper-clean-up-empty" data-id-title="Cleaning up snapshot pairs that do not differ"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.7.3 </span><span class="title-name">Cleaning up snapshot pairs that do not differ</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-clean-up-empty">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    As explained in <a class="xref" href="#snapper-snapshot-type" title="10.1.2. Types of snapshots">Section 10.1.2, “Types of snapshots”</a>, whenever you run a
    YaST module or execute Zypper, a pre snapshot is created on start-up and
    a post snapshot is created when exiting. In case you have not made any
    changes there will be no difference between the pre and post snapshots.
    Such <span class="quote">“<span class="quote">empty</span>”</span> snapshot pairs can be automatically be deleted by
    setting the following parameters in a Snapper configuration:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.13.8.3.1"><span class="term"><code class="literal">EMPTY_PRE_POST_CLEANUP</code>
     </span></dt><dd><p>
       If set to <code class="literal">yes</code>, pre and post snapshot pairs that do
       not differ will be deleted.
      </p><p>
       The default value is <code class="literal">"yes"</code>.
      </p></dd><dt id="id-1.3.3.11.13.8.3.2"><span class="term"><code class="literal">EMPTY_PRE_POST_MIN_AGE</code>
     </span></dt><dd><p>
       Defines the minimum age in seconds a pre and post snapshot pair that
       does not differ must have before it can automatically be deleted.
      </p><p>
       The default value is <code class="literal">"1800"</code>.
      </p></dd></dl></div></section><section class="sect2" id="sec-snapper-clean-up-manual" data-id-title="Cleaning up manually created snapshots"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.7.4 </span><span class="title-name">Cleaning up manually created snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-clean-up-manual">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Snapper does not offer custom clean-up algorithms for manually created
    snapshots. However, you can assign the number or timeline clean-up
    algorithm to a manually created snapshot. If you do so, the snapshot will
    join the <span class="quote">“<span class="quote">clean-up queue</span>”</span> for the algorithm you specified.
    You can specify a clean-up algorithm when creating a snapshot, or by
    modifying an existing snapshot:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.13.9.3.1"><span class="term"><code class="command">snapper create --description "Test" --cleanup-algorithm number</code>
     </span></dt><dd><p>
       Creates a stand-alone snapshot (type single) for the default (root)
       configuration and assigns the <code class="literal">number</code> clean-up
       algorithm.
      </p></dd><dt id="id-1.3.3.11.13.9.3.2"><span class="term"><code class="command">snapper modify --cleanup-algorithm "timeline" 25</code>
     </span></dt><dd><p>
       Modifies the snapshot with the number 25 and assigns the clean-up
       algorithm <code class="literal">timeline</code>.
      </p></dd></dl></div></section><section class="sect2" id="sec-snapper-clean-up-quota" data-id-title="Adding disk quota support"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.7.5 </span><span class="title-name">Adding disk quota support</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-clean-up-quota">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In addition to the number and/or timeline clean-up algorithms described
    above, Snapper supports quotas. You can define what percentage of the
    available space snapshots are allowed to occupy. This percentage value
    always applies to the Btrfs subvolume defined in the respective Snapper
    configuration.
   </p><p> 
       Btrfs quotas are applied to subvolumes, not to users. You may apply 
       disk space quotas to users and groups (for example, with the 
       <code class="command">quota</code> command) in addition to using Btrfs quotas.
   </p><p>
    If Snapper was enabled during the installation, quota support is
    automatically enabled. In case you manually enable Snapper at a later point
    in time, you can enable quota support by running <code class="command">snapper
    setup-quota</code>. This requires a valid configuration (see
    <a class="xref" href="#sec-snapper-config" title="10.5. Creating and modifying Snapper configurations">Section 10.5, “Creating and modifying Snapper configurations”</a> for more information).
   </p><p>
    Quota support is controlled by the following parameters of a Snapper
    configuration.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.11.13.10.6.1"><span class="term"><code class="literal">QGROUP</code>
     </span></dt><dd><p>
       The Btrfs quota group used by Snapper. If not set, run <code class="command">snapper
       setup-quota</code>. If already set, only change if you are familiar
       with <code class="command">man 8 btrfs-qgroup</code>. This value is set with
       <code class="command">snapper setup-quota</code> and should not be changed.
      </p></dd><dt id="id-1.3.3.11.13.10.6.2"><span class="term"><code class="literal">SPACE_LIMIT</code>
     </span></dt><dd><p>
       Limit of space snapshots are allowed to use in fractions of 1 (100%).
       Valid values range from 0 to 1 (0.1 = 10%, 0.2 = 20%, ...).
      </p></dd></dl></div><p>
    The following limitations and guidelines apply:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Quotas are only activated in <span class="emphasis"><em>addition</em></span> to an existing
      number and/or timeline clean-up algorithm. If no clean-up algorithm is
      active, quota restrictions are not applied.
     </p></li><li class="listitem"><p>
      With quota support enabled, Snapper will perform two clean-up runs if
      required. The first run will apply the rules specified for number and
      timeline snapshots. Only if the quota is exceeded after this run, the
      quota-specific rules will be applied in a second run.
     </p></li><li class="listitem"><p>
      Even if quota support is enabled, Snapper will always keep the number of
      snapshots specified with the <code class="literal">NUMBER_LIMIT*</code> and
      <code class="literal">TIMELINE_LIMIT*</code> values, even if the quota will be
      exceeded. It is therefore recommended to specify ranged values
      (<code class="literal"><em class="replaceable">MIN</em>-<em class="replaceable">MAX</em></code>)
      for <code class="literal">NUMBER_LIMIT*</code> and
      <code class="literal">TIMELINE_LIMIT*</code> to ensure the quota can be applied.
     </p><p>
      If, for example, <code class="literal">NUMBER_LIMIT=5-20</code> is set, Snapper
      will perform a first clean-up run and reduce the number of regular
      numbered snapshots to 20. In case these 20 snapshots exceed the
      quota, Snapper will delete the oldest ones in a second run until the
      quota is met. A minimum of five snapshots will always be kept, regardless
      of the amount of space they occupy.
     </p></li></ul></div></section></section><section class="sect1" id="id-1.3.3.11.14" data-id-title="Showing exclusive disk space used by snapshots"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.8 </span><span class="title-name">Showing exclusive disk space used by snapshots</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.11.14">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Snapshots share data, for efficient use of storage space, so using ordinary
      commands like <code class="command">du</code> and <code class="command">df</code> will not measure
      used disk space accurately. When you want to free up disk space on Btrfs 
      with quotas enabled, you need to know how much exclusive disk space is 
      used by each snapshot, rather than shared space. Snapper 0.6 and up reports 
      the used disk space for each snapshot in the
    <code class="literal">Used Space</code> column:
</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>snapper --iso list
  # | Type   | Pre # | Date                | User | Used Space | Cleanup | Description           | Userdata     
----+--------+-------+---------------------+------+------------+---------+-----------------------+--------------
 0  | single |       |                     | root |            |         | current               |              
 1* | single |       | 2019-07-22 13:08:38 | root |  16.00 KiB |         | first root filesystem |              
 2  | single |       | 2019-07-22 14:21:05 | root |  14.23 MiB | number  | after installation    | important=yes
 3  | pre    |       | 2019-07-22 14:26:03 | root | 144.00 KiB | number  | zypp(zypper)          | important=no 
 4  | post   |     3 | 2019-07-22 14:26:04 | root | 112.00 KiB | number  |                       | important=no 
 5  | pre    |       | 2019-07-23 08:19:36 | root | 128.00 KiB | number  | zypp(zypper)          | important=no 
 6  | post   |     5 | 2019-07-23 08:19:43 | root |  80.00 KiB | number  |                       | important=no 
 7  | pre    |       | 2019-07-23 08:20:50 | root | 256.00 KiB | number  | yast sw_single        |              
 8  | pre    |       | 2019-07-23 08:23:22 | root | 112.00 KiB | number  | zypp(ruby.ruby2.5)    | important=no 
 9  | post   |     8 | 2019-07-23 08:23:35 | root |  64.00 KiB | number  |                       | important=no 
10  | post   |     7 | 2019-07-23 08:24:05 | root |  16.00 KiB | number  |                       |</pre></div><p>
    The <code class="command">btrfs</code> command provides another view of space used by 
    snapshots:
</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>btrfs qgroup show -p /
qgroupid         rfer         excl parent  
--------         ----         ---- ------  
0/5          16.00KiB     16.00KiB ---     
[...]    
0/272         3.09GiB     14.23MiB 1/0     
0/273         3.11GiB    144.00KiB 1/0     
0/274         3.11GiB    112.00KiB 1/0     
0/275         3.11GiB    128.00KiB 1/0     
0/276         3.11GiB     80.00KiB 1/0     
0/277         3.11GiB    256.00KiB 1/0     
0/278         3.11GiB    112.00KiB 1/0     
0/279         3.12GiB     64.00KiB 1/0     
0/280         3.12GiB     16.00KiB 1/0     
1/0           3.33GiB    222.95MiB ---</pre></div><p>
    The <code class="literal">qgroupid</code> column displays the identification number for
    each subvolume, assigning a qgroup level/ID combination.
</p><p>
    The <code class="literal">rfer</code> column displays the total amount of data 
    referred to in the subvolume.
</p><p>
    The <code class="literal">excl</code> column displays the exclusive data in each
    subvolume. 
</p><p>
    The <code class="literal">parent</code> column shows the parent qgroup of the subvolumes.
</p><p>    
    The final item, <code class="literal">1/0</code>, shows the totals for the parent 
    qgroup. In the above example, 222.95 MiB will be freed if all subvolumes
    are removed. Run the following command to see which snapshots are associated
    with each subvolume:
</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>btrfs subvolume list -st /
ID	gen	top level	path	
--	---	---------	----	
267	298	266		@/.snapshots/1/snapshot
272	159	266		@/.snapshots/2/snapshot
273	170	266		@/.snapshots/3/snapshot
274	171	266		@/.snapshots/4/snapshot
275	287	266		@/.snapshots/5/snapshot
276	288	266		@/.snapshots/6/snapshot
277	292	266		@/.snapshots/7/snapshot
278	296	266		@/.snapshots/8/snapshot
279	297	266		@/.snapshots/9/snapshot
280	298	266		@/.snapshots/10/snapshot</pre></div><p>
      Doing an upgrade from one service pack to another results in snapshots
      occupying a lot of disk space on the system subvolumes. Manually deleting 
      these snapshots after they are no longer needed is recommended. See
      <a class="xref" href="#sec-snapper-manage-delete" title="10.6.4. Deleting snapshots">Section 10.6.4, “Deleting snapshots”</a> for details.
     </p></section><section class="sect1" id="sec-snapper-faqs" data-id-title="Frequently asked questions"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.9 </span><span class="title-name">Frequently asked questions</span></span> <a title="Permalink" class="permalink" href="#sec-snapper-faqs">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/snapper.xml" title="Edit source document"> </a></div></div></div></div></div><div class="qandaset" id="id-1.3.3.11.15.2"><div class="free-id" id="id-1.3.3.11.15.2.1"> </div><dl class="qandaentry"><dt class="question" id="id-1.3.3.11.15.2.1.1"><strong>Q:</strong>
      Why does Snapper never show changes in <code class="filename">/var/log</code>,
      <code class="filename">/tmp</code> and other directories?
     </dt><dd class="answer" id="id-1.3.3.11.15.2.1.2"><p>
      For certain directories, we decided to exclude them from snapshots. See
      <a class="xref" href="#snapper-dir-excludes" title="10.1.3. Directories that are excluded from snapshots">Section 10.1.3, “Directories that are excluded from snapshots”</a> for a list and reasons. To exclude
      a path from snapshots we create a subvolume for that path.
     </p></dd></dl><div class="free-id" id="id-1.3.3.11.15.2.2"> </div><dl class="qandaentry"><dt class="question" id="id-1.3.3.11.15.2.2.1"><strong>Q:</strong>
      Can I boot a snapshot from the boot loader?
     </dt><dd class="answer" id="id-1.3.3.11.15.2.2.2"><p>
      Yes—refer to <a class="xref" href="#sec-snapper-snapshot-boot" title="10.3. System rollback by booting from snapshots">Section 10.3, “System rollback by booting from snapshots”</a> for
      details.
     </p></dd></dl><div class="free-id" id="faq-snapper-permanent"> </div><dl class="qandaentry"><dt class="question" id="id-1.3.3.11.15.2.3.1"><strong>Q:</strong>
      Can a snapshot be protected from deletion?
     </dt><dd class="answer" id="id-1.3.3.11.15.2.3.2"><p>
      Currently Snapper does not offer means to prevent a snapshot from being
      deleted manually. However, you can prevent snapshots from being
      automatically deleted by clean-up algorithms. Manually created snapshots
      (see <a class="xref" href="#sec-snapper-manage-create" title="10.6.2. Creating snapshots">Section 10.6.2, “Creating snapshots”</a>) have no clean-up
      algorithm assigned unless you specify one with
      <code class="option">--cleanup-algorithm</code>. Automatically created snapshots
      always either have the <code class="literal">number</code> or
      <code class="literal">timeline</code> algorithm assigned. To remove such an
      assignment from one or more snapshots, proceed as follows:
     </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
        List all available snapshots:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper list -a</pre></div></li><li class="step"><p>
        Memorize the number of the snapshots you want to prevent from being
        deleted.
       </p></li><li class="step"><p>
        Run the following command and replace the number placeholders with the
        numbers you memorized:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> snapper modify --cleanup-algorithm "" <em class="replaceable">#1</em> <em class="replaceable">#2</em> <em class="replaceable">#n</em></pre></div></li><li class="step"><p>
        Check the result by running <code class="command">snapper list -a</code> again.
        The entry in the column <code class="literal">Cleanup</code> should now be empty
        for the snapshots you modified.
       </p></li></ol></div></div></dd></dl><div class="free-id" id="id-1.3.3.11.15.2.4"> </div><dl class="qandaentry"><dt class="question" id="id-1.3.3.11.15.2.4.1"><strong>Q:</strong>
      Where can I get more information on Snapper?
     </dt><dd class="answer" id="id-1.3.3.11.15.2.4.2"><p>
      See the Snapper home page at <a class="link" href="http://snapper.io/" target="_blank">http://snapper.io/</a>.
     </p></dd></dl></div></section></section><section xml:lang="en" class="chapter" id="cha-klp" data-id-title="Live kernel patching with KLP"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">11 </span><span class="title-name">Live kernel patching with KLP</span></span> <a title="Permalink" class="permalink" href="#cha-klp">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    This document describes the basic principles of the Kernel Live Patching (KLP)
    technology, and provides usage guidelines for the SLE Live Patching
    service.
   </p></div></div></div></div><p>
  KLP makes it possible to apply the latest security updates to Linux
  kernels without rebooting. This maximizes system uptime and availability,
  which is especially important for mission-critical systems.
 </p><p>
  The information provided in this document relates to the AMD64/Intel 64,
  POWER, and IBM Z architectures.
 </p><section class="sect1" id="sec-klp-advantages" data-id-title="Advantages of Kernel Live Patching"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">11.1 </span><span class="title-name">Advantages of Kernel Live Patching</span></span> <a title="Permalink" class="permalink" href="#sec-klp-advantages">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   KLP offers several benefits.
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Keeping a large number of servers automatically up to date is essential
     for organizations obtaining or maintaining certain compliance
     certifications. KLP can help achieve compliance, while reducing the
     need for costly maintenance windows.
    </p></li><li class="listitem"><p>
     Companies that work with service-level agreement contracts must guarantee
     a specific level of their system accessibility and uptime. Live patching
     makes it possible to patch systems without incurring downtime.
    </p></li><li class="listitem"><p>
     Since KLP is part of the standard system update mechanism, there is no
     need for specialized training or introduction of complicated maintenance
     routines.
    </p></li></ul></div></section><section class="sect1" id="sec-klp-overview" data-id-title="Kernel Live Patching overview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">11.2 </span><span class="title-name">Kernel Live Patching overview</span></span> <a title="Permalink" class="permalink" href="#sec-klp-overview">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Kernel live patches are delivered as packages with modified code that are
   separate from the main kernel package. The live patches are cumulative, so
   the latest patch contains all fixes from the previous ones for the kernel
   package. Each kernel live package is tied to the exact kernel revision for
   which it is issued. The live patch package version number increases with
   every addition of fixes.
  </p><div id="id-1.3.3.12.6.3" data-id-title="Live patches and the running kernel" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Live patches and the running kernel</div><p>
      To determine the kernel patching status, use the <code class="command">klp -v
      patches</code> command. The <code class="command">uname</code> command's output
      does not change for patched kernels.
    </p></div><div id="id-1.3.3.12.6.4" data-id-title="Live patches compared to kernel updates" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Live patches compared to kernel updates</div><p>
    Live patches contain only critical fixes, and they do not replace regular
    kernel updates that require a reboot. Consider live patches as temporary
    measures that protect the kernel until a proper kernel update and a reboot
    are performed.
   </p></div><p>
   The diagram below illustrates the overall relationship between live patches
   and kernel updates. The list of CVEs and defect reports addressed by the
   currently active live patch can be viewed using the <code class="command">klp -v
   patches</code> command.
  </p><div class="informalfigure"><div class="mediaobject"><a href="images/klp.png"><img src="images/klp.png" width="100%" alt="Image" title="Image"/></a></div></div><p>
   It is possible to have multiple versions of the kernel package installed
   along with their live patches. These packages do not conflict. You can
   install updated kernel packages along with live patches for the running
   kernel. In this case, you may be prompted to reboot the system. Users with
   SLE Live Patching subscriptions are eligible for technical support as
   long as there are live patch updates for the running kernel (see
   <a class="xref" href="#sec-klp-lifecycle" title="11.5.1. Checking expiration date of the live patch">Section 11.5.1, “Checking expiration date of the live patch”</a>).
  </p><p>
   With KLP activated, every kernel update comes with a live patch package.
   This live patch does not contain any fixes and serves as a seed for future
   live patches for the corresponding kernel. These empty seed patches are
   called <code class="literal">initial patches</code>.
  </p><section class="sect2" id="sec-klp-scope" data-id-title="Kernel Live Patching scope"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">11.2.1 </span><span class="title-name">Kernel Live Patching scope</span></span> <a title="Permalink" class="permalink" href="#sec-klp-scope">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The scope of SLE Live Patching includes fixes for SUSE Common
    Vulnerability Scoring System (CVSS; SUSE CVSS is based on the CVSS v3.1
    system) level 7+ vulnerabilities and bug fixes related to system stability
    or data corruption. However, it may not be technically feasible to create
    live patches for all fixes that fall under the specified categories. SUSE
    therefore reserves the right to skip fixes in situations where creating a
    kernel live patch is not possible for technical reasons. Currently, over
    95% of qualifying fixes are released as live patches. For more information
    on CVSS (the base for the SUSE CVSS rating), see
    <a class="link" href="https://www.first.org/cvss/" target="_blank">Common Vulnerability Scoring
    System SIG</a>.
   </p></section><section class="sect2" id="sec-klp-limitations" data-id-title="Kernel Live Patching limitations"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">11.2.2 </span><span class="title-name">Kernel Live Patching limitations</span></span> <a title="Permalink" class="permalink" href="#sec-klp-limitations">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    KLP involves replacing functions and gracefully handling replacement of
    interdependent function sets. This is done by redirecting calls to old code
    to updated code in a different memory location. Changes in data structures
    make the situation more complicated, as the data remain in place and cannot
    be extended or reinterpreted. While there are techniques that allow
    indirect alteration of data structures, certain fixes cannot be converted to
    live patches. In this situation, a system restart is the only way to apply
    the fixes.
   </p></section></section><section class="sect1" id="sec-klp-enable-with-yast2" data-id-title="Activating Kernel Live Patching using YaST"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">11.3 </span><span class="title-name">Activating Kernel Live Patching using YaST</span></span> <a title="Permalink" class="permalink" href="#sec-klp-enable-with-yast2">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To activate KLP on your system, you need to have active SLES and SLE
   Live Patching subscriptions. Visit
   <a class="link" href="https://scc.suse.com/" target="_blank">SUSE Customer Center</a> to check the status of your
   subscriptions and obtain a registration code for the SLE Live Patching
   subscription.
  </p><p>
   To activate Kernel Live Patching on your system, follow these steps:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Run the <code class="command">yast2 registration</code> command and click
     <span class="guimenu">Select Extensions</span>.
    </p></li><li class="step"><p>
     Select <span class="guimenu">SUSE Linux Enterprise Live Patching 15</span> in the
     list of available extensions and click <span class="guimenu">Next</span>.
    </p></li><li class="step"><p>
     Confirm the license terms and click <span class="guimenu">Next</span>.
    </p></li><li class="step"><p>
     Enter your SLE Live Patching registration code and click
     <span class="guimenu">Next</span>.
    </p></li><li class="step"><p>
     Check the <span class="guimenu">Installation Summary</span> and selected
     <span class="guimenu">Patterns</span>. The patterns <code class="systemitem">Live
     Patching</code> and <code class="systemitem">SLE Live Patching Lifecycle
     Data</code> should be automatically selected for installation along
     with additional packages to satisfy dependencies.
    </p></li><li class="step"><p>
     Click <span class="guimenu">Accept</span> to complete the installation. This
     installs the base Kernel Live Patching components on your system, the initial live patch,
     and the required dependencies.
    </p></li></ol></div></div></section><section class="sect1" id="sec-klp-enable-cli" data-id-title="Activating Kernel Live Patching from the command line"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">11.4 </span><span class="title-name">Activating Kernel Live Patching from the command line</span></span> <a title="Permalink" class="permalink" href="#sec-klp-enable-cli">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To activate Kernel Live Patching, you need to have active SLES and SLES Live Patching
   subscriptions. Visit <a class="link" href="https://scc.suse.com/" target="_blank">SUSE Customer Center</a> to check the
   status of your subscriptions and obtain a registration code for the SLES
   Live Patching subscription.
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Run <code class="command">sudo SUSEConnect --list-extensions</code>. Note the exact
     activation command for SLES Live Patching. Example command output
     (abbreviated):
    </p><div class="verbatim-wrap"><pre class="screen">$ SUSEConnect --list-extensions
...
SUSE Linux Enterprise Live Patching <span class="productnumber"><span class="phrase">15 SP6</span></span> x86_64
Activate with: SUSEConnect -p sle-module-live-patching/15.6/x86_64 \
  -r ADDITIONAL REGCODE</pre></div></li><li class="step"><p>
     Activate SLES Live Patching using the obtained command followed by
     <code class="option">-r
     <em class="replaceable">LIVE_PATCHING_REGISTRATION_CODE</em></code>, for
     example:
    </p><div class="verbatim-wrap"><pre class="screen">SUSEConnect -p sle-module-live-patching/15.6/x86_64 \
  -r <em class="replaceable">LIVE_PATCHING_REGISTRATION_CODE</em></pre></div></li><li class="step"><p>
     Install the required packages and dependencies using the command
     <code class="command">zypper install -t pattern lp_sles</code>
    </p></li></ol></div></div><p>
   At this point, the system has already been live-patched.
  </p><p>
   Here is how the process works behind the scenes: when the
   package installation system detects that there is an installed kernel that
   can be live-patched, and that there is a live patch for it in the software
   channel, the system selects the live patch for installation. The kernel then
   receives the live patch fixes <span class="emphasis"><em>as part of the package
   installation</em></span>. The kernel gets live-patched even before the
   product installation is complete.
  </p></section><section class="sect1" id="sec-klp-perform" data-id-title="Performing Kernel Live Patching"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">11.5 </span><span class="title-name">Performing Kernel Live Patching</span></span> <a title="Permalink" class="permalink" href="#sec-klp-perform">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Kernel live patches are installed as part of regular system updates.
   However, there are several things you should be aware of.
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     The kernel is live-patched if a <span class="package">kernel-livepatch-*</span>
     package has been installed for the running kernel. You can use the command
     <code class="command">zypper se --details kernel-livepatch-*</code> to check what
     kernel live patch packages are installed on your system.
    </p></li><li class="listitem"><p>
     When the <span class="package">kernel-default</span> package is installed, the update
     manager prompts you to reboot the system. To prevent this message from
     appearing, you can filter out kernel updates from the patching operation.
     This can be done by adding package locks with Zypper. SUSE Manager also makes
     it possible to filter channel contents (see
     <a class="link" href="https://documentation.suse.com/suma/4.3/en/suse-manager/administration/live-patching.html" target="_blank">Live
     Patching with SUSE Manager</a>).
    </p></li><li class="listitem"><p>
     You can check patching status using the <code class="command">klp status</code>
     command. To examine installed patches, run the <code class="command">klp -v
     patches</code> command.
    </p></li><li class="listitem"><p>
     Keep in mind that while there may be multiple kernel packages installed on
     the system, only one of them is running at any given time. Similarly,
     there may be multiple live patch packages installed, but only one live
     patch is loaded into the kernel.
    </p></li><li class="listitem"><p>
     The active live patch is included in the <code class="literal">initrd</code>. This
     means that in case of an unexpected reboot, the system comes up with the
     live patch fixes applied, so there is no need to perform patching again.
    </p></li></ul></div><section class="sect2" id="sec-klp-lifecycle" data-id-title="Checking expiration date of the live patch"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">11.5.1 </span><span class="title-name">Checking expiration date of the live patch</span></span> <a title="Permalink" class="permalink" href="#sec-klp-lifecycle">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Make sure that the
    <span class="package">lifecycle-data-sle-module-live-patching</span> is installed,
    then run the <code class="command">zypper lifecycle</code> command. You should see
    expiration dates for live patches in the <code class="literal">Package end of support if
    different from product</code> section of the output.
   </p><p>
    Every live patch receives updates for one year from the release of the
    underlying kernel package. The
    <a class="link" href="https://www.suse.com/products/live-patching/current-patches/" target="_blank">Maintained
    kernels, patch updates and lifecycle</a> page allows you to check
    expiration dates based on the running kernel version without installing the
    product extension.
   </p></section></section><section class="sect1" id="sec-klp-troubleshoot" data-id-title="Troubleshooting Kernel Live Patching issues"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">11.6 </span><span class="title-name">Troubleshooting Kernel Live Patching issues</span></span> <a title="Permalink" class="permalink" href="#sec-klp-troubleshoot">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect2" id="sec-klp-man-patch-downgrade" data-id-title="Manual patch downgrade"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">11.6.1 </span><span class="title-name">Manual patch downgrade</span></span> <a title="Permalink" class="permalink" href="#sec-klp-man-patch-downgrade">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you find the latest live patch problematic, you can downgrade the
    currently installed live patch back to its previous version. We recommend
    performing patch downgrade before the system starts exhibiting issues. Keep
    in mind that a system with kernel warnings or kernel error traces in the
    system log may not be suitable for the patch downgrade procedure. If you
    are unsure whether the system meets the requirements for a patch downgrade,
    contact SUSE Technical Support for help.
   </p><div class="procedure" id="id-1.3.3.12.10.2.3" data-id-title="Manual patch downgrade"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 11.1: </span><span class="title-name">Manual patch downgrade </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.12.10.2.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/klp.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Identify the running live patch using the <code class="command">klp -v
      patches</code> command. You can see the currently running patch on the
      line starting with <code class="literal">RPM:</code>. For example:
     </p><div class="verbatim-wrap"><pre class="screen">RPM: kernel-livepatch-6_4_0-150600_9-default-1-150600.2.36.x86_64</pre></div><p>
      The <code class="literal">6_4_0-150600_9-default</code> in the example above denotes
      the exact running kernel version.
     </p></li><li class="step"><p>
      Use the command <code class="command">zypper search -s
      kernel-livepatch-<em class="replaceable">RUNNING_KERNEL_VERSION</em>-default</code>
      to search for previous versions of the patch. The command returns a list
      of available package versions. Keep in mind that for every new live patch
      package release, the version number increases by one. Make sure that you
      choose the version number one release lower than the current one.
     </p></li><li class="step"><p>
      Install the desired version with the command <code class="command">zypper in
      --oldpackage
      kernel-livepatch-<em class="replaceable">RUNNING_KERNEL_VERSION</em>-default=<em class="replaceable">DESIRED_VERSION</em></code>.
     </p></li></ol></div></div></section></section></section><section xml:lang="en" class="chapter" id="cha-ulp" data-id-title="User space live patching"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">12 </span><span class="title-name">User space live patching</span></span> <a title="Permalink" class="permalink" href="#cha-ulp">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
        This chapter describes the basic principles and usage of user space
        live patching.
      </p></div></div></div></div><section class="sect1" id="sec-ulp" data-id-title="About user space live patching"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">12.1 </span><span class="title-name">About user space live patching</span></span> <a title="Permalink" class="permalink" href="#sec-ulp">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      User space live patching (ULP) refers to the process of applying
      patches to the libraries used by a running process without interrupting
      them. Every time a security fix is available as a live patch, customer
      services will be secured after applying the live patch without restarting
      the processes.
    </p><p>
      Live patching operations are performed using the
      <code class="systemitem">ulp</code> tool that is part of
      <code class="systemitem">libpulp</code>. <code class="systemitem">libpulp</code> is a
      framework that consists of the <code class="systemitem">libpulp.so</code>
      library and the <code class="command">ulp</code> binary that makes libraries live
      patchable and applies live patches.
    </p><div id="id-1.3.3.13.3.4" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
        You can run the <code class="command">ulp</code> command either as a normal user
        or a privileged user via the <code class="command">sudo</code> mechanism. The difference is that
        running <code class="command">ulp</code> via <code class="command">sudo</code> lets you view information of
        processes or patch processes that are running by <code class="systemitem">root</code>.
      </p></div><div id="id-1.3.3.13.3.5" data-id-title="Install libpulp-load-default" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Install <span class="package">libpulp-load-default</span></div><p>
        Since SUSE Linux Enterprise Server SP6, the <span class="package">libpulp-load-default</span> is
        available that automates the requirements and manual steps mentioned in
        <a class="xref" href="#sec-ulp-prereqs" title="12.1.1. Prerequisites">Section 12.1.1, “Prerequisites”</a> and <a class="xref" href="#sec-ulp-libpulp" title="12.1.3. Using libpulp">Section 12.1.3, “Using <code class="systemitem">libpulp</code>”</a>.
        If you install the package, you can skip those sections.
      </p></div><section class="sect2" id="sec-ulp-prereqs" data-id-title="Prerequisites"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.1.1 </span><span class="title-name">Prerequisites</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-prereqs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        For ULP to work, two requirements must be met.
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
            Install the ULP on your system by running:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper in libpulp0 libpulp-tools</pre></div></li><li class="listitem"><p>
            Applications with desired live patch support must be launched
            preloading the <code class="systemitem">libpulp.so.0</code> library. See
            <a class="xref" href="#sec-ulp-libpulp" title="12.1.3. Using libpulp">Section 12.1.3, “Using <code class="systemitem">libpulp</code>”</a> for more details.
          </p></li></ul></div></section><section class="sect2" id="sec-ulp-supported-libs" data-id-title="Supported libraries"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.1.2 </span><span class="title-name">Supported libraries</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-supported-libs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Currently, only <code class="systemitem">glibc</code> and
        <code class="systemitem">openssl</code> (<code class="systemitem">openssl1_1</code>)
        are supported. Additional packages will be available after they are
        prepared for live patching. To receive <code class="systemitem">glibc</code>
        and <code class="systemitem">openssl</code> live patches, install both
        <span class="package">glibc-livepatches</span> and
        <span class="package">openssl-livepatches</span> packages:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper install glibc-livepatches openssl-livepatches</pre></div></section><section class="sect2" id="sec-ulp-libpulp" data-id-title="Using libpulp"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.1.3 </span><span class="title-name">Using <code class="systemitem">libpulp</code></span></span> <a title="Permalink" class="permalink" href="#sec-ulp-libpulp">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        To enable live patching on an application, you need to preload the
        <code class="systemitem">libpulp.so.0</code> library when starting the
        application:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>LD_PRELOAD=/usr/lib64/libpulp.so.0 <em class="replaceable">APPLICATION_CMD</em></pre></div><section class="sect3" id="sec-ulp-livepatch-check" data-id-title="Checking if a library is live patchable"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">12.1.3.1 </span><span class="title-name">Checking if a library is live patchable</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-livepatch-check">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          To check whether a library is live patchable, use the following
          command:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp livepatchable <em class="replaceable">PATH_TO_LIBRARY</em></pre></div></section><section class="sect3" id="sec-ulp-livepatch-container-check" data-id-title="Checking if a .so file is a live patch container"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">12.1.3.2 </span><span class="title-name">Checking if a <code class="filename">.so</code> file is a live patch container</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-livepatch-container-check">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          A shared object (<code class="filename">.so</code>) is a live patch container
          if it contains the ULP patch description embedded into it. You can
          verify it with the following command:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>readelf -S <em class="replaceable">SHARED_OBJECT</em> | grep .ulp</pre></div><p>
          If the output shows that there are both <code class="literal">.ulp</code> and
          <code class="literal">.ulp.rev</code> sections in the shared object, then it is
          a live patch container.
        </p></section><section class="sect3" id="sec-ulp-apply-livepatch" data-id-title="Applying live patches"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">12.1.3.3 </span><span class="title-name">Applying live patches</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-apply-livepatch">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          Live patches are applied using the <code class="command">ulp trigger</code>
          command, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp trigger -p <em class="replaceable">PID</em> <em class="replaceable">LIVEPATCH</em>.so</pre></div><p>
          Replace <code class="literal">PID</code> with the process ID of the running
          process that uses the library to be patched and
          <code class="literal">LIVEPATCH.so</code> with the actual live patch file. The
          command returns one of the following status messages:
        </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.13.3.8.6.5.1"><span class="term">SUCCESS</span></dt><dd><p>
                The live patching operation was successful.
              </p></dd><dt id="id-1.3.3.13.3.8.6.5.2"><span class="term">SKIPPED</span></dt><dd><p>
                The patch was skipped because it was not designed for any
                library that is loaded in the process.
              </p></dd><dt id="id-1.3.3.13.3.8.6.5.3"><span class="term">ERROR</span></dt><dd><p>
                An error occurred, and you can retrieve more information by
                inspecting the <code class="systemitem">libpulp</code> internal
                message buffer. See <a class="xref" href="#sec-ulp-internal-messages" title="12.1.3.6. View internal message queue">Section 12.1.3.6, “View internal message queue”</a>
                for more information.
              </p></dd></dl></div><p>
          It is also possible to apply multiple live patches by using
          wildcards, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp trigger '*.so'</pre></div><p>
          The command tries to apply every patch in the current folder to every
          process that have the <code class="systemitem">libpulp</code> library
          loaded. If the patch is not suitable for the process, it is
          automatically skipped. In the end, the tool shows how many patches it
          successfully applied to how many processes.
        </p></section><section class="sect3" id="sec-ulp-revert-livepatch" data-id-title="Reverting live patches"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">12.1.3.4 </span><span class="title-name">Reverting live patches</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-revert-livepatch">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          You can use the <code class="command">ulp trigger</code> command to revert live
          patches. There are two ways to revert live patches. You can revert a
          live patch by using the <code class="option">--revert</code> switch and passing
          the live patch container:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp trigger -p <em class="replaceable">PID</em> --revert <em class="replaceable">LIVEPATCH</em>.so</pre></div><p>
          Alternatively, it is possible to remove all patches associated with a
          particular library, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp trigger -p <em class="replaceable">PID</em> --revert-all=<em class="replaceable">LIBRARY</em></pre></div><p>
          In the example, <em class="replaceable">LIBRARY</em> refers to the
          actual library, such as <code class="systemitem">libcrypto.so.1.1</code>.
        </p><p>
          The latter approach can be useful when the source code of the
          original live patch is not available. Or you want to remove a
          specific old patch and apply a new one while the target application
          is still running a secure code, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp trigger -p <em class="replaceable">PID</em>  --revert-all=libcrypto.so.1.1 new_livepatch2.so</pre></div></section><section class="sect3" id="sec-ulp-verify-patches" data-id-title="View applied patches"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">12.1.3.5 </span><span class="title-name">View applied patches</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-verify-patches">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          It is possible to verify which applications have live patches applied
          by running:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp patches</pre></div><p>
          The output shows which libraries are live patchable and patches
          loaded in programs, as well which bugs the patch addresses:
        </p><div class="verbatim-wrap"><pre class="screen">PID: 10636, name: test
  Livepatchable libraries:
    in /lib64/libc.so.6:
      livepatch: libc_livepatch1.so
        bug labels: jsc#SLE-0000
    in /usr/lib64/libpulp.so.0:</pre></div><p>
          It is also possible to see which functions are patched by the live
          patch:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp dump <em class="replaceable">LIVEPATCH.so</em></pre></div></section><section class="sect3" id="sec-ulp-internal-messages" data-id-title="View internal message queue"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">12.1.3.6 </span><span class="title-name">View internal message queue</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-internal-messages">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          Log messages from <code class="systemitem">libpulp.so</code> are stored in a
          buffer inside the library and are not displayed unless requested by
          the user. To show these messages, run:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ulp messages -p <em class="replaceable">PID</em></pre></div></section></section></section><section class="sect1" id="sec-ulp-info" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">12.2 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-ulp-info">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/ulp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Further information about <code class="systemitem">libpulp</code> is available
      in the project's <a class="link" href="https://github.com/SUSE/libpulp" target="_blank">Git
      repository</a>.
    </p></section></section><section xml:lang="en" class="chapter" id="cha-transactional-updates" data-id-title="Transactional updates"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">13 </span><span class="title-name">Transactional updates</span></span> <a title="Permalink" class="permalink" href="#cha-transactional-updates">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
     Transactional updates are available in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> as a technology preview
     for updating SLES when the root file system is read-only. Transactional
     updates are atomic—all updates are applied only if all
     succeed—and support rollbacks. It does not affect a running system as
     no changes are activated until after the system is rebooted. As reboots are
     disruptive, the administrator must decide if a reboot is more expensive
     than disturbing running services. If reboots are too expensive then do not
     use transactional updates.
   </p><p>
    Transactional updates are run daily by the
    <code class="command">transactional-update</code> script. The script checks for
    available updates. If there are any updates, it creates a new snapshot of
    the root file system in the background, and then fetches updates from the
    release channels. After the new snapshot is updated, it is
    marked as active and will be the new default root file system after the next 
    reboot of the system. When <code class="command">transactional-update</code> is set to run
    automatically (which is the default behavior) it also reboots the system.
    Both the time that the update runs and the reboot maintenance window are
    configurable.
   </p><p>
    Only packages that are part of the snapshot of the root file system can be
    updated. If packages contain files that are not part of the snapshot, the
    update could fail or break the system.
   </p><p>
    RPMs that require a license to be accepted cannot be updated.
   </p></div></div></div></div><section class="sect1" id="sec-tu-limitations" data-id-title="Limitations"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.1 </span><span class="title-name">Limitations</span></span> <a title="Permalink" class="permalink" href="#sec-tu-limitations">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Currently, there are certain limitations in the functionality of
   transactional updates. The following packages do not work with the
   <code class="command">transactional-update</code> command:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     The <span class="package">nginx</span> default <code class="filename">index.html</code> page
     may not be available
    </p></li><li class="listitem"><p>
     <span class="package">tomcat-webapps</span> and
     <span class="package">tomcat-admin-webapps</span>
    </p></li><li class="listitem"><p>
     <span class="package">phpMyAdmin</span>
    </p></li><li class="listitem"><p>
     <span class="package">sca-appliance-*</span>
    </p></li><li class="listitem"><p>
     <span class="package">mpi-selector</span>
    </p></li><li class="listitem"><p>
     <span class="package">emacs</span> works except for Emacs games
    </p></li><li class="listitem"><p>
     <span class="package">bind</span> and <span class="package">bind-chrootenv</span>
    </p></li><li class="listitem"><p>
     <span class="package">docbook*</span>
    </p></li><li class="listitem"><p>
     <span class="package">sblim-sfcb*</span>
    </p></li><li class="listitem"><p>
     <span class="package">texlive*</span>
    </p></li><li class="listitem"><p>
     <span class="package">iso_ent</span>
    </p></li><li class="listitem"><p>
     <span class="package">openjade</span>
    </p></li><li class="listitem"><p>
     <span class="package">opensp</span>
    </p></li><li class="listitem"><p>
     <span class="package">pcp</span>
    </p></li><li class="listitem"><p>
     <span class="package">plymouth</span>
    </p></li><li class="listitem"><p>
     <span class="package">postgresql-server-10</span>
    </p></li><li class="listitem"><p>
     <span class="package">pulseaudio-gdm-hooks</span>
    </p></li><li class="listitem"><p>
     <span class="package">smartmontools</span>
    </p></li></ul></div><p>
   The updater component of the system installer does not work with a read-only
   file system as it has no support for transactional updates.
  </p><p>
   Further considerations:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     It is a good idea to minimize the time between updating the
     system and rebooting the machine.
    </p></li><li class="listitem"><p>
     Only one update can be applied at a time. Be sure to reboot after an
     update, and before the next update is applied.
    </p></li><li class="listitem"><p>
     <code class="command">update-alternatives</code> should not be run after a
     transactional update until the machine has been rebooted.
    </p></li><li class="listitem"><p>
     Do not create new system users or system groups after a transactional
     update until after reboot. It is acceptable to create normal users and
     groups (UID &gt; 1000, GID &gt; 1000).
    </p></li><li class="listitem"><p>
     YaST is not yet aware of transactional updates. If a YaST module needs
     to install additional packages, this does not work. Normal system
     operations that modify configuration files in <code class="filename">/etc</code>
     work.
    </p></li><li class="listitem"><p>
     For <span class="package">php7-fastcgi</span>, you must manually create a symbolic link,
     <code class="filename">/srv/www/cgi-bin/php</code>, that points to
     <code class="filename">/usr/bin/php-cgi</code>.
    </p></li><li class="listitem"><p>
     <span class="package">ntp</span>is part of the Legacy Module for migration from
     older SLES versions. It is not supported on a new <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
     installation, and has been replaced by <span class="package">chrony</span>. If you
     continue to use <span class="package">ntp</span>, a fresh installation is required
     to work correctly with transactional updates.
    </p></li><li class="listitem"><p>
     <span class="package">sblim-sfcb</span>: the whole sblim ecosystem is incompatible
     with transactional update.
    </p></li><li class="listitem"><p>
     <code class="command">btrfs-defrag</code> from the
     <span class="package">btrfsmaintenance</span> package does not work with a read-only
     root file system.
    </p></li><li class="listitem"><p>
     For <code class="command">btrfs-balance</code>, the variable
     <code class="literal">BTRFS_BALANCE_MOUNTPOINTS</code> in
     <code class="filename">/etc/sysconfig/btrfsmaintenance</code> must be changed from
     <code class="literal">/</code> to <code class="literal">/.snapshots</code>.
    </p></li><li class="listitem"><p>
     For <code class="command">btrfs-scrub</code>, the variable
     <code class="literal">BTRFS_SCRUB_MOUNTPOINTS</code> in
     <code class="filename">/etc/sysconfig/btrfsmaintenance</code> must be changed from
     <code class="literal">/</code> to <code class="literal">/.snapshots</code>.
    </p></li></ul></div></section><section class="sect1" id="sec-install-tu" data-id-title="Enabling transactional-update"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.2 </span><span class="title-name">Enabling <span class="package">transactional-update</span></span></span> <a title="Permalink" class="permalink" href="#sec-install-tu">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You must enable the Transactional Server Module during system installation,
   and then select the Transactional Server System Role. Installing any package
   from the Transactional Server Module later in a running system is NOT
   supported and may break the system.
  </p><p>

      Changing the subvolume layout of the root partition, or putting 
      subdirectories or subvolumes of the root partition on their own partitions 
      (except <code class="filename">/home</code>, <code class="filename">/var</code>, 
      <code class="filename">/srv</code>, and <code class="filename">/opt</code>) is not supported, 
      and may break the system.
  </p></section><section class="sect1" id="sec-tu-disable" data-id-title="Managing automatic updates"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.3 </span><span class="title-name">Managing automatic updates</span></span> <a title="Permalink" class="permalink" href="#sec-tu-disable">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Automatic updates are controlled by a <code class="command">systemd.timer</code>
      that runs once per day. This applies all updates, and informs
      <code class="command">rebootmgrd</code> that the machine should be rebooted. You may
      adjust the time when the update runs, see systemd.timer(5). To adjust the
      maintenance window, which is when <code class="command">rebootmgrd</code> reboots the
      system, see rebootmgrd(8).
  </p><p>
   You can disable automatic transactional updates with this command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">systemctl --now disable transactional-update.timer</code></pre></div></section><section class="sect1" id="id-1.3.3.14.6" data-id-title="The transactional-update command"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.4 </span><span class="title-name">The <code class="command">transactional-update</code> command</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.14.6">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <code class="command">transactional-update</code> command enables atomic
   installation or removal of updates. Updates are applied only if they all can
   be successfully installed.
   <code class="command">transactional-update</code> creates a snapshot of your system
   before the update is applied, and you can restore this snapshot. All changes become
   active only after reboot.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.14.6.3.1"><span class="term"><code class="literal">--continue</code></span></dt><dd><p>
         The <code class="command">--continue</code> option is for making multiple changes to an
         existing snapshot without rebooting.
     </p><p>
         The default <code class="command">transactional-update</code> behavior
         is to create a new snapshot from the current root file system. If you
         forget something, such as installing a new package, you have to reboot
         to apply your previous changes, run <code class="command">transactional-update</code>
         again to install the forgotten package, and reboot again. You cannot run the
         <code class="command">transactional-update</code> command multiple times without rebooting
         to add more changes to the snapshot, because that creates separate
         independent snapshots that do not include changes from the previous snapshots.
     </p><p>
         Use the <code class="command">--continue</code> option to make as many changes as you
         want without rebooting. A separate snapshot is made each time, and each
         snapshot contains all the changes you made in the previous snapshots, plus your
         new changes. Repeat this process as many times as you want, and when the final
         snapshot includes everything you want reboot the system, and your final snapshot
         becomes the new root file system.
     </p><p>
         Another useful feature of the <code class="command">--continue</code> option is you may
         select any existing snapshot as the base for your new snapshot. The following example
         demonstrates running <code class="command">transactional-update</code> to install a new
         package in a snapshot based on snapshot 13, and then running it again to install
         another package:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg install <em class="replaceable">package_1</em></code></pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update --continue 13 pkg install <em class="replaceable">package_2</em></code></pre></div><p>
        The <code class="command">--continue [num]</code> option calls <code class="command">snapper create --from</code>,
        see <a class="xref" href="#sec-snapper-manage-create" title="10.6.2. Creating snapshots">Section 10.6.2, “Creating snapshots”</a>.
    </p></dd><dt id="id-1.3.3.14.6.3.2"><span class="term"><code class="literal">cleanup</code></span></dt><dd><p>
    If the current root file system is identical to the active root
    file system (after a reboot, before <code class="command">transactional-update</code>
    creates a new snapshot with updates), all old snapshots without a cleanup
    algorithm get a cleanup algorithm set. This ensures that old snapshots are
    deleted by Snapper. (See the section about cleanup algorithms in
    snapper(8).) This also removes all unreferenced (and thus unused)
    <code class="filename">/etc</code> overlay directories in 
    <code class="filename">/var/lib/overlay</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update cleanup</code></pre></div></dd><dt id="id-1.3.3.14.6.3.3"><span class="term"><code class="literal">pkg in/install</code></span></dt><dd><p>
      Installs individual packages from the available channels using the
      <code class="command">zypper install</code> command. This command can also be used
      to install Program Temporary Fix (PTF) RPM files.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg install <em class="replaceable">package_name</em></code></pre></div><p>
      or
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg install <em class="replaceable">rpm1 rpm2</em></code></pre></div></dd><dt id="id-1.3.3.14.6.3.4"><span class="term"><code class="literal">pkg rm/remove</code></span></dt><dd><p>
      Removes individual packages from the active snapshot using the
      <code class="command">zypper remove</code> command. This command can also be used
      to remove PTF RPM files.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg remove <em class="replaceable">package_name</em></code></pre></div></dd><dt id="id-1.3.3.14.6.3.5"><span class="term"><code class="literal">pkg up/update</code></span></dt><dd><p>
      Updates individual packages from the active snapshot using the
      <code class="command">zypper update</code> command. Only packages that are part of
      the snapshot of the base file system can be updated.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update pkg update <em class="replaceable">package_name</em></code></pre></div></dd><dt id="id-1.3.3.14.6.3.6"><span class="term"><code class="literal">up/update</code></span></dt><dd><p>
      If there are new updates available, a new snapshot is created and
      <code class="command">zypper up/update</code> updates the snapshot.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update up</code></pre></div></dd><dt id="id-1.3.3.14.6.3.7"><span class="term"><code class="literal">dup</code></span></dt><dd><p>
      If there are new updates available, a new snapshot is created and
      <code class="command">zypper dup –no-allow-vendor-change</code> updates the
      snapshot. The snapshot is activated afterwards and becomes the new root
      file system after reboot.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update dup</code></pre></div></dd><dt id="id-1.3.3.14.6.3.8"><span class="term"><code class="literal">patch</code></span></dt><dd><p>
      If there are new updates available, a new snapshot is created and
      <code class="command">zypper patch</code> updates the snapshot.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update patch</code></pre></div></dd><dt id="id-1.3.3.14.6.3.9"><span class="term"><code class="literal">rollback</code></span></dt><dd><p>
      This sets the default subvolume. On systems with a read-write file system
      <code class="command">snapper rollback</code> is called. On a read-only file system
      and without any argument, the current system is set to a new default root
      file system. If you specify a number, that snapshot is used as the
      default root file system. On a read-only file system, it does not create
      any additional snapshots.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update rollback <em class="replaceable">snapshot_number</em></code></pre></div></dd><dt id="id-1.3.3.14.6.3.10"><span class="term"><code class="literal">grub.cfg</code></span></dt><dd><p>
      This creates a new GRUB2 configuration. Sometimes it is necessary to
      adjust the boot configuration, for example, adding additional kernel
      parameters. Edit <em class="replaceable">/etc/default/grub</em>, run
      <code class="command">transactional-update grub.cfg</code>, and then reboot to
      activate the change. You must immediately reboot, or the new GRUB2
      configuration gets overwritten with the default by the next
      <code class="command">transactional-update</code> run.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update grub.cfg</code></pre></div></dd><dt id="id-1.3.3.14.6.3.11"><span class="term"><code class="literal">reboot</code></span></dt><dd><p>
      This parameter triggers a reboot after the action is completed.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update <em class="replaceable">dup</em> reboot</code></pre></div></dd><dt id="id-1.3.3.14.6.3.12"><span class="term"><code class="literal">--help</code></span></dt><dd><p>
      This prints a help screen with options and subcommands.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">transactional-update --help</code></pre></div></dd></dl></div></section><section class="sect1" id="sec-tu-troubleshooting" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13.5 </span><span class="title-name">Troubleshooting</span></span> <a title="Permalink" class="permalink" href="#sec-tu-troubleshooting">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/transactional_updates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If the upgrade fails, run <code class="command">supportconfig</code> to collect log
   data. Provide the resulting files, including
   <code class="filename">/var/log/transactional-update.log</code> to SUSE Support.
  </p></section></section><section class="chapter" id="cha-vnc" data-id-title="Remote graphical sessions with VNC"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">14 </span><span class="title-name">Remote graphical sessions with VNC</span></span> <a title="Permalink" class="permalink" href="#cha-vnc">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Virtual Network Computing (VNC) enables you to access a remote computer
    via a graphical desktop, and run remote graphical applications. VNC is 
    platform-independent and accesses the remote machine from any operating 
    system. This chapter describes how to connect to a VNC server with the 
    desktop clients vncviewer and Remmina, and how to operate a VNC server.
   </p><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> supports two different kinds of VNC sessions: one-time
    sessions that <span class="quote">“<span class="quote">live</span>”</span> While the VNC connection from the
    client is kept up, and persistent sessions that <span class="quote">“<span class="quote">live</span>”</span> until
    they are explicitly terminated.
   </p><p>
   A VNC server can offer both kinds of sessions simultaneously on different
   ports, but an open session cannot be converted from one type to the other.
  </p></div></div></div></div><section class="sect1" id="sec-vnc-viewer" data-id-title="The vncviewer client"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">14.1 </span><span class="title-name">The <code class="command">vncviewer</code> client</span></span> <a title="Permalink" class="permalink" href="#sec-vnc-viewer">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To connect to a VNC service provided by a server, a client is needed. The
   default in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is <code class="command">vncviewer</code>, provided by the
   <code class="systemitem">tigervnc</code> package.
  </p><section class="sect2" id="sec-vnc-viewer-connectcli" data-id-title="Connecting using the vncviewer CLI"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.1.1 </span><span class="title-name">Connecting using the vncviewer CLI</span></span> <a title="Permalink" class="permalink" href="#sec-vnc-viewer-connectcli">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To start your VNC viewer and initiate a session with the server, use the
    command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>vncviewer jupiter.example.com:1</pre></div><p>
    Instead of the VNC display number you can also specify the port number with
    two colons:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>vncviewer jupiter.example.com::5901</pre></div><div id="id-1.3.3.15.3.3.6" data-id-title="Display and port number" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Display and port number</div><p>
     The actual display or port number you specify in the VNC client must be the
     same as the display or port number selected when configuring a VNC server
     on the target machine. See <a class="xref" href="#sec-vnc-persistent" title="14.4. Configuring persistent VNC server sessions">Section 14.4, “Configuring persistent VNC server sessions”</a> for further
     info.
    </p></div></section><section class="sect2" id="sec-vnc-viewer-connectgui" data-id-title="Connecting using the vncviewer GUI"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.1.2 </span><span class="title-name">Connecting using the vncviewer GUI</span></span> <a title="Permalink" class="permalink" href="#sec-vnc-viewer-connectgui">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When running <code class="command">vncviewer</code> without specifying
    <code class="command">--listen</code> or a host to connect to, it shows a window
    asking for connection details. Enter the host into the <span class="guimenu">VNC
    server</span> field like in <a class="xref" href="#sec-vnc-viewer-connectcli" title="14.1.1. Connecting using the vncviewer CLI">Section 14.1.1, “Connecting using the vncviewer CLI”</a>
    and click <span class="guimenu">Connect</span>.
   </p><div class="figure" id="fig-vnc-viewer-connectgui"><div class="figure-contents"><div class="mediaobject"><a href="images/vnc_connect.png"><img src="images/vnc_connect.png" alt="vncviewer asking for connection details" title="vncviewer asking for connection details"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 14.1: </span><span class="title-name">vncviewer </span></span><a title="Permalink" class="permalink" href="#fig-vnc-viewer-connectgui">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></section><section class="sect2" id="sec-vnc-viewer-encrypt" data-id-title="Notification of unencrypted connections"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.1.3 </span><span class="title-name">Notification of unencrypted connections</span></span> <a title="Permalink" class="permalink" href="#sec-vnc-viewer-encrypt">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The VNC protocol supports different kinds of encrypted connections, not to
    be confused with password authentication. If a connection does not use TLS,
    the text <span class="quote">“<span class="quote">(Connection not encrypted!)</span>”</span> can be seen in the
    window title of the VNC viewer.
   </p></section></section><section class="sect1" id="vnc-remmina" data-id-title="Remmina: the remote desktop client"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">14.2 </span><span class="title-name">Remmina: the remote desktop client</span></span> <a title="Permalink" class="permalink" href="#vnc-remmina">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Remmina is a modern and feature-rich remote desktop client. It supports
   several access methods, for example, VNC, SSH, RDP and Spice.
  </p><section class="sect2" id="vnc-remmina-install" data-id-title="Installation"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.2.1 </span><span class="title-name">Installation</span></span> <a title="Permalink" class="permalink" href="#vnc-remmina-install">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To use Remmina, verify whether the <span class="package">remmina</span> package is
    installed on your system, and install it if not. Remember to install the
    VNC plug-in for Remmina as well:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>zypper in remmina remmina-plugin-vnc</pre></div></section><section class="sect2" id="vnc-remmina-usage" data-id-title="Main window"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.2.2 </span><span class="title-name">Main window</span></span> <a title="Permalink" class="permalink" href="#vnc-remmina-usage">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Run Remmina by entering the <code class="command">remmina</code> command.
   </p><div class="figure" id="id-1.3.3.15.4.4.3"><div class="figure-contents"><div class="mediaobject"><a href="images/remmina.png"><img src="images/remmina.png" width="50%" alt="Remmina's main window" title="Remmina's main window"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 14.2: </span><span class="title-name">Remmina's main window </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.15.4.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div><p>
    The main application window shows the list of stored remote sessions. Here
    you can add and save a new remote session, quick-start a new session
    without saving it, start a previously saved session, or set Remmina's
    global preferences.
   </p></section><section class="sect2" id="vnc-remmina-addnew" data-id-title="Adding remote sessions"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.2.3 </span><span class="title-name">Adding remote sessions</span></span> <a title="Permalink" class="permalink" href="#vnc-remmina-addnew">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To add and save a new remote session, click <span class="inlinemediaobject"><a href="images/remmina_plus.png"><img src="images/remmina_plus.png" width="14" alt="Add new session" title="Add new session"/></a></span> in the
    top left of the main window. The
    <span class="guimenu">Remote Desktop Preference</span> window opens.
   </p><div class="figure" id="id-1.3.3.15.4.5.3"><div class="figure-contents"><div class="mediaobject"><a href="images/remmina_session_details.png"><img src="images/remmina_session_details.png" width="80%" alt="Remote desktop preference" title="Remote desktop preference"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 14.3: </span><span class="title-name">Remote desktop preference </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.15.4.5.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div><p>
    Complete the fields that specify your newly added remote session profile.
    The most important are:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.15.4.5.5.1"><span class="term">Name</span></dt><dd><p>
       Name of the profile. It will be listed in the main window.
      </p></dd><dt id="id-1.3.3.15.4.5.5.2"><span class="term">Protocol</span></dt><dd><p>
       The protocol to use when connecting to the remote session, for example,
       VNC.
      </p></dd><dt id="id-1.3.3.15.4.5.5.3"><span class="term">Server</span></dt><dd><p>
       The IP or DNS address and display number of the remote server.
      </p></dd><dt id="id-1.3.3.15.4.5.5.4"><span class="term">User name, password</span></dt><dd><p>
       Credentials to use for remote authentication. Leave empty for no
       authentication.
      </p></dd><dt id="id-1.3.3.15.4.5.5.5"><span class="term">Color depth, quality</span></dt><dd><p>
       Select the best options according to your connection speed and quality.
      </p></dd></dl></div><p>
    Select the <span class="guimenu">Advanced</span> tab to enter more specific settings.
   </p><div id="id-1.3.3.15.4.5.7" data-id-title="Disable encryption" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Disable encryption</div><p>
     If the communication between the client and the remote server is not
     encrypted, activate <span class="guimenu">Disable encryption</span>, otherwise the
     connection fails.
    </p></div><p>
    Select the <span class="guimenu">SSH</span> tab for advanced SSH tunneling and
    authentication options.
   </p><p>
    Confirm with <span class="guimenu">Save</span>. Your new profile is now listed in the
    main window.
   </p></section><section class="sect2" id="vnc-remmina-start" data-id-title="Starting remote sessions"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.2.4 </span><span class="title-name">Starting remote sessions</span></span> <a title="Permalink" class="permalink" href="#vnc-remmina-start">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can either start a previously saved session, or quick-start a remote
    session without saving the connection details.
   </p><section class="sect3" id="vnc-remmina-quickstart" data-id-title="Quick-starting remote sessions"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">14.2.4.1 </span><span class="title-name">Quick-starting remote sessions</span></span> <a title="Permalink" class="permalink" href="#vnc-remmina-quickstart">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     To start a remote session quickly without adding and saving connection
     details, use the drop-down box and text box at the top of the main window.
    </p><div class="figure" id="id-1.3.3.15.4.6.3.3"><div class="figure-contents"><div class="mediaobject"><a href="images/remmina_quickstart.png"><img src="images/remmina_quickstart.png" width="40%" alt="Quick-starting" title="Quick-starting"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 14.4: </span><span class="title-name">Quick-starting </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.15.4.6.3.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div><p>
     Select the communication protocol from the drop-down list, for example,
     <span class="quote">“<span class="quote">VNC</span>”</span>, then enter the VNC server DNS or IP address followed by
     a colon and a display number, and confirm with <span class="keycap">Enter</span>.
    </p></section><section class="sect3" id="id-1.3.3.15.4.6.4" data-id-title="Opening saved remote sessions"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">14.2.4.2 </span><span class="title-name">Opening saved remote sessions</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.15.4.6.4">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     To open a specific remote session, double-click it from the list of
     sessions.
    </p></section><section class="sect3" id="id-1.3.3.15.4.6.5" data-id-title="Remote sessions window"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">14.2.4.3 </span><span class="title-name">Remote sessions window</span></span> <a title="Permalink" class="permalink" href="#id-1.3.3.15.4.6.5">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Remote sessions are opened in tabs of a separate window. Each tab hosts
     one session. The toolbar on the left of the window helps you manage the
     windows/sessions. For example, toggle full-screen mode, resize the window to
     match the display size of the session, send specific keystrokes to the
     session, take screenshots of the session, or set the image quality.
    </p><div class="figure" id="id-1.3.3.15.4.6.5.3"><div class="figure-contents"><div class="mediaobject"><a href="images/remmina_sle15inside.png"><img src="images/remmina_sle15inside.png" width="80%" alt="Remmina viewing remote session" title="Remmina viewing remote session"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 14.5: </span><span class="title-name">Remmina viewing remote session </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.15.4.6.5.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></section></section><section class="sect2" id="vnc-remmina-edit-delete-clone" data-id-title="Editing, copying, and deleting saved sessions"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.2.5 </span><span class="title-name">Editing, copying, and deleting saved sessions</span></span> <a title="Permalink" class="permalink" href="#vnc-remmina-edit-delete-clone">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To <span class="emphasis"><em>edit</em></span> a saved remote session, right-click its name
    in Remmina's main window and select <span class="guimenu">Edit</span>. Refer to
    <a class="xref" href="#vnc-remmina-addnew" title="14.2.3. Adding remote sessions">Section 14.2.3, “Adding remote sessions”</a> for the description of the relevant
    fields.
   </p><p>
    To <span class="emphasis"><em>copy</em></span> a saved remote session, right-click its name
    in Remmina's main window and select <span class="guimenu">Copy</span>. In the
    <span class="guimenu">Remote Desktop Preference</span> window, change the name of the
    profile, optionally adjust relevant options, and confirm with
    <span class="guimenu">Save</span>.
   </p><p>
    To <span class="emphasis"><em>Delete</em></span> a saved remote session, right-click its name
    in Remmina's main window and select <span class="guimenu">Delete</span>. Confirm
    with <span class="guimenu">Yes</span> in the next dialog.
   </p></section><section class="sect2" id="vnc-remmina-cmdline" data-id-title="Running remote sessions from the command line"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.2.6 </span><span class="title-name">Running remote sessions from the command line</span></span> <a title="Permalink" class="permalink" href="#vnc-remmina-cmdline">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you need to open a remote session from the command line or from a batch
    file without first opening the main application window, use the following
    syntax:
   </p><div class="verbatim-wrap"><pre class="screen"> <code class="prompt user">&gt; </code>remmina -c <em class="replaceable">profile_name</em>.remmina</pre></div><p>
    Remmina's profile files are stored in the
    <code class="filename">.local/share/remmina/</code> directory in your home
    directory. To determine which profile file belongs to the session you want
    to open, run Remmina, click the session name in the main window, and read
    the path to the profile file in the window's status line at the bottom.
   </p><div class="figure" id="id-1.3.3.15.4.8.5"><div class="figure-contents"><div class="mediaobject"><a href="images/remmina_status.png"><img src="images/remmina_status.png" width="50%" alt="Reading path to the profile file" title="Reading path to the profile file"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 14.6: </span><span class="title-name">Reading path to the profile file </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.15.4.8.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div><p>
    While Remmina is not running, you can rename the profile file to a more
    reasonable file name, such as <code class="filename">sle15.remmina</code>. You can
    even copy the profile file to your custom directory and run it using the
    <code class="command">remmina -c</code> command from there.
   </p></section></section><section class="sect1" id="sec-vnc-one-time" data-id-title="Configuring one-time sessions on the VNC server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">14.3 </span><span class="title-name">Configuring one-time sessions on the VNC server</span></span> <a title="Permalink" class="permalink" href="#sec-vnc-one-time">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A one-time session is initiated by the remote client. It starts a graphical
   login screen on the server. This way you can choose the user which starts the
   session and, if supported by the login manager, the desktop environment. When
   you cancel the client connection to such a VNC session, all applications
   started within that session are terminated, too. One-time VNC sessions cannot
   be shared, but it is possible to have multiple sessions on a single host at
   the same time.
  </p><div class="procedure" id="pro-vnc-one-time-activate" data-id-title="Enabling one-time VNC sessions"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 14.1: </span><span class="title-name">Enabling one-time VNC sessions </span></span><a title="Permalink" class="permalink" href="#pro-vnc-one-time-activate">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Start <span class="guimenu">YaST</span> › <span class="guimenu">Network
     Services</span> › <span class="guimenu">Remote Administration (VNC)</span>.
    </p></li><li class="step"><p>
     Check <span class="guimenu">Allow Remote Administration Without Session
     Management</span>.
    </p></li><li class="step"><p>
     Activate <span class="guimenu">Enable access using a web browser</span> if you plan
     to access the VNC session in a Web browser window.
    </p></li><li class="step"><p>
     If necessary, also check <span class="guimenu">Open Port in Firewall</span> (for
     example, when your network interface is configured to be in the External
     Zone). If you have more than one network interface, restrict opening the
     firewall ports to a specific interface via <span class="guimenu">Firewall
     Details</span>.
    </p></li><li class="step"><p>
     Confirm your settings with <span class="guimenu">Next</span>.
    </p></li><li class="step"><p>
     In case not all needed packages are available yet, you need to approve the
     installation of missing packages.
    </p><div id="id-1.3.3.15.5.3.7.2" data-id-title="Restart the display manager" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Restart the display manager</div><p>
      YaST makes changes to the display manager settings. You need to log out
      of your current graphical session and restart the display manager for the
      changes to take effect.
     </p></div></li></ol></div></div><div class="figure" id="id-1.3.3.15.5.4"><div class="figure-contents"><div class="mediaobject"><a href="images/vnc_nosession.png"><img src="images/vnc_nosession.png" width="70%" alt="Remote administration" title="Remote administration"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 14.7: </span><span class="title-name">Remote administration </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.15.5.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div><section class="sect2" id="sec-vnc-one-time-configs" data-id-title="Available configurations"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.3.1 </span><span class="title-name">Available configurations</span></span> <a title="Permalink" class="permalink" href="#sec-vnc-one-time-configs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The default configuration on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> serves sessions with a
    resolution of 1024x768 pixels at a color depth of 16-bit. The sessions are
    available on ports <code class="systemitem">5901</code> for
    <span class="quote">“<span class="quote">regular</span>”</span> VNC viewers (equivalent to VNC display
    <code class="literal">1</code>) and on port
    <code class="systemitem">5801</code> for Web browsers.
   </p><p>
    Other configurations can be made available on different
    ports<span class="phrase">, see
    <a class="xref" href="#sec-vnc-one-time-config" title="14.3.3. Configuring one-time VNC sessions">Section 14.3.3, “Configuring one-time VNC sessions”</a></span>.
   </p><p>
    VNC display numbers and X display numbers are independent in one-time
    sessions. A VNC display number is manually assigned to every configuration
    that the server supports (:1 in the example above). Whenever a VNC session
    is initiated with one of the configurations, it automatically gets a free X
    display number.
   </p><p>
    By default, both the VNC client and server try to communicate securely via a
    self-signed SSL certificate, which is generated after installation. You can
    either use the default one, or replace it with your own. When using the
    self-signed certificate, you need to confirm its signature before the first
    connection—both in the VNC viewer and the Web browser.
   </p><div id="id-1.3.3.15.5.5.6" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
     Certain VNC clients refuse to establish a secure connection via the default
     self-signed certificate. For example, the Vinagre client verifies the
     certification against the GnuTLS global trust store and fails if the
     certificate is self-signed. In such a case, either use an encryption method
     other than <code class="literal">x509</code>, or generate a properly signed
     certificate for the VNC server and import it to the client's system trust
     store.
    </p></div></section><section class="sect2" id="sec-vnc-one-time-connect" data-id-title="Initiating a one-time VNC session"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.3.2 </span><span class="title-name">Initiating a one-time VNC session</span></span> <a title="Permalink" class="permalink" href="#sec-vnc-one-time-connect">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To connect to a one-time VNC session, a VNC viewer must be installed, see
    also <a class="xref" href="#sec-vnc-viewer" title="14.1. The vncviewer client">Section 14.1, “The <code class="command">vncviewer</code> client”</a>.  Alternatively use a
    JavaScript-capable Web browser to view the VNC session by entering the
    following URL: <code class="literal">http://jupiter.example.com:5801</code>
   </p></section><section class="sect2" id="sec-vnc-one-time-config" data-id-title="Configuring one-time VNC sessions"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.3.3 </span><span class="title-name">Configuring one-time VNC sessions</span></span> <a title="Permalink" class="permalink" href="#sec-vnc-one-time-config">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can skip this section, if you do not need or want to modify the default
    configuration.
   </p><p>
    One-time VNC sessions are started via the <code class="systemitem">systemd</code> socket
    <code class="systemitem">xvnc.socket</code>. By default it offers six
    configuration blocks: three for VNC viewers (<code class="literal">vnc1</code> to
    <code class="literal">vnc3</code>), and three serving a JavaScript client
    (<code class="literal">vnchttpd1</code> to <code class="literal">vnchttpd3</code>). By default
    only <code class="literal">vnc1</code> and <code class="literal">vnchttpd1</code> are active.
   </p><p>
    To activate the VNC server socket at boot time, run the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  systemctl enable xvnc.socket</pre></div><p>
    To start the socket immediately, run:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  systemctl start xvnc.socket</pre></div><p>
    The <code class="command">Xvnc</code> server can be configured via the
    <code class="literal">server_args</code> option. For a list of options, see
    <code class="command">Xvnc --help</code>.
   </p><p>
    When adding custom configurations, make sure they are not using ports that
    are already in use by other configurations, other services, or existing
    persistent VNC sessions on the same host.
   </p><p>
    Activate configuration changes by entering the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl reload xvnc.socket</pre></div><div id="id-1.3.3.15.5.7.12" data-id-title="Firewall and VNC ports" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Firewall and VNC ports</div><p>
     When activating Remote Administration as described in
     <a class="xref" href="#pro-vnc-one-time-activate" title="Enabling one-time VNC sessions">Procedure 14.1, “Enabling one-time VNC sessions”</a>, the ports
     <code class="systemitem">5801</code> and
     <code class="systemitem">5901</code> are opened in the firewall.
     If the network interface serving the VNC sessions is protected by a
     firewall, you need to manually open the respective ports when activating
     additional ports for VNC sessions. See
     <span class="intraxref">Book “Security and Hardening Guide”, Chapter 23 “Masquerading and firewalls”</span> for instructions.
    </p></div></section></section><section class="sect1" id="sec-vnc-persistent" data-id-title="Configuring persistent VNC server sessions"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">14.4 </span><span class="title-name">Configuring persistent VNC server sessions</span></span> <a title="Permalink" class="permalink" href="#sec-vnc-persistent">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A persistent session can be accessed from multiple clients simultaneously.
   This is ideal for demonstration purposes where one client has full access
   and all other clients have view-only access. Another use case are training sessions
   where the trainer may need access to the trainee's desktop.
  </p><div id="sec-vnc-persistent-connect" data-id-title="Connecting to a persistent VNC session" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Connecting to a persistent VNC session</div><p>
    To connect to a persistent VNC session, a VNC viewer must be installed.
    Refer to <a class="xref" href="#sec-vnc-viewer" title="14.1. The vncviewer client">Section 14.1, “The <code class="command">vncviewer</code> client”</a> for more details. Alternatively,
    use a JavaScript-capable Web browser to view the VNC session by entering the
    following URL: <code class="literal">http://jupiter.example.com:5801</code>.
   </p></div><section class="sect2" id="vnc-persistent-vncmanager" data-id-title="VNC session initiated using vncmanager"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.4.1 </span><span class="title-name">VNC session initiated using <code class="systemitem">vncmanager</code></span></span> <a title="Permalink" class="permalink" href="#vnc-persistent-vncmanager">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><div class="procedure" id="vnc-persistent-vncmanager-enable" data-id-title="Enabling persistent VNC sessions"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 14.2: </span><span class="title-name">Enabling persistent VNC sessions </span></span><a title="Permalink" class="permalink" href="#vnc-persistent-vncmanager-enable">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start <span class="guimenu">YaST</span> › <span class="guimenu">Network
      Services</span> › <span class="guimenu">Remote Administration (VNC)</span>.
     </p></li><li class="step"><p>
      Activate <span class="guimenu">Allow Remote Administration With Session
      Management</span>.
     </p></li><li class="step"><p>
      Activate <span class="guimenu">Enable access using a web browser</span> if you plan
      to access the VNC session in a Web browser window.
     </p></li><li class="step"><p>
      If necessary, also check <span class="guimenu">Open Port in Firewall</span> (for
      example, when your network interface is configured to be in the External
      Zone). If you have more than one network interface, restrict opening the
      firewall ports to a specific interface via <span class="guimenu">Firewall
      Details</span>.
     </p></li><li class="step"><p>
      Confirm your settings with <span class="guimenu">Next</span>.
     </p></li><li class="step"><p>
      In case not all needed packages are available yet, you need to approve
      the installation of missing packages.
     </p><div id="id-1.3.3.15.6.4.3.7.2" data-id-title="Restart the display manager" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Restart the display manager</div><p>
       YaST makes changes to the display manager settings. You need to log
       out of your current graphical session and restart the display manager
       for the changes to take effect.
      </p></div></li></ol></div></div><section class="sect3" id="vnc-persistent-vncmanager-configure" data-id-title="Configuring persistent VNC sessions"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">14.4.1.1 </span><span class="title-name">Configuring persistent VNC sessions</span></span> <a title="Permalink" class="permalink" href="#vnc-persistent-vncmanager-configure">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     After you enable the VNC session management as described in <a class="xref" href="#vnc-persistent-vncmanager-enable" title="Enabling persistent VNC sessions">Procedure 14.2, “Enabling persistent VNC sessions”</a>, you can normally connect to
     the remote session with your favorite VNC viewer, such as
     <code class="command">vncviewer</code> or Remmina. After you log in, the
     <span class="quote">“<span class="quote">VNC</span>”</span> icon appears in the system tray of your desktop
     environment. Click the icon to open the <span class="guimenu">VNC Session</span>
     window. If your desktop environment does not support icons in the system
     tray, run <code class="command">vncmanager-controller</code> manually.
    </p><div class="figure" id="id-1.3.3.15.6.4.4.3"><div class="figure-contents"><div class="mediaobject"><a href="images/vncmanager_session.png"><img src="images/vncmanager_session.png" width="85%" alt="VNC session settings" title="VNC session settings"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 14.8: </span><span class="title-name">VNC session settings </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.15.6.4.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div><p>
     There are several settings that influence the VNC session's behavior:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.15.6.4.4.5.1"><span class="term"><span class="guimenu">Non-persistent, private</span>
      </span></dt><dd><p>
        This is equivalent to a one-time session. It is not visible to others
        and is terminated after you disconnect from it. Refer to <a class="xref" href="#sec-vnc-one-time" title="14.3. Configuring one-time sessions on the VNC server">Section 14.3, “Configuring one-time sessions on the VNC server”</a> for more information.
       </p></dd><dt id="id-1.3.3.15.6.4.4.5.2"><span class="term"><span class="guimenu">Persistent, visible</span>
      </span></dt><dd><p>
        The session is visible to other users and keeps running even after you
        disconnect from it.
       </p></dd><dt id="id-1.3.3.15.6.4.4.5.3"><span class="term"><span class="guimenu">Session name</span>
      </span></dt><dd><p>
        Specify the name of the persistent session so that it is easily
        identified when reconnecting.
       </p></dd><dt id="id-1.3.3.15.6.4.4.5.4"><span class="term"><span class="guimenu">No password required</span>
      </span></dt><dd><p>
        The session is freely accessible without having to log in under user
        credentials.
       </p></dd><dt id="id-1.3.3.15.6.4.4.5.5"><span class="term"><span class="guimenu">Require user login</span>
      </span></dt><dd><p>
        You need to log in with a valid user name and password to access the
        session. Lists the valid user names in the <span class="guimenu">Allowed
        users</span> text box.
       </p></dd><dt id="id-1.3.3.15.6.4.4.5.6"><span class="term"><span class="guimenu">Allow one client at a time</span>
      </span></dt><dd><p>
        Prevents multiple users from joining the session at the same time.
       </p></dd><dt id="id-1.3.3.15.6.4.4.5.7"><span class="term"><span class="guimenu">Allow multiple clients at a time</span>
      </span></dt><dd><p>
        Allows multiple users to join the persistent session at the same time.
        Useful for remote presentations or training sessions.
       </p></dd></dl></div><p>
     Confirm with <span class="guimenu">OK</span>.
    </p></section><section class="sect3" id="vnc-persistent-vncmanager-join" data-id-title="Joining persistent VNC sessions"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">14.4.1.2 </span><span class="title-name">Joining persistent VNC sessions</span></span> <a title="Permalink" class="permalink" href="#vnc-persistent-vncmanager-join">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     After you set up a persistent VNC session as described in
     <a class="xref" href="#vnc-persistent-vncmanager-configure" title="14.4.1.1. Configuring persistent VNC sessions">Section 14.4.1.1, “Configuring persistent VNC sessions”</a>, you can join it with
     your VNC viewer. After your VNC client connects to the server, you are
     prompted to choose whether you want to create a new session or join the
     existing one:
    </p><div class="figure" id="id-1.3.3.15.6.4.5.3"><div class="figure-contents"><div class="mediaobject"><a href="images/vncmanager_whether.png"><img src="images/vncmanager_whether.png" width="80%" alt="Joining a persistent VNC session" title="Joining a persistent VNC session"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 14.9: </span><span class="title-name">Joining a persistent VNC session </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.15.6.4.5.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div><p>
     After you click the name of the existing session, you may be asked for
     login credentials, depending on the persistent session settings.
    </p></section></section></section><section class="sect1" id="sec-vnc-encrypt" data-id-title="Configuring encryption on the VNC server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">14.5 </span><span class="title-name">Configuring encryption on the VNC server</span></span> <a title="Permalink" class="permalink" href="#sec-vnc-encrypt">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If the VNC server is set up properly, all communication between the VNC
   server and the client is encrypted. The authentication happens at the
   beginning of the session; the actual data transfer only begins afterward.
  </p><p>
   Whether for a one-time or a persistent VNC session, security options are
   configured via the <code class="option">-securitytypes</code> parameter of the
   <code class="command">/usr/bin/Xvnc</code> command located on the
   <code class="literal">server_args</code> line. The <code class="option">-securitytypes</code>
   parameter selects both authentication method and encryption. It has the
   following options:
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Authentications </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.15.7.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.3.15.7.4.2"><span class="term">None, TLSNone, x509None</span></dt><dd><p>
      No authentication.
     </p></dd><dt id="id-1.3.3.15.7.4.3"><span class="term">VncAuth, TLSVnc, x509Vnc</span></dt><dd><p>
      Authentication using custom password.
     </p></dd><dt id="id-1.3.3.15.7.4.4"><span class="term">Plain, TLSPlain, x509Plain</span></dt><dd><p>
      Authentication using PAM to verify user's password.
     </p></dd></dl></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Encryptions </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.15.7.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.3.15.7.5.2"><span class="term">None, vncAuth, plain</span></dt><dd><p>
      No encryption.
     </p></dd><dt id="id-1.3.3.15.7.5.3"><span class="term">TLSNone, TLSVnc, TLSPlain</span></dt><dd><p>
      Anonymous TLS encryption. Everything is encrypted, but there is no
      verification of the remote host. So you are protected against passive
      attackers, but not against man-in-the-middle attackers.
     </p></dd><dt id="id-1.3.3.15.7.5.4"><span class="term">X509None, x509Vnc, x509Plain</span></dt><dd><p>
      TLS encryption with certificate. If you use a self-signed certificate,
      you will be asked to verify it on the first connection. On subsequent
      connections you will be warned only if the certificate changed. So you
      are protected against everything except man-in-the-middle on the first
      connection (similar to typical SSH usage). If you use a certificate
      signed by a certificate authority matching the machine name, then you get
      full security (similar to typical HTTPS usage).
     </p><div id="id-1.3.3.15.7.5.4.2.2" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
       Certain VNC clients refuse to establish a secure connection via the
       default self-signed certificate. For example, the Vinagre client verifies
       the certification against the GnuTLS global trust store and fails if the
       certificate is self-signed. In such a case, either use an encryption
       method other than <code class="literal">x509</code>, or generate a properly signed
       certificate for the VNC server and import it to the client's system trust
       store.
      </p></div><div id="id-1.3.3.15.7.5.4.2.3" data-id-title="Path to certificate and key" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Path to certificate and key</div><p>
       With X509 based encryption, you need to specify the path to the X509
       certificate and the key with <code class="option">-X509Cert</code> and
       <code class="option">-X509Key</code> options.
      </p></div></dd></dl></div><p>
   If you select multiple security types separated by comma, the first one
   supported and allowed by both client and server is used. That way, you can
   configure opportunistic encryption on the server. This is useful if you need
   to support VNC clients that do not support encryption.
  </p><p>
   On the client, you can also specify the allowed security types to prevent a
   downgrade attack if you are connecting to a server which you know has
   encryption enabled (although our vncviewer warns you with the
   <code class="literal">Connection not encrypted!</code> message in that case).
  </p></section><section class="sect1" id="sec-vnc-wayland" data-id-title="Compatibility with Wayland"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">14.6 </span><span class="title-name">Compatibility with Wayland</span></span> <a title="Permalink" class="permalink" href="#sec-vnc-wayland">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/vnc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The Remote Administration (VNC) feature relies on X11 and may result in an
    empty screen if Wayland is enabled.

    The display manager must be configured to use X11 instead of Wayland.

    For <span class="package">gdm</span>, edit <code class="filename">/etc/gdm/custom.conf</code>.
    In the <code class="literal">[daemon]</code> section, add
    <code class="literal">WaylandEnable=false</code> to the configuration file.

    When logging in, the user must choose an X11-compatible session as well.

    If you wish to remove the Wayland option for GNOME, you can remove and lock
    the <span class="package">gnome-session-wayland</span> package.
  </p></section></section><section class="chapter" id="cha-net-rsync" data-id-title="File copying with RSync"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">15 </span><span class="title-name">File copying with RSync</span></span> <a title="Permalink" class="permalink" href="#cha-net-rsync">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Today, a typical user has several computers: home and workplace machines, a
    laptop, a smartphone or a tablet. This makes the task of keeping files and
    documents in synchronization across multiple devices all the more important.
   </p></div></div></div></div><div id="id-1.3.3.16.3" data-id-title="Risk of data loss" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Risk of data loss</div><p>
   Before you start using a synchronization tool, you should familiarize
   yourself with its features and functionality. Make sure to back up your
   important files.
  </p></div><section class="sect1" id="sec-net-rsync-overview" data-id-title="Conceptual overview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.1 </span><span class="title-name">Conceptual overview</span></span> <a title="Permalink" class="permalink" href="#sec-net-rsync-overview">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For synchronizing a large amount of data over a slow network connection,
   Rsync offers a reliable method of transmitting only changes within files.
   This applies not only to text files but also binary files. To detect the
   differences between files, Rsync subdivides the files into blocks and
   computes check sums over them.
  </p><p>
   Detecting changes requires certain computing power. So make sure that
   machines on both ends have enough resources, including RAM.
  </p><p>
   Rsync can be particularly useful when large amounts of data containing only
   minor changes need to be transmitted regularly. This is often the case when
   working with backups. Rsync can also be useful for mirroring staging servers
   that store complete directory trees of Web servers to a Web server in a DMZ.
  </p><p>
   Despite its name, Rsync is not a synchronization tool. Rsync is a tool that
   copies data only in one direction at a time. It does not and cannot do the
   reverse. If you need a bidirectional tool which can synchronize both
   source and destination, use Csync.
  </p></section><section class="sect1" id="sec-net-rsync-syntax" data-id-title="Basic syntax"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.2 </span><span class="title-name">Basic syntax</span></span> <a title="Permalink" class="permalink" href="#sec-net-rsync-syntax">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Rsync is a command-line tool that has the following basic syntax:
  </p><div class="verbatim-wrap"><pre class="screen">rsync [OPTION] SOURCE [SOURCE]... DEST</pre></div><p>
   You can use Rsync on any local or remote machine, provided you have access
   and write permissions. It is possible to have multiple
   <em class="replaceable">SOURCE</em> entries. The
   <em class="replaceable">SOURCE</em> and <em class="replaceable">DEST</em>
   placeholders can be paths, URLs or both.
  </p><p>
   Below are the most common Rsync options:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.16.5.6.1"><span class="term"><code class="option">-v</code>
    </span></dt><dd><p>
      Outputs more verbose text
     </p></dd><dt id="id-1.3.3.16.5.6.2"><span class="term"><code class="option">-a</code>
    </span></dt><dd><p>
      Archive mode; copies files recursively and preserves time stamps,
      user/group ownership, file permissions, and symbolic links
     </p></dd><dt id="id-1.3.3.16.5.6.3"><span class="term"><code class="option">-z</code>
    </span></dt><dd><p>
      Compresses the transmitted data
     </p></dd></dl></div><div id="id-1.3.3.16.5.7" data-id-title="Trailing slashes count" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Trailing slashes count</div><p>
    When working with Rsync, you should pay particular attention to trailing
    slashes. A trailing slash after the directory denotes the
    <span class="emphasis"><em>content</em></span> of the directory. No trailing slash denotes
    the <span class="emphasis"><em>directory itself</em></span>.
   </p></div></section><section class="sect1" id="sec-net-rsync-local-copy" data-id-title="Copying files and directories locally"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.3 </span><span class="title-name">Copying files and directories locally</span></span> <a title="Permalink" class="permalink" href="#sec-net-rsync-local-copy">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The following description assumes that the current user has write
   permissions to the directory <code class="filename">/var/backup</code>. To copy a
   single file from one directory on your machine to another path, use the
   following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> -avz backup.tar.xz /var/backup/</pre></div><p>
   The file <code class="filename">backup.tar.xz</code> is copied to
   <code class="filename">/var/backup/</code>; the absolute path is
   <code class="filename">/var/backup/backup.tar.xz</code>.
  </p><p>
   Do not forget to add the <span class="emphasis"><em>trailing slash</em></span> after the
   <code class="filename">/var/backup/</code> directory. If you do not insert the slash,
   the file <code class="filename">backup.tar.xz</code> is copied to
   <code class="filename">/var/backup</code> (file) <span class="emphasis"><em>not</em></span> inside the
   directory <code class="filename">/var/backup/</code>!
  </p><p>
   Copying a directory is similar to copying a single file. The following
   example copies the directory <code class="filename">tux/</code> and
   its content into the directory <code class="filename">/var/backup/</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> -avz tux /var/backup/</pre></div><p>
   Find the copy in the absolute path
   <code class="filename">/var/backup/tux/</code>.
  </p></section><section class="sect1" id="sec-net-rsync-remote-copy" data-id-title="Copying files and directories remotely"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.4 </span><span class="title-name">Copying files and directories remotely</span></span> <a title="Permalink" class="permalink" href="#sec-net-rsync-remote-copy">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The Rsync tool is required on both machines. To copy files from or to remote
   directories requires an IP address or a domain name. A user name is optional
   if your current user names on the local and remote machine are the same.
  </p><p>
   To copy the file <code class="filename">file.tar.xz</code> from your local host to
   the remote host
   <code class="systemitem">192.168.1.1</code> with
   same users (being local and remote), use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> -avz file.tar.xz  tux@192.168.1.1:</pre></div><p>
   Depending on what you prefer, these commands are also possible and
   equivalent:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> -avz file.tar.xz 192.168.1.1:~
<code class="prompt user">&gt; </code><code class="command">rsync</code> -avz file.tar.xz 192.168.1.1:/home/tux</pre></div><p>
   In all cases with standard configuration, you are prompted to enter your
   passphrase of the remote user. This command copies
   <code class="filename">file.tar.xz</code> to the home directory of user <code class="systemitem">tux</code>
   (normally <code class="filename">/home/tux</code>).
  </p><p>
   Copying a directory remotely is similar to copying a directory locally. The
   following example copies the directory
   <code class="filename">tux/</code> and its content into the remote
   directory <code class="filename">/var/backup/</code> on the
   <code class="systemitem">192.168.1.1</code> host:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> -avz tux 192.168.1.1:/var/backup/</pre></div><p>
   Assuming you have write permissions on the host
   <code class="systemitem">192.168.1.1</code>, you can
   find the copy in the absolute path
   <code class="filename">/var/backup/tux</code>.
  </p></section><section class="sect1" id="sec-net-rsync-server" data-id-title="Configuring and using an rsync server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.5 </span><span class="title-name">Configuring and using an rsync server</span></span> <a title="Permalink" class="permalink" href="#sec-net-rsync-server">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Rsync can run as a daemon
   (<code class="systemitem">rsyncd</code>) listening on default
   port 873 for incoming connections. This daemon can receive <span class="quote">“<span class="quote">copying
   targets</span>”</span>.
  </p><p>
   The following description explains how to create an Rsync server on a
    <code class="systemitem">jupiter</code> host with a <span class="emphasis"><em>backup</em></span>
    target.  This target can be used to store your backups. To create an Rsync
    server, do the following:
  </p><div class="procedure" id="id-1.3.3.16.8.4" data-id-title="Setting up an rsync server"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 15.1: </span><span class="title-name">Setting up an rsync server </span></span><a title="Permalink" class="permalink" href="#id-1.3.3.16.8.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step" id="st-rsync-server-mkdir"><p>
     On jupiter, create a directory to store all your backup files. In this
     example, we use <code class="filename">/var/backup</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">mkdir</code> /var/backup</pre></div></li><li class="step"><p>
     Specify ownership. In this case, the directory is owned by user
     <code class="systemitem">tux</code> in group
     <code class="systemitem">users</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">chown</code> tux.users /var/backup</pre></div></li><li class="step"><p>
     Configure the rsyncd daemon.
    </p><p>
     We separate the configuration file into a main file and certain
     <span class="quote">“<span class="quote">modules</span>”</span> which hold your backup target. This makes it easier
     to add additional targets later. Global values can be stored in
     <code class="filename">/etc/rsyncd.d/*.inc</code> files, whereas your modules are
     placed in <code class="filename">/etc/rsyncd.d/*.conf</code> files:
    </p><ol type="a" class="substeps"><li class="step"><p>
       Create a directory <code class="filename">/etc/rsyncd.d/</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">mkdir</code> /etc/rsyncd.d/</pre></div></li><li class="step"><p>
       In the main configuration file <code class="filename">/etc/rsyncd.conf</code>,
       add the following lines:
      </p><div class="verbatim-wrap"><pre class="screen"># rsyncd.conf main configuration file
log file = /var/log/rsync.log
pid file = /var/lock/rsync.lock

&amp;merge /etc/rsyncd.d <span class="callout" id="co-rsync-conf-merge">1</span>
&amp;include /etc/rsyncd.d <span class="callout" id="co-rsync-conf-include">2</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-merge"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Merges global values from <code class="filename">/etc/rsyncd.d/*.inc</code>
         files into the main configuration file.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-include"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Loads any modules (or targets) from
         <code class="filename">/etc/rsyncd.d/*.conf</code> files. These files should
         not contain any references to global values.
        </p></td></tr></table></div></li><li class="step"><p>
       Create your module (your backup target) in the file
       <code class="filename">/etc/rsyncd.d/backup.conf</code> with the following lines:
      </p><div class="verbatim-wrap"><pre class="screen"># backup.conf: backup module
[backup] <span class="callout" id="co-rsync-conf-target">1</span>
   uid = tux <span class="callout" id="co-rsync-conf-uid-gid">2</span>
   gid = users <a class="xref" href="#co-rsync-conf-uid-gid"><span class="callout">2</span></a>
   path = /var/backup <span class="callout" id="co-rsync-conf-path">3</span>
   auth users = tux  <span class="callout" id="co-rsync-conf-authusers">4</span>
   secrets file = /etc/rsyncd.secrets <span class="callout" id="co-rsync-conf-secretfiles">5</span>
   comment = Our backup target</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-target"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         The <span class="emphasis"><em>backup</em></span> target. You can use any name you like.
         However, it is a good idea to name a target according to its purpose
         and use the same name in your <code class="filename">*.conf</code> file.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-uid-gid"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Specifies the user name or group name that is used when the file
         transfer takes place.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-path"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Defines the path to store your backups (from
         <a class="xref" href="#st-rsync-server-mkdir" title="Step 1">Step 1</a>).
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-authusers"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Specifies a comma-separated list of allowed users. In its simplest
         form, it contains the user names that are allowed to connect to this
         module. In our case, only user <code class="systemitem">tux</code> is allowed.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-rsync-conf-secretfiles"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         Specifies the path of a file that contains lines with user names and
         plain passwords.
        </p></td></tr></table></div></li><li class="step"><p>
       Create the <code class="filename">/etc/rsyncd.secrets</code> file with the
       following content and replace <em class="replaceable">PASSPHRASE</em>:
      </p><div class="verbatim-wrap"><pre class="screen"># user:passwd
tux:<em class="replaceable">PASSPHRASE</em></pre></div></li><li class="step"><p>
       Make sure the file is only readable by <code class="systemitem">root</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">chmod</code> 0600 /etc/rsyncd.secrets</pre></div></li></ol></li><li class="step"><p>
     Start and enable the rsyncd daemon with:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">systemctl</code> enable rsyncd
<code class="prompt root"># </code><code class="command">systemctl</code> start rsyncd</pre></div></li><li class="step"><p>
     Test the access to your Rsync server:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">rsync</code> jupiter::</pre></div><p>
     You should see a response that looks like this:
    </p><div class="verbatim-wrap"><pre class="screen">backup          Our backup target</pre></div><p>
     Otherwise, check your configuration file, firewall and network settings.
    </p></li></ol></div></div><p>
   The above steps create an Rsync server that can now be used to store backups.
   The example also creates a log file listing all connections. This file is
   stored in <code class="filename">/var/log/rsyncd.log</code>. This is useful to debug
   your transfers.
  </p><p>
   To list the content of your backup target, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rsync -avz jupiter::backup</pre></div><p>
   This command lists all files present in the directory
   <code class="filename">/var/backup</code> on the server. This request is also logged
   in the log file <code class="filename">/var/log/rsyncd.log</code>. To start an actual
   transfer, provide a source directory. Use <code class="literal">.</code> for the
   current directory. For example, the following command copies the current
   directory to your Rsync backup server:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rsync -avz . jupiter::backup</pre></div><p>
   By default, Rsync does not delete files and directories when it runs. To
   enable deletion, the additional option <code class="option">--delete</code> must be
   stated. To ensure that no newer files are deleted, the option
   <code class="option">--update</code> can be used instead. Any conflicts that arise must
   be resolved manually.
  </p></section><section class="sect1" id="sec-net-rsync-summary" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.6 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-net-rsync-summary">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sync.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.3.16.9.2.1"><span class="term">Csync</span></dt><dd><p>
      Bidirectional file synchronization tool, see
      <a class="link" href="https://csync.org/" target="_blank">https://csync.org/</a>.
     </p></dd><dt id="id-1.3.3.16.9.2.2"><span class="term">RSnapshot</span></dt><dd><p>
      Creates incremental backups, see
      <a class="link" href="https://rsnapshot.org" target="_blank">https://rsnapshot.org</a>.
     </p></dd><dt id="id-1.3.3.16.9.2.3"><span class="term">Unison</span></dt><dd><p>
      A file synchronization tool similar to CSync but with a graphical
      interface, see <a class="link" href="https://github.com/bcpierce00/unison" target="_blank">https://github.com/bcpierce00/unison</a>.
     </p></dd><dt id="id-1.3.3.16.9.2.4"><span class="term">Rear</span></dt><dd><p>
      A disaster recovery framework, see the
      <a class="link" href="https://documentation.suse.com/sle-ha/15/html/SLE-HA-all/cha-ha-rear.html" target="_blank"><em class="citetitle">Administration
      Guide</em> of the SUSE Linux Enterprise High Availability, chapter <em class="citetitle">Disaster Recovery with Rear (Relax-and-Recover)</em></a>.
     </p></dd></dl></div></section></section></div><div class="part" id="part-boot" data-id-title="Booting a Linux system"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part II </span><span class="title-name">Booting a Linux system </span></span><a title="Permalink" class="permalink" href="#part-boot">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_administration.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#cha-boot"><span class="title-number">16 </span><span class="title-name">Introduction to the boot process</span></a></span></li><dd class="toc-abstract"><p>
    Booting a Linux system involves different components and tasks. After a
    firmware and hardware initialization process, which depends on the
    machine's architecture, the kernel is started by the boot loader
    GRUB 2. After this point, the boot process is controlled by the
    operating system and handled by <code class="systemitem">systemd</code>.  <code class="systemitem">systemd</code> provides a set of
    <span class="quote">“<span class="quote">targets</span>”</span> that boot configurations for everyday usage,
    maintenance or emergencies.
   </p></dd><li><span class="chapter"><a href="#cha-uefi"><span class="title-number">17 </span><span class="title-name">UEFI (Unified Extensible Firmware Interface)</span></a></span></li><dd class="toc-abstract"><p>
  UEFI (Unified Extensible Firmware Interface) is the interface between the
  firmware that comes with the system hardware, all the hardware components of
  the system, and the operating system.
 </p></dd><li><span class="chapter"><a href="#cha-grub2"><span class="title-number">18 </span><span class="title-name">The boot loader GRUB 2</span></a></span></li><dd class="toc-abstract"><p>
        This chapter describes how to configure GRUB 2, the boot loader used in
        <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span>. <span class="phrase">It is the successor to the
        traditional GRUB boot loader—now called <span class="quote">“<span class="quote">GRUB
        Legacy</span>”</span>. GRUB 2 has been the default boot loader in
        <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> since version 12.</span> A YaST module is
        available for configuring the most important settings. The boot
        procedure as a whole is outlined in <a class="xref" href="#cha-boot" title="Chapter 16. Introduction to the boot process">Chapter 16, <em>Introduction to the boot process</em></a>. For
        details on Secure Boot support for UEFI machines, see
        <a class="xref" href="#cha-uefi" title="Chapter 17. UEFI (Unified Extensible Firmware Interface)">Chapter 17, <em>UEFI (Unified Extensible Firmware Interface)</em></a>.
      </p></dd><li><span class="chapter"><a href="#cha-systemd"><span class="title-number">19 </span><span class="title-name">The <code class="systemitem">systemd</code> daemon</span></a></span></li><dd class="toc-abstract"><p>systemd initializes the system. It has the process ID 1. systemd is started directly by the kernel and resists signal 9, which normally terminates processes. All other programs are started directly by systemd or by one of its child processes. systemd is a replacement for the System V init daemon and…</p></dd></ul></div><section class="chapter" id="cha-boot" data-id-title="Introduction to the boot process"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">16 </span><span class="title-name">Introduction to the boot process</span></span> <a title="Permalink" class="permalink" href="#cha-boot">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Booting a Linux system involves different components and tasks. After a
    firmware and hardware initialization process, which depends on the
    machine's architecture, the kernel is started by the boot loader
    GRUB 2. After this point, the boot process is controlled by the
    operating system and handled by <code class="systemitem">systemd</code>.  <code class="systemitem">systemd</code> provides a set of
    <span class="quote">“<span class="quote">targets</span>”</span> that boot configurations for everyday usage,
    maintenance or emergencies.
   </p></div></div></div></div><section class="sect1" id="sec-boot-terminology" data-id-title="Terminology"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">16.1 </span><span class="title-name">Terminology</span></span> <a title="Permalink" class="permalink" href="#sec-boot-terminology">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   This chapter uses terms that can be interpreted ambiguously. To
   understand how they are used here, read the definitions below:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.2.3.3.1"><span class="term"><code class="systemitem">init</code></span></dt><dd><p>
      Two different processes are commonly named <span class="quote">“<span class="quote">init</span>”</span>:
     </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        The <code class="systemitem">initramfs</code> process mounting the root
        file system
       </p></li><li class="listitem"><p>
        The operating system process that starts all other processes that is
        executed from the real root file system
       </p></li></ul></div><p>
      In both cases, the <code class="systemitem">systemd</code> program is taking care of this task. It is
      first executed from the <code class="systemitem">initramfs</code> to mount the
      root file system. When that has succeeded, it is re-executed from the
      root file system as the initial process. To avoid confusing these two
      <code class="systemitem">systemd</code> processes, we refer to the first process as <span class="emphasis"><em>init on
      initramfs</em></span> and to the second one as
      <span class="emphasis"><em>systemd</em></span>.
     </p></dd><dt id="id-1.3.4.2.3.3.2"><span class="term">
     <code class="systemitem">initrd</code>/<code class="systemitem">initramfs</code>
    </span></dt><dd><p>
      An <code class="systemitem">initrd</code> (initial RAM disk) is an image file
      containing a root file system image which is loaded by the kernel and
      mounted from <code class="filename">/dev/ram</code> as the temporary root file
      system. Mounting this file system requires a file system driver.
     </p><p>
      Beginning with kernel 2.6.13, the initrd has been replaced by the
      <code class="systemitem">initramfs</code> (initial RAM file system), which does
      not require a file system driver to be mounted. <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> exclusively
      uses an <code class="systemitem">initramfs</code>. However, since the
      <code class="systemitem">initramfs</code> is stored as
      <code class="filename">/boot/initrd</code>, it is often called
      <span class="quote">“<span class="quote">initrd</span>”</span>. In this chapter we exclusively use the name
      <code class="systemitem">initramfs</code>.
     </p></dd></dl></div></section><section class="sect1" id="sec-boot-proc" data-id-title="The Linux boot process"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">16.2 </span><span class="title-name">The Linux boot process</span></span> <a title="Permalink" class="permalink" href="#sec-boot-proc">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The Linux boot process consists of several stages, each represented by a
   different component:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
     <a class="xref" href="#sec-boot-proc-initialization" title="16.2.1. The initialization and boot loader phase">Section 16.2.1, “The initialization and boot loader phase”</a>
    </p></li><li class="listitem"><p>
     <a class="xref" href="#sec-boot-proc-kernel" title="16.2.2. The kernel phase">Section 16.2.2, “The kernel phase”</a>
    </p></li><li class="listitem"><p>
     <a class="xref" href="#sec-boot-initramfs" title="16.2.3. The init on initramfs phase">Section 16.2.3, “The init on initramfs phase”</a>
    </p></li><li class="listitem"><p>
     <a class="xref" href="#sec-boot-systemd" title="16.2.4. The systemd phase">Section 16.2.4, “The systemd phase”</a>
    </p></li></ol></div><section class="sect2" id="sec-boot-proc-initialization" data-id-title="The initialization and boot loader phase"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">16.2.1 </span><span class="title-name">The initialization and boot loader phase</span></span> <a title="Permalink" class="permalink" href="#sec-boot-proc-initialization">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    During the initialization phase, the machine's hardware is set up, and the
    devices are prepared. This process differs across hardware architectures.
   </p><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> uses the boot loader GRUB 2 on all architectures. Depending
    on the architecture and firmware, starting the GRUB 2 boot loader can be a
    multi-step process. The purpose of the boot loader is to load the kernel
    and the initial, RAM-based file system (initramfs). For more information
    about GRUB 2, refer to <a class="xref" href="#cha-grub2" title="Chapter 18. The boot loader GRUB 2">Chapter 18, <em>The boot loader GRUB 2</em></a>.
   </p><section class="sect3" id="sec-boot-proc-initialization-x86-aarch" data-id-title="Initialization and boot loader phase on AArch64 and AMD64/Intel 64"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">16.2.1.1 </span><span class="title-name">Initialization and boot loader phase on AArch64 and AMD64/Intel 64</span></span> <a title="Permalink" class="permalink" href="#sec-boot-proc-initialization-x86-aarch">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     After turning on the computer, the BIOS or the UEFI initializes the screen
     and keyboard, and tests the main memory. Up to this stage, the machine
     does not access any mass storage media. Subsequently, the information
     about the current date, time and the most important peripherals are
     loaded from the CMOS values. When the boot media and its geometry are
     recognized, the system control passes from the BIOS/UEFI to the boot
     loader.
    </p><p>
     On a machine equipped with a traditional BIOS, only code from the first
     physical 512-byte data sector (the Master Boot Record, MBR) of the boot
     disk can be loaded. Only a minimal GRUB 2 fits into the MBR. Its sole
     purpose is to load a GRUB 2 core image containing file system drivers from
     the gap between the MBR and the first partition (MBR partition table) or
     from the BIOS boot partition (GPT partition table). This image contains
     file system drivers and therefore is able to access
     <code class="filename">/boot</code> located on the root file
     system. <code class="filename">/boot</code> contains additional modules for GRUB 2
     core as well as the kernel and the initramfs image. When it has access to
     this partition, GRUB 2 loads the kernel and the initramfs image into
     memory and hands control over to the kernel.
    </p><p>
     When booting a BIOS system from an encrypted file system that includes an
     encrypted <code class="filename">/boot</code> partition, you need to enter the
     password for decryption twice. It is first needed by GRUB 2 to decrypt
     <code class="filename">/boot</code> and then for <code class="systemitem">systemd</code> to mount the encrypted
     volumes.
    </p><p>
     On machines with UEFI the boot process is much simpler than on machines
     with a traditional BIOS. The firmware is able to read from a FAT formatted
     system partition of disks with a GPT partition table. This EFI
     system-partition (in the running system mounted as
     <code class="filename">/boot/efi</code>) holds enough space to host a fully fledged
     GRUB 2 which is directly loaded and executed by the firmware.
    </p><p>
     If the BIOS/UEFI supports network booting, it is also possible to configure
     a boot server that provides the boot loader. The system can then be booted
     via PXE. The BIOS/UEFI acts as the boot loader. It gets the boot image from
     the boot server and starts the system, independent of local hard disks.
    </p></section><section class="sect3" id="sec-boot-proc-initialization-zsystems" data-id-title="Initialization and boot loader phase on IBM Z"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">16.2.1.2 </span><span class="title-name">
     Initialization and boot loader phase on IBM Z
    </span></span> <a title="Permalink" class="permalink" href="#sec-boot-proc-initialization-zsystems">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     On IBM Z the boot process must be initialized by a boot loader
     called <code class="command">zipl</code> (z initial program load). Although
     <code class="command">zipl</code> supports reading from multiple file systems, it
     does not support the SLE default file system (Btrfs) or booting from
     snapshots. <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> therefore uses a two-stage boot process that
     ensures full Btrfs support at boot-time:
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       <code class="command">zipl</code> boots from the partition
       <code class="filename">/boot/zipl</code>, which can be formatted with the Ext2,
       Ext3, Ext4, or XFS file system. This partition contains a minimal kernel
       and an initramfs that are loaded into memory. The initramfs contains a
       Btrfs driver (among others) and the boot loader GRUB 2. The kernel is
       started with a parameter <code class="literal">initgrub</code>, which tells it to
       start GRUB 2.
      </p></li><li class="step"><p>
       The kernel mounts the root file system, so <code class="filename">/boot</code>
       becomes accessible. Now GRUB 2 is started from the initramfs. It reads
       its configuration from <code class="filename">/boot/grub2/grub.cfg</code> and
       loads the final kernel and initramfs from
       <code class="filename">/boot</code>. The new kernel now gets loaded via Kexec.
      </p></li></ol></div></div></section></section><section class="sect2" id="sec-boot-proc-kernel" data-id-title="The kernel phase"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">16.2.2 </span><span class="title-name">The kernel phase</span></span> <a title="Permalink" class="permalink" href="#sec-boot-proc-kernel">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When the boot loader has passed on system control, the boot process is the
    same on all architectures. The boot loader loads both the kernel and an
    initial RAM-based file system (<code class="systemitem">initramfs</code>) into
    memory and the kernel takes over.
   </p><p>
    After the kernel has set up memory management and has detected the CPU type
    and its features, it initializes the hardware and mounts the temporary root
    file system from the memory that was loaded with the
    <code class="systemitem">initramfs</code>.
   </p><section class="sect3" id="sec-boot-initrd" data-id-title="The initramfs file"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">16.2.2.1 </span><span class="title-name">The <code class="systemitem">initramfs</code> file</span></span> <a title="Permalink" class="permalink" href="#sec-boot-initrd">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     <code class="systemitem">initramfs</code> (initial RAM file system) is a small
     cpio archive that the kernel can load into a RAM disk. It is located at
     <code class="filename">/boot/initrd</code>. It can be created with a tool called
     <code class="command">dracut</code>—refer to <code class="command">man 8 dracut</code>
     for details.
    </p><p>
     The <code class="systemitem">initramfs</code> provides a minimal Linux
     environment that enables the execution of programs before the actual root
     file system is mounted. This minimal Linux environment is loaded into
     memory by BIOS or UEFI routines and does not have specific hardware
     requirements other than sufficient memory. The
     <code class="systemitem">initramfs</code> archive must always provide an
     executable named <code class="systemitem">init</code> that executes the <code class="systemitem">systemd</code>
     daemon on the root file system for the boot process to proceed.
    </p><p>
     Before the root file system can be mounted and the operating system can be
     started, the kernel needs the corresponding drivers to access the device
     on which the root file system is located. These drivers may include
     special drivers for certain kinds of hard disks or even network drivers to
     access a network file system. The needed modules for the root file system
     are loaded by <code class="systemitem">init</code> on
     <code class="systemitem">initramfs</code>. After the modules are loaded,
     <code class="systemitem">udev</code> provides the
     <code class="systemitem">initramfs</code> with the needed devices. Later in the
     boot process, after changing the root file system, it is necessary to
     regenerate the devices. This is done by the <code class="systemitem">systemd</code> unit
     <code class="filename">systemd-udev-trigger.service</code>.
    </p><section class="sect4" id="sec-boot-initrd-regenerate" data-id-title="Regenerating the initramfs"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">16.2.2.1.1 </span><span class="title-name">Regenerating the initramfs</span></span> <a title="Permalink" class="permalink" href="#sec-boot-initrd-regenerate">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Because the <code class="systemitem">initramfs</code> contains drivers, it needs
      to be updated whenever a new version of one of its drivers is available.
      This is done automatically when installing the package containing the
      driver update. YaST or zypper informs you about this by showing the
      output of the command that generates the
      <code class="systemitem">initramfs</code>. However, there are specific occasions
      when you need to regenerate an <code class="systemitem">initramfs</code>
      manually:
     </p><div class="variablelist"><dl class="variablelist"><dt id="var-initrd-regenerate-drivers"><span class="term">Adding drivers because of hardware changes</span></dt><dd><p>
         If you need to change hardware, for example, hard disks, and this
         hardware requires different drivers to be in the kernel at boot time,
         you must update the <code class="systemitem">initramfs</code> file.
        </p><p>
         Open or create
         <code class="filename">/etc/dracut.conf.d/10-<em class="replaceable">DRIVER</em>.conf</code>
         and add the following line (mind the leading blank space):
        </p><div class="verbatim-wrap"><pre class="screen">force_drivers+=" <em class="replaceable">DRIVER1</em> "</pre></div><p>
         Replace <em class="replaceable">DRIVER1</em> with the module name of the
         driver. If you need to add more than one driver, list them
         space-separated:
        </p><div class="verbatim-wrap"><pre class="screen">force_drivers+=" <em class="replaceable">DRIVER1</em> <em class="replaceable">DRIVER2</em> "</pre></div><p>
         Proceed with <a class="xref" href="#pro-generate-initramfs" title="Generate an initramfs">Procedure 16.1, “Generate an initramfs”</a>.
        </p></dd><dt id="var-initrd-regenerate-raidroot"><span class="term">Moving system directories to a RAID or LVM</span></dt><dd><p>
         Whenever you move swap files, or system directories like
         <code class="filename">/usr</code> in a running system to a RAID or logical
         volume, you need to create an <code class="systemitem">initramfs</code> that
         contains support for software RAID or LVM drivers.
        </p><p>
         To do so, create the respective entries in
         <code class="filename">/etc/fstab</code> and mount the new entries (for example
         with <code class="command">mount -a</code> and/or <code class="command">swapon -a</code>).
        </p><p>
         Proceed with <a class="xref" href="#pro-generate-initramfs" title="Generate an initramfs">Procedure 16.1, “Generate an initramfs”</a>.
        </p></dd><dt id="var-initrd-regenerate-lvmadd"><span class="term">Adding disks to an LVM group or Btrfs RAID containing the root
        file system</span></dt><dd><p>
         Whenever you add (or remove) a disk to a logical volume group
         or a Btrfs RAID containing the root file system, you need to create an
         <code class="systemitem">initramfs</code> that contains support for the
         enlarged volume. Follow the instructions at <a class="xref" href="#pro-generate-initramfs" title="Generate an initramfs">Procedure 16.1, “Generate an initramfs”</a>.
        </p><p>
         Proceed with <a class="xref" href="#pro-generate-initramfs" title="Generate an initramfs">Procedure 16.1, “Generate an initramfs”</a>.
        </p></dd><dt id="var-initrd-regenerate-kernelvars"><span class="term">Changing kernel variables</span></dt><dd><p>
         If you change the values of kernel variables via the
         <code class="command">sysctl</code> interface by editing related files
         (<code class="filename">/etc/sysctl.conf</code> or
         <code class="filename">/etc/sysctl.d/*.conf</code>), the change will be lost on
         the next system reboot. Even if you load the values with <code class="command">sysctl
         --system</code> at runtime, the changes are not saved into the
         <code class="systemitem">initramfs</code> file. You need to update it by
         proceeding as outlined in <a class="xref" href="#pro-generate-initramfs" title="Generate an initramfs">Procedure 16.1, “Generate an initramfs”</a>.
        </p></dd><dt id="id-1.3.4.2.4.5.4.5.3.5"><span class="term">Adding or removing swap devices, re-creating swap area</span></dt><dd><p>
              Whenever you add or remove a swap device, or re-create a swap area
              with a different UUID, update the initramfs as
              outlined in <a class="xref" href="#pro-generate-initramfs" title="Generate an initramfs">Procedure 16.1, “Generate an initramfs”</a>. You may also
              need to update <code class="option">GRUB_CMDLINE_*</code> variables that
              include the <code class="option">resume=</code> option in
              <code class="filename">/etc/default/grub</code>, and then regenerate
              <code class="filename">/boot/grub2/grub.cfg</code> as outlined in <a class="xref" href="#sec-grub2-cfg" title="18.2.1. The file /boot/grub2/grub.cfg">Section 18.2.1, “The file <code class="filename">/boot/grub2/grub.cfg</code>”</a>.
            </p></dd></dl></div><div class="procedure" id="pro-generate-initramfs" data-id-title="Generate an initramfs"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 16.1: </span><span class="title-name">Generate an initramfs </span></span><a title="Permalink" class="permalink" href="#pro-generate-initramfs">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><div id="id-1.3.4.2.4.5.4.5.4.2" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
          All commands in the following procedure need to be executed as the
          <code class="systemitem">root</code> user.
        </p></div><ol class="procedure" type="1"><li class="step"><p>
        Enter your <code class="filename">/boot</code> directory:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cd /boot</pre></div></li><li class="step"><p>
        Generate a new <code class="systemitem">initramfs</code> file with
        <code class="command">dracut</code>, replacing 
        <em class="replaceable">MY_INITRAMFS</em> with a file name of
        your choice:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>dracut <em class="replaceable">MY_INITRAMFS</em></pre></div><p>
        Alternatively, run <code class="command">dracut -f</code>
        <em class="replaceable">FILENAME</em>
        to replace an existing init file.
       </p></li><li class="step"><p>
        (Skip this step if you ran <code class="command">dracut -f</code> in the previous
        step.) Create a symbolic link from the <code class="systemitem">initramfs</code> 
        file you created in the previous step to <code class="systemitem">initrd</code>:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code> ln -sf <em class="replaceable">MY_INITRAMFS</em> <code class="systemitem">initrd</code></pre></div></li><li class="step"><p>
        On the IBM Z architecture, additionally run
        <code class="command">grub2-install</code>.
       </p></li></ol></div></div></section></section></section><section class="sect2" id="sec-boot-initramfs" data-id-title="The init on initramfs phase"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">16.2.3 </span><span class="title-name">The init on initramfs phase</span></span> <a title="Permalink" class="permalink" href="#sec-boot-initramfs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The temporary root file system mounted by the kernel from the
    <code class="systemitem">initramfs</code> contains the executable <code class="systemitem">systemd</code> (which
    is called <code class="systemitem">init</code> on
    <code class="systemitem">initramfs</code> in the following, also see <a class="xref" href="#sec-boot-terminology" title="16.1. Terminology">Section 16.1, “Terminology”</a>. This program performs all actions needed
    to mount the proper root file system. It provides kernel functionality for
    the needed file system and device drivers for mass storage controllers with
    <code class="systemitem">udev</code>.
   </p><p>
    The main purpose of <code class="systemitem">init</code> on
    <code class="systemitem">initramfs</code> is to prepare the mounting of and access
    to the real root file system. Depending on your system configuration,
    <code class="systemitem">init</code> on <code class="systemitem">initramfs</code> is
    responsible for the following tasks.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.2.4.6.4.1"><span class="term">Loading kernel modules</span></dt><dd><p>
       Depending on your hardware configuration, special drivers may be needed
       to access the hardware components of your computer (the most important
       component being your hard disk). To access the final root file system,
       the kernel needs to load the proper file system drivers.
      </p></dd><dt id="id-1.3.4.2.4.6.4.2"><span class="term">Providing block special files</span></dt><dd><p>
       The kernel generates device events depending on loaded modules.
       <code class="systemitem">udev</code> handles these events and
       generates the required special block files on a RAM file system in
       <code class="filename">/dev</code>. Without those special files, the file system
       and other devices would not be accessible.
      </p></dd><dt id="id-1.3.4.2.4.6.4.3"><span class="term">Managing RAID and LVM setups</span></dt><dd><p>
       If you configured your system to hold the root file system under RAID or
       LVM, <code class="systemitem">init</code> on <code class="systemitem">initramfs</code>
       sets up LVM or RAID to enable access to the root file system later.
      </p></dd><dt id="id-1.3.4.2.4.6.4.4"><span class="term">Managing the network configuration</span></dt><dd><p>
       If you configured your system to use a network-mounted root file system
       (mounted via NFS), <code class="systemitem">init</code> must make sure that the
       proper network drivers are loaded and that they are set up to allow
       access to the root file system.
      </p><p>
       If the file system resides on a network block device like iSCSI or SAN,
       the connection to the storage server is also set up by
       <code class="systemitem">init</code> on <code class="systemitem">initramfs</code>.
       <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> supports booting from a secondary iSCSI target if the
       primary target is not available. <span class="phrase">For more details
       regarding configuration of the booting iSCSI target refer to <span class="intraxref">Book “Storage Administration Guide”, Chapter 15 “Mass storage over IP networks: iSCSI”, Section 15.3.1 “Using YaST for the iSCSI initiator configuration”</span></span>.
      </p></dd></dl></div><div id="id-1.3.4.2.4.6.5" data-id-title="Handling of mount failures" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Handling of mount failures</div><p>
     If the root file system fails to mount from within the boot environment,
     it must be checked and repaired before the boot can continue. The file
     system checker will be automatically started for Ext3 and Ext4 file
     systems. The repair process is not automated for XFS and Btrfs file
     systems, and the user is presented with information describing the
     options available to repair the file system. When the file system has been
     successfully repaired, exiting the boot environment will cause the system
     to retry mounting the root file system. If successful, the boot will
     continue normally.
    </p></div><section class="sect3" id="sec-boot-linuxrc-initramfs" data-id-title="The init on initramfs phase in the installation process"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">16.2.3.1 </span><span class="title-name">The init on initramfs phase in the installation process</span></span> <a title="Permalink" class="permalink" href="#sec-boot-linuxrc-initramfs">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     When <code class="systemitem">init</code> on <code class="systemitem">initramfs</code>
     is called during the initial boot as part of the installation process, its
     tasks differ from those mentioned above. The installation system also does
     not start <code class="systemitem">systemd</code> from
     <code class="systemitem">initramfs</code>—these tasks are performed by
     <code class="command">linuxrc</code>.
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.2.4.6.6.3.1"><span class="term">Finding the installation medium</span></dt><dd><p>
        When starting the installation process, your machine loads an
        installation kernel and a special <code class="systemitem">init</code>
        containing the YaST installer. The YaST installer is running in a
        RAM file system and needs to have information about the location of the
        installation medium to access it for installing the operating system.
       </p></dd><dt id="id-1.3.4.2.4.6.6.3.2"><span class="term">
       Initiating hardware recognition and loading appropriate kernel modules
      </span></dt><dd><p>
        As mentioned in <a class="xref" href="#sec-boot-initrd" title="16.2.2.1. The initramfs file">Section 16.2.2.1, “The <code class="systemitem">initramfs</code> file”</a>, the boot process
        starts with a minimum set of drivers that can be used with most
        hardware configurations. On AArch64, POWER, and AMD64/Intel 64 machines,
        <code class="command">linuxrc</code> starts an initial hardware scanning process
        that determines the set of drivers suitable for your hardware
        configuration. On IBM Z, a list of drivers and their parameters
        needs to be provided, for example, via linuxrc or a parmfile.
       </p><p>
        These drivers are used to generate a custom
        <code class="systemitem">initramfs</code> that is needed to boot the
        system. If the modules are not needed for boot but for coldplug, the
        modules can be loaded with <code class="systemitem">systemd</code>; for more information, see <a class="xref" href="#sec-boot-systemd-advanced-kernel-modules" title="19.6.4. Loading kernel modules">Section 19.6.4, “Loading kernel modules”</a>.
       </p></dd><dt id="id-1.3.4.2.4.6.6.3.3"><span class="term">Loading the installation system</span></dt><dd><p>
        When the hardware is properly recognized, the appropriate drivers are
        loaded. The <code class="systemitem">udev</code> program
        creates the special device files and <code class="command">linuxrc</code>
        starts the installation system with the YaST installer.
       </p></dd><dt id="id-1.3.4.2.4.6.6.3.4"><span class="term">Starting YaST</span></dt><dd><p>
        Finally, <code class="command">linuxrc</code> starts YaST, which starts
        the package installation and the system configuration.
       </p></dd></dl></div></section></section><section class="sect2" id="sec-boot-systemd" data-id-title="The systemd phase"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">16.2.4 </span><span class="title-name">The systemd phase</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/bootconcept.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    After the <span class="quote">“<span class="quote">real</span>”</span> root file system has been found, it is
    checked for errors and mounted. If this is successful, the
    <code class="systemitem">initramfs</code> is cleaned and the <code class="systemitem">systemd</code> daemon on
    the root file system is executed. <code class="systemitem">systemd</code> is Linux's system and service
    manager. It is the parent process that is started as PID 1 and acts as an
    init system which brings up and maintains user space services. See <a class="xref" href="#cha-systemd" title="Chapter 19. The systemd daemon">Chapter 19, <em>The <code class="systemitem">systemd</code> daemon</em></a> for details.
   </p></section></section></section><section class="chapter" id="cha-uefi" data-id-title="UEFI (Unified Extensible Firmware Interface)"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">17 </span><span class="title-name">UEFI (Unified Extensible Firmware Interface)</span></span> <a title="Permalink" class="permalink" href="#cha-uefi">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/uefi.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  UEFI (Unified Extensible Firmware Interface) is the interface between the
  firmware that comes with the system hardware, all the hardware components of
  the system, and the operating system.
 </p><p>
  UEFI is becoming more and more available on PC systems and thus is replacing
  the traditional PC-BIOS. UEFI, for example, properly supports 64-bit systems
  and offers secure booting (<span class="quote">“<span class="quote">Secure Boot</span>”</span>, firmware version
  2.3.1c or better required), which is one of its most important features.
  Lastly, with UEFI a standard firmware will become available on all x86
  platforms.
 </p><p>
  UEFI additionally offers the following advantages:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Booting from large disks (over 2 TiB) with a GUID Partition Table (GPT).
   </p></li><li class="listitem"><p>
    CPU-independent architecture and drivers.
   </p></li><li class="listitem"><p>
    Flexible pre-OS environment with network capabilities.
   </p></li><li class="listitem"><p>
    CSM (Compatibility Support Module) to support booting legacy operating
    systems via a PC-BIOS-like emulation.
   </p></li></ul></div><p>
  For more information, see
  <a class="link" href="https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface" target="_blank">https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface</a>.
  The following sections are not meant as a general UEFI overview; these are
  only hints about how certain features are implemented in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
 </p><section class="sect1" id="sec-uefi-secboot" data-id-title="Secure boot"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">17.1 </span><span class="title-name">Secure boot</span></span> <a title="Permalink" class="permalink" href="#sec-uefi-secboot">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/uefi.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In the world of UEFI, securing the bootstrapping process means establishing
   a chain of trust. The <span class="quote">“<span class="quote">platform</span>”</span> is the root of this chain of
   trust; in the context of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, the mainboard and the on-board firmware
   could be considered the <span class="quote">“<span class="quote">platform</span>”</span>. In other words, it is the hardware vendor, and the chain of trust flows from
   that hardware vendor to the component manufacturers, the OS vendors, etc.
  </p><p>
   The trust is expressed via public key cryptography. The hardware vendor puts
   a so-called Platform Key (PK) into the firmware, representing the root of
   trust. The trust relationship with operating system vendors and others is
   documented by signing their keys with the Platform Key.
  </p><p>
   Finally, security is established by requiring that no code will be executed
   by the firmware unless it has been signed by one of these
   <span class="quote">“<span class="quote">trusted</span>”</span> keys—be it an OS boot loader, a driver located
   in the flash memory of certain PCI Express card or on disk, or be it an
   update of the firmware itself.
  </p><p>
   To use Secure Boot, you need to have your OS loader signed with
   a key trusted by the firmware, and you need the OS loader to verify that the
   kernel it loads can be trusted.
  </p><p>

   Key Exchange Keys (KEK) can be added to the UEFI key database. This way, you
   can use other certificates, if they are signed with the private part
   of the PK.

  </p><section class="sect2" id="sec-uefi-secboot-sle" data-id-title="Implementation on SUSE Linux Enterprise Server"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">17.1.1 </span><span class="title-name">Implementation on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span></span> <a title="Permalink" class="permalink" href="#sec-uefi-secboot-sle">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/uefi.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Microsoft’s Key Exchange Key (KEK) is installed by default.
   </p><div id="id-1.3.4.3.8.7.3" data-id-title="GUID partitioning table (GPT) required" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: GUID partitioning table (GPT) required</div><p>
     The Secure Boot feature is enabled by default on UEFI/x86_64
     installations. You can find the <span class="guimenu">Enable Secure Boot
     Support</span> option in the <span class="guimenu">Boot Code Options</span> tab
     of the <span class="guimenu">Boot Loader Settings</span> dialog. It supports booting
     when the secure boot is activated in the firmware, while making it
     possible to boot when it is deactivated.
    </p><div class="figure" id="id-1.3.4.3.8.7.3.3"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_bootloader_boot_code_efi.png"><img src="images/yast2_bootloader_boot_code_efi.png" width="70%" alt="Secure boot support" title="Secure boot support"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 17.1: </span><span class="title-name">Secure boot support </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.3.8.7.3.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/uefi.xml" title="Edit source document"> </a></div></div></div><p>
     The Secure Boot feature requires that a GUID Partitioning Table (GPT)
     replaces the old partitioning with a Master Boot Record (MBR). If YaST
     detects EFI mode during the installation, it will try to create a GPT
     partition. UEFI expects to find the EFI programs on a FAT-formatted EFI
     System Partition (ESP).
    </p></div><p>
    Supporting UEFI Secure Boot requires having a boot loader with
    a digital signature that the firmware recognizes as a trusted key. That key
    is trusted by the firmware a priori, without requiring any manual
    intervention.
   </p><p>
    There are two ways of getting there. One is to work with hardware vendors
    to have them endorse a SUSE key, which SUSE then signs the boot loader
    with. The other way is to go through Microsoft’s Windows Logo
    Certification program to have the boot loader certified and have Microsoft
    recognize the SUSE signing key (that is, have it signed with their KEK). By
    now, SUSE got the loader signed by UEFI Signing Service (that is Microsoft
    in this case).
   </p><div class="figure" id="fig-uefi-secure-boot-mok2"><div class="figure-contents"><div class="mediaobject"><a href="images/uefi-secure-boot-mok2.png"><img src="images/uefi-secure-boot-mok2.png" width="80%" alt="UEFI: secure boot process" title="UEFI: secure boot process"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 17.2: </span><span class="title-name">UEFI: secure boot process </span></span><a title="Permalink" class="permalink" href="#fig-uefi-secure-boot-mok2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/uefi.xml" title="Edit source document"> </a></div></div></div><p>
    At the implementation layer, SUSE uses the <code class="systemitem">shim</code>
    loader which is installed by default. It is a smart solution that avoids
    legal issues, and simplifies the certification and signing step
    considerably. The <code class="systemitem">shim</code> loader’s job is to load a
    boot loader such as GRUB 2 and verify it; this boot loader in
    turn will load kernels signed by a SUSE key only.
   </p><p>
    There are two types of trusted users:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      First, those who hold the keys. The Platform Key (PK) allows almost
      everything. The Key Exchange Key (KEK) allows all a PK can except
      changing the PK.
     </p></li><li class="listitem"><p>
      Second, anyone with physical access to the machine. A user with physical
      access can reboot the machine, and configure UEFI.
     </p></li></ul></div><p>
    UEFI offers two types of variables to fulfill the needs of those users:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      The first is the so-called <span class="quote">“<span class="quote">Authenticated Variables</span>”</span>, which
      can be updated from both within the boot process (the so-called Boot
      Services Environment) and the running OS. This can be done only when the new value of
      the variable is signed with the same key that the old value of the
      variable was signed with. And they can only be appended to or changed to
      a value with a higher serial number.
     </p></li><li class="listitem"><p>
      The second is the so-called <span class="quote">“<span class="quote">Boot Services Only Variables</span>”</span>.
      These variables are accessible to any code that runs during the boot
      process. After the boot process ends and before the OS starts, the boot
      loader must call the <code class="literal">ExitBootServices</code> call. After
      that, these variables are no longer accessible, and the OS cannot touch
      them.
     </p></li></ul></div><p>
    UEFI key lists are of the first type, as this allows online updating, adding
    and blacklisting of keys, drivers and firmware fingerprints. It is the
    second type of variable, the <span class="quote">“<span class="quote">Boot Services Only Variable</span>”</span>,
    that helps to implement Secure Boot in a secure and open source-friendly
    manner, and thus compatible with GPLv3.
   </p><p>
    SUSE starts with <code class="systemitem">shim</code>—a small and simple EFI
    boot loader signed by SUSE and Microsoft.
   </p><p>
    This allows <code class="systemitem">shim</code> to load and execute.
   </p><p>
    <code class="systemitem">shim</code> then goes on to verify that the boot loader
    it wants to load is trusted.

    In a default situation <code class="systemitem">shim</code> will use an
    independent SUSE certificate embedded in its body. In addition,
    <code class="systemitem">shim</code> will allow to <span class="quote">“<span class="quote">enroll</span>”</span>
    additional keys, overriding the default SUSE key. In the following, we call
    them <span class="quote">“<span class="quote">Machine Owner Keys</span>”</span> or MOKs for short.
   </p><p>
    Next the boot loader will verify and then boot the kernel, and the kernel
    will do the same on the modules.
   </p></section><section class="sect2" id="sec-uefi-secboot-mok" data-id-title="MOK (Machine Owner Key)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">17.1.2 </span><span class="title-name">MOK (Machine Owner Key)</span></span> <a title="Permalink" class="permalink" href="#sec-uefi-secboot-mok">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/uefi.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To replace specific kernels, drivers or other components that are part of
   the boot process, you need to use Machine Owner Keys (MOKs). The
   <code class="systemitem">mokutil</code> tool can help you to manage MOKs.
   </p><p>
   You can create a MOK enrollment request with
   <code class="systemitem">mokutil</code>. The request is stored in a UEFI runtime
   (RT) variable called <code class="systemitem">MokNew</code>. During the next boot,
   the <code class="systemitem">shim</code> boot loader detects
   <code class="systemitem">MokNew</code> and loads
   <code class="systemitem">MokManager</code>, which presents you with several options.
   You can use the <span class="guimenu">Enroll key from disk</span> and
   <span class="guimenu">Enroll hash from disk</span> options to add the key to the
   MokList. Use the <span class="guimenu">Enroll MOK</span> option to copy the key from
   the <code class="systemitem">MokNew</code> variable.
   </p><p>
   Enrolling a key from disk is normally done when the shim fails to
   load <code class="systemitem">grub2</code> and falls back to loading
   MokManager. As <code class="systemitem">MokNew</code> does not exist yet,
   you have the option of locating the key on the UEFI partition.
   </p></section><section class="sect2" id="sec-uefi-secboot-custom" data-id-title="Booting a custom kernel"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">17.1.3 </span><span class="title-name">Booting a custom kernel</span></span> <a title="Permalink" class="permalink" href="#sec-uefi-secboot-custom">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/uefi.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The following is based on
    <a class="link" href="https://en.opensuse.org/openSUSE:UEFI#Booting_a_custom_kernel" target="_blank">https://en.opensuse.org/openSUSE:UEFI#Booting_a_custom_kernel</a>.
   </p><p>
    Secure Boot does not prevent you from using a self-compiled kernel. You
    must sign it with your own certificate and make that certificate known to
    the firmware or MOK.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Create a custom X.509 key and certificate used for signing:
     </p><div class="verbatim-wrap"><pre class="screen">openssl req -new -x509 -newkey rsa:2048 -keyout key.asc \
  -out cert.pem -nodes -days 666 -subj "/CN=$USER/"</pre></div><p>

      For more information about creating certificates, see
      <a class="link" href="https://en.opensuse.org/openSUSE:UEFI_Image_File_Sign_Tools#Create_Your_Own_Certificate" target="_blank">https://en.opensuse.org/openSUSE:UEFI_Image_File_Sign_Tools#Create_Your_Own_Certificate</a>.
     </p></li><li class="step"><p>
      Package the key and the certificate as a PKCS#12 structure:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>openssl pkcs12 -export -inkey key.asc -in cert.pem \
  -name kernel_cert -out cert.p12</pre></div></li><li class="step"><p>
      Generate an NSS database for use with <code class="command">pesign</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>certutil -d . -N</pre></div></li><li class="step"><p>
      Import the key and the certificate contained in PKCS#12 into the NSS
      database:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>pk12util -d . -i cert.p12</pre></div></li><li class="step"><p>
      <span class="quote">“<span class="quote">Bless</span>”</span> the kernel with the new signature using
      <code class="command">pesign</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>pesign -n . -c kernel_cert -i arch/x86/boot/bzImage \
  -o vmlinuz.signed -s</pre></div></li><li class="step"><p>
      List the signatures on the kernel image:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>pesign -n . -S -i vmlinuz.signed</pre></div><p>
      At that point, you can install the kernel in <code class="filename">/boot</code>
      as usual. Because the kernel now has a custom signature the certificate
      used for signing needs to be imported into the UEFI firmware or MOK.
     </p></li><li class="step"><p>
      Convert the certificate to the DER format for import into the firmware or
      MOK:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>openssl x509 -in cert.pem -outform der -out cert.der</pre></div></li><li class="step"><p>
      Copy the certificate to the ESP for easier access:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> cp cert.der /boot/efi/</pre></div></li><li class="step"><p>
      Use <code class="command">mokutil</code> to launch the MOK list automatically.
     </p><ul class="stepalternatives">
      <li class="step"><ol type="a" class="substeps"><li class="step"><p>
          Import the certificate to MOK:
         </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>mokutil --root-pw --import cert.der</pre></div><p>
          The <code class="option">--root-pw</code> option enables usage of the <code class="systemitem">root</code>
          user directly.
         </p></li><li class="step"><p>
          Check the list of certificates that are prepared to be enrolled:
         </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>mokutil --list-new</pre></div></li><li class="step"><p>
          Reboot the system; <code class="systemitem">shim</code> should launch
          MokManager. You need to enter the <code class="systemitem">root</code> password to confirm the
          import of the certificate to the MOK list.
         </p></li><li class="step"><p>
          Check if the newly imported key was enrolled:
         </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>mokutil --list-enrolled</pre></div></li></ol></li>
      <li class="step"><ol type="a" class="substeps"><li class="step"><p>
          Alternatively, this is the procedure to launch MOK manually:
         </p><p>
          Reboot
         </p></li><li class="step"><p>
          In the GRUB 2 menu press the '<code class="literal">c</code>' key.
         </p></li><li class="step"><p>
          Type:
         </p><div class="verbatim-wrap"><pre class="screen">chainloader $efibootdir/MokManager.efi
boot</pre></div></li><li class="step"><p>
          Select <span class="guimenu">Enroll key from disk</span>.
         </p></li><li class="step"><p>
          Navigate to the <code class="filename">cert.der</code> file and press
          <span class="keycap">Enter</span>.
         </p></li><li class="step"><p>
          Follow the instructions to enroll the key. Normally this should be
          pressing <span class="quote">“<span class="quote">0</span>”</span> and then <span class="quote">“<span class="quote">y</span>”</span> to
          confirm.
         </p><p>
          Alternatively, the firmware menu may provide ways to add a new key to
          the Signature Database.
         </p></li></ol></li>
     </ul></li></ol></div></div></section><section class="sect2" id="sec-uefi-secboot-non-inbox" data-id-title="Using non-inbox drivers"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">17.1.4 </span><span class="title-name">Using non-inbox drivers</span></span> <a title="Permalink" class="permalink" href="#sec-uefi-secboot-non-inbox">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/uefi.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    There is no support for adding non-inbox drivers (that is, drivers that do
    not come with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>) during installation with Secure Boot enabled. The
    signing key used for SolidDriver/PLDP is not trusted by default.
   </p><p>
    It is possible to install third party drivers during installation with
    Secure Boot enabled in two different ways. In both cases:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Add the needed keys to the firmware database via firmware/system
      management tools before the installation. This option depends on the
      specific hardware you are using. Consult your hardware vendor for more
      information.
     </p></li><li class="listitem"><p>
      Use a bootable driver ISO from
      <a class="link" href="https://drivers.suse.com/" target="_blank">https://drivers.suse.com/</a> or your hardware vendor to
      enroll the needed keys in the MOK list at first boot.
     </p></li></ul></div><p>
    To use the bootable driver ISO to enroll the driver keys to the MOK list,
    follow these steps:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Burn the ISO image above to an empty CD/DVD medium.
     </p></li><li class="step"><p>
      Start the installation using the new CD/DVD medium, having the standard
      installation media at hand or a URL to a network installation
      server.
     </p><p>
      If doing a network installation, enter the URL of the network
      installation source on the boot command line using the
      <code class="option">install=</code> option.
     </p><p>
      If doing installation from optical media, the installer will first boot
      from the driver kit and then ask to insert the first installation disk of
      the product.
     </p></li><li class="step"><p>
      An initrd containing updated drivers will be used for installation.
     </p></li></ol></div></div><p>
    For more information, see
    <a class="link" href="https://drivers.suse.com/doc/Usage/Secure_Boot_Certificate.html" target="_blank">https://drivers.suse.com/doc/Usage/Secure_Boot_Certificate.html</a>.
   </p></section><section class="sect2" id="sec-uefi-secboot-feats" data-id-title="Features and limitations"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">17.1.5 </span><span class="title-name">Features and limitations</span></span> <a title="Permalink" class="permalink" href="#sec-uefi-secboot-feats">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/uefi.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When booting in Secure Boot mode, the following features apply:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Installation to UEFI default boot loader location, a mechanism to keep or
      restore the EFI boot entry.
     </p></li><li class="listitem"><p>
      Reboot via UEFI.
     </p></li><li class="listitem"><p>
      Xen hypervisor will boot with UEFI when there is no legacy BIOS to fall
      back to.
     </p></li><li class="listitem"><p>
      UEFI IPv6 PXE boot support.
     </p></li><li class="listitem"><p>
      UEFI video mode support, the kernel can retrieve video mode from UEFI
      to configure KMS mode with the same parameters.
     </p></li><li class="listitem"><p>
      UEFI booting from USB devices is supported.
     </p></li><li class="listitem"><p>
      Since <span class="phrase">SUSE Linux Enterprise Server 15 SP3</span>, Kexec and Kdump are supported in
      Secure Boot mode.
     </p></li></ul></div><p>
    When booting in Secure Boot mode, the following limitations apply:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      To ensure that Secure Boot cannot be easily circumvented, certain kernel
      features are disabled when running under Secure Boot.
     </p></li><li class="listitem"><p>
      Boot loader, kernel, and kernel modules must be signed.
     </p></li><li class="listitem"><p>
      Hibernation (suspend on disk) is disabled.
     </p></li><li class="listitem"><p>
      Access to <code class="filename">/dev/kmem</code> and
      <code class="filename">/dev/mem</code> is not possible, not even as root user.
     </p></li><li class="listitem"><p>
      Access to the I/O port is not possible, not even as root user. All X11
      graphical drivers must use a kernel driver.
     </p></li><li class="listitem"><p>
      PCI BAR access through sysfs is not possible.
     </p></li><li class="listitem"><p>
      <code class="literal">custom_method</code> in ACPI is not available.
     </p></li><li class="listitem"><p>
      debugfs for asus-wmi module is not available.
     </p></li><li class="listitem"><p>
      the <code class="literal">acpi_rsdp</code> parameter does not have any effect on
      the kernel.
     </p></li></ul></div></section></section><section class="sect1" id="sec-uefi-moreinfo" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">17.2 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-uefi-moreinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/uefi.xml" title="Edit source document"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <a class="link" href="https://uefi.org" target="_blank">https://uefi.org</a> — UEFI home page where you
     can find the current UEFI specifications.
    </p></li><li class="listitem"><p>
     Blog posts by Olaf Kirch and Vojtěch Pavlík (the chapter above is
     heavily based on these posts):
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       <a class="link" href="https://www.suse.com/c/uefi-secure-boot-plan/" target="_blank">https://www.suse.com/c/uefi-secure-boot-plan/</a>
      </p></li><li class="listitem"><p>
       <a class="link" href="https://www.suse.com/c/uefi-secure-boot-overview/" target="_blank">https://www.suse.com/c/uefi-secure-boot-overview/</a>
      </p></li><li class="listitem"><p>
       <a class="link" href="https://www.suse.com/c/uefi-secure-boot-details/" target="_blank">https://www.suse.com/c/uefi-secure-boot-details/</a>
      </p></li></ul></div></li><li class="listitem"><p>
     <a class="link" href="https://en.opensuse.org/openSUSE:UEFI" target="_blank">https://en.opensuse.org/openSUSE:UEFI</a> —UEFI with
     openSUSE.
    </p></li></ul></div></section></section><section class="chapter" id="cha-grub2" data-id-title="The boot loader GRUB 2"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">18 </span><span class="title-name">The boot loader GRUB 2</span></span> <a title="Permalink" class="permalink" href="#cha-grub2">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
        This chapter describes how to configure GRUB 2, the boot loader used in
        <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span>. <span class="phrase">It is the successor to the
        traditional GRUB boot loader—now called <span class="quote">“<span class="quote">GRUB
        Legacy</span>”</span>. GRUB 2 has been the default boot loader in
        <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> since version 12.</span> A YaST module is
        available for configuring the most important settings. The boot
        procedure as a whole is outlined in <a class="xref" href="#cha-boot" title="Chapter 16. Introduction to the boot process">Chapter 16, <em>Introduction to the boot process</em></a>. For
        details on Secure Boot support for UEFI machines, see
        <a class="xref" href="#cha-uefi" title="Chapter 17. UEFI (Unified Extensible Firmware Interface)">Chapter 17, <em>UEFI (Unified Extensible Firmware Interface)</em></a>.
      </p></div></div></div></div><section class="sect1" id="sec-grub2-new-features" data-id-title="Main differences between GRUB legacy and GRUB 2"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">18.1 </span><span class="title-name">Main differences between GRUB legacy and GRUB 2</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-new-features">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          The configuration is stored in different files.
        </p></li><li class="listitem"><p>
          More file systems are supported (for example, Btrfs).
        </p></li><li class="listitem"><p>
          Can directly read files stored on LVM or RAID devices.
        </p></li><li class="listitem"><p>
          The user interface can be translated and altered with themes.
        </p></li><li class="listitem"><p>
          Includes a mechanism for loading modules to support additional
          features, such as file systems, etc.
        </p></li><li class="listitem"><p>
          Automatically searches for and generates boot entries for other
          kernels and operating systems, such as Windows.
        </p></li><li class="listitem"><p>
          Includes a minimal Bash-like console.
        </p></li></ul></div></section><section class="sect1" id="sec-grub2-file-structure" data-id-title="Configuration file structure"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">18.2 </span><span class="title-name">Configuration file structure</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-file-structure">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The configuration of GRUB 2 is based on the following files:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.4.4.3.1"><span class="term"><code class="filename">/boot/grub2/grub.cfg</code></span></dt><dd><p>
            This file contains the configuration of the GRUB 2 menu items. It
            replaces <code class="filename">menu.lst</code> used in GRUB Legacy.
            <code class="filename">grub.cfg</code> should not be edited—it is
            automatically generated by the command <code class="command">grub2-mkconfig -o
            /boot/grub2/grub.cfg</code>.
          </p></dd><dt id="id-1.3.4.4.4.3.2"><span class="term"><code class="filename">/boot/grub2/custom.cfg</code></span></dt><dd><p>
            This optional file is directly sourced by
            <code class="filename">grub.cfg</code> at boot time and can be used to add
            custom items to the boot menu. Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
            <span class="phrase">12 SP2</span> these entries are also parsed when using
            <code class="command">grub-once</code>.
          </p></dd><dt id="id-1.3.4.4.4.3.3"><span class="term"><code class="filename">/etc/default/grub</code></span></dt><dd><p>
            This file controls the user settings of GRUB 2 and normally
            includes additional environmental settings such as backgrounds and
            themes.
          </p></dd><dt id="id-1.3.4.4.4.3.4"><span class="term">Scripts under <code class="filename">/etc/grub.d/</code></span></dt><dd><p>
            The scripts in this directory are read during execution of the
            command <code class="command">grub2-mkconfig -o /boot/grub2/grub.cfg</code>.
            Their instructions are integrated into the main configuration file
            <code class="filename">/boot/grub/grub.cfg</code>.
          </p></dd><dt id="vle-grub2-sysconfig"><span class="term"><code class="filename">/etc/sysconfig/bootloader</code></span></dt><dd><p>
            This configuration file holds certain basic settings like the boot
            loader type and whether to enable UEFI Secure Boot support.
          </p></dd><dt id="id-1.3.4.4.4.3.6"><span class="term"><code class="filename">/boot/grub2/x86_64-efi</code>, <code class="filename">/boot/grub2/power-ieee1275</code><span class="phrase">, <code class="filename">/boot/grub2/s390x</code></span></span></dt><dd><p>
            These configuration files contain architecture-specific options.
          </p></dd></dl></div><p>
      GRUB 2 can be controlled in multiple ways. Boot entries from an existing
      configuration can be selected from the graphical menu (splash screen).
      The configuration is loaded from the file
      <code class="filename">/boot/grub2/grub.cfg</code> which is compiled from other
      configuration files (see below). All GRUB 2 configuration files are
      considered system files, and you need <code class="systemitem">root</code> privileges to edit them.
    </p><div id="id-1.3.4.4.4.5" data-id-title="Activating configuration changes" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Activating configuration changes</div><p>
        After having manually edited GRUB 2 configuration files, you need to
        run <code class="command">grub2-mkconfig -o /boot/grub2/grub.cfg</code> to
        activate the changes. However, this is not necessary when changing the
        configuration with YaST, because YaST automatically runs this
        command.
      </p></div><section class="sect2" id="sec-grub2-cfg" data-id-title="The file /boot/grub2/grub.cfg"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.1 </span><span class="title-name">The file <code class="filename">/boot/grub2/grub.cfg</code></span></span> <a title="Permalink" class="permalink" href="#sec-grub2-cfg">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The graphical splash screen with the boot menu is based on the GRUB 2
        configuration file <code class="filename">/boot/grub2/grub.cfg</code>, which
        contains information about all partitions or operating systems that can
        be booted by the menu.
      </p><p>
        Every time the system is booted, GRUB 2 loads the menu file directly
        from the file system. For this reason, GRUB 2 does not need to be
        re-installed after changes to the configuration file.
        <code class="filename">grub.cfg</code> is automatically rebuilt with kernel
        installations or removals.
      </p><p>
        <code class="filename">grub.cfg</code> is compiled from the file
        <code class="filename">/etc/default/grub</code> and scripts found in the
        <code class="filename">/etc/grub.d/</code> directory when running the command
        <code class="command">grub2-mkconfig -o /boot/grub2/grub.cfg</code>. Therefore
        you should never edit the file manually. Instead, edit the related
        source files or use the YaST <span class="guimenu">Boot Loader</span> module to
        modify the configuration as described in
        <a class="xref" href="#sec-grub2-yast2-config" title="18.3. Configuring the boot loader with YaST">Section 18.3, “Configuring the boot loader with YaST”</a>.
      </p></section><section class="sect2" id="sec-grub2-etc-default-grub" data-id-title="The file /etc/default/grub"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.2 </span><span class="title-name">The file <code class="filename">/etc/default/grub</code></span></span> <a title="Permalink" class="permalink" href="#sec-grub2-etc-default-grub">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        More general options of GRUB 2 belong in this file, such as the time the menu
        is displayed, or the default OS to boot. To list all available options,
        see the output of the following command:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>grep "export GRUB_DEFAULT" -A50 /usr/sbin/grub2-mkconfig | grep GRUB_</pre></div><p>
        You can introduce custom variables and use them later in the scripts
        found in the <code class="filename">/etc/grub.d</code> directory.
      </p><p>
        After having edited <code class="filename">/etc/default/grub</code>, update the
        main configuration file with <code class="command">grub2-mkconfig -o
        /boot/grub2/grub.cfg</code>.
      </p><div id="id-1.3.4.4.4.7.6" data-id-title="Scope" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Scope</div><p>
          All options specified in this file are general options that affect all
          boot entries. Options specific to a Xen hypervisor include the
          <code class="literal">_XEN_</code> substring.
        </p></div><div id="id-1.3.4.4.4.7.7" data-id-title="Escaping inner quotes" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Escaping inner quotes</div><p>
          More complex options with spaces require quoting so that they are
          processed as one option. Such inner quotes need to be correctly
          escaped, for example:
        </p><div class="verbatim-wrap"><pre class="screen">GRUB_CMDLINE_LINUX_XEN="debug loglevel=9 log_buf_len=5M \"ddebug_query=file drivers/xen/xen-acpi-processor.c +p\""</pre></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.4.4.7.8.1"><span class="term"><code class="literal">GRUB_DEFAULT</code></span></dt><dd><p>
              Sets the boot menu entry that is booted by default. Its value can
              be a numeric value, the complete name of a menu entry, or
              <span class="quote">“<span class="quote">saved</span>”</span>.
            </p><p>
              <code class="literal">GRUB_DEFAULT=2</code> boots the third (counted from
              zero) boot menu entry.
            </p><p>
              <code class="literal">GRUB_DEFAULT="2&gt;0"</code> boots the first submenu
              entry of the third top-level menu entry.
            </p><p>
              <code class="literal">GRUB_DEFAULT="Example boot menu entry"</code> boots
              the menu entry with the title <span class="quote">“<span class="quote">Example boot menu
              entry</span>”</span>.
            </p><p>
              <code class="literal">GRUB_DEFAULT=saved</code> boots the entry specified
              by the <code class="command">grub2-once</code> or
              <code class="command">grub2-set-default</code> commands. While
              <code class="command">grub2-reboot</code> sets the default boot entry for
              the next reboot only, <code class="command">grub2-set-default</code> sets
              the default boot entry until changed. <code class="command">grub2-editenv
              list</code> lists the next boot entry.
            </p></dd><dt id="id-1.3.4.4.4.7.8.2"><span class="term"><code class="literal">GRUB_HIDDEN_TIMEOUT</code></span></dt><dd><p>
              Waits the specified number of seconds for the user to press a
              key. During the period no menu is shown unless the user presses a
              key. If no key is pressed during the time specified, the control
              is passed to <code class="literal">GRUB_TIMEOUT</code>.
              <code class="literal">GRUB_HIDDEN_TIMEOUT=0</code> first checks whether
              <span class="keycap">Shift</span> is pressed and shows the boot menu if
              yes, otherwise immediately boots the default menu entry. This is
              the default when only one bootable OS is identified by GRUB 2.
            </p></dd><dt id="id-1.3.4.4.4.7.8.3"><span class="term"><code class="literal">GRUB_HIDDEN_TIMEOUT_QUIET</code></span></dt><dd><p>
              If <code class="literal">false</code> is specified, a countdown timer is
              displayed on a blank screen when the
              <code class="literal">GRUB_HIDDEN_TIMEOUT</code> feature is active.
            </p></dd><dt id="id-1.3.4.4.4.7.8.4"><span class="term"><code class="literal">GRUB_TIMEOUT</code></span></dt><dd><p>
              Time period in seconds the boot menu is displayed before
              automatically booting the default boot entry. If you press a key,
              the timeout is cancelled and GRUB 2 waits for you to make the
              selection manually. <code class="literal">GRUB_TIMEOUT=-1</code> causes
              the menu to be displayed until you select the boot entry
              manually.
            </p></dd><dt id="id-1.3.4.4.4.7.8.5"><span class="term"><code class="literal">GRUB_CMDLINE_LINUX</code></span></dt><dd><p>
              Entries on this line are added at the end of the boot entries for
              normal and recovery modes. Use it to add kernel parameters to the
              boot entry.
            </p></dd><dt id="id-1.3.4.4.4.7.8.6"><span class="term"><code class="literal">GRUB_CMDLINE_LINUX_DEFAULT</code></span></dt><dd><p>
              Same as <code class="literal">GRUB_CMDLINE_LINUX</code> but the entries are
              appended in the normal mode only.
            </p></dd><dt id="id-1.3.4.4.4.7.8.7"><span class="term"><code class="literal">GRUB_CMDLINE_LINUX_RECOVERY</code></span></dt><dd><p>
              Same as <code class="literal">GRUB_CMDLINE_LINUX</code> but the entries are
              appended in the recovery mode only.
            </p></dd><dt id="id-1.3.4.4.4.7.8.8"><span class="term"><code class="literal">GRUB_CMDLINE_LINUX_XEN_REPLACE</code></span></dt><dd><p>
              This entry replaces the <code class="literal">GRUB_CMDLINE_LINUX</code>
              parameters for all Xen boot entries.
            </p></dd><dt id="id-1.3.4.4.4.7.8.9"><span class="term"><code class="literal">GRUB_CMDLINE_LINUX_XEN_REPLACE_DEFAULT</code></span></dt><dd><p>
              Same as <code class="literal">GRUB_CMDLINE_LINUX_XEN_REPLACE</code> but it
              only replaces parameters
              of <code class="literal">GRUB_CMDLINE_LINUX_DEFAULT</code>.
            </p></dd><dt id="id-1.3.4.4.4.7.8.10"><span class="term"><code class="literal">GRUB_CMDLINE_XEN</code></span></dt><dd><p>
              These entries are passed to the Xen hypervisor Xen menu
              entries for normal and recovery modes. For example:
            </p><div class="verbatim-wrap"><pre class="screen">GRUB_CMDLINE_XEN="loglvl=all guest_loglvl=all"</pre></div><div id="id-1.3.4.4.4.7.8.10.2.3" data-id-title="Xen hypervisor options" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Xen hypervisor options</div><p>
                Find a complete list of Xen hypervisor options in <a class="link" href="https://xenbits.xen.org/docs/unstable/misc/xen-command-line.html" target="_blank">https://xenbits.xen.org/docs/unstable/misc/xen-command-line.html</a>
              </p></div></dd><dt id="id-1.3.4.4.4.7.8.11"><span class="term"><code class="literal">GRUB_CMDLINE_XEN_DEFAULT</code></span></dt><dd><p>
              Same as <code class="literal">GRUB_CMDLINE_XEN</code> but the entries are
              appended in the normal mode only.
            </p></dd><dt id="id-1.3.4.4.4.7.8.12"><span class="term"><code class="literal">GRUB_TERMINAL</code></span></dt><dd><p>
              Enables and specifies an input/output terminal device. Can be
              <code class="literal">console</code> (PC BIOS and EFI consoles),
              <code class="literal">serial</code> (serial terminal),
              <code class="literal">ofconsole</code> (Open Firmware console), or the
              default <code class="literal">gfxterm</code> (graphics-mode output). It is
              also possible to enable more than one device by quoting the
              required options, for example, <code class="literal">GRUB_TERMINAL="console
              serial"</code>.
            </p></dd><dt id="id-1.3.4.4.4.7.8.13"><span class="term"><code class="literal">GRUB_GFXMODE</code></span></dt><dd><p>
              The resolution used for the <code class="literal">gfxterm</code> graphical
              terminal. You can only use modes supported by your graphics card
              (VBE). The default is ‘auto’, which tries to select a preferred
              resolution. You can display the screen resolutions available to
              GRUB 2 by typing <code class="command">videoinfo</code> in the GRUB 2
              command line. The command line is accessed by typing
              <span class="keycap">C</span> when the GRUB 2 boot menu screen is displayed.
            </p><p>
              You can also specify a color depth by appending it to the
              resolution setting, for example,
              <code class="literal">GRUB_GFXMODE=1280x1024x24</code>.
            </p></dd><dt id="id-1.3.4.4.4.7.8.14"><span class="term"><code class="literal">GRUB_BACKGROUND</code></span></dt><dd><p>
              Set a background image for the <code class="literal">gfxterm</code>
              graphical terminal. The image must be a file readable by GRUB 2
              at boot time, and it must end with the <code class="literal">.png</code>,
              <code class="literal">.tga</code>, <code class="literal">.jpg</code>, or
              <code class="literal">.jpeg</code> suffix. If necessary, the image is
              scaled to fit the screen.
            </p></dd><dt id="id-1.3.4.4.4.7.8.15"><span class="term"><code class="literal">GRUB_DISABLE_OS_PROBER</code></span></dt><dd><p>
              If this option is set to <code class="literal">true</code>, automatic
              searching for other operating systems is disabled. Only the
              kernel images in <code class="filename">/boot/</code> and the options from
              your own scripts in <code class="filename">/etc/grub.d/</code> are
              detected.
            </p></dd><dt id="id-1.3.4.4.4.7.8.16"><span class="term"><code class="literal">SUSE_BTRFS_SNAPSHOT_BOOTING</code></span></dt><dd><p>
              If this option is set to <code class="literal">true</code>, GRUB 2 can boot
              directly into Snapper snapshots. For more information, see
              <a class="xref" href="#sec-snapper-snapshot-boot" title="10.3. System rollback by booting from snapshots">Section 10.3, “System rollback by booting from snapshots”</a>.
            </p></dd></dl></div><p>
        For a complete list of options, see the
        <a class="link" href="https://www.gnu.org/software/grub/manual/grub/grub.html#Simple-configuration" target="_blank">
        GNU GRUB manual</a>.
      </p></section><section class="sect2" id="sec-grub2-etc-grub-d" data-id-title="Scripts in /etc/grub.d"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.3 </span><span class="title-name">Scripts in <code class="filename">/etc/grub.d</code></span></span> <a title="Permalink" class="permalink" href="#sec-grub2-etc-grub-d">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The scripts in this directory are read during execution of the command
        <code class="command">grub2-mkconfig -o /boot/grub2/grub.cfg</code>. Their
        instructions are incorporated into
        <code class="filename">/boot/grub2/grub.cfg</code>. The order of menu items in
        <code class="filename">grub.cfg</code> is determined by the order in which the
        files in this directory are run. Files with a leading numeral are
        executed first, beginning with the lowest number.
        <code class="filename">00_header</code> is run before
        <code class="filename">10_linux</code>, which would run before
        <code class="filename">40_custom</code>. If files with alphabetic names are
        present, they are executed after the numerically named files. Only
        executable files generate output to <code class="filename">grub.cfg</code>
        during execution of <code class="command">grub2-mkconfig</code>. By default all
        files in the <code class="filename">/etc/grub.d</code> directory are executable.
      </p><div id="id-1.3.4.4.4.8.3" data-id-title="Persistent custom content in grub.cfg" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Persistent custom content in <code class="filename">grub.cfg</code></div><p>
          Because <code class="filename">/boot/grub2/grub.cfg</code> is recompiled each
          time <code class="command">grub2-mkconfig</code> is run, any custom content is
          lost. To insert your lines directly into
          <code class="filename">/boot/grub2/grub.cfg</code> without losing them after
          <code class="command">grub2-mkconfig</code> is run, insert them between
        </p><div class="verbatim-wrap"><pre class="screen">### BEGIN /etc/grub.d/90_persistent ###</pre></div><p>
          and
        </p><div class="verbatim-wrap"><pre class="screen">### END /etc/grub.d/90_persistent ###</pre></div><p>
          The <code class="filename">90_persistent</code> script ensures that such
          content is preserved.
        </p><p>
          A list of the most important scripts follows:
        </p></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.4.4.8.4.1"><span class="term"><code class="filename">00_header</code></span></dt><dd><p>
              Sets environmental variables such as system file locations,
              display settings, themes and previously saved entries. It also
              imports preferences stored in the
              <code class="filename">/etc/default/grub</code>. Normally you do not need
              to make changes to this file.
            </p></dd><dt id="id-1.3.4.4.4.8.4.2"><span class="term"><code class="filename">10_linux</code></span></dt><dd><p>
              Identifies Linux kernels on the root device and creates relevant
              menu entries. This includes the associated recovery mode option
              if enabled. Only the latest kernel is displayed on the main menu
              page, with additional kernels included in a submenu.
            </p></dd><dt id="id-1.3.4.4.4.8.4.3"><span class="term"><code class="filename">30_os-prober</code></span></dt><dd><p>
              This script uses <code class="command">os-prober</code> to search for Linux
              and other operating systems and places the results in the GRUB 2
              menu. There are sections to identify specific other operating
              systems, such as Windows or macOS.
            </p></dd><dt id="id-1.3.4.4.4.8.4.4"><span class="term"><code class="filename">40_custom</code></span></dt><dd><p>
              This file provides a simple way to include custom boot entries
              into <code class="filename">grub.cfg</code>. Make sure that you do not
              change the <code class="literal">exec tail -n +3 $0</code> part at the
              beginning.
            </p></dd></dl></div><p>
        The processing sequence is set by the preceding numbers with the lowest
        number being executed first. If scripts are preceded by the same number
        the alphabetical order of the complete name decides the order.
      </p><div id="id-1.3.4.4.4.8.6" data-id-title="/boot/grub2/custom.cfg" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: <code class="filename">/boot/grub2/custom.cfg</code></div><p>
          If you create <code class="filename">/boot/grub2/custom.cfg</code> and fill it
          with content, it is automatically included into
          <code class="filename">/boot/grub2/grub.cfg</code> right after
          <code class="filename">40_custom</code> at boot time.
        </p></div></section><section class="sect2" id="sec-grub2-map" data-id-title="Mapping between BIOS drives and Linux devices"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.4 </span><span class="title-name">Mapping between BIOS drives and Linux devices</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-map">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        In GRUB Legacy, the <code class="filename">device.map</code> configuration file
        was used to derive Linux device names from BIOS drive numbers. The
        mapping between BIOS drives and Linux devices cannot always be guessed
        correctly. For example, GRUB Legacy would get a wrong order if the boot
        sequence of IDE and SCSI drives is exchanged in the BIOS configuration.
      </p><p>
        GRUB 2 avoids this problem by using device ID strings (UUIDs) or file
        system labels when generating <code class="filename">grub.cfg</code>. GRUB 2
        utilities create a temporary device map on the fly, which is normally
        sufficient, particularly for single-disk systems.
      </p><p>
        However, if you need to override the GRUB 2's automatic device mapping
        mechanism, create your custom mapping file
        <code class="filename">/boot/grub2/device.map</code>. The following example
        changes the mapping to make <code class="literal">DISK 3</code> the boot disk.
        GRUB 2 partition numbers start with <code class="literal">1</code> and
        not with <code class="literal">0</code> as in GRUB 2 Legacy.
      </p><div class="verbatim-wrap"><pre class="screen">(hd1)  /dev/disk-by-id/<em class="replaceable">DISK3 ID</em>
(hd2)  /dev/disk-by-id/<em class="replaceable">DISK1 ID</em>
(hd3)  /dev/disk-by-id/<em class="replaceable">DISK2 ID</em></pre></div></section><section class="sect2" id="sec-grub2-menu-change" data-id-title="Editing menu entries during the boot procedure"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.5 </span><span class="title-name">Editing menu entries during the boot procedure</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-menu-change">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Being able to directly edit menu entries is useful when the system does
        not boot anymore because of a faulty configuration. It can also be used
        to test new settings without altering the system configuration.
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            In the graphical boot menu, select the entry you want to edit with
            the arrow keys.
          </p></li><li class="step"><p>
            Press <span class="keycap">E</span> to open the text-based editor.
          </p></li><li class="step"><p>
            Use the arrow keys to move to the line you want to edit.
          </p><div class="figure" id="fig-grub2-boot-editor"><div class="figure-contents"><div class="mediaobject"><a href="images/grub2_edit_config.png"><img src="images/grub2_edit_config.png" width="75%" alt="GRUB 2 boot editor" title="GRUB 2 boot editor"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 18.1: </span><span class="title-name">GRUB 2 boot editor </span></span><a title="Permalink" class="permalink" href="#fig-grub2-boot-editor">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div><p>
            Now you have two options:
          </p><ol type="a" class="substeps"><li class="step"><p>
                Add space-separated parameters to the end of the line starting
                with <code class="literal">linux</code> or <code class="literal">linuxefi</code> to
                edit the kernel parameters. A complete list of parameters is
                available at
                <a class="link" href="https://en.opensuse.org/Linuxrc" target="_blank">https://en.opensuse.org/Linuxrc</a>.
              </p></li><li class="step"><p>
                Or edit the general options to change, for example, the kernel
                version. The <span class="keycap">→|</span> key suggests all possible
                completions.
              </p></li></ol></li><li class="step"><p>
            Press <span class="keycap">F10</span> to boot the system with the changes you
            made or press <span class="keycap">Esc</span> to discard your edits and
            return to the GRUB 2 menu.
          </p></li></ol></div></div><p>
        Changes made this way only apply to the current boot process and are
        not saved permanently.
      </p><div id="id-1.3.4.4.4.10.5" data-id-title="Keyboard layout during the boot procedure" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Keyboard layout during the boot procedure</div><p>
          The US keyboard layout is the only one available when booting. See
          <span class="intraxref">Book “Deployment Guide”, Chapter 13 “Troubleshooting”, Section 13.3 “Booting from installation media fails”, US keyboard layout</span>.
        </p></div><div id="id-1.3.4.4.4.10.6" data-id-title="Boot loader on the installation media" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Boot loader on the installation media</div><p>
          The Boot Loader of the installation media on systems with a
          traditional BIOS is still GRUB Legacy. To add boot parameters, select
          an entry and start typing. Additions you make to the installation
          boot entry are permanently saved in the installed system.
        </p></div><div id="id-1.3.4.4.4.10.7" data-id-title="Editing GRUB 2 menu entries on IBM Z" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Editing GRUB 2 menu entries on IBM Z</div><p>
          Cursor movement and editing commands on IBM Z differ—see
          <a class="xref" href="#sec-grub2-zseries" title="18.4. Differences in terminal usage on IBM Z">Section 18.4, “Differences in terminal usage on IBM Z”</a> for details.
        </p></div></section><section class="sect2" id="sec-grub2-password" data-id-title="Setting a boot password"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.6 </span><span class="title-name">Setting a boot password</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-password">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Even before the operating system is booted, GRUB 2 enables access to
        file systems. Users without root permissions can access files in your
        Linux system to which they have no access after the system is booted.
        To block this kind of access or to prevent users from booting certain
        menu entries, set a boot password.
      </p><div id="id-1.3.4.4.4.11.3" data-id-title="Booting requires a password" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Booting requires a password</div><p>
          If set, the boot password is required on every boot, which means the
          system does not boot automatically.
        </p></div><p>
        Proceed as follows to set a boot password. Alternatively use YaST
        (<a class="xref" href="#vle-grub2-yast2-boot-password"><span class="guimenu">Protect Boot Loader with Password</span>
     </a>).
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Encrypt the password using
            <code class="command">grub2-mkpasswd-pbkdf2:</code>
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> grub2-mkpasswd-pbkdf2
Password: ****
Reenter password: ****
PBKDF2 hash of your password is grub.pbkdf2.sha512.10000.9CA4611006FE96BC77A...</pre></div></li><li class="step"><p>
            Paste the resulting string into the file
            <code class="filename">/etc/grub.d/40_custom</code> together with the
            <code class="command">set superusers</code> command.
          </p><div class="verbatim-wrap"><pre class="screen">set superusers="root"
password_pbkdf2 root grub.pbkdf2.sha512.10000.9CA4611006FE96BC77A...</pre></div></li><li class="step"><p>
            To import the changes into the main configuration file, run:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> grub2-mkconfig -o /boot/grub2/grub.cfg</pre></div></li></ol></div></div><p>
        After you reboot, GRUB 2 prompts you for a user name and a password
        when trying to boot a menu entry. Enter <code class="literal">root</code> and the
        password you typed during the <code class="command">grub2-mkpasswd-pbkdf2</code>
        command. If the credentials are correct, the system boots the
        selected boot entry.
      </p><p>
        For more information, see
        <a class="link" href="https://www.gnu.org/software/grub/manual/grub/grub.html#Security" target="_blank">https://www.gnu.org/software/grub/manual/grub/grub.html#Security</a>.
      </p></section><section class="sect2" id="sec-grub2-authorization" data-id-title="Authorized access to boot menu entries"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2.7 </span><span class="title-name">Authorized access to boot menu entries</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-authorization">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        You can configure GRUB 2 to allow access to boot menu entries depending
        on the level of authorization. You can configure multiple user accounts
        protected with passwords and assign them access to different menu
        entries. To configure authorization in GRUB 2, follow these steps:
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Create and encrypt one password for each user account you want to
            use in GRUB 2. Use the <code class="command">grub2-mkpasswd-pbkdf2</code>
            command as described in <a class="xref" href="#sec-grub2-password" title="18.2.6. Setting a boot password">Section 18.2.6, “Setting a boot password”</a>.
          </p></li><li class="step"><p>
            Delete the file <code class="filename">/etc/grub.d/10_linux</code>. This
            prevents outputting the default GRUB 2 menu entries.
          </p></li><li class="step"><p>
            Edit the <code class="filename">/boot/grub2/custom.cfg</code> file and add
            custom menu entries manually. The following template is an example,
            adjust it to better match your use case:
          </p><div class="verbatim-wrap"><pre class="screen">set superusers=admin
password admin <em class="replaceable">ADMIN_PASSWORD</em>
password maintainer <em class="replaceable">MAINTAINER_PASSWORD</em>

menuentry 'Operational mode' {
  insmod ext2
  set root=hd0,1
  echo 'Loading Linux ...'
  linux /boot/vmlinuz root=/dev/vda1 $GRUB_CMDLINE_LINUX_DEFAULT $GRUB_CMDLINE_LINUX mode=operation
  echo 'Loading Initrd ...'
  initrd /boot/initrd
}

menuentry 'Maintenance mode' --users maintainer {
  insmod ext2
  set root=hd0,1
  echo 'Loading Linux ...'
  linux /boot/vmlinuz root=/dev/vda1 $GRUB_CMDLINE_LINUX_DEFAULT $GRUB_CMDLINE_LINUX mode=maintenance
  echo 'Loading Initrd ...'
  initrd /boot/initrd
}</pre></div></li><li class="step"><p>
            Import the changes into the main configuration file:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> grub2-mkconfig -o /boot/grub2/grub.cfg</pre></div></li></ol></div></div><p>
        In the above example:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
            The GRUB 2 menu has two entries, <span class="guimenu">Operational
            mode</span> and <span class="guimenu">Maintenance mode</span>.
          </p></li><li class="listitem"><p>
            If no user is specified, both boot menu entries are accessible, but
            no one can access GRUB 2 command line or edit existing menu
            entries.
          </p></li><li class="listitem"><p>
            <code class="literal">admin</code> user can access GRUB 2 command line and
            edit existing menu entries.
          </p></li><li class="listitem"><p>
            <code class="literal">maintenance</code> user can select the recovery menu
            item.
          </p></li></ul></div></section></section><section class="sect1" id="sec-grub2-yast2-config" data-id-title="Configuring the boot loader with YaST"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">18.3 </span><span class="title-name">Configuring the boot loader with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-yast2-config">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The easiest way to configure general options of the boot loader in your
  <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> system is to use the YaST module. In the <span class="guimenu">YaST Control Center</span>, select
  <span class="guimenu">System</span> › <span class="guimenu">Boot
  Loader</span>. The module shows the current boot loader
  configuration of your system and allows you to make changes.
 </p><p>
  Use the <span class="guimenu">Boot Code Options</span> tab to view and change settings
  related to type, location and advanced loader settings. You can choose
  whether to use GRUB 2 in standard or EFI mode.
 </p><div id="id-1.3.4.4.5.5" data-id-title="EFI systems require GRUB2-EFI" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: EFI systems require GRUB2-EFI</div><p>
   If you have an EFI system you can only install GRUB2-EFI, otherwise your
   system is no longer bootable.
  </p></div><div id="id-1.3.4.4.5.6" data-id-title="Reinstalling the boot loader" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Reinstalling the boot loader</div><p>
   To reinstall the boot loader, make sure to change a setting in YaST and
   then change it back. For example, to reinstall GRUB2-EFI, select
   <span class="guimenu">GRUB2</span> first and then immediately switch back to
   <span class="guimenu">GRUB2-EFI</span>.
  </p><p>
   Otherwise, the boot loader may only be partially reinstalled.
  </p></div><div id="id-1.3.4.4.5.7" data-id-title="Custom boot loader" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Custom boot loader</div><p>
   To use a boot loader other than the ones listed, select <span class="guimenu">Do Not
   Install Any Boot Loader</span>. Read the documentation of your boot
   loader carefully before choosing this option.
  </p></div><section class="sect2" id="sec-grub2-yast2-location" data-id-title="Boot loader location and boot code options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.3.1 </span><span class="title-name">Boot loader location and boot code options</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-yast2-location">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The default location of the boot loader depends on the partition setup and
   is either the Master Boot Record (MBR) or the boot sector of the
   <code class="filename">/</code> partition. To modify the location of the boot loader,
   follow these steps:
  </p><div class="procedure" id="pro-sec-grub2-yast2-location" data-id-title="Changing the boot loader location"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 18.1: </span><span class="title-name">Changing the boot loader location </span></span><a title="Permalink" class="permalink" href="#pro-sec-grub2-yast2-location">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2_yast_i.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Select the <span class="guimenu">Boot Code Options</span> tab and then choose one of
     the following options for <span class="guimenu">Boot Loader Location</span>:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.4.5.8.3.2.2.1"><span class="term"><span class="guimenu">Boot from Master Boot Record</span>
      </span></dt><dd><p>
        This installs the boot loader in the MBR of the disk containing the
        directory <code class="filename">/boot</code>. Usually this will be the disk
        mounted to <code class="filename">/</code>, but if <code class="filename">/boot</code> is
        mounted to a separate partition on a different disk, the MBR of that
        disk will be used.
       </p></dd><dt id="id-1.3.4.4.5.8.3.2.2.2"><span class="term"><span class="guimenu">Boot from Root Partition</span>
      </span></dt><dd><p>
        This installs the boot loader in the boot sector of the
        <code class="filename">/</code> partition.
       </p></dd><dt id="id-1.3.4.4.5.8.3.2.2.3"><span class="term"><span class="guimenu">Custom Root Partition</span>
      </span></dt><dd><p>
        Use this option to specify the location of the boot loader manually.
       </p></dd></dl></div></li><li class="step"><p>
     Click <span class="guimenu">OK</span> to apply the changes.
    </p></li></ol></div></div><div class="figure" id="fig-grub2-yast-boot-code-options0"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_bootloader_boot_code.png"><img src="images/yast2_bootloader_boot_code.png" width="75%" alt="Boot code options" title="Boot code options"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 18.2: </span><span class="title-name">Boot code options </span></span><a title="Permalink" class="permalink" href="#fig-grub2-yast-boot-code-options0">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2_yast_i.xml" title="Edit source document"> </a></div></div></div><p>
   The <span class="guimenu">Boot Code Options</span> tab includes the following
   additional options:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.4.5.8.6.1"><span class="term"><span class="guimenu">Set Active Flag in Partition Table for Boot
      Partition</span>
     </span></dt><dd><p>
       Activates the partition that contains the
       <code class="filename">/boot</code> directory. For POWER systems it
       activates the PReP partition. Use this option on systems with
       old BIOS and/or legacy operating systems because they may fail
       to boot from a non-active partition. It is safe to leave this
       option active.
      </p></dd><dt id="id-1.3.4.4.5.8.6.2"><span class="term"><span class="guimenu">Write Generic Boot Code to MBR</span>
     </span></dt><dd><p>
       If MBR contains a custom 'non-GRUB' code, this option replaces it with a
       generic, operating system independent code. If you deactivate this
       option, the system may become unbootable.
      </p></dd><dt id="id-1.3.4.4.5.8.6.3"><span class="term"><span class="guimenu">Enable Trusted Boot Support</span>
     </span></dt><dd><p>
       Starts TrustedGRUB2, which supports trusted computing functionality
       (Trusted Platform Module (TPM)). For more information refer to
       <a class="link" href="https://github.com/Sirrix-AG/TrustedGRUB2" target="_blank">https://github.com/Sirrix-AG/TrustedGRUB2</a>.
      </p></dd></dl></div><p>
      The <span class="guimenu">Protective MBR flag</span> section includes the following
      options:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.4.5.8.8.1"><span class="term"><span class="guimenu">set</span>
     </span></dt><dd><p>
       This is appropriate for traditional legacy BIOS booting.
      </p></dd><dt id="id-1.3.4.4.5.8.8.2"><span class="term"><span class="guimenu">remove</span>
     </span></dt><dd><p>
       This is appropriate for UEFI booting.
      </p></dd><dt id="id-1.3.4.4.5.8.8.3"><span class="term"><span class="guimenu">do not change</span>
     </span></dt><dd><p>
       This is usually the best choice if you have an already working
       system.
      </p></dd></dl></div><p>
       In most cases YaST defaults to the appropriate choice.
    </p></section><section class="sect2" id="sec-grub2-yast2-config-order" data-id-title="Adjusting the disk order"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.3.2 </span><span class="title-name">Adjusting the disk order</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-yast2-config-order">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If your computer has more than one hard disk, you can specify the boot
   sequence of the disks. The first disk in the list is where GRUB 2 will be
   installed in the case of booting from MBR. It is the disk where <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
   is installed by default. The rest of the list is a hint for
   GRUB 2's device mapper (see <a class="xref" href="#sec-grub2-map" title="18.2.4. Mapping between BIOS drives and Linux devices">Section 18.2.4, “Mapping between BIOS drives and Linux devices”</a>).
  </p><div id="id-1.3.4.4.5.9.3" data-id-title="Unbootable system" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Unbootable system</div><p>
    The default value is usually valid for almost all deployments. If you change
    the boot order of disks wrongly, the system may become unbootable on the
    next reboot. For example, if the first disk in the list is not part of the
    BIOS boot order, and the other disks in the list have empty MBRs.
   </p></div><div class="procedure" id="pro-sec-grub2-yast2-config-order" data-id-title="Setting the disk order"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 18.2: </span><span class="title-name">Setting the disk order </span></span><a title="Permalink" class="permalink" href="#pro-sec-grub2-yast2-config-order">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2_yast_i.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open the <span class="guimenu">Boot Code Options</span> tab.
    </p></li><li class="step"><p>
     Click <span class="guimenu">Edit Disk Boot Order</span>.
    </p></li><li class="step"><p>
     If more than one disk is listed, select a disk and click
     <span class="guimenu">Up</span> or <span class="guimenu">Down</span> to reorder the displayed
     disks.
    </p></li><li class="step"><p>
     Click <span class="guimenu">OK</span> two times to save the changes.
    </p></li></ol></div></div></section><section class="sect2" id="sec-grub2-yast2-config-advanced" data-id-title="Configuring advanced options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.3.3 </span><span class="title-name">Configuring advanced options</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-yast2-config-advanced">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Advanced boot parameters can be configured via the <span class="guimenu">Boot Loader
   Options</span> tab.
  </p><section class="sect3" id="sec-grub2-yast2-config-advanced-boot-loader" data-id-title="Boot Loader Options tab"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.3.3.1 </span><span class="title-name"><span class="guimenu">Boot Loader Options</span> tab</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-yast2-config-advanced-boot-loader">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><div class="figure" id="fig-grub2-yast-bootloader-options"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_bootloader_options.png"><img src="images/yast2_bootloader_options.png" width="75%" alt="Boot loader options" title="Boot loader options"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 18.3: </span><span class="title-name">Boot loader options </span></span><a title="Permalink" class="permalink" href="#fig-grub2-yast-bootloader-options">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2_yast_i.xml" title="Edit source document"> </a></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.4.5.10.3.3.1"><span class="term"><span class="guimenu">Boot Loader Time-Out</span>
     </span></dt><dd><p>
       Change the value of <span class="guimenu">Time-Out in Seconds</span> by typing in
       a new value and clicking the appropriate arrow key with your mouse.
      </p></dd><dt id="id-1.3.4.4.5.10.3.3.2"><span class="term"><span class="guimenu">Probe Foreign OS</span>
     </span></dt><dd><p>
       When selected, the boot loader searches for other systems like Windows
       or other Linux installations.
      </p></dd><dt id="id-1.3.4.4.5.10.3.3.3"><span class="term"><span class="guimenu">Hide Menu on Boot</span>
     </span></dt><dd><p>
       Hides the boot menu and boots the default entry.
      </p></dd><dt id="id-1.3.4.4.5.10.3.3.4"><span class="term"><span class="guimenu">Adjusting the Default Boot Entry</span>
     </span></dt><dd><p>
       Select the desired entry from the <span class="quote">“<span class="quote">Default Boot Section</span>”</span>
       list. Note that the <span class="quote">“<span class="quote">&gt;</span>”</span> sign in the boot entry name
       delimits the boot section and its subsection.
      </p></dd><dt id="vle-grub2-yast2-boot-password"><span class="term"><span class="guimenu">Protect Boot Loader with Password</span>
     </span></dt><dd><p>
       Protects the boot loader and the system with an additional password. For
       details on manual configuration, see <a class="xref" href="#sec-grub2-password" title="18.2.6. Setting a boot password">Section 18.2.6, “Setting a boot password”</a>.
       If this option is activated, the boot password is required on every boot,
       which means the system does not boot automatically. However, if you prefer
       the behavior of GRUB 1, additionally enable <span class="guimenu">Protect Entry
       Modification Only</span>. With this setting, anybody is allowed to select
       a boot entry and boot the system, whereas the password for the GRUB 2 <code class="systemitem">root</code>
       user is only required for modifying boot entries.
      </p></dd></dl></div></section><section class="sect3" id="sec-grub2-yast2-config-advanced-kernel-parameters" data-id-title="Kernel Parameters tab"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.3.3.2 </span><span class="title-name"><span class="guimenu">Kernel Parameters</span> tab</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-yast2-config-advanced-kernel-parameters">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><div class="figure" id="fig-grub2-yast-kernel-parameters"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_bootloader_kernel_parameters.png"><img src="images/yast2_bootloader_kernel_parameters.png" width="75%" alt="Kernel parameters" title="Kernel parameters"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 18.4: </span><span class="title-name">Kernel parameters </span></span><a title="Permalink" class="permalink" href="#fig-grub2-yast-kernel-parameters">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2_yast_i.xml" title="Edit source document"> </a></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.4.5.10.4.3.1"><span class="term"><span class="guimenu">Optional Kernel Command Line Parameter</span>
     </span></dt><dd><p>
       Specify optional kernel parameters here to enable/disable system
       features, add drivers, etc. 
      </p></dd><dt id="vle-grub2-yast2-cpu-mitigations"><span class="term"><span class="guimenu">CPU Mitigations</span></span></dt><dd><p>
       SUSE has released one or more kernel boot command line parameters for
       all software mitigations that have been deployed to prevent CPU side-channel
       attacks. Some of those may result in performance loss. Choose
       one the following options to strike a balance between security and
       performance, depending on your setting:
      </p><p><span class="formalpara-title"><span class="guimenu">Auto</span>. </span>
   Enables all mitigations required for your CPU model, but does
   not protect against cross-CPU thread attacks. This setting may impact
   performance to some degree, depending on the workload.
  </p><p><span class="formalpara-title"><span class="guimenu">Auto + No SMT</span>. </span>
    Provides the full set of available security mitigations. Enables all
    mitigations required for your CPU model. In addition, it disables
    Simultaneous Multithreading (SMT) to avoid side-channel attacks across
    multiple CPU threads. This setting may further impact performance,
    depending on the workload.
    </p><p><span class="formalpara-title"><span class="guimenu">Off</span>. </span>
    Disables all mitigations. Side-channel attacks against your CPU
    are possible, depending on the CPU model. This setting has no impact
    on performance.
   </p><p><span class="formalpara-title"><span class="guimenu">Manual</span>. </span>
    Does not set any mitigation level. Specify your CPU mitigations manually
    by using the kernel command line options.
   </p></dd><dt id="id-1.3.4.4.5.10.4.3.3"><span class="term"><span class="guimenu">Use Graphical Console</span>
     </span></dt><dd><p>
       When checked, the boot menu appears on a graphical splash screen rather
       than in a text mode. The resolution of the boot screen is set
       automatically by default, but you can manually set it
       via <span class="guimenu">Console resolution</span>. The graphical theme
       definition file can be specified with the <span class="guimenu">Console
       theme</span> file chooser. Only change this if you want to apply
       your own, custom-made theme.
      </p></dd><dt id="id-1.3.4.4.5.10.4.3.4"><span class="term"><span class="guimenu">Use Serial Console</span>
     </span></dt><dd><p>
       If your machine is controlled via a serial console, activate this option
       and specify which COM port to use at which speed. See <code class="command">info
       grub</code> or
       <a class="link" href="https://www.gnu.org/software/grub/manual/grub.html#Serial-terminal" target="_blank">https://www.gnu.org/software/grub/manual/grub.html#Serial-terminal</a>
      </p></dd></dl></div></section></section></section><section class="sect1" id="sec-grub2-zseries" data-id-title="Differences in terminal usage on IBM Z"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">18.4 </span><span class="title-name">Differences in terminal usage on IBM Z</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-zseries">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      On 3215 and 3270 terminals there are certain differences and limitations
      on how to move the cursor and how to issue editing commands within
      GRUB 2.
    </p><section class="sect2" id="sec-grub2-zseries-limitations" data-id-title="Limitations"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.4.1 </span><span class="title-name">Limitations</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-zseries-limitations">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.4.6.3.2.1"><span class="term">Interactivity</span></dt><dd><p>
              Interactivity is strongly limited. Typing often does not result
              in visual feedback. To see where the cursor is, type an
              underscore (<span class="keycap">_</span>).
            </p><div id="id-1.3.4.4.6.3.2.1.2.2" data-id-title="3270 compared to 3215" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: 3270 compared to 3215</div><p>
                The 3270 terminal is much better at displaying and refreshing
                screens than the 3215 terminal.
              </p></div></dd><dt id="id-1.3.4.4.6.3.2.2"><span class="term">Cursor movement</span></dt><dd><p>
              <span class="quote">“<span class="quote">Traditional</span>”</span> cursor movement is not possible.
              <span class="keycap">Alt</span>, <span class="keycap">Meta</span>,
              <span class="keycap">Ctrl</span> and the cursor keys do not work. To
              move the cursor, use the key combinations listed in
              <a class="xref" href="#sec-grub2-zseries-keys" title="18.4.2. Key combinations">Section 18.4.2, “Key combinations”</a>.
            </p></dd><dt id="id-1.3.4.4.6.3.2.3"><span class="term">Caret</span></dt><dd><p>
              The caret (<span class="keycap">^</span>) is used as a control character. To
              type a literal <span class="keycap">^</span> followed by a letter, type
              <span class="keycap">^</span>, <span class="keycap">^</span>,
              <em class="replaceable">LETTER</em>.
            </p></dd><dt id="id-1.3.4.4.6.3.2.4"><span class="term">Enter</span></dt><dd><p>
              The <span class="keycap">Enter</span> key does not work, use
              <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">J</span>
              instead.
            </p></dd></dl></div></section><section class="sect2" id="sec-grub2-zseries-keys" data-id-title="Key combinations"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.4.2 </span><span class="title-name">Key combinations</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-zseries-keys">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; " rowspan="3">
                <p>
                  Common Substitutes:
                </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">J</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  engage (<span class="quote">“<span class="quote">Enter</span>”</span>)
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">L</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  cancel, return to previous <span class="quote">“<span class="quote">state</span>”</span>
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">I</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  tab completion (in edit and shell mode)
                </p>
              </td></tr><tr><td style="vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; " rowspan="9">
                <p>
                  Keys Available in Menu Mode:
                </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">A</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  first entry
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">E</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  last entry
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">P</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  previous entry
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">N</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  next entry
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">G</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  previous page
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">C</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  next page
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">F</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  boot selected entry or enter submenu (same as
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">J</span>)
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">E</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  edit selected entry
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">C</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  enter GRUB-Shell
                </p>
              </td></tr><tr><td style="vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; " rowspan="14">
                <p>
                  Keys Available in Edit Mode:
                </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">P</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  previous line
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">N</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  next line
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">B</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  backward char
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">F</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  forward char
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">A</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  beginning of line
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">E</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  end of line
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">H</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  backspace
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">D</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  delete
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">K</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  delete line
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">Y</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  yank
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">O</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  open line
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">L</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  refresh screen
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">X</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  boot entry
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">C</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  enter GRUB-Shell
                </p>
              </td></tr><tr><td style="vertical-align: top; border-right: 1px solid ; " rowspan="11">
                <p>
                  Keys Available in Command Line Mode:
                </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">P</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  previous command
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">N</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  next command from history
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">A</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  beginning of line
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">E</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  end of line
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">B</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  backward char
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">F</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  forward char
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">H</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  backspace
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">D</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  delete
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">K</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  delete line
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">U</span>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  discard line
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; ">
                <p>
                  <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">Y</span>
                </p>
              </td><td>
                <p>
                  yank
                </p>
              </td></tr></tbody></table></div></section></section><section class="sect1" id="sec-grub2-commands" data-id-title="Helpful GRUB 2 commands"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">18.5 </span><span class="title-name">Helpful GRUB 2 commands</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-commands">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="vle-grub2-mkconfig"><span class="term"><code class="command">grub2-mkconfig</code></span></dt><dd><p>
            Generates a new <code class="filename">/boot/grub2/grub.cfg</code> based on
            <code class="filename">/etc/default/grub</code> and the scripts from
            <code class="filename">/etc/grub.d/</code>.
          </p><div class="example" id="id-1.3.4.4.7.2.1.2.2" data-id-title="Usage of grub2-mkconfig"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 18.1: </span><span class="title-name">Usage of grub2-mkconfig </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.4.7.2.1.2.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">grub2-mkconfig -o /boot/grub2/grub.cfg</pre></div></div></div><div id="id-1.3.4.4.7.2.1.2.3" data-id-title="Syntax check" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Syntax check</div><p>
              Running <code class="command">grub2-mkconfig</code> without any parameters
              prints the configuration to STDOUT where it can be reviewed. Use
              <a class="xref" href="#vle-grub2-script-check"><code class="command">grub2-script-check</code></a> after
              <code class="filename">/boot/grub2/grub.cfg</code> has been written to
              check its syntax.
            </p></div><div id="id-1.3.4.4.7.2.1.2.4" data-id-title="grub2-mkconfig cannot repair UEFI Secure Boot tables" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: <code class="command">grub2-mkconfig</code> cannot repair UEFI Secure Boot tables</div><p>
              If you are using UEFI Secure Boot and your system is not reaching
              GRUB 2 correctly anymore, you may need to additionally reinstall
              the Shim and regenerate the UEFI boot table. To do so, use:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>shim-install --config-file=/boot/grub2/grub.cfg</pre></div></div></dd><dt id="vle-grub2-mkrescue"><span class="term"><code class="command">grub2-mkrescue</code></span></dt><dd><p>
            Creates a bootable rescue image of your installed GRUB 2
            configuration.
          </p><div class="example" id="id-1.3.4.4.7.2.2.2.2" data-id-title="Usage of grub2-mkrescue"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 18.2: </span><span class="title-name">Usage of grub2-mkrescue </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.4.7.2.2.2.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">grub2-mkrescue -o save_path/name.iso iso</pre></div></div></div></dd><dt id="vle-grub2-script-check"><span class="term"><code class="command">grub2-script-check</code></span></dt><dd><p>
            Checks the given file for syntax errors.
          </p><div class="example" id="id-1.3.4.4.7.2.3.2.2" data-id-title="Usage of grub2-script-check"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 18.3: </span><span class="title-name">Usage of grub2-script-check </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.4.7.2.3.2.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">grub2-script-check /boot/grub2/grub.cfg</pre></div></div></div></dd><dt id="id-1.3.4.4.7.2.4"><span class="term"><code class="command">grub2-once</code></span></dt><dd><p>
            Set the default boot entry for the next boot only. To get the list
            of available boot entries use the <code class="option">--list</code> option.
          </p><div class="example" id="id-1.3.4.4.7.2.4.2.2" data-id-title="Usage of grub2-once"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 18.4: </span><span class="title-name">Usage of grub2-once </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.4.7.2.4.2.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">grub2-once number_of_the_boot_entry</pre></div></div></div><div id="id-1.3.4.4.7.2.4.2.3" data-id-title="grub2-once help" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: <code class="command">grub2-once</code> help</div><p>
              Call the program without any option to get a full list of all
              possible options.
            </p></div></dd></dl></div></section><section class="sect1" id="grub-rescue-target" data-id-title="Rescue mode"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">18.6 </span><span class="title-name">Rescue mode</span></span> <a title="Permalink" class="permalink" href="#grub-rescue-target">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <span class="emphasis"><em>Rescue mode</em></span> is a specific <code class="systemitem">root</code> user session
      for troubleshooting and repairing systems where the booting process
      fails. It offers a single-user environment with local file systems and
      core system services active. Network interfaces are not activated. To
      enter the rescue mode, follow these steps.
    </p><div class="procedure" id="proc-rescue-mode" data-id-title="Entering rescue mode"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 18.3: </span><span class="title-name">Entering rescue mode </span></span><a title="Permalink" class="permalink" href="#proc-rescue-mode">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
          Reboot the system. The boot screen appears, offering the GRUB 2 boot
          menu.
        </p></li><li class="step"><p>
          Select the menu entry to boot
          and press <span class="keycap">e</span> to edit the boot line.
        </p></li><li class="step"><p>
          Append the following parameter to the line containing the kernel
          parameters:
        </p><div class="verbatim-wrap"><pre class="screen">systemd.unit=rescue.target</pre></div></li><li class="step"><p>
          Press <span class="keycap">Ctrl</span>+<span class="keycap">X</span> to boot with
          these settings.
        </p></li><li class="step"><p>
          Enter the password for <code class="systemitem">root</code>.
        </p></li><li class="step"><p>
          Make all the necessary changes.
        </p></li><li class="step"><p>
          Enter normal operating target again by entering
          <code class="command">systemctl isolate multi-user.target</code> or
          <code class="command">systemctl isolate graphical.target</code> at the command
          line.
        </p></li></ol></div></div></section><section class="sect1" id="sec-grub2-info" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">18.7 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-grub2-info">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/grub2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Extensive information about GRUB 2 is available at
      <a class="link" href="https://www.gnu.org/software/grub/" target="_blank">https://www.gnu.org/software/grub/</a>. Also refer to the
      <code class="command">grub</code> info page. <span class="phrase">You can also
      search for the keyword <span class="quote">“<span class="quote">GRUB 2</span>”</span> in the Technical Information
      Search at <a class="link" href="https://www.suse.com/support" target="_blank">https://www.suse.com/support</a> to get
      information about special issues.</span>
    </p></section></section><section class="chapter" id="cha-systemd" data-id-title="The systemd daemon"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">19 </span><span class="title-name">The <code class="systemitem">systemd</code> daemon</span></span> <a title="Permalink" class="permalink" href="#cha-systemd">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <code class="systemitem">systemd</code> initializes the system. It has the process ID 1. <code class="systemitem">systemd</code> is
    started directly by the kernel and resists signal 9, which normally
    terminates processes. All other programs are started directly by
    <code class="systemitem">systemd</code> or by one of its child processes. <code class="systemitem">systemd</code> is a replacement for
    the System V init daemon and is fully compatible with System V init (by
    supporting init scripts).
  </p><p>
    The main advantage of <code class="systemitem">systemd</code> is that it considerably speeds up boot time
    by parallelizing service starts. Furthermore, <code class="systemitem">systemd</code> only starts a
    service when it is really needed. Daemons are not started unconditionally
    at boot time, but when being required for the first time. <code class="systemitem">systemd</code> also
    supports Kernel Control Groups (cgroups), creating snapshots, and restoring
    the system state. For more details see
    <a class="link" href="https://www.freedesktop.org/wiki/Software/systemd/" target="_blank">https://www.freedesktop.org/wiki/Software/systemd/</a>.
  </p><div id="id-1.3.4.5.5" data-id-title="systemd inside WSL" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: <code class="systemitem">systemd</code> inside WSL</div><p>
      Windows Subsystem for Linux (WSL) enables running Linux applications and distributions under
      the Microsoft Windows operating system. WSL uses its init process instead of <code class="systemitem">systemd</code>. To enable
      <code class="systemitem">systemd</code> in <span class="productname"><span class="phrase">SLES</span></span> running in WSL, install the <code class="literal">wsl_systemd</code>
      pattern that automates the process:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper in -t pattern wsl_systemd</pre></div><p>
      Alternatively, you can edit <code class="filename">/etc/wsl.conf</code> and add the following lines
      manually:
    </p><div class="verbatim-wrap"><pre class="screen">[boot]
systemd=true</pre></div><p>
      Keep in mind that the support for <code class="systemitem">systemd</code> in WSL is partial—<code class="systemitem">systemd</code> unit files must
      have reasonable process management behavior.
    </p></div><section class="sect1" id="sec-boot-systemd-concept" data-id-title="The systemd concept"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">19.1 </span><span class="title-name">The <code class="systemitem">systemd</code> concept</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-concept">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The following section explains the concept behind <code class="systemitem">systemd</code>.
    </p><p>
      <code class="systemitem">systemd</code> is a system and session manager for Linux, compatible with
      System V and LSB init scripts. The main features of <code class="systemitem">systemd</code> include:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          parallelization capabilities
        </p></li><li class="listitem"><p>
          socket and D-Bus activation for starting services
        </p></li><li class="listitem"><p>
          on-demand starting of daemons
        </p></li><li class="listitem"><p>
          tracking of processes using Linux cgroups
        </p></li><li class="listitem"><p>
          creating snapshots and restoring of the system state
        </p></li><li class="listitem"><p>
          maintains mount and automount points
        </p></li><li class="listitem"><p>
          implements an elaborate transactional dependency-based service
          control logic
        </p></li></ul></div><section class="sect2" id="sec-boot-systemd-unitfile" data-id-title="Unit file"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.1.1 </span><span class="title-name">Unit file</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-unitfile">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        A unit configuration file contains information about a service, a
        socket, a device, a mount point, an automount point, a swap file or
        partition, a start-up target, a watched file system path, a timer
        controlled and supervised by <code class="systemitem">systemd</code>, a temporary system state
        snapshot, a resource management slice or a group of externally created
        processes.
      </p><p>
        <span class="quote">“<span class="quote">Unit file</span>”</span> is a generic term used by <code class="systemitem">systemd</code> for the
        following:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="formalpara-title">Service. </span>
              Information about a process (for example, running a daemon); file
              ends with .service
            </p></li><li class="listitem"><p><span class="formalpara-title">Targets. </span>
              Used for grouping units and as synchronization points during
              start-up; file ends with .target
            </p></li><li class="listitem"><p><span class="formalpara-title">Sockets. </span>
              Information about an IPC or network socket or a file system FIFO,
              for socket-based activation (like
              <code class="systemitem">inetd</code>); file ends with
              .socket
            </p></li><li class="listitem"><p><span class="formalpara-title">Path. </span>
              Used to trigger other units (for example, running a service when
              files change); file ends with .path
            </p></li><li class="listitem"><p><span class="formalpara-title">Timer. </span>
              Information about a timer controlled, for timer-based activation;
              file ends with .timer
            </p></li><li class="listitem"><p><span class="formalpara-title">Mount point. </span>
              Normally auto-generated by the fstab generator; file ends with
              .mount
            </p></li><li class="listitem"><p><span class="formalpara-title">Automount point. </span>
              Information about a file system automount point; file ends with
              .automount
            </p></li><li class="listitem"><p><span class="formalpara-title">Swap. </span>
              Information about a swap device or file for memory paging; file
              ends with .swap
            </p></li><li class="listitem"><p><span class="formalpara-title">Device. </span>
              Information about a device unit as exposed in the sysfs/udev(7)
              device tree; file ends with .device
            </p></li><li class="listitem"><p><span class="formalpara-title">Scope / slice. </span>
              A concept for hierarchically managing resources of a group of
              processes; file ends with .scope/.slice
            </p></li></ul></div><p>
        For more information about <code class="systemitem">systemd</code> unit files, see
        <a class="link" href="https://www.freedesktop.org/software/systemd/man/latest/systemd.unit.html" target="_blank">https://www.freedesktop.org/software/systemd/man/latest/systemd.unit.html</a>
      </p></section></section><section class="sect1" id="sec-boot-systemd-basics" data-id-title="Basic usage"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">19.2 </span><span class="title-name">Basic usage</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-basics">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The System V init system uses several commands to handle
      services—the init scripts, <code class="command">insserv</code>,
      <code class="command">telinit</code> and others. <code class="systemitem">systemd</code> makes it easier to
      manage services, because there is only one command to handle most service
      related tasks: <code class="command">systemctl</code>. It uses the <span class="quote">“<span class="quote">command
      plus subcommand</span>”</span> notation like <code class="command">git</code> or
      <code class="command">zypper</code>:
    </p><div class="verbatim-wrap"><pre class="screen">systemctl <em class="replaceable">GENERAL OPTIONS</em> <em class="replaceable">SUBCOMMAND</em> <em class="replaceable">SUBCOMMAND OPTIONS</em></pre></div><p>
      See <code class="command">man 1 systemctl</code> for a complete manual.
    </p><div id="id-1.3.4.5.7.5" data-id-title="Terminal output and Bash completion" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Terminal output and Bash completion</div><p>
        If the output goes to a terminal (and not to a pipe or a file, for
        example), <code class="systemitem">systemd</code> commands send long output to a pager by default.
        Use the <code class="option">--no-pager</code> option to turn off paging mode.
      </p><p>
        <code class="systemitem">systemd</code> also supports bash-completion, allowing you to enter the
        first letters of a subcommand and then press <span class="keycap">→|</span>.
        This feature is only available in the <code class="systemitem">bash</code>
        shell and requires the installation of the package
        <code class="systemitem">bash-completion</code>.
      </p></div><section class="sect2" id="sec-boot-systemd-basics-services" data-id-title="Managing services in a running system"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.2.1 </span><span class="title-name">Managing services in a running system</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-basics-services">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Subcommands for managing services are the same as for managing a
        service with System V init (<code class="command">start</code>,
        <code class="command">stop</code>, ...). The general syntax for service
        management commands is as follows:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.5.7.6.3.1"><span class="term"><code class="systemitem">systemd</code></span></dt><dd><div class="verbatim-wrap"><pre class="screen">systemctl reload|restart|start|status|stop|<em class="replaceable">...</em> <em class="replaceable">MY_SERVICE(S)</em></pre></div></dd><dt id="id-1.3.4.5.7.6.3.2"><span class="term">System V init</span></dt><dd><div class="verbatim-wrap"><pre class="screen">rc<em class="replaceable">MY_SERVICE(S)</em> reload|restart|start|status|stop|<em class="replaceable">...</em></pre></div></dd></dl></div><p>
        <code class="systemitem">systemd</code> allows you to manage several services in one go. Instead of
        executing init scripts one after the other as with System V init,
        execute a command like the following:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start <em class="replaceable">MY_1ST_SERVICE</em> <em class="replaceable">MY_2ND_SERVICE</em></pre></div><p>
        To list all services available on the system:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl list-unit-files --type=service</pre></div><p>
        The following table lists the most important service management
        commands for <code class="systemitem">systemd</code> and System V init:
      </p><div class="table" id="id-1.3.4.5.7.6.9" data-id-title="Service management commands"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 19.1: </span><span class="title-name">Service management commands </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.5.7.6.9">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="1"/><col class="2"/><col class="3"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  Task
                </p>
              </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <code class="systemitem">systemd</code> Command
                </p>
              </th><th style="border-bottom: 1px solid ; ">
                <p>
                  System V init Command
                </p>
              </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p><span class="formalpara-title">Starting. </span></p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">start</pre></div>
              </td><td style="border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">start</pre></div>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p><span class="formalpara-title">Stopping. </span></p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">stop</pre></div>
              </td><td style="border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">stop</pre></div>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p><span class="formalpara-title">Restarting. </span>
                    Shuts down services and starts them afterward. If a service
                    is not yet running, it is started.
                  </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">restart</pre></div>
              </td><td style="border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">restart</pre></div>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p><span class="formalpara-title">Restarting conditionally. </span>
                    Restarts services if they are currently running. Does
                    nothing for services that are not running.
                  </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">try-restart</pre></div>
              </td><td style="border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">try-restart</pre></div>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p><span class="formalpara-title">Reloading. </span>
                    Tells services to reload their configuration files without
                    interrupting operation. Use case: tell Apache to reload a
                    modified <code class="filename">httpd.conf</code> configuration
                    file. Not all services support reloading.
                  </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">reload</pre></div>
              </td><td style="border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">reload</pre></div>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p><span class="formalpara-title">Reloading or restarting. </span>
                    Reloads services if reloading is supported, otherwise
                    restarts them. If a service is not yet running, it is
                    started.
                  </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">reload-or-restart</pre></div>
              </td><td style="border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">n/a</pre></div>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p><span class="formalpara-title">Reloading or restarting conditionally. </span>
                    Reloads services if reloading is supported, otherwise
                    restarts them if currently running. Does nothing for
                    services that are not running.
                  </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">reload-or-try-restart</pre></div>
              </td><td style="border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">n/a</pre></div>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p><span class="formalpara-title">Getting detailed status information. </span>
                    Lists information about the status of services. The
                    <code class="systemitem">systemd</code> command shows details such as description,
                    executable, status, cgroup, and messages last issued by a
                    service (see
                    <a class="xref" href="#sec-boot-systemd-basics-services-debugging" title="19.6.9. Debugging services">Section 19.6.9, “Debugging services”</a>).
                    The level of details displayed with the System V init
                    differs from service to service.
                  </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">status</pre></div>
              </td><td style="border-bottom: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">status</pre></div>
              </td></tr><tr><td style="border-right: 1px solid ; ">
                <p><span class="formalpara-title">Getting short status information. </span>
                    Shows whether services are active or not.
                  </p>
              </td><td style="border-right: 1px solid ; ">
<div class="verbatim-wrap"><pre class="screen">is-active</pre></div>
              </td><td>
<div class="verbatim-wrap"><pre class="screen">status</pre></div>
              </td></tr></tbody></table></div></div></section><section class="sect2" id="sec-boot-systemd-basics-services-enabling" data-id-title="Permanently enabling/disabling services"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.2.2 </span><span class="title-name">Permanently enabling/disabling services</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-basics-services-enabling">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The service management commands mentioned in the previous section let
        you manipulate services for the current session. <code class="systemitem">systemd</code> also lets
        you permanently enable or disable services, so they are automatically
        started when requested or are always unavailable. You can either do
        this by using YaST, or on the command line.
      </p><section class="sect3" id="sec-boot-systemd-basics-services-enabling-cmd" data-id-title="Enabling/disabling services on the command line"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">19.2.2.1 </span><span class="title-name">Enabling/disabling services on the command line</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-basics-services-enabling-cmd">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          The following table lists enabling and disabling commands for
          <code class="systemitem">systemd</code> and System V init:
        </p><div id="id-1.3.4.5.7.7.3.3" data-id-title="Service start" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Service start</div><p>
            When enabling a service on the command line, it is not started
            automatically. It is scheduled to be started with the next system
            start-up or runlevel/target change. To immediately start a service
            after having enabled it, explicitly run <code class="command">systemctl start
            <em class="replaceable">MY_SERVICE</em></code> or <code class="command">rc
            <em class="replaceable">MY_SERVICE</em> start</code>.
          </p></div><div class="table" id="id-1.3.4.5.7.7.3.4" data-id-title="Commands for enabling and disabling services"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 19.2: </span><span class="title-name">Commands for enabling and disabling services </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.5.7.7.3.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="1"/><col class="2"/><col class="3"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    Task
                  </p>
                </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    <code class="systemitem">systemd</code> Command
                  </p>
                </th><th style="border-bottom: 1px solid ; ">
                  <p>
                    System V init Command
                  </p>
                </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p><span class="formalpara-title">Enabling. </span></p>
                </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">systemctl enable
                    <em class="replaceable">MY_SERVICE(S)</em></code>
                  </p>
                </td><td style="border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">insserv
                    <em class="replaceable">MY_SERVICE(S)</em></code>,
                    <code class="command">chkconfig -a
                    <em class="replaceable">MY_SERVICE(S)</em></code>
                  </p>
                </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p><span class="formalpara-title">Disabling. </span></p>
                </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">systemctl disable
                    <em class="replaceable">MY_SERVICE(S)</em>.service</code>
                  </p>
                </td><td style="border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">insserv -r
                    <em class="replaceable">MY_SERVICE(S)</em></code>,
                    <code class="command">chkconfig -d
                    <em class="replaceable">MY_SERVICE(S)</em></code>
                  </p>
                </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p><span class="formalpara-title">Checking. </span>
                      Shows whether a service is enabled or not.
                    </p>
                </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">systemctl is-enabled
                    <em class="replaceable">MY_SERVICE</em></code>
                  </p>
                </td><td style="border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">chkconfig
                    <em class="replaceable">MY_SERVICE</em></code>
                  </p>
                </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p><span class="formalpara-title">Re-enabling. </span>
                      Similar to restarting a service, this command first
                      disables and then enables a service. Useful to re-enable
                      a service with its defaults.
                    </p>
                </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">systemctl reenable
                    <em class="replaceable">MY_SERVICE</em></code>
                  </p>
                </td><td style="border-bottom: 1px solid ; ">
                  <p>
                    n/a
                  </p>
                </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p><span class="formalpara-title">Masking. </span>
                      After <span class="quote">“<span class="quote">disabling</span>”</span> a service, it can still be
                      started manually. To disable a service, you need to mask
                      it. Use with care.
                    </p>
                </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">systemctl mask
                    <em class="replaceable">MY_SERVICE</em></code>
                  </p>
                </td><td style="border-bottom: 1px solid ; ">
                  <p>
                    n/a
                  </p>
                </td></tr><tr><td style="border-right: 1px solid ; ">
                  <p><span class="formalpara-title">Unmasking. </span>
                      A service that has been masked can only be used again
                      after it has been unmasked.
                    </p>
                </td><td style="border-right: 1px solid ; ">
                  <p>
                    <code class="command">systemctl unmask
                    <em class="replaceable">MY_SERVICE</em></code>
                  </p>
                </td><td>
                  <p>
                    n/a
                  </p>
                </td></tr></tbody></table></div></div></section></section></section><section class="sect1" id="sec-boot-systemd-boot" data-id-title="System start and target management"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">19.3 </span><span class="title-name">System start and target management</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-boot">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The entire process of starting the system and shutting it down is
      maintained by <code class="systemitem">systemd</code>. From this point of view, the kernel can be
      considered a background process to maintain all other processes and
      adjust CPU time and hardware access according to requests from other
      programs.
    </p><section class="sect2" id="sec-boot-systemd-targets" data-id-title="Targets compared to runlevels"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.3.1 </span><span class="title-name">Targets compared to runlevels</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-targets">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        With System V init the system was booted into a so-called
        <span class="quote">“<span class="quote">Runlevel</span>”</span>. A runlevel defines how the system is started
        and what services are available in the running system. Runlevels are
        numbered; the most commonly known ones are <code class="literal">0</code>
        (shutting down the system), <code class="literal">3</code> (multiuser with
        network) and <code class="literal">5</code> (multiuser with network and display
        manager).
      </p><p>
        <code class="systemitem">systemd</code> introduces a new concept by using so-called <span class="quote">“<span class="quote">target
        units</span>”</span>. However, it remains fully compatible with the runlevel
        concept. Target units are named rather than numbered and serve specific
        purposes. For example, the targets
        <code class="systemitem">local-fs.target</code> and
        <code class="systemitem">swap.target</code> mount local file systems and swap
        spaces.
      </p><p>
        The target <code class="systemitem">graphical.target</code> provides a
        multiuser system with network and display manager capabilities and is
        equivalent to runlevel 5. Complex targets, such as
        <code class="systemitem">graphical.target</code> act as <span class="quote">“<span class="quote">meta</span>”</span>
        targets by combining a subset of other targets. Since <code class="systemitem">systemd</code> makes
        it easy to create custom targets by combining existing targets, it
        offers great flexibility.
      </p><p>
        The following list shows the most important <code class="systemitem">systemd</code> target units. For
        a full list refer to <code class="command">man 7 systemd.special</code>.
      </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Selected <code class="systemitem">systemd</code> target units </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.5.8.3.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.4.5.8.3.6.2"><span class="term"><code class="systemitem">default.target</code></span></dt><dd><p>
              The target that is booted by default. Not a <span class="quote">“<span class="quote">real</span>”</span>
              target, but rather a symbolic link to another target like
              <code class="systemitem">graphic.target</code>. Can be permanently
              changed via YaST (see
              <a class="xref" href="#sec-boot-runlevel-edit" title="19.4. Managing services with YaST">Section 19.4, “Managing services with YaST”</a>). To change it for a
              session, use the kernel parameter
              <code class="literal">systemd.unit=<em class="replaceable">MY_TARGET.target</em></code>
              at the boot prompt.
            </p></dd><dt id="id-1.3.4.5.8.3.6.3"><span class="term"><code class="systemitem">emergency.target</code></span></dt><dd><p>
              Starts a minimal emergency <code class="systemitem">root</code> shell on the console. Only
              use it at the boot prompt as
              <code class="literal">systemd.unit=emergency.target</code>.
            </p></dd><dt id="id-1.3.4.5.8.3.6.4"><span class="term"><code class="systemitem">graphical.target</code></span></dt><dd><p>
              Starts a system with network, multiuser support and a display
              manager.
            </p></dd><dt id="id-1.3.4.5.8.3.6.5"><span class="term"><code class="systemitem">halt.target</code></span></dt><dd><p>
              Shuts down the system.
            </p></dd><dt id="id-1.3.4.5.8.3.6.6"><span class="term"><code class="systemitem">mail-transfer-agent.target</code></span></dt><dd><p>
              Starts all services necessary for sending and receiving mails.
            </p></dd><dt id="id-1.3.4.5.8.3.6.7"><span class="term"><code class="systemitem">multi-user.target</code></span></dt><dd><p>
              Starts a multiuser system with network.
            </p></dd><dt id="id-1.3.4.5.8.3.6.8"><span class="term"><code class="systemitem">reboot.target</code></span></dt><dd><p>
              Reboots the system.
            </p></dd><dt id="id-1.3.4.5.8.3.6.9"><span class="term"><code class="systemitem">rescue.target</code></span></dt><dd><p>
              Starts a single-user <code class="systemitem">root</code> session without network. Basic
              tools for system administration are available. The
              <code class="literal">rescue</code> target is suitable for solving multiple
              system problems, for example, failing logins or fixing issues
              with a display driver.
            </p></dd></dl></div><p>
        To remain compatible with the System V init runlevel system, <code class="systemitem">systemd</code>
        provides special targets named
        <code class="literal">runlevel<em class="replaceable">X</em>.target</code> mapping
        the corresponding runlevels numbered <em class="replaceable">X</em>.
      </p><p>
        To inspect the current target, use the command: <code class="command">systemctl
        get-default</code>
      </p><div class="table" id="id-1.3.4.5.8.3.9" data-id-title="System V runlevels and systemd target units"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 19.3: </span><span class="title-name">System V runlevels and <code class="systemitem">systemd</code> target units </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.5.8.3.9">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="1"/><col class="2"/><col class="3"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  System V runlevel
                </p>
              </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <code class="systemitem">systemd</code> target
                </p>
              </th><th style="border-bottom: 1px solid ; ">
                <p>
                  Purpose
                </p>
              </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  0
                </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <code class="systemitem">runlevel0.target</code>,
                  <code class="systemitem">halt.target</code>,
                  <code class="systemitem">poweroff.target</code>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  System shutdown
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  1, S
                </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <code class="systemitem">runlevel1.target</code>,
                  <code class="systemitem">rescue.target</code>,
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  Single-user mode
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  2
                </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <code class="systemitem">runlevel2.target</code>,
                  <code class="systemitem">multi-user.target</code>,
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  Local multiuser without remote network
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  3
                </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <code class="systemitem">runlevel3.target</code>,
                  <code class="systemitem">multi-user.target</code>,
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  Full multiuser with network
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  4
                </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <code class="systemitem">runlevel4.target</code>
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  Unused/User-defined
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  5
                </p>
              </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                <p>
                  <code class="systemitem">runlevel5.target</code>,
                  <code class="systemitem">graphical.target</code>,
                </p>
              </td><td style="border-bottom: 1px solid ; ">
                <p>
                  Full multiuser with network and display manager
                </p>
              </td></tr><tr><td style="border-right: 1px solid ; ">
                <p>
                  6
                </p>
              </td><td style="border-right: 1px solid ; ">
                <p>
                  <code class="systemitem">runlevel6.target</code>,
                  <code class="systemitem">reboot.target</code>,
                </p>
              </td><td>
                <p>
                  System reboot
                </p>
              </td></tr></tbody></table></div></div><div id="id-1.3.4.5.8.3.10" data-id-title="systemd ignores /etc/inittab" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: <code class="systemitem">systemd</code> ignores <code class="filename">/etc/inittab</code></div><p>
          The runlevels in a System V init system are configured in
          <code class="filename">/etc/inittab</code>. <code class="systemitem">systemd</code> does
          <span class="emphasis"><em>not</em></span> use this configuration. Refer to
          <a class="xref" href="#sec-boot-systemd-custom-targets" title="19.5.5. Creating custom targets">Section 19.5.5, “Creating custom targets”</a> for instructions on
          how to create your own bootable target.
        </p></div><section class="sect3" id="sec-boot-systemd-targets-commands" data-id-title="Commands to change targets"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">19.3.1.1 </span><span class="title-name">Commands to change targets</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-targets-commands">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          Use the following commands to operate with target units:
        </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="1"/><col class="2"/><col class="3"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    Task
                  </p>
                </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    <code class="systemitem">systemd</code> Command
                  </p>
                </th><th style="border-bottom: 1px solid ; ">
                  <p>
                    System V init Command
                  </p>
                </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    Change the current target/runlevel
                  </p>
                </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">systemctl isolate</code>
                    <em class="replaceable">MY_TARGET</em>.target
                  </p>
                </td><td style="border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">telinit</code> <em class="replaceable">X</em>
                  </p>
                </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    Change to the default target/runlevel
                  </p>
                </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">systemctl default</code>
                  </p>
                </td><td style="border-bottom: 1px solid ; ">
                  <p>
                    n/a
                  </p>
                </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    Get the current target/runlevel
                  </p>
                </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">systemctl list-units --type=target</code>
                  </p>
                  <p>
                    With <code class="systemitem">systemd</code>, there is usually more than one active
                    target. The command lists all currently active targets.
                  </p>
                </td><td style="border-bottom: 1px solid ; ">
                  <p>
                    <code class="command">who -r</code>
                  </p>
                  <p>
                    or
                  </p>
                  <p>
                    <code class="command">runlevel</code>
                  </p>
                </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    persistently change the default runlevel
                  </p>
                </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    Use the Services Manager or run the following command:
                  </p>
                  <p>
                    <code class="command">ln -sf /usr/lib/systemd/system/</code>
                    <em class="replaceable">MY_TARGET</em>.target
                    /etc/systemd/system/default.target
                  </p>
                </td><td style="border-bottom: 1px solid ; ">
                  <p>
                    Use the Services Manager or change the line
                  </p>
                  <p>
                    <code class="command">id:</code>
                    <em class="replaceable">X</em>:initdefault:
                  </p>
                  <p>
                    in <code class="filename">/etc/inittab</code>
                  </p>
                </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    Change the default runlevel for the current boot process
                  </p>
                </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                  <p>
                    Enter the following option at the boot prompt
                  </p>
                  <p>
                    <code class="command">systemd.unit=</code>
                    <em class="replaceable">MY_TARGET</em>.target
                  </p>
                </td><td style="border-bottom: 1px solid ; ">
                  <p>
                    Enter the desired runlevel number at the boot prompt.
                  </p>
                </td></tr><tr><td style="border-right: 1px solid ; ">
                  <p>
                    Show a target's/runlevel's dependencies
                  </p>
                </td><td style="border-right: 1px solid ; ">
                  <p>
                    <code class="command">systemctl show -p "Requires"</code>
                    <em class="replaceable">MY_TARGET</em>.target
                  </p>
                  <p>
                    <code class="command">systemctl show -p "Wants"</code>
                    <em class="replaceable">MY_TARGET</em>.target
                  </p>
                  <p>
                    <span class="quote">“<span class="quote">Requires</span>”</span> lists the hard dependencies (the
                    ones that must be resolved), whereas <span class="quote">“<span class="quote">Wants</span>”</span>
                    lists the soft dependencies (the ones that get resolved if
                    possible).
                  </p>
                </td><td>
                  <p>
                    n/a
                  </p>
                </td></tr></tbody></table></div></section></section><section class="sect2" id="sec-boot-systemd-debug" data-id-title="Debugging system start-up"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.3.2 </span><span class="title-name">Debugging system start-up</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-debug">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        <code class="systemitem">systemd</code> offers the means to analyze the system start-up process. You
        can review the list of all services and their status (rather than
        having to parse <code class="filename">/var/log/</code>). <code class="systemitem">systemd</code> also allows
        you to scan the start-up procedure to find out how much time each
        service start-up consumes.
      </p><section class="sect3" id="sec-boot-systemd-debug-review" data-id-title="Review start-up of services"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">19.3.2.1 </span><span class="title-name">Review start-up of services</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-debug-review">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          To review the complete list of services that have been started since
          booting the system, enter the command <code class="command">systemctl</code>.
          It lists all active services like shown below (shortened). To get
          more information on a specific service, use <code class="command">systemctl status
          <em class="replaceable">MY_SERVICE</em></code>.
        </p><div class="example" id="id-1.3.4.5.8.4.3.3" data-id-title="List active services"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 19.1: </span><span class="title-name">List active services </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.5.8.4.3.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemctl
UNIT                        LOAD   ACTIVE SUB       JOB DESCRIPTION
[...]
iscsi.service               loaded active exited    Login and scanning of iSC+
kmod-static-nodes.service   loaded active exited    Create list of required s+
libvirtd.service            loaded active running   Virtualization daemon
nscd.service                loaded active running   Name Service Cache Daemon
chronyd.service             loaded active running   NTP Server Daemon
polkit.service              loaded active running   Authorization Manager
postfix.service             loaded active running   Postfix Mail Transport Ag+
rc-local.service            loaded active exited    /etc/init.d/boot.local Co+
rsyslog.service             loaded active running   System Logging Service
[...]
LOAD   = Reflects whether the unit definition was properly loaded.
ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
SUB    = The low-level unit activation state, values depend on unit type.

161 loaded units listed. Pass --all to see loaded but inactive units, too.
To show all installed unit files use 'systemctl list-unit-files'.</pre></div></div></div><p>
          To restrict the output to services that failed to start, use the
          <code class="option">--failed</code> option:
        </p><div class="example" id="id-1.3.4.5.8.4.3.5" data-id-title="List failed services"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 19.2: </span><span class="title-name">List failed services </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.5.8.4.3.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemctl --failed
UNIT                   LOAD   ACTIVE SUB    JOB DESCRIPTION
apache2.service        loaded failed failed     apache
NetworkManager.service loaded failed failed     Network Manager
plymouth-start.service loaded failed failed     Show Plymouth Boot Screen

[...]</pre></div></div></div></section><section class="sect3" id="sec-boot-systemd-debug-time" data-id-title="Debug start-up time"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">19.3.2.2 </span><span class="title-name">Debug start-up time</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-debug-time">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          To debug system start-up time, <code class="systemitem">systemd</code> offers the
          <code class="command">systemd-analyze</code> command. It shows the total
          start-up time, a list of services ordered by start-up time and can
          also generate an SVG graphic showing the time services took to start
          in relation to the other services.
        </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.5.8.4.4.3.1"><span class="term">Listing the system start-up time</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemd-analyze
Startup finished in 2666ms (kernel) + 21961ms (userspace) = 24628ms</pre></div></dd><dt id="id-1.3.4.5.8.4.4.3.2"><span class="term">Listing the services start-up time</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemd-analyze blame
    15.000s backup-rpmdb.service
    14.879s mandb.service
     7.646s backup-sysconfig.service
     4.940s postfix.service
     4.921s logrotate.service
     4.640s libvirtd.service
     4.519s display-manager.service
     3.921s btrfsmaintenance-refresh.service
     3.466s lvm2-monitor.service
     2.774s plymouth-quit-wait.service
     2.591s firewalld.service
     2.137s initrd-switch-root.service
     1.954s ModemManager.service
     1.528s rsyslog.service
     1.378s apparmor.service
    [...]</pre></div></dd><dt id="id-1.3.4.5.8.4.4.3.3"><span class="term">Services start-up time graphics</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemd-analyze plot &gt; jupiter.example.com-startup.svg</pre></div><div class="informalfigure"><div class="mediaobject"><a href="images/systemd_startup.png"><img src="images/systemd_startup.png" width="75%" alt="Image" title="Image"/></a></div></div></dd></dl></div></section><section class="sect3" id="sec-boot-systemd-debug-complete" data-id-title="Review the complete start-up process"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">19.3.2.3 </span><span class="title-name">Review the complete start-up process</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-debug-complete">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
          The commands above list the services that are started and their
          start-up times. For a more detailed overview, specify the following
          parameters at the boot prompt to instruct <code class="systemitem">systemd</code> to create a
          verbose log of the complete start-up procedure.
        </p><div class="verbatim-wrap"><pre class="screen">systemd.log_level=debug systemd.log_target=kmsg</pre></div><p>
          Now <code class="systemitem">systemd</code> writes its log messages into the kernel ring buffer.
          View that buffer with <code class="command">dmesg</code>:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>dmesg -T | less</pre></div></section></section><section class="sect2" id="sec-boot-systemd-sysv-compatibility" data-id-title="System V compatibility"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.3.3 </span><span class="title-name">System V compatibility</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-sysv-compatibility">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        <code class="systemitem">systemd</code> is compatible with System V, allowing you to still use
        existing System V init scripts. However, there is at least one known
        issue where a System V init script does not work with <code class="systemitem">systemd</code> out of
        the box: starting a service as a different user via
        <code class="command">su</code> or <code class="command">sudo</code> in init scripts
        results in a failure of the script, producing an <span class="quote">“<span class="quote">Access
        denied</span>”</span> error.
      </p><p>
        When changing the user with <code class="command">su</code> or
        <code class="command">sudo</code>, a PAM session is started. This session will be
        terminated after the init script is finished. As a consequence, the
        service that has been started by the init script is also
        terminated. To work around this error, proceed as follows:
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Create a service file wrapper with the same name as the init script
            plus the file name extension <code class="filename">.service</code>:
          </p><div class="verbatim-wrap"><pre class="screen">[Unit]
Description=<em class="replaceable">DESCRIPTION</em>
After=network.target

[Service]
User=<em class="replaceable">USER</em>
Type=forking<span class="callout" id="co-service-wrapper-type">1</span>
PIDFile=<em class="replaceable">PATH TO PID FILE</em><a class="xref" href="#co-service-wrapper-type"><span class="callout">1</span></a>
ExecStart=<em class="replaceable">PATH TO INIT SCRIPT</em> start
ExecStop=<em class="replaceable">PATH TO INIT SCRIPT</em> stop
ExecStopPost=/usr/bin/rm -f <em class="replaceable">PATH TO PID FILE</em><a class="xref" href="#co-service-wrapper-type"><span class="callout">1</span></a>

[Install]
WantedBy=multi-user.target<span class="callout" id="co-service-wrapper-target">2</span></pre></div><p>
            Replace all values written in <em class="replaceable">UPPERCASE
            LETTERS</em> with appropriate values.
          </p><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-service-wrapper-type"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                Optional—only use if the init script starts a daemon.
              </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-service-wrapper-target"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
                <code class="literal">multi-user.target</code> also starts the init
                script when booting into <code class="literal">graphical.target</code>.
                If it should only be started when booting into the display
                manager, use <code class="literal">graphical.target</code>.
              </p></td></tr></table></div></li><li class="step"><p>
            Start the daemon with <code class="command">systemctl start
            <em class="replaceable">APPLICATION</em></code>.
          </p></li></ol></div></div></section></section><section class="sect1" id="sec-boot-runlevel-edit" data-id-title="Managing services with YaST"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">19.4 </span><span class="title-name">Managing services with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-boot-runlevel-edit">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Basic service management can also be done with the YaST Services Manager
      module. It supports starting, stopping, enabling and disabling services.
      It also lets you show a service's status and change the default target.
      Start the YaST module with <span class="guimenu">YaST</span> › <span class="guimenu">System</span> › <span class="guimenu">Services Manager</span>.
    </p><div class="figure" id="fig-yast2-runlevel"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_runlevel.png"><img src="images/yast2_runlevel.png" width="75%" alt="Services Manager" title="Services Manager"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 19.1: </span><span class="title-name">Services Manager </span></span><a title="Permalink" class="permalink" href="#fig-yast2-runlevel">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.5.9.4.1"><span class="term">Changing the <span class="guimenu">Default system target</span></span></dt><dd><p>
            To change the target the system boots into, choose a target from
            the <span class="guimenu">Default System Target</span> drop-down box. The
            most often used targets are <span class="guimenu">Graphical Interface</span>
            (starting a graphical login screen) and
            <span class="guimenu">Multi-User</span> (starting the system in command line
            mode).
          </p></dd><dt id="id-1.3.4.5.9.4.2"><span class="term">Starting or stopping a service</span></dt><dd><p>
            Select a service from the table. The <span class="guimenu">State</span>
            column shows whether it is currently running
            (<span class="guimenu">Active</span>) or not (<span class="guimenu">Inactive</span>).
            Toggle its status by choosing <span class="guimenu">Start</span> or
            <span class="guimenu">Stop</span>.
          </p><p>
            Starting or stopping a service changes its status for the currently
            running session. To change its status throughout a reboot, you need
            to enable or disable it.
          </p></dd><dt id="id-1.3.4.5.9.4.3"><span class="term">Defining service start-up behavior</span></dt><dd><p>
            Services can either be started automatically at boot time or
            manually. Select a service from the table. The
            <span class="guimenu">Start</span> column shows whether it is currently
            started <span class="guimenu">Manually</span> or <span class="guimenu">On Boot</span>.
            Toggle its status by choosing <span class="guimenu">Start Mode</span>.
          </p><p>
            To change a service status in the current session, you need to
            start or stop it as described above.
          </p></dd><dt id="id-1.3.4.5.9.4.4"><span class="term">View a status messages</span></dt><dd><p>
            To view the status message of a service, select it from the list
            and choose <span class="guimenu">Show Details</span>. The output is identical
            to the one generated by the command <code class="command">systemctl</code>
            <code class="option">-l</code> status <em class="replaceable">MY_SERVICE</em>.
          </p></dd></dl></div></section><section class="sect1" id="sec-boot-systemd-custom" data-id-title="Customizing systemd"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">19.5 </span><span class="title-name">Customizing <code class="systemitem">systemd</code></span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-custom">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The following sections describe how to customize <code class="systemitem">systemd</code> unit files.
    </p><section class="sect2" id="systemd-unit-file-placement" data-id-title="Where are unit files stored?"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.5.1 </span><span class="title-name">Where are unit files stored?</span></span> <a title="Permalink" class="permalink" href="#systemd-unit-file-placement">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        <code class="systemitem">systemd</code> unit files shipped by SUSE are stored in
        <code class="filename">/usr/lib/systemd/</code>. Customized unit files and unit file
        <span class="emphasis"><em>drop-ins</em></span> are stored in
        <code class="filename">/etc/systemd/</code>.
      </p><div id="id-1.3.4.5.10.3.3" data-id-title="Preventing your customization from being overwritten" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Preventing your customization from being overwritten</div><p>
          When customizing <code class="systemitem">systemd</code>, always use the directory
          <code class="filename">/etc/systemd/</code> instead of <code class="filename">/usr/lib/systemd/</code>.
          Otherwise your changes will be overwritten by the next update of <code class="systemitem">systemd</code>.
        </p></div></section><section class="sect2" id="sec-boot-systemd-custom-service" data-id-title="Override with drop-in files"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.5.2 </span><span class="title-name">Override with drop-in files</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-custom-service">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Drop-in files (or <span class="emphasis"><em>drop-ins</em></span>) are partial unit files that override only
        specific settings of the unit file. Drop-ins have higher precedence over main configuration
        files. The command
        <code class="command">systemctl edit <em class="replaceable">SERVICE</em></code>
        starts the default text editor and creates a directory with an empty
        <code class="filename">override.conf</code> file in
        <code class="filename">/etc/systemd/system/<em class="replaceable">NAME</em>.service.d/</code>. The
        command also ensures that the running <code class="systemitem">systemd</code> process is notified about the changes.
      </p><p>
        For example, to change the amount of time that the system waits for MariaDB to start, run
        <code class="command">sudo systemctl edit mariadb.service</code> and edit the opened file to include
        the modified lines only:
      </p><div class="verbatim-wrap"><pre class="screen"># Configures the time to wait for start-up/stop
TimeoutSec=300</pre></div><p>
        Adjust the <code class="literal">TimeoutSec</code> value and save the changes. To enable the changes,
        run <code class="command">sudo systemctl daemon-reload</code>.
      </p><p>
        For further information, refer to the man pages that can be evoked with
        the <code class="command">man 1 systemctl</code> command.
      </p><div id="id-1.3.4.5.10.4.7" data-id-title="Creating a copy of a full unit file" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Creating a copy of a full unit file</div><p>
          If you use the <code class="option">--full</code> option in the <code class="command">systemctl edit --full
          <em class="replaceable">SERVICE</em></code> command, a copy of the original unit file is
          created where you can modify specific options. We do not recommend such customization
          because when the unit file is updated by SUSE, its changes are overridden by the
          customized copy in the <code class="filename">/etc/systemd/system/</code> directory. Moreover, if
          SUSE provides updates to distribution drop-ins, they override the copy of the unit file
          created with <code class="option">--full</code>. To prevent this confusion and always have your
          customization valid, use drop-ins.
        </p></div></section><section class="sect2" id="sec-boot-systemd-custom-drop-in" data-id-title="Creating drop-in files manually"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.5.3 </span><span class="title-name">Creating drop-in files manually</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-custom-drop-in">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Apart from using the <code class="command">systemctl edit</code> command, you can create drop-ins
        manually to have more control over their priority. Such drop-ins let you extend both unit
        and daemon configuration files without having to edit or override the files themselves.
        They are stored in the following directories:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.5.10.5.3.1"><span class="term"><code class="filename">/etc/systemd/*.conf.d/</code>, <code class="filename">/etc/systemd/system/*.service.d/</code></span></dt><dd><p>
              Drop-ins added and customized by system administrators.
            </p></dd><dt id="id-1.3.4.5.10.5.3.2"><span class="term"><code class="filename">/usr/lib/systemd/*.conf.d/</code>, <code class="filename">/usr/lib/systemd/system/*.service.d/</code></span></dt><dd><p>
              Drop-ins installed by customization packages to override upstream
              settings. For example, SUSE ships
              <span class="package">systemd-default-settings</span>.
            </p></dd></dl></div><div id="id-1.3.4.5.10.5.4" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
          See the man page <code class="command">man 5 systemd.unit</code> for the full
          list of unit search paths.
        </p></div><p>
        For example, to disable the rate limiting that is enforced by the
        default setting of
        <code class="systemitem">systemd-journald</code>, follow these steps:
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Create a directory called
            <code class="filename">/etc/systemd/journald.conf.d</code>.
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> mkdir /etc/systemd/journald.conf.d</pre></div><div id="id-1.3.4.5.10.5.6.1.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
              The directory name must follow the service name that you want to
              patch with the drop-in file.
            </p></div></li><li class="step"><p>
            In that directory, create a file
            <code class="filename">/etc/systemd/journald.conf.d/60-rate-limit.conf</code>
            with the option that you want to override, for example:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">cat /etc/systemd/journald.conf.d/60-rate-limit.conf</code>
# Disable rate limiting
RateLimitIntervalSec=0</pre></div></li><li class="step"><p>
            Save your changes and restart the service of the corresponding
            <code class="systemitem">systemd</code> daemon.
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl restart systemd-journald</pre></div></li></ol></div></div><div id="id-1.3.4.5.10.5.7" data-id-title="Avoiding name conflicts" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Avoiding name conflicts</div><p>
          To avoid name conflicts between your drop-ins and files shipped by
          SUSE, it is recommended to prefix all drop-ins with a two-digit
          number and a dash, for example,
          <code class="filename">80-override.conf</code>.
        </p><p>
          The following ranges are reserved:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
              <code class="literal">0-19</code> is reserved for <code class="systemitem">systemd</code> upstream.
            </p></li><li class="listitem"><p>
              <code class="literal">20-29</code> is reserved for <code class="systemitem">systemd</code> shipped by
              SUSE.
            </p></li><li class="listitem"><p>
              <code class="literal">30-39</code> is reserved for SUSE packages other
              than <code class="systemitem">systemd</code>.
            </p></li><li class="listitem"><p>
              <code class="literal">40-49</code> is reserved for third-party packages.
            </p></li><li class="listitem"><p>
              <code class="literal">50</code> is reserved for unit drop-in files created
              with <code class="command">systemctl set-property</code>.
            </p></li></ul></div><p>
          Use a two-digit number above this range to ensure that none of the
          drop-ins shipped by SUSE can override your own drop-ins.
        </p></div><div id="id-1.3.4.5.10.5.8" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
          You can use <code class="command">systemctl cat $UNIT</code> to list and verify
          which files are taken into account in the units configuration.
        </p></div><div id="id-1.3.4.5.10.5.9" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
          Because the configuration of <code class="systemitem">systemd</code> components can be scattered
          across different places on the file system, it might be hard to get a
          global overview. To inspect the configuration of a <code class="systemitem">systemd</code>
          component, use the following commands:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
              <code class="command">systemctl cat
              <em class="replaceable">UNIT_PATTERN</em></code> prints
              configuration files related to one or more <code class="systemitem">systemd</code> units, for
              example:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>systemctl cat atd.service</pre></div></li><li class="listitem"><p>
              <code class="command">systemd-analyze cat-config
              <em class="replaceable">DAEMON_NAME_OR_PATH</em></code> copies
              the contents of a configuration file and drop-ins for a <code class="systemitem">systemd</code>
              daemon, for example:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>systemd-analyze cat-config systemd/journald.conf</pre></div></li></ul></div></div></section><section class="sect2" id="systemd-xinetd-conversion" data-id-title="Converting xinetd services to systemd"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.5.4 </span><span class="title-name">Converting <code class="systemitem">xinetd</code> services to <code class="systemitem">systemd</code></span></span> <a title="Permalink" class="permalink" href="#systemd-xinetd-conversion">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Since the release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, the
        <code class="systemitem">xinetd</code> infrastructure has been removed. This
        section outlines how to convert existing custom
        <code class="systemitem">xinetd</code> service files to <code class="systemitem">systemd</code> sockets.
      </p><p>
        For each <code class="systemitem">xinetd</code> service file, you need at
        least two <code class="systemitem">systemd</code> unit files: the socket file
        (<code class="filename">*.socket</code>) and an associated service file
        (<code class="filename">*.service</code>). The socket file tells <code class="systemitem">systemd</code> which
        socket to create, and the service file tells <code class="systemitem">systemd</code> which executable
        to start.
      </p><p>
        Consider the following example <code class="systemitem">xinetd</code> service
        file:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cat /etc/xinetd.d/example
service example
{
  socket_type = stream
  protocol = tcp
  port = 10085
  wait = no
  user = user
  group = users
  groups = yes
  server = /usr/libexec/example/exampled
  server_args = -auth=bsdtcp exampledump
  disable = no
}</pre></div><p>
        To convert it to <code class="systemitem">systemd</code>, you need the following two matching files:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cat /usr/lib/systemd/system/example.socket
[Socket]
ListenStream=0.0.0.0:10085
Accept=false

[Install]
WantedBy=sockets.target</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cat /usr/lib/systemd/system/example.service
[Unit]
Description=example

[Service]
ExecStart=/usr/libexec/example/exampled -auth=bsdtcp exampledump
User=user
Group=users
StandardInput=socket</pre></div><p>
        For a complete list of the <code class="systemitem">systemd</code> <span class="quote">“<span class="quote">socket</span>”</span> and
        <span class="quote">“<span class="quote">service</span>”</span> file options, refer to the systemd.socket and
        systemd.service manual pages (<code class="command">man 5 systemd.socket</code>,
        <code class="command">man 5 systemd.service</code>).
      </p></section><section class="sect2" id="sec-boot-systemd-custom-targets" data-id-title="Creating custom targets"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.5.5 </span><span class="title-name">Creating custom targets</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-custom-targets">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        On System V init SUSE systems, runlevel 4 is unused to allow
        administrators to create their own runlevel configuration. <code class="systemitem">systemd</code>
        allows you to create any number of custom targets. It is suggested to
        start by adapting an existing target such as
        <code class="systemitem">graphical.target</code>.
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Copy the configuration file
            <code class="filename">/usr/lib/systemd/system/graphical.target</code> to
            <code class="filename">/etc/systemd/system/<em class="replaceable">MY_TARGET</em>.target</code>
            and adjust it according to your needs.
          </p></li><li class="step"><p>
            The configuration file copied in the previous step already covers
            the required (<span class="quote">“<span class="quote">hard</span>”</span>) dependencies for the target. To
            also cover the wanted (<span class="quote">“<span class="quote">soft</span>”</span>) dependencies, create a
            directory
            <code class="filename">/etc/systemd/system/<em class="replaceable">MY_TARGET</em>.target.wants</code>.
          </p></li><li class="step"><p>
            For each wanted service, create a symbolic link from
            <code class="filename">/usr/lib/systemd/system</code> into
            <code class="filename">/etc/systemd/system/<em class="replaceable">MY_TARGET</em>.target.wants</code>.
          </p></li><li class="step"><p>
            When you have finished setting up the target, reload the <code class="systemitem">systemd</code>
            configuration to make the new target available:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl daemon-reload</pre></div></li></ol></div></div></section></section><section class="sect1" id="sec-boot-systemd-advanced" data-id-title="Advanced usage"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">19.6 </span><span class="title-name">Advanced usage</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-advanced">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The following sections cover advanced topics for system administrators.
      For even more advanced <code class="systemitem">systemd</code> documentation, refer to Lennart
      Pöttering's series about <code class="systemitem">systemd</code> for administrators at
      <a class="link" href="https://0pointer.de/blog/projects/" target="_blank">https://0pointer.de/blog/projects/</a>.
    </p><section class="sect2" id="sec-boot-systemd-advanced-tmp" data-id-title="Cleaning temporary directories"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.6.1 </span><span class="title-name">Cleaning temporary directories</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-advanced-tmp">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        <code class="systemitem">systemd</code> supports cleaning temporary directories regularly. The
        configuration from the previous system version is automatically
        migrated and active. <code class="literal">tmpfiles.d</code>—which is
        responsible for managing temporary files—reads its configuration
        from <code class="filename">/etc/tmpfiles.d/*.conf</code>,
        <code class="filename">/run/tmpfiles.d/*.conf</code>, and
        <code class="filename">/usr/lib/tmpfiles.d/*.conf</code> files. Configuration
        placed in <code class="filename">/etc/tmpfiles.d/*.conf</code> overrides related
        configurations from the other two directories
        (<code class="filename">/usr/lib/tmpfiles.d/*.conf</code> is where packages
        store their configuration files).
      </p><p>
        The configuration format is one line per path containing action and
        path, and optionally mode, ownership, age and argument fields,
        depending on the action. The following example unlinks the X11 lock
        files:
      </p><div class="verbatim-wrap"><pre class="screen">Type Path               Mode UID  GID  Age Argument
r    /tmp/.X[0-9]*-lock</pre></div><p>
        To get the status the tmpfile timer:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl status systemd-tmpfiles-clean.timer
systemd-tmpfiles-clean.timer - Daily Cleanup of Temporary Directories
 Loaded: loaded (/usr/lib/systemd/system/systemd-tmpfiles-clean.timer; static)
 Active: active (waiting) since Tue 2018-04-09 15:30:36 CEST; 1 weeks 6 days ago
   Docs: man:tmpfiles.d(5)
         man:systemd-tmpfiles(8)

Apr 09 15:30:36 jupiter systemd[1]: Starting Daily Cleanup of Temporary Directories.
Apr 09 15:30:36 jupiter systemd[1]: Started Daily Cleanup of Temporary Directories.</pre></div><p>
        For more information on temporary files handling, see <code class="command">man 5
        tmpfiles.d</code>.
      </p></section><section class="sect2" id="sec-boot-systemd-advanced-logging" data-id-title="System log"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.6.2 </span><span class="title-name">System log</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-advanced-logging">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        <a class="xref" href="#sec-boot-systemd-basics-services-debugging" title="19.6.9. Debugging services">Section 19.6.9, “Debugging services”</a> explains
        how to view log messages for a given service. However, displaying log
        messages is not restricted to service logs. You can also access and
        query the complete log messages written by <code class="systemitem">systemd</code>—the
        so-called <span class="quote">“<span class="quote">Journal</span>”</span>. Use the command
        <code class="command">journalctl</code> to display the complete log messages
        starting with the oldest entries. Refer to <code class="command">man 1
        journalctl</code> for options such as applying filters or changing
        the output format.
      </p></section><section class="sect2" id="sec-boot-systemd-advanced-snapshots" data-id-title="Snapshots"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.6.3 </span><span class="title-name">Snapshots</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-advanced-snapshots">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        You can save the current state of <code class="systemitem">systemd</code> to a named snapshot and
        later revert to it with the <code class="command">isolate</code> subcommand. This
        is useful when testing services or custom targets, because it allows
        you to return to a defined state at any time. A snapshot is only
        available in the current session and will automatically be deleted on
        reboot. A snapshot name must end in <code class="filename">.snapshot</code>.
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.5.11.5.3.1"><span class="term">Create a snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl snapshot <em class="replaceable">MY_SNAPSHOT</em>.snapshot</pre></div></dd><dt id="id-1.3.4.5.11.5.3.2"><span class="term">Delete a snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl delete <em class="replaceable">MY_SNAPSHOT</em>.snapshot</pre></div></dd><dt id="id-1.3.4.5.11.5.3.3"><span class="term">View a snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl show <em class="replaceable">MY_SNAPSHOT</em>.snapshot</pre></div></dd><dt id="id-1.3.4.5.11.5.3.4"><span class="term">Activate a snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl isolate <em class="replaceable">MY_SNAPSHOT</em>.snapshot</pre></div></dd></dl></div></section><section class="sect2" id="sec-boot-systemd-advanced-kernel-modules" data-id-title="Loading kernel modules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.6.4 </span><span class="title-name">Loading kernel modules</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-advanced-kernel-modules">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        With <code class="systemitem">systemd</code>, kernel modules can automatically be loaded at boot time
        via a configuration file in <code class="filename">/etc/modules-load.d</code>.
        The file should be named <em class="replaceable">MODULE</em>.conf and
        have the following content:
      </p><div class="verbatim-wrap"><pre class="screen"># load module <em class="replaceable">MODULE</em> at boot time
<em class="replaceable">MODULE</em></pre></div><p>
        In case a package installs a configuration file for loading a kernel
        module, the file gets installed to
        <code class="filename">/usr/lib/modules-load.d</code>. If two configuration
        files with the same name exist, the one in
        <code class="filename">/etc/modules-load.d</code> tales precedence.
      </p><p>
        For more information, see the
        <code class="systemitem">modules-load.d(5)</code> man page.
      </p></section><section class="sect2" id="sec-boot-systemd-advanced-before-local" data-id-title="Performing actions before loading a service"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.6.5 </span><span class="title-name">Performing actions before loading a service</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-advanced-before-local">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        With System V init actions that need to be performed before loading a
        service, needed to be specified in <code class="filename">/etc/init.d/before.local
        </code>. This procedure is no longer supported with <code class="systemitem">systemd</code>. If
        you need to do actions before starting services, do the following:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.5.11.7.3.1"><span class="term">Loading kernel modules</span></dt><dd><p>
              Create a drop-in file in <code class="filename">/etc/modules-load.d</code>
              directory (see <code class="command">man modules-load.d</code> for the
              syntax)
            </p></dd><dt id="id-1.3.4.5.11.7.3.2"><span class="term">Creating Files or Directories, Cleaning-up Directories, Changing Ownership</span></dt><dd><p>
              Create a drop-in file in <code class="filename">/etc/tmpfiles.d</code>
              (see <code class="command">man tmpfiles.d</code> for the syntax)
            </p></dd><dt id="id-1.3.4.5.11.7.3.3"><span class="term">Other tasks</span></dt><dd><p>
              Create a system service file, for example,
              <code class="filename">/etc/systemd/system/before.service</code>, from the
              following template:
            </p><div class="verbatim-wrap"><pre class="screen">[Unit]
Before=<em class="replaceable">NAME OF THE SERVICE YOU WANT THIS SERVICE TO BE STARTED BEFORE</em>
[Service]
Type=oneshot
RemainAfterExit=true
ExecStart=<em class="replaceable">YOUR_COMMAND</em>
# beware, executable is run directly, not through a shell, check the man pages
# systemd.service and systemd.unit for full syntax
[Install]
# target in which to start the service
WantedBy=multi-user.target
#WantedBy=graphical.target</pre></div><p>
              When the service file is created, you should run the following
              commands (as <code class="systemitem">root</code>):
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl daemon-reload
<code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl enable before</pre></div><p>
              Every time you modify the service file, you need to run:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl daemon-reload</pre></div></dd></dl></div></section><section class="sect2" id="sec-boot-systemd-advanced-cgroups" data-id-title="Kernel control groups (cgroups)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.6.6 </span><span class="title-name">Kernel control groups (cgroups)</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-advanced-cgroups">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        On a traditional System V init system, it is not always possible to
        match a process to the service that spawned it. Certain services, such as
        Apache, spawn a lot of third-party processes (for example, CGI or Java
        processes), which themselves spawn more processes. This makes a clear
        assignment difficult or even impossible. Additionally, a service may
        not finish correctly, leaving certain children alive.
      </p><p>
        <code class="systemitem">systemd</code> solves this problem by placing each service into its own
        cgroup. cgroups are a kernel feature that allows aggregating processes
        and all their children into hierarchical organized groups. <code class="systemitem">systemd</code>
        names each cgroup after its service. Since a non-privileged process is
        not allowed to <span class="quote">“<span class="quote">leave</span>”</span> its cgroup, this provides an
        effective way to label all processes spawned by a service with the name
        of the service.
      </p><p>
        To list all processes belonging to a service, use the command
        <code class="command">systemd-cgls</code>, for example:
      </p><div class="example" id="id-1.3.4.5.11.8.5" data-id-title="List all processes belonging to a service"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 19.3: </span><span class="title-name">List all processes belonging to a service </span></span><a title="Permalink" class="permalink" href="#id-1.3.4.5.11.8.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemd-cgls --no-pager
├─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 20
├─user.slice
│ └─user-1000.slice
│   ├─session-102.scope
│   │ ├─12426 gdm-session-worker [pam/gdm-password]
│   │ ├─15831 gdm-session-worker [pam/gdm-password]
│   │ ├─15839 gdm-session-worker [pam/gdm-password]
│   │ ├─15858 /usr/lib/gnome-terminal-server

[...]

└─system.slice
  ├─systemd-hostnamed.service
  │ └─17616 /usr/lib/systemd/systemd-hostnamed
  ├─cron.service
  │ └─1689 /usr/sbin/cron -n
  ├─postfix.service
  │ ├─ 1676 /usr/lib/postfix/master -w
  │ ├─ 1679 qmgr -l -t fifo -u
  │ └─15590 pickup -l -t fifo -u
  ├─sshd.service
  │ └─1436 /usr/sbin/sshd -D

[...]</pre></div></div></div><p>
        See <span class="intraxref">Book “System Analysis and Tuning Guide”, Chapter 10 “Kernel control groups”</span> for more information about
        cgroups.
      </p></section><section class="sect2" id="sec-boot-systemd-advanced-kill" data-id-title="Terminating services (sending signals)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.6.7 </span><span class="title-name">Terminating services (sending signals)</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-advanced-kill">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        As explained in <a class="xref" href="#sec-boot-systemd-advanced-cgroups" title="19.6.6. Kernel control groups (cgroups)">Section 19.6.6, “Kernel control groups (cgroups)”</a>, it
        is not always possible to assign a process to its parent service
        process in a System V init system. This makes it difficult to stop a
        service and its children. Child processes that have not been terminated
        remain as zombie processes.
      </p><p>
        <code class="systemitem">systemd</code>'s concept of confining each service into a cgroup makes it
        possible to identify all child processes of a service and therefore
        allows you to send a signal to each of these processes. Use
        <code class="command">systemctl kill</code> to send signals to services. For a
        list of available signals refer to <code class="command">man 7 signals</code>.
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.5.11.9.4.1"><span class="term">Sending <code class="systemitem">SIGTERM</code> to a service</span></dt><dd><p>
              <code class="systemitem">SIGTERM</code> is the default signal that is
              sent.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl kill <em class="replaceable">MY_SERVICE</em></pre></div></dd><dt id="id-1.3.4.5.11.9.4.2"><span class="term">Sending <em class="replaceable">SIGNAL</em> to a service</span></dt><dd><p>
              Use the <code class="option">-s</code> option to specify the signal that
              should be sent.
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl kill -s <em class="replaceable">SIGNAL</em> <em class="replaceable">MY_SERVICE</em></pre></div></dd><dt id="id-1.3.4.5.11.9.4.3"><span class="term">Selecting processes</span></dt><dd><p>
              By default the <code class="command">kill</code> command sends the signal
              to <code class="option">all</code> processes of the specified cgroup. You
              can restrict it to the <code class="option">control</code> or the
              <code class="option">main</code> process. The latter is, for example, useful
              to force a service to reload its configuration by sending
              <code class="systemitem">SIGHUP</code>:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl kill -s SIGHUP --kill-who=main <em class="replaceable">MY_SERVICE</em></pre></div></dd></dl></div></section><section class="sect2" id="sec-boot-systemd-dbus" data-id-title="Important notes on the D-Bus service"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.6.8 </span><span class="title-name">Important notes on the D-Bus service</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-dbus">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The D-Bus service is the message bus for communication between
        <code class="systemitem">systemd</code> clients and the systemd manager that is running as pid 1.
        Even though <code class="systemitem">dbus</code> is a
        stand-alone daemon, it is an integral part of the init infrastructure.
      </p><p>
        Stopping <code class="systemitem">dbus</code> or restarting it
        in the running system is similar to an attempt to stop or restart PID
        1. It breaks the <code class="systemitem">systemd</code> client/server communication and makes most
        <code class="systemitem">systemd</code> functions unusable.
      </p><p>
        Therefore, terminating or restarting
        <code class="systemitem">dbus</code> is neither
        recommended nor supported.
      </p><p>
        Updating the <code class="systemitem">dbus</code> or
        <code class="systemitem">dbus</code>-related packages requires a reboot. When
        in doubt whether a reboot is necessary, run the <code class="command">sudo zypper ps
        -s</code>. If <code class="literal">dbus</code> appears among the listed
        services, you need to reboot the system.
      </p><p>
        Keep in mind that <code class="systemitem">dbus</code> is updated even when
        automatic updates are configured to skip the packages that require
        reboot.
      </p></section><section class="sect2" id="sec-boot-systemd-basics-services-debugging" data-id-title="Debugging services"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.6.9 </span><span class="title-name">Debugging services</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-basics-services-debugging">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        By default, <code class="systemitem">systemd</code> is not overly verbose. If a service was started
        successfully, no output is produced. In case of a failure, a short
        error message is displayed. However, <code class="command">systemctl
        status</code> provides a means to debug the start-up and operation of a
        service.
      </p><p>
        <code class="systemitem">systemd</code> comes with its own logging mechanism (<span class="quote">“<span class="quote">The
        Journal</span>”</span>) that logs system messages. This allows you to display
        the service messages together with status messages. The
        <code class="command">status</code> command works similar to
        <code class="command">tail</code> and can also display the log messages in
        different formats, making it a powerful debugging tool.
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.5.11.11.4.1"><span class="term">Show service start-up failure</span></dt><dd><p>
              Whenever a service fails to start, use <code class="command">systemctl status
              <em class="replaceable">MY_SERVICE</em></code> to get a detailed
              error message:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemctl start apache2
Job failed. See system journal and 'systemctl status' for details.
<code class="prompt root"># </code>systemctl status apache2
   Loaded: loaded (/usr/lib/systemd/system/apache2.service; disabled)
   Active: failed (Result: exit-code) since Mon, 04 Apr 2018 16:52:26 +0200; 29s ago
   Process: 3088 ExecStart=/usr/sbin/start_apache2 -D SYSTEMD -k start (code=exited, status=1/FAILURE)
   CGroup: name=systemd:/system/apache2.service

Apr 04 16:52:26 g144 start_apache2[3088]: httpd2-prefork: Syntax error on line
205 of /etc/apache2/httpd.conf: Syntax error on li...alHost&gt;</pre></div></dd><dt id="id-1.3.4.5.11.11.4.2"><span class="term">Show last <em class="replaceable">N</em> service messages</span></dt><dd><p>
              The default behavior of the <code class="command">status</code> subcommand
              is to display the last ten messages a service issued. To change
              the number of messages to show, use the
              <code class="option">--lines=<em class="replaceable">N</em></code> parameter:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl status chronyd
<code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl --lines=20 status chronyd</pre></div></dd><dt id="id-1.3.4.5.11.11.4.3"><span class="term">Show service messages in append mode</span></dt><dd><p>
              To display a <span class="quote">“<span class="quote">live stream</span>”</span> of service messages, use
              the <code class="option">--follow</code> option, which works like
              <code class="command">tail</code> <code class="option">-f</code>:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl --follow status chronyd</pre></div></dd><dt id="id-1.3.4.5.11.11.4.4"><span class="term">Messages output format</span></dt><dd><p>
              The <code class="option">--output=<em class="replaceable">MODE</em></code>
              parameter allows you to change the output format of service
              messages. The most important modes available are:
            </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.5.11.11.4.4.2.2.1"><span class="term"><code class="option">short</code></span></dt><dd><p>
                    The default format. Shows the log messages with a human
                    readable time stamp.
                  </p></dd><dt id="id-1.3.4.5.11.11.4.4.2.2.2"><span class="term"><code class="option">verbose</code></span></dt><dd><p>
                    Full output with all fields.
                  </p></dd><dt id="id-1.3.4.5.11.11.4.4.2.2.3"><span class="term"><code class="option">cat</code></span></dt><dd><p>
                    Terse output without time stamps.
                  </p></dd></dl></div></dd></dl></div></section></section><section class="sect1" id="sec-boot-systemd-timer-units" data-id-title="systemd timer units"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">19.7 </span><span class="title-name"><code class="systemitem">systemd</code> timer units</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-timer-units">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Similar to cron, <code class="systemitem">systemd</code> timer units provide a mechanism for scheduling
      jobs on Linux. Although <code class="systemitem">systemd</code> timer units serve the same purpose as
      cron, they offer several advantages.
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          Jobs scheduled using a timer unit can depend on other <code class="systemitem">systemd</code>
          services.
        </p></li><li class="listitem"><p>
          Timer units are treated as regular <code class="systemitem">systemd</code> services, so can be
          managed with <code class="command">systemctl</code>.
        </p></li><li class="listitem"><p>
          Timers can be realtime and monotonic.
        </p></li><li class="listitem"><p>
          Time units are logged to the <code class="systemitem">systemd</code> journal, which makes it easier
          to monitor and troubleshoot them.
        </p></li></ul></div><p>
      <code class="systemitem">systemd</code> timer units are identified by the <code class="literal">.timer</code>
      file name extension.
    </p><section class="sect2" id="sec-boot-systemd-timer-types" data-id-title="systemd timer types"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.7.1 </span><span class="title-name"><code class="systemitem">systemd</code> timer types</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-timer-types">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Timer units can use monotonic and realtime timers.
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
            Similar to cronjobs, realtime timers are triggered on calendar
            events. Realtime timers are defined using the option
            <code class="option">OnCalendar</code>.
          </p></li><li class="listitem"><p>
            Monotonic timers are triggered at a specified time elapsed from a
            certain starting point. The latter could be a system boot or system
            unit activation event. There are several options for defining
            monotonic timers including <code class="option">OnBootSec</code>,
            <code class="option">OnUnitActiveSec</code>, and <code class="option">OnTypeSec</code>.
            Monotonic timers are not persistent, and they are reset after each
            reboot.
          </p></li></ul></div></section><section class="sect2" id="sec-boot-systemd-timer-service-units" data-id-title="systemd timers and service units"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.7.2 </span><span class="title-name"><code class="systemitem">systemd</code> timers and service units</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-timer-service-units">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Every timer unit must have a corresponding <code class="systemitem">systemd</code> unit file it
        controls. In other words, a <code class="filename">.timer</code> file activates
        and manages the corresponding <code class="filename">.service</code> file. When
        used with a timer, the <code class="filename">.service</code> file does not
        require an <code class="literal">[Install]</code> section, as the service is
        managed by the timer.
      </p></section><section class="sect2" id="sec-boot-systemd-timer-example" data-id-title="Practical example"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.7.3 </span><span class="title-name">Practical example</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-timer-example">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        To understand the basics of <code class="systemitem">systemd</code> timer units, we set up a timer
        that triggers the <code class="filename">foo.sh</code> shell script.
      </p><p>
        First step is to create a <code class="systemitem">systemd</code> service unit that controls the
        shell script. To do this, open a new text file for editing and add the
        following service unit definition:
      </p><div class="verbatim-wrap"><pre class="screen">[Unit]
Description="Foo shell script"

[Service]
ExecStart=/usr/local/bin/foo.sh</pre></div><p>
        Save the file under the name <code class="filename">foo.service</code> in the
        directory <code class="filename">/etc/systemd/system/</code>.
      </p><p>
        Next, open a new text file for editing and add the following timer
        definition:
      </p><div class="verbatim-wrap"><pre class="screen">[Unit]
Description="Run foo shell script"

[Timer]
OnBootSec=5min
OnUnitActiveSec=24h
Unit=foo.service

[Install]
WantedBy=multi-user.target</pre></div><p>
        The <code class="literal">[Timer]</code> section in the example above specifies
        what service to trigger (<code class="literal">foo.service</code>) and when to
        trigger it. In this case, the option <code class="option">OnBootSec</code>
        specifies a monotonic timer that triggers the service five minutes
        after the system boot, while the option
        <code class="option">OnUnitActiveSec</code> triggers the service 24 hours after
        the service has been activated (that is, the timer triggers the service
        once a day). Finally, the option <code class="option">WantedBy</code> specifies
        that the timer should start when the system has reached the multiuser
        target.
      </p><p>
        Instead of a monotonic timer, you can specify a real-time one using the
        option <code class="option">OnCalendar</code>. The following realtime timer
        definition triggers the related service unit once a week, starting on
        Monday at 12:00.
      </p><div class="verbatim-wrap"><pre class="screen">[Timer]
OnCalendar=weekly
Persistent=true</pre></div><p>
        The option <code class="option">Persistent=true</code> indicates that the service
        is triggered immediately after the timer activation if the timer missed
        the last start time (for example, because of the system being powered
        off).
      </p><p>
        The option <code class="option">OnCalendar</code> can also be used to define
        specific dates times for triggering a service using the following
        format: <code class="literal">DayOfWeek Year-Month-Day Hour:Minute:Second</code>.
        The example below triggers a service at 5am every day:
      </p><div class="verbatim-wrap"><pre class="screen">OnCalendar=*-*-* 5:00:00</pre></div><p>
        You can use an asterisk to specify any value, and commas to list
        possible values. Use two values separated by .. to indicate a
        contiguous range. The following example triggers a service at 6pm on
        Friday of every month:
      </p><div class="verbatim-wrap"><pre class="screen">OnCalendar=Fri *-*-1..7 18:00:00</pre></div><p>
        To trigger a service at different times, you can specify several
        <code class="option">OnCalendar</code> entries:
      </p><div class="verbatim-wrap"><pre class="screen">OnCalendar=Mon..Fri 10:00
OnCalendar=Sat,Sun 22:00</pre></div><p>
        In the example above, a service is triggered at 10am on week days and
        at 10pm on weekends.
      </p><p>
        When you are done editing the timer unit file, save it under the name
        <code class="filename">foo.timer</code> in the
        <code class="filename">/etc/systemd/system/</code> directory. To check the
        correctness of the created unit files, run the following command:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  systemd-analyze verify /etc/systemd/system/foo.*</pre></div><p>
        If the command returns no output, the files have passed the
        verification successfully.
      </p><p>
        To start the timer, use the command <code class="command">sudo systemctl start
        foo.timer</code>. To enable the timer on boot, run the command
        <code class="command">sudo systemctl enable foo.timer</code>.
      </p></section><section class="sect2" id="sec-boot-systemd-timer-manage" data-id-title="Managing systemd timers"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.7.4 </span><span class="title-name">Managing <code class="systemitem">systemd</code> timers</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-timer-manage">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Since timers are treated as regular <code class="systemitem">systemd</code> units, you can manage
        them using <code class="command">systemctl</code>. You can start a timer with
        <code class="command">systemctl start</code>, enable a timer with
        <code class="command">systemctl enable</code>, and so on. Additionally, you can
        list all active timers using the command <code class="command">systemctl
        list-timers</code>. To list all timers, including inactive ones, run
        the command <code class="command">systemctl list-timers --all</code>.
      </p></section></section><section class="sect1" id="sec-boot-systemd-info" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">19.8 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-boot-systemd-info">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/systemd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      For more information on <code class="systemitem">systemd</code> refer to the following online
      resources:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.5.13.3.1"><span class="term">Homepage</span></dt><dd><p>
            <a class="link" href="https://systemd.io/" target="_blank">https://systemd.io/</a>
          </p></dd><dt id="id-1.3.4.5.13.3.2"><span class="term"><code class="systemitem">systemd</code> for administrators</span></dt><dd><p>
            Lennart Pöttering, one of the <code class="systemitem">systemd</code> authors, has written a
            series of blog entries (13 at the time of writing this chapter).
            Find them at <a class="link" href="https://0pointer.de/blog/projects/" target="_blank">https://0pointer.de/blog/projects/</a>.
          </p></dd></dl></div></section></section></div><div class="part" id="part-system" data-id-title="System"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part III </span><span class="title-name">System </span></span><a title="Permalink" class="permalink" href="#part-system">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_administration.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#cha-64bit"><span class="title-number">20 </span><span class="title-name">32-bit and 64-bit applications in a 64-bit system environment</span></a></span></li><dd class="toc-abstract"><p>
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> is available for <span class="phrase">several</span> 64-bit
  platforms. The developers have not ported all 32-bit applications to 64-bit
  systems. This chapter offers a brief overview of 32-bit support implementation
  on 64-bit <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> platforms.
 </p></dd><li><span class="chapter"><a href="#cha-journalctl"><span class="title-number">21 </span><span class="title-name"><code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal</span></a></span></li><dd class="toc-abstract"><p>
  <code class="systemitem">systemd</code> features its own logging system called
  <span class="emphasis"><em>journal</em></span>. There is no need to run a
  <code class="systemitem">syslog</code>-based service, as all system events are
  written to the journal.
 </p></dd><li><span class="chapter"><a href="#cha-update-alternative"><span class="title-number">22 </span><span class="title-name"><code class="command">update-alternatives</code>: managing multiple versions of commands and files</span></a></span></li><dd class="toc-abstract"><p>
    Often, there are several versions of the same tool installed on a
    system.
    To give administrators a choice and to make it possible to install and
    use different versions side by side, the alternatives system allows
    managing such versions consistently.
   </p></dd><li><span class="chapter"><a href="#cha-network"><span class="title-number">23 </span><span class="title-name">Basic networking</span></a></span></li><dd class="toc-abstract"><p>
    Linux offers the necessary networking tools and features for integration
    into all types of network structures. Network access using a network card
    can be configured with YaST. Manual configuration is also possible. In
    this chapter, only the fundamental mechanisms and the relevant network
    configuration files are covered.
   </p></dd><li><span class="chapter"><a href="#cha-print"><span class="title-number">24 </span><span class="title-name">Printer operation</span></a></span></li><dd class="toc-abstract"><p>SUSE® Linux Enterprise Server supports printing with many types of printers, including remote network printers. Printers can be configured manually or with YaST. For configuration instructions, refer to Chapter 34, Setting up a printer. Both graphical and command line utilities are available for sta…</p></dd><li><span class="chapter"><a href="#cha-gui-desktop"><span class="title-number">25 </span><span class="title-name">Graphical user interface</span></a></span></li><dd class="toc-abstract"><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> includes the X.org server and the GNOME desktop. This chapter describes the
    configuration of the graphical user interface for all users.
   </p></dd><li><span class="chapter"><a href="#cha-fuse"><span class="title-number">26 </span><span class="title-name">Accessing file systems with FUSE</span></a></span></li><dd class="toc-abstract"><p>
    FUSE is the acronym for <span class="emphasis"><em>Filesystem in Userspace</em></span>.
    This means you can configure and mount a file system as an unprivileged
    user. Normally, you need to be
    <code class="systemitem">root</code> for this task. FUSE alone is
    a kernel module. Combined with plug-ins, it allows you to extend FUSE to
    access almost all file systems like remote SSH connections, ISO images, and
    more.
   </p></dd><li><span class="chapter"><a href="#cha-tuning-multikernel"><span class="title-number">27 </span><span class="title-name">Installing multiple kernel versions</span></a></span></li><dd class="toc-abstract"><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> supports the parallel installation of multiple kernel
    versions. When installing a second kernel, a boot entry and an initrd are
    automatically created, so no further manual configuration is needed. When
    rebooting the machine, the newly added kernel is available as an additional
    boot parameter.
   </p><p>
    Using this functionality, you can safely test kernel updates while being
    able to always fall back to the proven former kernel. To do this, do not use
    the update tools (such as the YaST Online Update or the updater applet),
    but instead follow the process described in this chapter.
   </p></dd><li><span class="chapter"><a href="#cha-mod"><span class="title-number">28 </span><span class="title-name">Managing kernel modules</span></a></span></li><dd class="toc-abstract"><p>Although Linux is a monolithic kernel, it can be extended using kernel modules. These are special objects that can be inserted into the kernel and removed on demand. In practical terms, kernel modules make it possible to add and remove drivers and interfaces that are not included in the kernel itsel…</p></dd><li><span class="chapter"><a href="#cha-udev"><span class="title-number">29 </span><span class="title-name">Dynamic kernel device management with <code class="systemitem">udev</code></span></a></span></li><dd class="toc-abstract"><p>The kernel can add or remove almost any device in a running system. Changes in the device state (whether a device is plugged in or removed) need to be propagated to user space. Devices need to be configured when they are plugged in and recognized. Users of a certain device need to be informed about …</p></dd><li><span class="chapter"><a href="#cha-suse"><span class="title-number">30 </span><span class="title-name">Special system features</span></a></span></li><dd class="toc-abstract"><p>
    This chapter starts with information about specific software packages, the
    virtual consoles and the keyboard layout. We talk about software components
    like <code class="systemitem">bash</code>,
    <code class="systemitem">cron</code> and
    <code class="systemitem">logrotate</code>, because they were
    changed or enhanced during the last release cycles. Even if they are small
    or considered of minor importance, users should change their default
    behavior, because these components are often closely coupled with the
    system. The chapter concludes with a section about language and
    country-specific settings (I18N and L10N).
   </p></dd><li><span class="chapter"><a href="#cha-nm"><span class="title-number">31 </span><span class="title-name">Using NetworkManager</span></a></span></li><dd class="toc-abstract"><p>NetworkManager is the ideal solution for laptops and other portable computers. It supports state-of-the-art encryption types and standards for network connections, including connections to 802.1X protected networks. 802.1X is the “IEEE Standard for Local and Metropolitan Area Networks—Port-Based Net…</p></dd></ul></div><section class="chapter" id="cha-64bit" data-id-title="32-bit and 64-bit applications in a 64-bit system environment"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">20 </span><span class="title-name">32-bit and 64-bit applications in a 64-bit system environment</span></span> <a title="Permalink" class="permalink" href="#cha-64bit">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/64bit_issues.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> is available for <span class="phrase">several</span> 64-bit
  platforms. The developers have not ported all 32-bit applications to 64-bit
  systems. This chapter offers a brief overview of 32-bit support implementation
  on 64-bit <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> platforms.
 </p><p>
  <span class="phrase"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> for the 64-bit platforms POWER, IBM Z and
  AMD64/Intel 64</span> is designed so that existing
  32-bit applications run in the 64-bit environment
  <span class="quote">“<span class="quote">out-of-the-box.</span>”</span> <span class="phrase">The corresponding 32-bit
  platforms are POWER for POWER, and x86 for AMD64/Intel 64.</span> This
  support means that you can continue to use your preferred 32-bit applications
  without waiting for a corresponding 64-bit port to become
  available.<span class="phrase"> The current POWER system runs most
  applications in 32-bit mode, but you can run 64-bit applications.</span>
 </p><div id="id-1.3.5.2.5" data-id-title="No support for building 32-bit applications" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: No support for building 32-bit applications</div><p>
   <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> does not support compilation of 32-bit applications. It only offers
   runtime support for 32-bit binaries.
  </p></div><section class="sect1" id="sec-64bit-runt" data-id-title="Runtime support"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.1 </span><span class="title-name">Runtime support</span></span> <a title="Permalink" class="permalink" href="#sec-64bit-runt">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/64bit_issues.xml" title="Edit source document"> </a></div></div></div></div></div><div id="id-1.3.5.2.6.2" data-id-title="Conflicts between application versions" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Conflicts between application versions</div><p>
    If an application is available for both 32-bit and 64-bit environments,
    installing both versions may cause problems. In such cases, decide on one version
    to install to avoid potential runtime errors.
   </p><p>
    An exception to this rule is PAM (pluggable authentication modules).
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> uses PAM in the authentication process as a layer that
    mediates between user and application. Always install both PAM versions
    on 64-bit operating systems that also run 32-bit applications.
   </p></div><p>
   For correct execution, every application requires a range of libraries.
   Because the names are identical for the 32-bit and 64-bit versions of these
   libraries, they must be differentiated from each other in another way.
  </p><p>
   To retain compatibility with 32-bit versions, 64-bit and
   32-bit libraries are stored in the same location. The 32-bit
   version of <code class="filename">libc.so.6</code> is located under
   <code class="filename">/lib/libc.so.6</code> in both 32-bit and 64-bit
   environments.
  </p><p>
   All 64-bit libraries and object files are located in directories called
   <code class="filename">lib64</code>. The 64-bit object files normally
   found under <code class="filename">/lib</code> and
   <code class="filename">/usr/lib</code> are now found under
   <code class="filename">/lib64</code> and <code class="filename">/usr/lib64</code>. This means
   that space is available for 32-bit libraries under <code class="filename">/lib</code>
   and <code class="filename">/usr/lib</code>, so the file name for both versions can
   remain unchanged.
  </p><p>
   If the data content of 32-bit subdirectories under <code class="filename">/lib</code> does not
   depend on word size, they are not moved. This scheme conforms to LSB (Linux Standards Base)
   and FHS (Filesystem Hierarchy Standard).
  </p></section><section class="sect1" id="sec-64bit-kernel" data-id-title="Kernel specifications"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.2 </span><span class="title-name">Kernel specifications</span></span> <a title="Permalink" class="permalink" href="#sec-64bit-kernel">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/64bit_issues.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The 64-bit kernels for AMD64/Intel 64<span class="phrase">, POWER and
   IBM Z</span> offer both a 64-bit and a 32-bit kernel ABI (application
   binary interface). The latter is identical to the ABI for the
   corresponding 32-bit kernel. This means that communication between
   both 32-bit and 64-bit applications with 64-bit kernels are identical.
  </p><p>
   The 32-bit system call emulation for 64-bit kernels does not support
   all the APIs used by system programs. This depends on the platform. For this
   reason, few applications, like <code class="command">lspci</code>, must be
   compiled<span class="phrase"> on non-POWER platforms as 64-bit programs to
   function properly. On IBM Z, not all ioctls are available in the
   32-bit kernel ABI</span>.
  </p><p>
   A 64-bit kernel can only load 64-bit kernel modules. You must
   compile 64-bit modules specifically for 64-bit kernels. It is not possible to use 32-bit kernel modules
   with 64-bit kernels.
  </p><div id="id-1.3.5.2.7.5" data-id-title="Kernel-loadable modules" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Kernel-loadable modules</div><p>
    Certain applications require separate kernel-loadable modules. If you intend
    to use a 32-bit application in a 64-bit system environment, contact
    the provider of the application and SUSE. Make sure that the 64-bit
    version of the kernel-loadable module and the 32-bit compiled version of
    the kernel API are available for this module.
   </p></div></section></section><section class="chapter" id="cha-journalctl" data-id-title="journalctl: query the systemd journal"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">21 </span><span class="title-name"><code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal</span></span> <a title="Permalink" class="permalink" href="#cha-journalctl">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  <code class="systemitem">systemd</code> features its own logging system called
  <span class="emphasis"><em>journal</em></span>. There is no need to run a
  <code class="systemitem">syslog</code>-based service, as all system events are
  written to the journal.
 </p><p>
  The journal itself is a system service managed by <code class="systemitem">systemd</code>. Its full name is
  <code class="literal">systemd-journald.service</code>. It collects and stores logging
  data by maintaining structured indexed journals based on logging information
  received from the kernel, user processes, standard input, and system service errors. The <code class="literal">systemd-journald</code> service is on
  by default:
 </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl status systemd-journald
systemd-journald.service - Journal Service
   Loaded: loaded (/usr/lib/systemd/system/systemd-journald.service; static)
   Active: active (running) since Mon 2014-05-26 08:36:59 EDT; 3 days ago
     Docs: man:systemd-journald.service(8)
           man:journald.conf(5)
 Main PID: 413 (systemd-journal)
   Status: "Processing requests..."
   CGroup: /system.slice/systemd-journald.service
           └─413 /usr/lib/systemd/systemd-journald
[...]</pre></div><section class="sect1" id="sec-journalctl-persistent" data-id-title="Making the journal persistent"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.1 </span><span class="title-name">Making the journal persistent</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-persistent">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The journal stores log data in <code class="filename">/run/log/journal/</code> by
   default. Because the <code class="filename">/run/</code> directory is volatile by
   nature, log data is lost at reboot. To make the log data persistent, create the
   directory <code class="filename">/var/log/journal/</code> and make sure it
   has the correct access modes and ownership, so the systemd-journald service can store its
   data. To switch to persistent logging, execute the following commands:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code>  mkdir /var/log/journal
<code class="prompt user">&gt; </code><code class="command">sudo</code>  systemd-tmpfiles --create --prefix=/var/log/journal
<code class="prompt user">&gt; </code><code class="command">sudo</code>  journalctl --flush</pre></div><p>
   Any log data stored in <code class="filename">/run/log/journal/</code> will be flushed into
   <code class="filename">/var/log/journal/</code>.
  </p></section><section class="sect1" id="sec-journalctl-switches" data-id-title="journalctl: useful switches"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.2 </span><span class="title-name"><code class="command">journalctl</code>: useful switches</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-switches">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   This section introduces several common useful options to enhance the default
   <code class="command">journalctl</code> behavior. All switches are described in the
   <code class="command">journalctl</code> man page, <code class="command">man 1
   journalctl</code>.
  </p><div id="id-1.3.5.3.7.3" data-id-title="Messages related to a specific executable" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Messages related to a specific executable</div><p>
    To show all journal messages related to a specific executable, specify the
    full path to the executable:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl /usr/lib/systemd/systemd</pre></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.3.7.4.1"><span class="term">-f</span></dt><dd><p>
      Shows only the most recent journal messages, and prints new log entries
      as they are added to the journal.
     </p></dd><dt id="id-1.3.5.3.7.4.2"><span class="term"/></dt><dd><p>
      Prints the messages and jumps to the end of the journal, so that the
      latest entries are visible within the pager.
     </p></dd><dt id="id-1.3.5.3.7.4.3"><span class="term">-r</span></dt><dd><p>
      Prints the messages of the journal in reverse order, so that the latest
      entries are listed first.
     </p></dd><dt id="id-1.3.5.3.7.4.4"><span class="term">-k</span></dt><dd><p>
      Shows only kernel messages. This is equivalent to the field match
      <code class="literal">_TRANSPORT=kernel</code> (see
      <a class="xref" href="#sec-journalctl-filter-fields" title="21.3.3. Filtering based on fields">Section 21.3.3, “Filtering based on fields”</a>).
     </p></dd><dt id="id-1.3.5.3.7.4.5"><span class="term">-u</span></dt><dd><p>
      Shows only messages for the specified <code class="systemitem">systemd</code> unit. This is equivalent
      to the field match
      <code class="literal">_SYSTEMD_UNIT=<em class="replaceable">UNIT</em></code> (see
      <a class="xref" href="#sec-journalctl-filter-fields" title="21.3.3. Filtering based on fields">Section 21.3.3, “Filtering based on fields”</a>).
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl -u apache2
[...]
Jun 03 10:07:11 pinkiepie systemd[1]: Starting The Apache Webserver...
Jun 03 10:07:12 pinkiepie systemd[1]: Started The Apache Webserver.</pre></div></dd></dl></div></section><section class="sect1" id="sec-journalctl-filter" data-id-title="Filtering the journal output"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.3 </span><span class="title-name">Filtering the journal output</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-filter">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   When called without switches, <code class="command">journalctl</code> shows the full
   content of the journal, the oldest entries listed first. The output can be
   filtered by specific switches and fields.
  </p><section class="sect2" id="sec-journalctl-filter-boot" data-id-title="Filtering based on a boot number"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">21.3.1 </span><span class="title-name">Filtering based on a boot number</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-filter-boot">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <code class="command">journalctl</code> can filter messages based on a specific
    system boot. To list all available boots, run
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl --list-boots
-1 097ed2cd99124a2391d2cffab1b566f0 Mon 2014-05-26 08:36:56 EDT—Fri 2014-05-30 05:33:44 EDT
 0 156019a44a774a0bb0148a92df4af81b Fri 2014-05-30 05:34:09 EDT—Fri 2014-05-30 06:15:01 EDT</pre></div><p>
    The first column lists the boot offset: <code class="literal">0</code> for the
    current boot, <code class="literal">-1</code> for the previous one,
    <code class="literal">-2</code> for the one before that, etc. The second column
    contains the boot ID followed by the limiting time stamps of the specific
    boot.
   </p><p>
    Show all messages from the current boot:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl -b</pre></div><p>
    If you need to see journal messages from the previous boot, add an offset
    parameter. The following example outputs the previous boot messages:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl -b -1</pre></div><p>
    Another way is to list boot messages based on the boot ID. For this
    purpose, use the _BOOT_ID field:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl _BOOT_ID=156019a44a774a0bb0148a92df4af81b</pre></div></section><section class="sect2" id="sec-journalctl-filter-time" data-id-title="Filtering based on time interval"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">21.3.2 </span><span class="title-name">Filtering based on time interval</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-filter-time">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can filter the output of <code class="command">journalctl</code> by specifying the
    starting and/or ending date. The date specification should be of the format
    <code class="literal">2014-06-30 9:17:16</code>. If the time part is omitted, midnight
    is assumed. If seconds are omitted, <code class="literal">:00</code> is assumed. If
    the date part is omitted, the current day is assumed. Instead of numeric
    expression, you can specify the keywords <code class="literal">yesterday</code>,
    <code class="literal">today</code> or <code class="literal">tomorrow</code>. They refer to
    midnight of the day before the current day, of the current day, or of the
    day after the current day. If you specify <code class="literal">now</code>, it refers
    to the current time. You can also specify relative times prefixed with
    <code class="literal">-</code> or <code class="literal">+</code>, referring to times before or
    after the current time.
   </p><p>
    Show only new messages since now, and update the output continuously:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl --since "now" -f</pre></div><p>
    Show all messages since last midnight till 3:20am:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl --since "today" --until "3:20"</pre></div></section><section class="sect2" id="sec-journalctl-filter-fields" data-id-title="Filtering based on fields"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">21.3.3 </span><span class="title-name">Filtering based on fields</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-filter-fields">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can filter the output of the journal by specific fields. The syntax of
    a field to be matched is <code class="literal">FIELD_NAME=MATCHED_VALUE</code>, such
    as <code class="literal">_SYSTEMD_UNIT=httpd.service</code>. You can specify multiple
    matches in a single query to filter the output messages even more. See
    <code class="command">man 7 systemd.journal-fields</code> for a list of default
    fields.
   </p><p>
    Show messages produced by a specific process ID:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl _PID=1039</pre></div><p>
    Show messages belonging to a specific user ID:
   </p><div class="verbatim-wrap"><pre class="screen"># journalctl _UID=1000</pre></div><p>
    Show messages from the kernel ring buffer (the same as
    <code class="command">dmesg</code> produces):
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl _TRANSPORT=kernel</pre></div><p>
    Show messages from the service's standard or error output:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl _TRANSPORT=stdout</pre></div><p>
    Show messages produced by a specified service only:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl _SYSTEMD_UNIT=avahi-daemon.service</pre></div><p>
    If two different fields are specified, only entries that match both
    expressions at the same time are shown:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=1488</pre></div><p>
    If two matches refer to the same field, all entries matching either
    expression are shown:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl _SYSTEMD_UNIT=avahi-daemon.service _SYSTEMD_UNIT=dbus.service</pre></div><p>
    You can use the <code class="literal">+</code> separator to combine two expressions in
    a logical <code class="literal">OR</code>. The following example shows all messages
    from the Avahi service process with the process ID 1480 together with all
    messages from the D-Bus service:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=1480 + _SYSTEMD_UNIT=dbus.service</pre></div></section></section><section class="sect1" id="sec-journalctl-investigate" data-id-title="Investigating systemd errors"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.4 </span><span class="title-name">Investigating <code class="systemitem">systemd</code> errors</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-investigate">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   This section introduces a simple example to illustrate how to find and fix
   the error reported by <code class="systemitem">systemd</code> during <code class="command">apache2</code> start-up.
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Try to start the apache2 service:
    </p><div class="verbatim-wrap"><pre class="screen"># systemctl start apache2
Job for apache2.service failed. See 'systemctl status apache2' and 'journalctl -xn' for details.</pre></div></li><li class="step"><p>
     Let us see what the service's status says:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl status apache2
apache2.service - The Apache Webserver
   Loaded: loaded (/usr/lib/systemd/system/apache2.service; disabled)
   Active: failed (Result: exit-code) since Tue 2014-06-03 11:08:13 CEST; 7min ago
  Process: 11026 ExecStop=/usr/sbin/start_apache2 -D SYSTEMD -DFOREGROUND \
           -k graceful-stop (code=exited, status=1/FAILURE)</pre></div><p>
     The ID of the process causing the failure is 11026.
    </p></li><li class="step"><p>
     Show the verbose version of messages related to process ID 11026:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> journalctl -o verbose _PID=11026
[...]
MESSAGE=AH00526: Syntax error on line 6 of /etc/apache2/default-server.conf:
[...]
MESSAGE=Invalid command 'DocumenttRoot', perhaps misspelled or defined by a module
[...]</pre></div></li><li class="step"><p>
     Fix the typo inside <code class="filename">/etc/apache2/default-server.conf</code>,
     start the apache2 service, and print its status:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start apache2 &amp;&amp; systemctl status apache2
apache2.service - The Apache Webserver
   Loaded: loaded (/usr/lib/systemd/system/apache2.service; disabled)
   Active: active (running) since Tue 2014-06-03 11:26:24 CEST; 4ms ago
  Process: 11026 ExecStop=/usr/sbin/start_apache2 -D SYSTEMD -DFOREGROUND
           -k graceful-stop (code=exited, status=1/FAILURE)
 Main PID: 11263 (httpd2-prefork)
   Status: "Processing requests..."
   CGroup: /system.slice/apache2.service
           ├─11263 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]
           ├─11280 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]
           ├─11281 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]
           ├─11282 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]
           ├─11283 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]
           └─11285 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]</pre></div></li></ol></div></div></section><section class="sect1" id="sec-journalctl-config" data-id-title="Journald configuration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.5 </span><span class="title-name">Journald configuration</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-config">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The behavior of the systemd-journald service can be adjusted by modifying
   <code class="filename">/etc/systemd/journald.conf</code>. This section introduces
   only basic option settings. For a complete file description, see
   <code class="command">man 5 journald.conf</code>. You need to restart the journal for
   the changes to take effect with
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl restart systemd-journald</pre></div><section class="sect2" id="sec-journalctl-config-systemmaxuse" data-id-title="Changing the journal size limit"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">21.5.1 </span><span class="title-name">Changing the journal size limit</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-config-systemmaxuse">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If the journal log data is saved to a persistent location (see
    <a class="xref" href="#sec-journalctl-persistent" title="21.1. Making the journal persistent">Section 21.1, “Making the journal persistent”</a>), it uses up to 10% of the file
    system the <code class="filename">/var/log/journal</code> resides on. For example,
    if <code class="filename">/var/log/journal</code> is located on a 30 GB
    <code class="filename">/var</code> partition, the journal may use up to 3 GB of
    the disk space. To change this limit, change (and uncomment) the
    <code class="option">SystemMaxUse</code> option:
   </p><div class="verbatim-wrap"><pre class="screen">SystemMaxUse=50M</pre></div></section><section class="sect2" id="sec-journalctl-config-ttypath" data-id-title="Forwarding the journal to /dev/ttyX"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">21.5.2 </span><span class="title-name">Forwarding the journal to <code class="filename">/dev/ttyX</code></span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-config-ttypath">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can forward the journal to a terminal device to inform you about system
    messages on a preferred terminal screen, for example,
    <code class="literal">/dev/tty12</code>. Change the following journald options to
   </p><div class="verbatim-wrap"><pre class="screen">ForwardToConsole=yes
TTYPath=/dev/tty12</pre></div></section><section class="sect2" id="sec-journalctl-config-forwardtosyslog" data-id-title="Forwarding the journal to syslog facility"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">21.5.3 </span><span class="title-name">Forwarding the journal to syslog facility</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-config-forwardtosyslog">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Journald is backward compatible with traditional syslog implementations
    such as <code class="systemitem">rsyslog</code>. Make sure the following is valid:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      rsyslog is installed.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> rpm -q rsyslog
rsyslog-7.4.8-2.16.x86_64</pre></div></li><li class="listitem"><p>
      rsyslog service is enabled.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl is-enabled rsyslog
enabled</pre></div></li><li class="listitem"><p>
      Forwarding to syslog is enabled in
      <code class="filename">/etc/systemd/journald.conf</code>.
     </p><div class="verbatim-wrap"><pre class="screen">ForwardToSyslog=yes</pre></div></li></ul></div></section></section><section class="sect1" id="sec-journalctl-yast" data-id-title="Using YaST to filter the systemd journal"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.6 </span><span class="title-name">Using YaST to filter the <code class="systemitem">systemd</code> journal</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-yast">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For an easy way of filtering the systemd journal (without dealing
   with the journalctl syntax), you can use the YaST journal module. After
   installing it with <code class="command">sudo zypper in yast2-journal</code>, start it
   from YaST by selecting <span class="guimenu">System</span> › <span class="guimenu">Systemd Journal</span>. Alternatively, start it
   from command line by entering <code class="command">sudo yast2 journal</code>.
  </p><div class="figure" id="fig-journalctl-yast"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_journal.png"><img src="images/yast2_journal.png" width="85%" alt="YaST systemd journal" title="YaST systemd journal"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 21.1: </span><span class="title-name">YaST systemd journal </span></span><a title="Permalink" class="permalink" href="#fig-journalctl-yast">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div><p>
   The module displays the log entries in a table. The search box on top allows
   you to search for entries that contain certain characters, similar to using
   <code class="command">grep</code>. To filter the entries by date and time, unit, file
   or priority, click <span class="guimenu">Change filters</span> and set the respective
   options.
  </p></section><section class="sect1" id="sec-journalctl-gnome-logs" data-id-title="Viewing logs in GNOME"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.7 </span><span class="title-name">Viewing logs in GNOME</span></span> <a title="Permalink" class="permalink" href="#sec-journalctl-gnome-logs">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/journalctl.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You can view the journal with <span class="emphasis"><em>GNOME Logs</em></span>.
   Start it from the application menu. To view system log messages, it
   needs to be run as root, for example, with <code class="command">xdg-su
   gnome-logs</code>. This command can be executed when pressing
   <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F2</span>.
  </p></section></section><section class="chapter" id="cha-update-alternative" data-id-title="update-alternatives: managing multiple versions of commands and files"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">22 </span><span class="title-name"><code class="command">update-alternatives</code>: managing multiple versions of commands and files</span></span> <a title="Permalink" class="permalink" href="#cha-update-alternative">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/update-alternatives.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Often, there are several versions of the same tool installed on a
    system.
    To give administrators a choice and to make it possible to install and
    use different versions side by side, the alternatives system allows
    managing such versions consistently.
   </p></div></div></div></div><section class="sect1" id="sec-ua-concept" data-id-title="Overview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22.1 </span><span class="title-name">Overview</span></span> <a title="Permalink" class="permalink" href="#sec-ua-concept">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/update-alternatives.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    On <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, several programs perform the same or similar tasks. For example,
    if Java 1.7 and Java 1.8 are both installed on the system, the alternatives system script
    (<code class="command">update-alternatives</code>) is called from inside the RPM package.
    By default, the alternatives system will refer to version 1.8: higher versions also have a
    higher priority. However, the administrator can change the default and
    can point the generic name to version 1.7.
   </p><p>
    The following terminology is used in this chapter:
   </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Terminology </span></span><a title="Permalink" class="permalink" href="#id-1.3.5.4.3.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/update-alternatives.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.5.4.3.4.2"><span class="term">Administrative directory</span></dt><dd><p>
       The default <code class="filename">/var/lib/rpm/alternatives</code> directory contains information
       about the current state of alternatives.
      </p></dd><dt id="id-1.3.5.4.3.4.3"><span class="term">Alternative</span></dt><dd><p>
       The name of a specific file in the file system, which can be made
       accessible via a generic name using the alternatives system.
      </p></dd><dt id="id-1.3.5.4.3.4.4"><span class="term">Alternatives directory</span></dt><dd><p>
       The default <code class="filename">/etc/alternatives</code>
       directory containing symbolic links.
      </p></dd><dt id="id-1.3.5.4.3.4.5"><span class="term">Generic name</span></dt><dd><p>
       A name (for example, <code class="command">/usr/bin/edit</code>) that refers to
       one file out of several available using the alternatives system.
      </p></dd><dt id="id-1.3.5.4.3.4.6"><span class="term">Link group</span></dt><dd><p>
       A set of related symbolic links that can be updated as a group.
      </p></dd><dt id="id-1.3.5.4.3.4.7"><span class="term">Master link</span></dt><dd><p>
       The link in a link group that determines how the other links in the
       group are configured.
      </p></dd><dt id="id-1.3.5.4.3.4.8"><span class="term">Slave link</span></dt><dd><p>
       A link in a link group controlled by the master link.
      </p></dd><dt id="id-1.3.5.4.3.4.9"><span class="term">Symbolic link (symlink)</span></dt><dd><p>
       A file that is a reference to another file in the same file system.
       The alternatives system uses symbolic links in the alternatives directory to switch
       between versions of a file.
      </p><p>
       Symbolic links in the alternatives directory can be modified by the
       administrator through the <code class="command">update-alternatives</code>
       command.
      </p></dd></dl></div><p>
    The alternatives system provides the <code class="command">update-alternatives</code> command to
    create, remove, maintain and show information about symbolic links.
    While these symbolic links normally point to commands, they can also point
    to JAR archives, man pages, and other files.
    Examples in this chapter use commands and man pages, but they are also
    applicable to other file types.
   </p><p>
    The alternatives system uses the alternatives directory to collect links to possible
    alternatives. When a new package with an alternative is installed, the new
    alternative is added to the system. Whether the new package's alternative is
    selected as the default depends on its priority and on the mode that is set.
    Packages with a higher version also have a higher priority. The alternatives system can
    operate in two modes:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="formalpara-title">Automatic mode. </span>
       In this mode, the alternatives system ensures that the links in the group point to
       the highest priority alternatives appropriate for the group.
      </p></li><li class="listitem"><p><span class="formalpara-title">Manual mode. </span>
       In this mode, the alternatives system does not make any changes to the system
       administrator's settings.
      </p></li></ul></div><p>
    For example, the <code class="command">java</code> command has the following link
    hierarchy in the alternatives system:
   </p><div class="example" id="id-1.3.5.4.3.9" data-id-title="Alternatives System of the java command"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 22.1: </span><span class="title-name">Alternatives System of the <code class="command">java</code> command </span></span><a title="Permalink" class="permalink" href="#id-1.3.5.4.3.9">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/update-alternatives.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">/usr/bin/java <span class="callout" id="co-ua-java-name">1</span>
 -&gt; /etc/alternatives/java <span class="callout" id="co-ua-java-symbolic-link">2</span>
     -&gt; /usr/lib64/jvm/jre-10-openjdk/bin/java <span class="callout" id="co-ua-java-alternatives">3</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ua-java-name"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       The generic name.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ua-java-symbolic-link"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       The symbolic link in the alternatives directory.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ua-java-alternatives"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       One of the alternatives.
      </p></td></tr></table></div></div></div></section><section class="sect1" id="sec-ua-use-cases" data-id-title="Use cases"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22.2 </span><span class="title-name">Use cases</span></span> <a title="Permalink" class="permalink" href="#sec-ua-use-cases">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/update-alternatives.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    By default, the <code class="command">update-alternatives</code> script is called
    from inside an RPM package. When a package is installed or removed, the
    script takes care of all its symbolic links.
    But you can run it manually from the command line for:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      displaying the current alternatives for a generic name.
     </p></li><li class="listitem"><p>
      changing the defaults of an alternative.
     </p></li><li class="listitem"><p>
     creating a set of related files for an alternative.
     </p></li></ul></div></section><section class="sect1" id="sec-ua-view-all" data-id-title="Getting an overview of alternatives"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22.3 </span><span class="title-name">Getting an overview of alternatives</span></span> <a title="Permalink" class="permalink" href="#sec-ua-view-all">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/update-alternatives.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To retrieve the names of all configured alternatives, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">ls /var/lib/alternatives</code></pre></div><p>
    To get an overview of all configured alternatives and their values, use
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">update-alternatives --get-selections</code>
asadmin                        auto     /usr/bin/asadmin-2.7
awk                            auto     /usr/bin/gawk
chardetect                     auto     /usr/bin/chardetect-3.6
dbus-launch                    auto     /usr/bin/dbus-launch.x11
default-displaymanager         auto     /usr/lib/X11/displaymanagers/gdm
[...]</pre></div></section><section class="sect1" id="sec-ua-view" data-id-title="Viewing details on specific alternatives"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22.4 </span><span class="title-name">Viewing details on specific alternatives</span></span> <a title="Permalink" class="permalink" href="#sec-ua-view">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/update-alternatives.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The easiest way to check the alternatives is to follow the symbolic links of
    your command.
    For example, to find out what the <code class="command">java</code>
    command is referring to, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">readlink --canonicalize /usr/bin/java</code>
/usr/lib64/jvm/jre-10-openjdk/bin/java</pre></div><p>
    If you see the same path (in our example, it is
    <code class="filename">/usr/bin/java</code>),
    there are no alternatives available for this command.
   </p><p>
    To see the full alternatives (including slaves), use the
    <code class="option">--display</code> option:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">update-alternatives --display java</code>
java - auto mode
  link best version is /usr/lib64/jvm/jre-1.8.0-openjdk/bin/java
  link currently points to /usr/lib64/jvm/jre-1.8.0-openjdk/bin/java
  link java is /usr/bin/java
  slave java.1.gz is /usr/share/man/man1/java.1.gz
  slave jre is /usr/lib64/jvm/jre
  slave jre_exports is /usr/lib64/jvm-exports/jre
  slave keytool is /usr/bin/keytool
  slave keytool.1.gz is /usr/share/man/man1/keytool.1.gz
  slave orbd is /usr/bin/orbd
  slave orbd.1.gz is /usr/share/man/man1/orbd.1.gz
[...]</pre></div></section><section class="sect1" id="sec-ua-set" data-id-title="Setting the default version of alternatives"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22.5 </span><span class="title-name">Setting the default version of alternatives</span></span> <a title="Permalink" class="permalink" href="#sec-ua-set">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/update-alternatives.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    By default, commands in <code class="filename">/usr/bin</code> refer to the
    alternatives directory with the highest priority. For example,
    by default, the command <code class="command">java</code> shows the following
    version number:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">java -version</code>
openjdk version "10.0.1" 2018-04-17
OpenJDK Runtime Environment (build 10.0.1+10-suse-lp150.1.11-x8664)
OpenJDK 64-Bit Server VM (build 10.0.1+10-suse-lp150.1.11-x8664, mixed mode)</pre></div><p>
    To change the default <code class="command">java</code> command to refer
    to a previous version, run:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">update-alternatives --config java</code>
root's password:
There are 2 choices for the alternative java (providing /usr/bin/java).

  Selection    Path                                       Priority   Status
------------------------------------------------------------
* 0            /usr/lib64/jvm/jre-10-openjdk/bin/java      2005      auto mode
  1            /usr/lib64/jvm/jre-1.8.0-openjdk/bin/java   1805      manual mode
  2            /usr/lib64/jvm/jre-10-openjdk/bin/java      2005      manual mode
  3            /usr/lib64/jvm/jre-11-openjdk/bin/java      0         manual mode

Press &lt;enter&gt; to keep the current choice[*], or type selection number:</pre></div><p>
    Depending on your system and installed versions, the exact Java version
    number will be different.
    After you have selected <code class="literal">1</code>, <code class="command">java</code>
    shows the following version number:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">java -version</code>
java version "1.8.0_171"
OpenJDK Runtime Environment (IcedTea 3.8.0) (build 1.8.0_171-b11 suse-lp150.2.3.1-x86_64)
OpenJDK 64-Bit Server VM (build 25.171-b11, mixed mode)</pre></div><p>
    Also, keep in mind the following points:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      When working in manual mode and installing another Java
      version, the alternatives system neither touches the links nor changes the
      generic name.
     </p></li><li class="listitem"><p>
      When working in automatic mode and installing another Java version,
      the alternatives system changes the Java master link and all slave links (as you can
      see in <a class="xref" href="#sec-ua-view" title="22.4. Viewing details on specific alternatives">Section 22.4, “Viewing details on specific alternatives”</a>).
      To check the master-slave relationships, use:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">update-alternatives --display java</code></pre></div></li></ul></div></section><section class="sect1" id="sec-ua-install" data-id-title="Installing custom alternatives"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22.6 </span><span class="title-name">Installing custom alternatives</span></span> <a title="Permalink" class="permalink" href="#sec-ua-install">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/update-alternatives.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This section describes how to set up custom alternatives on a system.
   </p><div id="id-1.3.5.4.8.3" data-id-title="No custom alternatives for python3" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: No custom alternatives for python3</div><p>
       Do not install custom alternatives for python3.
       <code class="command">/usr/bin/python3</code> does not have update alternatives and
       always points to specific tested versions. Creating a custom python3
       alternative pointing to a different version—such as python
       3.11—breaks dependent system tools.
     </p></div><p>
    The example makes the following assumptions:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      There are two scripts, <code class="command">foo-2</code> and <code class="command">foo-3</code>,
      with similar functionality.
     </p></li><li class="listitem"><p>
      The scripts are stored in the <code class="filename">/usr/local/bin</code>
      directory to avoid any conflicts with the system tools in
      <code class="filename">/usr/bin</code>.
     </p></li><li class="listitem"><p>
      There is a master link <code class="command">foo</code> that points to either
      <code class="command">foo-2</code> or <code class="command">foo-3</code>.
     </p></li></ul></div><p>
    To provide alternatives on your system, follow these steps:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Copy your scripts into the <code class="filename">/usr/local/bin</code> directory.
     </p></li><li class="step"><p>
      Make the scripts executable:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">chmod +x /usr/local/bin/foo-{2,3}</code></pre></div></li><li class="step"><p>
      Run <code class="command">update-alternatives</code> for both scripts:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> update-alternatives --install \
   /usr/local/bin/foo <span class="callout" id="co-ua-ua-install-usr-local-bin-foo">1</span>\
   foo <span class="callout" id="co-ua-ua-install-foo">2</span>\
   /usr/local/bin/foo-2 <span class="callout" id="co-ua-ua-install-usr-local-bin-foo-path">3</span>\
   200 <span class="callout" id="co-ua-ua-install-prio">4</span>
<code class="prompt user">&gt; </code><code class="command">sudo</code> update-alternatives --install \
   /usr/local/bin/foo <a class="xref" href="#co-ua-ua-install-usr-local-bin-foo"><span class="callout">1</span></a>\
   foo <a class="xref" href="#co-ua-ua-install-foo"><span class="callout">2</span></a>\
   /usr/local/bin/foo-3 <a class="xref" href="#co-ua-ua-install-usr-local-bin-foo-path"><span class="callout">3</span></a>\
   300 <a class="xref" href="#co-ua-ua-install-prio"><span class="callout">4</span></a></pre></div><p>
      The options after <code class="option">--install</code> have the following meanings:
     </p><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ua-ua-install-usr-local-bin-foo"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
        The generic name. To avoid confusion, this is normally the script
        name without any version numbers.
       </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ua-ua-install-foo"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
        The name of the master link. Must be the same.
       </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ua-ua-install-usr-local-bin-foo-path"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
        The path to the original scripts located in
        <code class="filename">/usr/local/bin</code>.
       </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ua-ua-install-prio"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
        The priority.
        We give <code class="command">foo-2</code> a lower priority than
        <code class="command">foo-3</code>.
        It is good practice to use a significant number increase to separate
        priorities. For example, a priority of 200 for <code class="command">foo-2</code>
        and 300 for <code class="command">foo-3</code>.
       </p></td></tr></table></div></li><li class="step"><p>
      Check the master link:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">update-alternatives --display foo</code>
foo - auto mode
  link best version is /usr/local/bin/foo-3
  link currently points to /usr/local/bin/foo-3
  link foo is /usr/local/bin/foo
/usr/local/bin/foo-2 - priority 200
/usr/local/bin/foo-3 - priority 300</pre></div></li></ol></div></div><p>
    After you completed the described steps, you can use the master link
    <code class="command">/usr/local/bin/foo</code>.
   </p><p>
    If needed, you can install additional alternatives.
    To remove an alternative, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">update-alternatives --remove foo /usr/local/bin/foo-2</code></pre></div><p>
    After this script has been removed, the alternatives system for the foo group looks
    like this:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">update-alternatives --display foo</code>
foo - auto mode
  link best version is /usr/local/bin/foo-3
  link currently points to /usr/local/bin/foo-3
  link foo is /usr/local/bin/foo
/usr/local/bin/foo-3 - priority 300</pre></div></section><section class="sect1" id="sec-ua-slave" data-id-title="Defining dependent alternatives"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22.7 </span><span class="title-name">Defining dependent alternatives</span></span> <a title="Permalink" class="permalink" href="#sec-ua-slave">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/update-alternatives.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you have alternatives, the script itself is not enough. Most commands
    are not stand-alone—they ship with additional files,
    such as extensions, configurations or man pages.
    To create alternatives which are dependent on a master
    link, use <span class="emphasis"><em>slave alternatives</em></span>.
   </p><p>
    Let us assume we want to extend our example in <a class="xref" href="#sec-ua-install" title="22.6. Installing custom alternatives">Section 22.6, “Installing custom alternatives”</a>
    and provide man pages and configuration files:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Two man pages, <code class="filename">foo-2.1.gz</code> and <code class="filename">foo-3.1.gz</code>
      stored in the <code class="filename">/usr/local/man/man1</code> directory.
     </p></li><li class="listitem"><p>
      Two configuration files, <code class="filename">foo-2.conf</code> and
      <code class="filename">foo-3.conf</code>, stored in <code class="filename">/etc</code>.
     </p></li></ul></div><p>
    Follow these steps to add the additional files to your alternatives:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Copy the configuration files into <code class="filename">/etc</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">cp foo-{2,3}.conf /etc</code></pre></div></li><li class="step"><p>
      Copy the man pages into the <code class="filename">/usr/local/man/man1</code>
      directory:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">cp foo-{2,3}.1.gz /usr/local/man/man1/</code></pre></div></li><li class="step"><p>
      Add the slave links to the main scripts with the <code class="option">--slave</code>
      option:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">update-alternatives --install \
   /usr/local/bin/foo foo /usr/local/bin/foo-2 200 \
   --slave /usr/local/man/man1/foo.1.gz \
   foo.1.gz \
   /usr/local/man/man1/foo-2.1.gz \
   --slave /etc/foo.conf \
   foo.conf \
   /etc/foo-2.conf</code>
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">update-alternatives --install \
   /usr/local/bin/foo foo /usr/local/bin/foo-3 300 \
   --slave /usr/local/man/man1/foo.1.gz \
   foo.1.gz \
   /usr/local/man/man1/foo-3.1.gz \
   --slave /etc/foo.conf \
   foo.conf \
   /etc/foo-3.conf</code></pre></div></li><li class="step"><p>Check the master link:</p><div class="verbatim-wrap"><pre class="screen">foo - auto mode
  link best version is /usr/local/bin/foo-3
  link currently points to /usr/local/bin/foo-3
  link foo is /usr/local/bin/foo
  slave foo.1.gz is /usr/local/man/man1/foo.1.gz
  slave foo.conf is /etc/foo.conf
/usr/local/bin/foo-2 - priority 200
  slave foo.1.gz: /usr/local/man/man1/foo-2.1.gz
  slave foo.conf: /etc/foo-2.conf
/usr/local/bin/foo-3 - priority 300
  slave foo.1.gz: /usr/local/man/man1/foo-3.1.gz
  slave foo.conf: /etc/foo-3.conf</pre></div></li></ol></div></div><p>
    If you change the links with <code class="command">update-alternatives --config foo</code>
    to <code class="command">foo-2</code>, then all slave links will change as well.
   </p></section></section><section class="chapter" id="cha-network" data-id-title="Basic networking"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">23 </span><span class="title-name">Basic networking</span></span> <a title="Permalink" class="permalink" href="#cha-network">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Linux offers the necessary networking tools and features for integration
    into all types of network structures. Network access using a network card
    can be configured with YaST. Manual configuration is also possible. In
    this chapter, only the fundamental mechanisms and the relevant network
    configuration files are covered.
   </p></div></div></div></div><p>
  Linux and other Unix operating systems use the TCP/IP protocol. It is not a
  single network protocol, but a family of network protocols that offer multiple
  services. The protocols listed in <a class="xref" href="#tab-net-basic-tcpproto" title="Several protocols in the TCP/IP protocol family">Several protocols in the TCP/IP protocol family</a>
  are provided for exchanging data between two machines via TCP/IP. Networks
  combined by TCP/IP, comprising a worldwide network, are also called
  <span class="quote">“<span class="quote">the Internet.</span>”</span>
 </p><p>
  RFC stands for <span class="emphasis"><em>Request for Comments</em></span>. RFCs are documents
  that describe Internet protocols and implementation procedures for
  the operating system and its applications. The RFC documents describe the
  setup of Internet protocols. For more information about RFCs, see
  <a class="link" href="https://datatracker.ietf.org/" target="_blank">https://datatracker.ietf.org/</a>.
 </p><div class="variablelist" id="tab-net-basic-tcpproto" data-id-title="Several protocols in the TCP/IP protocol family"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Several protocols in the TCP/IP protocol family </span></span><a title="Permalink" class="permalink" href="#tab-net-basic-tcpproto">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.5.5.5.2"><span class="term">TCP</span></dt><dd><p>
     Transmission Control Protocol: a connection-oriented secure protocol. The
     data to transmit is first sent by the application as a stream of data and
     converted into the appropriate format by the operating system. The data
     arrives at the respective application on the destination host in the
     original data stream format it was initially sent. TCP determines whether
     any data has been lost or jumbled during the transmission. TCP is
     implemented wherever the data sequence matters.
    </p></dd><dt id="id-1.3.5.5.5.3"><span class="term">UDP</span></dt><dd><p>
     User Datagram Protocol: a connectionless, insecure protocol. The data to
     transmit is sent in the form of packets generated by the application. The
     order in which the data arrives at the recipient is not guaranteed and
     data loss is possible. UDP is suitable for record-oriented applications.
     It features a smaller latency period than TCP.
    </p></dd><dt id="id-1.3.5.5.5.4"><span class="term">ICMP</span></dt><dd><p>
     Internet Control Message Protocol: this is not a protocol for the end
     user, but a special control protocol that issues error reports and can
     control the behavior of machines participating in TCP/IP data transfer. In
     addition, it provides a special echo mode that can be viewed using the
     program ping.
    </p></dd><dt id="id-1.3.5.5.5.5"><span class="term">IGMP</span></dt><dd><p>
     Internet Group Management Protocol: this protocol controls machine
     behavior when implementing IP multicast.
    </p></dd></dl></div><p>
  As shown in <a class="xref" href="#fig-net-basic-OSI" title="Simplified layer model for TCP/IP">Figure 23.1, “Simplified layer model for TCP/IP”</a>, data exchange takes place in
  different layers. The actual network layer is the insecure data transfer via
  IP (Internet protocol). On top of IP, TCP (transmission control protocol)
  guarantees, to a certain extent, security of the data transfer. The IP layer
  is supported by the underlying hardware-dependent protocol, such as Ethernet.
 </p><div class="figure" id="fig-net-basic-OSI"><div class="figure-contents"><div class="mediaobject"><a href="images/net_basic_osi.png"><img src="images/net_basic_osi.png" width="75%" alt="OSI and TCP" title="OSI and TCP"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 23.1: </span><span class="title-name">Simplified layer model for TCP/IP </span></span><a title="Permalink" class="permalink" href="#fig-net-basic-OSI">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div><p>
  The diagram provides one or two examples for each layer. The layers are
  ordered according to <span class="emphasis"><em>abstraction levels</em></span>. The lowest layer
  is close to the hardware. The uppermost layer, however, is almost a complete
  abstraction from the hardware. Every layer has its own special function. The
  special functions of each layer are implicit in their description. The data
  link and physical layers represent the physical network used, such as
  Ethernet.
 </p><p>
  Almost all hardware protocols work on a packet-oriented basis. The data to
  transmit is collected into <span class="emphasis"><em>packets</em></span> (it cannot be sent all
  at once). The maximum size of a TCP/IP packet is approximately 64 KB. Packets
  are normally small, as the network hardware can be a limiting factor. The
  maximum size of a data packet on Ethernet is about fifteen hundred bytes. The
  size of a TCP/IP packet is limited to this amount when the data is sent over
  Ethernet. If more data is transferred, more data packets need to be sent by
  the operating system.
 </p><p>
  For the layers to serve their designated functions, additional information
  regarding each layer must be saved in the data packet. This takes place in
  the <span class="emphasis"><em>header</em></span> of the packet. Every layer attaches a small
  block of data, called the protocol header, to the front of each emerging
  packet. A sample TCP/IP data packet traveling over an Ethernet cable is
  illustrated in <a class="xref" href="#fig-net-basic-TCPPaket" title="TCP/IP Ethernet packet">Figure 23.2, “TCP/IP Ethernet packet”</a>. The proof sum is
  located at the end of the packet, not at the beginning. This simplifies
  things for the network hardware.
 </p><div class="figure" id="fig-net-basic-TCPPaket"><div class="figure-contents"><div class="mediaobject"><a href="images/net_basic_tcppacket.png"><img src="images/net_basic_tcppacket.png" width="75%" alt="TCP/IP Ethernet packet" title="TCP/IP Ethernet packet"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 23.2: </span><span class="title-name">TCP/IP Ethernet packet </span></span><a title="Permalink" class="permalink" href="#fig-net-basic-TCPPaket">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div><p>
  When an application sends data over the network, the data passes through each
  layer, all implemented in the Linux kernel except the physical layer. Each
  layer handles preparing the data so it can be passed to the next layer. The
  lowest layer is ultimately responsible for sending the data. The entire
  procedure is reversed when data is received. Like the layers of an onion, in
  each layer the protocol headers are removed from the transported data.
  Finally, the transport layer handles making the data available for use by the
  applications at the destination. In this manner, one layer only communicates
  with the layer directly above or below it. For applications, it is irrelevant
  whether data is transmitted via a wireless or wired connection. Likewise, it
  is irrelevant for the data line which kind of data is transmitted, if packets
  are in the correct format.
 </p><section class="sect1" id="sec-network-addresses" data-id-title="IP addresses and routing"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23.1 </span><span class="title-name">IP addresses and routing</span></span> <a title="Permalink" class="permalink" href="#sec-network-addresses">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The discussion in this section is limited to IPv4 networks. For information
   about IPv6 protocol, the successor to IPv4, refer to
   <a class="xref" href="#sec-network-ipv6" title="23.2. IPv6—the next generation Internet">Section 23.2, “IPv6—the next generation Internet”</a>.
  </p><section class="sect2" id="sec-network-addresses-ip" data-id-title="IP addresses"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.1.1 </span><span class="title-name">IP addresses</span></span> <a title="Permalink" class="permalink" href="#sec-network-addresses-ip">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Every computer on the Internet has a unique 32-bit address. These 32 bits
    (or 4 bytes) are normally written as illustrated in the second row in
    <a class="xref" href="#aus-net-basic-ipaddress" title="Writing IP addresses">Example 23.1, “Writing IP addresses”</a>.
   </p><div class="example" id="aus-net-basic-ipaddress" data-id-title="Writing IP addresses"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.1: </span><span class="title-name">Writing IP addresses </span></span><a title="Permalink" class="permalink" href="#aus-net-basic-ipaddress">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">IP Address (binary):  11000000 10101000 00000000 00010100
IP Address (decimal):      192.     168.       0.      20</pre></div></div></div><p>
    In decimal form, the four bytes are written in the decimal number system,
    separated by periods. The IP address is assigned to a host or a network
    interface. It can be used only once throughout the world. There are
    exceptions to this rule, but these are not relevant to the following
    passages.
   </p><p>
    The points in IP addresses indicate the hierarchical system. Until the
    1990s, IP addresses were strictly categorized in classes. However, this
    system proved too inflexible and was discontinued. Now, <span class="emphasis"><em>classless
    routing</em></span> (CIDR, classless interdomain routing) is used.
   </p></section><section class="sect2" id="sec-network-addresses-route" data-id-title="Netmasks and routing"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.1.2 </span><span class="title-name">Netmasks and routing</span></span> <a title="Permalink" class="permalink" href="#sec-network-addresses-route">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Netmasks are used to define the address range of a subnet. If two hosts are
    in the same subnet, they can reach each other directly. If they are not in
    the same subnet, they need the address of a gateway that handles all the
    traffic for the subnet. To check if two IP addresses are in the same
    subnet, simply <span class="quote">“<span class="quote">AND</span>”</span> both addresses with the netmask. If the
    result is identical, both IP addresses are in the same local network. If
    there are differences, the remote IP address, and thus the remote
    interface, can only be reached over a gateway.
   </p><p>
    To understand how the netmask works, look at
    <a class="xref" href="#tab-net-basic-netmask" title="Linking IP addresses to the netmask">Example 23.2, “Linking IP addresses to the netmask”</a>. The netmask consists of 32 bits
    that identify how much of an IP address belongs to the network. All those
    bits that are <code class="literal">1</code> mark the corresponding bit in the IP
    address as belonging to the network. All bits that are <code class="literal">0</code>
    mark bits inside the subnet. This means that the more bits are
    <code class="literal">1</code>, the smaller the subnet is. Because the netmask always
    consists of several successive <code class="literal">1</code> bits, it is also
    possible to count the number of bits in the netmask. In
    <a class="xref" href="#tab-net-basic-netmask" title="Linking IP addresses to the netmask">Example 23.2, “Linking IP addresses to the netmask”</a> the first net with 24 bits could
    also be written as <code class="literal">192.168.0.0/24</code>.
   </p><div class="example" id="tab-net-basic-netmask" data-id-title="Linking IP addresses to the netmask"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.2: </span><span class="title-name">Linking IP addresses to the netmask </span></span><a title="Permalink" class="permalink" href="#tab-net-basic-netmask">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">IP address (192.168.0.20):  11000000 10101000 00000000 00010100
Netmask   (255.255.255.0):  11111111 11111111 11111111 00000000
---------------------------------------------------------------
Result of the link:         11000000 10101000 00000000 00000000
In the decimal system:           192.     168.       0.       0

IP address (213.95.15.200): 11010101 10111111 00001111 11001000
Netmask    (255.255.255.0): 11111111 11111111 11111111 00000000
---------------------------------------------------------------
Result of the link:         11010101 10111111 00001111 00000000
In the decimal system:           213.      95.      15.       0</pre></div></div></div><p>
    To give another example: all machines connected with the same Ethernet
    cable are normally located in the same subnet and are directly accessible.
    Even when the subnet is physically divided by switches or bridges, these
    hosts can still be reached directly.
   </p><p>
    IP addresses outside the local subnet can only be reached if a gateway is
    configured for the target network. In the most common case, there is only
    one gateway that handles all traffic that is external. However, it is also
    possible to configure several gateways for different subnets.
   </p><p>
    If a gateway has been configured, all external IP packets are sent to the
    appropriate gateway. This gateway then attempts to forward the packets in
    the same manner—from host to host—until it reaches the
    destination host or the packet's TTL (time to live) expires.
   </p><div class="variablelist" id="net-basic-spezial-net" data-id-title="Specific addresses"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Specific addresses </span></span><a title="Permalink" class="permalink" href="#net-basic-spezial-net">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.5.5.13.4.8.2"><span class="term">Base Network Address</span></dt><dd><p>
       This is the netmask AND any address in the network, as shown in
       <a class="xref" href="#tab-net-basic-netmask" title="Linking IP addresses to the netmask">Example 23.2, “Linking IP addresses to the netmask”</a> under <code class="literal">Result</code>.
       This address cannot be assigned to any hosts.
      </p></dd><dt id="id-1.3.5.5.13.4.8.3"><span class="term">Broadcast Address</span></dt><dd><p>
       This could be paraphrased as: <span class="quote">“<span class="quote">Access all hosts in this
       subnet.</span>”</span> To generate this, the netmask is inverted in binary form
       and linked to the base network address with a logical OR. The above
       example therefore results in 192.168.0.255. This address cannot be
       assigned to any hosts.
      </p></dd><dt id="id-1.3.5.5.13.4.8.4"><span class="term">Local Host</span></dt><dd><p>
       The address <code class="systemitem">127.0.0.1</code> is
       assigned to the <span class="quote">“<span class="quote">loopback device</span>”</span> on each host. A
       connection can be set up to your own machine with this address and with
       all addresses from the complete
       <code class="systemitem">127.0.0.0/8</code> loopback network
       as defined with IPv4. With IPv6 there is only one loopback address
       (<code class="systemitem">::1</code>).
      </p></dd></dl></div><p>
    Because IP addresses must be unique all over the world, you cannot select
    random addresses. There are three address domains to use to set up a private
    IP-based network. These cannot get any connection from the rest of the
    Internet, because they cannot be transmitted over the Internet. These
    address domains are specified in RFC 1597 and listed in
    <a class="xref" href="#tab-net-basic-privat-net" title="Private IP address domains">Table 23.1, “Private IP address domains”</a>.
   </p><div class="table" id="tab-net-basic-privat-net" data-id-title="Private IP address domains"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 23.1: </span><span class="title-name">Private IP address domains </span></span><a title="Permalink" class="permalink" href="#tab-net-basic-privat-net">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Network/Netmask
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Domain
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="systemitem">10.0.0.0</code>/<code class="systemitem">255.0.0.0</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="systemitem">10.x.x.x</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="systemitem">172.16.0.0</code>/<code class="systemitem">255.240.0.0</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="systemitem">172.16.x.x</code> –
         <code class="systemitem">172.31.x.x</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <code class="systemitem">192.168.0.0</code>/<code class="systemitem">255.255.0.0</code>
        </p>
       </td><td>
        <p>
         <code class="systemitem">192.168.x.x</code>
        </p>
       </td></tr></tbody></table></div></div></section></section><section class="sect1" id="sec-network-ipv6" data-id-title="IPv6—the next generation Internet"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23.2 </span><span class="title-name">IPv6—the next generation Internet</span></span> <a title="Permalink" class="permalink" href="#sec-network-ipv6">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><div id="id-1.3.5.5.14.2" data-id-title="IBM Z: IPv6 support" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: IBM Z: IPv6 support</div><p>
    IPv6 is not supported by the CTC and IUCV network connections of the
    IBM Z hardware.
   </p></div><p>
   Because of the emergence of the World Wide Web (WWW), the Internet has
   experienced explosive growth, with an increasing number of computers
   communicating via TCP/IP in the past fifteen years. Since Tim Berners-Lee at
   CERN (<a class="link" href="https://public.web.cern.ch" target="_blank">https://public.web.cern.ch</a>) invented the WWW in
   1990, the number of Internet hosts has grown from a few thousand to about a
   hundred million.
  </p><p>
   As mentioned, an IPv4 address consists of only 32 bits. Also, a few IP
   addresses are lost—they cannot be used because of the way
   networks are organized. The number of addresses available in your subnet is
   two to the power of the number of bits, minus two. A subnet has, for
   example, 2, 6 or 14 addresses available. To connect 128 hosts to the
   Internet, for example, you need a subnet with 256 IP addresses, from which
   only 254 are usable, because two IP addresses are needed for the structure
   of the subnet itself: the broadcast and the base network address.
  </p><p>
   Under the current IPv4 protocol, DHCP or NAT (network address translation)
   are the typical mechanisms used to circumvent the potential address
   shortage. Combined with the convention to keep private and public address
   spaces separate, these methods can certainly mitigate the shortage. To set
   up a host in an IPv4 network, you need several address items, such as the
   host's own IP address, the subnetmask, the gateway address, and maybe a name
   server address. All these items need to be known and cannot be derived from
   somewhere else.
  </p><p>
   With IPv6, both the address shortage and the complicated configuration
   should be a thing of the past. The following sections tell more about the
   improvements and benefits brought by IPv6 and about the transition from the
   old protocol to the new one.
  </p><section class="sect2" id="sec-network-ipv6-adv" data-id-title="Advantages"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.2.1 </span><span class="title-name">Advantages</span></span> <a title="Permalink" class="permalink" href="#sec-network-ipv6-adv">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The most important and most visible improvement brought by the IPv6
    protocol is the enormous expansion of the available address space. An IPv6
    address is made up of 128 bit values instead of the traditional 32 bits.
    This provides for as many as several quadrillion IP addresses.
   </p><p>
    However, IPv6 addresses are not only different from their predecessors with
    regard to their length. They also have a different internal structure that
    may contain more specific information about the systems and the networks to
    which they belong. More details about this are found in
    <a class="xref" href="#sec-network-ipv6-address" title="23.2.2. Address types and structure">Section 23.2.2, “Address types and structure”</a>.
   </p><p>
    The following is a list of other advantages of the IPv6 protocol:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.14.7.5.1"><span class="term">Autoconfiguration</span></dt><dd><p>
       IPv6 makes the network <span class="quote">“<span class="quote">plug and play</span>”</span> capable, which means
       that a newly configured system integrates into the (local) network
       without any manual configuration. The new host uses its automatic
       configuration mechanism to derive its own address from the information
       made available by the neighboring routers, relying on a protocol called
       the <span class="emphasis"><em>neighbor discovery</em></span> (ND) protocol. This method
       does not require any intervention on the administrator's part and there
       is no need to maintain a central server for address allocation—an
       additional advantage over IPv4, where automatic address allocation
       requires a DHCP server.
      </p><p>
       Nevertheless if a router is connected to a switch, the router should
       send periodic advertisements with flags telling the hosts of a network
       how they should interact with each other. For more information, see
       RFC 2462 and the <code class="systemitem">radvd.conf(5)</code> man page, and
       RFC 3315.
      </p></dd><dt id="id-1.3.5.5.14.7.5.2"><span class="term">Mobility</span></dt><dd><p>
       IPv6 makes it possible to assign several addresses to one network
       interface at the same time. This allows users to access several networks
       easily, something that could be compared with the international roaming
       services offered by mobile phone companies. When you take your mobile
       phone abroad, the phone automatically logs in to a foreign service when
       it enters the corresponding area, so you can be reached under the same
       number everywhere and can place an outgoing call, as you would in your
       home area.
      </p></dd><dt id="id-1.3.5.5.14.7.5.3"><span class="term">Secure communication</span></dt><dd><p>
       With IPv4, network security is an add-on function. IPv6 includes IPsec
       as one of its core features, allowing systems to communicate over a
       secure tunnel to avoid eavesdropping by outsiders on the Internet.
      </p></dd><dt id="id-1.3.5.5.14.7.5.4"><span class="term">Backward compatibility</span></dt><dd><p>
       Realistically, it would be impossible to switch the entire Internet from
       IPv4 to IPv6 at one time. Therefore, it is crucial that both protocols
       can coexist not only on the Internet, but also on one system. This is
       ensured by compatible addresses (IPv4 addresses can easily be translated
       into IPv6 addresses) and by using several tunnels. See
       <a class="xref" href="#sec-network-ipv6-coexist" title="23.2.3. Coexistence of IPv4 and IPv6">Section 23.2.3, “Coexistence of IPv4 and IPv6”</a>. Also, systems can rely on a
       <span class="emphasis"><em>dual stack IP</em></span> technique to support both protocols at
       the same time, meaning that they have two network stacks that are
       separate, such that there is no interference between the two protocol
       versions.
      </p></dd><dt id="id-1.3.5.5.14.7.5.5"><span class="term">Custom tailored services through multicasting</span></dt><dd><p>
       With IPv4, certain services, such as SMB, need to broadcast their packets
       to all hosts in the local network. IPv6 allows a much more fine-grained
       approach by enabling servers to address hosts through
       <span class="emphasis"><em>multicasting</em></span>, that is by addressing several hosts
       as parts of a group. This is different from addressing all hosts through
       <span class="emphasis"><em>broadcasting</em></span> or each host individually through
       <span class="emphasis"><em>unicasting</em></span>. Which hosts are addressed as a group may
       depend on the concrete application. There are specific predefined groups
       to address all name servers (the <span class="emphasis"><em>all name servers multicast
       group</em></span>), for example, or all routers (the <span class="emphasis"><em>all routers
       multicast group</em></span>).
      </p></dd></dl></div></section><section class="sect2" id="sec-network-ipv6-address" data-id-title="Address types and structure"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.2.2 </span><span class="title-name">Address types and structure</span></span> <a title="Permalink" class="permalink" href="#sec-network-ipv6-address">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    As mentioned, the current IP protocol has two major limitations: there is
    an increasing shortage of IP addresses and configuring the network and
    maintaining the routing tables is becoming a more complex and burdensome
    task. IPv6 solves the first problem by expanding the address space to
    128 bits. The second one is mitigated by introducing a hierarchical address
    structure combined with sophisticated techniques to allocate network
    addresses, and <span class="emphasis"><em>multihoming</em></span> (the ability to assign
    several addresses to one device, giving access to several networks).
   </p><p>
    When dealing with IPv6, it is useful to know about three different types of
    addresses:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.14.8.4.1"><span class="term">Unicast</span></dt><dd><p>
       Addresses of this type are associated with exactly one network
       interface. Packets with such an address are delivered to only one
       destination. Accordingly, unicast addresses are used to transfer packets
       to individual hosts on the local network or the Internet.
      </p></dd><dt id="id-1.3.5.5.14.8.4.2"><span class="term">Multicast</span></dt><dd><p>
       Addresses of this type relate to a group of network interfaces. Packets
       with such an address are delivered to all destinations that belong to
       the group. Multicast addresses are mainly used by certain network
       services to communicate with certain groups of hosts in a well-directed
       manner.
      </p></dd><dt id="id-1.3.5.5.14.8.4.3"><span class="term">Anycast</span></dt><dd><p>
       Addresses of this type are related to a group of interfaces. Packets with
       such an address are delivered to the member of the group that is closest
       to the sender, according to the principles of the underlying routing
       protocol. Anycast addresses are used to make it easier for hosts to find
       out about servers offering certain services in the given network area.
       All servers of the same type have the same anycast address. Whenever a
       host requests a service, it receives a reply from the server with the
       closest location, as determined by the routing protocol. If this server
       should fail, the protocol automatically selects the second closest
       server, then the third one, and so forth.
      </p></dd></dl></div><p>
    An IPv6 address is made up of eight four-digit fields, each representing 16
    bits, written in hexadecimal notation. They are separated by colons
    (<code class="literal">:</code>). Any leading zero bytes within a given field may be
    dropped, but zeros within the field or at its end may not. Another
    convention is that more than four consecutive zero bytes may be collapsed
    into a double colon. However, only one such <code class="literal">::</code> is
    allowed per address. This kind of shorthand notation is shown in
    <a class="xref" href="#aus-net-ipv6-add" title="Sample IPv6 address">Example 23.3, “Sample IPv6 address”</a>, where all three lines represent the
    same address.
   </p><div class="example" id="aus-net-ipv6-add" data-id-title="Sample IPv6 address"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.3: </span><span class="title-name">Sample IPv6 address </span></span><a title="Permalink" class="permalink" href="#aus-net-ipv6-add">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">fe80 : 0000 : 0000 : 0000 : 0000 : 10 : 1000 : 1a4
fe80 :    0 :    0 :    0 :    0 : 10 : 1000 : 1a4
fe80 :                           : 10 : 1000 : 1a4</pre></div></div></div><p>
    Each part of an IPv6 address has a defined function. The first bytes form
    the prefix and specify the type of address. The center part is the network
    portion of the address, but it may be unused. The end of the address forms
    the host part. With IPv6, the netmask is defined by indicating the length
    of the prefix after a slash at the end of the address. An address, as shown
    in <a class="xref" href="#aus-net-ipv6-addpre" title="IPv6 address specifying the prefix length">Example 23.4, “IPv6 address specifying the prefix length”</a>, contains the information that the
    first 64 bits form the network part of the address and the last 64 form its
    host part. In other words, the <code class="literal">64</code> means that the netmask
    is filled with 64 1-bit values from the left. As with IPv4, the IP address
    is combined with AND with the values from the netmask to determine whether
    the host is located in the same subnet or in another one.
   </p><div class="example" id="aus-net-ipv6-addpre" data-id-title="IPv6 address specifying the prefix length"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.4: </span><span class="title-name">IPv6 address specifying the prefix length </span></span><a title="Permalink" class="permalink" href="#aus-net-ipv6-addpre">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">fe80::10:1000:1a4/64</pre></div></div></div><p>
    IPv6 knows about several predefined types of prefixes. Certain are shown in
    <a class="xref" href="#list-net-basic-ipv6-prefix" title="IPv6 prefixes">IPv6 prefixes</a>.
   </p><div class="variablelist" id="list-net-basic-ipv6-prefix" data-id-title="IPv6 prefixes"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">IPv6 prefixes </span></span><a title="Permalink" class="permalink" href="#list-net-basic-ipv6-prefix">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.5.5.14.8.10.2"><span class="term"><code class="systemitem">00</code></span></dt><dd><p>
       IPv4 addresses and IPv4 over IPv6 compatibility addresses. These are
       used to maintain compatibility with IPv4. Their use still requires a
       router able to translate IPv6 packets into IPv4 packets. Several special
       addresses, such as the one for the loopback device, have this prefix as
       well.
      </p></dd><dt id="id-1.3.5.5.14.8.10.3"><span class="term"><code class="systemitem">2</code> or <code class="systemitem">3</code> as the first digit</span></dt><dd><p>
       Aggregatable global unicast addresses. As is the case with IPv4, an
       interface can be assigned to form part of a certain subnet. Currently,
       there are the following address spaces:
       <code class="systemitem">2001::/16</code> (production quality
       address space) and <code class="systemitem">2002::/16</code>
       (6to4 address space).
      </p></dd><dt id="id-1.3.5.5.14.8.10.4"><span class="term"><code class="systemitem">fe80::/10</code></span></dt><dd><p>
       Link-local addresses. Addresses with this prefix should not be routed
       and should therefore only be reachable from within the same subnet.
      </p></dd><dt id="id-1.3.5.5.14.8.10.5"><span class="term"><code class="systemitem">fec0::/10</code></span></dt><dd><p>
       Site-local addresses. These may be routed, but only within the network
       of the organization to which they belong. In effect, they are the IPv6
       equivalent of the current private network address space, such as
       <code class="systemitem">10.x.x.x</code>.
      </p></dd><dt id="id-1.3.5.5.14.8.10.6"><span class="term"><code class="systemitem">ff</code></span></dt><dd><p>
       These are multicast addresses.
      </p></dd></dl></div><p>
    A unicast address consists of three basic components:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.14.8.12.1"><span class="term">Public topology</span></dt><dd><p>
       The first part (which also contains one of the prefixes mentioned above)
       is used to route packets through the public Internet. It includes
       information about the company or institution that provides the Internet
       access.
      </p></dd><dt id="id-1.3.5.5.14.8.12.2"><span class="term">Site topology</span></dt><dd><p>
       The second part contains routing information about the subnet to which
       to deliver the packet.
      </p></dd><dt id="id-1.3.5.5.14.8.12.3"><span class="term">Interface ID</span></dt><dd><p>
       The third part identifies the interface to which to deliver the packet.
       This also allows for the MAC to form part of the address. Given that the
       MAC is a globally unique, fixed identifier coded into the device by the
       hardware maker, the configuration procedure is simplified. In fact, the
       first 64 address bits are consolidated to form the
       <code class="literal">EUI-64</code> token, with the last 48 bits taken from the
       MAC, and the remaining 24 bits containing special information about the
       token type. This also makes it possible to assign an
       <code class="literal">EUI-64</code> token to interfaces that do not have a MAC,
       such as those based on point-to-point protocol (PPP).
      </p></dd></dl></div><p>
    On top of this basic structure, IPv6 distinguishes between five different
    types of unicast addresses:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.14.8.14.1"><span class="term"><code class="systemitem">::</code> (unspecified)</span></dt><dd><p>
       This address is used by the host as its source address when the
       interface is initialized for the first time (at which point, the address
       cannot yet be determined by other means).
      </p></dd><dt id="id-1.3.5.5.14.8.14.2"><span class="term"><code class="systemitem">::1</code> (loopback)</span></dt><dd><p>
       The address of the loopback device.
      </p></dd><dt id="id-1.3.5.5.14.8.14.3"><span class="term">IPv4 compatible addresses</span></dt><dd><p>
       The IPv6 address is formed by the IPv4 address and a prefix consisting
       of 96 zero bits. This type of compatibility address is used for
       tunneling (see <a class="xref" href="#sec-network-ipv6-coexist" title="23.2.3. Coexistence of IPv4 and IPv6">Section 23.2.3, “Coexistence of IPv4 and IPv6”</a>) to allow IPv4
       and IPv6 hosts to communicate with others operating in a pure IPv4
       environment.
      </p></dd><dt id="id-1.3.5.5.14.8.14.4"><span class="term">IPv4 addresses mapped to IPv6</span></dt><dd><p>
       This type of address specifies a pure IPv4 address in IPv6 notation.
      </p></dd><dt id="id-1.3.5.5.14.8.14.5"><span class="term">Local addresses</span></dt><dd><p>
       There are two address types for local use:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.14.8.14.5.2.2.1"><span class="term">link-local</span></dt><dd><p>
          This type of address can only be used in the local subnet. Packets
          with a source or target address of this type should not be routed to
          the Internet or other subnets. These addresses contain a special
          prefix (<code class="systemitem">fe80::/10</code>) and the
          interface ID of the network card, with the middle part consisting of
          zero bytes. Addresses of this type are used during automatic
          configuration to communicate with other hosts belonging to the same
          subnet.
         </p></dd><dt id="id-1.3.5.5.14.8.14.5.2.2.2"><span class="term">site-local</span></dt><dd><p>
          Packets with this type of address may be routed to other subnets, but
          not to the wider Internet—they must remain inside the
          organization's own network. Such addresses are used for intranets and
          are an equivalent of the private address space defined by IPv4. They
          contain a special prefix
          (<code class="systemitem">fec0::/10</code>), the interface
          ID, and a 16-bit field specifying the subnet ID. Again, the rest is
          filled with zero bytes.
         </p></dd></dl></div></dd></dl></div><p>
    As a new feature introduced with IPv6, each network interface normally gets
    several IP addresses, with the advantage that several networks can be
    accessed through the same interface. One of these networks can be configured
    automatically using the MAC and a known prefix with the result that all
    hosts on the local network can be reached when IPv6 is enabled (using the
    link-local address). With the MAC forming part of it, any IP address used in
    the world is unique. The only variable parts of the address are those
    specifying the <span class="emphasis"><em>site topology</em></span>
    and the <span class="emphasis"><em>public topology</em></span>, depending on the actual
    network in which the host is currently operating.
   </p><p>
    For a host to go back and forth between different networks, it needs at
    least two addresses. One of them, the <span class="emphasis"><em>home address</em></span>,
    not only contains the interface ID but also an identifier of the home
    network to which it normally belongs (and the corresponding prefix). The
    home address is a static address and, as such, it does not normally change.
    Still, all packets destined to the mobile host can be delivered to it,
    regardless of whether it operates in the home network or somewhere outside.
    This is made possible by new features introduced with IPv6,
    such as <span class="emphasis"><em>stateless autoconfiguration</em></span> and
    <span class="emphasis"><em>neighbor discovery</em></span>. In addition to its home address, a
    mobile host gets one or more additional addresses that belong to the
    foreign networks where it is roaming. These are called
    <span class="emphasis"><em>care-of</em></span> addresses. The home network has a facility that
    forwards any packets destined to the host when it is roaming outside. In an
    IPv6 environment, this task is performed by the <span class="emphasis"><em>home
    agent</em></span>, which takes all packets destined to the home address and
    relays them through a tunnel. Those packets destined to the care-of address
    are directly transferred to the mobile host without any special detours.
   </p></section><section class="sect2" id="sec-network-ipv6-coexist" data-id-title="Coexistence of IPv4 and IPv6"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.2.3 </span><span class="title-name">Coexistence of IPv4 and IPv6</span></span> <a title="Permalink" class="permalink" href="#sec-network-ipv6-coexist">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The migration of all hosts connected to the Internet from IPv4 to IPv6 is a
    gradual process. Both protocols can coexist for a certain time to
    come. The coexistence on one system is guaranteed where there is a
    <span class="emphasis"><em>dual stack</em></span> implementation of both protocols. That still
    leaves the question of how an IPv6 enabled host should communicate with an
    IPv4 host and how IPv6 packets should be transported by the current
    networks, which are predominantly IPv4-based. The best solutions offer
    tunneling and compatibility addresses (see <a class="xref" href="#sec-network-ipv6-address" title="23.2.2. Address types and structure">Section 23.2.2, “Address types and structure”</a>).
   </p><p>
    IPv6 hosts that are isolated in the (worldwide) IPv4 network can communicate
    through tunnels: IPv6 packets are encapsulated as IPv4 packets to move them
    across an IPv4 network. Such a connection between two IPv4 hosts is called a
    <span class="emphasis"><em>tunnel</em></span>. To achieve this, packets must include the IPv6
    destination address (or the corresponding prefix) and the IPv4 address of
    the remote host at the receiving end of the tunnel. A basic tunnel can be
    configured manually according to an agreement between the hosts'
    administrators. This is also called <span class="emphasis"><em>static tunneling</em></span>.
   </p><p>
    However, the configuration and maintenance of static tunnels is often too
    labor-intensive to use them for daily communication needs. Therefore, IPv6
    provides for three different methods of <span class="emphasis"><em>dynamic
    tunneling</em></span>:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.14.9.5.1"><span class="term">6over4</span></dt><dd><p>
       IPv6 packets are automatically encapsulated as IPv4 packets and sent over
       an IPv4 network capable of multicasting. IPv6 is tricked into seeing the
       whole network (Internet) as a local area network (LAN). This makes
       it possible to determine the receiving end of the IPv4 tunnel
       automatically. However, this method does not scale well and is also
       hampered because IP multicasting is far from widespread on the Internet.
       Therefore, it only provides a solution for smaller corporate or
       institutional networks where multicasting can be enabled. The
       specifications for this method are laid down in RFC 2529.
      </p></dd><dt id="id-1.3.5.5.14.9.5.2"><span class="term">6to4</span></dt><dd><p>
       With this method, IPv4 addresses are automatically generated from IPv6
       addresses, enabling isolated IPv6 hosts to communicate over an IPv4
       network. However, several problems have been reported regarding the
       communication between those isolated IPv6 hosts and the Internet. The
       method is described in RFC 3056.
      </p></dd><dt id="id-1.3.5.5.14.9.5.3"><span class="term">IPv6 tunnel broker</span></dt><dd><p>
       This method relies on special servers that provide dedicated tunnels for
       IPv6 hosts. It is described in RFC 3053.
      </p></dd></dl></div></section><section class="sect2" id="sec-network-ipv6-config" data-id-title="Configuring IPv6"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.2.4 </span><span class="title-name">Configuring IPv6</span></span> <a title="Permalink" class="permalink" href="#sec-network-ipv6-config">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To configure IPv6, you normally do not need to make any changes on the
    individual workstations. IPv6 is enabled by default. To disable or enable
    IPv6 on an installed system, use the YaST <span class="guimenu">Network
    Settings</span> module. On the <span class="guimenu">Global Options</span> tab,
    select or deselect the <span class="guimenu">Enable IPv6</span> option as necessary.
    
    To enable it temporarily until the next reboot, enter
    <code class="command">modprobe</code> <code class="option">-i ipv6</code> as
    <code class="systemitem">root</code>. It is impossible to unload
    the IPv6 module after it has been loaded.
   </p><p>
    Because of the autoconfiguration concept of IPv6, the network card is
    assigned an address in the <span class="emphasis"><em>link-local</em></span> network.
    Normally, no routing table management takes place on a workstation. The
    network routers can be queried by the workstation, using the
    <span class="emphasis"><em>router advertisement protocol</em></span>, for what prefix and
    gateways should be implemented. The radvd program can be used to set up an
    IPv6 router. This program informs the workstations which prefix to use for
    the IPv6 addresses and which routers. Alternatively, use FRR (see <a class="link" href="https://frrouting.org/" target="_blank">https://frrouting.org/</a>) for automatic configuration of both
    addresses and routing.
   </p><p>
    For information about how to set up multiple types of tunnels using the
    <code class="filename">/etc/sysconfig/network</code> files, see the man page of
    <code class="literal">ifcfg-tunnel</code> (<code class="command">man ifcfg-tunnel</code>).
   </p></section><section class="sect2" id="sec-network-ipv6-moreinfo" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.2.5 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-network-ipv6-moreinfo">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The above overview does not cover the topic of IPv6 comprehensively. For a
    more in-depth look at the newer protocol, refer to the following online
    documentation and books:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.14.11.3.1"><span class="term"><a class="link" href="https://pulse.internetsociety.org" target="_blank">https://pulse.internetsociety.org</a></span></dt><dd><p>
       The starting point for everything about IPv6.
      </p></dd><dt id="id-1.3.5.5.14.11.3.2"><span class="term"><a class="link" href="http://www.ipv6day.org" target="_blank">http://www.ipv6day.org</a></span></dt><dd><p>
       All information needed to start your own IPv6 network.
      </p></dd><dt id="id-1.3.5.5.14.11.3.3"><span class="term"><a class="link" href="http://www.ipv6-to-standard.org/" target="_blank">http://www.ipv6-to-standard.org/</a></span></dt><dd><p>
       The list of IPv6-enabled products.
      </p></dd><dt id="id-1.3.5.5.14.11.3.4"><span class="term"><a class="link" href="https://www.bieringer.de/linux/IPv6/" target="_blank">https://www.bieringer.de/linux/IPv6/</a></span></dt><dd><p>
       The Linux IPv6-HOWTO and many links related to the topic.
      </p></dd><dt id="id-1.3.5.5.14.11.3.5"><span class="term">RFC 2460</span></dt><dd><p>
        The fundamental RFC about IPv6, see <a class="link" href="https://www.rfc-editor.org/rfc/rfc2460" target="_blank">https://www.rfc-editor.org/rfc/rfc2460</a>.
      </p></dd><dt id="id-1.3.5.5.14.11.3.6"><span class="term">IPv6 essentials</span></dt><dd><p>
       A book describing all the important aspects of the topic is
       <span class="emphasis"><em>IPv6 Essentials</em></span> by Silvia Hagen (ISBN
       0-596-00125-8).
      </p></dd></dl></div></section></section><section class="sect1" id="sec-network-nameres" data-id-title="Name resolution"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23.3 </span><span class="title-name">Name resolution</span></span> <a title="Permalink" class="permalink" href="#sec-network-nameres">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_basic.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   DNS assists in assigning an IP address to one or more names and assigning a
   name to an IP address. In Linux, this conversion is normally carried out by a
   special type of software known as bind. The machine that takes care of this
   conversion is called a <span class="emphasis"><em>name server</em></span>. The names make up a
   hierarchical system in which each name component is separated by a period.
   The name hierarchy is, however, independent of the IP address hierarchy
   described above.
  </p><p>
   Consider a complete name, such as
   <code class="systemitem">jupiter.example.com</code>, written in the
   format <code class="systemitem">hostname.domain</code>. A full
   name, called a <span class="emphasis"><em>fully qualified domain name</em></span> (FQDN),
   consists of a host name and a domain name
   (<code class="systemitem">example.com</code>). The latter
   also includes the <span class="emphasis"><em>top level domain</em></span> or TLD
   (<code class="systemitem">com</code>).
  </p><p>
   TLD assignment has become confusing for historical reasons.
   Traditionally, three-letter domain names are used in the USA. In the rest of
   the world, the two-letter ISO national codes are the standard. Additionally,
   longer TLDs were introduced in 2000 that represent certain spheres of
   activity (for example, <code class="systemitem">.info</code>,
   <code class="systemitem">.name</code>,
   <code class="systemitem">.museum</code>).
  </p><p>
   In the early days of the Internet (before 1990), the file
   <code class="filename">/etc/hosts</code> was used to store the names of all the
   machines represented over the Internet. This quickly proved to be
   impractical in the face of the rapidly growing number of computers connected
   to the Internet. For this reason, a decentralized database was developed to
   store the host names in a widely distributed manner. This database, similar
   to the name server, does not have the data pertaining to all hosts in the
   Internet available, but can dispatch requests to other name servers.
  </p><p>
   The top of the hierarchy is occupied by <span class="emphasis"><em>root name
   servers</em></span>. These root name servers manage the top level domains and
   are run by the Network Information Center (NIC). Each root name server knows
   about the name servers responsible for a given top level domain. Information
   about top level domain NICs is available at
   <a class="link" href="https://www.internic.net" target="_blank">https://www.internic.net</a>.
  </p><p>
   DNS can do more than resolve host names. The name server also knows which
   host is receiving e-mails for an entire domain—the <span class="emphasis"><em>mail
   exchanger (MX)</em></span>.
  </p><p>
   For your machine to resolve an IP address, it must know about at least one
   name server and its IP address. <span class="phrase">Easily specify
   such a name server using YaST.</span> <span class="phrase">The
   configuration of name server access with <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> is described in
   <a class="xref" href="#sec-network-yast-change-host" title="23.4.1.4. Configuring host name and DNS">Section 23.4.1.4, “Configuring host name and DNS”</a>. Setting up your own name
   server is described in <a class="xref" href="#cha-dns" title="Chapter 39. The domain name system">Chapter 39, <em>The domain name system</em></a>.</span>
  </p><p>
   The protocol <code class="literal">whois</code> is closely related to DNS. With this
   program, quickly find out who accounts for a given domain.
  </p><div id="id-1.3.5.5.15.10" data-id-title="MDNS and .local domain names" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: MDNS and .local domain names</div><p>
    The <code class="literal">.local</code> top level domain is treated as link-local
    domain by the resolver. DNS requests are sent as multicast DNS requests
    instead of normal DNS requests. If you already use the
    <code class="literal">.local</code> domain in your name server configuration, you
    must switch this option off in <code class="filename">/etc/host.conf</code>. For
    more information, see the <code class="filename">host.conf</code> man page.
   </p><p>
    To switch off MDNS during installation, use <code class="literal">nomdns=1</code> as
    a boot parameter.
   </p><p>
    For more information on multicast DNS, see
    <a class="link" href="http://www.multicastdns.org" target="_blank">http://www.multicastdns.org</a>.
   </p></div></section><section class="sect1" id="sec-network-yast" data-id-title="Configuring a network connection with YaST"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23.4 </span><span class="title-name">Configuring a network connection with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  There are many supported networking types on Linux. Most of them use
  different device names and the configuration files are spread over several
  locations in the file system. For a detailed overview of the aspects of
  manual network configuration, see <a class="xref" href="#sec-network-manconf" title="23.5. Configuring a network connection manually">Section 23.5, “Configuring a network connection manually”</a>.
 </p><p>
  <span class="phrase">All network interfaces with link
  up (with a network cable connected) are automatically configured.</span>
  Additional hardware can be configured any time on the installed system. The
  following sections describe the network configuration for all types of
  network connections supported by <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
 </p><div id="id-1.3.5.5.16.5" data-id-title="IBM Z: hotpluggable network cards" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: IBM Z: hotpluggable network cards</div><p>
   On IBM Z platforms, hotpluggable network cards are supported, but
   not their automatic network integration via DHCP (as is the case on the PC).
   After they have been detected, you need to manually configure the interface.
  </p></div><section class="sect2" id="sec-network-yast-netcard" data-id-title="Configuring the network card with YaST"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.4.1 </span><span class="title-name">Configuring the network card with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-netcard">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To configure your Ethernet or Wi-Fi/Bluetooth card in YaST, select
   <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span>. After starting the module, YaST displays the
   <span class="guimenu">Network Settings</span> dialog with four tabs: <span class="guimenu">Global
   Options</span>, <span class="guimenu">Overview</span>,
   <span class="guimenu">Hostname/DNS</span> and <span class="guimenu">Routing</span>.
  </p><p>
   The <span class="guimenu">Global Options</span> tab allows you to set general
   networking options such as the network setup method, IPv6, and general DHCP
   options. For more information, see
   <a class="xref" href="#sec-network-yast-netcard-global" title="23.4.1.1. Configuring global networking options">Section 23.4.1.1, “Configuring global networking options”</a>.
  </p><p>
   The <span class="guimenu">Overview</span> tab contains information about installed
   network interfaces and configurations. Any properly detected network card is
   listed with its name. You can manually configure new cards, remove or change
   their configuration in this dialog. To manually configure a card
   that was not automatically detected, see
   <a class="xref" href="#sec-network-yast-netcard-man" title="23.4.1.3. Configuring an undetected network card">Section 23.4.1.3, “Configuring an undetected network card”</a>. To change the
   configuration of an already configured card, see
   <a class="xref" href="#sec-network-yast-netcard-change" title="23.4.1.2. Changing the configuration of a network card">Section 23.4.1.2, “Changing the configuration of a network card”</a>.
  </p><p>
   The <span class="guimenu">Hostname/DNS</span> tab allows to set the host name of the
   machine and name the servers to be used. For more information, see
   <a class="xref" href="#sec-network-yast-change-host" title="23.4.1.4. Configuring host name and DNS">Section 23.4.1.4, “Configuring host name and DNS”</a>.
  </p><p>
   The <span class="guimenu">Routing</span> tab is used for the configuration of routing.
   See <a class="xref" href="#sec-network-yast-change-route" title="23.4.1.5. Configuring routing">Section 23.4.1.5, “Configuring routing”</a> for more information.
  </p><div class="figure" id="fig-yast2-neticard"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_net_icard.png"><img src="images/yast2_net_icard.png" width="75%" alt="Configuring network settings" title="Configuring network settings"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 23.3: </span><span class="title-name">Configuring network settings </span></span><a title="Permalink" class="permalink" href="#fig-yast2-neticard">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div><section class="sect3" id="sec-network-yast-netcard-global" data-id-title="Configuring global networking options"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.4.1.1 </span><span class="title-name">Configuring global networking options</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-netcard-global">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <span class="guimenu">Global Options</span> tab of the YaST <span class="guimenu">Network
    Settings</span> module allows you to set important global networking
    options, such as the use of NetworkManager, IPv6 and DHCP client options. These
    settings are applicable for all network interfaces.
   </p><div id="id-1.3.5.5.16.6.8.3" data-id-title="NetworkManager provided by workstation extension" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: NetworkManager provided by workstation extension</div><p>
     NetworkManager is now provided by the SUSE Linux Enterprise Workstation Extension. To install NetworkManager, activate the
     Workstation Extension repository, and select the NetworkManager packages.
    </p></div><p>
    In the <span class="guimenu">Network Setup Method</span> choose the way network
    connections are managed. If you want a NetworkManager desktop applet to manage
    connections for all interfaces, choose <span class="guimenu">NetworkManager Service</span>.
    NetworkManager is well suited for switching between multiple wired and wireless
    networks. If you do not run a desktop environment, or if your computer is a
    Xen server, virtual system, or provides network services such as DHCP or
    DNS in your network, use the <span class="guimenu">Wicked Service</span> method. If
    NetworkManager is used, <code class="command">nm-applet</code> should be used to configure
    network options and the <span class="guimenu">Overview</span>,
    <span class="guimenu">Hostname/DNS</span> and <span class="guimenu">Routing</span> tabs of the
    <span class="guimenu">Network Settings</span> module are disabled.
     <span class="phrase">For more information
    on NetworkManager, see the SUSE Linux Enterprise Desktop documentation.</span>
   </p><p>
    In the <span class="guimenu">IPv6 Protocol Settings</span> choose whether to use the
    IPv6 protocol. It is possible to use IPv6 together with IPv4. By default,
    IPv6 is enabled. However, in networks not using IPv6 protocol, response
    times can be faster with IPv6 protocol disabled. To disable IPv6,
    deactivate <span class="guimenu">Enable IPv6</span>. If IPv6 is disabled, the kernel
    no longer loads the IPv6 module automatically. This setting will be applied
    after reboot.
   </p><p>
    In the <span class="guimenu">DHCP Client Options</span> configure options for the
    DHCP client.


    The <span class="guimenu">DHCP Client Identifier</span> must be different for each
    DHCP client on a single network. If left empty, it defaults to the hardware
    address of the network interface. However, if you are running several
    virtual machines using the same network interface and, therefore, the same
    hardware address, specify a unique free-form identifier here.
   </p><p>
    The <span class="guimenu">Hostname to Send</span> specifies a string used for the
    host name option field when the DHCP client sends messages to DHCP server.
    Some DHCP servers update name server zones (forward and reverse records)
    according to this host name (Dynamic DNS). Also, some DHCP servers require
    the <span class="guimenu">Hostname to Send</span> option field to contain a specific
    string in the DHCP messages from clients. Leave <code class="literal">AUTO</code> to
    send the current host name (that is the one defined in
    <code class="filename">/etc/HOSTNAME</code>). Make the option field empty for not
    sending any host name.
   </p><p>
    If you do not want to change the default route according to the information
    from DHCP, deactivate <span class="guimenu">Change Default Route via DHCP</span>.
   </p></section><section class="sect3" id="sec-network-yast-netcard-change" data-id-title="Changing the configuration of a network card"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.4.1.2 </span><span class="title-name">Changing the configuration of a network card</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-netcard-change">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To change the configuration of a network card, select a card from the list
    of the detected cards in <span class="guimenu">Network Settings</span> › <span class="guimenu">Overview</span> in YaST and click
    <span class="guimenu">Edit</span>. The <span class="guimenu">Network Card Setup</span> dialog
    appears in which to adjust the card configuration using the
    <span class="guimenu">General</span>, <span class="guimenu">Address</span> and
    <span class="guimenu">Hardware</span> tabs.
   </p><section class="sect4" id="sec-network-yast-change-address" data-id-title="Configuring IP addresses"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">23.4.1.2.1 </span><span class="title-name">Configuring IP addresses</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-change-address">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     You can set the IP address of the network card or the way its IP address
     is determined in the <span class="guimenu">Address</span> tab of the
     <span class="guimenu">Network Card Setup</span> dialog. Both IPv4 and IPv6 addresses
     are supported. The network card can have <span class="guimenu">No IP Address</span>
     (which is useful for bonding devices), a <span class="guimenu">Statically Assigned IP
     Address</span> (IPv4 or IPv6) or a <span class="guimenu">Dynamic Address</span>
     assigned via <span class="guimenu">DHCP</span> or <span class="guimenu">Zeroconf</span> or
     both.
    </p><p>
     If using <span class="guimenu">Dynamic Address</span>, select whether to use
     <span class="guimenu">DHCP Version 4 Only</span> (for IPv4), <span class="guimenu">DHCP Version 6
     Only</span> (for IPv6) or <span class="guimenu">DHCP Both Version 4 and 6</span>.
    </p><p>
     If possible, the first network card with link that is available during the
     installation is automatically configured to use automatic address setup
     via DHCP. 
    </p><div id="id-1.3.5.5.16.6.9.3.5" data-id-title="IBM Z and DHCP" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: IBM Z and DHCP</div><p>
      On IBM Z platforms, DHCP-based address configuration is only
      supported with network cards that have a MAC address. This is only the
      case with OSA and OSA Express cards.
     </p></div><p>
     DHCP should also be used if you are using a DSL line but with no static IP
     assigned by the ISP (Internet Service Provider). If you decide to use
     DHCP, configure the details in <span class="guimenu">DHCP Client Options</span> in
     the <span class="guimenu">Global Options</span> tab of the <span class="guimenu">Network
     Settings</span> dialog of the YaST network card configuration module.
     If you have a virtual host setup where different hosts communicate through
     the same interface, an <span class="guimenu">DHCP Client Identifier</span> is
     necessary to distinguish them.
    </p><p>
     DHCP is a good choice for client configuration but it is not ideal for
     server configuration. To set a static IP address, proceed as follows:
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       Select a card from the list of detected cards in the
       <span class="guimenu">Overview</span> tab of the YaST network card configuration
       module and click <span class="guimenu">Edit</span>.
      </p></li><li class="step"><p>
       In the <span class="guimenu">Address</span> tab, choose <span class="guimenu">Statically
       Assigned IP Address</span>.
      </p></li><li class="step"><p>
       Enter the <span class="guimenu">IP Address</span>. Both IPv4 and IPv6 addresses
       can be used. Enter the network mask in <span class="guimenu">Subnet Mask</span>.
       If the IPv6 address is used, use <span class="guimenu">Subnet Mask</span> for
       prefix length in format <code class="literal">/64</code>.
      </p><p>
       Optionally, you can enter a fully qualified <span class="guimenu">Hostname</span>
       for this address, which will be written to the
       <code class="filename">/etc/hosts</code> configuration file.
      </p></li><li class="step"><p>
       Click <span class="guimenu">Next</span>.
      </p></li><li class="step"><p>
       To activate the configuration, click <span class="guimenu">OK</span>.
      </p></li></ol></div></div><div id="id-1.3.5.5.16.6.9.3.9" data-id-title="Interface activation and link detection" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Interface activation and link detection</div><p>
      During activation of a network interface, <code class="command">wicked</code>
      checks for a carrier and only applies the IP configuration when a link
      has been detected. If you need to apply the configuration regardless of
      the link status (for example, when you want to test a service listening to a
      certain address), you can skip link detection by adding the variable
      <code class="literal">LINK_REQUIRED=no</code> to the configuration file of the
      interface in <code class="filename">/etc/sysconfig/network/ifcfg</code>.
     </p><p>
      Additionally, you can use the variable
      <code class="literal">LINK_READY_WAIT=<em class="replaceable">5</em></code> to
      specify the timeout for waiting for a link in seconds.
     </p><p>
      For more information about the <code class="filename">ifcfg-*</code> configuration
      files, refer to <a class="xref" href="#sec-network-manconf-files-ifcfg" title="23.5.2.5. /etc/sysconfig/network/ifcfg-*">Section 23.5.2.5, “<code class="filename">/etc/sysconfig/network/ifcfg-*</code>”</a> and
      <code class="command">man 5 ifcfg</code>.
     </p></div><p>
     If you use the static address, the name servers and default gateway are
     not configured automatically. To configure name servers, proceed as
     described in <a class="xref" href="#sec-network-yast-change-host" title="23.4.1.4. Configuring host name and DNS">Section 23.4.1.4, “Configuring host name and DNS”</a>. To configure
     a gateway, proceed as described in
     <a class="xref" href="#sec-network-yast-change-route" title="23.4.1.5. Configuring routing">Section 23.4.1.5, “Configuring routing”</a>.
    </p></section><section class="sect4" id="sec-network-yast-configure-addresses" data-id-title="Configuring multiple addresses"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">23.4.1.2.2 </span><span class="title-name">Configuring multiple addresses</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-configure-addresses">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     A single network device can have multiple IP addresses called aliases or labels.
    </p><div id="id-1.3.5.5.16.6.9.4.3" data-id-title="Aliases are a compatibility feature" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Aliases are a compatibility feature</div><p>
      Aliases or labels work with IPv4 only. Using <code class="command">iproute2</code> network interfaces makes it possible to have one or more addresses.
     </p></div><p>
     To set additional addresses for your network card using YaST, proceed as
     follows:
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       Select a card from the list of detected cards in the
       <span class="guimenu">Overview</span> tab of the YaST <span class="guimenu">Network
       Settings</span> dialog and click <span class="guimenu">Edit</span>.
      </p></li><li class="step"><p>
       In the <span class="guimenu">Address</span> › <span class="guimenu">Additional
       Addresses</span> tab, click <span class="guimenu">Add</span>.
      </p></li><li class="step"><p>
       Enter <span class="guimenu">IPv4 Address Label</span>, <span class="guimenu">IP
       Address</span>, and <span class="guimenu">Netmask</span>. Note that IP aliases must be added with the <code class="literal">/32</code> netmask. Do not include the
       interface name in the alias name.
      </p></li><li class="step"><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div></section><section class="sect4" id="sec-network-yast-change-udev" data-id-title="Changing the device name and udev rules"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">23.4.1.2.3 </span><span class="title-name">Changing the device name and udev rules</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-change-udev">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     It is possible to change the device name of the network card when it is
     used. It is also possible to determine whether the network card should be
     identified by udev via its hardware (MAC) address or via the bus ID. The
     latter option is preferable in large servers to simplify hotplugging of
     cards. To set these options with YaST, proceed as follows:
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       Select a card from the list of detected cards in the
       <span class="guimenu">Overview</span> tab of the YaST <span class="guimenu">Network
       Settings</span> dialog and click <span class="guimenu">Edit</span>.
      </p></li><li class="step"><p>
       Go to the <span class="guimenu">General</span> tab. The current device name is
       shown in <span class="guimenu">Udev Rules</span>. Click <span class="guimenu">Change</span>.
      </p></li><li class="step"><p>
       Select whether udev should identify the card by its <span class="guimenu">MAC
       Address</span> or <span class="guimenu">Bus ID</span>. The current MAC address
       and bus ID of the card are shown in the dialog.
      </p></li><li class="step"><p>
       To change the device name, check the <span class="guimenu">Change Device
       Name</span> option and edit the name.
      </p></li><li class="step"><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div></section><section class="sect4" id="sec-network-yast-change-driver" data-id-title="Changing network card kernel driver"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">23.4.1.2.4 </span><span class="title-name">Changing network card kernel driver</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-change-driver">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     For some network cards, several kernel drivers may be available. If the
     card is already configured, YaST allows you to select a kernel driver to
     be used from a list of available suitable drivers. It is also possible to
     specify options for the kernel driver. To set these options with YaST,
     proceed as follows:
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       Select a card from the list of detected cards in the
       <span class="guimenu">Overview</span> tab of the YaST Network Settings module
       and click <span class="guimenu">Edit</span>.
      </p></li><li class="step"><p>
       Go to the <span class="guimenu">Hardware</span> tab.
      </p></li><li class="step"><p>
       Select the kernel driver to be used in <span class="guimenu">Module Name</span>.
       Enter any options for the selected driver in <span class="guimenu">Options</span>
       in the form

       <code class="command">=</code> =<em class="replaceable">VALUE</em>. If more options
       are used, they should be space-separated.
      </p></li><li class="step"><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div></section><section class="sect4" id="sec-network-yast-change-start" data-id-title="Activating the network device"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">23.4.1.2.5 </span><span class="title-name">Activating the network device</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-change-start">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     If you use the method with <code class="command">wicked</code>, you can configure
     your device to either start during boot, on cable connection, on card
     detection, manually, or never. To change device start-up, proceed as
     follows:
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       In YaST select a card from the list of detected cards in <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span> and click <span class="guimenu">Edit</span>.
      </p></li><li class="step"><p>
       In the <span class="guimenu">General</span> tab, select the desired entry from
       <span class="guimenu">Device Activation</span>.
      </p><p>
       Choose <span class="guimenu">At Boot Time</span> to start the device during the
       system boot. With <span class="guimenu">On Cable Connection</span>, the interface
       is watched for any existing physical connection. With <span class="guimenu">On
       Hotplug</span>, the interface is set when available. It is similar to
       the <span class="guimenu">At Boot Time</span> option, and only differs in that no
       error occurs if the interface is not present at boot time. Choose
       <span class="guimenu">Manually</span> to control the interface manually with
       <code class="command">ifup</code>. Choose <span class="guimenu">Never</span> to not start
       the device. The <span class="guimenu">On NFSroot</span> is similar to <span class="guimenu">At
       Boot Time</span>, but the interface does not shut down with the
       <code class="command">systemctl stop network</code> command; the
       <code class="option">network</code> service also cares about the
       <code class="option">wicked</code> service if <code class="command">wicked</code> is active.
       Use this if you use an NFS or iSCSI root file system.
      </p></li><li class="step"><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div><div id="id-1.3.5.5.16.6.9.7.4" data-id-title="NFS as a root file system" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: NFS as a root file system</div><p>
      On (diskless) systems where the root partition is mounted via network as
      an NFS share, you need to be careful when configuring the network device
      with which the NFS share is accessible.
     </p><p>
      When shutting down or rebooting the system, the default processing order
      is to turn off network connections, then unmount the root partition. With
      NFS root, this order causes problems as the root partition cannot be
      cleanly unmounted as the network connection to the NFS share is already
      not activated. To prevent the system from deactivating the relevant
      network device, open the network device configuration tab as described in
      <a class="xref" href="#sec-network-yast-change-start" title="23.4.1.2.5. Activating the network device">Section 23.4.1.2.5, “Activating the network device”</a> and choose <span class="guimenu">On
      NFSroot</span> in the <span class="guimenu">Device Activation</span> pane.
     </p></div></section><section class="sect4" id="sec-network-yast-change-mtu" data-id-title="Setting up maximum transfer unit size"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">23.4.1.2.6 </span><span class="title-name">Setting up maximum transfer unit size</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-change-mtu">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     You can set a maximum transmission unit (MTU) for the interface. MTU
     refers to the largest allowed packet size in bytes. A higher MTU brings
     higher bandwidth efficiency. However, large packets can block up a slow
     interface for some time, increasing the lag for further packets.
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       In YaST select a card from the list of detected cards in <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span> and click <span class="guimenu">Edit</span>.
      </p></li><li class="step"><p>
       In the <span class="guimenu">General</span> tab, select the desired entry from the
       <span class="guimenu">Set MTU</span> list.
      </p></li><li class="step"><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div></section><section class="sect4" id="sec-network-yast-change-pciemulti" data-id-title="PCIe multifunction devices"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">23.4.1.2.7 </span><span class="title-name">PCIe multifunction devices</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-change-pciemulti">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Multifunction devices that support LAN, iSCSI, and FCoE are supported.
     The YaST FCoE client (<code class="command">yast2 fcoe-client</code>) shows the
     private flags in additional columns to allow the user to select the device
     meant for FCoE. The YaST network module (<code class="command">yast2 lan</code>)
     excludes <span class="quote">“<span class="quote">storage only devices</span>”</span> for network configuration.
    </p><p>
     For more information about FCoE, see <span class="intraxref">Book “Storage Administration Guide”, Chapter 16 “Fibre Channel storage over Ethernet networks: FCoE”, Section 16.3 “Managing FCoE services with YaST”</span>.
    </p></section><section class="sect4" id="sec-network-yast-change-infiniband" data-id-title="Infiniband configuration for IP-over-InfiniBand (IPoIB)"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">23.4.1.2.8 </span><span class="title-name">Infiniband configuration for IP-over-InfiniBand (IPoIB)</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-change-infiniband">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       In YaST select the InfiniBand device in <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span> and click <span class="guimenu">Edit</span>.
      </p></li><li class="step"><p>
       In the <span class="guimenu">General</span> tab, select one of the
       <span class="guimenu">IP-over-InfiniBand</span> (IPoIB) modes:
       <span class="guimenu">connected</span> (default) or <span class="guimenu">datagram</span>.
      </p></li><li class="step"><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div><p>
     For more information about InfiniBand, see
     <code class="filename">/usr/src/linux/Documentation/infiniband/ipoib.txt</code>.
    </p></section><section class="sect4" id="sec-network-yast-change-fire" data-id-title="Configuring the firewall"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">23.4.1.2.9 </span><span class="title-name">Configuring the firewall</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-change-fire">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Without having to perform the detailed firewall setup as described in
     <span class="intraxref">Book “Security and Hardening Guide”, Chapter 23 “Masquerading and firewalls”, Section 23.4 “<code class="systemitem">firewalld</code>”</span>, you can determine the
     basic firewall configuration for your device as part of the device setup.
     Proceed as follows:
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       Open the YaST <span class="guimenu">System</span> › <span class="guimenu">Network
       Settings</span> module. In the
       <span class="guimenu">Overview</span> tab, select a card from the list of detected
       cards and click <span class="guimenu">Edit</span>.
      </p></li><li class="step"><p>
       Enter the <span class="guimenu">General</span> tab of the <span class="guimenu">Network
       Settings</span> dialog.
      </p></li><li class="step"><p>
       Determine the <span class="guimenu">Firewall Zone</span> to which your interface
       should be assigned. The following options are available:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.16.6.9.11.3.3.2.1"><span class="term">Firewall disabled</span></dt><dd><p>
          This option is available only if the firewall is disabled and the
          firewall does not run. Only use this option if your machine is part
          of a greater network that is protected by an outer firewall.
         </p></dd><dt id="id-1.3.5.5.16.6.9.11.3.3.2.2"><span class="term">Automatically assign zone</span></dt><dd><p>
          This option is available only if the firewall is enabled. The
          firewall is running and the interface is automatically assigned to a
          firewall zone. The zone which contains the keyword
          <code class="literal">any</code> or the external zone will be used for such an
          interface.
         </p></dd><dt id="id-1.3.5.5.16.6.9.11.3.3.2.3"><span class="term">Internal zone (unprotected)</span></dt><dd><p>
          The firewall is running, but does not enforce any rules to protect
          this interface. Use this option if your machine is part of a greater
          network that is protected by an outer firewall. It is also useful for
          the interfaces connected to the internal network, when the machine
          has more network interfaces.
         </p></dd><dt id="id-1.3.5.5.16.6.9.11.3.3.2.4"><span class="term">Demilitarized zone</span></dt><dd><p>
          A demilitarized zone is an additional line of defense in front of an
          internal network and the (hostile) Internet. Hosts assigned to this
          zone can be reached from the internal network and from the Internet,
          but cannot access the internal network.
         </p></dd><dt id="id-1.3.5.5.16.6.9.11.3.3.2.5"><span class="term">External zone</span></dt><dd><p>
          The firewall is running on this interface and fully protects it
          against other—presumably hostile—network traffic. This is
          the default option.
         </p></dd></dl></div></li><li class="step"><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div></section></section><section class="sect3" id="sec-network-yast-netcard-man" data-id-title="Configuring an undetected network card"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.4.1.3 </span><span class="title-name">Configuring an undetected network card</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-netcard-man">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If a network card is not detected correctly, the card is not included in
    the list of detected cards. If you are sure that your system includes a
    driver for your card, you can configure it manually. You can also configure
    special network device types, such as bridge, bond, TUN or TAP. To
    configure an undetected network card (or a special device) proceed as
    follows:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      In the <span class="guimenu">System</span> › <span class="guimenu">Network
      Settings</span> › <span class="guimenu">Overview</span> dialog in
      YaST click <span class="guimenu">Add</span>.
     </p></li><li class="step"><p>
      In the <span class="guimenu">Hardware</span> dialog, set the <span class="guimenu">Device
      Type</span> of the interface from the available options and
      <span class="guimenu">Configuration Name</span>. If the network card is a
      USB device, activate the respective check box and exit this dialog with
      <span class="guimenu">Next</span>. Otherwise, you can define the kernel
      <span class="guimenu">Module Name</span> to be used for the card and its
      <span class="guimenu">Options</span>, if necessary.
     </p><p>
      In <span class="guimenu">Ethtool Options</span>, you can set
      <code class="command">ethtool</code> options used by <code class="command">ifup</code> for
      the interface. For information about available options, see the
      <code class="command">ethtool</code> manual page.
     </p><p>
      If the option string starts with a
      <code class="literal">-</code> (for example, <code class="literal">-K
      <em class="replaceable">INTERFACE_NAME</em> rx on</code>), the second
      word in the string is replaced with the current interface name. Otherwise
      (for example, <code class="literal">autoneg off speed 10</code>)
      <code class="command">ifup</code> adds <code class="literal">-s
      <em class="replaceable">INTERFACE_NAME</em></code> to the beginning.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Next</span>.
     </p></li><li class="step"><p>
      Configure any needed options, such as the IP address, device activation
      or firewall zone for the interface in the <span class="guimenu">General</span>,
      <span class="guimenu">Address</span>, and <span class="guimenu">Hardware</span> tabs. For
      more information about the configuration options, see
      <a class="xref" href="#sec-network-yast-netcard-change" title="23.4.1.2. Changing the configuration of a network card">Section 23.4.1.2, “Changing the configuration of a network card”</a>.
     </p></li><li class="step"><p>
      If you selected <span class="guimenu">Wireless</span> as the device type of the
      interface, configure the wireless connection in the next dialog.
     </p></li><li class="step"><p>
      To activate the new network configuration, confirm the settings.
     </p></li></ol></div></div></section><section class="sect3" id="sec-network-yast-change-host" data-id-title="Configuring host name and DNS"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.4.1.4 </span><span class="title-name">Configuring host name and DNS</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-change-host">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you did not change the network configuration during installation and the
    Ethernet card was already available, a host name was automatically
    generated for your computer and DHCP was activated. The same applies to the
    name service information your host needs to integrate into a network
    environment. If DHCP is used for network address setup, the list of domain
    name servers is automatically filled with the appropriate data. If a static
    setup is preferred, set these values manually.
   </p><p>
    To change the name of your computer and adjust the name server search list,
    proceed as follows:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Go to the <span class="guimenu">Network Settings</span> › <span class="guimenu">Hostname/DNS</span> tab in the
      <span class="guimenu">System</span> module in YaST.
     </p></li><li class="step"><p>
      Enter the <span class="guimenu">Hostname</span>. Note that the host name is global 
      and applies to all network interfaces.
     </p><p>
      If you are using DHCP to get an IP address, the host name of your
      computer will be automatically set by the DHCP server. You should disable this
      behavior if you connect to different networks, because they may assign
      different host names and changing the host name at runtime may confuse
      the graphical desktop. To disable using DHCP to get an IP address
      deactivate <span class="guimenu">Change Hostname via DHCP</span>.
     </p></li><li class="step"><p>
      In <span class="guimenu">Modify DNS Configuration</span>, select the way the DNS
      configuration (name servers, search list, the content of the
      <code class="filename">/run/netconfig/resolv.conf</code> file) is modified.
     </p><p>
      If the <span class="guimenu">Use Default Policy</span> option is selected, the
      configuration is handled by the <code class="command">netconfig</code> script which
      merges the data defined statically (with YaST or in the configuration
      files) with data obtained dynamically (from the DHCP client or
      NetworkManager). This default policy is usually sufficient.
     </p><p>
      If the <span class="guimenu">Only Manually</span> option is selected,
      <code class="command">netconfig</code> is not allowed to modify the
      <code class="filename">/run/netconfig/resolv.conf</code> file. However, this file can be
      edited manually.
     </p><p>
      If the <span class="guimenu">Custom Policy</span> option is selected, a
      <span class="guimenu">Custom Policy Rule</span> string defining the merge policy
      should be specified. The string consists of a comma-separated list of
      interface names to be considered a valid source of settings. Except for
      complete interface names, basic wild cards to match multiple interfaces
      are allowed, as well. For example, <code class="literal">eth* ppp?</code> will
      first target all eth and then all ppp0-ppp9 interfaces. There are two
      special policy values that indicate how to apply the static settings
      defined in the <code class="filename">/etc/sysconfig/network/config</code> file:
     </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.16.6.11.4.3.5.1"><span class="term"><code class="literal">STATIC</code>
       </span></dt><dd><p>
         The static settings need to be merged together with the dynamic
         settings.
        </p></dd><dt id="id-1.3.5.5.16.6.11.4.3.5.2"><span class="term"><code class="literal">STATIC_FALLBACK</code>
       </span></dt><dd><p>
         The static settings are used only when no dynamic configuration is
         available.
        </p></dd></dl></div><p>
      For more information, see the man page of <code class="command">netconfig</code>(8)
      (<code class="command">man 8 netconfig</code>).
     </p></li><li class="step"><p>
      Enter the <span class="guimenu">Name Servers</span> and fill in the <span class="guimenu">Domain
      Search</span> list. Name servers must be specified by IP addresses,
      such as 192.168.1.116, not by host names. Names specified in the
      <span class="guimenu">Domain Search</span> tab are domain names used for resolving
      host names without a specified domain. If more than one <span class="guimenu">Domain
      Search</span> is used, separate domains with commas or white space.
     </p></li><li class="step"><p>
      To activate the configuration, confirm the settings.
     </p></li></ol></div></div><p>
    It is also possible to edit the host name using YaST from the command
    line. The changes made by YaST take effect immediately (which is not the
    case when editing the <code class="filename">/etc/HOSTNAME</code> file manually). To
    change the host name, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>yast dns edit hostname=<em class="replaceable">HOSTNAME</em></pre></div><p>
    To change the name servers, use the following commands:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>yast dns edit nameserver1=192.168.1.116
<code class="prompt root"># </code>yast dns edit nameserver2=192.168.1.117
<code class="prompt root"># </code>yast dns edit nameserver3=192.168.1.118</pre></div></section><section class="sect3" id="sec-network-yast-change-route" data-id-title="Configuring routing"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.4.1.5 </span><span class="title-name">Configuring routing</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-change-route">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_yast.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To make your machine communicate with other machines and other networks,
    routing information must be given to make network traffic take the correct
    path. If DHCP is used, this information is automatically provided. If a
    static setup is used, this data must be added manually.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      In YaST go to <span class="guimenu">Network Settings</span> › <span class="guimenu">Routing</span>.
     </p></li><li class="step"><p>
      Enter the IP address of the <span class="guimenu">Default Gateway</span> (IPv4 and
      IPv6 if necessary). The default gateway matches every possible
      destination, but if a routing table entry exists that matches the
      required address, this will be used instead of the default route via the
      Default Gateway.
     </p></li><li class="step"><p>
      More entries can be entered in the <span class="guimenu">Routing Table</span>.
      Enter the <span class="guimenu">Destination</span> network IP address,
      <span class="guimenu">Gateway</span> IP address and the <span class="guimenu">Netmask</span>.
      Select the <span class="guimenu">Device</span> through which the traffic to the
      defined network will be routed (the minus sign stands for any device).
      
      To omit any of these values, use the minus sign <code class="literal">-</code>. To
      enter a default gateway into the table, use <code class="literal">default</code> in
      the <span class="guimenu">Destination</span> field.
     </p><div id="id-1.3.5.5.16.6.12.3.3.2" data-id-title="Route prioritization" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Route prioritization</div><p>
       If more default routes are used, it is possible to specify the metric
       option to determine which route has a higher priority. To specify the
       metric option, enter <code class="option">- metric
       <em class="replaceable">NUMBER</em></code> in <span class="guimenu">Options</span>.
       The lowest possible metric is 0. The route with the lowest metric has the
       highest priority and is used as default. If the network device is
       disconnected, its route will be removed and the next one will be used.
      </p></div></li><li class="step"><p>
      If the system is a router, enable <span class="guimenu">IPv4 Forwarding</span> and
      <span class="guimenu">IPv6 Forwarding</span> in the <span class="guimenu">Network
      Settings</span> as needed.
     </p></li><li class="step"><p>
      To activate the configuration, confirm the settings.
     </p></li></ol></div></div></section></section><section class="sect2" id="sec-network-yast-s390" data-id-title="IBM Z: configuring network devices"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.4.2 </span><span class="title-name">IBM Z: configuring network devices</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-s390">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zseries_net_lan_devices.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> for IBM Z supports several types of network interfaces.
  YaST can be used to configure all of them.
 </p><section class="sect3" id="sec-network-yast-s390-hsi" data-id-title="The qeth-hsi device"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.4.2.1 </span><span class="title-name">The qeth-hsi device</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-s390-hsi">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zseries_net_lan_devices.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To add a <code class="literal">qeth-hsi</code> (HiperSockets) interface to the
   installed system, start the <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span> module in YaST. Select
   one of the devices marked <span class="guimenu">Hipersocket</span> to use as the READ
   device address and click <span class="guimenu">Edit</span>. Enter the device numbers
   for the read, write and control channels (example device number format:
   <code class="literal">0.0.0800</code>). Then click next. In the <span class="guimenu">Network
   Address Setup</span> dialog, specify the IP address and netmask for the
   new interface and leave the network configuration by clicking
   <span class="guimenu">Next</span> and <span class="guimenu">OK</span>.
  </p></section><section class="sect3" id="sec-network-yast-s390-eth" data-id-title="The qeth-ethernet device"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.4.2.2 </span><span class="title-name">The qeth-ethernet device</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-s390-eth">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zseries_net_lan_devices.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To add a <code class="literal">qeth-ethernet</code> (IBM OSA Express Ethernet Card)
   interface to the installed system, start the <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span>
   module in YaST. Select one of the devices marked <span class="guimenu">IBM OSA Express
   Ethernet Card</span> to use as the READ device address and click
   <span class="guimenu">Edit</span>. Enter a device number for the read, write and
   control channels (example device number format:
   <code class="literal">0.0.0700</code>). Enter the needed port name, port number (if
   applicable) and some additional options, your IP address, and an appropriate
   netmask. Leave the network configuration with <span class="guimenu">Next</span> and
   <span class="guimenu">OK</span>.
  </p></section><section class="sect3" id="sec-network-yast-s390-ctc" data-id-title="The ctc device"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.4.2.3 </span><span class="title-name">The ctc device</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-s390-ctc">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zseries_net_lan_devices.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To add a <code class="literal">ctc</code> (IBM parallel CTC Adapter) interface to the
   installed system, start the <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span> module in YaST. Select
   one of the devices marked <span class="guimenu">IBM Parallel CTC Adapter</span> to use
   as your read channel and click <span class="guimenu">Configure</span>. Choose the
   <span class="guimenu">Device Settings</span> that fit your devices (usually this would
   be <span class="guimenu">Compatibility Mode</span>). Specify both your IP address and
   the IP address of the remote partner. If needed, adjust the MTU size with
   <span class="guimenu">Advanced</span> › <span class="guimenu">Detailed
   Settings</span>. Leave the network configuration with
   <span class="guimenu">Next</span> and <span class="guimenu">OK</span>.
  </p><div id="id-1.3.5.5.16.7.6.3" data-id-title="CTC is no longer supported" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: CTC is no longer supported</div><p>
    The use of this interface is deprecated. This interface will not be
    supported in future versions of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
   </p></div></section><section class="sect3" id="sec-network-yast-s390-lcs" data-id-title="The lcs device"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.4.2.4 </span><span class="title-name">The lcs device</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-s390-lcs">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zseries_net_lan_devices.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To add an <code class="literal">lcs</code> (IBM OSA-2 Adapter) interface to the
   installed system, start the <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span> module in YaST. Select
   one of the devices marked <span class="guimenu">IBM OSA-2 Adapter</span> and click
   <span class="guimenu">Configure</span>. Enter the needed port number, some additional
   options, your IP address and an appropriate netmask. Leave the network
   configuration with <span class="guimenu">Next</span> and <span class="guimenu">OK</span>.
  </p></section><section class="sect3" id="sec-network-yast-s390-iucv" data-id-title="The IUCV device"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.4.2.5 </span><span class="title-name">The IUCV device</span></span> <a title="Permalink" class="permalink" href="#sec-network-yast-s390-iucv">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zseries_net_lan_devices.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To add an <code class="literal">iucv</code> (IUCV) interface to the installed system,
   start the <span class="guimenu">System</span> › <span class="guimenu">Network
   Settings</span> module in YaST. Select a device marked
   <span class="guimenu">IUCV</span> and click <span class="guimenu">Edit</span>. YaST prompts
   you for the name of your IUCV partner (<span class="guimenu">Peer</span>). Enter the
   name (this entry is case-sensitive) and select <span class="guimenu">Next</span>.
   Specify both the <span class="guimenu">IP Address</span> and the <span class="guimenu">Remote IP
   Address</span> of your partner. If needed, <span class="guimenu">Set MTU</span>
   size on <span class="guimenu">General</span> tab. Leave the network configuration with
   <span class="guimenu">Next</span> and <span class="guimenu">OK</span>.
  </p><div id="id-1.3.5.5.16.7.8.3" data-id-title="IUCV is no longer supported" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: IUCV is no longer supported</div><p>
    The use of this interface is deprecated. This interface will not be
    supported in future versions of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
   </p></div></section></section></section><section class="sect1" id="sec-network-manconf" data-id-title="Configuring a network connection manually"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23.5 </span><span class="title-name">Configuring a network connection manually</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Manual configuration of the network software should be the last alternative.
  Using YaST is recommended. However, this background information about the
  network configuration can also assist your work with YaST.
 </p><section class="sect2" id="sec-network-manconf-wicked" data-id-title="The wicked network configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.5.1 </span><span class="title-name">The <code class="command">wicked</code> network configuration</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-wicked">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The tool and library called <code class="command">wicked</code> provides a new
   framework for network configuration.
  </p><p>
   One of the challenges with traditional network interface management is that
   different layers of network management get jumbled together into one single
   script, or at most two different scripts. These scripts interact with each other in a
   way that is not well defined. This leads to unpredictable issues, obscure
   constraints and conventions, etc. Several layers of special hacks for a variety of different scenarios increase the maintenance
   burden. Address configuration protocols are being used that are implemented
   via daemons like dhcpcd, which interact rather poorly with the rest of the
   infrastructure. Funky interface naming schemes that require heavy udev
   support are introduced to achieve persistent identification of interfaces.
  </p><p>
   The idea of wicked is to decompose the problem in several ways. None of them
   is entirely novel, but trying to put ideas from different projects together
   is hopefully going to create a better solution overall.
  </p><p>
   One approach is to use a client/server model. This allows wicked to define
   standardized facilities for things like address configuration that are well
   integrated with the overall framework. For example, using a specific address
   configuration, the administrator may request that an interface should be
   configured via DHCP or IPv4 zeroconf. In this case, the address configuration
   service simply obtains the lease from its server and passes it on to the
   wicked server process that installs the requested addresses and routes.
  </p><p>
   The other approach to decomposing the problem is to enforce the layering
   aspect. For any type of network interface, it is possible to define a dbus
   service that configures the network interface's device layer—a VLAN, a
   bridge, a bonding, or a paravirtualized device. Common functionality, such
   as address configuration, is implemented by joint services that are layered
   on top of these device specific services without having to implement them
   specifically.
  </p><p>
   The wicked framework implements these two aspects by using a variety of dbus
   services, which get attached to a network interface depending on its type.
   Here is a rough overview of the current object hierarchy in wicked.
  </p><p>
   Each network interface is represented via a child object of
   <code class="systemitem">/org/opensuse/Network/Interfaces</code>. The name of the
   child object is given by its ifindex. For example, the loopback interface,
   which usually gets ifindex 1, is
   <code class="systemitem">/org/opensuse/Network/Interfaces/1</code>, the first
   Ethernet interface registered is
   <code class="systemitem">/org/opensuse/Network/Interfaces/2</code>.
  </p><p>
   Each network interface has a <span class="quote">“<span class="quote">class</span>”</span> associated with it, which
   is used to select the dbus interfaces it supports. By default, each network
   interface is of class <code class="literal">netif</code>, and
   <code class="systemitem">wickedd</code> will automatically
   attach all interfaces compatible with this class. In the current
   implementation, this includes the following interfaces:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.17.4.10.1"><span class="term">org.opensuse.Network.Interface</span></dt><dd><p>
      Generic network interface functions, such as taking the link up or down,
      assigning an MTU, etc.
     </p></dd><dt id="id-1.3.5.5.17.4.10.2"><span class="term">org.opensuse.Network.Addrconf.ipv4.dhcp, </span><span class="term">org.opensuse.Network.Addrconf.ipv6.dhcp, </span><span class="term">org.opensuse.Network.Addrconf.ipv4.auto</span></dt><dd><p>
      Address configuration services for DHCP,

      IPv4 zeroconf, etc.
     </p></dd></dl></div><p>
   Beyond this, network interfaces may require or offer special configuration
   mechanisms. For an Ethernet device, for example, you should be able to
   control the link speed, offloading of checksumming, etc. To achieve this,
   Ethernet devices have a class of their own, called
   <code class="literal">netif-ethernet</code>, which is a subclass of
   <code class="literal">netif</code>. As a consequence, the dbus interfaces assigned to
   an Ethernet interface include all the services listed above, plus the
   <code class="systemitem">org.opensuse.Network.Ethernet</code> service available only to objects belonging to the <code class="literal">netif-ethernet</code>
   class.
  </p><p>
   Similarly, there exist classes for interface types like bridges, VLANs,
   bonds, or infinibands.
  </p><p>
   How do you interact with an interface like VLAN (which is really a virtual network interface that
   sits on top of an Ethernet device) that needs to be created
   first? For this, wicked defines factory
   interfaces, such as
   <code class="systemitem">org.opensuse.Network.VLAN.Factory</code>. Such a factory
   interface offers a single function that lets you create an interface of the
   requested type. These factory interfaces are attached to the
   <code class="systemitem">/org/opensuse/Network/Interfaces</code> list node.
  </p><section class="sect3" id="sec-network-manconf-supported" data-id-title="wicked architecture and features"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.1.1 </span><span class="title-name"><code class="literal">wicked</code> architecture and features</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-supported">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="literal">wicked</code> service comprises several parts as depicted
    in <a class="xref" href="#wicked-architecture" title="wicked architecture">Figure 23.4, “<code class="literal">wicked</code> architecture”</a>.
   </p><div class="figure" id="wicked-architecture"><div class="figure-contents"><div class="mediaobject"><a href="images/wicked_scheme.png"><img src="images/wicked_scheme.png" alt="wicked architecture" title="wicked architecture"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 23.4: </span><span class="title-name"><code class="literal">wicked</code> architecture </span></span><a title="Permalink" class="permalink" href="#wicked-architecture">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div><p>
    <code class="literal">wicked</code> currently supports the following:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Configuration file back-ends to parse SUSE style
      <code class="filename">/etc/sysconfig/network</code> files.
     </p></li><li class="listitem"><p>
      An internal configuration back-end to represent network interface
      configuration in XML.


     </p></li><li class="listitem"><p>
      Bring up and shutdown of <span class="quote">“<span class="quote">normal</span>”</span> network interfaces such as
      Ethernet or InfiniBand, VLAN, bridge, bonds, tun, tap, dummy, macvlan,
      macvtap, hsi, qeth, iucv, and wireless (currently limited to one
      wpa-psk/eap network) devices.
     </p></li><li class="listitem"><p>
      A built-in DHCPv4 client and a built-in DHCPv6 client.
     </p></li><li class="listitem"><p>
      The nanny daemon (enabled by default) helps to automatically bring up
      configured interfaces when the device is available (interface
      hotplugging) and set up the IP configuration when a link (carrier) is
      detected. See <a class="xref" href="#sec-network-manconf-using-nanny" title="23.5.1.3. Nanny">Section 23.5.1.3, “Nanny”</a> for more
      information.
     </p></li><li class="listitem"><p>
      <code class="literal">wicked</code> was implemented as a group of DBus services
      that are integrated with systemd. So the usual
      <code class="command">systemctl</code> commands will apply to
      <code class="literal">wicked</code>.
     </p></li></ul></div></section><section class="sect3" id="sec-network-manconf-using-wicked" data-id-title="Using wicked"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.1.2 </span><span class="title-name">Using <code class="literal">wicked</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-using-wicked">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    On SUSE Linux Enterprise, <code class="literal">wicked</code> runs by default. If you want to check
    what is currently enabled and whether it is running, call:
   </p><div class="verbatim-wrap"><pre class="screen">systemctl status network</pre></div><p>
    If <code class="literal">wicked</code> is enabled, you will see something along these
    lines:
   </p><div class="verbatim-wrap"><pre class="screen">wicked.service - wicked managed network interfaces
    Loaded: loaded (/usr/lib/systemd/system/wicked.service; enabled)
    ...</pre></div><p>
    In case something different is running (for example, NetworkManager) and you want to
    switch to <code class="literal">wicked</code>, first stop what is running and then
    enable <code class="literal">wicked</code>:
   </p><div class="verbatim-wrap"><pre class="screen">systemctl is-active network &amp;&amp; \
systemctl stop      network
systemctl enable --force wicked</pre></div><p>
    This enables the wicked services, creates the
    <code class="filename">network.service</code> to <code class="filename">wicked.service</code>
    alias link, and starts the network at the next boot.
   </p><p>
    Starting the server process:
   </p><div class="verbatim-wrap"><pre class="screen">systemctl start wickedd</pre></div><p>
    This starts <code class="command">wickedd</code> (the main server) and associated
    supplicants:
   </p><div class="verbatim-wrap"><pre class="screen">/usr/lib/wicked/bin/wickedd-auto4 --systemd --foreground
/usr/lib/wicked/bin/wickedd-dhcp4 --systemd --foreground
/usr/lib/wicked/bin/wickedd-dhcp6 --systemd --foreground
/usr/sbin/wickedd --systemd --foreground
/usr/sbin/wickedd-nanny --systemd --foreground</pre></div><p>
    Then bringing up the network:
   </p><div class="verbatim-wrap"><pre class="screen">systemctl start wicked</pre></div><p>
    Alternatively use the <code class="filename">network.service</code> alias:
   </p><div class="verbatim-wrap"><pre class="screen">systemctl start network</pre></div><p>
    These commands are using the default or system configuration sources as
    defined in <code class="filename">/etc/wicked/client.xml</code>.
   </p><p>
    To enable debugging, set <code class="literal">WICKED_DEBUG</code> in
    <code class="filename">/etc/sysconfig/network/config</code>, for example:
   </p><div class="verbatim-wrap"><pre class="screen">WICKED_DEBUG="all"</pre></div><p>
    Or, to omit some:
   </p><div class="verbatim-wrap"><pre class="screen">WICKED_DEBUG="all,-dbus,-objectmodel,-xpath,-xml"</pre></div><p>
    Use the client utility to display interface information for all interfaces
    or the interface specified with <em class="replaceable">IFNAME</em>:
   </p><div class="verbatim-wrap"><pre class="screen">wicked show all
wicked show <em class="replaceable">IFNAME</em></pre></div><p>
    In XML output:
   </p><div class="verbatim-wrap"><pre class="screen">wicked show-xml all
wicked show-xml <em class="replaceable">IFNAME</em></pre></div><p>
    Bringing up one interface:
   </p><div class="verbatim-wrap"><pre class="screen">wicked ifup eth0
wicked ifup wlan0
...</pre></div><p>
    Because there is no configuration source specified, the wicked client
    checks its default sources of configuration defined in
    <code class="filename">/etc/wicked/client.xml</code>:
   </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
      <code class="literal">firmware:</code> iSCSI Boot Firmware Table (iBFT)
     </p></li><li class="listitem"><p>
      <code class="literal">compat:</code> <code class="literal">ifcfg</code>
      files—implemented for compatibility
     </p></li></ol></div><p>
    Whatever <code class="literal">wicked</code> gets from those sources for a given
    interface is applied. The intended order of importance is
    <code class="literal">firmware</code>, then <code class="literal">compat</code>—this may
    be changed in the future.
   </p><p>
    For more information, see the <code class="command">wicked</code> man page.
   </p></section><section class="sect3" id="sec-network-manconf-using-nanny" data-id-title="Nanny"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.1.3 </span><span class="title-name">Nanny</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-using-nanny">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Nanny is an event and policy driven daemon that is responsible for
    asynchronous or unsolicited scenarios such as hotplugging devices. Thus the
    nanny daemon helps with starting or restarting delayed or temporarily gone
    devices. Nanny monitors device and link changes, and integrates new devices
    defined by the current policy set. Nanny continues to set up even if
    <code class="command">ifup</code> already exited because of specified timeout
    constraints.
   </p><p>
    By default, the nanny daemon is active on the system. It is enabled in the
    <code class="filename">/etc/wicked/common.xml</code> configuration file:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;config&gt;
  ...
  &lt;use-nanny&gt;true&lt;/use-nanny&gt;
&lt;/config&gt;</pre></div><p>
    This setting causes ifup and ifreload to apply a policy with the effective
    configuration to the nanny daemon; then, nanny configures
    <code class="systemitem">wickedd</code> and thus ensures
    hotplug support. It waits in the background for events or changes (such as
    new devices or carrier on).
   </p></section><section class="sect3" id="sec-network-manconf-multiple" data-id-title="Bringing up multiple interfaces"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.1.4 </span><span class="title-name">Bringing up multiple interfaces</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-multiple">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    For bonds and bridges, it may make sense to define the entire device
    topology in one file (ifcfg-bondX), and bring it up in one go. wicked then
    can bring up the whole configuration if you specify the top level interface
    names (of the bridge or bond):
   </p><div class="verbatim-wrap"><pre class="screen">wicked ifup br0</pre></div><p>
    This command automatically sets up the bridge and its dependencies in the
    appropriate order without the need to list the dependencies (ports, etc.)
    separately.
   </p><p>
    To bring up multiple interfaces in one command:
   </p><div class="verbatim-wrap"><pre class="screen">wicked ifup bond0 br0 br1 br2</pre></div><p>
    Or also all interfaces:
   </p><div class="verbatim-wrap"><pre class="screen">wicked ifup all</pre></div></section><section class="sect3" id="sec-network-manconf-tunnel" data-id-title="Using tunnels with Wicked"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.1.5 </span><span class="title-name">Using tunnels with Wicked</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-tunnel">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When you need to use tunnels with Wicked, the <code class="envar">TUNNEL_DEVICE</code>
    is used for this. It permits to specify an optional device name to bind
    the tunnel to the device. The tunneled packets will only be routed via this
    device.
   </p><p>
    For more information, refer to <code class="command">man 5 ifcfg-tunnel</code>.
   </p></section><section class="sect3" id="sec-network-manconf-incremental" data-id-title="Handling incremental changes"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.1.6 </span><span class="title-name">Handling incremental changes</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-incremental">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    With <code class="command">wicked</code>, there is no need to actually take down an
    interface to reconfigure it (unless it is required by the kernel). For
    example, to add another IP address or route to a statically configured
    network interface, add the IP address to the interface definition, and do
    another <span class="quote">“<span class="quote">ifup</span>”</span> operation. The server will try hard to update
    only those settings that have changed. This applies to link-level options
    such as the device MTU or the MAC address, and network-level settings, such
    as addresses, routes, or even the address configuration mode (for example,
    when moving from a static configuration to DHCP).
   </p><p>
    Things get tricky of course with virtual interfaces combining several real
    devices such as bridges or bonds. For bonded devices, it is not possible to
    change certain parameters while the device is up. Doing that will result in
    an error.
   </p><p>
    However, what should still work, is the act of adding or removing the child
    devices of a bond or bridge, or choosing a bond's primary interface.
   </p></section><section class="sect3" id="sec-network-manconf-address-config" data-id-title="Wicked extensions: address configuration"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.1.7 </span><span class="title-name">Wicked extensions: address configuration</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-address-config">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <code class="command">wicked</code> is designed to be extensible with shell scripts.
    These extensions can be defined in the <code class="filename">config.xml</code>
    file.
   </p><p>
    Currently, several classes of extensions are supported:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      link configuration: these are scripts responsible for setting up a
      device's link layer according to the configuration provided by the
      client, and for tearing it down again.
     </p></li><li class="listitem"><p>
      address configuration: these are scripts responsible for managing a
      device's address configuration. Usually address configuration and DHCP
      are managed by <code class="command">wicked</code> itself, but can be implemented
      by means of extensions.
     </p></li><li class="listitem"><p>
      firewall extension: these scripts can apply firewall rules.
     </p></li></ul></div><p>
    Typically, extensions have a start and a stop command, an optional
    <span class="quote">“<span class="quote">pid file</span>”</span>, and a set of environment variables that get passed
    to the script.
   </p><p>
    To illustrate how this is supposed to work, look at a firewall extension
    defined in <code class="filename">etc/server.xml</code>:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;dbus-service interface="org.opensuse.Network.Firewall"&gt;
 &lt;action name="firewallUp"   command="/etc/wicked/extensions/firewall up"/&gt;
 &lt;action name="firewallDown" command="/etc/wicked/extensions/firewall down"/&gt;

 &lt;!-- default environment for all calls to this extension script --&gt;
 &lt;putenv name="WICKED_OBJECT_PATH" value="$object-path"/&gt;
 &lt;putenv name="WICKED_INTERFACE_NAME" value="$property:name"/&gt;
 &lt;putenv name="WICKED_INTERFACE_INDEX" value="$property:index"/&gt;
&lt;/dbus-service&gt;</pre></div><p>
    The extension is attached to the
    <code class="sgmltag-starttag">&lt;dbus-service&gt;</code>
    tag and defines commands to execute for the actions of this interface.
    Further, the declaration can define and initialize environment variables
    passed to the actions.
   </p></section><section class="sect3" id="sec-network-manconf-configuration-files" data-id-title="Wicked extensions: configuration files"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.1.8 </span><span class="title-name">Wicked extensions: configuration files</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-configuration-files">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can extend the handling of configuration files with scripts as well.
    For example, DNS updates from leases are ultimately handled by the
    <code class="filename">extensions/resolver</code> script, with behavior configured
    in <code class="filename">server.xml</code>:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;system-updater name="resolver"&gt;
 &lt;action name="backup" command="/etc/wicked/extensions/resolver backup"/&gt;
 &lt;action name="restore" command="/etc/wicked/extensions/resolver restore"/&gt;
 &lt;action name="install" command="/etc/wicked/extensions/resolver install"/&gt;
 &lt;action name="remove" command="/etc/wicked/extensions/resolver remove"/&gt;
&lt;/system-updater&gt;</pre></div><p>
    When an update arrives in <code class="systemitem">wickedd</code>, the system
    updater routines parse the lease and call the appropriate commands
    (<code class="literal">backup</code>, <code class="literal">install</code>, etc.) in the
    resolver script. This in turn configures the DNS settings using
    <code class="command">/sbin/netconfig</code>, or by manually writing
    <code class="filename">/run/netconfig/resolv.conf</code> as a fallback.
   </p></section></section><section class="sect2" id="sec-network-manconf-files" data-id-title="Configuration files"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.5.2 </span><span class="title-name">Configuration files</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-files">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  This section provides an overview of the network configuration files and
  explains their purpose and the format used.
 </p><section class="sect3" id="wicked-configuration-common-xml" data-id-title="/etc/wicked/common.xml"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.1 </span><span class="title-name"><code class="filename">/etc/wicked/common.xml</code></span></span> <a title="Permalink" class="permalink" href="#wicked-configuration-common-xml">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <code class="filename">/etc/wicked/common.xml</code> file contains common
   definitions that should be used by all applications. It is sourced/included
   by the other configuration files in this directory. Although you can use
   this file to enable debugging across all
   <code class="literal">wicked</code> components, we recommend to use the file
   <code class="filename">/etc/wicked/local.xml</code> for this purpose. After applying
   maintenance updates you might lose your changes as the
   <code class="filename">/etc/wicked/common.xml</code> might be overwritten. The
   <code class="filename">/etc/wicked/common.xml</code> file includes the
   <code class="filename">/etc/wicked/local.xml</code> in the default installation, thus
   you typically do not need to modify the
   <code class="filename">/etc/wicked/common.xml</code>.
  </p><p>
   In case you want to disable <code class="literal">nanny</code> by setting the
   <code class="literal">&lt;use-nanny&gt;</code> to <code class="literal">false</code>, restart
   the <code class="literal">wickedd.service</code> and then run the following command to
   apply all configurations and policies:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> wicked ifup all</pre></div><div id="id-1.3.5.5.17.5.4.5" data-id-title="Configuration files" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Configuration files</div><p>
    The <code class="literal">wickedd</code>, <code class="literal">wicked</code>, or
    <code class="literal">nanny</code> programs try to read
    <code class="filename">/etc/wicked/common.xml</code> if their own configuration
    files do not exist.
   </p></div></section><section class="sect3" id="wicked-configuration-server-xml" data-id-title="/etc/wicked/server.xml"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.2 </span><span class="title-name"><code class="filename">/etc/wicked/server.xml</code></span></span> <a title="Permalink" class="permalink" href="#wicked-configuration-server-xml">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The file <code class="filename">/etc/wicked/server.xml</code> is read by the
   <code class="literal">wickedd</code> server process at start-up. The file stores
   extensions to the <code class="filename">/etc/wicked/common.xml</code>. On top of
   that this file configures handling of a resolver and receiving information
   from <code class="literal">addrconf</code> supplicants, for example DHCP.
  </p><p>
   We recommend to add changes required to this file into a separate file
   <code class="filename">/etc/wicked/server-local.xml</code>, that gets included by
   <code class="filename">/etc/wicked/server.xml</code>. By using a separate file
   you avoid overwriting of your changes during maintenance updates.
  </p></section><section class="sect3" id="wicked-configuration-client-xml" data-id-title="/etc/wicked/client.xml"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.3 </span><span class="title-name"><code class="filename">/etc/wicked/client.xml</code></span></span> <a title="Permalink" class="permalink" href="#wicked-configuration-client-xml">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <code class="filename">/etc/wicked/client.xml</code> is used by the
   <code class="command">wicked</code> command. The file specifies the location of a
   script used when discovering devices managed by ibft and configures
   locations of network interface configurations.
  </p><p>
   We recommend to add changes required to this file into a separate file
   <code class="filename">/etc/wicked/client-local.xml</code>, that gets included by
   <code class="filename">/etc/wicked/server.xml</code>. By using a separate file
   you avoid overwriting of your changes during maintenance updates.
  </p></section><section class="sect3" id="wicked-configuration-nanny-xml" data-id-title="/etc/wicked/nanny.xml"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.4 </span><span class="title-name"><code class="filename">/etc/wicked/nanny.xml</code></span></span> <a title="Permalink" class="permalink" href="#wicked-configuration-nanny-xml">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <code class="filename">/etc/wicked/nanny.xml</code> configures types of link
   layers. We recommend to add specific configuration into a separate file:
   <code class="filename">/etc/wicked/nanny-local.xml</code> to avoid losing the changes
   during maintenance updates.
  </p></section><section class="sect3" id="sec-network-manconf-files-ifcfg" data-id-title="/etc/sysconfig/network/ifcfg-*"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.5 </span><span class="title-name"><code class="filename">/etc/sysconfig/network/ifcfg-*</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-files-ifcfg">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   These files contain the traditional configurations for network interfaces.
  </p><div id="id-1.3.5.5.17.5.8.3" data-id-title="wicked and the ifcfg-* files" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: <code class="command">wicked</code> and the <code class="filename">ifcfg-*</code> files</div><p>
    <code class="command">wicked</code> reads these files if you specify the
    <code class="literal">compat:</code> prefix. According to the <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> default
    configuration in <code class="filename">/etc/wicked/client.xml</code>,
    <code class="command">wicked</code> tries these files before the XML configuration
    files in <code class="filename">/etc/wicked/ifconfig</code>.
   </p><p>
    The <code class="option">--ifconfig</code> switch is provided mostly for testing only.
    If specified, default configuration sources defined in
    <code class="filename">/etc/wicked/ifconfig</code> are not applied.
   </p></div><p>
   The <code class="filename">ifcfg-*</code> files include information such as the start
   mode and the IP address. Possible parameters are described in the manual
   page of <code class="systemitem">ifup</code>. Additionally, most variables from the
   <code class="filename">dhcp</code> and <code class="filename">wireless</code> files can be
   used in the <code class="filename">ifcfg-*</code> files if a general setting should
   be used for only one interface. However, most of the
   <code class="filename">/etc/sysconfig/network/config</code> variables are global and
   cannot be overridden in <code class="literal">ifcfg</code> files. For example,
   <code class="systemitem">NETCONFIG_*</code> variables are global.
  </p><p>

   For configuring <code class="systemitem">macvlan</code> and
   <code class="systemitem">macvtab</code> interfaces, see the
   <code class="systemitem">ifcfg-macvlan</code> and
   <code class="systemitem">ifcfg-macvtap</code> man pages. For example, for a macvlan
   interface provide a <code class="filename">ifcfg-macvlan0</code> with settings as
   follows:
  </p><div class="verbatim-wrap"><pre class="screen">STARTMODE='auto'
MACVLAN_DEVICE='eth0'
#MACVLAN_MODE='vepa'
#LLADDR=02:03:04:05:06:aa</pre></div><p>
   For <code class="filename">ifcfg.template</code>, see
   <a class="xref" href="#sec-network-manconf-files-config-etc" title="23.5.2.6. /etc/sysconfig/network/config, /etc/sysconfig/network/dhcp, and /etc/sysconfig/network/wireless">Section 23.5.2.6, “<code class="filename">/etc/sysconfig/network/config</code>, <code class="filename">/etc/sysconfig/network/dhcp</code>, and <code class="filename">/etc/sysconfig/network/wireless</code>”</a>.
  </p><p><strong class="arch-arrow-start">IBM Z</strong>
   IBM Z does not support USB. The names of the interface files and
   network aliases contain IBM Z-specific elements like
   <code class="literal">qeth</code>.
  <strong class="arch-arrow-end"> </strong></p></section><section class="sect3" id="sec-network-manconf-files-config-etc" data-id-title="/etc/sysconfig/network/config, /etc/sysconfig/network/dhcp, and /etc/sysconfig/network/wireless"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.6 </span><span class="title-name"><code class="filename">/etc/sysconfig/network/config</code>, <code class="filename">/etc/sysconfig/network/dhcp</code>, and <code class="filename">/etc/sysconfig/network/wireless</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-files-config-etc">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The file <code class="filename">config</code> contains general settings for the
   behavior of <code class="command">ifup</code>, <code class="command">ifdown</code> and
   <code class="command">ifstatus</code>. <code class="filename">dhcp</code> contains settings for
   DHCP and <code class="filename">wireless</code> for wireless LAN cards. The variables
   in all three configuration files are commented. Some variables from
   <code class="filename">/etc/sysconfig/network/config</code> can also be used in
   <code class="filename">ifcfg-*</code> files, where they are given a higher priority.
   The <code class="filename">/etc/sysconfig/network/ifcfg.template</code> file lists
   variables that can be specified in a per interface scope. However, most of
   the <code class="filename">/etc/sysconfig/network/config</code> variables are global
   and cannot be overridden in ifcfg-files. For example,
   <code class="systemitem">NETWORKMANAGER</code> or
   <code class="systemitem">NETCONFIG_*</code> variables are global.
  </p><div id="id-1.3.5.5.17.5.9.3" data-id-title="Using DHCPv6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Using DHCPv6</div><p>
    <span class="phrase">In SUSE Linux Enterprise 11, DHCPv6 used to work even on networks
    where IPv6 Router Advertisements (RAs) were not configured
    properly. Starting with SUSE Linux Enterprise 12,</span> DHCPv6 requires that at least
    one of the routers on the network sends out RAs that indicate that this
    network is managed by DHCPv6.
   </p><p>
    For networks where the router cannot be configured correctly, the <code class="literal">ifcfg</code> option allows the user to override this
    behavior by specifying <code class="literal">DHCLIENT6_MODE='managed'</code> in the
    <code class="literal">ifcfg</code> file.

    You can also activate this workaround with a boot parameter in the
    installation system:
   </p><div class="verbatim-wrap"><pre class="screen">ifcfg=eth0=dhcp6,DHCLIENT6_MODE=managed</pre></div></div></section><section class="sect3" id="sec-network-manconf-files-routes" data-id-title="/etc/sysconfig/network/routes and /etc/sysconfig/network/ifroute-*"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.7 </span><span class="title-name"><code class="filename">/etc/sysconfig/network/routes</code> and <code class="filename">/etc/sysconfig/network/ifroute-*</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-files-routes">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The static routing of TCP/IP packets is determined by the
   <code class="filename">/etc/sysconfig/network/routes</code> and
   <code class="filename">/etc/sysconfig/network/ifroute-*</code> files. All the static
   routes required by the various system tasks can be specified in
   <code class="filename">/etc/sysconfig/network/routes</code>: routes to a host, routes
   to a host via a gateway and routes to a network. For each interface that
   needs individual routing, define an additional configuration file:
   <code class="filename">/etc/sysconfig/network/ifroute-*</code>. Replace the wild card
   (<code class="literal">*</code>) with the name of the interface. The entries in the
   routing configuration files look like this:
  </p><div class="verbatim-wrap"><pre class="screen"># Destination     Gateway           Netmask            Interface  Options</pre></div><p>
   The route's destination is in the first column. This column may contain the
   IP address of a network or host or, in the case of
   <span class="emphasis"><em>reachable</em></span> name servers, the fully qualified network or
   host name. The network should be written in CIDR notation (address with the
   associated routing prefix-length) such as 10.10.0.0/16 for IPv4 or fc00::/7
   for IPv6 routes. The keyword <code class="literal">default</code> indicates that the
   route is the default gateway in the same address family as the gateway. For
   devices without a gateway use explicit 0.0.0.0/0 or ::/0 destinations.
  </p><p>
   The second column contains the default gateway or a gateway through which a
   host or network can be accessed.
  </p><p>
   The third column is deprecated; it used to contain the IPv4 netmask of the
   destination. For IPv6 routes, the default route, or when using a
   prefix-length (CIDR notation) in the first column, enter a dash
   (<code class="literal">-</code>) here.
  </p><p>
   The fourth column contains the name of the interface. If you leave it empty
   using a dash (<code class="literal">-</code>), it can cause unintended behavior in
   <code class="filename">/etc/sysconfig/network/routes</code>. For more information,
   see the <code class="systemitem">routes</code> man page.
  </p><p>
   An (optional) fifth column can be used to specify special options. For
   details, see the <code class="systemitem">routes</code> man page.
  </p><div class="example" id="id-1.3.5.5.17.5.10.9" data-id-title="Common network interfaces and some static routes"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.5: </span><span class="title-name">Common network interfaces and some static routes </span></span><a title="Permalink" class="permalink" href="#id-1.3.5.5.17.5.10.9">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># --- IPv4 routes in CIDR prefix notation:
# Destination     [Gateway]         -                  Interface
127.0.0.0/8       -                 -                  lo
204.127.235.0/24  -                 -                  eth0
default           204.127.235.41    -                  eth0
207.68.156.51/32  207.68.145.45     -                  eth1
192.168.0.0/16    207.68.156.51     -                  eth1

# --- IPv4 routes in deprecated netmask notation"
# Destination     [Dummy/Gateway]   Netmask            Interface
#
127.0.0.0         0.0.0.0           255.255.255.0      lo
204.127.235.0     0.0.0.0           255.255.255.0      eth0
default           204.127.235.41    0.0.0.0            eth0
207.68.156.51     207.68.145.45     255.255.255.255    eth1
192.168.0.0       207.68.156.51     255.255.0.0        eth1

# --- IPv6 routes are always using CIDR notation:
# Destination     [Gateway]                -           Interface
2001:DB8:100::/64 -                        -           eth0
2001:DB8:100::/32 fe80::216:3eff:fe6d:c042 -           eth0</pre></div></div></div></section><section class="sect3" id="sec-network-manconf-files-resolv" data-id-title="/var/run/netconfig/resolv.conf"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.8 </span><span class="title-name"><code class="filename">/var/run/netconfig/resolv.conf</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-files-resolv">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The domain to which the host belongs is specified in
   <code class="filename">/var/run/netconfig/resolv.conf</code> (keyword
   <code class="systemitem">search</code>). Up to six domains with a total of 256
   characters can be specified with the <code class="systemitem">search</code> option.
   When resolving a name that is not fully qualified, an attempt is made to
   generate one by attaching the individual <code class="systemitem">search</code>
   entries. Up to three name servers can be specified with the
   <code class="systemitem">nameserver</code> option, each on a line of its own.
   Comments are preceded by hash mark or semicolon signs (<code class="literal">#</code>
   or <code class="literal">;</code>). As an example, see
   <a class="xref" href="#dat-net-etc-resolv-conf" title="/var/run/netconfig/resolv.conf">Example 23.6, “<code class="filename">/var/run/netconfig/resolv.conf</code>”</a>.
  </p><p>
   However, <code class="filename">/etc/resolv.conf</code> should not be edited by
   hand. It is generated by the <code class="command">netconfig</code> script and is a
   symbolic link to <code class="filename">/run/netconfig/resolv.conf</code>.
   To define static DNS configuration without using YaST, edit the
   appropriate variables manually in the
   <code class="filename">/etc/sysconfig/network/config</code> file:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.17.5.11.4.1"><span class="term"><code class="systemitem">NETCONFIG_DNS_STATIC_SEARCHLIST</code>
    </span></dt><dd><p>
      list of DNS domain names used for host name lookup
     </p></dd><dt id="id-1.3.5.5.17.5.11.4.2"><span class="term"><code class="systemitem">NETCONFIG_DNS_STATIC_SERVERS</code>
    </span></dt><dd><p>
      list of name server IP addresses to use for host name lookup
     </p></dd><dt id="id-1.3.5.5.17.5.11.4.3"><span class="term"><code class="systemitem">NETCONFIG_DNS_FORWARDER</code>
    </span></dt><dd><p>
      the name of the DNS forwarder that needs to be configured, for example
      <code class="literal">bind</code> or <code class="literal">resolver</code>
     </p></dd><dt id="id-1.3.5.5.17.5.11.4.4"><span class="term"><code class="systemitem">NETCONFIG_DNS_RESOLVER_OPTIONS</code>
    </span></dt><dd><p>
      arbitrary options that will be written to
      <code class="filename">/var/run/netconfig/resolv.conf</code>, for example:
     </p><div class="verbatim-wrap"><pre class="screen">debug attempts:1 timeout:10</pre></div><p>
      For more information, see the <code class="literal">resolv.conf</code> man page.
     </p></dd><dt id="id-1.3.5.5.17.5.11.4.5"><span class="term"><code class="systemitem">NETCONFIG_DNS_RESOLVER_SORTLIST</code>
    </span></dt><dd><p>
      list of up to 10 items, for example:
     </p><div class="verbatim-wrap"><pre class="screen">130.155.160.0/255.255.240.0 130.155.0.0</pre></div><p>
      For more information, see the <code class="systemitem">resolv.conf</code> man
      page.
     </p></dd></dl></div><p>
   To disable DNS configuration using netconfig, set
   <code class="literal">NETCONFIG_DNS_POLICY=''</code>. For more information about
   <code class="command">netconfig</code>, see the <code class="systemitem">netconfig(8)</code>
   man page (<code class="command">man 8 netconfig</code>).
  </p><div class="example" id="dat-net-etc-resolv-conf" data-id-title="/var/run/netconfig/resolv.conf"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.6: </span><span class="title-name"><code class="filename">/var/run/netconfig/resolv.conf</code> </span></span><a title="Permalink" class="permalink" href="#dat-net-etc-resolv-conf">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># Our domain
search example.com
#
# We use dns.example.com (192.168.1.116) as nameserver
nameserver 192.168.1.116</pre></div></div></div></section><section class="sect3" id="sec-network-manconf-netconfig" data-id-title="/sbin/netconfig"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.9 </span><span class="title-name"><code class="filename">/sbin/netconfig</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-netconfig">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <code class="command">netconfig</code> is a modular tool to manage additional network
   configuration settings. It merges statically defined settings with settings
   provided by autoconfiguration mechanisms as DHCP or PPP according to a
   predefined policy. The required changes are applied to the system by calling
   the netconfig modules that are responsible for modifying a configuration
   file and restarting a service or a similar action.
  </p><p>
   <code class="command">netconfig</code> recognizes three main actions. The
   <code class="command">netconfig modify</code> and <code class="command">netconfig remove</code>
   commands are used by daemons such as DHCP or PPP to provide or remove
   settings to netconfig. Only the <code class="command">netconfig update</code> command
   is available for the user:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.17.5.12.4.1"><span class="term"><code class="command">modify</code>
    </span></dt><dd><p>
      The <code class="command">netconfig modify</code> command modifies the current
      interface and service specific dynamic settings and updates the network
      configuration. Netconfig reads settings from standard input or from a
      file specified with the <code class="option">--lease-file
      <em class="replaceable">FILENAME</em></code> option and internally stores
      them until a system reboot (or the next modify or remove action). Already
      existing settings for the same interface and service combination are
      overwritten. The interface is specified by the <code class="option">-i
      <em class="replaceable">INTERFACE_NAME</em></code> parameter. The service
      is specified by the <code class="option">-s
      <em class="replaceable">SERVICE_NAME</em></code> parameter.
     </p></dd><dt id="id-1.3.5.5.17.5.12.4.2"><span class="term"><code class="command">remove</code>
    </span></dt><dd><p>
      The <code class="command">netconfig remove</code> command removes the dynamic
      settings provided by an editing action for the specified interface
      and service combination and updates the network configuration. The
      interface is specified by the <code class="option">-i
      <em class="replaceable">INTERFACE_NAME</em></code> parameter. The service
      is specified by the <code class="option">-s
      <em class="replaceable">SERVICE_NAME</em></code> parameter.
     </p></dd><dt id="id-1.3.5.5.17.5.12.4.3"><span class="term"><code class="command">update</code>
    </span></dt><dd><p>

      The <code class="command">netconfig update</code> command updates the network
      configuration using current settings. This is useful when the policy or
      the static configuration has changed. Use the <code class="option">-m
      <em class="replaceable">MODULE_TYPE</em></code> parameter to
      update a specified service only (<code class="systemitem">dns</code>,
      <code class="systemitem">nis</code>, or <code class="systemitem">ntp</code>).
     </p></dd></dl></div><p>
   The netconfig policy and the static configuration settings are defined
   either manually or using YaST in the
   <code class="filename">/etc/sysconfig/network/config</code> file. The dynamic
   configuration settings provided by autoconfiguration tools such as DHCP or
   PPP are delivered directly by these tools with the <code class="command">netconfig
   modify</code> and <code class="command">netconfig remove</code> actions.

   When NetworkManager is enabled, netconfig (in policy mode <code class="literal">auto</code>)
   uses only NetworkManager settings, ignoring settings from any other interfaces
   configured using the traditional ifup method. If NetworkManager does not provide any
   setting, static settings are used as a fallback. A mixed usage of NetworkManager and
   the <code class="command">wicked</code> method is not supported.
  </p><p>
   For more information about <code class="command">netconfig</code>, see <code class="command">man 8
   netconfig</code>.
  </p></section><section class="sect3" id="sec-network-manconf-hosts" data-id-title="/etc/hosts"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.10 </span><span class="title-name"><code class="filename">/etc/hosts</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-hosts">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In this file, shown in <a class="xref" href="#dat-net-etc-hosts" title="/etc/hosts">Example 23.7, “<code class="filename">/etc/hosts</code>”</a>, IP addresses
   are assigned to host names. If no name server is implemented, all hosts to
   which an IP connection will be set up must be listed here. For each host,
   enter a line consisting of the IP address, the fully qualified host name,
   and the host name into the file. The IP address must be at the beginning of
   the line and the entries separated by blanks and tabs. Comments are always
   preceded by the <code class="literal">#</code> sign.
  </p><div class="example" id="dat-net-etc-hosts" data-id-title="/etc/hosts"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.7: </span><span class="title-name"><code class="filename">/etc/hosts</code> </span></span><a title="Permalink" class="permalink" href="#dat-net-etc-hosts">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">127.0.0.1 localhost
192.168.2.100 jupiter.example.com jupiter
192.168.2.101 venus.example.com venus</pre></div></div></div></section><section class="sect3" id="sec-network-manconf-files-networks" data-id-title="/etc/networks"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.11 </span><span class="title-name"><code class="filename">/etc/networks</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-files-networks">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Here, network names are converted to network addresses. The format is
   similar to that of the <code class="filename">hosts</code> file, except the network
   names precede the addresses. See <a class="xref" href="#dat-net-networks" title="/etc/networks">Example 23.8, “<code class="filename">/etc/networks</code>”</a>.
  </p><div class="example" id="dat-net-networks" data-id-title="/etc/networks"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.8: </span><span class="title-name"><code class="filename">/etc/networks</code> </span></span><a title="Permalink" class="permalink" href="#dat-net-networks">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">loopback     127.0.0.0
localnet     192.168.0.0</pre></div></div></div></section><section class="sect3" id="sec-network-manconf-files-host" data-id-title="/etc/host.conf"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.12 </span><span class="title-name"><code class="filename">/etc/host.conf</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-files-host">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Name resolution—the translation of host and network names via the
   <span class="emphasis"><em>resolver</em></span> library—is controlled by this file. This
   file is only used for programs linked to libc4 or libc5. For current glibc
   programs, refer to the settings in <code class="filename">/etc/nsswitch.conf</code>.
   Each parameter must always be entered on a separate line. Comments are
   preceded by a <code class="literal">#</code> sign.
   <a class="xref" href="#tab-net-param-hostconf" title="Parameters for /etc/host.conf">Table 23.2, “Parameters for /etc/host.conf”</a> shows the parameters available. A
   sample <code class="filename">/etc/host.conf</code> is shown in
   <a class="xref" href="#dat-net-etc-hostconf" title="/etc/host.conf">Example 23.9, “<code class="filename">/etc/host.conf</code>”</a>.
  </p><div class="table" id="tab-net-param-hostconf" data-id-title="Parameters for /etc/host.conf"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 23.2: </span><span class="title-name">Parameters for /etc/host.conf </span></span><a title="Permalink" class="permalink" href="#tab-net-param-hostconf">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        order <span class="emphasis"><em>hosts</em></span>, <span class="emphasis"><em>bind</em></span>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        Specifies in which order the services are accessed for the name
        resolution. Available arguments are (separated by blank spaces or
        commas):
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        <span class="emphasis"><em>hosts</em></span>: searches the
        <code class="filename">/etc/hosts</code> file
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        <span class="emphasis"><em>bind</em></span>: accesses a name server
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        <span class="emphasis"><em>nis</em></span>: uses NIS
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        multi <span class="emphasis"><em>on</em></span>/<span class="emphasis"><em>off</em></span>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        Defines if a host entered in <code class="filename">/etc/hosts</code> can have
        multiple IP addresses.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        nospoof <span class="emphasis"><em>on</em></span> spoofalert
        <span class="emphasis"><em>on</em></span>/<span class="emphasis"><em>off</em></span>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        These parameters influence the name server
        <span class="emphasis"><em>spoofing</em></span> but do not exert any influence on the
        network configuration.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; ">
       <p>
        trim <span class="emphasis"><em>domainname</em></span>
       </p>
      </td><td style="text-align: left; ">
       <p>
        The specified domain name is separated from the host name after host
        name resolution (as long as the host name includes the domain name).
        This option is useful only if names from the local domain are in the
        <code class="filename">/etc/hosts</code> file, but should still be recognized
        with the attached domain names.
       </p>
      </td></tr></tbody></table></div></div><div class="example" id="dat-net-etc-hostconf" data-id-title="/etc/host.conf"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.9: </span><span class="title-name"><code class="filename">/etc/host.conf</code> </span></span><a title="Permalink" class="permalink" href="#dat-net-etc-hostconf">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># We have named running
order hosts bind
# Allow multiple address
multi on</pre></div></div></div></section><section class="sect3" id="sec-network-manconf-files-nsswitch" data-id-title="/etc/nsswitch.conf"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.13 </span><span class="title-name"><code class="filename">/etc/nsswitch.conf</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-files-nsswitch">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The introduction of the GNU C Library 2.0 was accompanied by the
   introduction of the <span class="emphasis"><em>Name Service Switch</em></span> (NSS). Refer to
   the <code class="systemitem">nsswitch.conf(5)</code> man page and <span class="emphasis"><em>The GNU
   C Library Reference Manual</em></span> for details.
  </p><p>
   The order for queries is defined in the file
   <code class="filename">/etc/nsswitch.conf</code>. A sample
   <code class="filename">nsswitch.conf</code> is shown in
   <a class="xref" href="#dat-net-nsswitchconf" title="/etc/nsswitch.conf">Example 23.10, “<code class="filename">/etc/nsswitch.conf</code>”</a>. Comments are preceded by
   <code class="literal">#</code> signs. In this example, the entry under the
   <code class="filename">hosts</code> database means that a request is sent to
   <code class="filename">/etc/hosts</code> (<code class="option">files</code>) via
   DNS<span class="phrase"> (see <a class="xref" href="#cha-dns" title="Chapter 39. The domain name system">Chapter 39, <em>The domain name system</em></a>)</span>.
  </p><div class="example" id="dat-net-nsswitchconf" data-id-title="/etc/nsswitch.conf"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.10: </span><span class="title-name"><code class="filename">/etc/nsswitch.conf</code> </span></span><a title="Permalink" class="permalink" href="#dat-net-nsswitchconf">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">passwd:     compat
group:      compat

hosts:      files dns
networks:   files dns

services:   db files
protocols:  db files
rpc:        files
ethers:     files
netmasks:   files
netgroup:   files nis
publickey:  files

bootparams: files
automount:  files nis
aliases:    files nis
shadow:     compat</pre></div></div></div><p>
   The <span class="quote">“<span class="quote">databases</span>”</span> available over NSS are listed in
   <a class="xref" href="#tab-net-nnswitch-db" title="Databases available via /etc/nsswitch.conf">Table 23.3, “Databases available via /etc/nsswitch.conf”</a>. The configuration options for NSS databases are listed in
   <a class="xref" href="#tab-net-nnswitch-conf" title="Configuration options for NSS “databases”">Table 23.4, “Configuration options for NSS <span class="quote">“<span class="quote">databases</span>”</span>”</a>.
  </p><div class="table" id="tab-net-nnswitch-db" data-id-title="Databases available via /etc/nsswitch.conf"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 23.3: </span><span class="title-name">Databases available via /etc/nsswitch.conf </span></span><a title="Permalink" class="permalink" href="#tab-net-nnswitch-db">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">aliases</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        Mail aliases implemented by <code class="filename">sendmail</code>; see
        <code class="command">man</code> <code class="option">5 aliases</code>.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">ethers</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        Ethernet addresses.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">netmasks</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        List of networks and their subnet masks. Only needed, if you use
        subnetting.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">group</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        User groups used by <code class="filename">getgrent</code>. See also the man
        page for <code class="command">group</code>.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">hosts</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        Host names and IP addresses, used by <code class="filename">gethostbyname</code>
        and similar functions.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">netgroup</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        Valid host and user lists in the network for controlling access
        permissions; see the <code class="systemitem">netgroup(5)</code> man page.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">networks</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        Network names and addresses, used by <code class="filename">getnetent</code>.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">publickey</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        Public and secret keys for Secure_RPC used by NFS and NIS+.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">passwd</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        User passwords, used by <code class="filename">getpwent</code>; see the
        <code class="systemitem">passwd(5)</code> man page.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">protocols</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        Network protocols, used by <code class="filename">getprotoent</code>; see the
        <code class="systemitem">protocols(5)</code> man page.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">rpc</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        Remote procedure call names and addresses, used by
        <code class="filename">getrpcbyname</code> and similar functions.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">services</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        Network services, used by <code class="filename">getservent</code>.
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; ">
       <p>
        <code class="option">shadow</code>
       </p>
      </td><td style="text-align: left; ">
       <p>
        Shadow passwords of users, used by <code class="filename">getspnam</code>; see
        the <code class="option">shadow(5)</code> man page.
       </p>
      </td></tr></tbody></table></div></div><div class="table" id="tab-net-nnswitch-conf" data-id-title="Configuration options for NSS databases"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 23.4: </span><span class="title-name">Configuration options for NSS <span class="quote">“<span class="quote">databases</span>”</span> </span></span><a title="Permalink" class="permalink" href="#tab-net-nnswitch-conf">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">files</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        directly access files, for example, <code class="filename">/etc/aliases</code>
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">db</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        access via a database
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">nis</code>, <code class="option">nisplus</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        NIS, see also <span class="intraxref">Book “Security and Hardening Guide”, Chapter 3 “Using NIS”</span>
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">dns</code>
       </p>
      </td><td style="text-align: left; border-bottom: 1px solid ; ">
       <p>
        can only be used as an extension for <code class="option">hosts</code> and
        <code class="option">networks</code>
       </p>
      </td></tr><tr><td style="text-align: left; border-right: 1px solid ; ">
       <p>
        <code class="option">compat</code>
       </p>
      </td><td style="text-align: left; ">
       <p>
        can only be used as an extension for <code class="option">passwd</code>,
        <code class="option">shadow</code> and <code class="option">group</code>
       </p>
      </td></tr></tbody></table></div></div></section><section class="sect3" id="sec-network-manconf-files-nscd" data-id-title="/etc/nscd.conf"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.14 </span><span class="title-name"><code class="filename">/etc/nscd.conf</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-files-nscd">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   This file is used to configure nscd (name service cache daemon). See the
   <code class="systemitem">nscd(8)</code> and <code class="systemitem">nscd.conf(5)</code>
   man pages. By default, the system entries of <code class="option">passwd</code>,
   <code class="option">groups</code> and <code class="option">hosts</code>are cached by nscd. This is important for the
   performance of directory services, like NIS and LDAP, because otherwise the
   network connection needs to be used for every access to names, groups or
   hosts.
   
  </p><p>
   If the caching for <code class="option">passwd</code> is activated, it usually takes
   about fifteen seconds until a newly added local user is recognized. Reduce
   this waiting time by restarting nscd with:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl restart nscd</pre></div></section><section class="sect3" id="sec-network-manconf-files-hostname" data-id-title="/etc/HOSTNAME"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.2.15 </span><span class="title-name"><code class="filename">/etc/HOSTNAME</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-files-hostname">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_config_files.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <code class="filename">/etc/HOSTNAME</code> contains the fully qualified host name
   (FQHN). The fully qualified host name is the host name with the domain name
   attached. This file must contain only one line (in which the host name is
   set). It is read while the machine is booting.
  </p></section></section><section class="sect2" id="sec-network-manconf-testing" data-id-title="Testing the configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.5.3 </span><span class="title-name">Testing the configuration</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-testing">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Before you write your configuration to the configuration files, you can test
   it. To set up a test configuration, use the <code class="command">ip</code> command.
   To test the connection, use the <code class="command">ping</code> command.
  </p><p>
   The command <code class="command">ip</code> changes the network configuration directly
   without saving it in the configuration file. Unless you enter your
   configuration in the correct configuration files, the changed network
   configuration is lost on reboot.
  </p><div id="id-1.3.5.5.17.6.4" data-id-title="ifconfig and route are obsolete" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: <code class="command">ifconfig</code> and <code class="command">route</code> are obsolete</div><p>
    The <code class="command">ifconfig</code> and <code class="command">route</code> tools are
    obsolete. Use <code class="command">ip</code> instead. <code class="command">ifconfig</code>,
    for example, limits interface names to 9 characters.
   </p></div><section class="sect3" id="sec-network-manconf-ip" data-id-title="Configuring a network interface with ip"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.3.1 </span><span class="title-name">Configuring a network interface with <code class="command">ip</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-ip">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <code class="command">ip</code> is a tool to show and configure network devices,
    routing, policy routing, and tunnels.
   </p><p>
    <code class="command">ip</code> is a very complex tool. Its common syntax is
    <code class="command">ip</code> <code class="option"><em class="replaceable">OPTIONS</em>
    <em class="replaceable">OBJECT</em>
    <em class="replaceable">COMMAND</em></code>. You can work with the
    following objects:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.17.6.5.4.1"><span class="term">link</span></dt><dd><p>
       This object represents a network device.
      </p></dd><dt id="id-1.3.5.5.17.6.5.4.2"><span class="term">address</span></dt><dd><p>
       This object represents the IP address of device.
      </p></dd><dt id="id-1.3.5.5.17.6.5.4.3"><span class="term">neighbor</span></dt><dd><p>
       This object represents an ARP or NDISC cache entry.
      </p></dd><dt id="id-1.3.5.5.17.6.5.4.4"><span class="term">route</span></dt><dd><p>
       This object represents the routing table entry.
      </p></dd><dt id="id-1.3.5.5.17.6.5.4.5"><span class="term">rule</span></dt><dd><p>
       This object represents a rule in the routing policy database.
      </p></dd><dt id="id-1.3.5.5.17.6.5.4.6"><span class="term">maddress</span></dt><dd><p>
       This object represents a multicast address.
      </p></dd><dt id="id-1.3.5.5.17.6.5.4.7"><span class="term">mroute</span></dt><dd><p>
       This object represents a multicast routing cache entry.
      </p></dd><dt id="id-1.3.5.5.17.6.5.4.8"><span class="term">tunnel</span></dt><dd><p>
       This object represents a tunnel over IP.
      </p></dd></dl></div><p>
    If no command is given, the default command is used (usually
    <code class="command">list</code>).
   </p><p>
    Change the state of a device with the command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip link set <em class="replaceable">DEV_NAME</em></pre></div><p>
    For example, to deactivate device eth0, enter
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip link set eth0 down</pre></div><p>
    To activate it again, use
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip link set eth0 up</pre></div><div id="id-1.3.5.5.17.6.5.12" data-id-title="Disconnecting NIC device" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Disconnecting NIC device</div><p>
     If you deactivate a device with
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip link set <em class="replaceable">DEV_NAME</em> down</pre></div><p>
     it disables the network interface on a software level.
    </p><p>
     If you want to simulate losing the link as if the Ethernet cable is unplugged
     or the connected switch is turned off, run
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip link set <em class="replaceable">DEV_NAME</em> carrier off</pre></div><p>
     For example, while <code class="command">ip link set
      <em class="replaceable">DEV_NAME</em> down</code> drops all routes using
     <em class="replaceable">DEV_NAME</em>, <code class="command">ip link set DEV carrier
      off</code> does not. Be aware that <code class="command">carrier off</code>
     requires support from the network device driver.
    </p><p>
     To connect the device back to the physical network, run
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip link set <em class="replaceable">DEV_NAME</em> carrier on</pre></div></div><p>
    After activating a device, you can configure it. To set the IP address, use
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip addr add <em class="replaceable">IP_ADDRESS</em> + dev <em class="replaceable">DEV_NAME</em></pre></div><p>
    For example, to set the address of the interface eth0 to 192.168.12.154/30
    with standard broadcast (option <code class="option">brd</code>), enter
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip addr add 192.168.12.154/30 brd + dev eth0</pre></div><p>
    To have a working connection, you must also configure the default gateway.
    To set a gateway for your system, enter
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip route add default via gateway_ip_address</pre></div><p>
    To display all devices, use
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip link ls</pre></div><p>
    To display the running interfaces only, use
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip link ls up</pre></div><p>
    To print interface statistics for a device, enter
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip -s link ls <em class="replaceable">DEV_NAME</em></pre></div><p>
     To view additional useful information, specifically about virtual
     network devices, enter
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip -d link ls <em class="replaceable">DEV_NAME</em></pre></div><p>
     Moreover, to view network layer (IPv4, IPv6) addresses of your devices,
     enter
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip addr</pre></div><p>
					In the output, you can find information about MAC addresses of your
					devices. To show all routes, use
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip route show</pre></div><p>
    For more information about using <code class="command">ip</code>, enter
    <code class="command">ip</code> <code class="option">help</code> or see the
    <code class="command">man 8 ip</code> manual page. The <code class="option">help</code> option
    is also available for all <code class="command">ip</code> subcommands, such as:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip addr help</pre></div><p>
    Find the <code class="command">ip</code> manual in
    <code class="filename">/usr/share/doc/packages/iproute2/ip-cref.pdf</code>.
   </p></section><section class="sect3" id="sec-network-manconf-testingping" data-id-title="Testing a connection with ping"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.5.3.2 </span><span class="title-name">Testing a connection with ping</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-testingping">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="command">ping</code> command is the standard tool for testing
    whether a TCP/IP connection works. It uses the ICMP protocol to send a
    small data packet, ECHO_REQUEST datagram, to the destination host,
    requesting an immediate reply. If this works, <code class="command">ping</code>
    displays a message to that effect. This indicates that the network link is
    functioning.
   </p><p>
    <code class="command">ping</code> does more than only test the function of the
    connection between two computers: it also provides some basic information
    about the quality of the connection. In
    <a class="xref" href="#ex-basicnet-manconf-ping" title="Output of the command ping">Example 23.11, “Output of the command ping”</a>, you can see an example of the
    <code class="command">ping</code> output. The second-to-last line contains
    information about the number of transmitted packets, packet loss, and total
    time of <code class="command">ping</code> running.
   </p><p>
    As the destination, you can use a host name or IP address, for example,
    <code class="command">ping</code> <code class="option">example.com</code> or
    <code class="command">ping</code> <code class="option">192.168.3.100</code>. The program sends
    packets until you press
    <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">C</span>.
   </p><p>
    If you only need to check the functionality of the connection, you can
    limit the number of the packets with the <code class="option">-c</code> option. For
    example to limit ping to three packets, enter
    <code class="command">ping</code> <code class="option">-c 3 example.com</code>.
   </p><div class="example" id="ex-basicnet-manconf-ping" data-id-title="Output of the command ping"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.11: </span><span class="title-name">Output of the command ping </span></span><a title="Permalink" class="permalink" href="#ex-basicnet-manconf-ping">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">ping -c 3 example.com
PING example.com (192.168.3.100) 56(84) bytes of data.
64 bytes from example.com (192.168.3.100): icmp_seq=1 ttl=49 time=188 ms
64 bytes from example.com (192.168.3.100): icmp_seq=2 ttl=49 time=184 ms
64 bytes from example.com (192.168.3.100): icmp_seq=3 ttl=49 time=183 ms
--- example.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2007ms
rtt min/avg/max/mdev = 183.417/185.447/188.259/2.052 ms</pre></div></div></div><p>
    The default interval between two packets is one second. To change the
    interval, ping provides the option <code class="option">-i</code>. For example, to
    increase the ping interval to ten seconds, enter
    <code class="command">ping</code> <code class="option">-i 10 example.com</code>.
   </p><p>
    In a system with multiple network devices, it is sometimes useful to send
    the ping through a specific interface address. To do so, use the
    <code class="option">-I</code> option with the name of the selected device, for
    example, <code class="command">ping</code> <code class="option">-I wlan1
    example.com</code>.
   </p><p>
    For more options and information about using ping, enter
    <code class="command">ping</code> <code class="option">-h</code> or see the
    <code class="systemitem">ping (8)</code> man page.
   </p><div id="id-1.3.5.5.17.6.6.10" data-id-title="Pinging IPv6 addresses" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Pinging IPv6 addresses</div><p>
     For IPv6 addresses use the <code class="command">ping6</code> command. Note, to ping
     link-local addresses, you must specify the interface with
     <code class="option">-I</code>. The following command works, if the address is
     reachable via <code class="literal">eth1</code>:
    </p><div class="verbatim-wrap"><pre class="screen">ping6 -I eth1 fe80::117:21ff:feda:a425</pre></div></div></section></section><section class="sect2" id="sec-network-manconf-scripts" data-id-title="Unit files and start-up scripts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.5.4 </span><span class="title-name">Unit files and start-up scripts</span></span> <a title="Permalink" class="permalink" href="#sec-network-manconf-scripts">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Apart from the configuration files described above, there are also systemd
   unit files and various scripts that load the network services while the
   machine is booting. These are started when the system is switched to the
   <code class="systemitem">multi-user.target</code> target. Some of these unit files
   and scripts are described in <a class="xref" href="#var-net-start-scripts" title="Some unit files and start-up scripts for network programs">Some unit files and start-up scripts for network programs</a>. For
   more information about <code class="systemitem">systemd</code>, see
   <a class="xref" href="#cha-systemd" title="Chapter 19. The systemd daemon">Chapter 19, <em>The <code class="systemitem">systemd</code> daemon</em></a> and for more information about the
   <code class="systemitem">systemd</code> targets, see the man page of
   <code class="systemitem">systemd.special</code> (<code class="command">man
   systemd.special</code>).
  </p><div class="variablelist" id="var-net-start-scripts" data-id-title="Some unit files and start-up scripts for network programs"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Some unit files and start-up scripts for network programs </span></span><a title="Permalink" class="permalink" href="#var-net-start-scripts">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_wicked.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.5.5.17.7.3.2"><span class="term"><code class="systemitem">network.target</code>


    </span></dt><dd><p>
      <code class="systemitem">network.target</code> is the systemd target for
      networking, but its mean depends on the settings provided by the system
      administrator.
     </p><p>
      For more information, see
      <a class="link" href="https://www.freedesktop.org/wiki/Software/systemd/NetworkTarget/" target="_blank">https://www.freedesktop.org/wiki/Software/systemd/NetworkTarget/</a>.
     </p></dd><dt id="id-1.3.5.5.17.7.3.3"><span class="term"><code class="systemitem">multi-user.target</code>
    </span></dt><dd><p>
      <code class="systemitem">multi-user.target</code> is the systemd target for a
      multiuser system with all required network services.
     </p></dd><dt id="id-1.3.5.5.17.7.3.4"><span class="term"><code class="systemitem">rpcbind</code>
    </span></dt><dd><p>
      Starts the rpcbind utility that converts RPC program numbers to universal
      addresses. It is needed for RPC services, such as an NFS server.
     </p></dd><dt id="id-1.3.5.5.17.7.3.5"><span class="term"><code class="systemitem">ypserv</code>
    </span></dt><dd><p>
      Starts the NIS server.
     </p></dd><dt id="id-1.3.5.5.17.7.3.6"><span class="term"><code class="systemitem">ypbind</code>
    </span></dt><dd><p>
      Starts the NIS client.
     </p></dd><dt id="id-1.3.5.5.17.7.3.7"><span class="term"><code class="filename">/etc/init.d/nfsserver</code>
    </span></dt><dd><p>
      Starts the NFS server.
     </p></dd><dt id="id-1.3.5.5.17.7.3.8"><span class="term"><code class="filename">/etc/init.d/postfix</code>
    </span></dt><dd><p>
      Controls the postfix process.
     </p></dd></dl></div></section></section><section class="sect1" id="sec-network-router" data-id-title="Basic router setup"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23.6 </span><span class="title-name">Basic router setup</span></span> <a title="Permalink" class="permalink" href="#sec-network-router">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_router.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  A router is a networking device that delivers and receives data (network
  packets) to or from more than one network back and forth. You often use a
  router to connect your local network to the remote network (Internet) or to
  connect local network segments. With <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> you can build a router with
  features such as NAT (Network Address Translation) or advanced firewalling.
 </p><p>
  The following are basic steps to turn <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> into a router.
 </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    Enable forwarding, for example in
    <code class="filename">/etc/sysctl.d/50-router.conf</code>
   </p><div class="verbatim-wrap"><pre class="screen">net.ipv4.conf.all.forwarding = 1
net.ipv6.conf.all.forwarding = 1</pre></div><p>
    Then provide a static IPv4 and IPv6 IP setup for the interfaces. Enabling
    forwarding disables several mechanisms, for example IPv6 does not accept an
    IPv6 RA (router advertisement) anymore, which also prevents the creation of
    a default route.
   </p></li><li class="step"><p>
    In many situations (for example, when you can reach the same network
    via more than one interface, or when VPN usually is used and already
    on <span class="quote">“<span class="quote">normal multi-home hosts</span>”</span>), you must disable the IPv4
    reverse path filter (this feature does not currently exist for IPv6):
   </p><div class="verbatim-wrap"><pre class="screen">net.ipv4.conf.all.rp_filter = 0</pre></div><p>
    You can also filter with firewall settings instead.
   </p></li><li class="step"><p>
    To accept an IPv6 RA (from the router on an external, uplink, or ISP
    interface) and create a default (or also a more specific) IPv6 route again,
    set:
   </p><div class="verbatim-wrap"><pre class="screen">net.ipv6.conf.${ifname}.accept_ra = 2
net.ipv6.conf.${ifname}.autoconf = 0</pre></div><p>
    (Note: <span class="quote">“<span class="quote"><code class="literal">eth0.42</code></span>”</span> needs to be written as
    <code class="literal">eth0/42</code> in a dot-separated sysfs path.)
   </p></li></ol></div></div><p>
  More router behavior and forwarding dependencies are described in
  <a class="link" href="https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt" target="_blank">https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt</a>.
 </p><p>
  To provide IPv6 on your internal (DMZ) interfaces, and announce yourself as
  an IPv6 router and <span class="quote">“<span class="quote">autoconf networks</span>”</span> to the clients, install
  and configure <code class="systemitem">radvd</code> in
  <code class="filename">/etc/radvd.conf</code>, for example:
 </p><div class="verbatim-wrap"><pre class="screen">interface eth0
{
    IgnoreIfMissing on;         # do not fail if interface missed

    AdvSendAdvert on;           # enable sending RAs
    AdvManagedFlag on;          # IPv6 addresses managed via DHCPv6
    AdvOtherConfigFlag on;      # DNS, NTP... only via DHCPv6

    AdvDefaultLifetime 3600;    # client default route lifetime of 1 hour

    prefix 2001:db8:0:1::/64    # (/64 is default and required for autoconf)
    {
        AdvAutonomous off;         # Disable address autoconf (DHCPv6 only)

        AdvValidLifetime 3600;     # prefix (autoconf addr) is valid 1 h
        AdvPreferredLifetime 1800; # prefix (autoconf addr) is preferred 1/2 h
    }
}</pre></div><p>
  Configure the firewall to masquerade traffic with NAT from the LAN
  into the WAN and to block inbound traffic on the WAN interface:
 </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">firewall-cmd</code> --permanent --zone=external --change-interface=<em class="replaceable">WAN_INTERFACE</em>
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">firewall-cmd</code> --permanent --zone=external --add-masquerade
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">firewall-cmd</code> --permanent --zone=internal --change-interface=<em class="replaceable">LAN_INTERFACE</em>
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">firewall-cmd</code> --reload</pre></div></section><section class="sect1" id="sec-network-iface-bonding" data-id-title="Setting up bonding devices"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23.7 </span><span class="title-name">Setting up bonding devices</span></span> <a title="Permalink" class="permalink" href="#sec-network-iface-bonding">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_bonding.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  For some systems, there is a desire to implement network connections that
  comply to more than the standard data security or availability requirements
  of a typical Ethernet device. In these cases, several Ethernet devices can be
  aggregated to a single bonding device.
 </p><p>
  The configuration of the bonding device is done by means of bonding module
  options. The behavior is mainly affected by the mode of the bonding device.
  By default, this is <code class="systemitem">active-backup</code> which means
  that a different bond port will become active if the active port fails.
  The following bonding modes are available:
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.5.19.5.1"><span class="term"><span class="guimenu">0</span> (balance-rr)</span></dt><dd><p>
     Packets are transmitted in round-robin fashion from the first to the last
     available interface. Provides fault tolerance and load balancing.
    </p></dd><dt id="id-1.3.5.5.19.5.2"><span class="term"><span class="guimenu">1</span> (active-backup)</span></dt><dd><p>
     Only one network interface is active. If it fails, a different interface
     becomes active. This setting is the default for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. Provides
     fault tolerance.
    </p></dd><dt id="id-1.3.5.5.19.5.3"><span class="term"><span class="guimenu">2</span> (balance-xor)</span></dt><dd><p>
     Traffic is split between all available interfaces based on the number of
     devices included in the bonding. It requires support from the switch.
     Provides fault tolerance and load balancing.
    </p></dd><dt id="id-1.3.5.5.19.5.4"><span class="term"><span class="guimenu">3</span> (broadcast)</span></dt><dd><p>
     All traffic is broadcast on all interfaces. Requires support from the
     switch. Provides fault tolerance.
    </p></dd><dt id="id-1.3.5.5.19.5.5"><span class="term"><span class="guimenu">4</span> (802.3ad)</span></dt><dd><p>
     Aggregates interfaces into groups that share the same speed and duplex
     settings. Requires <code class="command">ethtool</code> support in the interface
     drivers, and a switch that supports and is configured for IEEE 802.3ad
     Dynamic link aggregation. Provides fault tolerance and load balancing.
    </p></dd><dt id="id-1.3.5.5.19.5.6"><span class="term"><span class="guimenu">5</span> (balance-tlb)</span></dt><dd><p>
     Adaptive transmit load balancing. Requires <code class="command">ethtool</code>
     support in the interface drivers but not switch support. Provides fault
     tolerance and load balancing.
    </p></dd><dt id="id-1.3.5.5.19.5.7"><span class="term"><span class="guimenu">6</span> (balance-alb)</span></dt><dd><p>
     Adaptive load balancing. Requires <code class="command">ethtool</code> support in
     the interface drivers but not switch support. Provides fault tolerance and
     load balancing.
    </p></dd></dl></div><p>
  For a more detailed description of the modes, see
  <a class="link" href="https://www.kernel.org/doc/Documentation/networking/bonding.txt" target="_blank">https://www.kernel.org/doc/Documentation/networking/bonding.txt</a>.
 </p><div id="id-1.3.5.5.19.7" data-id-title="Bonding and Xen" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Bonding and Xen</div><p>
   Using bonding devices is only of interest for machines where you have
   multiple real network cards available. In most configurations, this means
   that you should use the bonding configuration only in Dom0. Only if you
   have multiple network cards assigned to a VM Guest system it may also be
   useful to set up the bond in a VM Guest.
  </p></div><div id="id-1.3.5.5.19.8" data-id-title="IBM POWER: Bonding modes 5 and 6 (balance-tlb / balance-alb) unsupported by ibmveth" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: 
   IBM POWER: Bonding modes 5 and 6 (balance-tlb / balance-alb) unsupported
   by ibmveth
  </div><p>
   There is a conflict with the tlb/alb bonding configuration and Power
   firmware.  In short, the bonding driver in tlb/alb mode sends Ethernet
   Loopback packets with both the source and destination MAC addresses listed
   as the Virtual Ethernet MAC address. These packets are not supported by
   Power firmware. Therefore bonding modes 5 and 6 are unsupported by ibmveth.
  </p></div><p>
  To configure a bonding device, use the following procedure:
 </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    Run <span class="guimenu">YaST</span> › <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span>.
   </p></li><li class="step"><p>
    Use <span class="guimenu">Add</span> and change the <span class="guimenu">Device Type</span> to
    <span class="guimenu">Bond</span>. Proceed with <span class="guimenu">Next</span>.
   </p><div class="informalfigure"><div class="mediaobject"><a href="images/bond_configuration.png"><img src="images/bond_configuration.png" width="65%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
    Select how to assign the IP address to the bonding device. Three methods
    are at your disposal:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      No IP Address
     </p></li><li class="listitem"><p>
      Dynamic Address (with DHCP or Zeroconf)
     </p></li><li class="listitem"><p>
      Statically assigned IP Address
     </p></li></ul></div><p>
    Use the method that is appropriate for your environment.
   </p></li><li class="step"><p>
    In the <span class="guimenu">Bond Ports</span> tab, select the Ethernet devices that
    should be included into the bond by activating the related check box.
   </p></li><li class="step"><p>
    Edit the <span class="guimenu">Bond Driver Options</span> and choose a bonding mode.
   </p></li><li class="step"><p>
    Make sure that the parameter <code class="literal">miimon=100</code> is added to the
    <span class="guimenu">Bond Driver Options</span>. Without this parameter, the data
    integrity is not checked regularly.
   </p></li><li class="step"><p>
    Click <span class="guimenu">Next</span> and leave YaST with <span class="guimenu">OK</span>
    to create the device.
   </p></li></ol></div></div><section class="sect2" id="sec-network-iface-bonding-hotplug" data-id-title="Hotplugging of bond ports"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.7.1 </span><span class="title-name">Hotplugging of bond ports</span></span> <a title="Permalink" class="permalink" href="#sec-network-iface-bonding-hotplug">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_bonding.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In specific network environments (such as High Availability), there are
   cases when you need to replace a bond port interface with another one.
   The reason may be a constantly failing network device. The solution is to
   set up hotplugging of bond ports.
  </p><p>
   The bond is configured as usual (according to <code class="command">man 5
   ifcfg-bonding</code>), for example:
  </p><div class="verbatim-wrap"><pre class="screen">ifcfg-bond0
          STARTMODE='auto' # or 'onboot'
          BOOTPROTO='static'
          IPADDR='192.168.0.1/24'
          BONDING_MASTER='yes'
          BONDING_SLAVE_0='eth0'
          BONDING_SLAVE_1='eth1'
          BONDING_MODULE_OPTS='mode=active-backup miimon=100'</pre></div><p>
   The bond ports are specified with <code class="literal">STARTMODE=hotplug</code> and
   <code class="literal">BOOTPROTO=none</code>:
  </p><div class="verbatim-wrap"><pre class="screen">ifcfg-eth0
          STARTMODE='hotplug'
          BOOTPROTO='none'

ifcfg-eth1
          STARTMODE='hotplug'
          BOOTPROTO='none'</pre></div><p>
   <code class="literal">BOOTPROTO=none</code> uses the <code class="command">ethtool</code>
   options (when provided), but does not set the link up on <code class="command">ifup
   eth0</code>. The reason is that the bond port interface is controlled by the
   bond device.
  </p><p>
   <code class="literal">STARTMODE=hotplug</code> causes the bond port interface to join the
   bond automatically when it is available.
  </p><p>
   The <code class="systemitem">udev</code> rules in
   <code class="filename">/etc/udev/rules.d/70-persistent-net.rules</code> need to be
   changed to match the device by bus ID (udev <code class="systemitem">KERNELS</code>
   keyword equal to "SysFS BusID" as visible in <code class="command">hwinfo
   --netcard</code>) instead of by MAC address. This allows replacement of
   defective hardware (a network card in the same slot but with a different
   MAC) and prevents confusion when the bond changes the MAC address of all its
   bond ports.
  </p><p>
   For example:
  </p><div class="verbatim-wrap"><pre class="screen">SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*",
KERNELS=="0000:00:19.0", ATTR{dev_id}=="0x0", ATTR{type}=="1",
KERNEL=="eth*", NAME="eth0"</pre></div><p>
   At boot time, the systemd <code class="systemitem">network.service</code> does not
   wait for the hotplug bond ports, but for the bond to become ready, which
   requires at least one available bond port. When one of the bond port interfaces gets
   removed (unbind from NIC driver, <code class="command">rmmod</code> of the NIC driver
   or true PCI hotplug remove) from the system, the kernel removes it from the
   bond automatically. When a new card is added to the system (replacement of
   the hardware in the slot), <code class="systemitem">udev</code> renames it using
   the bus-based persistent name rule to the name of the bond port, and calls
   <code class="command">ifup</code> for it. The <code class="command">ifup</code> call
   automatically joins it into the bond.
   
  </p></section></section><section class="sect1" id="sec-network-iface-teaming" data-id-title="Setting up team devices for Network Teaming"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23.8 </span><span class="title-name">Setting up team devices for Network Teaming</span></span> <a title="Permalink" class="permalink" href="#sec-network-iface-teaming">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_teaming.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The term <span class="quote">“<span class="quote">link aggregation</span>”</span> is the general term which describes
  combining (or aggregating) a network connection to provide a logical layer.
  Sometimes you find the terms <span class="quote">“<span class="quote">channel teaming</span>”</span>, <span class="quote">“<span class="quote">Ethernet
  bonding</span>”</span>, <span class="quote">“<span class="quote">port trunking</span>”</span>, etc. which are synonyms and
  refer to the same concept.
 </p><p>
  This concept is widely known as <span class="quote">“<span class="quote">bonding</span>”</span> and was originally
  integrated into the Linux kernel (see <a class="xref" href="#sec-network-iface-bonding" title="23.7. Setting up bonding devices">Section 23.7, “Setting up bonding devices”</a> for the
  original implementation). The term <span class="emphasis"><em>Network Teaming</em></span> is used to
  refer to the new implementation of this concept.
 </p><p>
  The main difference between bonding and Network Teaming is that teaming supplies a
  set of small kernel modules responsible for providing an interface
  for teamd instances. Everything else is handled in user space. This is
  different from the original bonding implementation which contains all of its
  functionality exclusively in the kernel. For a comparison refer to <a class="xref" href="#tab-team-comparison" title="Feature comparison between bonding and team">Table 23.5, “Feature comparison between bonding and team”</a>.
 </p><div class="table" id="tab-team-comparison" data-id-title="Feature comparison between bonding and team"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 23.5: </span><span class="title-name">Feature comparison between bonding and team </span></span><a title="Permalink" class="permalink" href="#tab-team-comparison">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_teaming.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="c1"/><col class="c2"/><col class="c3"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Feature</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Bonding</th><th style="border-bottom: 1px solid ; ">Team</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">broadcast, round-robin TX policy</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">yes</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">active-backup TX policy</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">yes</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">LACP (802.3ad) support</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">yes</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">hash-based TX policy</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">yes</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">user can set hash function</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">no</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">TX load-balancing support (TLB)</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">yes</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">TX load-balancing support for LACP</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">no</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Ethtool link monitoring</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">yes</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">ARP link monitoring</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">yes</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">NS/NA (IPV6) link monitoring</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">no</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">RCU locking on TX/RX paths</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">no</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">port prio and stickiness</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">no</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">separate per-port link monitoring setup</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">no</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">multiple link monitoring setup</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">limited</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">VLAN support</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">yes</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">multiple device stacking</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">yes</td><td style="border-bottom: 1px solid ; ">yes</td></tr><tr><td colspan="3">Source: <a class="link" href="https://libteam.org/files/teamdev.pp.pdf" target="_blank">https://libteam.org/files/teamdev.pp.pdf</a></td></tr></tbody></table></div></div><p>
  Both implementations, bonding and Network Teaming, can be used in
  parallel. Network Teaming is an alternative to the existing bonding
  implementation. It does not replace bonding.
 </p><p>
  Network Teaming can be used for different use cases. The two most important use
  cases are explained later and involve:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Load balancing between different network devices.
   </p></li><li class="listitem"><p>
    Failover from one network device to another in case one of the devices
    should fail.
   </p></li></ul></div><p>
  
  Currently, there is no YaST module to support creating a teaming device.
  You need to configure Network Teaming manually. The general procedure is shown
  below which can be applied for all your Network Teaming configurations:
 </p><div class="procedure" id="pro-team-general" data-id-title="General procedure"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 23.1: </span><span class="title-name">General procedure </span></span><a title="Permalink" class="permalink" href="#pro-team-general">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_teaming.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    Install the package <span class="package">libteam-tools</span>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">zypper in libteam-tools</code></pre></div></li><li class="step"><p>
    Create a configuration file under
    <code class="filename">/etc/sysconfig/network/</code>. Usually it will be
    <code class="filename">ifcfg-team0</code>. If you need more than one Network Teaming
    device, give them ascending numbers.
   </p><p>
    This configuration file contains several variables which are explained in
    the man pages (see <code class="command">man ifcfg</code> and <code class="command">man
    ifcfg-team</code>). An example configuration can be found in your
    system in the file <code class="filename">/etc/sysconfig/network/ifcfg.template</code>.
   </p></li><li class="step"><p>
    Remove the configuration files of the interfaces which will be used for the
    teaming device (usually <code class="filename">ifcfg-eth0</code> and
    <code class="filename">ifcfg-eth1</code>).
   </p><p>
    It is recommended to make a backup and remove both files. Wicked will
    re-create the configuration files with the necessary parameters for
    teaming.
   </p></li><li class="step"><p>
    Optionally, check if everything is included in Wicked's configuration file:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">wicked show-config</code></pre></div></li><li class="step"><p>
    Start the Network Teaming device <code class="systemitem">team0</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">wicked ifup team0</code></pre></div><p>
    In case you need additional debug information, use the option
    <code class="option">--debug all</code> after the <code class="command">all</code> subcommand.
   </p></li><li class="step"><p>
    Check the status of the Network Teaming device. This can be done by the following
    commands:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Get the state of the teamd instance from Wicked:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">wicked ifstatus --verbose team0</code></pre></div></li><li class="listitem"><p>
      Get the state of the entire instance:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">teamdctl team0 state</code></pre></div></li><li class="listitem"><p>
      Get the systemd state of the teamd instance:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl status teamd@team0</code></pre></div></li></ul></div><p>
    Each of them shows a slightly different view depending on your needs.
   </p></li><li class="step"><p>
    In case you need to change something in the
    <code class="filename">ifcfg-team0</code> file afterward, reload its configuration
    with:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">wicked ifreload team0</code></pre></div></li></ol></div></div><p>
  Do <span class="emphasis"><em>not</em></span> use <code class="command">systemctl</code> for starting or
  stopping the teaming device! Instead, use the <code class="command">wicked</code>
  command as shown above.
 </p><p>
  To completely remove the team device, use this procedure:
 </p><div class="procedure" id="id-1.3.5.5.20.15" data-id-title="Removing a team device"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 23.2: </span><span class="title-name">Removing a team device </span></span><a title="Permalink" class="permalink" href="#id-1.3.5.5.20.15">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_teaming.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    Stop the Network Teaming device <code class="systemitem">team0</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">wicked ifdown team0</code></pre></div></li><li class="step"><p>
    Rename the file <code class="filename">/etc/sysconfig/network/ifcfg-team0</code> to <code class="filename">/etc/sysconfig/network/.ifcfg-team0</code>.
    Inserting a dot in front of the file name makes it
    <span class="quote">“<span class="quote">invisible</span>”</span> for wicked. If you really do not need the
    configuration anymore, you can also remove the file.
   </p></li><li class="step"><p>Reload the configuration:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">wicked ifreload all</code></pre></div></li></ol></div></div><section class="sect2" id="sec-network-iface-teaming-lb" data-id-title="Use case: load balancing with Network Teaming"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.8.1 </span><span class="title-name">Use case: load balancing with Network Teaming</span></span> <a title="Permalink" class="permalink" href="#sec-network-iface-teaming-lb">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_teaming.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Load balancing is used to improve bandwidth. Use the following configuration
   file to create a Network Teaming device with load balancing capabilities. Proceed
   with <a class="xref" href="#pro-team-general" title="General procedure">Procedure 23.1, “General procedure”</a> to set up the device. Check the
   output with <code class="command">teamdctl</code>.
  </p><div class="example" id="ex-team-lb" data-id-title="Configuration for load balancing with Network Teaming"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.12: </span><span class="title-name">Configuration for load balancing with Network Teaming </span></span><a title="Permalink" class="permalink" href="#ex-team-lb">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_teaming.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">STARTMODE=auto <span class="callout" id="co-team-lb-startmode">1</span>
BOOTPROTO=static <span class="callout" id="co-team-lb-boot-and-ip">2</span>
IPADDRESS="192.168.1.1/24" <a class="xref" href="#co-team-lb-boot-and-ip"><span class="callout">2</span></a>
IPADDR6="fd00:deca:fbad:50::1/64" <a class="xref" href="#co-team-lb-boot-and-ip"><span class="callout">2</span></a>

TEAM_RUNNER="loadbalance" <span class="callout" id="co-team-lb-loadbalance">3</span>
TEAM_LB_TX_HASH="ipv4,ipv6,eth,vlan"
TEAM_LB_TX_BALANCER_NAME="basic"
TEAM_LB_TX_BALANCER_INTERVAL="100"

TEAM_PORT_DEVICE_0="eth0" <span class="callout" id="co-team-lb-dev">4</span>
TEAM_PORT_DEVICE_1="eth1" <a class="xref" href="#co-team-lb-dev"><span class="callout">4</span></a>

TEAM_LW_NAME="ethtool" <span class="callout" id="co-team-lb-name">5</span>
TEAM_LW_ETHTOOL_DELAY_UP="10" <span class="callout" id="co-team-lb-ethtool-delay">6</span>
TEAM_LW_ETHTOOL_DELAY_DOWN="10" <a class="xref" href="#co-team-lb-ethtool-delay"><span class="callout">6</span></a></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-lb-startmode"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Controls the start of the teaming device. The value of
      <code class="literal">auto</code> means, the interface will be set up when the
      network service is available and will be started automatically on every
      reboot.
     </p><p>
      In case you need to control the device yourself (and prevent it from
      starting automatically), set <code class="varname">STARTMODE</code> to
      <code class="literal">manual</code>.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-lb-boot-and-ip"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Sets a static IP address (here
      <code class="systemitem">192.168.1.1</code>
      for IPv4 and
      <code class="systemitem">fd00:deca:fbad:50::1</code> for
      IPv6).
     </p><p>
      If the Network Teaming device should use a dynamic IP address, set
      <code class="literal">BOOTPROTO="dhcp"</code> and remove (or comment) the line with
      <code class="varname">IPADDRESS</code> and <code class="varname">IPADDR6</code>.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-lb-loadbalance"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Sets <code class="varname">TEAM_RUNNER</code> to <code class="literal">loadbalance</code> to
      activate the load balancing mode.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-lb-dev"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Specifies one or more devices which should be aggregated to create the
      Network Teaming device.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-lb-name"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Defines a link watcher to monitor the state of subordinate devices. The
      default value <code class="literal">ethtool</code> checks only if the device is up
      and accessible. This makes this check fast enough. However, it does not
      check if the device can really send or receive packets.
     </p><p>
      If you need a higher confidence in the connection, use the
      <code class="literal">arp_ping</code> option. This sends pings to an arbitrary host
      (configured in the <code class="varname">TEAM_LW_ARP_PING_TARGET_HOST</code>
      variable). The Network Teaming device is considered to be up only if the
      replies are received.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-lb-ethtool-delay"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Defines the delay in milliseconds between the link coming up (or down)
      and the runner being notified.
     </p></td></tr></table></div></div></div></section><section class="sect2" id="sec-network-iface-teaming-failover" data-id-title="Use case: failover with Network Teaming"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.8.2 </span><span class="title-name">Use case: failover with Network Teaming</span></span> <a title="Permalink" class="permalink" href="#sec-network-iface-teaming-failover">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_teaming.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Failover is used to ensure high availability of a critical Network Teaming device
   by involving a parallel backup network device. The backup network device is
   running all the time and takes over if and when the main device fails.
  </p><p>
   Use the following configuration file to create a Network Teaming device with
   failover capabilities. Proceed with <a class="xref" href="#pro-team-general" title="General procedure">Procedure 23.1, “General procedure”</a> to
   set up the device. Check the output with <code class="command">teamdctl</code>.
  </p><div class="example" id="ex-team-failover" data-id-title="Configuration for DHCP Network Teaming device"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 23.13: </span><span class="title-name">Configuration for DHCP Network Teaming device </span></span><a title="Permalink" class="permalink" href="#ex-team-failover">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_teaming.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">STARTMODE=auto <span class="callout" id="co-team-failover-startmode">1</span>
BOOTPROTO=static <span class="callout" id="co-team-failover-boot-and-ip">2</span>
IPADDR="192.168.1.2/24" <a class="xref" href="#co-team-failover-boot-and-ip"><span class="callout">2</span></a>
IPADDR6="fd00:deca:fbad:50::2/64" <a class="xref" href="#co-team-failover-boot-and-ip"><span class="callout">2</span></a>

TEAM_RUNNER=activebackup <span class="callout" id="co-team-failover-activebackup">3</span>
TEAM_PORT_DEVICE_0="eth0" <span class="callout" id="co-team-failover-dev">4</span>
TEAM_PORT_DEVICE_1="eth1" <a class="xref" href="#co-team-failover-dev"><span class="callout">4</span></a>

TEAM_LW_NAME=ethtool <span class="callout" id="co-team-failover-name">5</span>
TEAM_LW_ETHTOOL_DELAY_UP="10" <span class="callout" id="co-team-failover-ethtool-delay">6</span>
TEAM_LW_ETHTOOL_DELAY_DOWN="10" <a class="xref" href="#co-team-failover-ethtool-delay"><span class="callout">6</span></a></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-failover-startmode"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Controls the start of the teaming device. The value of
      <code class="literal">auto</code> means the interface will be set up when the
      network service is available and will be started automatically on every
      reboot.
     </p><p>
      In case you need to control the device yourself (and prevent it from
      starting automatically), set <code class="varname">STARTMODE</code> to
      <code class="literal">manual</code>.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-failover-boot-and-ip"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Sets a static IP address (here
      <code class="systemitem">192.168.1.2</code>
      for IPv4 and
      <code class="systemitem">fd00:deca:fbad:50::2</code> for
      IPv6).
     </p><p>
      If the Network Teaming device should use a dynamic IP address, set
      <code class="literal">BOOTPROTO="dhcp"</code> and remove (or comment) the line with
      <code class="varname">IPADDRESS</code> and <code class="varname">IPADDR6</code>.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-failover-activebackup"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Sets <code class="varname">TEAM_RUNNER</code> to <code class="literal">activebackup</code> to
      activate the failover mode.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-failover-dev"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Specifies one or more devices which should be aggregated to create the
      Network Teaming device.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-failover-name"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Defines a link watcher to monitor the state of subordinate devices. The
      default value <code class="literal">ethtool</code> checks only if the device is up
      and accessible. This makes this check fast enough. However, it does not
      check if the device can really send or receive packets.
     </p><p>
      If you need a higher confidence in the connection, use the
      <code class="literal">arp_ping</code> option. This sends pings to an arbitrary host
      (configured in the <code class="varname">TEAM_LW_ARP_PING_TARGET_HOST</code>
      variable). Only if the replies are received, the Network Teaming device is
      considered to be up.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-failover-ethtool-delay"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Defines the delay in milliseconds between the link coming up (or down)
      and the runner being notified.
     </p></td></tr></table></div></div></div></section><section class="sect2" id="sec-network-iface-teaming-vlan" data-id-title="Use case: VLAN over team device"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.8.3 </span><span class="title-name">Use case: VLAN over team device</span></span> <a title="Permalink" class="permalink" href="#sec-network-iface-teaming-vlan">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_teaming.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   VLAN is an abbreviation of <span class="emphasis"><em>Virtual Local Area Network</em></span>.
   It allows the running of multiple <span class="emphasis"><em>logical</em></span> (virtual)
   Ethernets over one single physical Ethernet. It logically splits the
   network into different broadcast domains so that packets are only switched
   between ports that are designated for the same VLAN.
  </p><p>
   The following use case creates two static VLANs on top of a team device:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="systemitem">vlan0</code>,
      bound to the IP address <code class="systemitem">192.168.10.1</code></p></li><li class="listitem"><p><code class="systemitem">vlan1</code>,
      bound to the IP address <code class="systemitem">192.168.20.1</code></p></li></ul></div><p>Proceed as follows:</p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Enable the VLAN tags on your switch. To use load balancing
     for your team device, your switch needs to be capable of
     <span class="emphasis"><em>Link Aggregation Control Protocol</em></span> (LACP) (802.3ad).
     Consult your hardware manual about the details.
    </p></li><li class="step"><p>
     Decide if you want to use load balancing or failover for your team device.
     Set up your team device as described in <a class="xref" href="#sec-network-iface-teaming-lb" title="23.8.1. Use case: load balancing with Network Teaming">Section 23.8.1, “Use case: load balancing with Network Teaming”</a>
     or <a class="xref" href="#sec-network-iface-teaming-failover" title="23.8.2. Use case: failover with Network Teaming">Section 23.8.2, “Use case: failover with Network Teaming”</a>.
    </p></li><li class="step"><p>
     In <code class="filename">/etc/sysconfig/network</code> create a file
     <code class="filename">ifcfg-vlan0</code> with the following content:
    </p><div class="verbatim-wrap"><pre class="screen">STARTMODE="auto"
BOOTPROTO="static" <span class="callout" id="co-team-vlan-bootproto">1</span>
IPADDR='192.168.10.1/24' <span class="callout" id="co-team-vlan-ipaddr">2</span>
ETHERDEVICE="team0" <span class="callout" id="co-team-vlan-etherdevice">3</span>
VLAN_ID="0" <span class="callout" id="co-team-vlan-vlan-id">4</span>
VLAN='yes'</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-vlan-bootproto"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Defines a fixed IP address, specified in <code class="varname">IPADDR</code>.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-vlan-ipaddr"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Defines the IP address, here with its netmask.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-vlan-etherdevice"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Contains the real interface to use for the VLAN interface, here our
       team device (<code class="systemitem">team0</code>).
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-team-vlan-vlan-id"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Specifies a unique ID for the VLAN. Preferably, the file name and the
       <code class="varname">VLAN_ID</code> corresponds to the name
       <code class="filename">ifcfg-vlan<em class="replaceable">VLAN_ID</em></code>.
       In our case <code class="varname">VLAN_ID</code> is <code class="literal">0</code> which
       leads to the file name <code class="filename">ifcfg-vlan0</code>.
      </p></td></tr></table></div></li><li class="step"><p>
     Copy the file <code class="filename">/etc/sysconfig/network/ifcfg-vlan0</code> to
     <code class="filename">/etc/sysconfig/network/ifcfg-vlan1</code> and change the
     following values:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       <code class="varname">IPADDR</code> from <code class="systemitem">192.168.10.1/24</code> to <code class="systemitem">192.168.20.1/24</code>.</p></li><li class="listitem"><p>
       <code class="varname">VLAN_ID</code> from <code class="literal">0</code> to
      <code class="literal">1</code>.
      </p></li></ul></div></li><li class="step"><p>
     Start the two VLANs:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">wicked</code> ifup vlan0 vlan1</pre></div></li><li class="step"><p>
     Check the output of <code class="command">ifconfig</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">ifconfig</code> -a
[...]
vlan0     Link encap:Ethernet  HWaddr 08:00:27:DC:43:98
          inet addr:192.168.10.1 Bcast:192.168.10.255 Mask:255.255.255.0
          inet6 addr: fe80::a00:27ff:fedc:4398/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:12 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 b)  TX bytes:816 (816.0 b)

vlan1     Link encap:Ethernet  HWaddr 08:00:27:DC:43:98
          inet addr:192.168.20.1 Bcast:192.168.20.255 Mask:255.255.255.0
          inet6 addr: fe80::a00:27ff:fedc:4398/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:12 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 b)  TX bytes:816 (816.0 b)</pre></div></li></ol></div></div></section></section><section class="sect1" id="sec-network-openvswitch" data-id-title="Software-defined networking with Open vSwitch"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23.9 </span><span class="title-name">Software-defined networking with <span class="productname">Open vSwitch</span></span></span> <a title="Permalink" class="permalink" href="#sec-network-openvswitch">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sdn.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Software-defined networking (SDN) means separating the system that controls
  where traffic is sent (the <span class="emphasis"><em>control plane</em></span>) from the
  underlying system that forwards traffic to the selected destination (the
  <span class="emphasis"><em>data plane</em></span>, also called the <span class="emphasis"><em>forwarding
  plane</em></span>). This means that the functions previously fulfilled by a
  single, usually inflexible switch can now be separated between a switch (data
  plane) and its controller (control plane). In this model, the controller is
  programmable and can be very flexible and adapt quickly to changing network
  conditions.
 </p><p>
  <span class="productname">Open vSwitch</span> is software that implements a distributed virtual multilayer switch
  that is compatible with the

  <span class="productname">OpenFlow</span> protocol.
  <span class="productname">OpenFlow</span> allows a controller application
  to modify the configuration of a switch.
  <span class="productname">OpenFlow</span> is layered onto the TCP protocol
  and is implemented in a range of hardware and software. A single controller
  can thus drive multiple, very different switches.
 </p><section class="sect2" id="sec-network-openvswitch-advantage" data-id-title="Advantages of Open vSwitch"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.9.1 </span><span class="title-name">Advantages of <span class="productname">Open vSwitch</span></span></span> <a title="Permalink" class="permalink" href="#sec-network-openvswitch-advantage">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sdn.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Software-defined networking with <span class="productname">Open vSwitch</span> brings several advantages with it,
   especially when you used together with virtual machines:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Networking states can be identified easily.
    </p></li><li class="listitem"><p>
     Networks and their live state can be moved from one host to another.
    </p></li><li class="listitem"><p>
     Network dynamics are traceable and external software can be enabled to
     respond to them.
    </p></li><li class="listitem"><p>
     You can apply and manipulate tags in network packets to identify which
     machine they are coming from or going to and maintain other networking
     context.  Tagging rules can be configured and migrated.
    </p></li><li class="listitem"><p>
     <span class="productname">Open vSwitch</span> implements the GRE protocol (<span class="emphasis"><em>Generic Routing
     Encapsulation</em></span>). This allows you, for example, to connect
     private VM networks to each other.
    </p></li><li class="listitem"><p>
     <span class="productname">Open vSwitch</span> can be used on its own, but is designed to integrate with networking
     hardware and can control hardware switches.
    </p></li></ul></div></section><section class="sect2" id="sec-network-openvswitch-install" data-id-title="Installing Open vSwitch"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.9.2 </span><span class="title-name">Installing <span class="productname">Open vSwitch</span></span></span> <a title="Permalink" class="permalink" href="#sec-network-openvswitch-install">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sdn.xml" title="Edit source document"> </a></div></div></div></div></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Install <span class="productname">Open vSwitch</span> and supplementary packages:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">zypper</code> install openvswitch openvswitch-switch</pre></div><p>
     If you plan to use <span class="productname">Open vSwitch</span> together with the KVM hypervisor, additionally
     install
     <span class="package">tunctl</span>
     . If you plan to use <span class="productname">Open vSwitch</span> together with the Xen hypervisor,
     additionally install
     <span class="package">openvswitch-kmp-xen</span>
     .
    </p></li><li class="step"><p>
     Enable the <span class="productname">Open vSwitch</span> service:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">systemctl</code> enable openvswitch</pre></div></li><li class="step"><p>
     Either restart the computer or use <code class="command">systemctl</code> to start
     the <span class="productname">Open vSwitch</span> service immediately:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">systemctl</code> start openvswitch</pre></div></li><li class="step"><p>
     To check whether <span class="productname">Open vSwitch</span> was activated correctly, use:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">systemctl</code> status openvswitch</pre></div></li></ol></div></div></section><section class="sect2" id="sec-network-openvswitch-userspace" data-id-title="Overview of Open vSwitch daemons and utilities"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.9.3 </span><span class="title-name">Overview of <span class="productname">Open vSwitch</span> daemons and utilities</span></span> <a title="Permalink" class="permalink" href="#sec-network-openvswitch-userspace">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sdn.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <span class="productname">Open vSwitch</span> consists of several components. Among them are a kernel module and
   various user space components. The kernel module is used for accelerating
   the data path, but is not necessary for a minimal <span class="productname">Open vSwitch</span> installation.
  </p><section class="sect3" id="sec-network-openvswitch-daemon" data-id-title="Daemons"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.9.3.1 </span><span class="title-name">Daemons</span></span> <a title="Permalink" class="permalink" href="#sec-network-openvswitch-daemon">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sdn.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The central executables of <span class="productname">Open vSwitch</span> are its two daemons. When you start the
    <code class="systemitem">openvswitch</code> service, you are indirectly starting
    them.
   </p><p>
    The main <span class="productname">Open vSwitch</span> daemon (<code class="command">ovs-vswitchd</code>) provides the
    implementation of a switch. The <span class="productname">Open vSwitch</span> database daemon
    (<code class="command">ovsdb-server</code>) serves the database that stores the
    configuration and state of <span class="productname">Open vSwitch</span>.
   </p></section><section class="sect3" id="sec-network-openvswitch-utility" data-id-title="Utilities"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">23.9.3.2 </span><span class="title-name">Utilities</span></span> <a title="Permalink" class="permalink" href="#sec-network-openvswitch-utility">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sdn.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <span class="productname">Open vSwitch</span> also comes with several utilities that help you work with it. The
    following list is not exhaustive, but instead describes important commands
    only.
   </p><div class="variablelist" id="vl-ovs-utility"><dl class="variablelist"><dt id="id-1.3.5.5.21.7.4.3.1"><span class="term"><code class="command">ovsdb-tool</code>
     </span></dt><dd><p>
       Create, upgrade, compact, and query <span class="productname">Open vSwitch</span> databases. Do transactions on
       <span class="productname">Open vSwitch</span> databases.
      </p></dd><dt id="id-1.3.5.5.21.7.4.3.2"><span class="term"><code class="command">ovs-appctl</code>
     </span></dt><dd><p>
       Configure a running <code class="command">ovs-vswitchd</code> or
       <code class="command">ovsdb-server</code> daemon.
      </p></dd><dt id="id-1.3.5.5.21.7.4.3.3"><span class="term"><code class="command">ovs-dpctl</code>, <code class="command">ovs-dpctl-top</code>
     </span></dt><dd><p>
       Create, modify, visualize, and delete data paths. Using this tool can
       interfere with <code class="command">ovs-vswitchd</code> also performing data path
       management. Therefore, it is often used for diagnostics only.
      </p><p>
       <code class="command">ovs-dpctl-top</code> creates a <code class="command">top</code>-like
       visualization for data paths.
       
      </p></dd><dt id="id-1.3.5.5.21.7.4.3.4"><span class="term"><code class="command">ovs-ofctl</code>
     </span></dt><dd><p>
       Manage any switches adhering to the
       <span class="productname">OpenFlow</span> protocol.
       <code class="command">ovs-ofctl</code> is not limited to interacting with <span class="productname">Open vSwitch</span>.
      </p></dd><dt id="id-1.3.5.5.21.7.4.3.5"><span class="term"><code class="command">ovs-vsctl</code>
     </span></dt><dd><p>
       Provides a high-level interface to the configuration database. It can be
       used to query and modify the database. In effect, it shows the status of
       <code class="command">ovs-vswitchd</code> and can be used to configure it.
      </p></dd></dl></div></section></section><section class="sect2" id="sec-network-openvswitch-bridge" data-id-title="Creating a bridge with Open vSwitch"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.9.4 </span><span class="title-name">Creating a bridge with <span class="productname">Open vSwitch</span></span></span> <a title="Permalink" class="permalink" href="#sec-network-openvswitch-bridge">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sdn.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The following example configuration uses the Wicked network service that is
   used by default on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. To learn more about Wicked, see
   <a class="xref" href="#sec-network-manconf" title="23.5. Configuring a network connection manually">Section 23.5, “Configuring a network connection manually”</a>.
  </p><p>
   When you have installed and started <span class="productname">Open vSwitch</span>, proceed as follows:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     To configure a bridge for use by your virtual machine, create a file with
     content like this:
    </p><div class="verbatim-wrap"><pre class="screen">STARTMODE='auto'<span class="callout" id="ovs-ifcfg-mode">1</span>
BOOTPROTO='dhcp'<span class="callout" id="ovs-ifcfg-protocol">2</span>
OVS_BRIDGE='yes'<span class="callout" id="ovs-ifcfg-bridge">3</span>
OVS_BRIDGE_PORT_DEVICE_1='<em class="replaceable">eth0</em>'<span class="callout" id="ovs-ifcfg-port">4</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#ovs-ifcfg-mode"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Set up the bridge automatically when the network service is started.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#ovs-ifcfg-protocol"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       The protocol to use for configuring the IP address.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#ovs-ifcfg-bridge"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Mark the configuration as an <span class="productname">Open vSwitch</span> bridge.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#ovs-ifcfg-port"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Choose which device/devices should be added to the bridge. To add more
       devices, append additional lines for each of them to the file:
      </p><div class="verbatim-wrap"><pre class="screen">OVS_BRIDGE_PORT_DEVICE_<em class="replaceable">SUFFIX</em>='<em class="replaceable">DEVICE</em>'</pre></div><p>
       The <em class="replaceable">SUFFIX</em> can be any alphanumeric string.
       However, to avoid overwriting a previous definition, make sure the
       <em class="replaceable">SUFFIX</em> of each device is unique.
      </p></td></tr></table></div><p>
     Save the file in the directory <code class="filename">/etc/sysconfig/network</code>
     under the name <code class="filename">ifcfg-br0</code>. Instead of
     <em class="replaceable">br0</em>, you can use any name you want. However,
     the file name needs to begin with <code class="literal">ifcfg-</code>.
    </p><p>
     To learn about further options, refer to the man pages of
     <code class="literal">ifcfg</code> (<code class="command">man 5 ifcfg</code>) and
     <code class="literal">ifcfg-ovs-bridge</code> (<code class="command">man 5
     ifcfg-ovs-bridge</code>).
    </p></li><li class="step"><p>
     Now start the bridge:
     
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">wicked</code> ifup <em class="replaceable">br0</em></pre></div><p>
     When Wicked is done, it should output the name of the bridge and next to
     it the state <code class="literal">up</code>.
    </p></li></ol></div></div></section><section class="sect2" id="sec-network-openvswitch-kvm" data-id-title="Using Open vSwitch directly with KVM"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.9.5 </span><span class="title-name">Using <span class="productname">Open vSwitch</span> directly with KVM</span></span> <a title="Permalink" class="permalink" href="#sec-network-openvswitch-kvm">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sdn.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   After having created the bridge as described in
   <a class="xref" href="#sec-network-openvswitch-bridge" title="23.9.4. Creating a bridge with Open vSwitch">Section 23.9.4, “Creating a bridge with <span class="productname">Open vSwitch</span>”</a>, you can use <span class="productname">Open vSwitch</span> to manage the network
   access of virtual machines created with KVM/QEMU.
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     To be able to best use the capabilities of Wicked, make some further
     changes to the bridge configured before. Open the previously created
     <code class="filename">/etc/sysconfig/network/ifcfg-br0</code> and append a line
     for another port device:
    </p><div class="verbatim-wrap"><pre class="screen">OVS_BRIDGE_PORT_DEVICE_2='<em class="replaceable">tap0</em>'</pre></div><p>
     Additionally, set <code class="literal">BOOTPROTO</code> to <code class="literal">none</code>.
     The file should now look like this:
    </p><div class="verbatim-wrap"><pre class="screen">STARTMODE='auto'
BOOTPROTO='none'
OVS_BRIDGE='yes'
OVS_BRIDGE_PORT_DEVICE_1='<em class="replaceable">eth0</em>'
OVS_BRIDGE_PORT_DEVICE_2='<em class="replaceable">tap0</em>'</pre></div><p>
     The new port device <em class="replaceable">tap0</em> will be configured in
     the next step.
    </p></li><li class="step"><p>
     Now add a configuration file for the <em class="replaceable">tap0</em>
     device:
    </p><div class="verbatim-wrap"><pre class="screen">STARTMODE='auto'
BOOTPROTO='none'
TUNNEL='tap'</pre></div><p>
     Save the file in the directory <code class="filename">/etc/sysconfig/network</code>
     under the name <code class="filename">ifcfg-tap0</code>.
    </p><div id="id-1.3.5.5.21.9.3.2.4" data-id-title="Allowing other users to access the tap device" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Allowing other users to access the tap device</div><p>
      To be able to use this tap device from a virtual machine started as a
      user who is not <code class="systemitem">root</code>, append:
     </p><div class="verbatim-wrap"><pre class="screen">TUNNEL_SET_OWNER=<em class="replaceable">USER_NAME</em></pre></div><p>
      To allow access for an entire group, append:
     </p><div class="verbatim-wrap"><pre class="screen">TUNNEL_SET_GROUP=<em class="replaceable">GROUP_NAME</em></pre></div></div></li><li class="step"><p>
     Finally, open the configuration for the device defined as the first
     <code class="literal">OVS_BRIDGE_PORT_DEVICE</code>. If you did not change the name,
     that should be <code class="literal">eth0</code>. Therefore, open
     <code class="filename">/etc/sysconfig/network/ifcfg-eth0</code> and make sure that
     the following options are set:
    </p><div class="verbatim-wrap"><pre class="screen">STARTMODE='auto'
BOOTPROTO='none'</pre></div><p>
     If the file does not exist yet, create it.
    </p></li><li class="step"><p>
     Restart the bridge interface using Wicked:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">wicked</code> ifreload <em class="replaceable">br0</em></pre></div><p>
     This will also trigger a reload of the newly defined bridge port devices.
    </p></li><li class="step"><p>
     To start a virtual machine, use, for example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">qemu-kvm</code> \
-drive file=<em class="replaceable">/PATH/TO/DISK-IMAGE</em><span class="callout" id="co-ovs-pathimage">1</span> \
-m 512 -net nic,vlan=0,macaddr=00:11:22:EE:EE:EE \
-net tap,ifname=<em class="replaceable">tap0</em>,script=no,downscript=no<span class="callout" id="co-ovs-tapdevice">2</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ovs-pathimage"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       The path to the QEMU disk image you want to start.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ovs-tapdevice"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Use the tap device (<code class="literal">tap0</code>) created before.
      </p></td></tr></table></div><p>
     For further information on the usage of KVM/QEMU, see
     <span class="intraxref">Book “Virtualization Guide”</span>.
    </p></li></ol></div></div></section><section class="sect2" id="sec-network-openvswitch-libvirt" data-id-title="Using Open vSwitch with libvirt"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.9.6 </span><span class="title-name">Using <span class="productname">Open vSwitch</span> with <code class="systemitem">libvirt</code></span></span> <a title="Permalink" class="permalink" href="#sec-network-openvswitch-libvirt">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sdn.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   After having created the bridge as described before in
   <a class="xref" href="#sec-network-openvswitch-bridge" title="23.9.4. Creating a bridge with Open vSwitch">Section 23.9.4, “Creating a bridge with <span class="productname">Open vSwitch</span>”</a>, you can add the bridge to an existing
   virtual machine managed with <code class="systemitem">libvirt</code>. Since <code class="systemitem">libvirt</code> has some support for
   <span class="productname">Open vSwitch</span> bridges already, you can use the bridge created in
   <a class="xref" href="#sec-network-openvswitch-bridge" title="23.9.4. Creating a bridge with Open vSwitch">Section 23.9.4, “Creating a bridge with <span class="productname">Open vSwitch</span>”</a> without further changes to the networking
   configuration.
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open the domain XML file for the intended virtual machine:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">virsh</code> edit <em class="replaceable">VM_NAME</em></pre></div><p>
     Replace <em class="replaceable">VM_NAME</em> with the name of the desired
     virtual machine. This will open your default text editor.
    </p></li><li class="step"><p>
     Find the networking section of the document by looking for a section
     starting with <code class="literal">&lt;interface type="..."&gt;</code> and ending
     in <code class="literal">&lt;/interface&gt;</code>.
    </p><p>
     Replace the existing section with a networking section that looks somewhat
     like this:
    </p><div class="verbatim-wrap"><pre class="screen">&lt;interface type='bridge'&gt;
  &lt;source bridge='br0'/&gt;
  &lt;virtualport type='openvswitch'/&gt;
&lt;/interface&gt;</pre></div><div id="id-1.3.5.5.21.10.3.2.4" data-id-title="Compatibility of virsh iface-* and Virtual Machine Manager with Open vSwitch" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Compatibility of <code class="command">virsh iface-*</code> and Virtual Machine Manager with <span class="productname">Open vSwitch</span></div><p>
      At the moment, the <span class="productname">Open vSwitch</span> compatibility of <code class="systemitem">libvirt</code> is not exposed
      through the <code class="command">virsh iface-*</code> tools and Virtual Machine Manager. If you use
      any of these tools, your configuration can break.
     </p></div></li><li class="step"><p>
     You can now start or restart the virtual machine as usual.
    </p></li></ol></div></div><p>
   For further information on the usage of <code class="systemitem">libvirt</code>, see
   <span class="intraxref">Book “Virtualization Guide”</span>.
  </p></section><section class="sect2" id="sec-network-openvswitch-more" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.9.7 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-network-openvswitch-more">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_sdn.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     For more information on SDN, refer to the documentation section of the
     <span class="productname">Open vSwitch</span> project Web site at <a class="link" href="https://docs.openvswitch.org/en/latest/#documentation" target="_blank">https://docs.openvswitch.org/en/latest/#documentation</a>.
   </p></section></section></section><section class="chapter" id="cha-print" data-id-title="Printer operation"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">24 </span><span class="title-name">Printer operation</span></span> <a title="Permalink" class="permalink" href="#cha-print">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> supports printing with many types of printers, including
  remote network printers. Printers can be configured manually or with YaST.
  For configuration instructions, refer to <a class="xref" href="#sec-yast-hw-print" title="Chapter 34. Setting up a printer">Chapter 34, <em>Setting up a printer</em></a>.
  Both graphical and command line utilities are available for starting and
  managing print jobs. If your printer does not work as expected, refer to
  <a class="xref" href="#sec-print-prob" title="24.8. Troubleshooting">Section 24.8, “Troubleshooting”</a>.
 </p><p>
  CUPS (Common Unix Printing System) is the standard print system in
  <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
 </p><p>
  Printers can be distinguished by interface, such as USB or network, and
  printer language. When buying a printer, make sure that the printer has an
  interface that is supported (USB, Ethernet or Wi-Fi) and a suitable printer
  language. Printers can be categorized on the basis of the following three
  classes of printer languages:
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.6.6.1"><span class="term">PostScript printers</span></dt><dd><p>
     PostScript is the printer language in which most print jobs in Linux and
     Unix are generated and processed by the internal print system. If
     PostScript documents can be processed directly by the printer and do not
     need to be converted in additional stages in the print system, the number
     of potential error sources is reduced.
    </p><p>
     Currently PostScript is being replaced by PDF as the standard print job
     format. PostScript+PDF printers that can directly print PDF (in addition
     to PostScript) already exist. For traditional PostScript printers PDF
     needs to be converted to PostScript in the printing workflow.
    </p></dd><dt id="id-1.3.5.6.6.2"><span class="term">Standard printers (languages like PCL and ESC/p)</span></dt><dd><p>
     For known printer languages, the print system can convert PostScript jobs
     to the respective printer language with Ghostscript. This processing stage
     is called interpreting. The best-known languages are PCL (which is used by
     HP printers and their clones) and ESC/P (which is used by Epson printers).
     These printer languages are normally supported by Linux and produce an
     adequate print result. Linux may not be able to address certain special
     printer functions. Except for HP and Epson, there are currently no printer
     manufacturers who develop Linux drivers and make them available to Linux
     distributors under an open source license.
    </p></dd><dt id="sec-print-prep-gdi"><span class="term">Proprietary printers (also called GDI printers)</span></dt><dd><p>
     These printers do not support any of the common printer languages. They
     use their own undocumented printer languages, which are subject to change
     when a new edition of a model is released. Normally, only Windows drivers
     are available for these printers. See <a class="xref" href="#sec-print-gdi" title="24.8.1. Printers without standard printer language support">Section 24.8.1, “Printers without standard printer language support”</a>
     for more information.
    </p></dd></dl></div><p>
  Before you buy a new printer, refer to the following sources to check how
  well the printer you intend to buy is supported:
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.6.8.1"><span class="term"><a class="link" href="https://www.openprinting.org/printers" target="_blank">https://www.openprinting.org/printers</a>
   </span></dt><dd><p>
     The OpenPrinting home page with the printer database. The database shows
     the latest Linux support status. However, a Linux distribution can only
     integrate the drivers available at production time. Accordingly, a printer
     currently rated as <span class="quote">“<span class="quote">perfectly supported</span>”</span> may not have had
     this status when the latest <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> version was released. Thus, the
     databases may not necessarily indicate the correct status, but only
     provide an approximation.
    </p></dd><dt id="id-1.3.5.6.8.2"><span class="term"><a class="link" href="https://www.ghostscript.com" target="_blank">https://www.ghostscript.com</a>
   </span></dt><dd><p>
     The Ghostscript Web page.
    </p></dd><dt id="id-1.3.5.6.8.3"><span class="term"><code class="filename">/usr/share/doc/packages/ghostscript/catalog.devices</code>
   </span></dt><dd><p>
     List of built-in Ghostscript drivers.
    </p></dd></dl></div><section class="sect1" id="sec-print-workflow" data-id-title="The CUPS workflow"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">24.1 </span><span class="title-name">The CUPS workflow</span></span> <a title="Permalink" class="permalink" href="#sec-print-workflow">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The user creates a print job. The print job consists of the data to print
   plus information for the spooler. This includes the name of the printer or the
   name of the print queue, and optionally, information for the filter, such as
   printer-specific options.
  </p><p>
   At least one dedicated print queue exists for every printer. The spooler
   holds the print job in the queue until the desired printer is ready to
   receive data. When the printer is ready, the spooler sends the data through
   the filter and back-end to the printer.
  </p><p>
   The filter converts the data generated by the application that is printing
   (normally PostScript or PDF, but also ASCII, JPEG, etc.) into
   printer-specific data (PostScript, PCL, ESC/P, etc.). The features of the
   printer are described in the PPD files. A PPD file contains printer-specific
   options with the parameters needed to enable them on the printer. The filter
   system makes sure that options selected by the user are enabled.
  </p><p>
   If you use a PostScript printer, the filter system converts the data into
   printer-specific PostScript. This does not require a printer driver. If you
   use a non-PostScript printer, the filter system converts the data into
   printer-specific data. This requires a printer driver suitable for your
   printer. The back-end receives the printer-specific data from the filter
   then passes it to the printer.
  </p></section><section class="sect1" id="sec-print-method" data-id-title="Methods and protocols for connecting printers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">24.2 </span><span class="title-name">Methods and protocols for connecting printers</span></span> <a title="Permalink" class="permalink" href="#sec-print-method">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   There are multiple possibilities for connecting a printer to the system. The
   configuration of CUPS does not distinguish between a local printer and a
   printer connected to the system over the network. For more information about
   the printer connection, read the article <span class="emphasis"><em>CUPS in a
   Nutshell</em></span> at
   <a class="link" href="https://en.opensuse.org/SDB:CUPS_in_a_Nutshell" target="_blank">https://en.opensuse.org/SDB:CUPS_in_a_Nutshell</a>.
  </p><p><strong class="arch-arrow-start">IBM Z</strong>
   Printers and similar devices provided by the z/VM that connect locally with
   the IBM Z mainframes are not supported by CUPS. On these platforms,
   printing is only possible over the network. The cabling for network printers
   must be installed according to the instructions of the printer manufacturer.
  <strong class="arch-arrow-end"> </strong></p><div id="id-1.3.5.6.10.4" data-id-title="Changing cable connections in a running system" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Changing cable connections in a running system</div><p>
    When connecting the printer to the machine, do not forget that only USB
    devices can be plugged in or unplugged during operation. To avoid damaging
    your system or printer, shut down the system before changing any
    connections that are not USB.
   </p></div></section><section class="sect1" id="sec-print-software" data-id-title="Installing the software"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">24.3 </span><span class="title-name">Installing the software</span></span> <a title="Permalink" class="permalink" href="#sec-print-software">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   PPD (PostScript printer description) is the computer language that describes
   the properties, like resolution, and options, such as the availability of a
   duplex unit. These descriptions are required for using printer options in
   CUPS. Without a PPD file, the print data would be forwarded to the printer in
   a <span class="quote">“<span class="quote">raw</span>”</span> state, which is not desired.
  </p><p>
   To configure a PostScript printer, the best approach is to get a suitable
   PPD file. Many PPD files are available in the packages
   <code class="systemitem">manufacturer-PPDs</code> and
   <code class="systemitem">OpenPrintingPPDs-postscript</code>. See
   <a class="xref" href="#sec-print-special-ppd" title="24.7.3. PPD files in multiple packages">Section 24.7.3, “PPD files in multiple packages”</a> and
   <a class="xref" href="#sec-print-prob-ppd" title="24.8.2. No suitable PPD file available for a PostScript printer">Section 24.8.2, “No suitable PPD file available for a PostScript printer”</a>.
  </p><p>
   New PPD files can be stored in the directory
   <code class="filename">/usr/share/cups/model/</code> or added to the print system
   with YaST as described in <a class="xref" href="#sec-yast-hw-print-local-get-ppd" title="34.1.1. Adding drivers with YaST">Section 34.1.1, “Adding drivers with YaST”</a>.
   Subsequently, the PPD file can be selected during the printer setup.
  </p><p>
   Be careful if a printer manufacturer wants you to install entire software
   packages. This kind of installation may result in the loss of the
   support provided by <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. Also, print commands may work
   differently and the system may no longer be able to address devices of other
   manufacturers. For this reason, the installation of manufacturer software is
   not recommended.
  </p></section><section class="sect1" id="sec-print-net" data-id-title="Network printers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">24.4 </span><span class="title-name">Network printers</span></span> <a title="Permalink" class="permalink" href="#sec-print-net">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A network printer can support multiple protocols. Although most of the
   supported protocols are standardized, certain manufacturers modify the
   standard. Manufacturers then provide drivers for only a few operating systems
   and Linux drivers are rarely provided. The current situation is such that you
   cannot act on the assumption that every protocol works smoothly in Linux.
   Therefore, you may need to experiment with several options to achieve a
   functional configuration.
  </p><p>
   CUPS supports the <code class="systemitem">socket</code>,
   <code class="systemitem">LPD</code>, <code class="systemitem">IPP</code> and
   <code class="systemitem">smb</code> protocols.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.6.12.4.1"><span class="term">socket</span></dt><dd><p>
      <span class="emphasis"><em>Socket</em></span> refers to a connection in which the plain
      print data is sent directly to a TCP socket. Socket port numbers
      that are commonly used are <code class="option">9100</code> or <code class="option">35</code>.
      The device URI (uniform resource identifier) syntax is:
      socket://<em class="replaceable">IP.OF.THE.PRINTER</em>:<em class="replaceable">PORT</em>,
      for example: <code class="systemitem">socket://192.168.2.202:9100/</code>.
     </p></dd><dt id="id-1.3.5.6.12.4.2"><span class="term">LPD (line printer daemon)</span></dt><dd><p>
      The LPD protocol is described in RFC 1179. Under this protocol,
      specific job-related data, such as the ID of the print queue, is sent
      before the actual print data is sent. Therefore, a print queue must be
      specified when configuring the LPD protocol. The implementations of
      diverse printer manufacturers are flexible enough to accept any name as
      the print queue. If necessary, the printer manual should indicate what
      name to use. LPT, LPT1, LP1 or similar names are often used. The port
      number for an LPD service is <code class="option">515</code>. An example device URI
      is
      <code class="systemitem">lpd://192.168.2.202/LPT1</code>.
     </p></dd><dt id="id-1.3.5.6.12.4.3"><span class="term">IPP (Internet printing protocol)</span></dt><dd><p>
      IPP is based on the HTTP protocol. With
      IPP, more job-related data is transmitted than with the other protocols.
      CUPS uses IPP for internal data transmission. The name of the print queue
      is necessary to configure IPP correctly. The port number for IPP is
      <code class="literal">631</code>. Example device URIs are
      <code class="systemitem">ipp://192.168.2.202/ps</code> and
      <code class="systemitem">ipp://192.168.2.202/printers/ps</code>.
     </p></dd><dt id="id-1.3.5.6.12.4.4"><span class="term">SMB (Windows share)</span></dt><dd><p>
      CUPS also supports printing on printers connected to Windows shares. The
      protocol used for this purpose is SMB. SMB uses the port numbers
      <code class="option">137</code>, <code class="option">138</code> and <code class="option">139</code>.
      Example device URIs are
      <code class="systemitem">smb://user:password@workgroup/smb.example.com/printer</code>,
      <code class="systemitem">smb://user:password@smb.example.com/printer</code>, and
      <code class="systemitem">smb://smb.example.com/printer</code>.
     </p></dd></dl></div><p>
   The protocol supported by the printer must be determined before
   configuration. If the manufacturer does not provide the needed information,
   the command <code class="command">nmap</code> (which comes with the
   <code class="systemitem">nmap</code> package) can be used to ascertain the
   protocol. <code class="command">nmap</code> checks a host for open ports. For example:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>nmap -p 35,137-139,515,631,9100-10000 <em class="replaceable">IP.OF.THE.PRINTER</em></pre></div></section><section class="sect1" id="sec-print-net-config-cmdl" data-id-title="Configuring CUPS with command line tools"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">24.5 </span><span class="title-name">Configuring CUPS with command line tools</span></span> <a title="Permalink" class="permalink" href="#sec-print-net-config-cmdl">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   CUPS can be configured with command line tools like
   <code class="command">lpinfo</code>, <code class="command">lpadmin</code> and
   <code class="command">lpoptions</code>. You need a device URI consisting of a
   back-end, such as USB, and parameters. To determine valid device URIs on
   your system use the command <code class="command">lpinfo -v | grep ":/"</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> lpinfo -v | grep ":/"
direct usb://ACME/FunPrinter%20XL
network socket://192.168.2.253</pre></div><p>
   With <code class="command">lpadmin</code> the CUPS server administrator can add,
   remove or manage print queues. To add a print queue, use the following
   syntax:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> lpadmin -p <em class="replaceable">QUEUE</em> -v <em class="replaceable">DEVICE-URI</em> -P <em class="replaceable">PPD-FILE</em> -E</pre></div><p>
   Then the device (<code class="option">-v</code>) is available as
   <em class="replaceable">QUEUE</em> (<code class="option">-p</code>), using the specified
   PPD file (<code class="option">-P</code>). This means that you must know the PPD file
   and the device URI to configure the printer manually.
  </p><p>
   Do not use <code class="option">-E</code> as the first option. For all CUPS commands,
   <code class="option">-E</code> as the first argument sets use of an encrypted
   connection. To enable the printer, <code class="option">-E</code> must be used as shown
   in the following example:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> lpadmin -p ps -v usb://ACME/FunPrinter%20XL -P \
/usr/share/cups/model/Postscript.ppd.gz -E</pre></div><p>
   The following example configures a network printer:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> lpadmin -p ps -v socket://192.168.2.202:9100/ -P \
/usr/share/cups/model/Postscript-level1.ppd.gz -E</pre></div><p>
   For more options of <code class="command">lpadmin</code>, see the man page of
   <code class="systemitem">lpadmin(8)</code>.
  </p><p>
   During printer setup, certain options are set as default. These options can
   be modified for every print job (depending on the print tool used). Changing
   these default options with YaST is also possible. Using command line
   tools, set default options as follows:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     First, list all options:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> lpoptions -p <em class="replaceable">QUEUE</em> -l</pre></div><p>
     Example:
    </p><div class="verbatim-wrap"><pre class="screen">Resolution/Output Resolution: 150dpi *300dpi 600dpi</pre></div><p>
     The activated default option is identified by a preceding asterisk
     (<code class="literal">*</code>).
    </p></li><li class="step"><p>
     Change the option with <code class="command">lpadmin</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> lpadmin -p <em class="replaceable">QUEUE</em> -o Resolution=600dpi</pre></div></li><li class="step"><p>
     Check the new setting:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> lpoptions -p <em class="replaceable">QUEUE</em> -l

Resolution/Output Resolution: 150dpi 300dpi *600dpi</pre></div></li></ol></div></div><p>
   When a normal user runs <code class="command">lpoptions</code>, the settings are
   written to <code class="filename">~/.cups/lpoptions</code>. However,
   <code class="systemitem">root</code> settings are written to
   <code class="filename">/etc/cups/lpoptions</code>.
  </p></section><section class="sect1" id="sec-print-appl-commandline" data-id-title="Printing from the command line"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">24.6 </span><span class="title-name">Printing from the command line</span></span> <a title="Permalink" class="permalink" href="#sec-print-appl-commandline">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To print from the command line, enter <code class="command">lp -d</code>
   <em class="replaceable">QUEUENAME</em> <em class="replaceable">FILENAME</em>,
   substituting the corresponding names for
   <em class="replaceable">QUEUENAME</em> and
   <em class="replaceable">FILENAME</em>.
  </p><p>
   Several applications rely on the <code class="command">lp</code> command for printing.
   In this case, enter the correct command in the application's print dialog,
   normally without specifying <em class="replaceable">FILENAME</em>, for example,
   <code class="command">lp -d</code> <em class="replaceable">QUEUENAME</em>.
  </p></section><section class="sect1" id="sec-print-special" data-id-title="Special features in SUSE Linux Enterprise Server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">24.7 </span><span class="title-name">Special features in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span></span> <a title="Permalink" class="permalink" href="#sec-print-special">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Several CUPS features have been adapted for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. The most important
   changes are covered here.
  </p><section class="sect2" id="sec-print-special-cupsfire" data-id-title="CUPS and firewall"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.7.1 </span><span class="title-name">CUPS and firewall</span></span> <a title="Permalink" class="permalink" href="#sec-print-special-cupsfire">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    After completing a default installation of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>,
    <code class="systemitem">firewalld</code> is active and the network interfaces are configured to be in
    the <code class="literal">public</code> zone, which blocks incoming traffic. 
</p><p>
       When <code class="systemitem">firewalld</code> is active, you may need to configure it to
       allow clients to browse network printers by allowing
       <code class="literal">mdns</code> and <code class="literal">ipp</code> through
       the internal network zone. The public zone should never
       expose printer queues. 
   </p><p>
    (More
    information about the <code class="systemitem">firewalld</code> configuration is available in
    <span class="intraxref">Book “Security and Hardening Guide”, Chapter 23 “Masquerading and firewalls”, Section 23.4 “<code class="systemitem">firewalld</code>”</span> and at
    <a class="link" href="https://en.opensuse.org/SDB:CUPS_and_SANE_Firewall_settings" target="_blank">https://en.opensuse.org/SDB:CUPS_and_SANE_Firewall_settings</a>.)
   </p><section class="sect3" id="sec-print-special-cupsfire-client" data-id-title="CUPS client"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">24.7.1.1 </span><span class="title-name">CUPS client</span></span> <a title="Permalink" class="permalink" href="#sec-print-special-cupsfire-client">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Normally, a CUPS client runs on a regular workstation located in a trusted
     network environment behind a firewall. In this case, it is recommended to
     configure the network interface to be in the <code class="literal">Internal
     Zone</code>, so the workstation is reachable from within the network.
    </p></section><section class="sect3" id="sec-print-special-cupsfire-server" data-id-title="CUPS server"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">24.7.1.2 </span><span class="title-name">CUPS server</span></span> <a title="Permalink" class="permalink" href="#sec-print-special-cupsfire-server">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     If the CUPS server is part of a trusted network environment protected by a
     firewall, the network interface should be configured to be in the
     <code class="literal">Internal Zone</code> of the firewall. It is not recommended to
     set up a CUPS server in an untrusted network environment unless you ensure
     that it is protected by special firewall rules and secure settings in
     the CUPS configuration.
    </p></section></section><section class="sect2" id="sec-print-special-browsing" data-id-title="Browsing for network printers"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.7.2 </span><span class="title-name">Browsing for network printers</span></span> <a title="Permalink" class="permalink" href="#sec-print-special-browsing">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    CUPS servers regularly announce the availability and status information of
    shared printers over the network. Clients can access this information to
    display a list of available printers in printing dialogs, for example. This
    is called <span class="quote">“<span class="quote">browsing</span>”</span>.
   </p><p>
    CUPS servers announce their print queues over the network either via the
    traditional CUPS browsing protocol, or via Bonjour/DNS-SD. To enable browsing network print queues, the service
    <code class="systemitem">cups-browsed</code> needs to run on all
    clients that print via CUPS servers.
    <code class="systemitem">cups-browsed</code> is not started by
    default. To start it for the active session, use <code class="command">sudo systemctl
    start cups-browsed</code>. To ensure it is automatically started after
    booting, enable it with <code class="command">sudo systemctl enable
    cups-browsed</code> on all clients.
   </p><p>
    In case browsing does not work after having started
    <code class="systemitem">cups-browsed</code>, the CUPS servers
    announce the network print queues via Bonjour/DNS-SD. In this case,
    you need to additionally install the package
    <code class="systemitem">avahi</code> and start the associated
    service with <code class="command">sudo systemctl start avahi-daemon</code> on all
    clients.
   </p><p>
       See <a class="xref" href="#sec-print-special-cupsfire" title="24.7.1. CUPS and firewall">Section 24.7.1, “CUPS and firewall”</a> for information
       on allowing printer browsing through <code class="systemitem">firewalld</code>.
   </p></section><section class="sect2" id="sec-print-special-ppd" data-id-title="PPD files in multiple packages"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.7.3 </span><span class="title-name">PPD files in multiple packages</span></span> <a title="Permalink" class="permalink" href="#sec-print-special-ppd">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The YaST printer configuration sets up the queues for CUPS using the PPD
    files installed in <code class="filename">/usr/share/cups/model</code>. To find the
    suitable PPD files for the printer model, YaST compares the vendor and
    model determined during hardware detection with the vendors and models in
    all PPD files. For this purpose, the YaST printer configuration generates
    a database from the vendor and model information extracted from the PPD
    files.
   </p><p>
    The configuration using only PPD files and no other information sources has
    the advantage that the PPD files in
    <code class="filename">/usr/share/cups/model</code> can be modified freely. For
    example, if you have PostScript printers the PPD files can be copied
    directly to <code class="filename">/usr/share/cups/model</code> (if they do not
    already exist in the <code class="systemitem">manufacturer-PPDs</code> or
    <code class="systemitem">OpenPrintingPPDs-postscript</code> packages) to achieve
    an optimum configuration for your printers.
   </p><p>
    Additional PPD files are provided by the following packages:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <code class="systemitem">gutenprint</code>: the Gutenprint driver and its matching PPDs
     </p></li><li class="listitem"><p>
      <code class="systemitem">splix</code>: the SpliX driver and its matching PPDs
     </p></li><li class="listitem"><p>
      <code class="systemitem">OpenPrintingPPDs-ghostscript</code>: PPDs for Ghostscript built-in drivers
     </p></li><li class="listitem"><p>
      <code class="systemitem">OpenPrintingPPDs-hpijs</code>: PPDs for the HPIJS driver for non-HP printers
     </p></li></ul></div></section></section><section class="sect1" id="sec-print-prob" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">24.8 </span><span class="title-name">Troubleshooting</span></span> <a title="Permalink" class="permalink" href="#sec-print-prob">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The following sections cover the most frequently encountered printer
   hardware and software problems and ways to solve or circumvent these
   problems. Among the topics covered are GDI printers, PPD files and port
   configuration. Common network printer problems, defective printouts, and
   queue handling are also addressed.
  </p><section class="sect2" id="sec-print-gdi" data-id-title="Printers without standard printer language support"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.8.1 </span><span class="title-name">Printers without standard printer language support</span></span> <a title="Permalink" class="permalink" href="#sec-print-gdi">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    These printers do not support any common printer language and can only be
    addressed with special proprietary control sequences. Therefore they can
    only work with the operating system versions for which the manufacturer
    delivers a driver. GDI is a programming interface developed by Microsoft*
    for graphics devices. Usually the manufacturer delivers drivers only for
    Windows, and since the Windows driver uses the GDI interface these printers
    are also called <span class="emphasis"><em>GDI printers</em></span>. The actual problem is
    not the programming interface, but that these printers can only be
    addressed with the proprietary printer language of the respective printer
    model.
   </p><p>
    Certain GDI printers can be switched to operate either in GDI mode or in one
    of the standard printer languages. Check the manual of the printer to see whether
    this is possible. Specific models require special Windows software to do the
    switch. For example, the Windows printer driver may always switch the printer
    back into GDI mode when printing from Windows. For other GDI printers
    there are extension modules for a standard printer language available.
   </p><p>
    Several manufacturers provide proprietary drivers for their printers. The
    disadvantage of proprietary printer drivers is that there is no guarantee
    that these work with the installed print system or that they are suitable
    for the multiple hardware platforms. In contrast, printers that support a
    standard printer language do not depend on a special print system version or
    a special hardware platform.
   </p><p>
    Instead of spending time trying to make a proprietary Linux driver work, it
    may be more cost-effective to purchase a printer which supports a standard
    printer language (preferably PostScript). This would solve the driver
    problem once and for all, eliminating the need to install and configure
    special driver software and obtain driver updates that may be required
    because of new developments in the print system.
   </p></section><section class="sect2" id="sec-print-prob-ppd" data-id-title="No suitable PPD file available for a PostScript printer"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.8.2 </span><span class="title-name">No suitable PPD file available for a PostScript printer</span></span> <a title="Permalink" class="permalink" href="#sec-print-prob-ppd">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If the <code class="systemitem">manufacturer-PPDs</code> or
    <code class="systemitem">OpenPrintingPPDs-postscript</code> packages do not
    contain a suitable PPD file for a PostScript printer, it should be possible
    to use the PPD file from the driver CD of the printer manufacturer or
    download a suitable PPD file from the Web page of the printer manufacturer.
   </p><p>
    If the PPD file is provided as a zip archive (.zip) or a self-extracting
    zip archive (<code class="filename">.exe</code>), unpack it with
    <code class="command">unzip</code>. First, review the license terms of the PPD file.
    Then use the <code class="command">cupstestppd</code> utility to check if the PPD
    file complies with <span class="quote">“<span class="quote">Adobe PostScript Printer Description File Format
    Specification, version 4.3.</span>”</span> If the utility returns
    <span class="quote">“<span class="quote">FAIL,</span>”</span> the errors in the PPD files are serious and cause major
    problems. The problem spots reported by
    <code class="command">cupstestppd</code> should be eliminated. If necessary, ask the
    printer manufacturer for a suitable PPD file.
   </p></section><section class="sect2" id="sec-print-prob-netconnect" data-id-title="Network printer connections"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.8.3 </span><span class="title-name">Network printer connections</span></span> <a title="Permalink" class="permalink" href="#sec-print-prob-netconnect">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.6.16.5.3.1"><span class="term">Identifying network problems</span></dt><dd><p>
       Connect the printer directly to the computer. For test purposes,
       configure the printer as a local printer. If this works, the problems
       are related to the network.
      </p></dd><dt id="id-1.3.5.6.16.5.3.2"><span class="term">Checking the TCP/IP network</span></dt><dd><p>
       The TCP/IP network and name resolution must be functional.
      </p></dd><dt id="id-1.3.5.6.16.5.3.3"><span class="term">Checking a remote <code class="command">lpd</code>
     </span></dt><dd><p>
       Use the following command to test if a TCP connection can be established
       to <code class="command">lpd</code> (port <code class="literal">515</code>) on
       <em class="replaceable">HOST</em>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>netcat -z <em class="replaceable">HOST</em> 515 &amp;&amp; echo ok || echo failed</pre></div><p>
       If the connection to <code class="command">lpd</code> cannot be established,
       <code class="command">lpd</code> may not be active or there may be basic network
       problems.
      </p><p>
       Provided that the respective
       <code class="command">lpd</code> is active and the host accepts queries, run the following command as <code class="systemitem">root</code> to query a status report for
       <em class="replaceable">QUEUE</em> on remote
       <em class="replaceable">HOST</em>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>echo -e "\004queue" \
| netcat -w 2 -p 722 <em class="replaceable">HOST</em> 515</pre></div><p>
       If <code class="command">lpd</code> does not respond, it may not be active or
       there may be basic network problems. If <code class="command">lpd</code> responds,
       the response should show why printing is not possible on the
       <code class="literal">queue</code> on <code class="literal">host</code>. If you receive a
       response like that shown in <a class="xref" href="#aus-d-lpd" title="Error message from lpd">Example 24.1, “Error message from <code class="command">lpd</code>”</a>, the problem is
       caused by the remote <code class="command">lpd</code>.
      </p><div class="example" id="aus-d-lpd" data-id-title="Error message from lpd"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 24.1: </span><span class="title-name">Error message from <code class="command">lpd</code> </span></span><a title="Permalink" class="permalink" href="#aus-d-lpd">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">lpd: your host does not have line printer access
lpd: queue does not exist
printer: spooling disabled
printer: printing disabled</pre></div></div></div></dd><dt id="id-1.3.5.6.16.5.3.4"><span class="term">Checking a remote <code class="command">cupsd</code>
     </span></dt><dd><p>
       A CUPS network server can broadcast its queues by default every 30
       seconds on UDP port <code class="literal">631</code>. Accordingly, the following
       command can be used to test whether there is a broadcasting CUPS network
       server in the network. Make sure to stop your local CUPS daemon before
       executing the command.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>netcat -u -l -p 631 &amp; PID=$! ; sleep 40 ; kill $PID</pre></div><p>
       If a broadcasting CUPS network server exists, the output appears as
       shown in <a class="xref" href="#aus-d-bcast" title="Broadcast from the CUPS network server">Example 24.2, “Broadcast from the CUPS network server”</a>.
      </p><div class="example" id="aus-d-bcast" data-id-title="Broadcast from the CUPS network server"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 24.2: </span><span class="title-name">Broadcast from the CUPS network server </span></span><a title="Permalink" class="permalink" href="#aus-d-bcast">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">ipp://192.168.2.202:631/printers/queue</pre></div></div></div><p><strong class="arch-arrow-start">IBM Z</strong>
       Take into account that IBM Z Ethernet devices do not receive
       broadcasts by default.
      <strong class="arch-arrow-end"> </strong></p><p>
       The following command can be used to test if a TCP connection can be
       established to <code class="command">cupsd</code> (port <code class="literal">631</code>) on
       <em class="replaceable">HOST</em>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>netcat -z <em class="replaceable">HOST</em> 631 &amp;&amp; echo ok || echo failed</pre></div><p>
       If the connection to <code class="command">cupsd</code> cannot be established,
       <code class="command">cupsd</code> may not be active or there may be basic network
       problems. <code class="command">lpstat -h</code> <em class="replaceable">HOST</em>
       -l -t returns a status report for all queues on
       <em class="replaceable">HOST</em>, provided the respective
       <code class="command">cupsd</code> is active and the host accepts queries.
      </p><p>
       The next command can be used to test if the
       <em class="replaceable">QUEUE</em> on <em class="replaceable">HOST</em>
       accepts a print job consisting of a single carriage-return character.
       Nothing should be printed. A blank page may be ejected.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>echo -en "\r" \
| lp -d queue -h <em class="replaceable">HOST</em></pre></div></dd><dt id="id-1.3.5.6.16.5.3.5"><span class="term">
      Troubleshooting a Network Printer or Print Server Machine
     </span></dt><dd><p>
       Spoolers running in a print server machine sometimes cause problems when
       they need to deal with multiple print jobs. Since this is caused by the
       spooler in the print server machine, there no way to resolve this issue. As
       a work-around, circumvent the spooler in the print server machine by
       addressing the printer connected to the print server machine directly with
       the TCP socket. See <a class="xref" href="#sec-print-net" title="24.4. Network printers">Section 24.4, “Network printers”</a>.
      </p><p>
       In this way, the print server machine is reduced to a converter between the
       multiple forms of data transfer (TCP/IP network and local printer
       connection). To use this method, you need to know the TCP port on the
       print server machine. If the printer is connected to the print server machine
       and turned on, this TCP port can normally be determined with the
       <code class="command">nmap</code> utility from the <code class="systemitem">nmap</code>
       package certain time after the print server machine is powered up. For example,
       <code class="command">nmap </code> <em class="replaceable">IP-address</em> may
       deliver the following output for a print server machine:
      </p><div class="verbatim-wrap"><pre class="screen">Port       State       Service
23/tcp     open        telnet
80/tcp     open        http
515/tcp    open        printer
631/tcp    open        cups
9100/tcp   open        jetdirect</pre></div><p>
       This output indicates that the printer connected to the print server machine
       can be addressed via TCP socket on port <code class="literal">9100</code>. By
       default, <code class="command">nmap</code> only checks several commonly known
       ports listed in <code class="filename">/usr/share/nmap/nmap-services</code>. To
       check all possible ports, use the command <code class="command">nmap
       -p </code>
       <em class="replaceable">FROM_PORT</em>-<em class="replaceable">TO_PORT</em> <em class="replaceable">IP_ADDRESS</em>.
       For further information, refer to the man page of
       <code class="command">nmap</code>.
      </p><p>
       Enter a command like
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>echo -en "\rHello\r\f" | netcat -w 1 IP-address port
cat file | netcat -w 1 IP-address port</pre></div><p>
       to send character strings or files directly to the respective port to
       test if the printer can be addressed on this port.
      </p></dd></dl></div></section><section class="sect2" id="sec-print-prob-defective-printouts" data-id-title="Defective printouts without error message"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.8.4 </span><span class="title-name">Defective printouts without error message</span></span> <a title="Permalink" class="permalink" href="#sec-print-prob-defective-printouts">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    For the print system, the print job is completed when the CUPS back-end
    completes the data transfer to the recipient (printer). If further
    processing on the recipient fails (for example, if the printer is not able
    to print the printer-specific data) the print system does not notice this.
    If the printer cannot print the printer-specific data, select a PPD file
    that is more suitable for the printer.
   </p></section><section class="sect2" id="sec-print-prob-disabled-queues" data-id-title="Disabled queues"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.8.5 </span><span class="title-name">Disabled queues</span></span> <a title="Permalink" class="permalink" href="#sec-print-prob-disabled-queues">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If the data transfer to the recipient fails entirely after several
    attempts, the CUPS back-end, such as <code class="literal">USB</code> or
    <code class="literal">socket</code>, reports an error to the print system (to
    <code class="command">cupsd</code>). The back-end determines how many unsuccessful
    attempts are appropriate until the data transfer is reported as impossible.
    As further attempts would be in vain, <code class="command">cupsd</code> disables
    printing for the respective queue. After eliminating the cause of the
    problem, the system administrator must re-enable printing with the command
    <code class="command">cupsenable</code>.
   </p></section><section class="sect2" id="sec-print-prob-deleting-jobs" data-id-title="CUPS browsing: deleting print jobs"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.8.6 </span><span class="title-name">CUPS browsing: deleting print jobs</span></span> <a title="Permalink" class="permalink" href="#sec-print-prob-deleting-jobs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If a CUPS network server broadcasts its queues to the client hosts via
    browsing and a suitable local <code class="command">cupsd</code> is active on the
    client hosts, the client <code class="command">cupsd</code> accepts print jobs from
    applications and forwards them to the <code class="command">cupsd</code> on the
    server. When <code class="command">cupsd</code> on the server accepts a print job, it
    is assigned a new job number. Therefore, the job number on the client host
    is different from the job number on the server. As a print job is usually
    forwarded immediately, it cannot be deleted with the job number on the
    client host This is because the client <code class="command">cupsd</code> regards the
    print job as completed when it has been forwarded to the server
    <code class="command">cupsd</code>.
   </p><p>
    To delete the print job on the server, use a command such as <code class="command">lpstat
    -h cups.example.com -o</code> to determine the job number on the server. This
    assumes that the server has not already completed the print job by sending
    it to the printer. Use the obtained job number to delete the print job on
    the server as follows:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>cancel -h cups.example.com <em class="replaceable">QUEUE-JOBNUMBER</em></pre></div></section><section class="sect2" id="sec-print-prob-brokenjobs" data-id-title="Defective print jobs and data transfer errors"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.8.7 </span><span class="title-name">Defective print jobs and data transfer errors</span></span> <a title="Permalink" class="permalink" href="#sec-print-prob-brokenjobs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you switch the printer off or shut down the computer during the printing
    process, print jobs remain in the queue. Printing resumes when the computer
    (or the printer) is switched back on. Defective print jobs must be removed
    from the queue with <code class="command">cancel</code>.
   </p><p>
    If a print job is corrupted or an error occurs in the communication between
    the host and the printer, the printer cannot process the data correctly and
    prints numerous sheets of paper with
    unintelligible characters. To
    fix the problem, follow these steps:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      To stop printing, remove all paper from ink jet printers or open the
      paper trays of laser printers. High-quality printers have a button for
      canceling the current printout.
     </p></li><li class="step"><p>
      The print job may still be in the queue, because jobs are only removed
      after they are sent to the printer. Use <code class="command">lpstat -o</code> or
      <code class="command">lpstat -h cups.example.com -o</code> to check which queue is
      currently printing. Delete the print job with
      <code class="command">cancel</code>
      <em class="replaceable">QUEUE</em>-<em class="replaceable">JOBNUMBER</em> or
      <code class="command">cancel -h cups.example.com</code>
      <em class="replaceable">QUEUE</em>-<em class="replaceable">JOBNUMBER</em>.
     </p></li><li class="step"><p>
      Certain data may still be transferred to the printer even though the print
      job has been deleted from the queue. Check if a CUPS back-end process is
      still running for the respective queue and stop it.
     </p></li><li class="step"><p>
      Reset the printer by switching it off for a while. Then insert the paper
      and turn on the printer.
     </p></li></ol></div></div></section><section class="sect2" id="sec-print-prob-debugging" data-id-title="Debugging CUPS"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.8.8 </span><span class="title-name">Debugging CUPS</span></span> <a title="Permalink" class="permalink" href="#sec-print-prob-debugging">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Use the following generic procedure to locate problems in CUPS:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Set <code class="command">LogLevel debug</code> in
      <code class="filename">/etc/cups/cupsd.conf</code>.
     </p></li><li class="step"><p>
      Stop <code class="command">cupsd</code>.
     </p></li><li class="step"><p>
      Remove <code class="filename">/var/log/cups/error_log*</code> to avoid having to
      search through large log files.
     </p></li><li class="step"><p>
      Start <code class="command">cupsd</code>.
     </p></li><li class="step"><p>
      Repeat the action that led to the problem.
     </p></li><li class="step"><p>
      Check the messages in <code class="filename">/var/log/cups/error_log*</code> to
      identify the cause of the problem.
     </p></li></ol></div></div></section><section class="sect2" id="sec-print-prob-more-information" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">24.8.9 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-print-prob-more-information">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/printing.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In-depth information about printing on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is presented in the
    openSUSE Support Database at <a class="link" href="https://en.opensuse.org/Portal:Printing" target="_blank">https://en.opensuse.org/Portal:Printing</a>. <span class="phrase">Solutions to many specific problems are presented in the
    SUSE Knowledgebase (<a class="link" href="https://www.suse.com/support/" target="_blank">https://www.suse.com/support/</a>). Locate the relevant articles
    with a text search for <code class="literal">CUPS</code>.</span>
   </p></section></section></section><section class="chapter" id="cha-gui-desktop" data-id-title="Graphical user interface"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">25 </span><span class="title-name">Graphical user interface</span></span> <a title="Permalink" class="permalink" href="#cha-gui-desktop">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> includes the X.org server and the GNOME desktop. This chapter describes the
    configuration of the graphical user interface for all users.
   </p></div></div></div></div><section class="sect1" id="sec-gui-desktop-xorg" data-id-title="X Window System"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">25.1 </span><span class="title-name">X Window System</span></span> <a title="Permalink" class="permalink" href="#sec-gui-desktop-xorg">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The X.org server is the de facto standard for implementing the X11
   protocol. X is network-based, enabling applications started on one
   host to be displayed on another host connected over any kind of
   network (LAN or Internet).
  </p><p>
   The X Window System needs no configuration in most cases. The hardware is
   dynamically detected during X start-up. The use of
   <code class="filename">xorg.conf</code> is therefore deprecated. If you still
   need to specify custom options to change the way X behaves, you can
   still do so by modifying configuration files under
   <code class="filename">/etc/X11/xorg.conf.d/</code>.
  </p><div id="id-1.3.5.7.3.4" data-id-title="IBM Z: configuring the graphical user interface" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: IBM Z: configuring the graphical user interface</div><p>
    IBM Z does not have any input or output devices supported by
    X.Org. Therefore, none of the configuration procedures described in this
    section apply. More relevant information for IBM Z can be found in
    <span class="intraxref">Book “Deployment Guide”, Chapter 5 “Installation on IBM Z and LinuxONE”</span>.
   </p></div><p>
   Install the package <code class="systemitem">xorg-docs</code> to
   get more in-depth information about X11. <code class="command">man 5 xorg.conf</code>
   tells you more about the format of the manual configuration (if needed).
   More information on the X11 development can be found on the project's home
   page at <a class="link" href="https://www.x.org" target="_blank">https://www.x.org</a>.
  </p><p>
   Drivers are found in <code class="systemitem">xf86-video-*</code> packages, for
   example <code class="systemitem">xf86-video-ati</code>. Many of the drivers
   delivered with these packages are described in detail in the related manual
   page. For example, if you use the <code class="literal">ati</code> driver, find more
   information about this driver in <code class="command">man 4 ati</code>.
  </p><p>
   Information about third-party drivers is available in
   <code class="filename">/usr/share/doc/packages/&lt;package_name&gt;</code>.
   For example, the documentation of <code class="systemitem">x11-video-nvidiaG03</code> is available in
   <code class="filename">/usr/share/doc/packages/x11-video-nvidiaG04</code>
   after the package was installed.
  </p><p>
   Install the package <code class="systemitem">xrdp</code>
   on a server and use RDP client software
   to access the server via the remote desktop protocol.
  </p></section><section class="sect1" id="sec-x11-fontsys" data-id-title="Installing and configuring fonts"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">25.2 </span><span class="title-name">Installing and configuring fonts</span></span> <a title="Permalink" class="permalink" href="#sec-x11-fontsys">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Fonts in Linux can be categorized into two parts:
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.7.4.4.1"><span class="term">Outline or vector fonts</span></dt><dd><p>
     Contains a mathematical description as drawing instructions about the
     shape of a glyph. As such, each glyph can be scaled to arbitrary sizes
     without loss of quality. Before such a font (or glyph) can be used, the
     mathematical descriptions need to be transformed into a raster (grid).
     This process is called <span class="emphasis"><em>font rasterization</em></span>.
     <span class="emphasis"><em>Font hinting</em></span> (embedded inside the font) improves and
     optimizes the rendering result for a particular size. Rasterization and
     hinting is done with the FreeType library.
    </p><p>
     Common formats under Linux are PostScript Type 1 and Type 2, TrueType, and
     OpenType.
    </p></dd><dt id="id-1.3.5.7.4.4.2"><span class="term">Bitmap or raster fonts</span></dt><dd><p>
     Consists of an array of pixels designed for a specific font size. Bitmap
     fonts are extremely fast and simple to render. However, compared to vector
     fonts, bitmap fonts cannot be scaled without losing quality. As such,
     these fonts are usually distributed in different sizes. These days, bitmap
     fonts are still used in the Linux console and sometimes in terminals.
    </p><p>
     Under Linux, Portable Compiled Format (PCF) or Glyph Bitmap Distribution
     Format (BDF) are the most common formats.
    </p></dd></dl></div><p>
  The appearance of these fonts can be influenced by two main aspects:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    choosing a suitable font family,
   </p></li><li class="listitem"><p>
    rendering the font with an algorithm that achieves results comfortable for
    the receiver's eyes.
   </p></li></ul></div><p>
  The last point is only relevant to vector fonts. Although the above two
  points are highly subjective, some defaults need to be created.
 </p><p>
  Linux font rendering systems consist of several libraries with different
  relations. The basic font rendering library is
  <a class="link" href="https://www.freetype.org/" target="_blank">FreeType</a>, which converts
  font glyphs of supported formats into optimized bitmap glyphs. The rendering
  process is controlled by an algorithm and its parameters (which may be
  subject to patent issues).
 </p><p>
  Every program or library which uses FreeType should consult the
  <a class="link" href="https://www.fontconfig.org/" target="_blank">Fontconfig</a> library. This
  library gathers font configuration from users and from the system. When a
  user amends their Fontconfig setting, this change will result in
  Fontconfig-aware applications.
 </p><p>
  More sophisticated OpenType shaping needed for scripts such as Arabic, Han or
  Phags-Pa and other higher level text processing is done using
  <a class="link" href="https://harfbuzz.github.io/" target="_blank">Harfbuzz</a> or
  <a class="link" href="https://www.pango.org/" target="_blank">Pango</a>.
 </p><section class="sect2" id="sec-x11-fontsys-showing-fonts" data-id-title="Showing installed fonts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">25.2.1 </span><span class="title-name">Showing installed fonts</span></span> <a title="Permalink" class="permalink" href="#sec-x11-fontsys-showing-fonts">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To get an overview about which fonts are installed on your system, ask the
   commands <code class="command">rpm</code> or <code class="command">fc-list</code>. Both will
   give you a good answer, but may return a different list depending on system
   and user configuration:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.7.4.11.3.1"><span class="term"><code class="command">rpm</code>
    </span></dt><dd><p>
      Invoke <code class="command">rpm</code> to see which software packages containing
      fonts are installed on your system:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rpm -qa '*fonts*'</pre></div><p>
      Every font package should satisfy this expression. However, the command
      may return some false positives like <code class="literal">fonts-config</code>
      (which is neither a font nor does it contain fonts).
     </p></dd><dt id="id-1.3.5.7.4.11.3.2"><span class="term"><code class="command">fc-list</code>
    </span></dt><dd><p>
      Invoke <code class="command">fc-list</code> to get an overview about what font
      families can be accessed, whether they are installed on the system or in
      your home:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>fc-list ':' family</pre></div><div id="id-1.3.5.7.4.11.3.2.2.3" data-id-title="Command fc-list" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Command <code class="command">fc-list</code></div><p>
       The command <code class="command">fc-list</code> is a wrapper to the Fontconfig
       library. It is possible to query a lot of interesting information from
       Fontconfig—or, to be more precise, from its cache. See
       <code class="command">man 1 fc-list</code> for more details.
      </p></div></dd></dl></div></section><section class="sect2" id="sec-x11-fontsys-viewing" data-id-title="Viewing fonts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">25.2.2 </span><span class="title-name">Viewing fonts</span></span> <a title="Permalink" class="permalink" href="#sec-x11-fontsys-viewing">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If you want to know what an installed font family looks like, either use the
   command <code class="command">ftview</code> (package
   <code class="systemitem">ft2demos</code>) or visit
   <a class="link" href="https://fontinfo.opensuse.org/" target="_blank">https://fontinfo.opensuse.org/</a>. For example, to display
   the FreeMono font in 14 point, use <code class="command">ftview</code> like this:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ftview 14 /usr/share/fonts/truetype/FreeMono.ttf</pre></div><p>
   If you need further information, go to
   <a class="link" href="https://fontinfo.opensuse.org/" target="_blank">https://fontinfo.opensuse.org/</a> to find out which styles
   (regular, bold, italic, etc.) and languages are supported.
  </p></section><section class="sect2" id="sec-x11-fontsys-querying" data-id-title="Querying fonts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">25.2.3 </span><span class="title-name">Querying fonts</span></span> <a title="Permalink" class="permalink" href="#sec-x11-fontsys-querying">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To query which font is used when a pattern is given, use the
   <code class="command">fc-match</code> command.
  </p><p>
   For example, if your pattern contains an already installed font,
   <code class="command">fc-match</code> returns the file name, font family, and the
   style:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>fc-match 'Liberation Serif'
LiberationSerif-Regular.ttf: "Liberation Serif" "Regular"</pre></div><p>
   If the desired font does not exist on your system, Fontconfig's matching
   rules take place and try to find the most similar fonts available. This
   means, your request is substituted:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>fc-match 'Foo Family'
DejaVuSans.ttf: "DejaVu Sans" "Book"</pre></div><p>
   Fontconfig supports <span class="emphasis"><em>aliases</em></span>: a name is substituted with
   another family name. A typical example are the generic names such as
   <span class="quote">“<span class="quote">sans-serif</span>”</span>, <span class="quote">“<span class="quote">serif</span>”</span>, and
   <span class="quote">“<span class="quote">monospace</span>”</span>. These alias names can be substituted by real
   family names or even a preference list of family names:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>for font in serif sans mono; do fc-match "$font" ; done
DejaVuSerif.ttf: "DejaVu Serif" "Book"
DejaVuSans.ttf: "DejaVu Sans" "Book"
DejaVuSansMono.ttf: "DejaVu Sans Mono" "Book"</pre></div><p>
   The result may vary on your system, depending on which fonts are currently
   installed.
  </p><div id="id-1.3.5.7.4.13.10" data-id-title="Similarity rules according to fontconfig" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Similarity rules according to fontconfig</div><p>
    Fontconfig <span class="emphasis"><em>always</em></span> returns a real family (if at least
    one is installed) according to the given request, as similar as possible.
    <span class="quote">“<span class="quote">Similarity</span>”</span> depends on Fontconfig's internal metrics and on
    the user's or administrator's Fontconfig settings.
   </p></div></section><section class="sect2" id="sec-x11-fontsys-install" data-id-title="Installing fonts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">25.2.4 </span><span class="title-name">Installing fonts</span></span> <a title="Permalink" class="permalink" href="#sec-x11-fontsys-install">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To install a new font there are these major methods:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
     Manually install the font files such as <code class="filename">*.ttf</code> or
     <code class="filename">*.otf</code> to a known font directory. If it needs to be
     system-wide, use the standard directory
     <code class="filename">/usr/share/fonts</code>. For installation in your home
     directory, use <code class="filename">~/.config/fonts</code>.
    </p><p>
     If you want to deviate from the standard directories, Fontconfig allows
     you to choose another one. Let Fontconfig know by using the
     <code class="literal">&lt;dir&gt;</code> element, see
     <a class="xref" href="#sec-x11-fontsys-config-fontconfig" title="25.2.5.2. Diving into fontconfig XML">Section 25.2.5.2, “Diving into fontconfig XML”</a> for details.
    </p></li><li class="listitem"><p>
     Install fonts using <code class="command">zypper</code>. Lots of fonts are already
     available as a package, be it on your SUSE distribution or in the <a class="link" href="https://download.opensuse.org/repositories/M17N:/fonts/" target="_blank">M17N:fonts</a>
     repository. Add the repository to your list using the following command.
     For example, to add a repository for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP6</span></span>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper ar
     <span class="phrase">https://download.opensuse.org/repositories/M17N:/fonts/SLE_15/</span></pre></div><p>
     To search for your <em class="replaceable">FONT_FAMILY_NAME</em> use this
     command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>zypper se '<em class="replaceable">FONT_FAMILY_NAME</em>*fonts'</pre></div></li></ol></div></section><section class="sect2" id="sec-x11-fontsys-config" data-id-title="Configuring the appearance of fonts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">25.2.5 </span><span class="title-name">Configuring the appearance of fonts</span></span> <a title="Permalink" class="permalink" href="#sec-x11-fontsys-config">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Depending on the rendering medium, and font size, the result may be
   unsatisfactory. For example, an average monitor these days has a resolution
   of 100dpi which makes pixels too big and glyphs look clunky.
  </p><p>
   There are several algorithms available to deal with low resolutions, such as
   anti-aliasing (grayscale smoothing), hinting (fitting to the grid), or
   subpixel rendering (tripling resolution in one direction). These algorithms
   can also differ from one font format to another.
  </p><p>
   Via Fontconfig, it is possible to select a rendering algorithms for every
   font individually or for a set of fonts.
  </p><section class="sect3" id="sec-x11-fontsys-config-sysconfig" data-id-title="Configuring fonts via sysconfig"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">25.2.5.1 </span><span class="title-name">Configuring fonts via <code class="literal">sysconfig</code></span></span> <a title="Permalink" class="permalink" href="#sec-x11-fontsys-config-sysconfig">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> comes with a <code class="literal">sysconfig</code> layer above
    Fontconfig. This is a good starting point for experimenting with font
    configuration. To change the default settings, edit the configuration file
    <code class="filename">/etc/sysconfig/fonts-config</code>. (or use the YaST
    sysconfig module). After you have edited the file, run
    <code class="command">fonts-config</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> /usr/sbin/fonts-config</pre></div><p>
    Restart the application to make the effect visible. Keep in mind the
    following issues:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      A few applications do need not to be restarted. For example, Firefox
      re-reads Fontconfig configuration from time to time. Newly created or
      reloaded tabs get new font configurations later.
     </p></li><li class="listitem"><p>
      The <code class="command">fonts-config</code> script is called automatically after
      every package installation or removal (if not, it is a bug of the font
      software package).
     </p></li><li class="listitem"><p>
      Every sysconfig variable can be temporarily overridden by the
      <code class="command">fonts-config</code> command line option. See
      <code class="command">fonts-config --help</code> for details.
     </p></li></ul></div><p>
    There are several sysconfig variables which can be altered. See
    <code class="command">man 1 fonts-config</code> or the help page of the YaST
    sysconfig module. The following variables are examples:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.7.4.15.5.7.1"><span class="term">Usage of rendering algorithms</span></dt><dd><p>
       Consider <code class="varname">FORCE_HINTSTYLE</code>,
       <code class="varname">FORCE_AUTOHINT</code>, <code class="varname">FORCE_BW</code>,
       <code class="varname">FORCE_BW_MONOSPACE</code>,
       <code class="varname">USE_EMBEDDED_BITMAPS</code> and
       <code class="varname">EMBEDDED_BITMAP_LANGAGES</code>
      </p></dd><dt id="id-1.3.5.7.4.15.5.7.2"><span class="term">Preference lists of generic aliases</span></dt><dd><p>
       Use <code class="varname">PREFER_SANS_FAMILIES</code>,
       <code class="varname">PREFER_SERIF_FAMILIES</code>,
       <code class="varname">PREFER_MONO_FAMILIES</code> and
       <code class="varname">SEARCH_METRIC_COMPATIBLE</code>
      </p></dd></dl></div><p>
    The following list provides some configuration examples, sorted from the
    <span class="quote">“<span class="quote">most readable</span>”</span> fonts (more contrast) to <span class="quote">“<span class="quote">most
    beautiful</span>”</span> (more smoothed).
   </p><div class="variablelist"><dl class="variablelist"><dt id="vle-x11-fontsys-sysconfig-bitmap"><span class="term">Bitmap fonts</span></dt><dd><p>
       Prefer bitmap fonts via the <code class="varname">PREFER_*_FAMILIES</code>
       variables. Follow the example in the help section for these variables.
       Be aware that these fonts are rendered black and white, not smoothed and
       that bitmap fonts are available in several sizes only. Consider using
      </p><div class="verbatim-wrap"><pre class="screen">SEARCH_METRIC_COMPATIBLE="no"</pre></div><p>
       to disable metric compatibility-driven family name substitutions.
      </p></dd><dt id="vle-x11-fontsys-sysconfig-bw"><span class="term">Scalable fonts rendered black and white</span></dt><dd><p>
       Scalable fonts rendered without antialiasing can result in a similar
       outcome to bitmap fonts, while maintaining font scalability. Use well
       hinted fonts like the Liberation families. Unfortunately, there is a
       lack of well hinted fonts though. Set the following variable to force
       this method:
      </p><div class="verbatim-wrap"><pre class="screen">FORCE_BW="yes"</pre></div></dd><dt id="vle-x11-fontsys-sysconfig-bw-monospace"><span class="term">Monospaced fonts rendered black and white</span></dt><dd><p>
       Render monospaced fonts without antialiasing only, otherwise use default
       settings:
      </p><div class="verbatim-wrap"><pre class="screen">FORCE_BW_MONOSPACE="yes"</pre></div></dd><dt id="vle-x11-fontsys-sysconfig-default"><span class="term">Default settings</span></dt><dd><p>
       All fonts are rendered with antialiasing. Well hinted fonts will be
       rendered with the <span class="emphasis"><em>byte code interpreter</em></span> (BCI) and
       the rest with autohinter (<code class="literal">hintstyle=hintslight</code>).
       Leave all relevant sysconfig variables to the default setting.
      </p></dd><dt id="vle-x11-fontsys-sysconfig-cff"><span class="term">CFF fonts</span></dt><dd><p>
       Use fonts in CFF format. They can be considered also more readable than
       the default TrueType fonts given the current improvements in FreeType2.
       Try them out by following the example of
       <code class="literal">PREFER_*_FAMILIES</code>. Possibly make them more dark and
       bold with:
      </p><div class="verbatim-wrap"><pre class="screen">SEARCH_METRIC_COMPATIBLE="no"</pre></div><p>
       as they are rendered by <code class="literal">hintstyle=hintslight</code> by
       default. Also consider using:
      </p><div class="verbatim-wrap"><pre class="screen">SEARCH_METRIC_COMPATIBLE="no"</pre></div></dd><dt id="ex-x11-fontsys-sysconfig-autohint"><span class="term">Autohinter exclusively</span></dt><dd><p>
       Even for a well hinted font, use FreeType2's autohinter. That can lead
       to thicker, sometimes fuzzier letter shapes with lower contrast. Set the
       following variable to activate this:
      </p><div class="verbatim-wrap"><pre class="screen">FORCE_AUTOHINTER="yes"</pre></div><p>
       Use <code class="literal">FORCE_HINTSTYLE</code> to control the level of hinting.
      </p></dd></dl></div></section><section class="sect3" id="sec-x11-fontsys-config-fontconfig" data-id-title="Diving into fontconfig XML"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">25.2.5.2 </span><span class="title-name">Diving into fontconfig XML</span></span> <a title="Permalink" class="permalink" href="#sec-x11-fontsys-config-fontconfig">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Fontconfig's configuration format is the <span class="emphasis"><em>eXtensible Markup
    Language</em></span> (XML). These few examples are not a complete reference,
    but a brief overview. Details and other inspiration can be found in
    <code class="command">man 5 fonts-conf</code> or in
    <code class="filename">/etc/fonts/conf.d/</code>.
   </p><p>
    The central Fontconfig configuration file is
    <code class="filename">/etc/fonts/fonts.conf</code>, which—along other
    work—includes the whole <code class="filename">/etc/fonts/conf.d/</code>
    directory. To customize Fontconfig, there are two places where you can
    insert your changes:
   </p><div class="orderedlist" id="ol-x11-fontsys-configfiles" data-id-title="Fontconfig configuration files"><div class="title-container"><div class="orderedlist-title-wrap"><div class="orderedlist-title"><span class="title-number-name"><span class="title-name">Fontconfig configuration files </span></span><a title="Permalink" class="permalink" href="#ol-x11-fontsys-configfiles">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div><ol class="orderedlist" type="1"><li class="listitem"><p><span class="formalpara-title">System-wide changes. </span>
       Edit the file <code class="filename">/etc/fonts/local.conf</code> (by default, it
       contains an empty <code class="literal">fontconfig</code> element).
      </p></li><li class="listitem"><p><span class="formalpara-title">User-specific changes. </span>
       Edit the file <code class="filename">~/.config/fontconfig/fonts.conf</code>.
       Place Fontconfig configuration files in the
       <code class="filename">~/.config/fontconfig/conf.d/</code> directory.
      </p></li></ol></div><p>
    User-specific changes overwrite any system-wide settings.
   </p><div id="id-1.3.5.7.4.15.6.6" data-id-title="Deprecated user configuration file" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Deprecated user configuration file</div><p>
     The file <code class="filename">~/.fonts.conf</code> is marked as deprecated and
     should not be used anymore. Use
     <code class="filename">~/.config/fontconfig/fonts.conf</code> instead.
    </p></div><p>
    Every configuration file needs to have a <code class="literal">fontconfig</code>
    element. As such, the minimal file looks like this:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
   &lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
   &lt;fontconfig&gt;
   &lt;!-- Insert your changes here --&gt;
   &lt;/fontconfig&gt;</pre></div><p>
    If the default directories are not enough, insert the
    <code class="literal">dir</code> element with the respective directory:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;dir&gt;/usr/share/fonts2&lt;/dir&gt;</pre></div><p>
    Fontconfig searches <span class="emphasis"><em>recursively</em></span> for fonts.
   </p><p>
    Font-rendering algorithms can be chosen with following Fontconfig snippet
    (see <a class="xref" href="#ex-x11-fontsys-fontconfig-rendering-algorithms" title="Specifying rendering algorithms">Example 25.1, “Specifying rendering algorithms”</a>):
   </p><div class="example" id="ex-x11-fontsys-fontconfig-rendering-algorithms" data-id-title="Specifying rendering algorithms"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 25.1: </span><span class="title-name">Specifying rendering algorithms </span></span><a title="Permalink" class="permalink" href="#ex-x11-fontsys-fontconfig-rendering-algorithms">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;match target="font"&gt;
 &lt;test name="family"&gt;
  &lt;string&gt;<em class="replaceable">FAMILY_NAME</em>&lt;/string&gt;
 &lt;/test&gt;
 &lt;edit name="antialias" mode="assign"&gt;
  &lt;bool&gt;true&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="hinting" mode="assign"&gt;
  &lt;bool&gt;true&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="autohint" mode="assign"&gt;
  &lt;bool&gt;false&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="hintstyle" mode="assign"&gt;
  &lt;const&gt;hintfull&lt;/const&gt;
 &lt;/edit&gt;
&lt;/match&gt;</pre></div></div></div><p>
    Various properties of fonts can be tested. For example, the
    <code class="literal">&lt;test&gt;</code> element can test for the font family (as
    shown in the example), size interval, spacing, font format, and others.
    When abandoning <code class="literal">&lt;test&gt;</code> completely, all
    <code class="literal">&lt;edit&gt;</code> elements will be applied to every font
    (global change).
   </p><div class="complex-example"><div class="example" id="ex-x11-fontsys-fontconfig-aliases1" data-id-title="Aliases and family name substitutions"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 25.2: </span><span class="title-name">Aliases and family name substitutions </span></span><a title="Permalink" class="permalink" href="#ex-x11-fontsys-fontconfig-aliases1">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="variablelist"><dl class="variablelist"><dt id="vle-x11-fontsys-example-alias-default"><span class="term">Rule 1</span></dt><dd><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;</pre></div></dd><dt id="vle-x11-fontsys-example-alias-prefer"><span class="term">Rule 2</span></dt><dd><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;prefer&gt;
  &lt;family&gt;Droid Serif&lt;/family&gt;
 &lt;/prefer&gt;
&lt;/alias&gt;</pre></div></dd><dt id="vle-x11-fontsys-example-alias-accept"><span class="term">Rule 3</span></dt><dd><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;STIXGeneral&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</pre></div></dd></dl></div></div></div></div><p>
    The rules from <a class="xref" href="#ex-x11-fontsys-fontconfig-aliases1" title="Aliases and family name substitutions">Example 25.2, “Aliases and family name substitutions”</a> create
    a <span class="emphasis"><em>prioritized family list</em></span> (PFL). Depending on the
    element, different actions are performed:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.7.4.15.6.17.1"><span class="term"><code class="literal">&lt;default&gt;</code> from
     <a class="xref" href="#vle-x11-fontsys-example-alias-default">Rule 1</a>
     </span></dt><dd><p>
       This rule adds a <code class="literal">serif</code> family name <span class="emphasis"><em>at the
       end</em></span> of the PFL.
      </p></dd><dt id="id-1.3.5.7.4.15.6.17.2"><span class="term"><code class="literal">&lt;prefer&gt;</code> from
     <a class="xref" href="#vle-x11-fontsys-example-alias-prefer">Rule 2</a>
     </span></dt><dd><p>
       This rule adds <span class="quote">“<span class="quote">Droid Serif</span>”</span> <span class="emphasis"><em>just
       before</em></span> the first occurrence of <code class="literal">serif</code> in
       the PFL, whenever <code class="literal">Alegreya SC</code> is in PFL.
      </p></dd><dt id="id-1.3.5.7.4.15.6.17.3"><span class="term"><code class="literal">&lt;accept&gt;</code> from <a class="xref" href="#vle-x11-fontsys-example-alias-accept">Rule 3</a>
     </span></dt><dd><p>
       This rule adds a <span class="quote">“<span class="quote">STIXGeneral</span>”</span> family name <span class="emphasis"><em>just
       after</em></span> the first occurrence of the <code class="literal">serif</code>
       family name in the PFL.
      </p></dd></dl></div><p>
    Putting this together, when snippets occur in the order
    <a class="xref" href="#vle-x11-fontsys-example-alias-default">Rule 1</a> -
    <a class="xref" href="#vle-x11-fontsys-example-alias-prefer">Rule 2</a> -
    <a class="xref" href="#vle-x11-fontsys-example-alias-accept">Rule 3</a> and the user
    requests <span class="quote">“<span class="quote">Alegreya SC</span>”</span>, then the PFL is created as depicted in
    <a class="xref" href="#tab-x11-fontsys-example-alias" title="Generating PFL from fontconfig rules">Table 25.1, “Generating PFL from fontconfig rules”</a>.
   </p><div class="table" id="tab-x11-fontsys-example-alias" data-id-title="Generating PFL from fontconfig rules"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 25.1: </span><span class="title-name">Generating PFL from fontconfig rules </span></span><a title="Permalink" class="permalink" href="#tab-x11-fontsys-example-alias">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Order
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Current PFL
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Request
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <a class="xref" href="#vle-x11-fontsys-example-alias-default">Rule 1</a>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">serif</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <a class="xref" href="#vle-x11-fontsys-example-alias-prefer">Rule 2</a>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">serif</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <a class="xref" href="#vle-x11-fontsys-example-alias-accept">Rule 3</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">serif</code>, <code class="literal">STIXGeneral</code>
        </p>
       </td></tr></tbody></table></div></div><p>
    In Fontconfig's metrics, the family name has the highest priority over
    other patterns, like style, size, etc. Fontconfig checks which family is
    currently installed on the system. If <span class="quote">“<span class="quote">Alegreya SC</span>”</span> is
    installed, then Fontconfig returns it. If not, it asks for <span class="quote">“<span class="quote">Droid
    Serif</span>”</span>, etc.
   </p><p>
    Be careful. When the order of Fontconfig snippets is changed, Fontconfig
    can return different results, as depicted in
    <a class="xref" href="#tab-x11-fontsys-example-alias2" title="Results from generating PFL from fontconfig rules with changed order">Table 25.2, “Results from generating PFL from fontconfig rules with changed order”</a>.
   </p><div class="table" id="tab-x11-fontsys-example-alias2" data-id-title="Results from generating PFL from fontconfig rules with changed order"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 25.2: </span><span class="title-name">Results from generating PFL from fontconfig rules with changed order </span></span><a title="Permalink" class="permalink" href="#tab-x11-fontsys-example-alias2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Order
        </p>
       </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Current PFL
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Note
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Request
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         Same request performed.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <a class="xref" href="#vle-x11-fontsys-example-alias-prefer">Rule 2</a>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="literal">serif</code> not in PFL, nothing is substituted
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <a class="xref" href="#vle-x11-fontsys-example-alias-accept">Rule 3</a>
        </p>
       </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="literal">serif</code> not in PFL, nothing is substituted
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <a class="xref" href="#vle-x11-fontsys-example-alias-default">Rule 1</a>
        </p>
       </td><td style="border-right: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">serif</code>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code> present in PFL, substitution is
         performed
        </p>
       </td></tr></tbody></table></div></div><div id="id-1.3.5.7.4.15.6.23" data-id-title="Implication" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Implication</div><p>
     Think of the <code class="literal">&lt;default&gt;</code> alias as a classification
     or inclusion of this group (if not installed). As the example shows,
     <code class="literal">&lt;default&gt;</code> should always precede the
     <code class="literal">&lt;prefer&gt;</code> and <code class="literal">&lt;accept&gt;</code>
     aliases of that group.
    </p><p>
     <code class="literal">&lt;default&gt;</code> classification is not limited to the
     generic aliases serif, sans-serif and monospace. See
     <code class="filename">/usr/share/fontconfig/conf.avail/30-metric-aliases.conf</code>
     for a complex example.
    </p></div><p>
    The following Fontconfig snippet in
    <a class="xref" href="#ex-x11-fontsys-fontconfig-aliases2" title="Aliases and family name substitutions">Example 25.3, “Aliases and family name substitutions”</a> creates a
    <code class="literal">serif</code> group. Every family in this group could substitute
    others when a former font is not installed.
   </p><div class="example" id="ex-x11-fontsys-fontconfig-aliases2" data-id-title="Aliases and family name substitutions"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 25.3: </span><span class="title-name">Aliases and family name substitutions </span></span><a title="Permalink" class="permalink" href="#ex-x11-fontsys-fontconfig-aliases2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;Droid Serif&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;STIXGeneral&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;Droid Serif&lt;/family&gt;
  &lt;family&gt;STIXGeneral&lt;/family&gt;
  &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</pre></div></div></div><p>
    Priority is given by the order in the <code class="literal">&lt;accept&gt;</code>
    alias. Similarly, stronger <code class="literal">&lt;prefer&gt;</code> aliases can be
    used.
   </p><p>
    <a class="xref" href="#ex-x11-fontsys-fontconfig-aliases1" title="Aliases and family name substitutions">Example 25.2, “Aliases and family name substitutions”</a> is expanded by
    <a class="xref" href="#ex-x11-fontsys-fontconfig-aliases3" title="Aliases and family names substitutions">Example 25.4, “Aliases and family names substitutions”</a>.
   </p><div class="complex-example"><div class="example" id="ex-x11-fontsys-fontconfig-aliases3" data-id-title="Aliases and family names substitutions"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 25.4: </span><span class="title-name">Aliases and family names substitutions </span></span><a title="Permalink" class="permalink" href="#ex-x11-fontsys-fontconfig-aliases3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="variablelist"><dl class="variablelist"><dt id="vle-x11-fontsys-example-alias-accept2"><span class="term">Rule 4</span></dt><dd><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;Liberation Serif&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</pre></div></dd><dt id="vle-x11-fontsys-example-alias-prefer2"><span class="term">Rule 5</span></dt><dd><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;prefer&gt;
  &lt;family&gt;DejaVu Serif&lt;/family&gt;
 &lt;/prefer&gt;
&lt;/alias&gt;</pre></div></dd></dl></div></div></div></div><p>
    The expanded configuration from
    <a class="xref" href="#ex-x11-fontsys-fontconfig-aliases3" title="Aliases and family names substitutions">Example 25.4, “Aliases and family names substitutions”</a> would lead to the
    following PFL evolution:
   </p><div class="table" id="tab-x11-fontsys-example-alias3" data-id-title="Results from generating PFL from fontconfig rules"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 25.3: </span><span class="title-name">Results from generating PFL from fontconfig rules </span></span><a title="Permalink" class="permalink" href="#tab-x11-fontsys-example-alias3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11_fonts.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Order
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Current PFL
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Request
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <a class="xref" href="#vle-x11-fontsys-example-alias-default">Rule 1</a>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">serif</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <a class="xref" href="#vle-x11-fontsys-example-alias-prefer">Rule 2</a>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">serif</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <a class="xref" href="#vle-x11-fontsys-example-alias-accept">Rule 3</a>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">serif</code>, <code class="literal">STIXGeneral</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         <a class="xref" href="#vle-x11-fontsys-example-alias-accept2">Rule 4</a>
        </p>
       </td><td style="border-bottom: 1px solid ; ">
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">serif</code>, <code class="literal">Liberation Serif</code>,
         <code class="literal">STIXGeneral</code>
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         <a class="xref" href="#vle-x11-fontsys-example-alias-prefer2">Rule 5</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">DejaVu Serif</code>, <code class="literal">serif</code>,
         <code class="literal">Liberation Serif</code>, <code class="literal">STIXGeneral</code>
        </p>
       </td></tr></tbody></table></div></div><div id="id-1.3.5.7.4.15.6.31" data-id-title="Implications." class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Implications.</div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       In case multiple <code class="literal">&lt;accept&gt;</code> declarations for the
       same generic name exist, the declaration that is parsed last
       <span class="quote">“<span class="quote">wins</span>”</span>. If possible, do not use
       <code class="literal">&lt;accept&gt;</code> <span class="bold"><strong>after</strong></span>
       user (<code class="filename">/etc/fonts/conf.d/*-user.conf</code>) when creating
       a system-wide configuration.
      </p></li><li class="listitem"><p>
       In case multiple <code class="literal">&lt;prefer</code> declarations for the same
       generic name exist, the declaration that is parsed last
       <span class="quote">“<span class="quote">wins</span>”</span>. If possible, do not use
       <code class="literal">&lt;prefer&gt;</code>
       <span class="bold"><strong>before</strong></span> user in the system-wide
       configuration.
      </p></li><li class="listitem"><p>
       Every <code class="literal">&lt;prefer&gt;</code> declaration overwrites
       <code class="literal">&lt;accept&gt;</code> declarations for the same generic
       name. If the administrator wants to allow the user to use
       <code class="literal">&lt;accept&gt;</code> and not only
       <code class="literal">&lt;prefer&gt;</code>, the administrator should not use
       <code class="literal">&lt;prefer&gt;</code> in the system-wide configuration. On
       the other hand, as users mostly use <code class="literal">&lt;prefer&gt;</code>,
       this should not have any detrimental effect. We also see the use of
       <code class="literal">&lt;prefer&gt;</code> in system-wide configurations.
      </p></li></ul></div></div></section></section></section><section class="sect1" id="sec-gui-desktop-gnome" data-id-title="GNOME configuration for administrators"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">25.3 </span><span class="title-name">GNOME configuration for administrators</span></span> <a title="Permalink" class="permalink" href="#sec-gui-desktop-gnome">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect2" id="sec-gui-desktop-gnome-dconf" data-id-title="The dconf system"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">25.3.1 </span><span class="title-name">The <code class="literal">dconf</code> system</span></span> <a title="Permalink" class="permalink" href="#sec-gui-desktop-gnome-dconf">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Configuration of the GNOME desktop is managed with
    <code class="literal">dconf</code>. It is a hierarchically structured database or
    registry that allows users to modify their personal settings, and system
    administrators to set default or mandatory values for all users.
    <code class="literal">dconf</code> replaces the <code class="literal">gconf</code> system of
    GNOME 2.
   </p><p>
    Use <code class="command">dconf-editor</code> to view the <code class="literal">dconf</code>
    options with a graphical user interface. Use <code class="command">dconf</code> to
    access and modify configuration options with the command line.
   </p><p>
    The GNOME <code class="literal">Tweaks</code> tool provides an easy-to-use
    user interface for additional configuration options beyond the
    normal GNOME configuration. The tool can be started from the
    GNOME application menu or from the command line with
    <code class="command">gnome-tweak-tool</code>.
   </p></section><section class="sect2" id="sec-gui-desktop-gnome-global" data-id-title="System-wide configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">25.3.2 </span><span class="title-name">System-wide configuration</span></span> <a title="Permalink" class="permalink" href="#sec-gui-desktop-gnome-global">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Global <code class="literal">dconf</code> configuration parameters can be set
    in the <code class="filename">/etc/dconf/db/</code> directory. This includes
    the configuration for GDM or locking certain configuration options
    for users.
   </p><p>
    Use the following procedure as an example to create a system-wide
    configuration:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Create a new directory that ends with a <code class="literal">.d</code> in
      <code class="filename">/etc/dconf/db/</code>. This directory can contain an
      arbitrary amount of text files with configuration options. For this
      example, create the file
      <code class="filename">/etc/dconf/db/network.d/00-proxy</code> with the
      following content:
     </p><div class="verbatim-wrap"><pre class="screen"># This is a comment
[system/proxy/http]
host='10.0.0.1'
enabled=true</pre></div></li><li class="step"><p>
      Parse the new configuration directives into the dconf database format:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">dconf update</code></pre></div></li><li class="step"><p>
      Add the new <code class="literal">network</code> configuration database to
      the default user profile, by creating the file <code class="filename">/etc/dconf/profile/user</code>.
      Then add the following content:
     </p><div class="verbatim-wrap"><pre class="screen">system-db:network</pre></div><p>
      The file <code class="filename">/etc/dconf/profile/user</code> is a GNOME
      default. Other profiles can be defined in the environment variable
      <code class="literal">DCONF_PROFILE</code>.
     </p></li><li class="step"><p>
      Optional: to lock the proxy configuration for users, create the file
      <code class="filename">/etc/dconf/db/network/locks/proxy</code>. Then add
      a line to this file with the keys that may not be changed:
     </p><div class="verbatim-wrap"><pre class="screen">/system/proxy/http/host
/system/proxy/http/enabled</pre></div></li></ol></div></div><p>
    You can use the graphical <code class="command">dconf-editor</code> to create a
    profile with one user and then use <code class="command">dconf dump /</code>
    to list all configuration options. The configuration options can
    then be stored in a global profile.
   </p><p>
    A detailed description of the global configuration is available at
    <a class="link" href="https://wiki.gnome.org/Projects/dconf/SystemAdministrators" target="_blank">https://wiki.gnome.org/Projects/dconf/SystemAdministrators</a>.
   </p></section><section class="sect2" id="sec-gui-desktop-gnome-more-info" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">25.3.3 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-gui-desktop-gnome-more-info">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    For more information, see
    <a class="link" href="https://help.gnome.org/admin/" target="_blank">https://help.gnome.org/admin/</a>.
   </p></section></section><section class="sect1" id="sec-gui-desktop-suse-prime" data-id-title="Switching between Intel and NVIDIA Optimus GPUs with SUSE Prime"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">25.4 </span><span class="title-name">Switching between Intel and NVIDIA Optimus GPUs with SUSE Prime</span></span> <a title="Permalink" class="permalink" href="#sec-gui-desktop-suse-prime">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   SUSE Prime is a tool for switching between onboard Intel graphical
   processing units (GPUs) and NVIDIA GPUs equipped with NVIDIA's switchable
   graphics Optimus technology. Optimus provides a mechanism for easily
   switching between an onboard Intel GPU and a discrete NVIDIA GPU. This is
   designed for running a laptop in a power-saving mode or at maximum
   performance: use the Intel GPU to save power, and the NVIDIA GPU for 3D
   applications.
  </p><p>
   SUSE Prime works only on systems running X11, not Wayland. If your system
   runs Wayland, you must disable it and fall back to X11 to use SUSE Prime
   (see <a class="xref" href="#sec-gui-desktop-suse-prime-prereqs" title="25.4.1. Prerequisites">Section 25.4.1, “Prerequisites”</a>).
  </p><section class="sect2" id="sec-gui-desktop-suse-prime-prereqs" data-id-title="Prerequisites"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">25.4.1 </span><span class="title-name">Prerequisites</span></span> <a title="Permalink" class="permalink" href="#sec-gui-desktop-suse-prime-prereqs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    There must not be a <code class="filename">/etc/X11/xorg.conf</code> file, and no
    configuration files with active <code class="literal">ServerLayout</code>,
    <code class="literal">Device</code>, or <code class="literal">Screen</code>
    sections in the <code class="filename">/etc/X11/xorg.conf.d</code> directory.
   </p><p>
    SUSE Prime works only with X11. Use the <code class="command">loginctl</code>
    command to see if your system is using X11 or Wayland:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>loginctl
   SESSION        UID USER             SEAT             TTY             
         2       1000 tux             seat0               
<code class="prompt user">&gt; </code>loginctl show-session 2|grep Type
Type=x11</pre></div><p>
    If your system uses Wayland, disable it by editing
    <code class="filename">/etc/gdm/custom.conf</code> and un-commenting
    <code class="literal">WaylandEnable=false</code>. Then reboot.
   </p></section><section class="sect2" id="sec-gui-desktop-suse-prime-install" data-id-title="Installing and using SUSE Prime"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">25.4.2 </span><span class="title-name">Installing and using SUSE Prime</span></span> <a title="Permalink" class="permalink" href="#sec-gui-desktop-suse-prime-install">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Your NVIDIA graphics card should already be installed and working. 
      If it is not, see 
      <a class="xref" href="#sec-gui-desktop-install-nvidia" title="25.4.3. Installing NVIDIA drivers">Section 25.4.3, “Installing NVIDIA drivers”</a>. 
    </p><p>
       Install the <span class="package">suse-prime</span> package:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install suse-prime</pre></div><p>
    To switch your GPU run one of the following commands, then log out and log
    back in:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> prime-select intel
<code class="prompt user">&gt; </code><code class="command">sudo</code> prime-select intel2
<code class="prompt user">&gt; </code><code class="command">sudo</code> prime-select nvidia</pre></div><p>
    Use the <code class="command">intel</code> driver when it is the modesetting driver.
    <code class="command">intel2</code> is for systems that use the
    <span class="package">xf86-video-intel</span> driver. You can get this information by
    installing and running <span class="package">inxi</span>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>inxi -G
Graphics: Device-1: Intel Xeon E3-1200 v3/4th Gen Core Processor Integrated Graphics Controller
          Display Server: x11(X.org 1.20.1 ) drivers: modesetting (unloaded: fbdev, vesa)
          Resolution: 1920x1080@60.00hz
          OpenGL: renderer: Mesa DRI Intel Haswell Desktop version: 4.5 Mesa 18.2.8</pre></div><p>
    Which GPU is currently active?
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> /usr/sbin/prime-select get-current
Driver configured: intel</pre></div></section><section class="sect2" id="sec-gui-desktop-install-nvidia" data-id-title="Installing NVIDIA drivers"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">25.4.3 </span><span class="title-name">Installing NVIDIA drivers</span></span> <a title="Permalink" class="permalink" href="#sec-gui-desktop-install-nvidia">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/x11.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you need to identify your NVIDIA card so you know which driver to use, 
    run the following command:
</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>/sbin/lspci | grep VGA</pre></div><p>
    Follow these steps to install the drivers with Zypper.
   </p><p>
    List the available driver packages:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper se nvidia</pre></div><p>
    Then install the drivers for your NVIDIA graphics card:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper se <em class="replaceable">packagename</em></pre></div></section></section></section><section class="chapter" id="cha-fuse" data-id-title="Accessing file systems with FUSE"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">26 </span><span class="title-name">Accessing file systems with FUSE</span></span> <a title="Permalink" class="permalink" href="#cha-fuse">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/fuse.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    FUSE is the acronym for <span class="emphasis"><em>Filesystem in Userspace</em></span>.
    This means you can configure and mount a file system as an unprivileged
    user. Normally, you need to be
    <code class="systemitem">root</code> for this task. FUSE alone is
    a kernel module. Combined with plug-ins, it allows you to extend FUSE to
    access almost all file systems like remote SSH connections, ISO images, and
    more.
   </p></div></div></div></div><section class="sect1" id="sec-fuse-config" data-id-title="Configuring FUSE"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">26.1 </span><span class="title-name">Configuring FUSE</span></span> <a title="Permalink" class="permalink" href="#sec-fuse-config">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/fuse.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Before you can use FUSE, you need to install the package
   <code class="systemitem">fuse</code>. Depending which file system
   you want to use, you need additional plug-ins available as separate
   packages. 
  </p><p>
   Generally you do not need to configure FUSE. However, it is a good idea to
   create a directory where all your mount points are combined. For example,
   you can create a directory <code class="filename">~/mounts</code> and insert your
   subdirectories for your different file systems there.
  </p></section><section class="sect1" id="sec-fuse-ntfs" data-id-title="Mounting an NTFS partition"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">26.2 </span><span class="title-name">Mounting an NTFS partition</span></span> <a title="Permalink" class="permalink" href="#sec-fuse-ntfs">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/fuse.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   NTFS, the <span class="emphasis"><em>New Technology File System</em></span>, is the default
   file system of Windows. Since under normal circumstances the unprivileged
   user cannot mount NTFS block devices using the external FUSE library, the
   process of mounting a Windows partition described below requires root
   privileges. <span class="phrase">Mounting NTFS partitions is supported on
   SUSE Linux Enterprise Server and SUSE Linux Enterprise Desktop with SUSE Linux Enterprise Workstation Extension only.</span>
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Become <code class="systemitem">root</code> and install the
     package <code class="systemitem">ntfs-3g</code>. <span class="phrase">It is available in SUSE Linux Enterprise Workstation Extension.</span>
    </p></li><li class="step"><p>
     Create a directory that is to be used as a mount point, for example,
     <code class="filename">~/mounts/windows</code>.
    </p></li><li class="step"><p>
     Find out which Windows partition you need. Use YaST and start the
     partitioner module to see which partition belongs to Windows, but do not
     modify anything. Alternatively, become <code class="systemitem">root</code> and execute
     <code class="command">/sbin/fdisk</code> <code class="option">-l</code>. Look for partitions
     with a partition type of <code class="literal">HPFS/NTFS</code>.
    </p></li><li class="step"><p>
     Mount the partition in read-write mode. Replace the placeholder
     <em class="replaceable">DEVICE</em> with your respective Windows partition:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ntfs-3g /dev/<em class="replaceable">DEVICE</em> <em class="replaceable">MOUNT POINT</em></pre></div><p>
     To use your Windows partition in read-only mode, append <code class="option">-o
     ro</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ntfs-3g /dev/<em class="replaceable">DEVICE</em> <em class="replaceable">MOUNT POINT</em> -o ro</pre></div><p>
     The command <code class="command">ntfs-3g</code> uses the current user (UID) and
     group (GID) to mount the given device. To set the write permissions to a
     different user, use the command <code class="command">id</code>
     <code class="option">USER</code> to get the output of the UID and GID values. Set it
     with:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>id tux
uid=1000(tux) gid=100(users) groups=100(users),16(dialout),33(video)
ntfs-3g /dev/<em class="replaceable">DEVICE</em> <em class="replaceable">MOUNT POINT</em> -o uid=1000,gid=100</pre></div><p>
     Find additional options in the man page.
    </p></li></ol></div></div><p>
   To unmount the resource, run <code class="command">fusermount -u</code>
   <em class="replaceable">MOUNT POINT</em>.
  </p></section><section class="sect1" id="sec-fuse-moreinfo" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">26.3 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-fuse-moreinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/fuse.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For more information, see the home page of FUSE at
   <a class="link" href="https://github.com/libfuse/libfuse" target="_blank">https://github.com/libfuse/libfuse</a>.
  </p></section></section><section class="chapter" id="cha-tuning-multikernel" data-id-title="Installing multiple kernel versions"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">27 </span><span class="title-name">Installing multiple kernel versions</span></span> <a title="Permalink" class="permalink" href="#cha-tuning-multikernel">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_multikernel.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> supports the parallel installation of multiple kernel
    versions. When installing a second kernel, a boot entry and an initrd are
    automatically created, so no further manual configuration is needed. When
    rebooting the machine, the newly added kernel is available as an additional
    boot parameter.
   </p><p>
    Using this functionality, you can safely test kernel updates while being
    able to always fall back to the proven former kernel. To do this, do not use
    the update tools (such as the YaST Online Update or the updater applet),
    but instead follow the process described in this chapter.
   </p></div></div></div></div><div id="id-1.3.5.9.3" data-id-title="Support entitlement" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Support entitlement</div><p>
   Be aware that you lose your entire support entitlement for the machine when
   installing a self-compiled or a third-party kernel. Only kernels shipped
   with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> and kernels delivered via the official update channels
   for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> are supported.
  </p></div><div id="id-1.3.5.9.4" data-id-title="Check your boot loader configuration kernel" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Check your boot loader configuration kernel</div><p>
   It is recommended to check your boot loader configuration after having
   installed another kernel to set the default boot entry of your choice. See
   <a class="xref" href="#sec-grub2-yast2-config" title="18.3. Configuring the boot loader with YaST">Section 18.3, “Configuring the boot loader with YaST”</a> for more information.
  </p></div><section class="sect1" id="sec-tuning-multikernel-enable" data-id-title="Enabling and configuring multiversion support"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">27.1 </span><span class="title-name">Enabling and configuring multiversion support</span></span> <a title="Permalink" class="permalink" href="#sec-tuning-multikernel-enable">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_multikernel.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Installing multiple versions of a software package (multiversion support) is
   enabled by default with <span class="phrase">SUSE Linux Enterprise Server 12</span> and newer versions. To verify this
   setting, proceed as follows:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open <code class="filename">/etc/zypp/zypp.conf</code> with the editor of your
     choice as <code class="systemitem">root</code>.
    </p></li><li class="step"><p>
     Search for the string <code class="literal">multiversion</code>. If multiversion is
     enabled for all kernel packages capable of this feature, the following
     line appears uncommented:
    </p><div class="verbatim-wrap"><pre class="screen">multiversion = provides:multiversion(kernel)</pre></div></li><li class="step"><p>
     To restrict multi-version support to certain kernel flavors, add the
     package names as a comma-separated list to the
     <code class="literal">multiversion</code> option in
     <code class="filename">/etc/zypp/zypp.conf</code>, for example,
    </p><div class="verbatim-wrap"><pre class="screen">multiversion = kernel-default,kernel-default-base,kernel-source</pre></div></li><li class="step"><p>
     Save your changes.
    </p></li></ol></div></div><div id="id-1.3.5.9.5.4" data-id-title="Kernel Module Packages (KMP)" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Kernel Module Packages (KMP)</div><p>
    Make sure that required vendor-provided kernel modules (Kernel Module
    Packages) are also installed for the new updated kernel. The kernel update
    process will not warn about eventually missing kernel modules because
    package requirements are still fulfilled by the old kernel that is kept on
    the system.
   </p></div><section class="sect2" id="sec-tuning-multikernel-enable-keep" data-id-title="Automatically deleting unused kernels"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">27.1.1 </span><span class="title-name">Automatically deleting unused kernels</span></span> <a title="Permalink" class="permalink" href="#sec-tuning-multikernel-enable-keep">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_multikernel.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When frequently testing new kernels with multiversion support enabled, the
    boot menu quickly becomes confusing. Since a <code class="filename">/boot</code>
    partition normally has limited space, you may run into trouble with
    <code class="filename">/boot</code> overflowing. While you can delete unused kernel
    versions manually with YaST or Zypper (as described below), you can also
    configure <code class="systemitem">libzypp</code> to automatically
    delete kernels no longer used. By default no kernels are deleted.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Open <code class="filename">/etc/zypp/zypp.conf</code> with the editor of your
      choice as <code class="systemitem">root</code>.
     </p></li><li class="step"><p>
      Search for the string <code class="literal">multiversion.kernels</code> and
      activate this option by uncommenting the line. This option takes a
      comma-separated list of the following values:
     </p><p><span class="formalpara-title"><code class="literal"><em class="replaceable">5.3.18-53.3</em></code>:</span>
       keep the kernel with the specified version number
      </p><p><span class="formalpara-title"><code class="literal">latest</code>:</span>
       keep the kernel with the highest version number
      </p><p><span class="formalpara-title"><code class="literal">latest-N</code>:</span>
       keep the kernel with the Nth highest version number
      </p><p><span class="formalpara-title"><code class="literal">running</code>:</span>
       keep the running kernel
      </p><p><span class="formalpara-title"><code class="literal">oldest</code>:</span>
       keep the kernel with the lowest version number (the one that was
       originally shipped with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>)
      </p><p><span class="formalpara-title"><code class="literal">oldest+N</code>. </span>
       keep the kernel with the Nth lowest version number
      </p><p>
      Here are several examples
     </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.9.5.5.3.2.9.1"><span class="term"><code class="literal">multiversion.kernels = latest,running</code>
       </span></dt><dd><p>
         Keep the latest kernel and the one currently running. This is similar
         to not enabling the multiversion feature, except that the old kernel
         is removed <span class="emphasis"><em>after the next reboot</em></span> and not
         immediately after the installation.
        </p></dd><dt id="id-1.3.5.9.5.5.3.2.9.2"><span class="term"><code class="literal">multiversion.kernels = latest,latest-1,running
           </code>
       </span></dt><dd><p>
         Keep the last two kernels and the one currently running.
        </p></dd><dt id="id-1.3.5.9.5.5.3.2.9.3"><span class="term"><code class="literal">
         multiversion.kernels = latest,running,<em class="replaceable">5.3.18-53.3
           </em></code>
       </span></dt><dd><p>
         Keep the latest kernel, the one currently running, and
         <em class="replaceable">5.3.18-53.3</em>.
        </p></dd></dl></div><div id="id-1.3.5.9.5.5.3.2.10" data-id-title="Keep the running kernel" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Keep the running kernel</div><p>
       Unless you are using a special setup, always keep the
       kernel marked <code class="literal">running</code>.
      </p><p>
       If you do not keep the running kernel, it will be deleted when updating
       the kernel. In turn, this means that all the running kernel's modules are
       also deleted and cannot be loaded anymore.
      </p><p>
       If you decide not to keep the running kernel, always reboot
       immediately after a kernel upgrade to avoid issues with modules.
      </p></div></li></ol></div></div></section><section class="sect2" id="sec-tuning-multikernel-deleteoldkernel" data-id-title="Use case: deleting an old kernel after reboot only"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">27.1.2 </span><span class="title-name">Use case: deleting an old kernel after reboot only</span></span> <a title="Permalink" class="permalink" href="#sec-tuning-multikernel-deleteoldkernel">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_multikernel.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You want to make sure that an old kernel will only be deleted after the
    system has rebooted successfully with the new kernel.
   </p><p>
    Change the following line in <code class="filename">/etc/zypp/zypp.conf</code>:
   </p><div class="verbatim-wrap"><pre class="screen">multiversion.kernels = latest,running</pre></div><p>
    The previous parameters tell the system to keep the latest kernel and the
    running one only if they differ.
   </p></section><section class="sect2" id="sec-tuning-multikernel-fallback" data-id-title="Use case: keeping older kernels as fallback"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">27.1.3 </span><span class="title-name">Use case: keeping older kernels as fallback</span></span> <a title="Permalink" class="permalink" href="#sec-tuning-multikernel-fallback">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_multikernel.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You want to keep one or more kernel versions to have one or more
    <span class="quote">“<span class="quote">spare</span>”</span> kernels.
   </p><p>
    This can be useful if you need kernels for testing. If something goes wrong
    (for example, your machine does not boot), you
    still can use one or more kernel versions which are known to be good.
   </p><p>
    Change the following line in <code class="filename">/etc/zypp/zypp.conf</code>:
   </p><div class="verbatim-wrap"><pre class="screen">multiversion.kernels = latest,latest-1,latest-2,running</pre></div><p>
    When you reboot your system after the installation of a new kernel, the
    system will keep three kernels: the current kernel (configured as
    <code class="literal">latest,running</code>) and its two immediate predecessors
    (configured as <code class="literal">latest-1</code> and 
    <code class="literal">latest-2</code>).
   </p></section><section class="sect2" id="sec-tuning-multikernel-specificversion" data-id-title="Use case: keeping a specific kernel version"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">27.1.4 </span><span class="title-name">Use case: keeping a specific kernel version</span></span> <a title="Permalink" class="permalink" href="#sec-tuning-multikernel-specificversion">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_multikernel.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You make regular system updates and install new kernel versions. However,
    you are also compiling your own kernel version and want
    to make sure that the system will keep them.
   </p><p>
    Change the following line in <code class="filename">/etc/zypp/zypp.conf</code>:
   </p><div class="verbatim-wrap"><pre class="screen">multiversion.kernels = latest,5.3.18-53.3,running</pre></div><p>
    When you reboot your system after the installation of a new kernel, the
    system will keep two kernels: the new and running kernel (configured as
    <code class="literal">latest,running</code>) and your self-compiled kernel
    (configured as <code class="literal">5.3.18-53.3</code>).
   </p></section></section><section class="sect1" id="sec-tuning-multikernel-yast" data-id-title="Installing/removing multiple kernel versions with YaST"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">27.2 </span><span class="title-name">Installing/removing multiple kernel versions with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-tuning-multikernel-yast">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_multikernel.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You can install or remove multiple kernels with YaST:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Start YaST and open the software manager via <span class="guimenu">Software</span> › <span class="guimenu">Software Management</span>.
    </p></li><li class="step"><p>
     List all packages capable of providing multiple versions by choosing
     <span class="guimenu">View</span> › <span class="guimenu">Package Classification</span> › <span class="guimenu">Multiversion Packages</span>.
    </p><div class="figure" id="id-1.3.5.9.6.3.2.2"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_sw_multiversion.png"><img src="images/yast2_sw_multiversion.png" width="90%" alt="The YaST software manager: multiversion view" title="The YaST software manager: multiversion view"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 27.1: </span><span class="title-name">The YaST software manager: multiversion view </span></span><a title="Permalink" class="permalink" href="#id-1.3.5.9.6.3.2.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_multikernel.xml" title="Edit source document"> </a></div></div></div></li><li class="step"><p>
     Select a package and open its <span class="guimenu">Version</span> tab in the bottom
     pane on the left.
    </p></li><li class="step"><p>
     To install a package, click the check box next to it. A green check mark indicates it
     is selected for installation.
    </p><p>
     To remove an already installed package (marked with a white check mark),
     click the check box next to it until a red <code class="literal">X</code> indicates it is
     selected for removal.
    </p></li><li class="step"><p>
     Click <span class="guimenu">Accept</span> to start the installation.
    </p></li></ol></div></div></section><section class="sect1" id="sec-tuning-multikernel-zypper" data-id-title="Installing/removing multiple kernel versions with Zypper"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">27.3 </span><span class="title-name">Installing/removing multiple kernel versions with Zypper</span></span> <a title="Permalink" class="permalink" href="#sec-tuning-multikernel-zypper">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/tuning_multikernel.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You can install or remove multiple kernels with <code class="command">zypper</code>:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Use the command <code class="command">zypper se -s 'kernel*'</code> to display a
     list of all kernel packages available:
    </p><div class="verbatim-wrap"><pre class="screen">S  | Name                 | Type    | Version           | Arch   | Repository
---+----------------------+---------+-------------------+--------+------------------------------------------------------
i+ | kernel-default                          | package | 6.4.0-150600.9.2              | x86_64 | SLE-Module-Basesystem15-SP6-Pool
   | kernel-default-base                     | package | 6.4.0-150600.9.2.150600.10.40 | x86_64 | SLE-Module-Basesystem15-SP6-Pool
   | kernel-default-devel                    | package | 6.4.0-150600.9.2              | x86_64 | SLE-Module-Basesystem15-SP6-Pool
   | kernel-devel                            | package | 6.4.0-150600.9.2              | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-all                     | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-amdgpu                  | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-ath10k                  | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-ath11k                  | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-ath12k                  | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-atheros                 | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-bluetooth               | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-bnx2                    | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-brcm                    | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-chelsio                 | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-dpaa2                   | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-i915                    | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-intel                   | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-iwlwifi                 | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-liquidio                | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-marvell                 | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-media                   | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-mediatek                | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-mellanox                | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-mwifiex                 | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-network                 | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-nfp                     | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-nvidia                  | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
   | kernel-firmware-nvidia-gsp-G06          | package | 525.116.04-150500.1.1         | x86_64 | SLE-Module-Basesystem15-SP6-Pool
   | kernel-firmware-nvidia-gspx-G06         | package | 550.54.14-150600.1.1          | x86_64 | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-platform                | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-prestera                | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-qcom                    | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-qlogic                  | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-radeon                  | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-realtek                 | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-serial                  | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-sound                   | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-ti                      | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-ueagle                  | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
i  | kernel-firmware-usb-network             | package | 20240201-150600.1.1           | noarch | SLE-Module-Basesystem15-SP6-Pool
   | kernel-macros                           | package | 6.4.0-150600.9.2              | noarch | SLE-Module-Basesystem15-SP6-Pool</pre></div></li><li class="step"><p>
     Specify the exact version when installing:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper in kernel-default-6.4.0-150600.9.2</pre></div></li><li class="step"><p>
     When uninstalling a kernel, use the commands <code class="command">zypper se -si
     'kernel*'</code> to list all kernels installed and <code class="command">zypper
     rm</code> <em class="replaceable">PACKAGENAME-VERSION</em> to remove the
     package.
    </p></li></ol></div></div></section></section><section class="chapter" id="cha-mod" data-id-title="Managing kernel modules"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">28 </span><span class="title-name">Managing kernel modules</span></span> <a title="Permalink" class="permalink" href="#cha-mod">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/kernel_modules.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Although Linux is a monolithic kernel, it can be extended using kernel
   modules. These are special objects that can be inserted into the kernel and
   removed on demand. In practical terms, kernel modules make it possible to
   add and remove drivers and interfaces that are not included in the kernel
   itself. Linux provides several commands for managing kernel modules.
 </p><section class="sect1" id="sec-mod-lsmod" data-id-title="Listing loaded modules with lsmod and modinfo"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">28.1 </span><span class="title-name">Listing loaded modules with lsmod and modinfo</span></span> <a title="Permalink" class="permalink" href="#sec-mod-lsmod">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/kernel_modules.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Use the <code class="command">lsmod</code> command to view what kernel modules are
    currently loaded. The output of the command may look as follows:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>lsmod
Module                  Size  Used by
snd_usb_audio         188416  2
snd_usbmidi_lib        36864  1 snd_usb_audio
hid_plantronics        16384  0
snd_rawmidi            36864  1 snd_usbmidi_lib
snd_seq_device         16384  1 snd_rawmidi
fuse                  106496  3
nfsv3                  45056  1
nfs_acl                16384  1 nfsv3</pre></div><p>
    The output is divided into three columns. The <code class="literal">Module</code> column lists the names
    of the loaded modules, while the <code class="literal">Size</code> column displays the size of each
    module. The <code class="literal">Used by</code> column shows the number of referring
    modules and their names. This list may be incomplete.
  </p><p>
    To view detailed information about a specific kernel module, use the
    <code class="command">modinfo <em class="replaceable">MODULE_NAME</em></code> command, where
    <em class="replaceable">MODULE_NAME</em> is the name of the desired kernel
    module. The <code class="command">modinfo</code> binary resides in the
    <code class="filename">/sbin</code> directory that is not in the user's PATH
    environment variable. This means that you must specify the full path to the
    binary when running <code class="command">modinfo</code> command as a regular user:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>/sbin/modinfo kvm
filename:       /lib/modules/6.4.0-150600.9-default/kernel/arch/x86/kvm/kvm.ko.zst
license:        GPL
author:         Qumranet
suserelease:    SLE15-SP6
srcversion:     9DACE73AC65F98D556DAD60
depends:        irqbypass
supported:      yes
retpoline:      Y
intree:         Y
name:           kvm
vermagic:       6.4.0-150600.9-default SMP mod_unload modversions</pre></div></section><section class="sect1" id="sec-mod-modprobe" data-id-title="Adding and removing kernel modules"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">28.2 </span><span class="title-name">Adding and removing kernel modules</span></span> <a title="Permalink" class="permalink" href="#sec-mod-modprobe">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/kernel_modules.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      While it is possible to use <code class="systemitem">insmod</code> and
      <code class="systemitem">rmmod</code> to add and remove kernel modules, it is recommended to use the
      <code class="systemitem">modprobe</code> tool instead. <code class="systemitem">modprobe</code> offers several
      important advantages, including automatic dependency resolution and
      blacklisting.
    </p><p>
      When used without any parameters, the <code class="systemitem">modprobe</code>
      command installs a specified kernel module. <code class="systemitem">modprobe</code> must be run with root privileges:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> modprobe acpi</pre></div><p>
      To remove a kernel module, use the <code class="command">-r</code> parameter:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> modprobe -r acpi</pre></div><section class="sect2" id="sec-mod-modprobe-d" data-id-title="Loading kernel modules automatically on boot"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">28.2.1 </span><span class="title-name">Loading kernel modules automatically on boot</span></span> <a title="Permalink" class="permalink" href="#sec-mod-modprobe-d">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/kernel_modules.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Instead of loading kernel modules manually, you can load them
      automatically during the boot process using the
    <code class="systemitem">systemd-modules-load.service</code> service. To enable a
    kernel module, add a <code class="filename">.conf</code> file to the
    <code class="filename">/etc/modules-load.d/</code> directory. It is good practice
    to give the configuration file the same name as the module, for example:</p><div class="verbatim-wrap"><pre class="screen">/etc/modules-load.d/rt2800usb.conf</pre></div><p>
      The configuration file must contain the name of the desired kernel
      module (for example, <code class="literal">rt2800usb</code>).
    </p><p>
      The described technique allows you to load kernel modules without any
      parameters. If you need to load a kernel module with specific options,
      add a configuration file to the <code class="filename">/etc/modprobe.d/</code>
      directory instead. The file must have the <code class="filename">.conf</code>
      extension. The name of the file should adhere to the following naming convention:
      <code class="literal">priority-modulename.conf</code>, for example:
      <code class="filename">50-thinkfan.conf</code>. The configuration file must
      contain the name of the kernel module and the desired parameters. You can use the
    example command below to create a configuration file containing the name of the kernel module and its parameters:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>echo "options thinkpad_acpi fan_control=1" | sudo tee /etc/modprobe.d/thinkfan.conf</pre></div><div id="id-1.3.5.10.5.7.7" data-id-title="Loading kernel modules" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Loading kernel modules</div><p>
          Most kernel modules are loaded by the system automatically when a
          device is detected or user space requests specific
          functionality. Thus, adding modules manually to
          <code class="filename">/etc/modules-load.d/</code> is rarely required.
         </p></div></section><section class="sect2" id="sec-mod-modprobe-blacklist" data-id-title="Blacklisting kernel modules with modprobe"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">28.2.2 </span><span class="title-name">Blacklisting kernel modules with modprobe</span></span> <a title="Permalink" class="permalink" href="#sec-mod-modprobe-blacklist">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/kernel_modules.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Blacklisting a kernel module prevents it from loading during the boot
      process. This can be useful when you want to disable a module that you
      suspect is causing problems on your system. You can still load blacklisted
      kernel modules manually using the
      <code class="systemitem">insmod</code> or <code class="systemitem">modprobe</code> tools.
    </p><p>
      To blacklist a module, create a file
      <code class="filename">/etc/modprobe.d/60-blacklist-<em class="replaceable">MODULE_NAME</em>.conf</code>
      with the following content:
    </p><div class="verbatim-wrap"><pre class="screen">blacklist <em class="replaceable">MODULE_NAME</em></pre></div><p>
      Run the <code class="command">dracut</code> command as root to generate a new <code class="systemitem">initrd</code>
      image, then reboot your machine (replace <em class="replaceable">NAME</em>
      with the name of the current initrd and
      <em class="replaceable">KERNELVERSION</em> with the currently running kernel):
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>su
echo "blacklist nouveau" &gt;&gt; /etc/modprobe.d/60-blacklist-nouveau.conf
/usr/bin/dracut --logfile /var/log/YaST2/mkinitrd.log --force /boot/$initrd-<em class="replaceable">NAME</em> $<em class="replaceable">KERNELVERSION</em>
reboot</pre></div><p>
      To disable a kernel module temporarily only,
      blacklist it on-the-fly during the boot. To do this, press the
      <span class="keycap">E</span> key when you see the boot screen. This drops you into
      a minimal editor that allows you to modify boot parameters. Locate the
      line that looks as follows:
    </p><div class="verbatim-wrap"><pre class="screen">linux /boot/vmlinuz...splash= silent quiet showopts</pre></div><p>
      Add the
      <code class="command">modprobe.blacklist=<em class="replaceable">MODULE_NAME</em></code>
      command to the end of the line. For example:
    </p><div class="verbatim-wrap"><pre class="screen">linux /boot/vmlinuz...splash= silent quiet showopts modprobe.blacklist=nouveau</pre></div><p>
      Press <span class="keycap">F10</span> or <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">X</span> to boot with the
      specified configuration.
    </p><p>
      To blacklist a kernel module permanently via GRUB, open the
      <code class="filename">/etc/default/grub</code> file for editing, and add the
      <code class="command">modprobe.blacklist=<em class="replaceable">MODULE_NAME</em></code>
      option to the <code class="command">GRUB_CMDLINE_LINUX</code> command. Then run the
      <code class="command">sudo grub2-mkconfig -o /boot/grub2/grub.cfg</code> command to enable
      the changes.
    </p></section></section></section><section class="chapter" id="cha-udev" data-id-title="Dynamic kernel device management with udev"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">29 </span><span class="title-name">Dynamic kernel device management with <code class="systemitem">udev</code></span></span> <a title="Permalink" class="permalink" href="#cha-udev">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The kernel can add or remove almost any device in a running system. Changes
  in the device state (whether a device is plugged in or removed) need to be
  propagated to user space. Devices need to be configured when they are
  plugged in and recognized. Users of a certain device need to be informed
  about any changes in this device's recognized state.
  <code class="systemitem">udev</code> provides the needed
  infrastructure to dynamically maintain the device node files and symbolic
  links in the <code class="filename">/dev</code> directory.
  <code class="systemitem">udev</code> rules provide a way to plug
  external tools into the kernel device event processing. This allows you to
  customize <code class="systemitem">udev</code> device handling by adding certain scripts to execute as part of kernel device
  handling, or request and import additional data to evaluate during device
  handling.
 </p><section class="sect1" id="sec-udev-devdir" data-id-title="The /dev directory"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.1 </span><span class="title-name">The <code class="filename">/dev</code> directory</span></span> <a title="Permalink" class="permalink" href="#sec-udev-devdir">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The device nodes in the <code class="filename">/dev</code> directory provide access
   to the corresponding kernel devices. With
   <code class="systemitem">udev</code>, the <code class="filename">/dev</code>
   directory reflects the current state of the kernel. Every kernel device has
   one corresponding device file. If a device is disconnected from the system,
   the device node is removed.
  </p><p>
   The content of the <code class="filename">/dev</code> directory is kept on a
   temporary file system and all files are rendered at every system start-up.
   Manually created or modified files do not, by design, survive a reboot.
   Static files and directories that should always be in the
   <code class="filename">/dev</code> directory regardless of the state of the
   corresponding kernel device can be created with systemd-tmpfiles. The
   configuration files are found in <code class="filename">/usr/lib/tmpfiles.d/</code>
   and <code class="filename">/etc/tmpfiles.d/</code>; for more information, see the
   <code class="systemitem">systemd-tmpfiles(8)</code> man page.
  </p></section><section class="sect1" id="sec-udev-kernel" data-id-title="Kernel uevents and udev"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.2 </span><span class="title-name">Kernel <code class="systemitem">uevents</code> and <code class="systemitem">udev</code></span></span> <a title="Permalink" class="permalink" href="#sec-udev-kernel">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The required device information is exported by the
   <code class="systemitem">sysfs</code> file system. For every
   device the kernel has detected and initialized, a directory with the device
   name is created. It contains attribute files with device-specific
   properties.
  </p><p>
   Every time a device is added or removed, the kernel sends a uevent to notify
   <code class="systemitem">udev</code> of the change. The
   <code class="systemitem">udev</code> daemon reads and parses all
   rules from the <code class="filename">/usr/lib/udev/rules.d/*.rules</code> and
   <code class="filename">/etc/udev/rules.d/*.rules</code> files at start-up and keeps
   them in memory. If rules files are changed, added or removed, the daemon can
   reload their in-memory representation with the command
   <code class="command">udevadm control --reload</code>. For more details on
   <code class="systemitem">udev</code> rules and their syntax, refer
   to <a class="xref" href="#sec-udev-rules" title="29.6. Influencing kernel device event handling with udev rules">Section 29.6, “Influencing kernel device event handling with <code class="systemitem">udev</code> rules”</a>.
  </p><p>
   Every received event is matched against the set of provides rules. The rules
   can add or change event environment keys, request a specific name for the
   device node to create, add symbolic links pointing to the node or add
   programs to run after the device node is created. The driver core
   <code class="systemitem">uevents</code> are received from a kernel
   netlink socket.
  </p></section><section class="sect1" id="sec-udev-drivers" data-id-title="Drivers, kernel modules and devices"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.3 </span><span class="title-name">Drivers, kernel modules and devices</span></span> <a title="Permalink" class="permalink" href="#sec-udev-drivers">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The kernel bus drivers probe for devices. For every detected device, the
   kernel creates an internal device structure while the driver core sends a
   uevent to the <code class="systemitem">udev</code> daemon. Bus
   devices identify themselves by a specially formatted ID, which tells what
   kind of device it is. These IDs consist of vendor and product ID and
   other subsystem-specific values. Every bus has its own scheme for these IDs,
   called <code class="envar">MODALIAS</code>. The kernel takes the device information,
   composes a <code class="envar">MODALIAS</code> ID string from it and sends that string
   along with the event. For a USB mouse, it looks like this:
  </p><div class="verbatim-wrap"><pre class="screen">MODALIAS=usb:v046DpC03Ed2000dc00dsc00dp00ic03isc01ip02</pre></div><p>
   Every device driver carries a list of known aliases for devices it can
   handle. The list is contained in the kernel module file itself. The program
   depmod reads the ID lists and creates the file
   <code class="filename">modules.alias</code> in the kernel's
   <code class="filename">/lib/modules</code> directory for all currently available
   modules. With this infrastructure, module loading is as easy as calling
   <code class="command">modprobe</code> for every event that carries a
   <code class="literal">MODALIAS</code> key. If <code class="command">modprobe $MODALIAS</code> is
   called, it matches the device alias composed for the device with the aliases
   provided by the modules. If a matching entry is found, that module is
   loaded. All this is automatically triggered by
   <code class="systemitem">udev</code>.
  </p></section><section class="sect1" id="sec-udev-boot" data-id-title="Booting and initial device setup"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.4 </span><span class="title-name">Booting and initial device setup</span></span> <a title="Permalink" class="permalink" href="#sec-udev-boot">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   All device events happening during the boot process before the
   <code class="systemitem">udev</code> daemon is running are lost,
   because the infrastructure to handle these events resides on the root file
   system and is not available at that time. To cover that loss, the kernel
   provides a <code class="filename">uevent</code> file located in the device directory
   of every device in the <code class="systemitem">sysfs</code>
   file system. By writing <code class="literal">add</code> to that file, the kernel
   resends the same event as the one lost during boot. A simple loop over all
   <code class="filename">uevent</code> files in <code class="filename">/sys</code> triggers all
   events again to create the device nodes and perform device setup.
  </p><p>
   As an example, a USB mouse present during boot may not be initialized by the
   early boot logic, because the driver is not available at that time. The
   event for the device discovery was lost and failed to find a kernel module
   for the device. Instead of manually searching for connected
   devices, <code class="systemitem">udev</code> requests all device
   events from the kernel after the root file system is available, so the event
   for the USB mouse device runs again. Now it finds the kernel module on the
   mounted root file system and the USB mouse can be initialized.
  </p><p>
   From user space, there is no visible difference between a device coldplug
   sequence and a device discovery during runtime. In both cases, the same
   rules are used to match and the same configured programs are run.
  </p></section><section class="sect1" id="sec-udev-debug" data-id-title="Monitoring the running udev daemon"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.5 </span><span class="title-name">Monitoring the running <code class="systemitem">udev</code> daemon</span></span> <a title="Permalink" class="permalink" href="#sec-udev-debug">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The program <code class="command">udevadm monitor</code> can be used to visualize the
   driver core events and the timing of the
   <code class="systemitem">udev</code> event processes.
  </p><div class="verbatim-wrap"><pre class="screen">UEVENT[1185238505.276660] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1 (usb)
UDEV  [1185238505.279198] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1 (usb)
UEVENT[1185238505.279527] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0 (usb)
UDEV  [1185238505.285573] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0 (usb)
UEVENT[1185238505.298878] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10 (input)
UDEV  [1185238505.305026] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10 (input)
UEVENT[1185238505.305442] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10/mouse2 (input)
UEVENT[1185238505.306440] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10/event4 (input)
UDEV  [1185238505.325384] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10/event4 (input)
UDEV  [1185238505.342257] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10/mouse2 (input)</pre></div><p>
   The <code class="literal">UEVENT</code> lines show the events the kernel has sent over
   netlink. The <code class="literal">UDEV</code> lines show the finished
   <code class="systemitem">udev</code> event handlers. The timing is
   printed in microseconds. The time between <code class="literal">UEVENT</code> and
   <code class="literal">UDEV</code> is the time
   <code class="systemitem">udev</code> took to process this event or
   the <code class="systemitem">udev</code> daemon has delayed its
   execution to synchronize this event with related and already running events.
   For example, events for hard disk partitions always wait for the main disk
   device event to finish, because the partition events may rely on the data
   that the main disk event has queried from the hardware.
  </p><p>
   <code class="command">udevadm monitor --env</code> shows the complete event
   environment:
  </p><div class="verbatim-wrap"><pre class="screen">ACTION=add
DEVPATH=/devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10
SUBSYSTEM=input
SEQNUM=1181
NAME="Logitech USB-PS/2 Optical Mouse"
PHYS="usb-0000:00:1d.2-1/input0"
UNIQ=""
EV=7
KEY=70000 0 0 0 0
REL=103
MODALIAS=input:b0003v046DpC03Ee0110-e0,1,2,k110,111,112,r0,1,8,amlsfw</pre></div><p>
   <code class="systemitem">udev</code> also sends messages to syslog.
   The default syslog priority that controls which messages are sent to syslog
   is specified in the <code class="systemitem">udev</code>
   configuration file <code class="filename">/etc/udev/udev.conf</code>. The log
   priority of the running daemon can be changed with <code class="command">udevadm control
   --log_priority=</code><em class="replaceable">LEVEL/NUMBER</em>.
  </p></section><section class="sect1" id="sec-udev-rules" data-id-title="Influencing kernel device event handling with udev rules"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.6 </span><span class="title-name">Influencing kernel device event handling with <code class="systemitem">udev</code> rules</span></span> <a title="Permalink" class="permalink" href="#sec-udev-rules">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A <code class="systemitem">udev</code> rule can match any property
   the kernel adds to the event itself or any information that the kernel
   exports to <code class="filename">sysfs</code>. The rule can also request additional
   information from external programs. Events are matched against all rules
   provided in the directories <code class="filename">/usr/lib/udev/rules.d/</code>
   (for default rules) and <code class="filename">/etc/udev/rules.d</code>
   (system-specific configuration).
  </p><p>
   Every line in the rules file contains at least one key value pair. There are
   two kinds of keys, match and assignment keys. If all match keys match their
   values, the rule is applied and the assignment keys are assigned the
   specified value. A matching rule may specify the name of the device node,
   add symbolic links pointing to the node or run a specified program as part
   of the event handling. If no matching rule is found, the default device node
   name is used to create the device node. Detailed information about the rule
   syntax and the provided keys to match or import data are described in the
   <code class="systemitem">udev</code> man page. The following
   example rules provide a basic introduction to
   <code class="systemitem">udev</code> rule syntax. The example rules
   are all taken from the <code class="systemitem">udev</code> default
   rule set <code class="filename">/usr/lib/udev/rules.d/50-udev-default.rules</code>.
  </p><div class="example" id="ex-rules" data-id-title="Example udev rules"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 29.1: </span><span class="title-name">Example <code class="systemitem">udev</code> rules </span></span><a title="Permalink" class="permalink" href="#ex-rules">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># console
KERNEL=="console", MODE="0600", OPTIONS="last_rule"

# serial devices
KERNEL=="ttyUSB*", ATTRS{product}=="[Pp]alm*Handheld*", SYMLINK+="pilot"

# printer
SUBSYSTEM=="usb", KERNEL=="lp*", NAME="usb/%k", SYMLINK+="usb%k", GROUP="lp"

# kernel firmware loader
SUBSYSTEM=="firmware", ACTION=="add", RUN+="firmware.sh"</pre></div></div></div><p>
   The <code class="systemitem">console</code> rule consists of three keys: one match
   key (<code class="literal">KERNEL</code>) and two assign keys
   (<code class="literal">MODE</code>, <code class="literal">OPTIONS</code>). The
   <code class="literal">KERNEL</code> match rule searches the device list for any items
   of the type <code class="literal">console</code>. Only exact matches are valid and
   trigger this rule to be executed. The <code class="literal">MODE</code> key assigns
   special permissions to the device node, in this case, read and write
   permissions to the owner of this device only. The <code class="literal">OPTIONS</code>
   key makes this rule the last rule to be applied to any device of this type.
   Any later rule matching this particular device type does not have any
   effect.
  </p><p>
   The <code class="systemitem">serial devices</code> rule is not available in
   <code class="filename">50-udev-default.rules</code> anymore, but it is still worth
   considering. It consists of two match keys (<code class="literal">KERNEL</code> and
   <code class="literal">ATTRS</code>) and one assign key (<code class="literal">SYMLINK</code>).
   The <code class="literal">KERNEL</code> key searches for all devices of the
   <code class="literal">ttyUSB</code> type. Using the <code class="literal">*</code> wild card,
   this key matches several of these devices. The second match key,
   <code class="literal">ATTRS</code>, checks whether the <code class="filename">product</code>
   attribute file in <code class="literal">sysfs</code> for any <code class="literal">ttyUSB</code>
   device contains a certain string. The assign key
   (<code class="literal">SYMLINK</code>) triggers the addition of a symbolic link to
   this device under <code class="filename">/dev/pilot</code>. The operator used in this
   key (<code class="literal">+=</code>) tells
   <code class="systemitem">udev</code> to additionally perform this
   action, even if previous or later rules add other symbolic links. As this
   rule contains two match keys, it is only applied if both conditions are met.
  </p><p>
   The <code class="systemitem">printer</code> rule deals with USB printers and
   contains two match keys which must both apply to get the entire rule applied
   (<code class="literal">SUBSYSTEM</code> and <code class="literal">KERNEL</code>). Three assign
   keys deal with the naming for this device type (<code class="literal">NAME</code>),
   the creation of symbolic device links (<code class="literal">SYMLINK</code>) and the
   group membership for this device type (<code class="literal">GROUP</code>). Using the
   <code class="literal">*</code> wild card in the <code class="literal">KERNEL</code> key makes it
   match several <code class="literal">lp</code> printer devices. Substitutions are used
   in both, the <code class="literal">NAME</code> and the <code class="literal">SYMLINK</code> keys
   to extend these strings by the internal device name. For example, the
   symbolic link to the first <code class="literal">lp</code> USB printer would read
   <code class="filename">/dev/usblp0</code>.
  </p><p>
   The <code class="systemitem">kernel firmware loader</code> rule makes
   <code class="systemitem">udev</code> load additional firmware by an
   external helper script during runtime. The <code class="literal">SUBSYSTEM</code>
   match key searches for the <code class="literal">firmware</code> subsystem. The
   <code class="literal">ACTION</code> key checks whether any device belonging to the
   <code class="literal">firmware</code> subsystem has been added. The
   <code class="literal">RUN+=</code> key triggers the execution of the
   <code class="literal">firmware.sh</code> script to locate the firmware that is to be
   loaded.
  </p><p>
   General characteristics are common to all rules:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Each rule consists of one or more key value pairs separated by a comma.
    </p></li><li class="listitem"><p>
     A key's operation is determined by the operator.
     <code class="systemitem">udev</code> rules support several
     operators.
    </p></li><li class="listitem"><p>
     Each given value must be enclosed by quotation marks.
    </p></li><li class="listitem"><p>
     Each line of the rules file represents one rule. If a rule is longer than
     one line, use <code class="literal">\</code> to join the different lines as you
     would do in shell syntax.
    </p></li><li class="listitem"><p>
     <code class="systemitem">udev</code> rules support a shell-style
     pattern that matches the <code class="literal">*</code>, <code class="literal">?</code>, and
     <code class="literal">[]</code> patterns.
    </p></li><li class="listitem"><p>
     <code class="systemitem">udev</code> rules support substitutions.
    </p></li></ul></div><section class="sect2" id="sec-udev-rules-ops" data-id-title="Using operators in udev rules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">29.6.1 </span><span class="title-name">Using operators in <code class="systemitem">udev</code> rules</span></span> <a title="Permalink" class="permalink" href="#sec-udev-rules-ops">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Creating keys you can choose from several operators, depending on the type
    of key you want to create. Match keys will normally be used to find a value
    that either matches or explicitly mismatches the search value. Match keys
    contain either of the following operators:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.11.9.11.3.1"><span class="term"><code class="literal">==</code>
     </span></dt><dd><p>
       Compare for equality. If the key contains a search pattern, all results
       matching this pattern are valid.
      </p></dd><dt id="id-1.3.5.11.9.11.3.2"><span class="term"><code class="literal">!=</code>
     </span></dt><dd><p>
       Compare for non-equality. If the key contains a search pattern, all
       results matching this pattern are valid.
      </p></dd></dl></div><p>
    Any of the following operators can be used with assign keys:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.11.9.11.5.1"><span class="term"><code class="literal">=</code>
     </span></dt><dd><p>
       Assign a value to a key. If the key previously consisted of a list of
       values, the key resets and only the single value is assigned.
      </p></dd><dt id="id-1.3.5.11.9.11.5.2"><span class="term"><code class="literal">+=</code>
     </span></dt><dd><p>
       Add a value to a key that contains a list of entries.
      </p></dd><dt id="id-1.3.5.11.9.11.5.3"><span class="term"><code class="literal">:=</code>
     </span></dt><dd><p>
       Assign a final value. Disallow any later change by later rules.
      </p></dd></dl></div></section><section class="sect2" id="sec-udev-rules-subst" data-id-title="Using substitutions in udev rules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">29.6.2 </span><span class="title-name">Using substitutions in <code class="systemitem">udev</code> rules</span></span> <a title="Permalink" class="permalink" href="#sec-udev-rules-subst">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <code class="systemitem">udev</code> rules support the use of
    placeholders and substitutions. Use them in a similar fashion as you would
    do in any other scripts. The following substitutions can be used with
    <code class="systemitem">udev</code> rules:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.11.9.12.3.1"><span class="term"><code class="literal">%r</code>, <code class="literal">$root</code>
     </span></dt><dd><p>
       The device directory, <code class="filename">/dev</code> by default.
      </p></dd><dt id="id-1.3.5.11.9.12.3.2"><span class="term"><code class="literal">%p</code>, <code class="literal">$devpath</code>
     </span></dt><dd><p>
       The value of <code class="envar">DEVPATH</code>.
      </p></dd><dt id="id-1.3.5.11.9.12.3.3"><span class="term"><code class="literal">%k</code>, <code class="literal">$kernel</code>
     </span></dt><dd><p>
       The value of <code class="envar">KERNEL</code> or the internal device name.
      </p></dd><dt id="id-1.3.5.11.9.12.3.4"><span class="term"><code class="literal">%n</code>, <code class="literal">$number</code>
     </span></dt><dd><p>
       The device number.
      </p></dd><dt id="id-1.3.5.11.9.12.3.5"><span class="term"><code class="literal">%N</code>, <code class="literal">$tempnode</code>
     </span></dt><dd><p>
       The temporary name of the device file.
      </p></dd><dt id="id-1.3.5.11.9.12.3.6"><span class="term"><code class="literal">%M</code>, <code class="literal">$major</code>
     </span></dt><dd><p>
       The major number of the device.
      </p></dd><dt id="id-1.3.5.11.9.12.3.7"><span class="term"><code class="literal">%m</code>, <code class="literal">$minor</code>
     </span></dt><dd><p>
       The minor number of the device.
      </p></dd><dt id="id-1.3.5.11.9.12.3.8"><span class="term"><code class="literal">%s{<em class="replaceable">ATTRIBUTE</em>}</code>,
     <code class="literal">$attr{<em class="replaceable">ATTRIBUTE</em>}</code>
     </span></dt><dd><p>
       The value of a <code class="filename">sysfs</code> attribute (specified by
       <em class="replaceable">ATTRIBUTE</em>).
      </p></dd><dt id="id-1.3.5.11.9.12.3.9"><span class="term"><code class="literal">%E{<em class="replaceable">VARIABLE</em>}</code>,
     <code class="literal">$env{<em class="replaceable">VARIABLE</em>}</code>
     </span></dt><dd><p>
       The value of an environment variable (specified by
       <em class="replaceable">VARIABLE</em>).
      </p></dd><dt id="id-1.3.5.11.9.12.3.10"><span class="term"><code class="literal">%c</code>, <code class="literal">$result</code>
     </span></dt><dd><p>
       The output of <code class="envar">PROGRAM</code>.
      </p></dd><dt id="id-1.3.5.11.9.12.3.11"><span class="term"><code class="literal">%%</code>
     </span></dt><dd><p>
       The <code class="literal">%</code> character.
      </p></dd><dt id="id-1.3.5.11.9.12.3.12"><span class="term"><code class="literal">$$</code>
     </span></dt><dd><p>
       The <code class="literal">$</code> character.
      </p></dd></dl></div></section><section class="sect2" id="sec-udev-rules-match" data-id-title="Using udev match keys"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">29.6.3 </span><span class="title-name">Using <code class="systemitem">udev</code> match keys</span></span> <a title="Permalink" class="permalink" href="#sec-udev-rules-match">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Match keys describe conditions that must be met before a
    <code class="systemitem">udev</code> rule can be applied. The
    following match keys are available:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.11.9.13.3.1"><span class="term"><code class="literal">ACTION</code>
     </span></dt><dd><p>
       The name of the event action, for example, <code class="literal">add</code> or
       <code class="literal">remove</code> when adding or removing a device.
      </p></dd><dt id="id-1.3.5.11.9.13.3.2"><span class="term"><code class="literal">DEVPATH</code>
     </span></dt><dd><p>
       The device path of the event device, for example,
       <code class="literal">DEVPATH=/bus/pci/drivers/ipw3945</code> to search for all
       events related to the ipw3945 driver.
      </p></dd><dt id="id-1.3.5.11.9.13.3.3"><span class="term"><code class="literal">KERNEL</code>
     </span></dt><dd><p>
       The internal (kernel) name of the event device.
      </p></dd><dt id="id-1.3.5.11.9.13.3.4"><span class="term"><code class="literal">SUBSYSTEM</code>
     </span></dt><dd><p>
       The subsystem of the event device, for example,
       <code class="literal">SUBSYSTEM=usb</code> for all events related to USB devices.
      </p></dd><dt id="id-1.3.5.11.9.13.3.5"><span class="term"><code class="literal">ATTR{<em class="replaceable">FILENAME</em>}</code>
     </span></dt><dd><p>
       <code class="systemitem">sysfs</code> attributes of the
       event device. To match a string contained in the
       <code class="filename">vendor</code> attribute file name, you could use
       <code class="literal">ATTR{vendor}=="On[sS]tream"</code>, for example.
      </p></dd><dt id="id-1.3.5.11.9.13.3.6"><span class="term"><code class="literal">KERNELS</code>
     </span></dt><dd><p>
       Let <code class="systemitem">udev</code> search the device path
       upward for a matching device name.
      </p></dd><dt id="id-1.3.5.11.9.13.3.7"><span class="term"><code class="literal">SUBSYSTEMS</code>
     </span></dt><dd><p>
       Let <code class="systemitem">udev</code> search the device path
       upward for a matching device subsystem name.
      </p></dd><dt id="id-1.3.5.11.9.13.3.8"><span class="term"><code class="literal">DRIVERS</code>
     </span></dt><dd><p>
       Let <code class="systemitem">udev</code> search the device path
       upward for a matching device driver name.
      </p></dd><dt id="id-1.3.5.11.9.13.3.9"><span class="term"><code class="literal">ATTRS{<em class="replaceable">FILENAME</em>}</code>
     </span></dt><dd><p>
       Let <code class="systemitem">udev</code> search the device path
       upward for a device with matching
       <code class="systemitem">sysfs</code> attribute values.
      </p></dd><dt id="id-1.3.5.11.9.13.3.10"><span class="term"><code class="literal">ENV{<em class="replaceable">KEY</em>}</code>
     </span></dt><dd><p>
       The value of an environment variable, for example,
       <code class="literal">ENV{ID_BUS}="ieee1394</code> to search for all events
       related to the FireWire bus ID.
      </p></dd><dt id="id-1.3.5.11.9.13.3.11"><span class="term"><code class="literal">PROGRAM</code>
     </span></dt><dd><p>
       Let <code class="systemitem">udev</code> execute an external
       program. To be successful, the program must return with exit code zero.
       The program's output, printed to STDOUT, is available to the
       <code class="literal">RESULT</code> key.
      </p></dd><dt id="id-1.3.5.11.9.13.3.12"><span class="term"><code class="literal">RESULT</code>
     </span></dt><dd><p>
       Match the output string of the last <code class="literal">PROGRAM</code> call.
       Either include this key in the same rule as the
       <code class="literal">PROGRAM</code> key or in a later one.
      </p></dd></dl></div></section><section class="sect2" id="sec-udev-rules-assign" data-id-title="Using udev assign keys"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">29.6.4 </span><span class="title-name">Using <code class="systemitem">udev</code> assign keys</span></span> <a title="Permalink" class="permalink" href="#sec-udev-rules-assign">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In contrast to the match keys described above, assign keys do not describe
    conditions that must be met. They assign values, names and actions to the
    device nodes maintained by <code class="systemitem">udev</code>.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.11.9.14.3.1"><span class="term"><code class="literal">NAME</code>
     </span></dt><dd><p>
       The name of the device node to be created. After a rule has set a node
       name, all other rules with a <code class="literal">NAME</code> key for this node
       are ignored.
      </p></dd><dt id="id-1.3.5.11.9.14.3.2"><span class="term"><code class="literal">SYMLINK</code>
     </span></dt><dd><p>
       The name of a symbolic link related to the node to be created. Multiple
       matching rules can add symbolic links to be created with the device
       node. You can also specify multiple symbolic links for one node in one
       rule using the space character to separate the symbolic link names.
      </p></dd><dt id="id-1.3.5.11.9.14.3.3"><span class="term"><code class="literal">OWNER, GROUP, MODE</code>
     </span></dt><dd><p>
       The permissions for the new device node. Values specified here overwrite
       anything that has been compiled in.
      </p></dd><dt id="id-1.3.5.11.9.14.3.4"><span class="term"><code class="literal">ATTR{<em class="replaceable">KEY</em>}</code>
     </span></dt><dd><p>
       Specify a value to be written to a
       <code class="systemitem">sysfs</code> attribute of the event
       device. If the <code class="literal">==</code> operator is used, this key is also
       used to match against the value of a
       <code class="systemitem">sysfs</code> attribute.
      </p></dd><dt id="id-1.3.5.11.9.14.3.5"><span class="term"><code class="literal">ENV{<em class="replaceable">KEY</em>}</code>
     </span></dt><dd><p>
       Tell <code class="systemitem">udev</code> to export a variable
       to the environment. If the <code class="literal">==</code> operator is used, this
       key is also used to match against an environment variable.
      </p></dd><dt id="id-1.3.5.11.9.14.3.6"><span class="term"><code class="literal">RUN</code>
     </span></dt><dd><p>
       Tell <code class="systemitem">udev</code> to add a program to
       the list of programs to be executed for this device. Keep in mind to
       restrict this to short tasks to avoid blocking further events for
       this device.
      </p></dd><dt id="id-1.3.5.11.9.14.3.7"><span class="term"><code class="literal">LABEL</code>
     </span></dt><dd><p>
       Add a label where a <code class="literal">GOTO</code> can jump to.
      </p></dd><dt id="id-1.3.5.11.9.14.3.8"><span class="term"><code class="literal">GOTO</code>
     </span></dt><dd><p>
       Tell <code class="systemitem">udev</code> to skip several
       rules and continue with the one that carries the label referenced by the
       <code class="literal">GOTO</code> key.
      </p></dd><dt id="id-1.3.5.11.9.14.3.9"><span class="term"><code class="literal">IMPORT{<em class="replaceable">TYPE</em>}</code>
     </span></dt><dd><p>
       Load variables into the event environment such as the output of an
       external program. <code class="systemitem">udev</code> imports
       variables of several types. If no type is specified,
       <code class="systemitem">udev</code> tries to determine the
       type itself based on the executable bit of the file permissions.
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         <code class="literal">program</code> tells
         <code class="systemitem">udev</code> to execute an external
         program and import its output.
        </p></li><li class="listitem"><p>
         <code class="literal">file</code> tells
         <code class="systemitem">udev</code> to import a text file.
        </p></li><li class="listitem"><p>
         <code class="literal">parent</code> tells
         <code class="systemitem">udev</code> to import the stored
         keys from the parent device.
        </p></li></ul></div></dd><dt id="id-1.3.5.11.9.14.3.10"><span class="term"><code class="literal">WAIT_FOR_SYSFS</code>
     </span></dt><dd><p>
       Tells <code class="systemitem">udev</code> to wait for the
       specified <code class="systemitem">sysfs</code> file to be
       created for a certain device. For example,
       <code class="literal">WAIT_FOR_SYSFS="ioerr_cnt"</code> informs
       <code class="systemitem">udev</code> to wait until the
       <code class="filename">ioerr_cnt</code> file has been created.
      </p></dd><dt id="id-1.3.5.11.9.14.3.11"><span class="term"><code class="literal">OPTIONS</code>
     </span></dt><dd><p>
       The <code class="literal">OPTION</code> key may have several values:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         <code class="literal">last_rule</code> tells
         <code class="systemitem">udev</code> to ignore all later
         rules.
        </p></li><li class="listitem"><p>
         <code class="literal">ignore_device</code> tells
         <code class="systemitem">udev</code> to ignore this event.
        </p></li><li class="listitem"><p>
         <code class="literal">ignore_remove</code> tells
         <code class="systemitem">udev</code> to ignore all later
         remove events for the device.
        </p></li><li class="listitem"><p>
         <code class="literal">all_partitions</code> tells
         <code class="systemitem">udev</code> to create device nodes
         for all available partitions on a block device.
        </p></li></ul></div></dd></dl></div></section></section><section class="sect1" id="sec-udev-persdev" data-id-title="Persistent device naming"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.7 </span><span class="title-name">Persistent device naming</span></span> <a title="Permalink" class="permalink" href="#sec-udev-persdev">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The dynamic device directory and the
   <code class="systemitem">udev</code> rules infrastructure make it
   possible to provide stable names for all disk devices—regardless of
   their order of recognition or the connection used for the device. Every
   appropriate block device the kernel creates is examined by tools with
   special knowledge about certain buses, drive types or file systems. Along
   with the dynamic kernel-provided device node name,
   <code class="systemitem">udev</code> maintains classes of
   persistent symbolic links pointing to the device:
  </p><div class="verbatim-wrap"><pre class="screen">/dev/disk
|-- by-id
|   |-- scsi-SATA_HTS726060M9AT00_MRH453M4HWHG7B -&gt; ../../sda
|   |-- scsi-SATA_HTS726060M9AT00_MRH453M4HWHG7B-part1 -&gt; ../../sda1
|   |-- scsi-SATA_HTS726060M9AT00_MRH453M4HWHG7B-part6 -&gt; ../../sda6
|   |-- scsi-SATA_HTS726060M9AT00_MRH453M4HWHG7B-part7 -&gt; ../../sda7
|   |-- usb-Generic_STORAGE_DEVICE_02773 -&gt; ../../sdd
|   `-- usb-Generic_STORAGE_DEVICE_02773-part1 -&gt; ../../sdd1
|-- by-label
|   |-- Photos -&gt; ../../sdd1
|   |-- SUSE10 -&gt; ../../sda7
|   `-- devel -&gt; ../../sda6
|-- by-path
|   |-- pci-0000:00:1f.2-scsi-0:0:0:0 -&gt; ../../sda
|   |-- pci-0000:00:1f.2-scsi-0:0:0:0-part1 -&gt; ../../sda1
|   |-- pci-0000:00:1f.2-scsi-0:0:0:0-part6 -&gt; ../../sda6
|   |-- pci-0000:00:1f.2-scsi-0:0:0:0-part7 -&gt; ../../sda7
|   |-- pci-0000:00:1f.2-scsi-1:0:0:0 -&gt; ../../sr0
|   |-- usb-02773:0:0:2 -&gt; ../../sdd
|   |-- usb-02773:0:0:2-part1 -&gt; ../../sdd1
`-- by-uuid
    |-- 159a47a4-e6e6-40be-a757-a629991479ae -&gt; ../../sda7
    |-- 3e999973-00c9-4917-9442-b7633bd95b9e -&gt; ../../sda6
    `-- 4210-8F8C -&gt; ../../sdd1</pre></div></section><section class="sect1" id="sec-udev-files" data-id-title="Files used by udev"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.8 </span><span class="title-name">Files used by <code class="systemitem">udev</code></span></span> <a title="Permalink" class="permalink" href="#sec-udev-files">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.11.11.2.1"><span class="term"><code class="filename">/sys/*</code>
    </span></dt><dd><p>
      Virtual file system provided by the Linux kernel, exporting all currently
      known devices. This information is used by
      <code class="systemitem">udev</code> to create device nodes in
      <code class="filename">/dev</code>
     </p></dd><dt id="id-1.3.5.11.11.2.2"><span class="term"><code class="filename">/dev/*</code>
    </span></dt><dd><p>
      Dynamically created device nodes and static content created with
      systemd-tmpfiles; for more information, see the
      <code class="systemitem">systemd-tmpfiles(8)</code> man page.
     </p></dd></dl></div><p>
   The following files and directories contain the crucial elements of the
   <code class="systemitem">udev</code> infrastructure:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.11.11.4.1"><span class="term"><code class="filename">/etc/udev/udev.conf</code>
    </span></dt><dd><p>
      Main <code class="systemitem">udev</code> configuration file.
     </p></dd><dt id="id-1.3.5.11.11.4.2"><span class="term"><code class="filename">/etc/udev/rules.d/*</code>
    </span></dt><dd><p>
      System-specific <code class="systemitem">udev</code> event
      matching rules. You can add custom rules here to modify or override
      the default rules from <code class="filename">/usr/lib/udev/rules.d/*</code>.
     </p><p>
      Files are parsed in alphanumeric order. Rules from files with a higher
      priority modify or override rules with lower priority. The lower the
      number, the higher the priority.
     </p></dd><dt id="id-1.3.5.11.11.4.3"><span class="term"><code class="filename">/usr/lib/udev/rules.d/*</code>
    </span></dt><dd><p>
      Default <code class="systemitem">udev</code> event matching
      rules. The files in this directory are owned by packages and will be
      overwritten by updates. Do not add, remove or edit files here, use
      <code class="filename">/etc/udev/rules.d</code> instead.
     </p></dd><dt id="id-1.3.5.11.11.4.4"><span class="term"><code class="filename">/usr/lib/udev/*</code>
    </span></dt><dd><p>
      Helper programs called from <code class="systemitem">udev</code>
      rules.
     </p></dd><dt id="id-1.3.5.11.11.4.5"><span class="term"><code class="filename">/usr/lib/tmpfiles.d/</code> and
     <code class="filename">/etc/tmpfiles.d/</code>
    </span></dt><dd><p>
      Responsible for static <code class="filename">/dev</code> content.
     </p></dd></dl></div></section><section class="sect1" id="sec-udev-moreinfo" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">29.9 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-udev-moreinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/udev.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For more information about the <code class="systemitem">udev</code>
   infrastructure, refer to the following man pages:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.11.12.3.1"><span class="term"><code class="systemitem">udev</code>
    </span></dt><dd><p>
      General information about <code class="systemitem">udev</code>,
      keys, rules and other important configuration issues.
     </p></dd><dt id="id-1.3.5.11.12.3.2"><span class="term"><code class="command">udevadm</code>
    </span></dt><dd><p>
      <code class="command">udevadm</code> can be used to control the runtime behavior of
      <code class="systemitem">udev</code>, request kernel events,
      manage the event queue and provide simple debugging mechanisms.
     </p></dd><dt id="id-1.3.5.11.12.3.3"><span class="term"><code class="systemitem">udevd</code>
    </span></dt><dd><p>
      Information about the <code class="systemitem">udev</code> event
      managing daemon.
     </p></dd></dl></div></section></section><section class="chapter" id="cha-suse" data-id-title="Special system features"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">30 </span><span class="title-name">Special system features</span></span> <a title="Permalink" class="permalink" href="#cha-suse">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_linux.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    This chapter starts with information about specific software packages, the
    virtual consoles and the keyboard layout. We talk about software components
    like <code class="systemitem">bash</code>,
    <code class="systemitem">cron</code> and
    <code class="systemitem">logrotate</code>, because they were
    changed or enhanced during the last release cycles. Even if they are small
    or considered of minor importance, users should change their default
    behavior, because these components are often closely coupled with the
    system. The chapter concludes with a section about language and
    country-specific settings (I18N and L10N).
   </p></div></div></div></div><section class="sect1" id="sec-suse-packages" data-id-title="Information about special software packages"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">30.1 </span><span class="title-name">Information about special software packages</span></span> <a title="Permalink" class="permalink" href="#sec-suse-packages">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The following chapter provides basic information about the following tools: <code class="systemitem">bash</code>, <code class="systemitem">cron</code>, <code class="systemitem">logrotate</code>, <code class="systemitem">locate</code>, <code class="systemitem">ulimit</code> and <code class="systemitem">free</code>.

 </p><section class="sect2" id="sec-suse-packages-bash" data-id-title="The bash package and /etc/profile"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.1.1 </span><span class="title-name">The <code class="systemitem">bash</code> package and <code class="filename">/etc/profile</code></span></span> <a title="Permalink" class="permalink" href="#sec-suse-packages-bash">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Bash is the default system shell. When used as a login shell, it reads
   several initialization files. Bash processes them in the order they appear
   in this list:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
     <code class="filename">/etc/profile</code>
    </p></li><li class="listitem"><p>
     <code class="filename">~/.profile</code>
    </p></li><li class="listitem"><p>
     <code class="filename">/etc/bash.bashrc</code>
    </p></li><li class="listitem"><p>
     <code class="filename">~/.bashrc</code>
    </p></li></ol></div><p>
   Make custom settings in <code class="filename">~/.profile</code> or
   <code class="filename">~/.bashrc</code>. To ensure the correct processing of these
   files, it is necessary to copy the basic settings from
   <code class="filename">/etc/skel/.profile</code> or
   <code class="filename">/etc/skel/.bashrc</code> into the home directory of the user.
   It is recommended to copy the settings from <code class="filename">/etc/skel</code>
   after an update. Execute the following shell commands to prevent the loss of
   personal adjustments:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>mv ~/.bashrc ~/.bashrc.old
<code class="prompt user">&gt; </code>cp /etc/skel/.bashrc ~/.bashrc
<code class="prompt user">&gt; </code>mv ~/.profile ~/.profile.old
<code class="prompt user">&gt; </code>cp /etc/skel/.profile ~/.profile</pre></div><p>
   Then copy personal adjustments back from the <code class="literal">*.old</code> files.
  </p></section><section class="sect2" id="sec-suse-packages-cron" data-id-title="The cron package"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.1.2 </span><span class="title-name">The <span class="phrase">cron</span> package</span></span> <a title="Permalink" class="permalink" href="#sec-suse-packages-cron">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Use <code class="systemitem">cron</code> to automatically run
   commands in the background at predefined times. <code class="systemitem">cron</code> uses specially formatted time tables, and
   the tool comes with several default ones. Users can also specify custom
   tables, if needed.
  </p><p>
   The cron tables are located in <code class="filename">/var/spool/cron/tabs</code>.
   <code class="filename">/etc/crontab</code> serves as a systemwide cron table. Enter
   the user name to run the command directly after the time table and before
   the command. In <a class="xref" href="#ex-suse-packages-cron" title="Entry in /etc/crontab">Example 30.1, “Entry in /etc/crontab”</a>,
   <code class="systemitem">root</code> is entered. Package-specific
   tables, located in <code class="filename">/etc/cron.d</code>, have the same format.
   See the <code class="command">cron</code> man page (<code class="command">man cron</code>).
  </p><div class="example" id="ex-suse-packages-cron" data-id-title="Entry in /etc/crontab"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 30.1: </span><span class="title-name">Entry in /etc/crontab </span></span><a title="Permalink" class="permalink" href="#ex-suse-packages-cron">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">1-59/5 * * * *   root   test -x /usr/sbin/atrun &amp;&amp; /usr/sbin/atrun</pre></div></div></div><p>
   You cannot edit <code class="filename">/etc/crontab</code> by calling the command
   <code class="command">crontab -e</code>. This file must be loaded directly into an
   editor, then modified and saved.
  </p><p>
   Several packages install shell scripts to the directories
   <code class="filename">/etc/cron.hourly</code>, <code class="filename">/etc/cron.daily</code>,
   <code class="filename">/etc/cron.weekly</code> and
   <code class="filename">/etc/cron.monthly</code>, whose execution is controlled by
   <code class="filename">/usr/lib/cron/run-crons</code>.
   <code class="filename">/usr/lib/cron/run-crons</code> is run every 15 minutes from
   the main table (<code class="filename">/etc/crontab</code>). This guarantees that
   processes that may have been neglected can be run at the proper time.
  </p><p>
   To run the <code class="filename">hourly</code>, <code class="filename">daily</code> or other
   periodic maintenance scripts at custom times, remove the time stamp files
   regularly using <code class="filename">/etc/crontab</code> entries (see
   <a class="xref" href="#ex-suse-packages-cron-time" title="/etc/crontab: remove time stamp files">Example 30.2, “/etc/crontab: remove time stamp files”</a>, which removes the
   <code class="filename">hourly</code> one before every full hour, the
   <code class="filename">daily</code> one once a day at 2:14 a.m., etc.).
  </p><div class="example" id="ex-suse-packages-cron-time" data-id-title="/etc/crontab: remove time stamp files"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 30.2: </span><span class="title-name">/etc/crontab: remove time stamp files </span></span><a title="Permalink" class="permalink" href="#ex-suse-packages-cron-time">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">59 *  * * *     root  rm -f /var/spool/cron/lastrun/cron.hourly
14 2  * * *     root  rm -f /var/spool/cron/lastrun/cron.daily
29 2  * * 6     root  rm -f /var/spool/cron/lastrun/cron.weekly
44 2  1 * *     root  rm -f /var/spool/cron/lastrun/cron.monthly</pre></div></div></div><p>
   Or you can set <code class="literal">DAILY_TIME</code> in
   <code class="filename">/etc/sysconfig/cron</code> to the time at which
   <code class="filename">cron.daily</code> should start. The setting of
   <code class="literal">MAX_NOT_RUN</code> ensures that the daily tasks get triggered to
   run, even if the user did not turn on the computer at the specified
   <code class="literal">DAILY_TIME</code> for a longer time. The maximum value of
   <code class="literal">MAX_NOT_RUN</code> is 14 days.
  </p></section><section class="sect2" id="sec-suse-packages-cronstatus" data-id-title="Stopping cron status messages"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.1.3 </span><span class="title-name">Stopping cron status messages</span></span> <a title="Permalink" class="permalink" href="#sec-suse-packages-cronstatus">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To avoid the mail flood caused by cron status messages, the default value of
   <code class="literal">SEND_MAIL_ON_NO_ERROR</code> in
   <code class="filename">/etc/sysconfig/cron</code> is set to "<code class="literal">no</code>"
   for new installations. Even with this setting to "<code class="literal">no</code>",
   cron data output will still be sent to the <code class="literal">MAILTO</code>
   address, as documented in the cron man page.
  </p><p>
   In the update case it is recommended to set these values according to your
   needs.
  </p></section><section class="sect2" id="sec-suse-log" data-id-title="Log files: package logrotate"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.1.4 </span><span class="title-name">Log files: package logrotate</span></span> <a title="Permalink" class="permalink" href="#sec-suse-log">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_logfiles.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  There are several system services (<span class="emphasis"><em>daemons</em></span>) that, along
  with the kernel itself, regularly record the system status and specific
  events onto log files. This way, the administrator can regularly check the
  status of the system at a certain point in time, recognize errors or faulty
  functions and troubleshoot them with pinpoint precision. These log files are
  normally stored in <code class="filename">/var/log</code> as specified by FHS and grow
  on a daily basis. The <code class="systemitem">logrotate</code> package helps
  control the growth of these files. For more details refer to
  <span class="intraxref">Book “System Analysis and Tuning Guide”, Chapter 3 “System log files”, Section 3.3 “Managing log files with <code class="command">logrotate</code>”</span>.
 </p></section><section class="sect2" id="sec-suse-locate" data-id-title="The locate command"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.1.5 </span><span class="title-name">The <code class="command">locate</code> command</span></span> <a title="Permalink" class="permalink" href="#sec-suse-locate">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <code class="command">locate</code>, a command for quickly finding files, is not
   included in the standard scope of installed software. If desired, install
   the package <code class="systemitem">mlocate</code>, the successor of the package
   <code class="systemitem">findutils-locate</code>. The
   <code class="systemitem">updatedb</code> process is started
   automatically every night or about 15 minutes after booting the system.
  </p></section><section class="sect2" id="sec-suse-ulimit" data-id-title="The ulimit command"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.1.6 </span><span class="title-name">The <code class="command">ulimit</code> command</span></span> <a title="Permalink" class="permalink" href="#sec-suse-ulimit">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   With the <code class="command">ulimit</code> (<span class="emphasis"><em>user limits</em></span>)
   command, it is possible to set limits for the use of system resources and to
   have these displayed. <code class="command">ulimit</code> is especially useful for
   limiting available memory for applications. With this, an application can be
   prevented from co-opting too much of the system resources and slowing or
   even hanging up the operating system.
  </p><p>
   <code class="command">ulimit</code> can be used with various options. To limit memory
   usage, use the options listed in <a class="xref" href="#tab-suse-packages-ulimit" title="ulimit: Setting resources for the user">Table 30.1, “<code class="command">ulimit</code>: Setting resources for the user”</a>.
  </p><div class="table" id="tab-suse-packages-ulimit" data-id-title="ulimit: Setting resources for the user"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 30.1: </span><span class="title-name"><code class="command">ulimit</code>: Setting resources for the user </span></span><a title="Permalink" class="permalink" href="#tab-suse-packages-ulimit">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">-m</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        The maximum resident set size
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">-v</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        The maximum amount of virtual memory available to the shell
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">-s</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        The maximum size of the stack
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        <code class="option">-c</code>
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        The maximum size of core files created
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        <code class="option">-a</code>
       </p>
      </td><td>
       <p>
        All current limits are reported
       </p>
      </td></tr></tbody></table></div></div><p>
   Systemwide default entries are set in <code class="filename">/etc/profile</code>.
   Editing this file directly is not recommended, because changes will be
   overwritten during system upgrades. To customize systemwide profile
   settings, use <code class="filename">/etc/profile.local</code>. Per-user settings
   should be made in
   <code class="filename">~<em class="replaceable">USER</em>/.profile</code>.
  </p><div class="example" id="ex-u-ulimit-bashrc" data-id-title="ulimit: Settings in ~/.bashrc"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 30.3: </span><span class="title-name"><code class="command">ulimit</code>: Settings in <code class="filename">~/.bashrc</code> </span></span><a title="Permalink" class="permalink" href="#ex-u-ulimit-bashrc">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># Limits maximum resident set size (physical memory):
ulimit -m 98304

# Limits of virtual memory:
ulimit -v 98304</pre></div></div></div><p>
   Memory allocations must be specified in KB. For more detailed information,
   see <code class="command">man bash</code>.
  </p><div id="id-1.3.5.12.3.9.8" data-id-title="ulimit support" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: <code class="command">ulimit</code> support</div><p>
    Not all shells support <code class="command">ulimit</code> directives. PAM (for
    example, <code class="literal">pam_limits</code>) offers comprehensive adjustment
    possibilities as an alternative to <code class="command">ulimit</code>.
   </p></div></section><section class="sect2" id="sec-suse-free" data-id-title="The free command"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.1.7 </span><span class="title-name">The <code class="command">free</code> command</span></span> <a title="Permalink" class="permalink" href="#sec-suse-free">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <code class="command">free</code> command displays the total amount of free and
   used physical memory and swap space in the system and the buffers and
   cache consumed by the kernel. The concept of <span class="emphasis"><em>available
   RAM</em></span> dates back to before the days of unified memory management.
   The slogan <span class="emphasis"><em>free memory is bad memory</em></span> applies well to
   Linux. As a result, Linux has always made the effort to balance out caches
   without allowing free or unused memory.
  </p><p>
   The kernel does not have direct knowledge of any applications or user data.
   Instead, it manages applications and user data in a <span class="emphasis"><em>page
   cache</em></span>. If memory runs short, parts of it are written to the swap
   partition or to files, from which they can initially be read using the
   <code class="command">mmap</code> command (see <code class="command">man mmap</code>).
  </p><p>
   The kernel also contains other caches, such as the <span class="emphasis"><em>slab
   cache</em></span>, where the caches used for network access are stored. This
   may explain the differences between the counters in
   <code class="filename">/proc/meminfo</code>. Most, but not all, of them can be
   accessed via <code class="filename">/proc/slabinfo</code>.
  </p><p>
   However, if your goal is to find out how much RAM is currently being used,
   find this information in <code class="filename">/proc/meminfo</code>.
  </p></section><section class="sect2" id="sec-suse-manpages" data-id-title="Man pages and info pages"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.1.8 </span><span class="title-name">Man pages and info pages</span></span> <a title="Permalink" class="permalink" href="#sec-suse-manpages">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For some GNU applications (such as tar), the man pages are no longer
   maintained. For these commands, use the <code class="option">--help</code> option to
   get a quick overview of the info pages, which provide more in-depth
   instructions. Info

   is GNU's hypertext system. Read an introduction to this system by entering
   <code class="command">info</code> <code class="option">info</code>. Info pages can be viewed with
   Emacs by entering <code class="command">emacs</code> <code class="option">-f info</code> or
   directly in a console with <code class="command">info</code>. You can also use tkinfo,
   xinfo or the help system to view info pages.
  </p></section><section class="sect2" id="sec-suse-packages-man" data-id-title="Selecting man pages using the man command"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.1.9 </span><span class="title-name">Selecting man pages using the <code class="command">man</code> command</span></span> <a title="Permalink" class="permalink" href="#sec-suse-packages-man">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_sw_packages.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To read a man page enter <code class="command">man</code>
   <em class="replaceable">MAN_PAGE</em>. If a man page with the same name exists
   in different sections, they will all be listed with the corresponding
   section numbers. Select the one to display. If you do not enter a section
   number within a few seconds, the first man page will be displayed.
  </p><p>
   To change this to the default system behavior, set
   <code class="literal">MAN_POSIXLY_CORRECT=1</code> in a shell initialization file such
   as <code class="filename">~/.bashrc</code>.
  </p></section><section class="sect2" id="sec-suse-emacs" data-id-title="Settings for GNU Emacs"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.1.10 </span><span class="title-name">Settings for GNU Emacs</span></span> <a title="Permalink" class="permalink" href="#sec-suse-emacs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_emacs.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  GNU Emacs is a complex work environment. The following sections cover the
  configuration files processed when GNU Emacs is started. More information is
  available at <a class="link" href="https://www.gnu.org/software/emacs/" target="_blank">https://www.gnu.org/software/emacs/</a>.
 </p><p>
  On start-up, Emacs reads several files containing the settings of the user,
  system administrator and distributor for customization or preconfiguration.
  The initialization file <code class="filename">~/.emacs</code> is installed to the
  home directories of the individual users from <code class="filename">/etc/skel</code>.
  <code class="filename">.emacs</code>, in turn, reads the file
  <code class="filename">/etc/skel/.gnu-emacs</code>. To customize the program, copy
  <code class="filename">.gnu-emacs</code> to the home directory (with <code class="command">cp
  /etc/skel/.gnu-emacs ~/.gnu-emacs</code>) and make the desired settings
  there.
 </p><p>
  <code class="filename">.gnu-emacs</code> defines the file
  <code class="filename">~/.gnu-emacs-custom</code> as <code class="literal">custom-file</code>.
  If users make settings with the <code class="literal">customize</code> options in
  Emacs, the settings are saved to <code class="filename">~/.gnu-emacs-custom</code>.
 </p><p>
  With <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, the <code class="systemitem">emacs</code>
  package installs the file <code class="filename">site-start.el</code> in the directory
  <code class="filename">/usr/share/emacs/site-lisp</code>. The file
  <code class="filename">site-start.el</code> is loaded before the initialization file
  <code class="filename">~/.emacs</code>. Among other things,
  <code class="filename">site-start.el</code> ensures that special configuration files
  distributed with Emacs add-on packages, such as
  <code class="systemitem">psgml</code>, are loaded automatically.
  Configuration files of this type are located in
  <code class="filename">/usr/share/emacs/site-lisp</code>, too, and always begin with
  <code class="filename">suse-start-</code>. The local system administrator can specify
  systemwide settings in <code class="filename">default.el</code>.
 </p><p>
  More information about these files is available in the Emacs info file under
  <span class="emphasis"><em>Init File</em></span>: <code class="literal">info:/emacs/InitFile</code>.
  Information about how to disable the loading of these files (if necessary) is
  also provided at this location.
 </p><p>
  The components of Emacs are divided into several packages:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    The base package <code class="systemitem">emacs</code>.
   </p></li><li class="listitem"><p>
    <code class="systemitem">emacs-x11</code> (usually installed):
    the program <span class="emphasis"><em>with</em></span> X11 support.
   </p></li><li class="listitem"><p>
    <code class="systemitem">emacs-nox</code>: the program
    <span class="emphasis"><em>without</em></span> X11 support.
   </p></li><li class="listitem"><p>
    <code class="systemitem">emacs-info</code>: online documentation
    in info format.
   </p></li><li class="listitem"><p>
    <code class="systemitem">emacs-el</code>: the uncompiled library
    files in Emacs Lisp. These are not required at runtime.
   </p></li><li class="listitem"><p>
    Numerous add-on packages can be installed if needed:
    <code class="systemitem">emacs-auctex</code> (LaTeX),
    <code class="systemitem">psgml</code> (SGML and XML),
    <code class="systemitem">gnuserv</code> (client and server
    operation) and others.
   </p></li></ul></div></section></section><section class="sect1" id="sec-suse-virt-konsolen" data-id-title="Virtual consoles"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">30.2 </span><span class="title-name">Virtual consoles</span></span> <a title="Permalink" class="permalink" href="#sec-suse-virt-konsolen">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_vc.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Linux is a multiuser and multitasking system. The advantages of these
  features can be appreciated even on a stand-alone PC system. In text mode,
  there are six virtual consoles available. Switch between them using
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> through
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F6</span>. The
  seventh console is reserved for X and the tenth console shows kernel
  messages.

 </p><p>
  To switch to a console from X without shutting it down, use <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> to <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F6</span>. To return to X,
  press <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F7</span>.
 </p></section><section class="sect1" id="sec-suse-kb" data-id-title="Keyboard mapping"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">30.3 </span><span class="title-name">Keyboard mapping</span></span> <a title="Permalink" class="permalink" href="#sec-suse-kb">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_kb.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  To standardize the keyboard mapping of programs, changes were made to the
  following files:
 </p><div class="verbatim-wrap"><pre class="screen">/etc/inputrc
/etc/X11/Xmodmap
/etc/skel/.emacs
/etc/skel/.gnu-emacs
/etc/skel/.vimrc
/etc/csh.cshrc
/etc/termcap
/usr/share/terminfo/x/xterm
/usr/share/X11/app-defaults/XTerm
/usr/share/emacs/<em class="replaceable">VERSION</em>/site-lisp/term/*.el</pre></div><p>
  These changes only affect applications that use <code class="command">terminfo</code>
  entries or whose configuration files are changed directly
  (<code class="command">vi</code>, <code class="command">emacs</code>, etc.). Applications not
  shipped with the system should be adapted to these defaults.
 </p><p>
  Under X, the compose key (multikey) can be enabled as explained in
  <code class="filename">/etc/X11/Xmodmap</code>.
 </p><p>
  Further settings are possible using the X Keyboard Extension (XKB).
 </p><div id="id-1.3.5.12.5.8" data-id-title="More information" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: More information</div><p>
   Information about XKB is available in the documents listed in
   <code class="filename">/usr/share/doc/packages/xkeyboard-config</code> (part of the
   <code class="systemitem">xkeyboard-config</code> package).
  </p></div></section><section class="sect1" id="sec-suse-l10n" data-id-title="Language and country-specific settings"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">30.4 </span><span class="title-name">Language and country-specific settings</span></span> <a title="Permalink" class="permalink" href="#sec-suse-l10n">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_l10n.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The system is, to a very large extent, internationalized and can be modified
  for local needs. Internationalization (<span class="emphasis"><em>I18N</em></span>) allows
  specific localization (<span class="emphasis"><em>L10N</em></span>). The abbreviations I18N and
  L10N are derived from the first and last letters of the words and, in
  between, the number of letters omitted.
 </p><p>
  Settings are made with <code class="systemitem">LC_</code> variables defined in the
  file <code class="filename">/etc/sysconfig/language</code>. This refers not only to
  <span class="emphasis"><em>native language support</em></span>, but also to the categories
  <span class="emphasis"><em>Messages</em></span> (Language), <span class="emphasis"><em>Character Set</em></span>,
  <span class="emphasis"><em>Sort Order</em></span>, <span class="emphasis"><em>Time and Date</em></span>,
  <span class="emphasis"><em>Numbers</em></span> and <span class="emphasis"><em>Money</em></span>. Each of these
  categories can be defined directly with its own variable or indirectly with a
  master variable in the file <code class="filename">language</code> (see the
  <code class="command">locale</code> man page).
 </p><div class="variablelist" id="vl-suse-l10n-variables" data-id-title="List of variables"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">List of variables </span></span><a title="Permalink" class="permalink" href="#vl-suse-l10n-variables">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_l10n.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.5.12.6.5.2"><span class="term"><code class="systemitem">RC_LC_MESSAGES</code>,
    <code class="systemitem">RC_LC_CTYPE</code>,
    <code class="systemitem">RC_LC_COLLATE</code>,
    <code class="systemitem">RC_LC_TIME</code>,
    <code class="systemitem">RC_LC_NUMERIC</code>,
    <code class="systemitem">RC_LC_MONETARY</code>
   </span></dt><dd><p>
     These variables are passed to the shell without the
     <code class="systemitem">RC_</code> prefix and represent the listed categories.
     The shell profiles concerned are listed below. The current setting can be
     shown with the command <code class="command">locale</code>.
    </p></dd><dt id="id-1.3.5.12.6.5.3"><span class="term"><code class="systemitem">RC_LC_ALL</code>
   </span></dt><dd><p>
     This variable, if set, overwrites the values of the variables already
     mentioned.
    </p></dd><dt id="id-1.3.5.12.6.5.4"><span class="term"><code class="systemitem">RC_LANG</code>
   </span></dt><dd><p>
     If none of the previous variables are set, this is the fallback. By
     default, only <code class="systemitem">RC_LANG</code> is set. This makes it
     easier for users to enter their own values.
    </p></dd><dt id="id-1.3.5.12.6.5.5"><span class="term"><code class="systemitem">ROOT_USES_LANG</code>
   </span></dt><dd><p>
     This variable can be set to <code class="literal">yes</code> or
     <code class="literal">ctype</code> (default). If set to
     <code class="literal">yes</code>, <code class="systemitem">root</code>
      uses language and country-specific settings, otherwise the system administrator
      always works in a POSIX environment.
    </p></dd></dl></div><p>
  The variables can be set with the YaST sysconfig editor. The value of such
  a variable contains the language code, country code, encoding and modifier.
  The individual components are joined by special characters:
 </p><div class="verbatim-wrap"><pre class="screen">LANG=&lt;language&gt;[[_&lt;COUNTRY&gt;].&lt;Encoding&gt;[@&lt;Modifier&gt;]]</pre></div><section class="sect2" id="sec-suse-l10n-settings" data-id-title="System-wide locale settings"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.4.1 </span><span class="title-name">System-wide locale settings</span></span> <a title="Permalink" class="permalink" href="#sec-suse-l10n-settings">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_l10n.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <code class="systemitem">systemd</code> reads <code class="filename">/etc/locale.conf</code>
   at early boot. The locale settings configured in this file are
   inherited by every service or user, unless there are individual
   settings.
  </p><div id="id-1.3.5.12.6.8.3" data-id-title="Behavior of older configuration files under SUSE Linux Enterprise Server SUSE Linux Enterprise Server" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Behavior of older configuration files under <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></div><p>
    Earlier versions of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> read locale settings from
    <code class="filename">/etc/sysconfig/language</code>,
    <code class="filename">/etc/sysconfig/keyboard</code>, and
    <code class="filename">/etc/sysconfig/console</code>.
    Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
    <span class="phrase">15 GA</span>,
    these files are considered obsolete.
    <code class="systemitem">systemd</code> does not read settings from these files anymore.
    Instead, <code class="systemitem">systemd</code> reads <code class="filename">/etc/locale.conf</code>.
   </p><p>
    However, variables defined in <code class="filename">/etc/sysconfig/language</code>
    will still be used: They override the system-wide locale and can be used to
    define different locale settings for user shells (see <a class="xref" href="#sec-suse-l10n-examples" title="30.4.2. Some examples">Section 30.4.2, “Some examples”</a>).
   </p></div><p>To set the system-wide locale, you can either:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Write your settings in <code class="filename">/etc/locale.conf</code>.
     Each line is a environment-like variable assignment (see
     <code class="command">man 5 locale.conf</code> for a list of variables):
    </p><div class="verbatim-wrap"><pre class="screen">LANG=de_DE.UTF-8</pre></div><p>
     To fine-tune the settings, you can add additional variables,
     one variable per line.
    </p></li><li class="listitem"><p>
     Use the command <code class="command">localectl</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">localectl</code> set-locale LANG=de_DE.UTF-8</pre></div><p>Same here, you can also specify additional variables after the
    <code class="command">localectl set-locale</code> command.</p></li></ul></div><p>
   To keep backward compatibility with old systems during the
   update of the systemd package, all variables mentioned will be migrated
   from sysconfig to their final destinations if they are not already defined
   there.
  </p></section><section class="sect2" id="sec-suse-l10n-examples" data-id-title="Some examples"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.4.2 </span><span class="title-name">Some examples</span></span> <a title="Permalink" class="permalink" href="#sec-suse-l10n-examples">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_l10n.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You should always set the language and country codes together. Language
   settings follow the standard ISO 639 available at
   <a class="link" href="https://www.evertype.com/standards/iso639/iso639-en.html" target="_blank">https://www.evertype.com/standards/iso639/iso639-en.html</a>
   and <a class="link" href="https://www.loc.gov/standards/iso639-2/" target="_blank">https://www.loc.gov/standards/iso639-2/</a>. Country
   codes are listed in ISO 3166, see
   <a class="link" href="https://en.wikipedia.org/wiki/ISO_3166" target="_blank">https://en.wikipedia.org/wiki/ISO_3166</a>.
  </p><p>
   It only makes sense to set values for which usable description files can be
   found in <code class="filename">/usr/lib/locale</code>. Additional description files
   can be created from the files in <code class="filename">/usr/share/i18n</code> using
   the command <code class="command">localedef</code>. The description files are part of
   the <code class="systemitem">glibc-i18ndata</code> package. A description file for
   <code class="literal">en_US.UTF-8</code> (for English and United States) can be
   created with:
  </p><div class="verbatim-wrap"><pre class="screen">localedef -i en_US -f UTF-8 en_US.UTF-8</pre></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.12.6.9.7.1"><span class="term">
<code class="systemitem">LANG=en_US.UTF-8</code>
    </span></dt><dd><p>
      This is the default setting if American English is selected during
      installation. If you selected another language, that language is enabled
      but still with UTF-8 as the character encoding.
     </p></dd><dt id="id-1.3.5.12.6.9.7.2"><span class="term">
<code class="systemitem">LANG=en_US.ISO-8859-1</code>
    </span></dt><dd><p>
      This sets the language to English, country to United States and the
      character set to <code class="literal">ISO-8859-1</code>. This character set does
      not support the Euro sign, but it can be useful sometimes for programs
      that have not been updated to support <code class="literal">UTF-8</code>. The
      string defining the charset (<code class="literal">ISO-8859-1</code> in this case)
      is then evaluated by programs like Emacs.
     </p></dd><dt id="id-1.3.5.12.6.9.7.3"><span class="term"><code class="systemitem">LANG=en_IE@euro</code>
    </span></dt><dd><p>
      The above example explicitly includes the Euro sign in a language
      setting. This setting is obsolete now, as UTF-8 also covers the Euro
      symbol. It is only useful if an application supports ISO-8859-15 and not
      UTF-8.
     </p></dd></dl></div><p>
   Changes to <code class="filename">/etc/sysconfig/language</code> are activated by the
   following process chain:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     For the Bash: <code class="filename">/etc/profile</code> reads
     <code class="filename">/etc/profile.d/lang.sh</code> which, in turn, analyzes
     <code class="filename">/etc/sysconfig/language</code>.
    </p></li><li class="listitem"><p>
     For tcsh: At login, <code class="filename">/etc/csh.login</code> reads
     <code class="filename">/etc/profile.d/lang.csh</code> which, in turn, analyzes
     <code class="filename">/etc/sysconfig/language</code>.
    </p></li></ul></div><p>
   This ensures that any changes to
   <code class="filename">/etc/sysconfig/language</code> are available at the next login
   to the respective shell, without having to manually activate
   them.
  </p><p>
   Users can override the system defaults by editing their
   <code class="filename">~/.bashrc</code> accordingly. For example, if you do not want
   to use the system-wide <code class="literal">en_US</code> for program messages,
   include <code class="systemitem">LC_MESSAGES=es_ES</code> so that messages are
   displayed in Spanish instead.
  </p></section><section class="sect2" id="sec-suse-l10n-dot-i18n" data-id-title="Locale settings in ~/.i18n"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.4.3 </span><span class="title-name">Locale settings in <code class="filename">~/.i18n</code></span></span> <a title="Permalink" class="permalink" href="#sec-suse-l10n-dot-i18n">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_l10n.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If you are not satisfied with locale system defaults, change the settings in
   <code class="filename">~/.i18n</code> according to the Bash scripting syntax. Entries
   in <code class="filename">~/.i18n</code> override system defaults from
   <code class="filename">/etc/sysconfig/language</code>. Use the same variable names
   but without the <code class="literal">RC_</code> namespace prefixes. For example, use
   <code class="literal">LANG</code> instead of <code class="literal">RC_LANG</code>:
  </p><div class="verbatim-wrap"><pre class="screen">LANG=cs_CZ.UTF-8
LC_COLLATE=C</pre></div></section><section class="sect2" id="sec-suse-l10n-fallback" data-id-title="Settings for language support"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.4.4 </span><span class="title-name">Settings for language support</span></span> <a title="Permalink" class="permalink" href="#sec-suse-l10n-fallback">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_l10n.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Files in the category <span class="emphasis"><em>Messages</em></span> are, as a rule, only
   stored in the corresponding language directory (like
   <code class="filename">en</code>) to have a fallback. If you set
   <code class="systemitem">LANG</code> to <code class="literal">en_US</code> and the message
   file in <code class="filename">/usr/share/locale/en_US/LC_MESSAGES</code> does not
   exist, it falls back to
   <code class="filename">/usr/share/locale/en/LC_MESSAGES</code>.
  </p><p>
   A fallback chain can also be defined, for example, for Breton to French or
   for Galician to Spanish to Portuguese:
  </p><p>
   <code class="systemitem">LANGUAGE="br_FR:fr_FR"</code>
  </p><p>
   <code class="systemitem">LANGUAGE="gl_ES:es_ES:pt_PT"</code>
  </p><p>
   If desired, use the Norwegian variants Nynorsk and Bokmål instead (with
   additional fallback to <code class="literal">no</code>):
  </p><p>
   <code class="systemitem">LANG="nn_NO"</code>
  </p><p>
   <code class="systemitem">LANGUAGE="nn_NO:nb_NO:no"</code>
  </p><p>
   or
  </p><p>
   <code class="systemitem">LANG="nb_NO"</code>
  </p><p>
   <code class="systemitem">LANGUAGE="nb_NO:nn_NO:no"</code>
  </p><p>
   In Norwegian, <code class="systemitem">LC_TIME</code> is also treated
   differently.
  </p><p>
   One problem that can arise is a separator used to delimit groups of digits
   not being recognized properly. This occurs if <code class="systemitem">LANG</code>
   is set to only a two-letter language code like <code class="literal">de</code>, but
   the definition file glibc uses is located in
   <code class="filename">/usr/share/lib/de_DE/LC_NUMERIC</code>. Thus
   <code class="systemitem">LC_NUMERIC</code> must be set to <code class="literal">de_DE</code>
   to make the separator definition visible to the system.
  </p></section><section class="sect2" id="sec-suse-l10n-info" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">30.4.5 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-suse-l10n-info">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/suse_l10n.xml" title="Edit source document"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <span class="emphasis"><em>The GNU C Library Reference Manual</em></span>, Chapter
     <span class="quote">“<span class="quote">Locales and Internationalization</span>”</span>. It is included in
     the package <span class="package">glibc-info</span>.
    </p></li><li class="listitem"><p>
     Markus Kuhn, <span class="emphasis"><em>UTF-8 and Unicode FAQ for Unix/Linux</em></span>,
     currently at
     <a class="link" href="https://www.cl.cam.ac.uk/~mgk25/unicode.html" target="_blank">https://www.cl.cam.ac.uk/~mgk25/unicode.html</a>.
    </p></li></ul></div></section></section></section><section class="chapter" id="cha-nm" data-id-title="Using NetworkManager"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">31 </span><span class="title-name">Using NetworkManager</span></span> <a title="Permalink" class="permalink" href="#cha-nm">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  NetworkManager is the ideal solution for laptops and other portable computers. It
  supports state-of-the-art encryption types and standards for network
  connections, including connections to 802.1X protected networks. 802.1X is
  the <span class="quote">“<span class="quote">IEEE Standard for Local and Metropolitan Area
  Networks—Port-Based Network Access Control</span>”</span>. With NetworkManager, you need
  not worry about configuring network interfaces and switching between wired or
  wireless networks when you are on the move. NetworkManager can automatically connect to
  known wireless networks or manage several network connections in
  parallel—the fastest connection is then used as default. Furthermore,
  you can manually switch between available networks and manage your network
  connection using an applet in the system tray.

 </p><p>
  Instead of only one connection being active, multiple connections may be
  active at once. This enables you to unplug your laptop from an Ethernet and
  remain connected via a wireless connection.
 </p><div id="id-1.3.5.13.5" data-id-title="Support coverage" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Support coverage</div><p>
 NetworkManager is only supported by SUSE for desktop workloads with SLED or the
 Workstation extension. All server certifications are done with
 <code class="command">wicked</code> as the network configuration tool, and using NetworkManager may
 invalidate them. NetworkManager is not supported by SUSE for server workloads.
 </p></div><section class="sect1" id="sec-nm-usecase" data-id-title="Use cases for NetworkManager"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.1 </span><span class="title-name">Use cases for NetworkManager</span></span> <a title="Permalink" class="permalink" href="#sec-nm-usecase">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   NetworkManager provides a sophisticated and intuitive user interface, which enables
   users to easily switch their network environment. However, NetworkManager is not a
   suitable solution in the following cases:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Your computer provides network services for other computers in your
     network, for example, it is a DHCP or DNS server.
    </p></li><li class="listitem"><p>
     Your computer is a Xen server or your system is a virtual system inside
     Xen.
    </p></li></ul></div></section><section class="sect1" id="sec-nm-activate" data-id-title="Enabling or disabling NetworkManager"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.2 </span><span class="title-name">Enabling or disabling NetworkManager</span></span> <a title="Permalink" class="permalink" href="#sec-nm-activate">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   On desktop and laptop computers, NetworkManager is enabled by default. You can disable and enable it at any time using the Network Settings module in YaST.
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Run YaST and go to <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span>.
    </p></li><li class="step"><p>
     The <span class="guimenu">Network Settings</span> dialog opens. Go to the
     <span class="guimenu">Global Options</span> tab.
    </p></li><li class="step"><p>
     To configure and manage your network connections with NetworkManager:
    </p><ol type="a" class="substeps"><li class="step"><p>
       In the <span class="guimenu">Network Setup Method</span> field, select
       <span class="guimenu">User Controlled with NetworkManager</span>.
      </p></li><li class="step"><p>
       Click <span class="guimenu">OK</span> and close YaST.
      </p></li><li class="step"><p>
       Configure your network connections with NetworkManager as described in
       <a class="xref" href="#sec-nm-configure" title="31.3. Configuring network connections">Section 31.3, “Configuring network connections”</a>.
      </p></li></ol></li><li class="step"><p>
     To deactivate NetworkManager and control the network with your own configuration:
    </p><ol type="a" class="substeps"><li class="step"><p>
       In the <span class="guimenu">Network Setup Method</span> field, choose
       <span class="guimenu">Controlled by wicked</span>.
      </p></li><li class="step"><p>
       Click <span class="guimenu">OK</span>.
      </p></li><li class="step"><p>
       Set up your network card with YaST using automatic configuration via
       DHCP or a static external IP address.
      </p><p>
       Find a detailed description of the network configuration with YaST in
       <a class="xref" href="#sec-network-yast" title="23.4. Configuring a network connection with YaST">Section 23.4, “Configuring a network connection with YaST”</a>.
      </p></li></ol></li></ol></div></div></section><section class="sect1" id="sec-nm-configure" data-id-title="Configuring network connections"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.3 </span><span class="title-name">Configuring network connections</span></span> <a title="Permalink" class="permalink" href="#sec-nm-configure">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   After enabling NetworkManager in YaST, configure your network connections with
   the NetworkManager front-end available in GNOME. It shows tabs for all types of
   network connections, such as wired, wireless, mobile broadband, DSL and VPN
   connections.
  </p><p>
   To open the network configuration dialog in GNOME, open the settings menu
   via the status menu and click the <span class="guimenu">Network</span> entry.
  </p><div id="id-1.3.5.13.8.4" data-id-title="Availability of options" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Availability of options</div><p>
    Depending on your system setup, you may not be allowed to configure certain
    connections. In a secured environment, certain options may be locked or
    require <code class="systemitem">root</code> permission. Ask your system administrator for details.
   </p></div><div class="figure" id="id-1.3.5.13.8.5"><div class="figure-contents"><div class="mediaobject"><a href="images/nm_gnome_tabs.png"><img src="images/nm_gnome_tabs.png" width="50%" alt="GNOME Network Connections dialog" title="GNOME Network Connections dialog"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 31.1: </span><span class="title-name">GNOME Network Connections dialog </span></span><a title="Permalink" class="permalink" href="#id-1.3.5.13.8.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div><div class="procedure" id="pro-nm-configure-add" data-id-title="Adding and editing connections"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 31.1: </span><span class="title-name">Adding and editing connections </span></span><a title="Permalink" class="permalink" href="#pro-nm-configure-add">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open the Status Menu, click the gear icon to open
     <span class="guimenu">Settings</span> and click <span class="guimenu">Network</span> from the
     left menu.
    </p></li><li class="step"><p>
     To add a Connection:
    </p><ol type="a" class="substeps"><li class="step"><p>
       Click the <span class="guimenu">+</span> icon next to the connection type tab that
       you want to add.
      </p></li><li class="step"><p>
       Depending on the connection type, fill the required fields in the
       corresponding dialog.
      </p></li><li class="step"><p>
       When you are finished click <span class="guimenu">Add</span>.
      </p></li><li class="step"><p>
       After confirming your changes, the newly configured network
       connection appears in the list of available networks in
       the Status Menu.
      </p></li></ol></li><li class="step"><p>
     To edit a connection:
    </p><ol type="a" class="substeps"><li class="step"><p>
       Click the gear icon on the right side of the connection type tab that
       you want to edit.
      </p></li><li class="step"><p>
       Insert your changes and click <span class="guimenu">Apply</span> to save them.
      </p></li><li class="step"><p>
       To make your connection available as a system connection go to the
       <span class="guimenu">Details</span> tab and set the check box <span class="guimenu">Make
       available to other users</span>. For more information about user and
       system connections, see <a class="xref" href="#sec-nm-sec-types" title="31.4.1. User and system connections">Section 31.4.1, “User and system connections”</a>.
      </p></li></ol></li></ol></div></div><section class="sect2" id="sec-nm-gome-applet-wired" data-id-title="Managing wired network connections"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">31.3.1 </span><span class="title-name">Managing wired network connections</span></span> <a title="Permalink" class="permalink" href="#sec-nm-gome-applet-wired">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If your computer is connected to a wired network, use the NetworkManager applet to
    manage the connection.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Open the Status Menu and click <span class="guimenu">Wired</span> to switch it off
      or click the related right arrow to change the connection details.
     </p></li><li class="step"><p>
      To change the settings click <span class="guimenu">Wired Settings</span> and then
      click the gear icon.
     </p></li><li class="step"><p>
      To switch off all network connections, activate the <span class="guimenu">Airplane
      Mode</span> setting.
     </p></li></ol></div></div></section><section class="sect2" id="sec-nm-gnome-applet-wireless" data-id-title="Managing wireless network connections"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">31.3.2 </span><span class="title-name">Managing wireless network connections</span></span> <a title="Permalink" class="permalink" href="#sec-nm-gnome-applet-wireless">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Visible wireless networks are listed in the GNOME NetworkManager applet menu under
    <span class="guimenu">Wireless Networks</span>. The signal strength of each network
    is also shown in the menu. Encrypted wireless networks are marked with a
    shield icon.
   </p><div class="procedure" id="id-1.3.5.13.8.8.3" data-id-title="Connecting to a visible wireless network"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 31.2: </span><span class="title-name">Connecting to a visible wireless network </span></span><a title="Permalink" class="permalink" href="#id-1.3.5.13.8.8.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      To connect to a visible wireless network, open the Status Menu and click
      <span class="guimenu">Wi-Fi</span>.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Turn On</span> to enable it.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Select Network</span>, select your Wi-Fi Network and
      click <span class="guimenu">Connect</span>.
     </p></li><li class="step"><p>
      If the network is encrypted, a configuration dialog opens. It shows the
      type of encryption the network uses and text boxes for entering the login
      credentials.
     </p></li></ol></div></div><div class="procedure" id="id-1.3.5.13.8.8.4" data-id-title="Connecting to an invisible wireless network"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 31.3: </span><span class="title-name">Connecting to an invisible wireless network </span></span><a title="Permalink" class="permalink" href="#id-1.3.5.13.8.8.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      To connect to a network that does not broadcast its service set
      identifier (SSID or ESSID) and therefore cannot be detected
      automatically, open the Status Menu and click <span class="guimenu">Wi-Fi</span>.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Wi-Fi Settings</span> to open the detailed settings
      menu.
     </p></li><li class="step"><p>
      Make sure your Wi-Fi is enabled and click <span class="guimenu">Connect to Hidden
      Network</span>.
     </p></li><li class="step"><p>
      In the dialog that opens, enter the SSID or ESSID in <span class="guimenu">Network
      Name</span> and set encryption parameters if necessary.
     </p></li></ol></div></div><p>
    A wireless network that has been chosen explicitly remains connected as
    long as possible. If a network cable is plugged in during that time, any
    connections that have been set to <span class="guimenu">Stay connected when
    possible</span> will be connected, while the wireless connection remains
    up.
   </p></section><section class="sect2" id="sec-nm-gnome-applet-accesspoint" data-id-title="Configuring your Wi-Fi/Bluetooth card as an access point"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">31.3.3 </span><span class="title-name">Configuring your Wi-Fi/Bluetooth card as an access point</span></span> <a title="Permalink" class="permalink" href="#sec-nm-gnome-applet-accesspoint">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If your Wi-Fi/Bluetooth card supports access point mode, you can use NetworkManager
    for the configuration.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Open the Status Menu and click <span class="guimenu">Wi-Fi</span>.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Wi-Fi Settings</span> to open the detailed settings
      menu.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Use as Hotspot</span> and follow the instructions.
     </p></li><li class="step"><p>
      Use the credentials shown in the resulting dialog to connect to the
      hotspot from a remote machine.
     </p></li></ol></div></div></section><section class="sect2" id="sec-nm-vpn" data-id-title="NetworkManager and VPN"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">31.3.4 </span><span class="title-name">NetworkManager and VPN</span></span> <a title="Permalink" class="permalink" href="#sec-nm-vpn">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    NetworkManager supports several Virtual Private Network (VPN) technologies. For each
    technology, <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> comes with a base package providing the generic
    support for NetworkManager. Besides that, you also need to install the
    respective desktop-specific package for your applet.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.13.8.10.3.1"><span class="term">OpenVPN</span></dt><dd><p>
       To use this VPN technology, install:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         <code class="systemitem">NetworkManager-openvpn</code>
        </p></li><li class="listitem"><p>
         <code class="systemitem">NetworkManager-openvpn-gnome</code>
        </p></li></ul></div></dd><dt id="id-1.3.5.13.8.10.3.2"><span class="term">OpenConnect</span></dt><dd><p>
       To use this VPN technology, install:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         <code class="systemitem">NetworkManager-openconnect</code>
        </p></li><li class="listitem"><p>
         <code class="systemitem">NetworkManager-openconnect-gnome</code>
        </p></li></ul></div></dd><dt id="id-1.3.5.13.8.10.3.3"><span class="term">PPTP (point-to-point tunneling protocol)</span></dt><dd><p>
       To use this VPN technology, install:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         <code class="systemitem">NetworkManager-pptp</code>
        </p></li><li class="listitem"><p>
         <code class="systemitem">NetworkManager-pptp-gnome</code>
        </p></li></ul></div></dd></dl></div><p>
    The following procedure describes how to set up your computer as an OpenVPN
    client using NetworkManager. Setting up other types of VPNs works analogously.
   </p><p>
    Before you begin, make sure that the package
    <code class="systemitem">NetworkManager-openvpn-gnome</code> is
    installed and all dependencies have been resolved.
   </p><div class="procedure" id="id-1.3.5.13.8.10.6" data-id-title="Setting up OpenVPN with NetworkManager"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 31.4: </span><span class="title-name">Setting up OpenVPN with NetworkManager </span></span><a title="Permalink" class="permalink" href="#id-1.3.5.13.8.10.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Open the application <span class="guimenu">Settings</span> by clicking the status
      icons at the right end of the panel and clicking the <span class="guimenu">wrench and
      screwdriver</span> icon. In the window
      <span class="guimenu">All Settings</span>, choose <span class="guimenu">Network</span>.
     </p></li><li class="step"><p>
      Click the <span class="guimenu">+</span> icon.
     </p></li><li class="step"><p>
      Select <span class="guimenu">VPN</span> and then <span class="guimenu">OpenVPN</span>.
     </p></li><li class="step"><p>
      Choose the <span class="guimenu">Authentication</span> type. Depending on the
      setup of your OpenVPN server, choose <span class="guimenu">Certificates
      (TLS)</span> or <span class="guimenu">Password with Certificates (TLS)</span>.
     </p></li><li class="step"><p>
      Insert the necessary values into the respective text boxes. For our
      example configuration, these are:
     </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="field"/><col class="desc"/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          <p>
           <span class="guimenu">Gateway</span>
          </p>
         </td><td style="border-bottom: 1px solid ; ">
          <p>
           The remote endpoint of the VPN server
          </p>
         </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          <p>
           <span class="guimenu">User name</span>
          </p>
         </td><td style="border-bottom: 1px solid ; ">
          <p>
           The user (only available when you have selected <span class="guimenu">Password
           with Certificates (TLS)</span>)
          </p>
         </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          <p>
           <span class="guimenu">Password</span>
          </p>
         </td><td style="border-bottom: 1px solid ; ">
          <p>
           The password for the user (only available when you have selected
           <span class="guimenu">Password with Certificates (TLS)</span>)
          </p>
         </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          <p>
           <span class="guimenu">User Certificate</span>
          </p>
         </td><td style="border-bottom: 1px solid ; ">
          <p>
           <code class="filename">/etc/openvpn/client1.crt</code>
          </p>
         </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
          <p>
           <span class="guimenu">CA Certificate</span>
          </p>
         </td><td style="border-bottom: 1px solid ; ">
          <p>
           <code class="filename">/etc/openvpn/ca.crt</code>
          </p>
         </td></tr><tr><td style="border-right: 1px solid ; ">
          <p>
           <span class="guimenu">Private Key</span>
          </p>
         </td><td>
          <p>
           <code class="filename">/etc/openvpn/client1.key</code>
          </p>
         </td></tr></tbody></table></div></li><li class="step"><p>
      Finish the configuration with <span class="guimenu">Add</span>.
     </p></li><li class="step"><p>
      To enable the connection, in the <span class="guimenu">Network</span> panel of the
      <span class="guimenu">Settings</span> application click the switch button.
      Alternatively, click the status icons at the right end of the panel, click
      the name of your VPN and then <span class="guimenu">Connect</span>.
     </p></li></ol></div></div></section></section><section class="sect1" id="sec-nm-security" data-id-title="NetworkManager and security"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.4 </span><span class="title-name">NetworkManager and security</span></span> <a title="Permalink" class="permalink" href="#sec-nm-security">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   NetworkManager distinguishes two types of wireless connections: trusted and untrusted.
   A trusted connection is any network that you explicitly selected in the
   past. All others are untrusted. Trusted connections are identified by the
   name and MAC address of the access point. Using the MAC address ensures that
   you cannot use a different access point with the name of your trusted
   connection.
  </p><p>
   NetworkManager periodically scans for available wireless networks. If multiple trusted
   networks are found, the most recently used is automatically selected. NetworkManager
   waits for your selection in case if all networks are untrusted.
  </p><p>
   If the encryption setting changes but the name and MAC address remain the
   same, NetworkManager attempts to connect, but first you are asked to confirm the new
   encryption settings and provide any updates, such as a new key.
  </p><p>
   If you switch from using a wireless connection to offline mode,
   NetworkManager blanks the SSID or ESSID. This ensures that the card is
   disconnected.
  </p><section class="sect2" id="sec-nm-sec-types" data-id-title="User and system connections"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">31.4.1 </span><span class="title-name">User and system connections</span></span> <a title="Permalink" class="permalink" href="#sec-nm-sec-types">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    NetworkManager knows two types of connections: <code class="literal">user</code> and
    <code class="literal">system</code> connections.
</p><p>
    User connections require every user to authenticate in NetworkManager, which stores
    the user's credentials in their local GNOME keyring so that they do not
    need to re-enter them every time they connect.
</p><p>
    System connections are available to all users automatically. The first user
    to create the connection enters any necessary credentials, and then all other
    users have access without needing to know the credentials. The difference in
    configuring a user or system connection is a single check box, <span class="guimenu">Make
    available to other users</span>.
    For information on how to configure user or system connections with NetworkManager, refer
    to <a class="xref" href="#sec-nm-configure" title="31.3. Configuring network connections">Section 31.3, “Configuring network connections”</a>.
   </p></section><section class="sect2" id="sec-nm-sec-store" data-id-title="Storing passwords and credentials"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">31.4.2 </span><span class="title-name">Storing passwords and credentials</span></span> <a title="Permalink" class="permalink" href="#sec-nm-sec-store">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you do not want to re-enter your credentials each time you want to
    connect to an encrypted network, you can use the GNOME Keyring Manager to
    store your credentials encrypted on the disk, secured by a master password.
   </p></section><section class="sect2" id="sec-nm-sec-firewall" data-id-title="Firewall zones"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">31.4.3 </span><span class="title-name">Firewall zones</span></span> <a title="Permalink" class="permalink" href="#sec-nm-sec-firewall">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><div class="figure" id="id-1.3.5.13.9.8.2"><div class="figure-contents"><div class="mediaobject"><a href="images/nm_firewalld_zones.png"><img src="images/nm_firewalld_zones.png" width="50%" alt="firewalld zones in NetworkManager" title="firewalld zones in NetworkManager"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 31.2: </span><span class="title-name"><code class="systemitem">firewalld</code> zones in NetworkManager </span></span><a title="Permalink" class="permalink" href="#id-1.3.5.13.9.8.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div><p>
    The firewall zones set general rules about which network
    connections are allowed. To configure the zone of
    <span class="emphasis"><em>firewalld</em></span> for a wired connection, go to the
    <span class="emphasis"><em>Identity</em></span> tab of the connection settings. To
    configure the zone of <span class="emphasis"><em>firewalld</em></span> for a Wi-Fi
    connection, go to the <span class="emphasis"><em>Security</em></span> tab of the
    connection settings.
   </p><p>
    If you are in your home network, use the zone
    <code class="literal">home</code>. For public wireless networks, switch to
    <code class="literal">public</code>. If you are in a secure environment and
    want to allow all connections, use the zone
    <code class="literal">trusted</code>.
   </p><p>
    For details about firewalld, see <span class="intraxref">Book “Security and Hardening Guide”, Chapter 23 “Masquerading and firewalls”, Section 23.4 “<code class="systemitem">firewalld</code>”</span>.
   </p></section></section><section class="sect1" id="sec-nm-faq" data-id-title="Frequently asked questions"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.5 </span><span class="title-name">Frequently asked questions</span></span> <a title="Permalink" class="permalink" href="#sec-nm-faq">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In the following, find several frequently asked questions about configuring
   special network options with NetworkManager.
  </p><div class="qandaset" id="id-1.3.5.13.10.3"><div class="free-id" id="id-1.3.5.13.10.3.1"> </div><dl class="qandaentry"><dt class="question" id="id-1.3.5.13.10.3.1.1"><strong>1.</strong>
      How to tie a connection to a specific device?
     </dt><dd class="answer" id="id-1.3.5.13.10.3.1.2"><p>
      By default, connections in NetworkManager are device type-specific: they apply to
      all physical devices with the same type. If more than one physical device
      per connection type is available (for example, your machine is equipped
      with two Ethernet cards), you can tie a connection to a certain device.

     </p><p>
      To do this in GNOME, first look up the MAC address of your device (use
      the <span class="guimenu">Connection Information</span> available from the applet,
      or use the output of command line tools like <code class="command">nm-tool</code>
      or <code class="command">wicked show all</code>). Then start the dialog for
      configuring network connections and choose the connection you want to
      modify. On the <span class="guimenu">Wired</span> or <span class="guimenu">Wireless</span>
      tab, enter the <span class="guimenu">MAC Address</span> of the device and confirm
      your changes.
     </p></dd></dl><div class="free-id" id="id-1.3.5.13.10.3.2"> </div><dl class="qandaentry"><dt class="question" id="id-1.3.5.13.10.3.2.1"><strong>2.</strong>
      How to specify a certain access point in case multiple access points with
      the same ESSID are detected?
     </dt><dd class="answer" id="id-1.3.5.13.10.3.2.2"><p>
      When multiple access points with different wireless bands (a/b/g/n) are
      available, the access point with the strongest signal is automatically
      chosen by default. To override this, use the <span class="guimenu">BSSID</span>
      field when configuring wireless connections.
     </p><p>
      The Basic Service Set Identifier (BSSID) uniquely identifies each Basic
      Service Set. In an infrastructure Basic Service Set, the BSSID is the MAC
      address of the wireless access point. In an independent (ad-hoc) Basic
      Service Set, the BSSID is a locally administered MAC address generated
      from a 46-bit random number.
     </p><p>
      Start the dialog for configuring network connections as described in
      <a class="xref" href="#sec-nm-configure" title="31.3. Configuring network connections">Section 31.3, “Configuring network connections”</a>. Choose the wireless connection you
      want to modify and click <span class="guimenu">Edit</span>. On the
      <span class="guimenu">Wireless</span> tab, enter the BSSID.
     </p></dd></dl><div class="free-id" id="id-1.3.5.13.10.3.3"> </div><dl class="qandaentry"><dt class="question" id="id-1.3.5.13.10.3.3.1"><strong>3.</strong>
      How to share network connections with other computers?
     </dt><dd class="answer" id="id-1.3.5.13.10.3.3.2"><p>
      The primary device (the device which is connected to the Internet) does
      not need any special configuration. However, you need to configure the
      device that is connected to the local hub or machine as follows:
     </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
        Start the dialog for configuring network connections as described in
        <a class="xref" href="#sec-nm-configure" title="31.3. Configuring network connections">Section 31.3, “Configuring network connections”</a>. Choose the connection you want to
        modify and click <span class="guimenu">Edit</span>. Switch to the <span class="guimenu">IPv4
        Settings</span> tab and from the <span class="guimenu">Method</span> drop-down
        list, activate <span class="guimenu">Shared to other computers</span>. That will
        enable IP traffic forwarding and run a DHCP server on the device.
        Confirm your changes in NetworkManager.
       </p></li><li class="listitem"><p>
        As the DHCP server uses port <code class="literal">67</code>, make sure that it
        is not blocked by the firewall: On the machine sharing the connections,
        start YaST and select <span class="guimenu">Security and
        Users</span> › <span class="guimenu">Firewall</span>. Switch to
        the <span class="guimenu">Allowed Services</span> category. If <span class="guimenu">DHCP
        Server</span> is not already shown as <span class="guimenu">Allowed
        Service</span>, select <span class="guimenu">DHCP Server</span> from
        <span class="guimenu">Services to Allow</span> and click <span class="guimenu">Add</span>.
        Confirm your changes in YaST.
       </p></li></ol></div></dd></dl><div class="free-id" id="id-1.3.5.13.10.3.4"> </div><dl class="qandaentry"><dt class="question" id="id-1.3.5.13.10.3.4.1"><strong>4.</strong>
      How to provide static DNS information with automatic (DHCP, PPP, VPN)
      addresses?
     </dt><dd class="answer" id="id-1.3.5.13.10.3.4.2"><p>
      In case a DHCP server provides invalid DNS information (and/or routes),
      you can override it. Start the dialog for configuring network connections
      as described in <a class="xref" href="#sec-nm-configure" title="31.3. Configuring network connections">Section 31.3, “Configuring network connections”</a>. Choose the connection
      you want to modify and click <span class="guimenu">Edit</span>. Switch to the
      <span class="guimenu">IPv4 Settings</span> tab, and from the
      <span class="guimenu">Method</span> drop-down box, activate <span class="guimenu">Automatic
      (DHCP) addresses only</span>. Enter the DNS information in the
      <span class="guimenu">DNS Servers</span> and <span class="guimenu">Search Domains</span>
      fields. To <span class="guimenu">Ignore automatically obtained routes</span> click
      <span class="guimenu">Routes</span> and activate the respective check box. Confirm
      your changes.
     </p></dd></dl><div class="free-id" id="id-1.3.5.13.10.3.5"> </div><dl class="qandaentry"><dt class="question" id="id-1.3.5.13.10.3.5.1"><strong>5.</strong>
      How to make NetworkManager connect to password protected networks before a user
      logs in?
     </dt><dd class="answer" id="id-1.3.5.13.10.3.5.2"><p>
      Define a <code class="literal">system connection</code> that can be used for such
      purposes. For more information, refer to
      <a class="xref" href="#sec-nm-sec-types" title="31.4.1. User and system connections">Section 31.4.1, “User and system connections”</a>.
     </p></dd></dl></div></section><section class="sect1" id="sec-nm-trouble" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.6 </span><span class="title-name">Troubleshooting</span></span> <a title="Permalink" class="permalink" href="#sec-nm-trouble">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Connection problems can occur. Common problems related to NetworkManager include the
   applet not starting or a missing VPN option. Methods for resolving and
   preventing these problems depend on the tool used.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.13.11.3.1"><span class="term">NetworkManager desktop applet does not start</span></dt><dd><p>
      The applets starts automatically if the network is set up for NetworkManager
      control. If the applet does not start, check if NetworkManager is enabled in YaST
      as described in <a class="xref" href="#sec-nm-activate" title="31.2. Enabling or disabling NetworkManager">Section 31.2, “Enabling or disabling NetworkManager”</a>. Then make sure that
      the NetworkManager-gnome package is also installed.
     </p><p>
      If the desktop applet is installed but is not running,
      start it manually with the command <code class="command">nm-applet</code>.
     </p></dd><dt id="id-1.3.5.13.11.3.2"><span class="term">NetworkManager applet does not include the VPN option</span></dt><dd><p>
      Support for NetworkManager, applets, and VPN for NetworkManager is distributed in separate
      packages. If your NetworkManager applet does not include the VPN option, check if
      the packages with NetworkManager support for your VPN technology are installed. For
      more information, see <a class="xref" href="#sec-nm-vpn" title="31.3.4. NetworkManager and VPN">Section 31.3.4, “NetworkManager and VPN”</a>.
     </p></dd><dt id="id-1.3.5.13.11.3.3"><span class="term">No network connection available</span></dt><dd><p>
      If you have configured your network connection correctly and all other
      components for the network connection (router, etc.) are also up and
      running, it sometimes helps to restart the network interfaces on your
      computer. To do so, log in to a command line as <code class="systemitem">root</code> and run
      <code class="command">systemctl restart wickeds</code>.
     </p></dd></dl></div></section><section class="sect1" id="sec-nm-more" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">31.7 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-nm-more">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/nm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   More information about NetworkManager can be found on the following Web sites and
   directories:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.5.13.12.3.1"><span class="term">NetworkManager project page</span></dt><dd><p>
      <a class="link" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager" target="_blank">https://gitlab.freedesktop.org/NetworkManager/NetworkManager</a>
     </p></dd><dt id="id-1.3.5.13.12.3.2"><span class="term">Package documentation</span></dt><dd><p>
      Also check out the information in the following directories for the
      latest information about NetworkManager and the GNOME applet:
     </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        <code class="filename">/usr/share/doc/packages/NetworkManager/</code>,
       </p></li><li class="listitem"><p>
        <code class="filename">/usr/share/doc/packages/NetworkManager-gnome/</code>.
       </p></li></ul></div></dd></dl></div></section></section></div><div class="part" id="part-hardware" data-id-title="Hardware configuration"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part IV </span><span class="title-name">Hardware configuration </span></span><a title="Permalink" class="permalink" href="#part-hardware">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_administration.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#sec-yast-hw-keym"><span class="title-number">32 </span><span class="title-name">Setting up your system keyboard layout</span></a></span></li><dd class="toc-abstract"><p>
  The YaST <span class="guimenu">System Keyboard Layout</span> module lets you define
  the default keyboard layout for the system (also used for the console). Users
  can modify the keyboard layout in their individual X sessions, using the
  desktop's tools.
 </p></dd><li><span class="chapter"><a href="#sec-yast-hw-sound"><span class="title-number">33 </span><span class="title-name">Setting up sound cards</span></a></span></li><dd class="toc-abstract"><p>
  YaST detects most sound cards automatically and configures them with the
  appropriate values. To change the default settings, or to
  set up a sound card that could not be configured automatically, use the
  YaST sound module. There, you can also set up additional sound cards or
  switch their order.
 </p></dd><li><span class="chapter"><a href="#sec-yast-hw-print"><span class="title-number">34 </span><span class="title-name">Setting up a printer</span></a></span></li><dd class="toc-abstract"><p>
  YaST can be used to configure local and network printers. Further
  information about printing (general information, technical details, and
  troubleshooting) is available in <a class="xref" href="#cha-print" title="Chapter 24. Printer operation">Chapter 24, <em>Printer operation</em></a>.
 </p></dd><li><span class="chapter"><a href="#cha-power-mgmt"><span class="title-number">35 </span><span class="title-name">Power management</span></a></span></li><dd class="toc-abstract"><p>
  The features and hardware described in this chapter do not exist on
  IBM Z, making this chapter irrelevant for these platforms.
 </p></dd><li><span class="chapter"><a href="#cha-nvdimm"><span class="title-number">36 </span><span class="title-name">Persistent memory</span></a></span></li><dd class="toc-abstract"><p>
    This chapter contains additional information about using <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> with
    non-volatile main memory, also known as <span class="emphasis"><em>Persistent Memory</em></span>,
    comprising one or more NVDIMMs.
   </p></dd></ul></div><section class="chapter" id="sec-yast-hw-keym" data-id-title="Setting up your system keyboard layout"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">32 </span><span class="title-name">Setting up your system keyboard layout</span></span> <a title="Permalink" class="permalink" href="#sec-yast-hw-keym">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_keymouse.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  The YaST <span class="guimenu">System Keyboard Layout</span> module lets you define
  the default keyboard layout for the system (also used for the console). Users
  can modify the keyboard layout in their individual X sessions, using the
  desktop's tools.
 </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    Start the YaST <span class="guimenu">System Keyboard Configuration</span> dialog by
    clicking <span class="guimenu">Hardware</span> › <span class="guimenu">System Keyboard
    Layout</span> in YaST. Alternatively, start the module
    from the command line with <code class="command">sudo yast2 keyboard</code>.
   </p></li><li class="step"><p>
    Select the desired <span class="guimenu">Keyboard Layout</span> from the list.
   </p></li><li class="step"><p>
    Try the selected keyboard layout in the <span class="guimenu">Test</span> text box.
   </p></li><li class="step"><p>
    If the result is as expected, confirm your changes and close the dialog.
   </p></li><li class="step"><p>
    The result is stored in the files <code class="filename">/etc/vconsole.conf</code>
    (for text consoles) and
    <code class="filename">/etc/X11/xorg.conf.d/00-keyboard.conf</code> (for X11).
   </p></li><li class="step"><p>
  Advanced keyboard settings can be configured in <span class="guimenu">System</span> › <span class="guimenu">Sysconfig Editor</span> › <span class="guimenu">Hardware</span> › <span class="guimenu">Keyboard</span>.
  Here you can specify the keyboard rate and delay settings, and enable or
  disable NumLock, CapsLock, and ScrollLock. These settings are stored in
  <code class="filename">/etc/sysconfig/keyboard</code>.
   </p></li></ol></div></div></section><section class="chapter" id="sec-yast-hw-sound" data-id-title="Setting up sound cards"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">33 </span><span class="title-name">Setting up sound cards</span></span> <a title="Permalink" class="permalink" href="#sec-yast-hw-sound">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sound.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  YaST detects most sound cards automatically and configures them with the
  appropriate values. To change the default settings, or to
  set up a sound card that could not be configured automatically, use the
  YaST sound module. There, you can also set up additional sound cards or
  switch their order.
 </p><div id="id-1.3.6.3.4" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning</div><p>
    If you do not know all details about the setup of your sound system, do not
    change its settings manually. Instead, let your sound
    subsystem—PipeWire or PulseAudio— configure it for you. Use
    dedicated desktop application to switch audio devices. As a fallback, use
    the <code class="command">pavucontrol</code> graphical application.
  </p></div><p>
  To start the sound module, start YaST and click <span class="guimenu">Hardware</span> › <span class="guimenu">Sound</span>.
  Alternatively, start the <span class="guimenu">Sound Configuration</span> dialog
  directly by running <code class="command">yast2 sound &amp;</code> as user <code class="systemitem">root</code>
  from a command line. If the sound module is not available, install it using
  the <code class="command">sudo zypper install yast2-sound</code> command.
 </p><div class="procedure" id="pro-yast2-sound-add" data-id-title="Configuring sound cards"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 33.1: </span><span class="title-name">Configuring sound cards </span></span><a title="Permalink" class="permalink" href="#pro-yast2-sound-add">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sound.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
   If you have added a new sound card or YaST could not automatically
   configure an existing sound card, follow the steps below. For configuring a
   new sound card, you need to know your sound card vendor and model. If in
   doubt, refer to your sound card documentation for the required information.
   For a reference list of sound cards supported by ALSA with their
   corresponding sound modules, see
   <a class="link" href="https://www.alsa-project.org/main/index.php/Matrix:Main" target="_blank">https://www.alsa-project.org/main/index.php/Matrix:Main</a>.
  </p><p>
   During configuration, you can choose between the following setup options:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.6.3.6.4.1"><span class="term"><span class="guimenu">Quick automatic setup</span>
    </span></dt><dd><p>
      You are not required to go through any of the further configuration
      steps—the sound card is configured automatically. You can set the
      volume or any options you want to change later.
     </p></dd><dt id="id-1.3.6.3.6.4.2"><span class="term"><span class="guimenu">Normal setup</span>
    </span></dt><dd><p>
      Allows you to adjust the output volume and play a test sound during the
      configuration.
     </p></dd><dt id="id-1.3.6.3.6.4.3"><span class="term"><span class="guimenu">Advanced setup with possibility to change options</span>
    </span></dt><dd><p>
      For experts only. Allows you to customize all parameters of the sound
      card.
     </p><div id="id-1.3.6.3.6.4.3.2.2" data-id-title="Advanced configuration" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Advanced configuration</div><p>
       Only use this option if you know exactly what you are doing. Otherwise
       leave the parameters untouched and use the normal or the automatic setup
       options.
      </p></div></dd></dl></div><ol class="procedure" type="1"><li class="step"><p>
    Start the YaST sound module.
   </p></li><li class="step"><p>
    To configure a detected, but <span class="guimenu">Not Configured</span> sound card,
    select the respective entry from the list and click
    <span class="guimenu">Edit</span>.
   </p><p>
    To configure a new sound card, click <span class="guimenu">Add</span>. Select your
    sound card vendor and model and click <span class="guimenu">Next</span>.
   </p></li><li class="step"><p>
    Choose one of the setup options and click <span class="guimenu">Next</span>.
   </p></li><li class="step"><p>
    If you have chosen <span class="guimenu">Normal Setup</span>, you can now
    <span class="guimenu">Test</span> your sound configuration and make adjustments to
    the volume. You should start at about ten percent volume to avoid damage to
    your hearing or the speakers.
   </p></li><li class="step"><p>
    If all options are set according to your wishes, click
    <span class="guimenu">Next</span>.
   </p><p>
    The <span class="guimenu">Sound Configuration</span> dialog shows the newly
    configured or modified sound card.
   </p></li><li class="step"><p>
    To remove a sound card configuration that you no longer need, select the
    respective entry and click <span class="guimenu">Delete</span>.
   </p></li><li class="step"><p>
    Click <span class="guimenu">OK</span> to save the changes and leave the YaST sound
    module.
   </p></li></ol></div></div><div class="procedure" id="id-1.3.6.3.7" data-id-title="Modifying sound card configurations"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 33.2: </span><span class="title-name">Modifying sound card configurations </span></span><a title="Permalink" class="permalink" href="#id-1.3.6.3.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_sound.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    To change the configuration of an individual sound card (for experts
    only!), select the sound card entry in the <span class="guimenu">Sound
    Configuration</span> dialog and click <span class="guimenu">Edit</span>.
   </p><p>
    This takes you to the <span class="guimenu">Sound Card Advanced Options</span> where
    you can fine-tune several parameters. For more information, click
    <span class="guimenu">Help</span>.
   </p></li><li class="step"><p>
    To adjust the volume of an already configured sound card or to test the
    sound card, select the sound card entry in the <span class="guimenu">Sound
    Configuration</span> dialog and click <span class="guimenu">Other</span>. Select
    the respective menu item.
   </p><div id="id-1.3.6.3.7.3.2" data-id-title="YaST mixer" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: YaST mixer</div><p>
     The YaST mixer settings provide only basic options. They are intended
     for troubleshooting (for example, if the test sound is not audible).
     Access the YaST mixer settings from <span class="guimenu">Other</span> › <span class="guimenu">Volume</span>. For
     everyday use and fine-tuning of sound options, use the mixer applet
     provided by your desktop or the <code class="command">alsasound</code> command line
     tool.
    </p></div></li><li class="step"><p>
    For playback of MIDI files, select <span class="guimenu">Other</span> › <span class="guimenu">Start Sequencer</span>.
   </p></li><li class="step"><p>
    When a supported sound card is detected, you can install SoundFonts for
    playback of MIDI files:
   </p><ol type="a" class="substeps"><li class="step"><p>
      Insert the original driver CD-ROM into your CD or DVD drive.
     </p></li><li class="step"><p>
      Select <span class="guimenu">Other</span> › <span class="guimenu">Install
      SoundFonts</span> to copy SF2 SoundFonts™ to your
      hard disk. The SoundFonts are saved in the directory
      <code class="filename">/usr/share/sfbank/creative/</code>.
     </p></li></ol></li><li class="step"><p>
    If you have configured more than one sound card in your system you can
    adjust the order of your sound cards. To set a sound card as primary
    device, select the sound card in the <span class="guimenu">Sound Configuration</span>
    and click <span class="guimenu">Other</span> › <span class="guimenu">Set as the Primary
    Card</span>. The sound device with index
    <code class="literal">0</code> is the default device and thus used by the system and
    the applications.
   </p></li><li class="step"><p>
    By default, <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> uses the PulseAudio sound system. This is an
    abstraction layer that helps to mix multiple audio streams, bypassing any
    restrictions the hardware may have. To enable or disable the PulseAudio
    sound system, click <span class="guimenu">Other</span> › <span class="guimenu">PulseAudio Configuration</span>. If enabled,
    PulseAudio daemon is used to play sounds. Disable <span class="guimenu">PulseAudio
    Support</span> to use something else system-wide.
   </p></li></ol></div></div><p>
  The volume and configuration of all sound cards are saved when you click
  <span class="guimenu">OK</span> and leave the YaST sound module. The mixer settings
  are saved to the file <code class="filename">/etc/asound.state</code>. The ALSA
  configuration data is appended to the end of the file
  <code class="filename">/etc/modprobe.d/sound</code> and written to
  <code class="filename">/etc/sysconfig/sound</code>.
 </p></section><section class="chapter" id="sec-yast-hw-print" data-id-title="Setting up a printer"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">34 </span><span class="title-name">Setting up a printer</span></span> <a title="Permalink" class="permalink" href="#sec-yast-hw-print">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  YaST can be used to configure local and network printers. Further
  information about printing (general information, technical details, and
  troubleshooting) is available in <a class="xref" href="#cha-print" title="Chapter 24. Printer operation">Chapter 24, <em>Printer operation</em></a>.
 </p><p>
  In YaST, click <span class="guimenu">Hardware</span> › <span class="guimenu">Printer</span> to start the printer module. By
  default it opens in the <span class="guimenu">Printer Configurations</span> view,
  displaying a list of all printers that are available and configured. This is
  especially useful when having access to a lot of printers via the network.
  From here you can also <span class="guimenu">Print a Test Page</span> and configure
  printers.
 </p><div id="id-1.3.6.4.5" data-id-title="Starting CUPS" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Starting CUPS</div><p>
   To use the printer connected to your machine, you must have CUPS installed and
   running on your system. If CUPS is not running, you are prompted to start it.
   In case CUPS is not started at boot time, you are also prompted to enable
   it (recommended).
  </p></div><section class="sect1" id="sec-yast-hw-print-local" data-id-title="Configuring printers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">34.1 </span><span class="title-name">Configuring printers</span></span> <a title="Permalink" class="permalink" href="#sec-yast-hw-print-local">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Normally USB printers are detected automatically. If that does not happen,
   check whether the printer is switched on and connected to the machine.
  </p><p>
   Configuring a printer is a three-step process: specify the connection type,
   choose a driver, and name the print queue for this setup.
  </p><p>
   Many printer models may have several available drivers. When configuring the
   printer, YaST defaults to those marked <code class="literal">recommended</code>.
   Normally, it is not necessary to change the driver. However, if you want a
   color printer to print only in black and white, you can use a driver that
   does not support color printing. If you experience performance problems with
   a PostScript printer when printing graphics, try switching from a PostScript
   to a PCL driver (provided your printer understands PCL).
  </p><p>
   If no driver for your printer is listed, try selecting a generic driver with
   an appropriate standard language from the list. Refer to your printer's
   documentation to find out what language (the set of commands controlling
   the printer) your printer supports. If this does not work, refer to
   <a class="xref" href="#sec-yast-hw-print-local-get-ppd" title="34.1.1. Adding drivers with YaST">Section 34.1.1, “Adding drivers with YaST”</a> for an alternative
   solution.
  </p><p>
   A printer is always used through a print queue. This ensures that
   simultaneous jobs can be queued and processed one by one. Each print queue is
   assigned to a specific driver, and a printer can have multiple queues. As an
   example, this makes it possible to set up a second queue on a color printer
   that prints black and white only. Refer to
   <a class="xref" href="#sec-print-workflow" title="24.1. The CUPS workflow">Section 24.1, “The CUPS workflow”</a> for more information about print queues.
  </p><div class="procedure" id="pro-y2-hw-print-local-config" data-id-title="Adding a new printer"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 34.1: </span><span class="title-name">Adding a new printer </span></span><a title="Permalink" class="permalink" href="#pro-y2-hw-print-local-config">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Start the YaST printer module with <span class="guimenu">Hardware</span> › <span class="guimenu">Printer</span>.
    </p></li><li class="step"><p>
     In the <span class="guimenu">Printer Configurations</span> screen click
     <span class="guimenu">Add</span>.
    </p></li><li class="step"><p>
     If the printer is already listed under <code class="literal">Specify the
     Connection</code>, proceed with the next step. Otherwise, try
     <span class="guimenu">Detect More</span> or start the <span class="guimenu">Connection
     Wizard</span>.
    </p></li><li class="step"><p>
     In the text box under <code class="literal">Find and Assign a Driver</code> enter
     the vendor name and the model name and click <span class="guimenu">Search
     for</span>.
    </p></li><li class="step"><p>
     Choose a driver that matches your printer. It is recommended to choose the
     driver listed first. If no suitable driver is displayed, try the following.
    </p><ol type="a" class="substeps"><li class="step"><p>
       Check the search term.
      </p></li><li class="step"><p>
       Expand the search by clicking <span class="guimenu">Find More</span>.
      </p></li><li class="step"><p>
       Add a driver as described in
       <a class="xref" href="#sec-yast-hw-print-local-get-ppd" title="34.1.1. Adding drivers with YaST">Section 34.1.1, “Adding drivers with YaST”</a>.
      </p></li></ol></li><li class="step"><p>
     Specify the <code class="literal">Default paper size</code>.
    </p></li><li class="step"><p>
     In the <span class="guimenu">Set Arbitrary Name</span> field, enter a unique name
     for the print queue.
    </p></li><li class="step"><p>
     The printer is now configured with the default settings and ready to use.
     Click <span class="guimenu">OK</span> to return to the <span class="guimenu">Printer
     Configurations</span> view. The newly configured printer is now visible
     in the list of printers.
    </p></li></ol></div></div><section class="sect2" id="sec-yast-hw-print-local-get-ppd" data-id-title="Adding drivers with YaST"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.1.1 </span><span class="title-name">Adding drivers with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-yast-hw-print-local-get-ppd">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Not all printer drivers available for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> are installed by
    default. When adding a printer, if no suitable driver is available in the
    <span class="guimenu">Find and Assign a Driver</span> dialog, install a driver package
    containing drivers for the printer:
   </p><div class="procedure" id="id-1.3.6.4.6.8.3" data-id-title="Installing additional driver packages"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 34.2: </span><span class="title-name">Installing additional driver packages </span></span><a title="Permalink" class="permalink" href="#id-1.3.6.4.6.8.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start the YaST printer module with <span class="guimenu">Hardware</span> › <span class="guimenu">Printer</span>.
     </p></li><li class="step"><p>
      In the <span class="guimenu">Printer Configurations</span> screen, click
      <span class="guimenu">Add</span>.
     </p></li><li class="step"><p>
      In the <code class="literal">Find and Assign a Driver</code> section, click
      <span class="guimenu">Driver Packages</span>.
     </p></li><li class="step"><p>
      Choose one or more suitable driver packages from the list. Do
      <span class="emphasis"><em>not</em></span> specify the path to a printer description file.
     </p></li><li class="step"><p>
      Choose <span class="guimenu">OK</span> and confirm the package installation.
     </p></li><li class="step"><p>
      To directly use these drivers, proceed as described in
      <a class="xref" href="#pro-y2-hw-print-local-config" title="Adding a new printer">Procedure 34.1, “Adding a new printer”</a>.
     </p></li></ol></div></div><p>
    PostScript printers do not need printer driver software. PostScript
    printers need only a PostScript Printer Description (PPD) file which
    matches the particular model. PPD files are provided by the printer
    manufacturer.
   </p><p>
    If no suitable PPD file is available in the <span class="guimenu">Find and Assign a
    Driver</span> dialog when adding a PostScript printer, install a PPD file
    for your printer:
   </p><p>
    There are several sources of PPD files. It is recommended to first try
    additional driver packages that are shipped with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> but not
    installed by default (see below for installation instructions). If these
    packages do not contain suitable drivers for your printer, get PPD files
    directly from your printer vendor or from the driver CD of a PostScript
    printer. For details, see <a class="xref" href="#sec-print-prob-ppd" title="24.8.2. No suitable PPD file available for a PostScript printer">Section 24.8.2, “No suitable PPD file available for a PostScript printer”</a>.
    Alternatively, find PPD files at
    <a class="link" href="https://www.openprinting.org/printers" target="_blank">https://www.openprinting.org/printers</a>,
    the <span class="quote">“<span class="quote">OpenPrinting.org printer database</span>”</span>. When using PPD files
    from OpenPrinting, keep in mind that they may not be supported by
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
   </p><div class="procedure" id="id-1.3.6.4.6.8.7" data-id-title="Adding a PPD file for PostScript printers"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 34.3: </span><span class="title-name">Adding a PPD file for PostScript printers </span></span><a title="Permalink" class="permalink" href="#id-1.3.6.4.6.8.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start the YaST printer module with <span class="guimenu">Hardware</span> › <span class="guimenu">Printer</span>.
     </p></li><li class="step"><p>
      In the <span class="guimenu">Printer Configurations</span> screen, click
      <span class="guimenu">Add</span>.
     </p></li><li class="step"><p>
      In the <code class="literal">Find and Assign a Driver</code> section, click
      <span class="guimenu">Driver Packages</span>.
     </p></li><li class="step"><p>
      Enter the full path to the PPD file into the text box under <code class="literal">Make
      a Printer Description File Available</code>.
     </p></li><li class="step"><p>
      Click <span class="guimenu">OK</span> to return to the <code class="literal">Add New Printer
      Configuration</code> screen.
     </p></li><li class="step"><p>
      To directly use this PPD file, proceed as described in
      <a class="xref" href="#pro-y2-hw-print-local-config" title="Adding a new printer">Procedure 34.1, “Adding a new printer”</a>.
     </p></li></ol></div></div></section><section class="sect2" id="sec-yast-hw-print-local-tune" data-id-title="Editing a local printer configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.1.2 </span><span class="title-name">Editing a local printer configuration</span></span> <a title="Permalink" class="permalink" href="#sec-yast-hw-print-local-tune">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    By editing an existing configuration for a printer you can change basic
    settings such as connection type and driver. It is also possible to adjust
    the default settings for paper size, resolution, media source, etc. You can
    change identifiers of the printer by altering the printer description or
    location.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start the YaST printer module with <span class="guimenu">Hardware</span> › <span class="guimenu">Printer</span>.
     </p></li><li class="step"><p>
      In the <span class="guimenu">Printer Configurations</span> screen, choose a local
      printer configuration from the list and click <span class="guimenu">Edit</span>.
     </p></li><li class="step"><p>
      Change the connection type or the driver as described in
      <a class="xref" href="#pro-y2-hw-print-local-config" title="Adding a new printer">Procedure 34.1, “Adding a new printer”</a>. This should only be
      necessary in case you have problems with the current configuration.
     </p></li><li class="step"><p>
      Optionally, make this printer the default by checking <span class="guimenu">Default
      Printer</span>.
     </p></li><li class="step"><p>
      Adjust default settings by clicking <span class="guimenu">All Options for the
      Current Driver</span>. To change a setting, expand the list of options
      by clicking the <code class="literal">+</code> sign. Change the default by
      clicking an option. Apply your changes with <span class="guimenu">OK</span>.
     </p></li></ol></div></div></section></section><section class="sect1" id="sec-yast-hw-print-network" data-id-title="Configuring printing via the network with YaST"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">34.2 </span><span class="title-name">Configuring printing via the network with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-yast-hw-print-network">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Network printers are not detected automatically. They must be configured
   manually using the YaST printer module. Depending on your network setup,
   you can print to a print server (CUPS, LPD, SMB or IPX) or directly to a
   network printer (preferably via TCP). Access the configuration view for
   network printing by choosing <span class="guimenu">Printing via Network</span> from
   the left pane in the YaST printer module.
  </p><section class="sect2" id="sec-yast-hw-print-network-cups" data-id-title="Using CUPS"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.2.1 </span><span class="title-name">Using CUPS</span></span> <a title="Permalink" class="permalink" href="#sec-yast-hw-print-network-cups">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In a Linux environment CUPS is used to print via the network. The
    simplest setup is to only print via a single CUPS server which can directly
    be accessed by all clients. Printing via more than one CUPS server requires
    a running local CUPS daemon that communicates with the remote CUPS servers.
   </p><div id="id-1.3.6.4.7.3.3" data-id-title="Browsing network print queues" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Browsing network print queues</div><p>
     CUPS servers announce their print queues over the network either via the
     traditional CUPS browsing protocol or via Bonjour/DNS-SD. Clients need
     to browse these lists so users can select specific printers to
     send their print jobs to. To browse network print queues, the
     service <code class="systemitem">cups-browsed</code> provided by
     the package
     <code class="systemitem">cups-filters-cups-browsed</code> must run on all clients that print via CUPS
     servers. <code class="systemitem">cups-browsed</code> is started
     automatically when configuring network printing with YaST.
    </p><p>
     If browsing does not work after starting
     <code class="systemitem">cups-browsed</code>, the CUPS servers
     may announce the network print queues via Bonjour/DNS-SD. In this
     case you need to additionally install the package
     <code class="systemitem">avahi</code> and start the associated
     service with <code class="command">sudo systemctl start avahi-daemon</code> on all
     clients.
    </p></div><div class="procedure" id="id-1.3.6.4.7.3.4" data-id-title="Printing via a single CUPS server"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 34.4: </span><span class="title-name">Printing via a single CUPS server </span></span><a title="Permalink" class="permalink" href="#id-1.3.6.4.7.3.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start the YaST printer module with <span class="guimenu">Hardware</span> › <span class="guimenu">Printer</span>.
     </p></li><li class="step"><p>
      From the left pane, select <span class="guimenu">Print via Network</span>.
     </p></li><li class="step"><p>
      Check <span class="guimenu">Do All Your Printing Directly via One Single CUPS
      Server</span> and specify the name or IP address of the server.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Test Server</span> to make sure you have chosen the
      correct name or IP address.
     </p></li><li class="step"><p>
      Click <span class="guimenu">OK</span> to return to the <span class="guimenu">Printer Configurations</span>
      screen. All printers available via the CUPS server are now listed.
     </p></li></ol></div></div><div class="procedure" id="id-1.3.6.4.7.3.5" data-id-title="Printing via multiple CUPS servers"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 34.5: </span><span class="title-name">Printing via multiple CUPS servers </span></span><a title="Permalink" class="permalink" href="#id-1.3.6.4.7.3.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start the YaST printer module with <span class="guimenu">Hardware</span> › <span class="guimenu">Printer</span>.
     </p></li><li class="step"><p>
      From the left pane, select <span class="guimenu">Print via Network</span>.
     </p></li><li class="step"><p>
      Check <span class="guimenu">Accept Printer Announcements from CUPS Servers</span>.
     </p></li><li class="step"><p>
      Under <code class="literal">General Settings</code> specify which servers to use.
      You may accept connections from all networks available or from specific
      hosts. If you choose the latter option, you need to specify the host
      names or IP addresses.
     </p></li><li class="step"><p>
      Click <span class="guimenu">OK</span> and then <span class="guimenu">Yes</span>
      when prompted to start a local CUPS server. After the server has started,
      YaST  returns to the <span class="guimenu">Printer Configurations</span>
      screen. Click <span class="guimenu">Refresh list</span> to see the printers
      detected so far.
     </p></li></ol></div></div></section><section class="sect2" id="sec-yast-hw-print-network-other" data-id-title="Using print servers other than CUPS"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.2.2 </span><span class="title-name">Using print servers other than CUPS</span></span> <a title="Permalink" class="permalink" href="#sec-yast-hw-print-network-other">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If your network offers print services via print servers other than CUPS,
    start the YaST printer module with <span class="guimenu">Hardware</span> › <span class="guimenu">Printer</span> and
    select <span class="guimenu">Print via Network</span> from the left pane.
    Start the <span class="guimenu">Connection Wizard</span> and choose the appropriate
    <span class="guimenu">Connection Type</span>. Ask your network administrator for
    details on configuring a network printer in your environment.
   </p></section></section><section class="sect1" id="sec-yast-hw-print-share" data-id-title="Sharing printers over the network"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">34.3 </span><span class="title-name">Sharing printers over the network</span></span> <a title="Permalink" class="permalink" href="#sec-yast-hw-print-share">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Printers managed by a local CUPS daemon can be shared over the network,
   effectively turning your machine into a CUPS server. You share a
   printer by enabling so-called <span class="quote">“<span class="quote">browsing mode</span>”</span> in CUPS. If
   browsing is enabled, the local print queues are made available on the network
   for listening to remote CUPS daemons. It is also possible to set up a
   dedicated CUPS server that manages all print queues and can be accessed by
   remote clients directly. In this case, enabling browsing is not required.
  </p><div class="procedure" id="id-1.3.6.4.8.3" data-id-title="Sharing printers"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 34.6: </span><span class="title-name">Sharing printers </span></span><a title="Permalink" class="permalink" href="#id-1.3.6.4.8.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_printer.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Start the YaST printer module with <span class="guimenu">Hardware</span> › <span class="guimenu">Printer</span>.
    </p></li><li class="step"><p>
     Select <span class="guimenu">Share Printers</span> from the left pane.
    </p></li><li class="step"><p>
     Select <span class="guimenu">Allow Remote Access</span>. Also check <span class="guimenu">For
     computers within the local network</span> and enable browsing mode by
     also checking <span class="guimenu">Publish printers by default within the local
     network</span>.
    </p></li><li class="step"><p>
     Click <span class="guimenu">OK</span> to restart the CUPS server and to return to
     the <span class="guimenu">Printer Configurations</span> screen.
    </p></li><li class="step"><p>
     Regarding CUPS and firewall settings, see
     <a class="link" href="https://en.opensuse.org/SDB:CUPS_and_SANE_Firewall_settings" target="_blank">https://en.opensuse.org/SDB:CUPS_and_SANE_Firewall_settings</a>.
    </p></li></ol></div></div></section></section><section class="chapter" id="cha-power-mgmt" data-id-title="Power management"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">35 </span><span class="title-name">Power management</span></span> <a title="Permalink" class="permalink" href="#cha-power-mgmt">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/powermanagement.xml" title="Edit source document"> </a></div></div></div></div></div><p><strong class="arch-arrow-start">IBM Z</strong>
  The features and hardware described in this chapter do not exist on
  IBM Z, making this chapter irrelevant for these platforms.
 <strong class="arch-arrow-end"> </strong></p><p>
  Power management is especially important on laptop computers, but is also
  useful on other systems. ACPI (Advanced Configuration and Power Interface) is
  available on all modern computers (laptops, desktops and servers). Power
  management technologies require suitable hardware and BIOS routines. Most
  laptops and many modern desktops and servers meet these requirements. It is
  also possible to control CPU frequency scaling to save power or decrease
  noise.
 </p><section class="sect1" id="sec-power-mgmt-save" data-id-title="Power saving functions"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">35.1 </span><span class="title-name">Power saving functions</span></span> <a title="Permalink" class="permalink" href="#sec-power-mgmt-save">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/powermanagement.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Power saving functions are not only significant for the mobile use of
   laptops, but also for desktop systems. The main functions and their use in
   ACPI are:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.6.5.5.3.1"><span class="term">Standby</span></dt><dd><p>
      Not supported.
     </p></dd><dt id="id-1.3.6.5.5.3.2"><span class="term">Suspend (to memory)</span></dt><dd><p>
      This mode writes the entire system state to the RAM. Subsequently, the
      entire system except the RAM is put to sleep. In this state, the computer
      consumes little power. The advantage of this state is the
      possibility of resuming work at the same point within a few seconds
      without having to boot and restart applications. This function
      corresponds to the ACPI state <code class="literal">S3</code>.

     </p></dd><dt id="id-1.3.6.5.5.3.3"><span class="term">Hibernation (suspend to disk)
    </span></dt><dd><p>
      In this operating mode, the entire system state is written to the hard
      disk and the system is powered off. There must be a swap partition at
      least as big as the RAM to write all the active data. Reactivation from
      this state takes about 30 to 90 seconds. The state before the suspend is
      restored. Several manufacturers offer useful hybrid variants of this mode,
      such as RediSafe in IBM Thinkpads. The corresponding ACPI state is
      <code class="literal">S4</code>. In Linux, suspend to disk is performed by kernel
      routines that are independent from ACPI.
     </p><div id="id-1.3.6.5.5.3.3.2.2" data-id-title="Changed UUID for swap partitions when formatting via mkswap" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Changed UUID for swap partitions when formatting via <code class="command">mkswap</code></div><p>Do not reformat existing swap partitions with <code class="command">mkswap</code>
     if possible. Reformatting with <code class="command">mkswap</code> will change
     the UUID value of the swap partition. Either reformat via YaST (which
     will update <code class="filename">/etc/fstab</code>) or adjust
     <code class="filename">/etc/fstab</code> manually.
  </p></div></dd><dt id="id-1.3.6.5.5.3.4"><span class="term">Battery monitor
    </span></dt><dd><p>
      ACPI checks the battery charge status and provides information about it.
      Additionally, it coordinates actions to perform when a critical charge
      status is reached.
     </p></dd><dt id="id-1.3.6.5.5.3.5"><span class="term">Automatic power-off</span></dt><dd><p>
      Following a shutdown, the computer is powered off. This is especially
      important when an automatic shutdown is performed shortly before the
      battery is empty.
     </p></dd><dt id="id-1.3.6.5.5.3.6"><span class="term">Processor speed control</span></dt><dd><p>
      In connection with the CPU, energy can be saved in three different ways:
      frequency and voltage scaling (also known as
      <span class="productname">PowerNow!</span> or
      <span class="productname">Speedstep</span>), throttling and putting
      the processor to sleep (C-states). Depending on the operating mode of the
      computer, these methods can also be combined.
     </p></dd></dl></div></section><section class="sect1" id="sec-power-mgmt-acpi" data-id-title="Advanced configuration and power interface (ACPI)"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">35.2 </span><span class="title-name">Advanced configuration and power interface (ACPI)</span></span> <a title="Permalink" class="permalink" href="#sec-power-mgmt-acpi">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/powermanagement.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   ACPI was designed to enable the operating system to set up and control the
   individual hardware components. ACPI supersedes both Power Management Plug
   and Play (PnP) and Advanced Power Management (APM). It delivers information
   about the battery, AC adapter, temperature, fan and system events, like
   <span class="quote">“<span class="quote">close lid</span>”</span> or <span class="quote">“<span class="quote">battery low.</span>”</span>
  </p><p>
   The BIOS provides tables containing information about the individual
   components and hardware access methods. The operating system uses this
   information for tasks like assigning interrupts or activating and
   deactivating components. Because the operating system executes commands
   stored into the BIOS, the functionality depends on the BIOS implementation.
   The tables ACPI can detect and load are reported in journald. See
   <a class="xref" href="#cha-journalctl" title="Chapter 21. journalctl: query the systemd journal">Chapter 21, <em><code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal</em></a> for more information on viewing the journal
   log messages. See <a class="xref" href="#sec-power-mgmt-acpi-trouble" title="35.2.2. Troubleshooting">Section 35.2.2, “Troubleshooting”</a> for more information
   about troubleshooting ACPI problems.
  </p><section class="sect2" id="sec-power-mgmt-acpi-powernow" data-id-title="Controlling the CPU performance"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">35.2.1 </span><span class="title-name">Controlling the CPU performance</span></span> <a title="Permalink" class="permalink" href="#sec-power-mgmt-acpi-powernow">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/powermanagement.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The CPU can save energy in three ways:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Frequency and Voltage Scaling
     </p></li><li class="listitem"><p>
      Throttling the Clock Frequency (T-states)
     </p></li><li class="listitem"><p>
      Putting the Processor to Sleep (C-states)
     </p></li></ul></div><p>
    Depending on the operating mode of the computer, these methods can be
    combined. Saving energy also means that the system heats up less and the
    fans are activated less frequently.
   </p><p>
    Frequency scaling and throttling are only relevant if the processor is
    busy, because the most economic C-state is applied anyway when the
    processor is idle. If the CPU is busy, frequency scaling is the recommended
    power saving method. Often the processor only works with a partial load. In
    this case, it can be run with a lower frequency. Dynamic frequency
    scaling controlled by the kernel on-demand governor is the best approach.
   </p><p>
    Throttling should be used as the last resort, for example, to extend the
    battery operation time despite a high system load. However, certain systems do
    not run smoothly when they are throttled too much. Moreover, CPU throttling
    does not make sense if the CPU has little to do.
   </p><p>
    For in-depth information, refer to <span class="intraxref">Book “System Analysis and Tuning Guide”, Chapter 12 “Power management”</span>.
   </p></section><section class="sect2" id="sec-power-mgmt-acpi-trouble" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">35.2.2 </span><span class="title-name">Troubleshooting</span></span> <a title="Permalink" class="permalink" href="#sec-power-mgmt-acpi-trouble">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/powermanagement.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    There are two different types of problems. On one hand, the ACPI code of
    the kernel may contain bugs that were not detected in time. In this case, a
    solution will be made available for download. More often, the problems are
    caused by the BIOS. Sometimes, deviations from the ACPI specification are
    purposely integrated in the BIOS to circumvent errors in the ACPI
    implementation of other widespread operating systems. Hardware components
    that have serious errors in the ACPI implementation are recorded in a
    blacklist that prevents the Linux kernel from using ACPI for these
    components.
   </p><p>
    The first thing to do when problems are encountered is to update the BIOS.
    If the computer does not boot, one of the following boot parameters may be
    helpful:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.6.5.6.5.4.1"><span class="term">pci=noacpi</span></dt><dd><p>
       Do not use ACPI for configuring the PCI devices.
      </p></dd><dt id="id-1.3.6.5.6.5.4.2"><span class="term">acpi=ht</span></dt><dd><p>
       Only perform a simple resource configuration. Do not use ACPI for other
       purposes.
      </p></dd><dt id="id-1.3.6.5.6.5.4.3"><span class="term">acpi=off</span></dt><dd><p>
       Disable ACPI.
      </p></dd></dl></div><div id="id-1.3.6.5.6.5.5" data-id-title="Problems booting without ACPI" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Problems booting without ACPI</div><p>
     Certain newer machines (especially SMP systems and AMD64 systems) need ACPI
     for configuring the hardware correctly. On these machines, disabling ACPI
     can cause problems.
    </p></div><p>
    Sometimes, the machine is confused by hardware that is attached over USB or
    FireWire. If a machine refuses to boot, unplug all unneeded hardware and
    try again.
   </p><p>
    Monitor the boot messages of the system with the command <code class="command">dmesg
    -T</code> <code class="option">| grep -2i acpi</code> (or all messages, because the
    problem may not be caused by ACPI) after booting. If an error occurs while
    parsing an ACPI table, the most important table—the DSDT
    (<span class="emphasis"><em>Differentiated System Description Table</em></span>)—can be
    replaced with an improved version. In this case, the faulty DSDT of the
    BIOS is ignored. The procedure is described in
    <a class="xref" href="#sec-power-mgmt-faq" title="35.4. Troubleshooting">Section 35.4, “Troubleshooting”</a>.
   </p><p>
    In the kernel configuration, there is a switch for activating ACPI debug
    messages. If a kernel with ACPI debugging is compiled and installed,
    detailed information is issued.
   </p><p>
    If you experience BIOS or hardware problems, it is always advisable to
    contact the manufacturers. Especially if they do not always provide
    assistance for Linux, they should be confronted with the problems.
    Manufacturers only take the issue seriously if they realize that an
    adequate number of their customers use Linux.
   </p><section class="sect3" id="sec-power-mgmt-acpi-trouble-info" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">35.2.2.1 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-power-mgmt-acpi-trouble-info">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/powermanagement.xml" title="Edit source document"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       <a class="link" href="https://tldp.org/HOWTO/ACPI-HOWTO/" target="_blank">https://tldp.org/HOWTO/ACPI-HOWTO/</a> (detailed ACPI
       HOWTO, contains DSDT patches)
      </p></li><li class="listitem"><p>
       <a class="link" href="https://uefi.org/specifications" target="_blank">https://uefi.org/specifications</a> (Advanced Configuration &amp;
       Power Interface Specification)
      </p></li></ul></div></section></section></section><section class="sect1" id="sec-power-mgmt-silenthd" data-id-title="Rest for the hard disk"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">35.3 </span><span class="title-name">Rest for the hard disk</span></span> <a title="Permalink" class="permalink" href="#sec-power-mgmt-silenthd">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/powermanagement.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In Linux, the hard disk can be put to sleep entirely if it is not needed or
   it can be run in a more economic or quieter mode. On modern laptops, you do
   not need to switch off the hard disks manually, because they automatically
   enter an economic operating mode whenever they are not needed. However, if
   you want to maximize power savings, test the following methods,
   using the <code class="command">hdparm</code> command.
  </p><p>
   It can be used to modify hard disk settings. The option
   <code class="option">-y</code> instantly switches the hard disk to the standby mode.
   <code class="option">-Y</code> puts it to sleep. <code class="command">hdparm</code>
   <code class="option">-S</code> <em class="replaceable">X</em> causes the hard disk to be
   spun down after a certain period of inactivity. Replace
   <em class="replaceable">X</em> as follows: <code class="literal">0</code> disables this
   mechanism, causing the hard disk to run continuously. Values from
   <code class="literal">1</code> to <code class="literal">240</code> are multiplied by 5
   seconds. Values from <code class="literal">241</code> to <code class="literal">251</code>
   correspond to 1 to 11 times 30 minutes.
  </p><p>
   Internal power saving options of the hard disk can be controlled with the
   option <code class="literal">-B</code>. Select a value from <code class="literal">0</code> to
   <code class="literal">255</code> for maximum saving to maximum throughput. The result
   depends on the hard disk used and is difficult to assess. To make a hard
   disk quieter, use the option <code class="literal">-M</code>. Select a value from
   <code class="literal">128</code> to <code class="literal">254</code> for quiet to fast.
  </p><p>
   Often, it is not so easy to put the hard disk to sleep. In Linux, multiple
   processes write to the hard disk, waking it up repeatedly. Therefore, it is
   important to understand how Linux handles data that needs to be written to
   the hard disk. First, all data is buffered in the RAM. This buffer is
   monitored by the <code class="systemitem">pdflush</code> daemon.
   When the data reaches a certain age limit or when the buffer is filled to a
   certain degree, the buffer content is flushed to the hard disk. The buffer
   size is dynamic and depends on the size of the memory and the system load.
   By default, pdflush is set to short intervals to achieve maximum data
   integrity. It checks the buffer every 5 seconds and writes the data to the
   hard disk. The following variables are interesting:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.6.5.7.6.1"><span class="term"><code class="filename">/proc/sys/vm/dirty_writeback_centisecs</code>
    </span></dt><dd><p>
      Contains the delay until a pdflush thread wakes up (in hundredths of a
      second).
     </p></dd><dt id="id-1.3.6.5.7.6.2"><span class="term"><code class="filename">/proc/sys/vm/dirty_expire_centisecs</code>
    </span></dt><dd><p>
      Defines after which timeframe a dirty page should be written at latest.
      Default is <code class="literal">3000</code>, which means 30 seconds.
     </p></dd><dt id="id-1.3.6.5.7.6.3"><span class="term"><code class="filename">/proc/sys/vm/dirty_background_ratio</code>
    </span></dt><dd><p>
      Maximum percentage of dirty pages until pdflush begins to write them.
      Default is <code class="literal">5</code>%.
     </p></dd><dt id="id-1.3.6.5.7.6.4"><span class="term"><code class="filename">/proc/sys/vm/dirty_ratio</code>
    </span></dt><dd><p>
      When the dirty pages exceed this percentage of the total memory,
      processes are forced to write dirty buffers during their time slice
      instead of continuing to write.
     </p></dd></dl></div><div id="id-1.3.6.5.7.7" data-id-title="Data integrity risk" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Data integrity risk</div><p>
    Changes to the <code class="systemitem">pdflush</code> daemon
    settings can compromise data integrity.
   </p></div><p>
   Apart from these processes, journaling file systems, like
   <code class="systemitem">Btrfs</code>,
   <code class="systemitem">Ext3</code>,
   <code class="systemitem">Ext4</code> and others write their
   metadata independently from <code class="systemitem">pdflush</code>,
   which also prevents the hard disk from spinning down.
   
  </p><p>
   Another important factor is the way active programs behave. For example,
   good editors regularly write hidden backups of the currently modified file
   to the hard disk, causing the disk to wake up. Features like this can be
   disabled at the expense of data integrity.
  </p><p>
   In this connection, the mail daemon postfix uses the variable
   <code class="systemitem">POSTFIX_LAPTOP</code>. If this variable is set to
   <code class="literal">yes</code>, postfix accesses the hard disk far less frequently.
  </p></section><section class="sect1" id="sec-power-mgmt-faq" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">35.4 </span><span class="title-name">Troubleshooting</span></span> <a title="Permalink" class="permalink" href="#sec-power-mgmt-faq">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/powermanagement.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   All error messages and alerts are logged in the system journal, which can be
   queried with the command <code class="command">journalctl</code> (see
   <a class="xref" href="#cha-journalctl" title="Chapter 21. journalctl: query the systemd journal">Chapter 21, <em><code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal</em></a> for more information). The following
   sections cover the most common problems.
  </p><section class="sect2" id="sec-power-mgmt-faq-cpufreq" data-id-title="CPU frequency does not work"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">35.4.1 </span><span class="title-name">CPU frequency does not work</span></span> <a title="Permalink" class="permalink" href="#sec-power-mgmt-faq-cpufreq">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/powermanagement.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Refer to the kernel sources to see if your processor is supported. You may
    need a special kernel module or module option to activate CPU frequency
    control. If the <code class="systemitem">kernel-source</code>
    package is installed, this information is available in
    <code class="filename">/usr/src/linux/Documentation/cpu-freq/*</code>.
   </p></section></section></section><section class="chapter" id="cha-nvdimm" data-id-title="Persistent memory"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">36 </span><span class="title-name">Persistent memory</span></span> <a title="Permalink" class="permalink" href="#cha-nvdimm">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    This chapter contains additional information about using <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> with
    non-volatile main memory, also known as <span class="emphasis"><em>Persistent Memory</em></span>,
    comprising one or more NVDIMMs.
   </p></div></div></div></div><section class="sect1" id="sec-nvdimm-intro" data-id-title="Introduction"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">36.1 </span><span class="title-name">Introduction</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-intro">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Persistent memory is a new type of computer storage, combining speeds
   approaching those of dynamic RAM (DRAM) along with RAM's byte-by-byte
   addressability, plus the permanence of solid-state drives (SSDs).
  </p><p>
   SUSE currently supports the use of persistent memory with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> on machines
   with the AMD64/Intel 64 and POWER architectures.
  </p><p>
   Like conventional RAM, persistent memory is installed directly into
   mainboard memory slots. As such, it is supplied in the same physical form
   factor as RAM—as DIMMs. These are known as NVDIMMs: non-volatile dual
   inline memory modules.
  </p><p>
   Unlike RAM, though, persistent memory is also similar to flash-based SSDs in
   several ways. Both are based on forms of solid-state memory circuitry, but
   despite this, both provide non-volatile storage: Their contents are retained
   when the system is powered off or restarted. For both forms of medium,
   writing data is slower than reading it, and both support a limited number of
   rewrite cycles. Finally, also like SSDs, sector-level access to persistent
   memory is possible if that is more suitable for a particular application.
  </p><p>
   Different models use different forms of electronic storage medium, such as
   Intel 3D XPoint, or a combination of NAND-flash and DRAM. New forms of
   non-volatile RAM are also in development. This means that different vendors
   and models of NVDIMM offer different performance and durability
   characteristics.
  </p><p>
   Because the storage technologies involved are in an early stage of
   development, different vendors' hardware may impose different limitations.
   Thus, the following statements are generalizations.
  </p><p>
   Persistent memory is up to ten times slower than DRAM, but around a thousand
   times faster than flash storage. It can be rewritten on a byte-by-byte basis
   rather than flash memory's whole-sector erase-and-rewrite process. Finally,
   while rewrite cycles are limited, most forms of persistent memory can handle
   millions of rewrites, compared to the thousands of cycles of flash storage.
  </p><p>
   This has two important consequences:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     It is not possible with current technology to run a system with only
     persistent memory and thus achieve non-volatile main memory. You
     must use a mixture of both conventional RAM and NVDIMMs. The operating
     system and applications will execute in conventional RAM, with the NVDIMMs
     providing fast supplementary storage.
    </p></li><li class="listitem"><p>
     The performance characteristics of different vendors' persistent memory
     mean that it may be necessary for programmers to be aware of the hardware
     specifications of the NVDIMMs in a particular server, including how many
     NVDIMMs there are and in which memory slots they are fitted. This will
     impact hypervisor use, migration of software between different
     host machines, and so on.
    </p></li></ul></div><p>
   This new storage subsystem is defined in version 6 of the ACPI standard.
   However, <code class="filename">libnvdimm</code> supports pre-standard NVDIMMs and
   they can be used in the same way.
  </p><div id="id-1.3.6.6.3.12" data-id-title="Intel Optane DC Persistent Memory" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Intel Optane DC Persistent Memory</div><p>
    Intel Optane DIMMs memory can be used in specific modes:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      In <span class="emphasis"><em>App Direct Mode</em></span>, the Intel Optane memory is used as
      fast persistent storage, an alternative to SSDs and NVMe devices. Data in
      this mode is kept when the system is powered off.
     </p><p>
      App Direct Mode has been supported since SLES 12 SP4.
     </p></li><li class="listitem"><p>
      In <span class="emphasis"><em>Memory Mode</em></span>, the Intel Optane memory serves as a
      cost-effective, high-capacity alternative to DRAM. In this mode, separate
      DRAM DIMMs act as a cache for the most frequently accessed data while the
      Optane DIMMs memory provides large memory capacity. However, compared with
      DRAM-only systems, this mode is slower under random access workloads. If
      you run applications without Optane-specific enhancements that take
      advantage of this mode, memory performance may decrease. Data in this
      mode is lost when the system is powered off.
     </p><p>
      Memory Mode has been supported since SLES 15 SP1.
     </p></li><li class="listitem"><p>
      In <span class="emphasis"><em>Mixed Mode</em></span>, the Intel Optane memory is
      partitioned, so it can serve in both modes simultaneously.
     </p><p>
      Mixed Mode has been supported since SLES 15 SP1.
     </p></li></ul></div></div></section><section class="sect1" id="sec-nvdimm-terms" data-id-title="Terms"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">36.2 </span><span class="title-name">Terms</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-terms">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.6.6.4.2.1"><span class="term">Region</span></dt><dd><p>
      A <span class="emphasis"><em>region</em></span> is a block of persistent memory that can
      be divided up into one or more <span class="emphasis"><em>namespace</em></span>s. You
      cannot access the persistent memory of a region without first allocating
      it to a namespace.
     </p></dd><dt id="id-1.3.6.6.4.2.2"><span class="term">Namespace</span></dt><dd><p>
      A single contiguously addressed range of non-volatile storage, comparable
      to NVM Express SSD namespaces, or to SCSI Logical Units (LUNs). Namespaces
      appear in the server's <code class="filename">/dev</code> directory as separate
      block devices. Depending on the method of access required, namespaces can
      either amalgamate storage from multiple NVDIMMs into larger volumes, or
      allow it to be partitioned into smaller volumes.
     </p></dd><dt id="id-1.3.6.6.4.2.3"><span class="term">Mode</span></dt><dd><p>
      Each namespace also has a <span class="emphasis"><em>mode</em></span> that defines which
      NVDIMM features are enabled for that namespace. Sibling namespaces of the
      same parent region always have the same type, but might be
      configured to have different modes. Namespace modes include:
     </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.6.6.4.2.3.2.2.1"><span class="term">devdax</span></dt><dd><p>
         Device-DAX mode. Creates a single-character device file (<code class="filename">
          /dev/dax<em class="replaceable">X</em>.<em class="replaceable">Y</em>
         </code>). Does <span class="emphasis"><em>not</em></span> require file system
         creation.
        </p></dd><dt id="id-1.3.6.6.4.2.3.2.2.2"><span class="term">fsdax</span></dt><dd><p>
         File system-DAX mode. Default if no other mode is specified. Creates a
         block device (<code class="filename">/dev/pmem<em class="replaceable">X</em>
          [.<em class="replaceable">Y</em>]</code>) which supports DAX for
         <code class="literal">ext4</code> or <code class="literal">XFS</code>.
        </p></dd><dt id="id-1.3.6.6.4.2.3.2.2.3"><span class="term">sector</span></dt><dd><p>
         For legacy file systems which do not checksum metadata. Suitable for
         small boot volumes. Compatible with other operating systems.
        </p></dd><dt id="id-1.3.6.6.4.2.3.2.2.4"><span class="term">raw</span></dt><dd><p>
         A memory disk without a label or metadata. Does not support DAX.
         Compatible with other operating systems.
        </p><div id="id-1.3.6.6.4.2.3.2.2.4.2.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
          <code class="literal">raw</code> mode is not supported by SUSE. It is not
          possible to mount file systems on <code class="literal">raw</code> namespaces.
         </p></div></dd></dl></div></dd><dt id="id-1.3.6.6.4.2.4"><span class="term">Type</span></dt><dd><p>
      Each namespace and region has a <span class="emphasis"><em>type</em></span> that defines
      how the persistent memory associated with that namespace or
      region can be accessed. A namespace always has the same type as its
      parent region. There are two different types: Persistent Memory, which
      can be configured in two different ways, and the deprecated Block Mode.
     </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.6.6.4.2.4.2.2.1"><span class="term">Persistent memory (PMEM)</span></dt><dd><p>
         PMEM storage offers byte-level access, similar to RAM. Using PMEM, a
         single namespace can include multiple interleaved NVDIMMs, allowing
         them all to be used as a single device.
        </p><p>
         There are two ways to configure a PMEM namespace.
        </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.6.6.4.2.4.2.2.1.2.3.1"><span class="term">PMEM with DAX</span></dt><dd><p>
            A PMEM namespace configured for Direct Access (DAX) means that
            accessing the memory bypasses the kernel's page cache and goes
            direct to the medium. Software can directly read or write every
            byte of the namespace separately.
           </p></dd><dt id="id-1.3.6.6.4.2.4.2.2.1.2.3.2"><span class="term">PMEM with block translation table (BTT)</span></dt><dd><p>
            A PMEM namespace configured to operate in BTT mode is accessed on a
            sector-by-sector basis, like a conventional disk drive, rather than
            the more RAM-like byte-addressable model. A translation table
            mechanism batches accesses into sector-sized units.
           </p><p>
            The advantage of BTT is data protection. The storage subsystem
            ensures that each sector is completely written to the underlying
            medium. If a sector cannot be completely written (that is, if the
            write operation fails for some reason), then the whole sector will
            be rolled back to its previous state. Thus a given sector cannot be
            partially written.
           </p><p>
            Additionally, access to BTT namespaces is cached by the kernel.
           </p><p>
            The drawback is that DAX is not possible for BTT namespaces.
           </p></dd></dl></div></dd><dt id="id-1.3.6.6.4.2.4.2.2.2"><span class="term">Block mode (BLK)</span></dt><dd><p>
         Block mode storage addresses each NVDIMM as a separate device. Its use
         is deprecated and no longer supported.
        </p></dd></dl></div><p>
      Apart from <code class="literal">devdax</code> namespaces, all other types must be
      formatted with a file system, just as with a conventional drive.
      <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> supports the <code class="literal">ext2</code>,
      <code class="literal">ext4</code> and <code class="literal">XFS</code> file systems for this.
     </p></dd><dt id="id-1.3.6.6.4.2.5"><span class="term">Direct access (DAX)</span></dt><dd><p>
      DAX allows persistent memory to be directly mapped into a process's
      address space, for example, using the <code class="literal">mmap</code> system call.
     </p></dd><dt id="id-1.3.6.6.4.2.6"><span class="term">DIMM physical address (DPA)</span></dt><dd><p>
      A memory address as an offset into a single DIMM's memory; that is,
      starting from zero as the lowest addressable byte on that DIMM.
     </p></dd><dt id="id-1.3.6.6.4.2.7"><span class="term">Label</span></dt><dd><p>
      Metadata stored on the NVDIMM, such as namespace definitions. This can be
      accessed using DSMs.
     </p></dd><dt id="id-1.3.6.6.4.2.8"><span class="term">Device-specific method (DSM)</span></dt><dd><p>
      ACPI method to access the firmware on an NVDIMM.
     </p></dd></dl></div></section><section class="sect1" id="sec-nvdimm-uses" data-id-title="Use cases"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">36.3 </span><span class="title-name">Use cases</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-uses">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect2" id="sec-nvdimm-uses-pmem" data-id-title="PMEM with DAX"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">36.3.1 </span><span class="title-name">PMEM with DAX</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-uses-pmem">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This form of memory access is
    <span class="emphasis"><em>not</em></span> transactional. In the event of a power outage or
    other system failure, data may not be written into storage. PMEM storage is
    only suitable if the application can handle the situation of partially
    written data.
   </p><section class="sect3" id="id-1.3.6.6.5.2.3" data-id-title="Applications that benefit from large amounts of byte-addressable storage"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">36.3.1.1 </span><span class="title-name">
     Applications that benefit from large amounts of byte-addressable storage</span></span> <a title="Permalink" class="permalink" href="#id-1.3.6.6.5.2.3">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     If the server will host an application that can directly use large amounts
     of fast storage on a byte-by-byte basis, the programmer can use the <code class="literal">mmap</code>
     system call to place blocks of persistent memory directly into the
     application's address space, without using any additional system RAM.
    </p></section><section class="sect3" id="id-1.3.6.6.5.2.4" data-id-title="Avoiding use of the kernel page cache"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">36.3.1.2 </span><span class="title-name">Avoiding use of the kernel page cache</span></span> <a title="Permalink" class="permalink" href="#id-1.3.6.6.5.2.4">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Avoid using the kernel page cache to conserve the use of RAM for the page cache, and instead
     give it to your applications. For instance, non-volatile memory could be
     dedicated to holding virtual machine (VM) images. As these would not be
     cached, this would reduce the cache usage on the host, allowing more VMs
     per host.
    </p></section></section><section class="sect2" id="id-1.3.6.6.5.3" data-id-title="PMEM with BTT"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">36.3.2 </span><span class="title-name">PMEM with BTT</span></span> <a title="Permalink" class="permalink" href="#id-1.3.6.6.5.3">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This is useful when you want to use the persistent memory on a set of
    NVDIMMs as a disk-like pool of fast storage. For example, placing
    the file system journal on PMEM with BTT increases the reliability
    of file system recovery after a power failure or other sudden
    interruption (see <a class="xref" href="#sec-nvdimm-setup-btt" title="36.5.3. Creating a PMEM namespace with BTT">Section 36.5.3, “Creating a PMEM namespace with BTT”</a>).
   </p><p>
    To applications, such devices appear as fast SSDs and can be used
    like any other storage device. For example, LVM can be layered on top of
    the persistent memory and will work as normal.
   </p><p>
    The advantage of BTT is that sector write atomicity is guaranteed, so even
    sophisticated applications that depend on data integrity will keep
    working. Media error reporting works through standard error-reporting
    channels.
   </p></section></section><section class="sect1" id="sec-nvdimm-tools" data-id-title="Tools for managing persistent memory"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">36.4 </span><span class="title-name">Tools for managing persistent memory</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-tools">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To manage persistent memory, it is necessary to install the
   <code class="literal">ndctl</code> package. This also installs the
   <code class="filename">libndctl</code> package, which provides a set of user space
   libraries to configure NVDIMMs.
  </p><p>
   These tools work via the <code class="filename">libnvdimm</code> library, which
   supports three types of NVDIMM:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     PMEM
    </p></li><li class="listitem"><p>
     BLK
    </p></li><li class="listitem"><p>
     Simultaneous PMEM and BLK
    </p></li></ul></div><p>
   The <code class="command">ndctl</code> utility has a helpful set of
   <code class="command">man</code> pages, accessible with the command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">ndctl help <em class="replaceable">subcommand</em></code></pre></div><p>
   To see a list of available subcommands, use:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">ndctl --list-cmds</code></pre></div><p>
   The available subcommands include:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.6.6.6.10.1"><span class="term">version</span></dt><dd><p>
      Displays the current version of the NVDIMM support tools.
     </p></dd><dt id="id-1.3.6.6.6.10.2"><span class="term">enable-namespace</span></dt><dd><p>
      Makes the specified namespace available for use.
     </p></dd><dt id="id-1.3.6.6.6.10.3"><span class="term">disable-namespace</span></dt><dd><p>
      Prevents the specified namespace from being used.
     </p></dd><dt id="id-1.3.6.6.6.10.4"><span class="term">create-namespace</span></dt><dd><p>
      Creates a new namespace from the specified storage devices.
     </p></dd><dt id="id-1.3.6.6.6.10.5"><span class="term">destroy-namespace</span></dt><dd><p>
      Removes the specified namespace.
     </p></dd><dt id="id-1.3.6.6.6.10.6"><span class="term">enable-region</span></dt><dd><p>
      Makes the specified region available for use.
     </p></dd><dt id="id-1.3.6.6.6.10.7"><span class="term">disable-region</span></dt><dd><p>
      Prevents the specified region from being used.
     </p></dd><dt id="id-1.3.6.6.6.10.8"><span class="term">zero-labels</span></dt><dd><p>
      Erases the metadata from a device.
     </p></dd><dt id="id-1.3.6.6.6.10.9"><span class="term">read-labels</span></dt><dd><p>
      Retrieves the metadata of the specified device.
     </p></dd><dt id="id-1.3.6.6.6.10.10"><span class="term">list</span></dt><dd><p>
      Displays available devices.
     </p></dd><dt id="id-1.3.6.6.6.10.11"><span class="term">help</span></dt><dd><p>
      Displays information about using the tool.
     </p></dd></dl></div></section><section class="sect1" id="sec-nvdimm-setup" data-id-title="Setting up persistent memory"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">36.5 </span><span class="title-name">Setting up persistent memory</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-setup">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect2" id="sec-nvdimm-setup-view" data-id-title="Viewing available NVDIMM storage"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">36.5.1 </span><span class="title-name">Viewing available NVDIMM storage</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-setup-view">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="command">ndctl</code> <code class="literal">list</code> command can be used to
    list all available NVDIMMs in a system.
   </p><p>
    In the following example, the system has three NVDIMMs, which are in a
    single, triple-channel interleaved set.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">ndctl list --dimms</code>

[
 {
  "dev":"nmem2",
  "id":"8089-00-0000-12325476"
 },
 {
  "dev":"nmem1",
  "id":"8089-00-0000-11325476"
 },
 {
  "dev":"nmem0",
  "id":"8089-00-0000-10325476"
 }
]</pre></div><p>
    With a different parameter, <code class="command">ndctl</code>
    <code class="literal">list</code> will also list the available regions.
   </p><div id="id-1.3.6.6.7.2.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
     Regions may not appear in numerical order.
    </p></div><p>
    Note that although there are only three NVDIMMs, they appear as four
    regions.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">ndctl list --regions</code>

[
 {
  "dev":"region1",
  "size":68182605824,
  "available_size":68182605824,
  "type":"blk"
 },
 {
  "dev":"region3",
  "size":202937204736,
  "available_size":202937204736,
  "type":"pmem",
  "iset_id":5903239628671731251
  },
  {
   "dev":"region0",
   "size":68182605824,
   "available_size":68182605824,
   "type":"blk"
  },
  {
   "dev":"region2",
   "size":68182605824,
   "available_size":68182605824,
   "type":"blk"
  }
]</pre></div><p>
    The space is available in two different forms: either as three separate 64
    regions of type BLK, or as one combined 189 GB region of type PMEM which
    presents all the space on the three interleaved NVDIMMs as a single volume.
   </p><p>
    Note that the displayed value for <code class="literal">available_size</code> is the
    same as that for <code class="literal">size</code>. This means that none of the space
    has been allocated yet.
   </p></section><section class="sect2" id="sec-nvdimm-setup-dax" data-id-title="Configuring the storage as a single PMEM namespace with DAX"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">36.5.2 </span><span class="title-name">Configuring the storage as a single PMEM namespace with DAX</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-setup-dax">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    For the first example, we will configure our three NVDIMMs into a single
    PMEM namespace with Direct Access (DAX).
   </p><p>
    The first step is to create a new namespace.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">ndctl create-namespace --type=<em class="replaceable">pmem</em> --mode=<em class="replaceable">fsdax</em> --map=<em class="replaceable">memory</em></code>
{
 "dev":"namespace3.0",
 "mode":"memory",
 "size":199764213760,
 "uuid":"dc8ebb84-c564-4248-9e8d-e18543c39b69",
 "blockdev":"pmem3"
}</pre></div><p>
    This creates a block device <code class="filename">/dev/pmem3</code>, which supports
    DAX. The <code class="literal">3</code> in the device name is inherited from the
    parent region number, in this case <code class="filename">region3</code>.
   </p><p>
    The <code class="option">--map=memory</code> option sets aside part of the PMEM
    storage space on the NVDIMMs so that it can be used to allocate internal
    kernel data structures called <code class="literal">struct pages</code>. This allows
    the new PMEM namespace to be used with features such as <code class="literal">O_DIRECT
    I/O</code> and <code class="literal">RDMA</code>.
   </p><p>
    The reservation of some persistent memory for kernel data structures is why
    the resulting PMEM namespace has a smaller capacity than the parent PMEM
    region.
   </p><p>
    Next, we verify that the new block device is available to the operating
    system:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">fdisk -l /dev/<em class="replaceable">pmem3</em></code>
Disk /dev/pmem3: 186 GiB, 199764213760 bytes, 390164480 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes</pre></div><p>
    Before it can be used, like any other drive, it must be formatted. In this
    example, we format it with XFS:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">mkfs.xfs /dev/<em class="replaceable">pmem3</em></code>
meta-data=/dev/pmem3      isize=256    agcount=4, agsize=12192640 blks
         =                sectsz=4096  attr=2, projid32bit=1
         =                crc=0        finobt=0, sparse=0
data     =                bsize=4096   blocks=48770560, imaxpct=25
         =                sunit=0      swidth=0 blks
naming   =version 2       bsize=4096   ascii-ci=0 ftype=1
log      =internal log    bsize=4096   blocks=23813, version=2
         =                sectsz=4096  sunit=1 blks, lazy-count=1
realtime =none            extsz=4096   blocks=0, rtextents=0</pre></div><p>
    Next, we can mount the new drive onto a directory:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">mount -o dax /dev/<em class="replaceable">pmem3</em> /mnt/<em class="replaceable">pmem3</em></code></pre></div><p>
    Then we can verify that we now have a DAX-capable device:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">mount | grep dax</code>
/dev/pmem3 on /mnt/pmem3 type xfs (rw,relatime,attr2,dax,inode64,noquota)</pre></div><p>
    The result is that we now have a PMEM namespace formatted with the XFS file
    system and mounted with DAX.
   </p><p>
    Any <code class="literal">mmap()</code> calls to files in that file system will
    return virtual addresses that directly map to the persistent memory on our
    NVDIMMs, bypassing the page cache.
   </p><p>
    Any <code class="literal">fsync</code> or <code class="literal">msync</code> calls on files in
    that file system will still ensure that modified data has been fully
    written to the NVDIMMs. These calls flush the processor cache lines
    associated with any pages that have been modified in user space via
    <code class="literal">mmap</code> mappings.
   </p><section class="sect3" id="sec-nvdimm-setup-deldax" data-id-title="Removing a namespace"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">36.5.2.1 </span><span class="title-name">Removing a namespace</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-setup-deldax">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Before creating any other type of volume that uses the same storage, we
     must unmount and then remove this PMEM volume.
    </p><p>
     First, unmount it:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">umount /mnt/<em class="replaceable">pmem3</em></code></pre></div><p>
     Then disable the namespace:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">ndctl disable-namespace <em class="replaceable">namespace3.0</em></code>
disabled 1 namespace</pre></div><p>
     Then delete it:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">ndctl destroy-namespace <em class="replaceable">namespace3.0</em></code>
destroyed 1 namespace</pre></div></section></section><section class="sect2" id="sec-nvdimm-setup-btt" data-id-title="Creating a PMEM namespace with BTT"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">36.5.3 </span><span class="title-name">Creating a PMEM namespace with BTT</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-setup-btt">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     BTT provides sector write atomicity, which makes it a good choice
     when you need data protection, , for Ext4 and XFS journals.
     If there is a power failure, the journals
     are protected and should be recoverable. The following examples
     show how to create a PMEM namespace with BTT in sector mode, and how
     to place the file system journal in this namespace.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">ndctl create-namespace --type=pmem --mode=sector</code>
{
 "dev":"namespace3.0",
 "mode":"sector",
 "uuid":"51ab652d-7f20-44ea-b51d-5670454f8b9b",
 "sector_size":4096,
 "blockdev":"pmem3s"
}</pre></div><p>
    Next, verify that the new device is present:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">fdisk -l /dev/<em class="replaceable">pmem3s</em></code>
Disk /dev/pmem3s: 188.8 GiB, 202738135040 bytes, 49496615 sectors
Units: sectors of 1 * 4096 = 4096 bytes
Sector size (logical/physical): 4096 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes</pre></div><p>
    Like the DAX-capable PMEM namespace we previously configured, this
    BTT-capable PMEM namespace consumes all the available storage on the
    NVDIMMs.
   </p><div id="id-1.3.6.6.7.4.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
     The trailing <code class="literal">s</code> in the device name
     (<code class="filename">/dev/<em class="replaceable">pmem3s</em></code>) stands for
     <code class="literal">sector</code> and can be used to easily distinguish namespaces
     that are configured to use the BTT.
    </p></div><p>
    The volume can be formatted and mounted as in the previous example.
   </p><p>
    The PMEM namespace shown here cannot use DAX. Instead it uses the BTT to
    provide <span class="emphasis"><em>sector write atomicity</em></span>. On each sector write
    through the PMEM block driver, the BTT will allocate a new sector to
    receive the new data. The BTT atomically updates its internal mapping
    structures after the new data is fully written so the newly written data
    will be available to applications. If the power fails at any point during
    this process, the write will be lost and the application will
    have access to its old data, still intact. This prevents the condition
    known as <span class="quote">“<span class="quote">torn sectors</span>”</span>.
   </p><p>
    This BTT-enabled PMEM namespace can be formatted and used with a file system
    same as any other standard block device. It cannot be used with DAX.
    However, <code class="literal">mmap</code> mappings for files on this block device
    will use the page cache.
   </p></section><section class="sect2" id="sec-nvdimm-fs-journal" data-id-title="Placing the file system journal on PMEM/BTT"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">36.5.4 </span><span class="title-name">Placing the file system journal on PMEM/BTT</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-fs-journal">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      When you place the file system journal on a separate device, it
      must use the same file system block size as the file system. Most
      likely this is 4096, and you can find the block size with this
      command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">blockdev --getbsz /dev/<em class="replaceable">sda3</em></code></pre></div><p>
      The following example creates a new Ext4 journal on a separate
      NVDIMM device, creates the file system on a SATA device, then
      attaches the new file system to the journal:
 </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">mke2fs -b 4096 -O journal_dev /dev/<em class="replaceable">pmem3s</em></code>
<code class="prompt root"># </code><code class="command">mkfs.ext4 -J device=/dev/<em class="replaceable">pmem3s</em> /dev/<em class="replaceable">sda3</em></code></pre></div><p>
      The following example creates a new XFS file system on a SATA drive,
      and creates the journal on a separate NVDIMM device:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">mkfs.xfs -l logdev=/dev/<em class="replaceable">pmem3s </em> /dev/<em class="replaceable">sda3</em></code></pre></div><p>
    See <code class="command">man 8 mkfs.ext4</code> and <code class="command">man 8 mkfs.ext4</code> for detailed information about options.
</p></section></section><section class="sect1" id="sec-nvdimm-moreinfo" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">36.6 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-nvdimm-moreinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/hardware_nvdimm.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   More about this topic can be found in the following list:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <a class="link" href="https://nvdimm.wiki.kernel.org/" target="_blank">
      Persistent Memory Wiki</a>
    </p><p>
     Contains instructions for configuring NVDIMM systems, information about
     testing, and links to specifications related to NVDIMM enabling. This site
     is developing as NVDIMM support in Linux is developing.
    </p></li><li class="listitem"><p>
     <a class="link" href="https://pmem.io/" target="_blank">Persistent Memory Programming</a>
    </p><p>
     Information about configuring, using and programming systems with
     non-volatile memory under Linux and other operating systems. Covers the
     NVM Library (NVML), which aims to provide useful APIs for programming with
     persistent memory in user space.
    </p></li><li class="listitem"><p>
     <a class="link" href="https://www.kernel.org/doc/Documentation/nvdimm/nvdimm.txt" target="_blank">
      LIBNVDIMM: Non-Volatile Devices</a>
    </p><p>
     Aimed at kernel developers, this is part of the Documentation directory in
     the current Linux kernel tree. It talks about the different kernel modules
     involved in NVDIMM enablement, lays out technical details of the
     kernel implementation, and talks about the
     <code class="filename">sysfs</code>interface to the kernel that is used by the
     <code class="command">ndctl</code> tool.
    </p></li><li class="listitem"><p>
     <a class="link" href="https://github.com/pmem/ndctl" target="_blank">GitHub: pmem/ndctl</a>
    </p><p>
     Utility library for managing the <code class="command">libnvdimm</code> subsystem
     in the Linux kernel. Also contains user space libraries, as well as unit
     tests and documentation.
    </p></li></ul></div></section></section></div><div class="part" id="part-services" data-id-title="Services"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part V </span><span class="title-name">Services </span></span><a title="Permalink" class="permalink" href="#part-services">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_administration.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#cha-yast-serviceman"><span class="title-number">37 </span><span class="title-name">Service management with YaST</span></a></span></li><dd class="toc-abstract"><p>
    YaST provides a service manager for controlling the default system
    target, services, displaying service status, and reading the log file. New
    in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP6</span></span> is YaST support for <code class="systemitem">systemd</code> socket-based
    services activation, which configures services to start on demand.
   </p></dd><li><span class="chapter"><a href="#cha-ntp"><span class="title-number">38 </span><span class="title-name">Time synchronization with NTP</span></a></span></li><dd class="toc-abstract"><p>
        The NTP (network time protocol) mechanism is a protocol for
        synchronizing the system time over the network. First, a machine can
        obtain the time from a server that is a reliable time source. Second, a
        machine can itself act as a time source for other computers in the
        network. The goal is twofold—maintaining the absolute time and
        synchronizing the system time of all machines within a network.
      </p></dd><li><span class="chapter"><a href="#cha-dns"><span class="title-number">39 </span><span class="title-name">The domain name system</span></a></span></li><dd class="toc-abstract"><p>
    DNS (domain name system) is needed to resolve the domain names and host
    names into IP addresses. In this way, the IP address 192.168.2.100 is assigned to
    the host name <code class="literal">jupiter</code>, for example. Before setting up your
    own name server, read the general information about DNS in
    <a class="xref" href="#sec-network-nameres" title="23.3. Name resolution">Section 23.3, “Name resolution”</a>. The following configuration
    examples refer to BIND, the default DNS server.
   </p></dd><li><span class="chapter"><a href="#cha-dhcp"><span class="title-number">40 </span><span class="title-name">DHCP</span></a></span></li><dd class="toc-abstract"><p>
    The purpose of the <span class="emphasis"><em>Dynamic Host Configuration Protocol</em></span>
    (DHCP) is to assign network settings centrally (from a server) rather than
    configuring them locally on every workstation. A host configured to use
    DHCP does not have control over its own static address. It is enabled to
    configure itself automatically according to directions from
    the server. If you use the NetworkManager on the client side, you do not need to
    configure the client. This is useful if you have changing environments and
    only one interface active at a time. Never use NetworkManager on a machine that runs
    a DHCP server.
   </p></dd><li><span class="chapter"><a href="#cha-slp"><span class="title-number">41 </span><span class="title-name">SLP</span></a></span></li><dd class="toc-abstract"><p>
    Configuring a network client requires detailed knowledge about services
    provided over the network (such as printing or LDAP, for example). To make
    it easier to configure such services on a network client, the
    <span class="quote">“<span class="quote">service location protocol</span>”</span> (SLP) was developed. SLP makes the
    availability and configuration data of selected services known to all
    clients in the local network. Applications that support SLP can use this
    information to be configured automatically.
   </p></dd><li><span class="chapter"><a href="#cha-apache2"><span class="title-number">42 </span><span class="title-name">The Apache HTTP server</span></a></span></li><dd class="toc-abstract"><p>
    According to the surveys from <a class="link" href="https://www.netcraft.com/" target="_blank">https://www.netcraft.com/</a>
    and <a class="link" href="https://w3techs.com/" target="_blank">https://w3techs.com/</a>, the Apache HTTP Server
    (Apache) is one of the world's most popular Web servers. Developed by the
    Apache Software Foundation
    (<a class="link" href="https://www.apache.org/" target="_blank">https://www.apache.org/</a>), it is available for
    most operating systems. <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> includes Apache version 2.4. This
    chapter describes how to install, configure and operate Apache. It also
    shows how to use additional modules, such as SSL, and how to troubleshoot
    Apache.
   </p></dd><li><span class="chapter"><a href="#cha-ftp"><span class="title-number">43 </span><span class="title-name">Setting up an FTP server with YaST</span></a></span></li><dd class="toc-abstract"><p>
    Using the YaST <span class="guimenu">FTP Server</span> module, you can configure
    your machine to function as an FTP (File Transfer Protocol) server.
    Anonymous and/or authenticated users can connect to your machine and
    download files using the FTP protocol. Depending on the configuration, they
    can also upload files to the FTP server. YaST uses vsftpd (Very Secure
    FTP Daemon).
   </p></dd><li><span class="chapter"><a href="#cha-squid"><span class="title-number">44 </span><span class="title-name">Squid caching proxy server</span></a></span></li><dd class="toc-abstract"><p>
    Squid is a widely used caching proxy server for Linux and Unix platforms.
    This means that it stores requested Internet objects, such as data on a Web
    or FTP server, on a machine that is closer to the requesting workstation
    than the server. It can be set up in multiple hierarchies to assure optimal
    response times and low bandwidth usage, even in modes that are transparent
    to end users.
   </p></dd><li><span class="chapter"><a href="#cha-wbem"><span class="title-number">45 </span><span class="title-name">Web Based Enterprise Management using SFCB</span></a></span></li><dd class="toc-abstract"><p/></dd></ul></div><section class="chapter" id="cha-yast-serviceman" data-id-title="Service management with YaST"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">37 </span><span class="title-name">Service management with YaST</span></span> <a title="Permalink" class="permalink" href="#cha-yast-serviceman">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_serviceman.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    YaST provides a service manager for controlling the default system
    target, services, displaying service status, and reading the log file. New
    in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP6</span></span> is YaST support for <code class="systemitem">systemd</code> socket-based
    services activation, which configures services to start on demand.
   </p></div></div></div></div><p>
  <code class="systemitem">systemd</code> supports starting services with socket-based activation, for starting
  services on demand. These services have two unit types: service and socket.
  For example, CUPS is controlled by <code class="filename">cups.service</code> and
  <code class="filename">cups.socket</code>. YaST allows you to select the type of
  service start-up you want to use.
 </p><p>
  <a class="xref" href="#fig-yast-serviceman" title="YaST service manager">Figure 37.1, “YaST service manager”</a> shows the options in the Start Mode
  drop-down box: <span class="guimenu">On Boot</span>, <span class="guimenu">On Demand</span>, and
  <span class="guimenu">Manually</span>. Select <span class="guimenu">On Demand</span> for
  socket-based activation. This opens a listening network socket, and the
  service starts when there is a request.
 </p><div class="figure" id="fig-yast-serviceman"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_servicemanager.png"><img src="images/yast2_servicemanager.png" width="100%" alt="YaST service manager" title="YaST service manager"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 37.1: </span><span class="title-name">YaST service manager </span></span><a title="Permalink" class="permalink" href="#fig-yast-serviceman">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_serviceman.xml" title="Edit source document"> </a></div></div></div><p>
  The <span class="guimenu">On Demand</span> option is visible only for services that
  support it. Currently this is a small subset of services, such as CUPS, dbus,
  iscsid, iscsiuio, multipathd, pcscd, rpcbind, TFTP, virtlockd, virtlogd. See
  <code class="command">man 5 systemd.socket</code> for detailed information on how
  socket activation works.
 </p></section><section class="chapter" id="cha-ntp" data-id-title="Time synchronization with NTP"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">38 </span><span class="title-name">Time synchronization with NTP</span></span> <a title="Permalink" class="permalink" href="#cha-ntp">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
        The NTP (network time protocol) mechanism is a protocol for
        synchronizing the system time over the network. First, a machine can
        obtain the time from a server that is a reliable time source. Second, a
        machine can itself act as a time source for other computers in the
        network. The goal is twofold—maintaining the absolute time and
        synchronizing the system time of all machines within a network.
      </p></div></div></div></div><p>
    Maintaining an exact system time is important in many situations. The
    built-in hardware clock does often not meet the requirements of applications
    such as databases or clusters. Manual correction of the system time would
    lead to severe problems because, for example, a backward leap can cause
    malfunction of critical applications. Within a network, it is usually
    necessary to synchronize the system time of all machines, but manual time
    adjustment is a bad approach. NTP provides a mechanism to solve these
    problems. The NTP service continuously adjusts the system time with reliable
    time servers in the network. It further enables the management of local
    reference clocks, such as radio-controlled clocks.
  </p><p>
    Since <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15, <code class="systemitem">chrony</code> is the default implementation of NTP.
    <code class="systemitem">chrony</code> includes two parts; <code class="systemitem">chronyd</code> is a daemon that can be started at
    boot time and <code class="command">chronyc</code> is a command line interface program to monitor the
    performance of <code class="systemitem">chronyd</code>, and to change operating parameters at runtime.
  </p><p>
    Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 15.2, the YaST module for NTP client
    configuration configures the systemd-timer instead of the cron daemon to
    execute <code class="systemitem">chrony</code>, when it is not configured to run as a daemon.
  </p><section class="sect1" id="sec-ntp-yast" data-id-title="Configuring an NTP client with YaST"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">38.1 </span><span class="title-name">Configuring an NTP client with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-ntp-yast">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The NTP daemon (<code class="systemitem">chronyd</code>) coming with the <code class="systemitem">chrony</code>
      package is preset to use the local computer hardware clock as a time
      reference. The precision of the hardware clock heavily depends on its time
      source. For example, an atomic clock or GPS receiver is a precise time
      source, while a common RTC chip is not a reliable time source. YaST
      simplifies the configuration of an NTP client.
    </p><p>
      In the YaST NTP client configuration (<span class="guimenu">Network
      Services</span> › <span class="guimenu">NTP Configuration</span>)
      window, you can specify when to start the NTP daemon, the type of the
      configuration source, and add custom time servers.
    </p><div class="figure" id="id-1.3.7.3.6.4"><div class="figure-contents"><div class="mediaobject"><a href="images/ntp_client.png"><img src="images/ntp_client.png" width="70%" alt="NTP configuration window" title="NTP configuration window"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 38.1: </span><span class="title-name">NTP configuration window </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.3.6.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div><section class="sect2" id="id-1.3.7.3.6.5" data-id-title="NTP daemon start"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">38.1.1 </span><span class="title-name">NTP daemon start</span></span> <a title="Permalink" class="permalink" href="#id-1.3.7.3.6.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        You can choose from three options for when to start the NTP daemon:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.3.6.5.3.1"><span class="term"><span class="guimenu">Only manually</span></span></dt><dd><p>
              Select <span class="guimenu">Only Manually</span> to manually start the
              <code class="systemitem">chrony</code> daemon.
            </p></dd><dt id="id-1.3.7.3.6.5.3.2"><span class="term"><span class="guimenu">Synchronize without daemon</span></span></dt><dd><p>
              Select <span class="guimenu">Synchronize without Daemon</span> to set the
              system time periodically without a permanently running <code class="systemitem">chrony</code>.
              You can set the <span class="guimenu">Interval of the Synchronization in
              Minutes</span>.
            </p></dd><dt id="id-1.3.7.3.6.5.3.3"><span class="term"><span class="guimenu">Now and on boot</span></span></dt><dd><p>
              Select <span class="guimenu">Now and On Boot</span> to start <code class="systemitem">chronyd</code>
              automatically when the system is booted. This setting is
              recommended.
            </p></dd></dl></div></section><section class="sect2" id="id-1.3.7.3.6.6" data-id-title="Type of the configuration source"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">38.1.2 </span><span class="title-name">Type of the configuration source</span></span> <a title="Permalink" class="permalink" href="#id-1.3.7.3.6.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        In the <span class="guimenu">Configuration Source</span> drop-down box, select
        either <span class="guimenu">Dynamic</span> or <span class="guimenu">Static</span>. Set
        <span class="guimenu">Static</span> if your server uses only a fixed set of
        (public) NTP servers, while <span class="guimenu">Dynamic</span> is better if your
        internal network offers NTP servers via DHCP.
      </p></section><section class="sect2" id="sec-net-ntp-yast-new-sync" data-id-title="Configure time servers"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">38.1.3 </span><span class="title-name">Configure time servers</span></span> <a title="Permalink" class="permalink" href="#sec-net-ntp-yast-new-sync">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Time servers for the client to query are listed in the lower part of the
        <span class="guimenu">NTP Configuration</span> window. Modify this list as needed
        with <span class="guimenu">Add</span>, <span class="guimenu">Edit</span>, and
        <span class="guimenu">Delete</span>.
      </p><p>
        Click <span class="guimenu">Add</span> to add a new time server:
      </p><div class="figure" id="id-1.3.7.3.6.7.4"><div class="figure-contents"><div class="mediaobject"><a href="images/ntp_client_serveradd.png"><img src="images/ntp_client_serveradd.png" width="70%" alt="Adding a time server" title="Adding a time server"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 38.2: </span><span class="title-name">Adding a time server </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.3.6.7.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            In the <span class="guimenu">Address</span> field, type the URL of the time
            server or pool of time servers with which you want to synchronize
            the machine time. After the URL is complete, click
            <span class="guimenu">Test</span> to verify that it points to a valid time
            source.
          </p></li><li class="step"><p>
            Activate <span class="guimenu">Quick Initial Sync</span> to speed up the time
            synchronization by sending more requests at the <code class="systemitem">chronyd</code> daemon
            start.
          </p></li><li class="step"><p>
            Activate <span class="guimenu">Start Offline</span> to speed up the boot time
            on systems that start the <code class="systemitem">chronyd</code> daemon automatically and may not
            have an Internet connection at boot time. This option is useful, for
            example, for laptops with network connections managed by NetworkManager.
          </p></li><li class="step"><p>
            Confirm with <span class="guimenu">OK</span>.
          </p></li></ol></div></div></section></section><section class="sect1" id="sec-net-xntp-netconf" data-id-title="Manually configuring NTP in the network"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">38.2 </span><span class="title-name">Manually configuring NTP in the network</span></span> <a title="Permalink" class="permalink" href="#sec-net-xntp-netconf">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <code class="systemitem">chrony</code> reads its configuration from the
      <code class="filename">/etc/chrony.conf</code> file. To keep the computer clock
      synchronized, you need to tell <code class="systemitem">chrony</code> what time servers to use. You can
      use specific server names or IP addresses, for example:
    </p><div class="verbatim-wrap"><pre class="screen">0.suse.pool.ntp.org
1.suse.pool.ntp.org
2.suse.pool.ntp.org
3.suse.pool.ntp.org</pre></div><p>
      You can also specify a <span class="emphasis"><em>pool</em></span> name. Pool name resolves
      to several IP addresses:
    </p><div class="verbatim-wrap"><pre class="screen">pool pool.ntp.org</pre></div><div id="id-1.3.7.3.7.6" data-id-title="Computers on the same network" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Computers on the same network</div><p>
        To synchronize time on multiple computers on the same network, we do not
        recommend to synchronize them all with an external server. A good
        practice is to make one computer the time server which is synchronized
        with an external time server, and the other computers act as its
        clients. Add a <code class="literal">local</code> directive to the server's
        <code class="filename">/etc/chrony.conf</code> to distinguish it from an
        authoritative time server:
      </p><div class="verbatim-wrap"><pre class="screen">local stratum 10</pre></div></div><p>
      To start <code class="systemitem">chrony</code>, run:
    </p><div class="verbatim-wrap"><pre class="screen">systemctl start chronyd.service</pre></div><p>
      After initializing <code class="systemitem">chronyd</code>, it takes a while before the time is
      stabilized and the drift file for correcting the local computer clock is
      created. With the drift file, the systematic error of the hardware clock
      can be computed when the computer is powered on. The correction is used
      immediately, resulting in a higher stability of the system time.
    </p><p>
      To enable the service so that <code class="systemitem">chrony</code> starts automatically at boot time,
      run:
    </p><div class="verbatim-wrap"><pre class="screen">systemctl enable chronyd.service</pre></div><div id="id-1.3.7.3.7.12" data-id-title="Conflicting yast-timesync.service service" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Conflicting <code class="systemitem">yast-timesync.service</code> service</div><p>
        Besides the <code class="systemitem">chronyd.service</code>
        service, <span class="productname"><span class="phrase">SLES</span></span> includes
        <code class="systemitem">yast-timesync.service</code>.
        <code class="systemitem">yast-timesync.service</code> is
        triggered by a timer every 5 minutes and runs <code class="systemitem">chronyd</code> with the
        <code class="option">-q</code> option to set the system time and exit. Because only
        one instance of <code class="systemitem">chronyd</code> can be running at any given time, do not
        enable or start both <code class="systemitem">chronyd</code>-related services at the same time.
      </p></div></section><section class="sect1" id="ntp-configure-nts" data-id-title="Configuring NTS"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">38.3 </span><span class="title-name">Configuring NTS</span></span> <a title="Permalink" class="permalink" href="#ntp-configure-nts">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Network Time Protocol (NTP) is a protocol used to synchronize and keep the system time of
      one or more hosts in the network accurate. This article describes how to
      secure NTP using Network Time Security (NTS).
    </p><p>
      NTP protocol does not introduce security mechanism to make the
      communication between the time server and client authenticated and
      encrypted. Network Time Security (NTS) is an extension that improves the security of NTP.
      <code class="systemitem">chrony</code> supports NTS and can authenticate time sources and protect
      against certain network attacks.
    </p><p>
      The following procedures outline how to configure the time server and
      client machine for secure time synchronization.
    </p><div class="procedure" id="configure-nts-procedure" data-id-title="Configuring NTS time server"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 38.1: </span><span class="title-name">Configuring NTS time server </span></span><a title="Permalink" class="permalink" href="#configure-nts-procedure">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p><span class="step-optional">(Optional)</span> 
          It is a good idea to configure the time server to update its time via
          NTS. This ensures secure time synchronization from the very beginning
          of the synchronization chain. Comment out any existing time sources in
          <code class="filename">/etc/chrony.conf</code> that do not support NTS and add
          at least one that supports NTS, for example:
        </p><div class="verbatim-wrap"><pre class="screen">server time.cloudflare.com iburst nts</pre></div><div id="id-1.3.7.3.8.5.2.3" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
            The <code class="option">nts</code> option requests NTS connection if it is
            available, otherwise it falls back to NTP if NTS is not available.
          </p></div></li><li class="step"><p>
          Restart the <code class="systemitem">chronyd</code> service.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl restart chronyd.srvice</code></pre></div></li><li class="step"><p>
          Verify the configured time sources.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">chronyc sources -v</code>
MS Name/IP address         Stratum Poll Reach LastRx Last sample               
===============================================================================
^? time.cloudflare.com           3   6     1     2   -947ms[ -947ms] +/-   12ms
^? pyrrha.fi.muni.cz             2   6     1     1   -948ms[ -948ms] +/-   39ms
^* whitesoft-intex16.c.cbsn&gt;     1   6     1     2   -948ms[ -948ms] +/- 5444us
^? mail.combatostrich.dev        2   6     1     1   -948ms[ -948ms] +/-   28ms</pre></div><div id="id-1.3.7.3.8.5.4.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
            The line that starts with <code class="literal">^*</code> includes the time
            source that was selected as best.
          </p></div><p>
          Verify that the configured time source uses the NTS mode.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">chronyc -N authdata</code>
Name/IP address             Mode KeyID Type KLen Last Atmp  NAK Cook CLen
=========================================================================
[...]
time.cloudflare.com          NTS     1   15  256    3    0    0    8   96</pre></div></li><li class="step"><p>
          Verify that the server configuration includes the
          <code class="option">allow</code> option that specifies which clients can
          synchronize time with the time server, for example:
        </p><div class="verbatim-wrap"><pre class="screen">allow 192.168.1.0/24</pre></div></li><li class="step"><p><span class="step-optional">(Optional)</span> 
          If the time server is running behind a firewall, allow communication
          on ports for both NTP and NTS. They are 123 and 4460 by default.
        </p></li><li class="step"><p>
          Obtain a TLS certificate and a corresponding private key and copy them
          to <code class="filename">/var/lib/chrony/</code>. Verify that they are
          readable by <code class="systemitem">chrony</code>, for example:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> install -m 0440 -o chrony -g chrony <em class="replaceable">nts.key</em> /var/lib/chrony/
<code class="prompt user">&gt; </code><code class="command">sudo</code> install -m 0440 -o chrony -g chrony <em class="replaceable">nts.crt</em> /var/lib/chrony/</pre></div><div id="id-1.3.7.3.8.5.7.3" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
            Find detailed information about TLS certificates in a
            <a class="link" href="https://documentation.suse.com/smart/security/html/tls-certificates/index.html" target="_blank">dedicated
            article.</a>
          </p></div></li><li class="step"><p>
          Edit <code class="filename">/etc/chrony.conf</code> and verify that the
          <code class="option">ntsdumpdir /var/lib/chrony</code> option is active. Then
          append the paths to the TLS key and certificate.
        </p><div class="verbatim-wrap"><pre class="screen">ntsdumpdir /var/lib/chrony
ntsserverkey /var/lib/chrony/nts.key
ntsservercert /var/lib/chrony/nts.crt</pre></div></li><li class="step"><p>
          Restart the <code class="systemitem">chronyd</code> service.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl restart chronyd.service</pre></div></li></ol></div></div><div class="procedure" id="id-1.3.7.3.8.6" data-id-title="Configuring NTS clients"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 38.2: </span><span class="title-name">Configuring NTS clients </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.3.8.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
          Disable existing NTP sources, for example:
        </p><div class="verbatim-wrap"><pre class="screen">#server 192.168.1.1 iburst</pre></div><p>
          The sources configurations are included in
          <code class="filename">/etc/chrony.conf</code> or in files under
          <code class="filename">/etc/chrony.d/</code>.
        </p></li><li class="step"><p>
          The client host needs to trust the Root CA that signed the TLS
          certificate. Find details on how to manage the CA certificate store in
          a
          <a class="link" href="https://documentation.suse.com/smart/security/html/tls-certificates/index.html#tls-certificates-store" target="_blank">dedicated
          article</a>.
        </p></li><li class="step"><p>
          Add the NTS time server source that you configured in
          <a class="xref" href="#configure-nts-procedure" title="Configuring NTS time server">Procedure 38.1, “Configuring NTS time server”</a> to the client <code class="systemitem">chrony</code>
          configuration in <code class="filename">/etc/chrony.conf</code>, for example:
        </p><div class="verbatim-wrap"><pre class="screen">server <em class="replaceable">nts1.example.com</em> iburst nts</pre></div></li><li class="step"><p>
          Restart the <code class="systemitem">chronyd</code> service.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl restart chronyd.service</pre></div></li><li class="step"><p>
          Verify configured time sources on the client and confirm that the
          connection is authenticated.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> chronyc sources -v
<code class="prompt user">&gt; </code><code class="command">sudo</code> chronyc -N authdata</pre></div></li><li class="step"><p>
          On the NTS time server, verify per client statistics about NTS
          connections.
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> chronyc -N clients -k</pre></div></li></ol></div></div></section><section class="sect1" id="ntp-chronyc" data-id-title="Configure chronyd at runtime using chronyc"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">38.4 </span><span class="title-name">Configure <code class="systemitem">chronyd</code> at runtime using <code class="command">chronyc</code></span></span> <a title="Permalink" class="permalink" href="#ntp-chronyc">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      You can use <code class="command">chronyc</code> to change the behavior of <code class="systemitem">chronyd</code> at runtime. It
      also generates status reports about the operation of <code class="systemitem">chronyd</code>.
    </p><p>
      You can run <code class="command">chronyc</code> either in interactive or non-interactive mode. To
      run <code class="command">chronyc</code> interactively, enter <code class="command">chronyc</code> on the command line. It
      displays a prompt and waits for your command input. For example, to check
      how many NTP sources are online or offline, run:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">chronyc</code>
chronyc&gt; activity
200 OK
4 sources online
2 sources offline
1 sources doing burst (return to online)
1 sources doing burst (return to offline)
0 sources with unknown address</pre></div><p>
      To exit <code class="command">chronyc</code>'s prompt, enter <code class="command">quit</code> or
      <code class="command">exit</code>.
    </p><p>
      If you do not need to use the interactive prompt, enter the command
      directly:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">chronyc</code> activity</pre></div><div id="id-1.3.7.3.9.8" data-id-title="Temporary changes" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Temporary changes</div><p>
        Changes made using <code class="command">chronyc</code> are not permanent. They will be lost after
        the next <code class="systemitem">chronyd</code> restart. For permanent changes, modify
        <code class="filename">/etc/chrony.conf</code>.
      </p></div><p>
      For a complete list of <code class="command">chronyc</code> commands, see its man page (<code class="command">man
      1 chronyc</code>).
    </p></section><section class="sect1" id="sec-net-xntp-dynamic" data-id-title="Dynamic time synchronization at runtime"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">38.5 </span><span class="title-name">Dynamic time synchronization at runtime</span></span> <a title="Permalink" class="permalink" href="#sec-net-xntp-dynamic">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Although <code class="systemitem">chronyd</code> starts up normally on a system that boots without a
      network connection, the tool cannot resolve the DNS names of the time
      servers specified in the configuration file.
    </p><p>
      <code class="systemitem">chronyd</code> keeps trying to resolve the time server names specified by the
      <code class="option">server</code>, <code class="option">pool</code>, and <code class="option">peer</code>
      directives in an increasing time interval until it succeeds.
    </p><p>
      If the time server will not be reachable when <code class="systemitem">chronyd</code> is started, you
      can specify the <code class="option">offline</code> option:
    </p><div class="verbatim-wrap"><pre class="screen">server <em class="replaceable">server_address</em> offline</pre></div><p>
      <code class="systemitem">chronyd</code> does not try to poll the server until it is enabled using the
      following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>chronyc online <em class="replaceable">server_address</em></pre></div><p>
      When the <code class="option">auto_offline</code> option is set, <code class="systemitem">chronyd</code> assumes
      that the time server has gone offline when two requests have been sent to
      it without receiving a response. This option avoids the need to run the
      <code class="literal">offline</code> command from <code class="command">chronyc</code> when disconnecting the
      network link.
    </p></section><section class="sect1" id="sec-net-xntp-normal" data-id-title="Setting up a local reference clock"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">38.6 </span><span class="title-name">Setting up a local reference clock</span></span> <a title="Permalink" class="permalink" href="#sec-net-xntp-normal">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The software package <code class="systemitem">chrony</code> relies on other programs (such as
      <code class="systemitem">gpsd</code>) to access the timing data via the SHM or
      SOCK driver. Use the <code class="option">refclock</code> directive in
      <code class="filename">/etc/chrony.conf</code> to specify a hardware reference
      clock to be used as a time source. It has two mandatory parameters: a
      driver name and a driver-specific parameter. The two parameters are
      followed by zero or more <code class="option">refclock</code> options. <code class="systemitem">chronyd</code>
      includes the following drivers:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          PPS - driver for the kernel <code class="literal">pulse per second</code> API.
          For example:
        </p><div class="verbatim-wrap"><pre class="screen">refclock PPS /dev/pps0 lock NMEA refid GPS</pre></div></li><li class="listitem"><p>
          SHM - NTP shared memory driver. For example:
        </p><div class="verbatim-wrap"><pre class="screen">refclock SHM 0 poll 3 refid GPS1
refclock SHM 1:perm=0644 refid GPS2</pre></div></li><li class="listitem"><p>
          SOCK - Unix domain socket driver. For example:
        </p><div class="verbatim-wrap"><pre class="screen">refclock SOCK /var/run/chrony.ttyS0.sock</pre></div></li><li class="listitem"><p>
          PHC - PTP hardware clock driver. For example:
        </p><div class="verbatim-wrap"><pre class="screen">refclock PHC /dev/ptp0 poll 0 dpoll -2 offset -37
refclock PHC /dev/ptp1:nocrossts poll 3 pps</pre></div></li></ul></div><p>
      For more information on individual drivers' options, see <code class="command">man 8
      chrony.conf</code>.
    </p></section><section class="sect1" id="sec-net-xntp-etr" data-id-title="Clock synchronization to an external time reference (ETR)"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">38.7 </span><span class="title-name">Clock synchronization to an external time reference (ETR)</span></span> <a title="Permalink" class="permalink" href="#sec-net-xntp-etr">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/chrony.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Support for clock synchronization to an external time reference (ETR) is
      available. The external time reference sends an oscillator signal and a
      synchronization signal every 2**20 (2 to the power of 20) microseconds to
      keep TOD clocks of all connected servers synchronized.
    </p><p>
      For availability two ETR units can be connected to a machine. If the clock
      deviates for more than the sync-check tolerance all CPUs get a machine
      check that indicates that the clock is not synchronized. If this happens,
      all DASD I/O to XRC enabled devices is stopped until the clock is
      synchronized again.
    </p><p>
      The ETR support is activated via two <code class="literal">sysfs</code> attributes;
      run the following commands as <code class="systemitem">root</code>:
    </p><div class="verbatim-wrap"><pre class="screen">echo 1 &gt; /sys/devices/system/etr/etr0/online
echo 1 &gt; /sys/devices/system/etr/etr1/online</pre></div></section></section><section class="chapter" id="cha-dns" data-id-title="The domain name system"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">39 </span><span class="title-name">The domain name system</span></span> <a title="Permalink" class="permalink" href="#cha-dns">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    DNS (domain name system) is needed to resolve the domain names and host
    names into IP addresses. In this way, the IP address 192.168.2.100 is assigned to
    the host name <code class="literal">jupiter</code>, for example. Before setting up your
    own name server, read the general information about DNS in
    <a class="xref" href="#sec-network-nameres" title="23.3. Name resolution">Section 23.3, “Name resolution”</a>. The following configuration
    examples refer to BIND, the default DNS server.
   </p></div></div></div></div><section class="sect1" id="sec-dns-basic" data-id-title="DNS terminology"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">39.1 </span><span class="title-name">DNS terminology</span></span> <a title="Permalink" class="permalink" href="#sec-dns-basic">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.4.3.2.1"><span class="term">Zone</span></dt><dd><p>
      The domain namespace is divided into regions called zones. For example,
      if you have <code class="literal">example.com</code>, you have the
      <code class="literal">example</code> section (or zone) of the
      <code class="literal">com</code> domain.
     </p></dd><dt id="id-1.3.7.4.3.2.2"><span class="term">DNS server</span></dt><dd><p>
      The DNS server is a server that maintains the name and IP information for
      a domain. You can have a primary DNS server for primary zone, a secondary
      server for secondary zone, or a secondary server without any zones for caching.
     </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.4.3.2.2.2.2.1"><span class="term">Primary zone DNS server</span></dt><dd><p>
         The primary zone includes all hosts from your network and a DNS server
         primary zone stores up-to-date records for all the hosts in your
         domain.
        </p></dd><dt id="id-1.3.7.4.3.2.2.2.2.2"><span class="term">Secondary zone DNS server</span></dt><dd><p>
         A secondary zone is a copy of the primary zone. The secondary zone DNS server
         obtains its zone data with zone transfer operations from its primary
         server. The secondary zone DNS server responds authoritatively for the
         zone if it has valid (not expired) zone data. If the secondary server
         cannot obtain a new copy of the zone data, it stops responding for the
         zone.
        </p></dd></dl></div></dd><dt id="id-1.3.7.4.3.2.3"><span class="term">Forwarder</span></dt><dd><p>
      Forwarders are DNS servers to which your DNS server should send queries
      it cannot answer. To enable different configuration sources in one
      configuration, <code class="literal">netconfig</code> is used (see also
      <code class="command">man 8 netconfig</code>).
     </p></dd><dt id="id-1.3.7.4.3.2.4"><span class="term">Record</span></dt><dd><p>
      The record is information about name and IP address. Supported records
      and their syntax are described in BIND documentation. Several special
      records are:
     </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.4.3.2.4.2.2.1"><span class="term">NS record</span></dt><dd><p>
         An NS record tells name servers which machines are in charge of a
         given domain zone.
        </p></dd><dt id="id-1.3.7.4.3.2.4.2.2.2"><span class="term">MX record</span></dt><dd><p>
         The MX (mail exchange) records describe the machines to contact for
         directing mail across the Internet.
        </p></dd><dt id="id-1.3.7.4.3.2.4.2.2.3"><span class="term">SOA record</span></dt><dd><p>
         SOA (Start of Authority) record is the first record in a zone file.
         The SOA record is used when using DNS to synchronize data between
         multiple computers.
        </p></dd></dl></div></dd></dl></div></section><section class="sect1" id="sec-dns-install" data-id-title="Installation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">39.2 </span><span class="title-name">Installation</span></span> <a title="Permalink" class="permalink" href="#sec-dns-install">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To install a DNS server, start YaST and select
   <span class="guimenu">Software</span> › <span class="guimenu">Software
   Management</span>. Choose
   <span class="guimenu">View</span> › <span class="guimenu">Patterns</span>
   and select <span class="guimenu">DHCP and DNS Server</span>. Confirm the installation
   of the dependent packages to finish the installation process.
  </p><p>
   Alternatively use the following command on the command line:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper in -t pattern dhcp_dns_server</pre></div></section><section class="sect1" id="sec-dns-yast" data-id-title="Configuration with YaST"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">39.3 </span><span class="title-name">Configuration with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Use the YaST DNS module to configure a DNS server for the local network.
   When starting the module for the first time, a wizard starts, prompting you
   to make a few decisions concerning administration of the server. Completing
   this initial setup produces a basic server configuration. Use the expert
   mode to deal with more advanced configuration tasks, such as setting up
   ACLs, logging, TSIG keys, and other options.
  </p><section class="sect2" id="sec-dns-yast-wizard" data-id-title="Wizard configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">39.3.1 </span><span class="title-name">Wizard configuration</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-wizard">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The wizard consists of three steps or dialogs. At the appropriate places
    in the dialogs, you can enter the expert configuration mode.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>



      When starting the module for the first time, the <span class="guimenu">Forwarder
      Settings</span> dialog, shown in
      <a class="xref" href="#fig-yast2-dnsinst-forwarders" title="DNS server installation: forwarder settings">Figure 39.1, “DNS server installation: forwarder settings”</a>, opens. The <span class="guimenu">Local
      DNS Resolution Policy</span> allows to set the following options:
     </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        <span class="guimenu">Merging forwarders is disabled</span>

       </p></li><li class="listitem"><p>
        <span class="guimenu">Automatic merging</span>

       </p></li><li class="listitem"><p>
        <span class="guimenu">Merging forwarders is enabled</span>

       </p></li><li class="listitem"><p>

        <span class="guimenu">Custom configuration</span>—If <span class="guimenu">Custom
        configuration</span> is selected, <span class="guimenu">Custom policy</span>
        can be specified; by default (with <span class="guimenu">Automatic merging</span>
        selected), <span class="guimenu">Custom policy</span> is set to
        <code class="literal">auto</code>, but here you can either set interface names or
        select from the two special policy names <code class="literal">STATIC</code> and
        <code class="literal">STATIC_FALLBACK</code>.
       </p></li></ul></div><p>
      In <span class="guimenu">Local DNS Resolution Forwarder</span>, specify which
      service to use: <span class="guimenu">Using system name servers</span>,
      <span class="guimenu">This name server (bind)</span>, or <span class="guimenu">Local dnsmasq
      server</span>.
     </p><p>
      For more information about all these settings, see <code class="command">man 8
      netconfig</code>.
     </p><div class="figure" id="fig-yast2-dnsinst-forwarders"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dns_wiz_forw.png"><img src="images/yast2_dns_wiz_forw.png" width="75%" alt="DNS server installation: forwarder settings" title="DNS server installation: forwarder settings"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 39.1: </span><span class="title-name">DNS server installation: forwarder settings </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dnsinst-forwarders">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div><p>
      Forwarders are DNS servers to which your DNS server sends queries it
      cannot answer itself. Enter their IP address and click
      <span class="guimenu">Add</span>.
     </p></li><li class="step"><p>
      The <span class="guimenu">DNS Zones</span> dialog consists of several parts and is
      responsible for the management of zone files, described in
      <a class="xref" href="#sec-dns-zonefile" title="39.6. Zone files">Section 39.6, “Zone files”</a>. For a new zone, provide a name for it
      in <span class="guimenu">Name</span>. To add a reverse zone, the name must end in
      <code class="literal">.in-addr.arpa</code>. Finally, select the
      <span class="guimenu">Type</span> (primary, secondary, or forward). See
      <a class="xref" href="#fig-yast2-dnsinst-zones" title="DNS server installation: DNS zones">Figure 39.2, “DNS server installation: DNS zones”</a>. Click <span class="guimenu">Edit </span>
      to configure other settings of an existing zone. To remove a zone, click
      <span class="guimenu">Delete</span>.
     </p><div class="figure" id="fig-yast2-dnsinst-zones"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dns_wiz_zone.png"><img src="images/yast2_dns_wiz_zone.png" width="75%" alt="DNS server installation: DNS zones" title="DNS server installation: DNS zones"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 39.2: </span><span class="title-name">DNS server installation: DNS zones </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dnsinst-zones">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></li><li class="step"><p>
      In the final dialog, you can open the DNS port in the firewall by
      clicking <span class="guimenu">Open Port in Firewall</span>. Then decide whether to
      start the DNS server when booting (<span class="guimenu">On</span> or
      <span class="guimenu">Off</span>). You can also activate LDAP support. See
      <a class="xref" href="#fig-yast2-dnsinst-finish" title="DNS server installation: finish wizard">Figure 39.3, “DNS server installation: finish wizard”</a>.
     </p><div class="figure" id="fig-yast2-dnsinst-finish"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dns_wiz_finish.png"><img src="images/yast2_dns_wiz_finish.png" width="75%" alt="DNS server installation: finish wizard" title="DNS server installation: finish wizard"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 39.3: </span><span class="title-name">DNS server installation: finish wizard </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dnsinst-finish">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></li></ol></div></div></section><section class="sect2" id="sec-dns-yast-expert" data-id-title="Expert configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">39.3.2 </span><span class="title-name">Expert configuration</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-expert">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    After starting the module, YaST opens a window displaying several
    configuration options. Completing it results in a DNS server configuration
    with the basic functions in place:
   </p><section class="sect3" id="sec-dns-yast-expert-startup" data-id-title="Start-up"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">39.3.2.1 </span><span class="title-name">Start-up</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-expert-startup">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Under <span class="guimenu">Start-Up</span>, define whether the DNS server should be
     started when the booting the system or manually. To start the DNS server
     immediately, click <span class="guimenu">Start DNS Server Now</span>. To stop the
     DNS server, click <span class="guimenu">Stop DNS Server Now</span>. To save the
     current settings, select <span class="guimenu">Save Settings and Reload DNS Server
     Now</span>.

     You can open the DNS port in the firewall with <span class="guimenu">Open Port in
     Firewall</span> and modify the firewall settings with <span class="guimenu">Firewall
     Details</span>.
    </p><p>
     By selecting <span class="guimenu">LDAP Support Active</span>, the zone files are
     managed by an LDAP database. Any changes to zone data written to the LDAP
     database are picked up by the DNS server when it is restarted or prompted
     to reload its configuration.
    </p></section><section class="sect3" id="sec-dns-yast-expert-forwarders" data-id-title="Forwarders"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">39.3.2.2 </span><span class="title-name">Forwarders</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-expert-forwarders">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     If your local DNS server cannot answer a request, it tries to forward the
     request to a <span class="guimenu">Forwarder</span>, if configured so. This
     forwarder may be added manually to the <span class="guimenu">Forwarder List</span>.
     If the forwarder is not static like in dial-up connections,
     <span class="guimenu">netconfig</span> handles the configuration. For more
     information about netconfig, see <code class="command">man 8 netconfig</code>.
    </p></section><section class="sect3" id="sec-dns-yast-expert-basics" data-id-title="Basic options"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">39.3.2.3 </span><span class="title-name">Basic options</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-expert-basics">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     In this section, set basic server options. From the
     <span class="guimenu">Option</span> menu, select the desired item then specify the
     value in the corresponding text box. Include the new entry by selecting
     <span class="guimenu">Add</span>.
    </p></section><section class="sect3" id="sec-dns-yast-expert-logging" data-id-title="Logging"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">39.3.2.4 </span><span class="title-name">Logging</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-expert-logging">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     To set what the DNS server should log and how, select
     <span class="guimenu">Logging</span>. Under <span class="guimenu">Log Type</span>, specify
     where the DNS server should write the log data. Use the system-wide log by
     selecting <span class="guimenu">System Log</span> or specify a different file by
     selecting <span class="guimenu">File</span>. In the latter case, additionally
     specify a name, the maximum file size in megabytes and the number of log
     file versions to store.
    </p><p>
     Further options are available under <span class="guimenu">Additional Logging</span>.
     Enabling <span class="guimenu">Log All DNS Queries</span> causes
     <span class="emphasis"><em>every</em></span> query to be logged, in which case the log file
     could grow large. For this reason, it is not a good idea to
     enable this option for other than debugging purposes. To log the data
     traffic during zone updates between DHCP and DNS server, enable
     <span class="guimenu">Log Zone Updates</span>. To log the data traffic during a zone
     transfer from primary to secondary server, enable <span class="guimenu">Log Zone
     Transfer</span>. See <a class="xref" href="#fig-yast2-dns-logging" title="DNS server: logging">Figure 39.4, “DNS server: logging”</a>.
    </p><div class="figure" id="fig-yast2-dns-logging"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dns_def_logging.png"><img src="images/yast2_dns_def_logging.png" width="75%" alt="DNS server: logging" title="DNS server: logging"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 39.4: </span><span class="title-name">DNS server: logging </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dns-logging">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></section><section class="sect3" id="sec-dns-yast-expert-acls" data-id-title="ACLs"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">39.3.2.5 </span><span class="title-name">ACLs</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-expert-acls">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Use this dialog to define ACLs (access control lists) to enforce access
     restrictions. After providing a distinct name under
     <span class="guimenu">Name</span>, specify an IP address (with or without netmask)
     under <span class="guimenu">Value</span> in the following fashion:
    </p><div class="verbatim-wrap"><pre class="screen">{ 192.168.1/24; }</pre></div><p>
     The syntax of the configuration file requires that the address ends with a
     semicolon and is put into curly braces.
    </p></section><section class="sect3" id="sec-dns-yast-expert-tsig" data-id-title="TSIG keys"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">39.3.2.6 </span><span class="title-name">TSIG keys</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-expert-tsig">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The main purpose of TSIGs (transaction signatures) is to secure
     communications between DHCP and DNS servers. They are described in
     <a class="xref" href="#sec-dns-tsig" title="39.8. Secure transactions">Section 39.8, “Secure transactions”</a>.
    </p><p>
     To generate a TSIG key, enter a distinctive name in the field labeled
     <span class="guimenu">Key ID</span> and specify the file where the key should be
     stored (<span class="guimenu">Filename</span>). Confirm your choices with
     <span class="guimenu">Generate</span>.
    </p><p>
     To use a previously created key, leave the <span class="guimenu">Key ID</span> field
     blank and select the file where it is stored under
     <span class="guimenu">Filename</span>. After that, confirm with
     <span class="guimenu">Add</span>.
    </p></section><section class="sect3" id="sec-dns-yast-expert-add-secondary" data-id-title="DNS zones (adding a secondary zone)"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">39.3.2.7 </span><span class="title-name">DNS zones (adding a secondary zone)</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-expert-add-secondary">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     To add a secondary zone, select <span class="guimenu">DNS Zones</span>, choose the zone
     type <span class="guimenu">Secondary</span>, write the name of the new zone, and click
     <span class="guimenu">Add</span>.
    </p><p>
     In the <span class="guimenu">Zone Editor</span> sub-dialog under <span class="guimenu">Primary DNS
     Server IP</span>, specify the primary server from which the secondary server should pull
     its data. To limit access to the server, select one of the ACLs from the
     list.

    </p></section><section class="sect3" id="sec-dns-yast-expert-add-primary" data-id-title="DNS zones (adding a primary zone)"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">39.3.2.8 </span><span class="title-name">DNS zones (adding a primary zone)</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-expert-add-primary">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     To add a primary zone, select <span class="guimenu">DNS Zones</span>, choose the zone
     type <span class="guimenu">Primary</span>, write the name of the new zone, and click
     <span class="guimenu">Add</span>. When adding a primary zone, a reverse zone is also
     needed. For example, when adding the zone
     <code class="systemitem">example.com</code> that points to hosts in a subnet
     <code class="literal">192.168.1.0/24</code>, you should also add a reverse zone for
     the IP-address range covered. By definition, this should be named
     <code class="literal">1.168.192.in-addr.arpa</code>.
    </p></section><section class="sect3" id="sec-dns-yast-expert-edit-primary" data-id-title="DNS zones (editing a primary zone)"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">39.3.2.9 </span><span class="title-name">DNS zones (editing a primary zone)</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-expert-edit-primary">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     To edit a primary zone, select <span class="guimenu">DNS Zones</span>, select the
     primary zone from the table and click <span class="guimenu">Edit</span>. The dialog
     consists of several pages: <span class="guimenu">Basics</span> (the one opened
     first), <span class="guimenu">NS Records</span>, <span class="guimenu">MX Records</span>,
     <span class="guimenu">SOA</span>, and <span class="guimenu">Records</span>.
    </p><p>
     The basic dialog, shown in <a class="xref" href="#fig-yast2-dns-ddns" title="DNS server: Zone Editor (Basics)">Figure 39.5, “DNS server: Zone Editor (Basics)”</a>, lets you
     define settings for dynamic DNS and access options for zone transfers to
     clients and secondary name servers. To permit the dynamic updating of zones,
     select <span class="guimenu">Allow Dynamic Updates</span> and the
     corresponding TSIG key. The key must have been defined before the update
     action starts. To enable zone transfers, select the corresponding ACLs.
     ACLs must have been defined already.
    </p><p>
     In the <span class="guimenu">Basics</span> dialog, select whether to enable zone
     transfers. Use the listed ACLs to define who can download zones.
    </p><div class="figure" id="fig-yast2-dns-ddns"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dns_def_ddns.png"><img src="images/yast2_dns_def_ddns.png" width="65%" alt="DNS server: Zone Editor (Basics)" title="DNS server: Zone Editor (Basics)"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 39.5: </span><span class="title-name">DNS server: Zone Editor (Basics) </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dns-ddns">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.4.5.4.11.6.1"><span class="term">Zone Editor (NS Records)</span></dt><dd><p>
        The <span class="guimenu">NS Records</span> dialog allows you to define
        alternative name servers for the zones specified. Make sure that your
        own name server is included in the list. To add a record, enter its
        name under <span class="guimenu">Name Server to Add</span> then confirm with
        <span class="guimenu">Add</span>. See <a class="xref" href="#fig-yast2-dns-nsrec" title="DNS server: Zone Editor (NS Records)">Figure 39.6, “DNS server: Zone Editor (NS Records)”</a>.
       </p><div class="figure" id="fig-yast2-dns-nsrec"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dns_def_nsrec.png"><img src="images/yast2_dns_def_nsrec.png" width="65%" alt="DNS server: Zone Editor (NS Records)" title="DNS server: Zone Editor (NS Records)"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 39.6: </span><span class="title-name">DNS server: Zone Editor (NS Records) </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dns-nsrec">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></dd><dt id="id-1.3.7.4.5.4.11.6.2"><span class="term">Zone Editor (MX Records)</span></dt><dd><p>
        To add a mail server for the current zone to the existing list, enter
        the corresponding address and priority value. After doing so, confirm
        by selecting <span class="guimenu">Add</span>. See
        <a class="xref" href="#fig-yast2-dns-mxrec" title="DNS server: Zone Editor (MX Records)">Figure 39.7, “DNS server: Zone Editor (MX Records)”</a>.
       </p><div class="figure" id="fig-yast2-dns-mxrec"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dns_def_mxrec.png"><img src="images/yast2_dns_def_mxrec.png" width="75%" alt="DNS server: Zone Editor (MX Records)" title="DNS server: Zone Editor (MX Records)"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 39.7: </span><span class="title-name">DNS server: Zone Editor (MX Records) </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dns-mxrec">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></dd><dt id="id-1.3.7.4.5.4.11.6.3"><span class="term">Zone Editor (SOA)</span></dt><dd><p>
        This page allows you to create SOA (start of authority) records. For an
        explanation of the individual options, refer to
        <a class="xref" href="#ex-welt-zone" title="The /var/lib/named/example.com.zone file">Example 39.6, “The /var/lib/named/example.com.zone file”</a>. <span class="phrase">Changing SOA
        records is not supported for dynamic zones managed via LDAP.</span>
       </p><div class="figure" id="fig-yast2-dns-soa"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dns_def_soa.png"><img src="images/yast2_dns_def_soa.png" width="75%" alt="DNS server: Zone Editor (SOA)" title="DNS server: Zone Editor (SOA)"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 39.8: </span><span class="title-name">DNS server: Zone Editor (SOA) </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dns-soa">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></dd><dt id="id-1.3.7.4.5.4.11.6.4"><span class="term">Zone Editor (Records)</span></dt><dd><p>
        This dialog manages name resolution. In <span class="guimenu">Record Key</span>,
        enter the host name then select its type. The <span class="guimenu">A</span> type
        represents the main entry. The value for this should be an IP address
        (IPv4). Use <span class="guimenu">AAAA</span> for IPv6 addresses.
        <span class="guimenu">CNAME</span> is an alias. Use the types
        <span class="guimenu">NS</span> and <span class="guimenu">MX</span> for detailed or partial
        records that expand on the information provided in the <span class="guimenu">NS
        Records</span> and <span class="guimenu">MX Records</span> tabs. These three
        types resolve to an existing <code class="literal">A</code> record.
        <span class="guimenu">PTR</span> is for reverse zones. It is the opposite of an
        <code class="literal">A</code> record, for example:
       </p><div class="verbatim-wrap"><pre class="screen">hostname.example.com. IN A 192.168.0.1
1.0.168.192.in-addr.arpa IN PTR hostname.example.com.</pre></div></dd></dl></div><section class="sect4" id="sec-dns-yast-expert-edit-primary-rev" data-id-title="Adding reverse zones"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">39.3.2.9.1 </span><span class="title-name">Adding reverse zones</span></span> <a title="Permalink" class="permalink" href="#sec-dns-yast-expert-edit-primary-rev">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      To add a reverse zone, follow this procedure:
     </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
        Start <span class="guimenu">YaST</span> › <span class="guimenu">DNS
        Server</span> › <span class="guimenu">DNS Zones</span>.
       </p></li><li class="step"><p>
        If you have not added a primary forward zone, add it and
        <span class="guimenu">Edit</span> it.
       </p></li><li class="step"><p>
        In the <span class="guimenu">Records</span> tab, fill the corresponding
        <span class="guimenu">Record Key</span> and <span class="guimenu">Value</span>, then add
        the record with <span class="guimenu">Add</span> and confirm with
        <span class="guimenu">OK</span>. If YaST complains about a non-existing record
        for a name server, add it in the <span class="guimenu">NS Records</span> tab.
       </p><div class="figure" id="id-1.3.7.4.5.4.11.7.3.3.2"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dns_revzone1.png"><img src="images/yast2_dns_revzone1.png" width="70%" alt="Adding a record for a primary zone" title="Adding a record for a primary zone"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 39.9: </span><span class="title-name">Adding a record for a primary zone </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.4.5.4.11.7.3.3.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></li><li class="step"><p>
        Back in the <span class="guimenu">DNS Zones</span> window, add a reverse primary
        zone.
       </p><div class="figure" id="id-1.3.7.4.5.4.11.7.3.4.2"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dns_revzone2.png"><img src="images/yast2_dns_revzone2.png" width="70%" alt="Adding a reverse zone" title="Adding a reverse zone"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 39.10: </span><span class="title-name">Adding a reverse zone </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.4.5.4.11.7.3.4.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></li><li class="step"><p>
        <span class="guimenu">Edit</span> the reverse zone, and in the
        <span class="guimenu">Records</span> tab, you can see the <span class="guimenu">PTR: Reverse
        translation</span> record type. Add the corresponding
        <span class="guimenu">Record Key</span> and <span class="guimenu">Value</span>, then click
        <span class="guimenu">Add</span> and confirm with <span class="guimenu">OK</span>.
       </p><div class="figure" id="id-1.3.7.4.5.4.11.7.3.5.2"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dns_revzone3.png"><img src="images/yast2_dns_revzone3.png" width="70%" alt="Adding a reverse record" title="Adding a reverse record"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 39.11: </span><span class="title-name">Adding a reverse record </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.4.5.4.11.7.3.5.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div><p>
        Add a name server record if needed.
       </p></li></ol></div></div><div id="id-1.3.7.4.5.4.11.7.4" data-id-title="Editing the reverse zone" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Editing the reverse zone</div><p>
       After adding a forward zone, go back to the main menu and select the
       reverse zone for editing. There in the tab <span class="guimenu">Basics</span>
       activate the check box <span class="guimenu">Automatically Generate Records
       From</span> and select your forward zone. That way, all changes to
       the forward zone are automatically updated in the reverse zone.
      </p></div></section></section></section></section><section class="sect1" id="sec-dns-bind" data-id-title="Starting the BIND name server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">39.4 </span><span class="title-name">Starting the BIND name server</span></span> <a title="Permalink" class="permalink" href="#sec-dns-bind">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   On a <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> system, the name server BIND (<span class="emphasis"><em>Berkeley
   Internet Name Domain</em></span>) comes preconfigured, so it can be started
   right after installation without any problems. Normally, if you already have an Internet connection and entered
   <code class="systemitem">127.0.0.1</code> as the name server
   address for <code class="systemitem">localhost</code> in
   <code class="filename">/var/run/netconfig/resolv.conf</code>, you already have a working
   name resolution without needing to know the DNS of the provider. BIND
   carries out name resolution via the root name server, a notably slower
   process. Normally, the DNS of the provider should be entered with its IP
   address in the configuration file <code class="filename">/etc/named.conf</code> under
   <code class="systemitem">forwarders</code> to ensure effective and secure name
   resolution. If this works so far, the name server runs as a pure
   <span class="emphasis"><em>caching-only</em></span> name server. Only when you configure its
   own zones it becomes a proper DNS. Find a simple example documented in
   <code class="filename">/usr/share/doc/packages/bind/config</code>.
  </p><div id="id-1.3.7.4.6.3" data-id-title="Automatic adaptation of the name server information" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Automatic adaptation of the name server information</div><p>
    Depending on the type of Internet connection or the network connection, the
    name server information can automatically be adapted to the current
    conditions. To do this, set the
    <code class="systemitem">NETCONFIG_DNS_POLICY</code> variable in the
    <code class="filename">/etc/sysconfig/network/config</code> file to
    <code class="literal">auto</code>.
   </p></div><p>
   However, do not set up an official domain until one is assigned to you by
   the responsible institution. Even if you have your own domain and it is
   managed by the provider, you are better off not using it, because BIND would
   otherwise not forward requests for this domain. The Web server at the
   provider, for example, would not be accessible for this domain.
  </p><p>
   To start the name server, enter the command <code class="command">systemctl start
   named</code> as <code class="systemitem">root</code>. Check
   with <code class="command">systemctl status named</code> whether named (as the name
   server process is called) has been started successfully. Test the name
   server immediately on the local system with the <code class="command">host</code> or
   <code class="command">dig</code> programs, which should return
   <code class="systemitem">localhost</code> as the default server
   with the address <code class="systemitem">127.0.0.1</code>. If
   this is not the case, <code class="filename">/var/run/netconfig/resolv.conf</code> may
   contain an incorrect name server entry or the file does not exist. For the
   first test, enter <code class="command">host</code> <code class="option">127.0.0.1</code>,
   which should always work. If you get an error message, use
   <code class="command">systemctl status named</code> to see whether the server is
   running. If the name server does not start or behaves unexpectedly,
   check the output of <code class="command">journalctl -e</code>.
  </p><p>
   To use the name server of the provider (or one already running on your
   network) as the forwarder, enter the corresponding IP address or addresses
   in the <code class="systemitem">options</code> section under
   <code class="systemitem">forwarders</code>. The addresses included in
   <a class="xref" href="#ex-forward" title="Forwarding options in named.conf">Example 39.1, “Forwarding options in named.conf”</a> are examples only. Adjust these entries to your
   own setup.
  </p><div class="example" id="ex-forward" data-id-title="Forwarding options in named.conf"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 39.1: </span><span class="title-name">Forwarding options in named.conf </span></span><a title="Permalink" class="permalink" href="#ex-forward">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">options {
        directory "/var/lib/named";
        forwarders { 10.11.12.13; 10.11.12.14; };
        listen-on { 127.0.0.1; 192.168.1.116; };
        allow-query { 127/8; 192.168/16 };
        notify no;
};</pre></div></div></div><p>
   The <code class="systemitem">options</code> entry is followed by entries for the
   zone, <code class="systemitem">localhost</code>, and
   <code class="systemitem">0.0.127.in-addr.arpa</code>. The <code class="literal">type
   hint</code> entry under <span class="quote">“<span class="quote">.</span>”</span> should always be present. The
   corresponding files do not need to be modified and should work as they are.
   Also make sure that each entry is closed with a <span class="quote">“<span class="quote">;</span>”</span> and that
   the curly braces are in the correct places. After changing the configuration
   file <code class="filename">/etc/named.conf</code> or the zone files, tell BIND to
   reread them with <code class="command">systemctl reload named</code>. Achieve the same
   by stopping and restarting the name server with <code class="command">systemctl restart
   named</code>. Stop the server at any time by entering <code class="command">systemctl
   stop named</code>.
  </p></section><section class="sect1" id="sec-dns-named" data-id-title="The /etc/named.conf configuration file"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">39.5 </span><span class="title-name">The /etc/named.conf configuration file</span></span> <a title="Permalink" class="permalink" href="#sec-dns-named">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   All the settings for the BIND name server itself are stored in the
   <code class="filename">/etc/named.conf</code> file. However, the zone data for the
   domains to handle (consisting of the host names, IP addresses, and so on)
   are stored in separate files in the <code class="filename">/var/lib/named</code>
   directory. The details of this are described later.
  </p><p>
   <code class="filename">/etc/named.conf</code> is roughly divided into two areas. One
   is the <code class="systemitem">options</code> section for general settings and the
   other consists of <code class="systemitem">zone</code> entries for the individual
   domains. A <code class="systemitem">logging</code> section and
   <code class="systemitem">acl</code> (access control list) entries are optional.
   Comment lines begin with a <code class="literal">#</code> sign or
   <code class="literal">//</code>. A minimal <code class="filename">/etc/named.conf</code> is
   shown in <a class="xref" href="#ex-named-mini" title="A basic /etc/named.conf">Example 39.2, “A basic /etc/named.conf”</a>.
  </p><div class="example" id="ex-named-mini" data-id-title="A basic /etc/named.conf"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 39.2: </span><span class="title-name">A basic /etc/named.conf </span></span><a title="Permalink" class="permalink" href="#ex-named-mini">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">options {
        directory "/var/lib/named";
        forwarders { 10.0.0.1; };
        notify no;
};

zone "localhost" in {
       type master;
       file "localhost.zone";
};

zone "0.0.127.in-addr.arpa" in {
        type master;
        file "127.0.0.zone";
};

zone "." in {
        type hint;
        file "root.hint";
};</pre></div></div></div><section class="sect2" id="sec-dns-named-options" data-id-title="Important configuration options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">39.5.1 </span><span class="title-name">Important configuration options</span></span> <a title="Permalink" class="permalink" href="#sec-dns-named-options">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.4.7.5.2.1"><span class="term">directory "<em class="replaceable">FILENAME</em>";</span></dt><dd><p>
       Specifies the directory in which BIND can find the files containing the
       zone data. Usually, this is <code class="filename">/var/lib/named</code>.
      </p></dd><dt id="id-1.3.7.4.7.5.2.2"><span class="term">forwarders { <em class="replaceable">IP-ADDRESS</em>; };</span></dt><dd><p>
       Specifies the name servers (of the provider) to which DNS requests should
       be forwarded if they cannot be resolved directly. Replace
       <em class="replaceable">IP-ADDRESS</em> with an IP address like
       <code class="literal">192.168.1.116</code>.
      </p></dd><dt id="id-1.3.7.4.7.5.2.3"><span class="term">forward first;</span></dt><dd><p>
       Causes DNS requests to be forwarded before an attempt is made to resolve
       them via the root name servers. Instead of <code class="systemitem">forward
       first</code>, <code class="systemitem">forward only</code> can be written
       to have all requests forwarded and none sent to the root name servers.
       This makes sense for firewall configurations.
      </p></dd><dt id="id-1.3.7.4.7.5.2.4"><span class="term">listen-on port 53 { 127.0.0.1; <em class="replaceable">IP-ADDRESS</em>; };</span></dt><dd><p>
       Tells BIND on which network interfaces and port to accept client
       queries. <code class="literal">port 53</code> does not need to be specified
       explicitly, because <code class="literal">53</code> is the default port. Enter
       <code class="literal">127.0.0.1</code> to permit requests from the local host. If
       you omit this entry entirely, all interfaces are used by default.
      </p></dd><dt id="id-1.3.7.4.7.5.2.5"><span class="term">listen-on-v6 port 53 {any; };</span></dt><dd><p>
       Tells BIND on which port it should listen for IPv6 client requests. The
       only alternative to <code class="literal">any</code> is <code class="literal">none</code>.
       As far as IPv6 is concerned, the server only accepts wild card
       addresses.
      </p></dd><dt id="id-1.3.7.4.7.5.2.6"><span class="term">query-source address * port 53;</span></dt><dd><p>
       This entry is necessary if a firewall is blocking outgoing DNS requests.
       This tells BIND to post requests externally from port 53 and not from
       any of the high ports above 1024.
      </p></dd><dt id="id-1.3.7.4.7.5.2.7"><span class="term">query-source-v6 address * port 53;</span></dt><dd><p>
       Tells BIND which port to use for IPv6 queries.
      </p></dd><dt id="id-1.3.7.4.7.5.2.8"><span class="term">allow-query { 127.0.0.1; <em class="replaceable">NET</em>; };</span></dt><dd><p>
       Defines the networks from which clients can post DNS requests. Replace
       <em class="replaceable">NET</em> with address information like
       <code class="literal">192.168.2.0/24</code>. The <code class="systemitem">/24</code> at
       the end is an abbreviated expression for the netmask (in this case
       <code class="systemitem">255.255.255.0</code>).
      </p></dd><dt id="id-1.3.7.4.7.5.2.9"><span class="term">allow-transfer  ! *;;</span></dt><dd><p>
       Controls which hosts can request zone transfers. In the example, such
       requests are denied with <code class="systemitem">! *</code>.
       Without this entry, zone transfers can be requested from anywhere
       without restrictions.
      </p></dd><dt id="id-1.3.7.4.7.5.2.10"><span class="term">statistics-interval 0;</span></dt><dd><p>
       Without this entry, BIND generates several lines of
       statistical information per hour in the system's journal. Set it to 0 to
       suppress these statistics or set an interval in minutes.
      </p></dd><dt id="id-1.3.7.4.7.5.2.11"><span class="term">cleaning-interval 720;</span></dt><dd><p>
       This option defines at which time intervals BIND clears its cache. This
       triggers an entry in the system's journal each time it occurs. The time
       specification is in minutes. The default is 60 minutes.
      </p></dd><dt id="id-1.3.7.4.7.5.2.12"><span class="term">interface-interval 0;</span></dt><dd><p>
       BIND regularly searches the network interfaces for new or nonexistent
       interfaces. If this value is set to <code class="systemitem">0</code>, this is
       not done and BIND only listens at the interfaces detected at start-up.
       Otherwise, the interval can be defined in minutes. The default is sixty
       minutes.
      </p></dd><dt id="id-1.3.7.4.7.5.2.13"><span class="term">notify no;</span></dt><dd><p>
       <code class="option">no</code> prevents other name servers from being informed when
       changes are made to the zone data or when the name server is restarted.
      </p></dd></dl></div><p>
    For a list of available options, read the man page <code class="command">man 5
    named.conf</code>.
   </p></section><section class="sect2" id="sec-dns-named-log" data-id-title="Logging"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">39.5.2 </span><span class="title-name">Logging</span></span> <a title="Permalink" class="permalink" href="#sec-dns-named-log">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    What, how and where logging takes place can be extensively configured in
    BIND. Normally, the default settings should be sufficient.
    <a class="xref" href="#ex-no-log" title="Entry to disable logging">Example 39.3, “Entry to disable logging”</a>, shows the simplest form of such an entry and
    suppresses any logging.
   </p><div class="example" id="ex-no-log" data-id-title="Entry to disable logging"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 39.3: </span><span class="title-name">Entry to disable logging </span></span><a title="Permalink" class="permalink" href="#ex-no-log">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">logging {
        category default { null; };
};</pre></div></div></div></section><section class="sect2" id="sec-dns-named-zones" data-id-title="Zone entries"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">39.5.3 </span><span class="title-name">Zone entries</span></span> <a title="Permalink" class="permalink" href="#sec-dns-named-zones">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><div class="example" id="ex-meine-domain" data-id-title="Zone entry for example.com"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 39.4: </span><span class="title-name">Zone entry for example.com </span></span><a title="Permalink" class="permalink" href="#ex-meine-domain">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">zone "example.com" in {
      type master;
      file "example.com.zone";
      notify no;
};</pre></div></div></div><p>
    After <code class="systemitem">zone</code>, specify the name of the domain to
    administer (<code class="systemitem">example.com</code>)
    followed by <code class="systemitem">in</code> and a block of relevant options
    enclosed in curly braces, as shown in <a class="xref" href="#ex-meine-domain" title="Zone entry for example.com">Example 39.4, “Zone entry for example.com”</a>. To
    define a <span class="emphasis"><em>secondary zone</em></span>, switch the
    <code class="systemitem">type</code> to <code class="literal">secondary</code> and specify a
    name server that administers this zone as <code class="literal">primary</code> (which,
    in turn, may be a secondary server of another primary server), as shown in
    <a class="xref" href="#ex-andere-domain" title="Zone entry for example.net">Example 39.5, “Zone entry for example.net”</a>.
   </p><div class="example" id="ex-andere-domain" data-id-title="Zone entry for example.net"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 39.5: </span><span class="title-name">Zone entry for example.net </span></span><a title="Permalink" class="permalink" href="#ex-andere-domain">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">zone "example.net" in {
      type secondary;
      file "secondary/example.net.zone";
      
      masters { 10.0.0.1; }; 
};</pre></div></div></div><p>
    The zone options:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.4.7.7.6.1"><span class="term">type primary;</span></dt><dd><p>
       By specifying <code class="literal">primary</code>, tell BIND that the zone is
       handled by the local name server. This assumes that a zone file has been
       created in the correct format.
      </p></dd><dt id="id-1.3.7.4.7.7.6.2"><span class="term">type secondary;</span></dt><dd><p>
       This zone is transferred from another name server. It must be used
       together with <code class="systemitem">primary_servers</code>.
      </p></dd><dt id="id-1.3.7.4.7.7.6.3"><span class="term">type hint;</span></dt><dd><p>
       The zone <code class="literal">.</code> of the <code class="literal">hint</code> type is
       used to set the root name servers. This zone definition can be left as
       is.
      </p></dd><dt id="id-1.3.7.4.7.7.6.4"><span class="term">file <code class="filename">example.com.zone</code> or file
      <span class="quote">“<span class="quote">secondary/example.net.zone</span>”</span>;</span></dt><dd><p>
       This entry specifies the file where zone data for the domain is located.
       This file is not required for a secondary server, because this data is pulled from
       another name server. To differentiate files of the primary and secondary server, use the
       directory <code class="filename">secondary</code> for the secondary files.
      </p></dd><dt id="id-1.3.7.4.7.7.6.5"><span class="term">primary_servers { <em class="replaceable">SERVER_IP_ADDRESS</em>; };</span></dt><dd><p>
       This entry is only needed for secondary zones. It specifies from which name
       server the zone file should be transferred.
      </p></dd><dt id="id-1.3.7.4.7.7.6.6"><span class="term">allow-update {! *; };</span></dt><dd><p>
       This option controls external write access, which would allow clients to
       make a DNS entry—something not normally desirable for security
       reasons. Without this entry, zone updates are not allowed. The above
       entry achieves the same because <code class="literal">! *</code> effectively bans
       any such activity.
      </p></dd></dl></div></section></section><section class="sect1" id="sec-dns-zonefile" data-id-title="Zone files"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">39.6 </span><span class="title-name">Zone files</span></span> <a title="Permalink" class="permalink" href="#sec-dns-zonefile">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Two types of zone files are needed. One assigns IP addresses to host names
   and the other does the reverse: it supplies a host name for an IP address.
  </p><div id="id-1.3.7.4.8.3" data-id-title="Using the dot (period, full stop) in zone files" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Using the dot (period, full stop) in zone files</div><p>
    The <code class="literal">"."</code> has an important meaning in the zone files. If
    host names are given without a final dot (<code class="literal">.</code>), the zone
    is appended. Complete host names specified with a full domain name must end
    with a dot (<code class="literal">.</code>) to avoid having the domain added to it
    again. A missing or wrongly placed "." is the most frequent cause
    of name server configuration errors.
   </p></div><p>
   The first case to consider is the zone file
   <code class="filename">example.com.zone</code>, responsible for the domain
   <code class="filename">example.com</code>, shown in
   <a class="xref" href="#ex-welt-zone" title="The /var/lib/named/example.com.zone file">Example 39.6, “The /var/lib/named/example.com.zone file”</a>.
  </p><div class="example" id="ex-welt-zone" data-id-title="The /var/lib/named/example.com.zone file"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 39.6: </span><span class="title-name">The /var/lib/named/example.com.zone file </span></span><a title="Permalink" class="permalink" href="#ex-welt-zone">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">$TTL 2D <span class="callout" id="welt-zone-ttl">1</span>
example.com. IN SOA      dns  root.example.com. ( <span class="callout" id="welt-zone-soa-start">2</span>
             2003072441  ; serial <span class="callout" id="welt-zone-serial-no">3</span>
             1D          ; refresh <span class="callout" id="welt-zone-refresh">4</span>
             2H          ; retry <span class="callout" id="welt-zone-retry">5</span>
             1W          ; expiry <span class="callout" id="welt-zone-expire">6</span>
             2D )        ; minimum <span class="callout" id="welt-zone-caching-time">7</span>

             IN NS       dns <span class="callout" id="welt-zone-inns">8</span>
             IN MX       10 mail dns <span class="callout" id="welt-zone-mx">9</span>
gate         IN A        192.168.5.1 <span class="callout" id="welt-zone-ips">10</span>
             IN A        10.0.0.1
dns          IN A        192.168.1.116
mail         IN A        192.168.3.108
jupiter      IN A        192.168.2.100
venus        IN A        192.168.2.101
saturn       IN A        192.168.2.102
mercury      IN A        192.168.2.103
ntp          IN CNAME    dns <span class="callout" id="welt-zone-ntp">11</span>
dns6         IN A6  0    2002:c0a8:174::</pre></div></div></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#welt-zone-ttl"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     <code class="systemitem">$TTL</code> defines the default time to live that
     should apply to all the entries in this file. In this example, entries
     are valid for a period of two days (<code class="literal">2 D</code>).
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#welt-zone-soa-start"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     This is where the SOA (start of authority) control record begins:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       The name of the domain to administer is
       <code class="literal">example.com</code> in the first position. This ends
       with <code class="literal">"."</code>, because otherwise the zone would be
       appended a second time. Alternatively, <code class="literal">@</code> can be
       entered here, in which case the zone would be extracted from the
       corresponding entry in <code class="filename">/etc/named.conf</code>.
      </p></li><li class="listitem"><p>
       After <code class="systemitem">IN SOA</code> is the name of the name server in
       charge as a primary server for this zone. The name is expanded from
       <code class="literal">dns</code> to <code class="literal">dns.example.com</code>, because it does
       not end with a <code class="literal">"."</code>.
      </p></li><li class="listitem"><p>
       An e-mail address of the person in charge of this name server follows.
       Because the <code class="literal">@</code> sign already has a special meaning,
       <code class="literal">"."</code> is entered here instead. For
       <code class="systemitem">root@example.com</code> the entry must read
       <code class="systemitem">root.example.com.</code>. The
       <code class="literal">"."</code> must be included at the end to prevent the zone
       from being added.
      </p></li><li class="listitem"><p>
       The <code class="literal">(</code> includes all lines up to <code class="literal">)</code>
       into the SOA record.
      </p></li></ul></div></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#welt-zone-serial-no"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     The <code class="systemitem">serial number</code> is a 10-digit number. It must
     be changed each time this file is changed. It is needed to inform the
     secondary name servers (secondary servers) of changes. For this, a 10-digit
     number of the date and run number, written as YYYYMMDDNN, has become the
     customary format (YYYY = year, MM = month and DD = day. NN is a
     sequence number in case you update it more than once on the given day).
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#welt-zone-refresh"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     The <code class="systemitem">refresh rate</code> specifies the time interval at
     which the secondary name servers verify the zone <code class="systemitem">serial
     number</code>. In this case, one day.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#welt-zone-retry"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     The <code class="systemitem">retry rate</code> specifies the time interval at
     which a secondary name server, in case of error, attempts to contact the
     primary server again. Here, two hours.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#welt-zone-expire"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     The <code class="systemitem">expiration time</code> specifies the time frame
     after which a secondary name server discards the cached data if it has
     not regained contact to the primary server. Here, a week.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#welt-zone-caching-time"><span class="callout">7</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     The last entry in the SOA record specifies the <code class="systemitem">negative
     caching TTL</code>—the time for which results of unresolved
     DNS queries from other servers may be cached.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#welt-zone-inns"><span class="callout">8</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     The <code class="systemitem">IN NS</code> specifies the name server responsible
     for this domain. <code class="systemitem">dns</code> is extended to
     <code class="systemitem">dns.example.com</code> because it does not end with a
     <code class="literal">"."</code>. There can be several lines like this—one for
     the primary and one for each secondary name server. If
     <code class="systemitem">notify</code> is not set to <code class="option">no</code> in
     <code class="filename">/etc/named.conf</code>, all the name servers listed here are
     informed of the changes made to the zone data.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#welt-zone-mx"><span class="callout">9</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     The MX record specifies the mail server that accepts, processes, and
     forwards e-mails for the domain <code class="systemitem">example.com</code>. In this example, this is
     the host <code class="systemitem">mail.example.com</code>. The
     number in front of the host name is the preference value. If there are
     multiple MX entries, the mail server with the smallest value is taken
     first. If mail delivery to this server fails, the entry with the
     next-smallest value is used.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#welt-zone-ips"><span class="callout">10</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     This and the following lines are the actual address records where one or more IP addresses are
      assigned to host names. The names are listed here without a
      <code class="literal">"."</code> because they do not include their domain, so
      <code class="systemitem">example.com</code> is added to
      them all. Two IP addresses are assigned to the host
      <code class="systemitem">gate</code>, as it has two network cards.

      Wherever the host address is a traditional one (IPv4), the record is
      marked with <code class="literal">A</code>. If the address is an IPv6 address, the
      entry is marked with <code class="literal">AAAA</code>.

     </p><div id="id-1.3.7.4.8.6.10.2" data-id-title="IPv6 syntax" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: IPv6 syntax</div><p>
       The IPv6 record has a slightly different syntax than IPv4. Because of
       the fragmentation possibility, it is necessary to provide information
       about missed bits before the address. To fill up the IPv6 address with
       the needed number of <span class="quote">“<span class="quote">0</span>”</span>, add two colons at the correct
       place in the address.

      </p><div class="verbatim-wrap"><pre class="screen">pluto     AAAA 2345:00C1:CA11::1234:5678:9ABC:DEF0
pluto     AAAA 2345:00D2:DA11::1234:5678:9ABC:DEF0</pre></div></div></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#welt-zone-ntp"><span class="callout">11</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     The alias <code class="literal">ntp</code> can be used to address
     <code class="literal">dns</code> (<code class="systemitem">CNAME</code> means
     <span class="emphasis"><em>canonical name</em></span>).
    </p></td></tr></table></div><p>
   The pseudo domain <code class="literal">in-addr.arpa</code> is used for the reverse
   lookup of IP addresses into host names. It is appended to the network part
   of the address in reverse notation. So
   <code class="systemitem">192.168</code> is resolved into
   <code class="systemitem">168.192.in-addr.arpa</code>. See
   <a class="xref" href="#dat-arpa" title="Reverse lookup">Example 39.7, “Reverse lookup”</a>.
  </p><div class="example" id="dat-arpa" data-id-title="Reverse lookup"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 39.7: </span><span class="title-name">Reverse lookup </span></span><a title="Permalink" class="permalink" href="#dat-arpa">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">$TTL 2D <span class="callout" id="data-arpa-ttl">1</span>
168.192.in-addr.arpa.   IN SOA dns.example.com. root.example.com. ( <span class="callout" id="data-arpa-soa">2</span>
                        2003072441      ; serial
                        1D              ; refresh
                        2H              ; retry
                        1W              ; expiry
                        2D )            ; minimum

                        IN NS           dns.example.com. <span class="callout" id="data-arpa-inns">3</span>

1.5                     IN PTR          gate.example.com. <span class="callout" id="data-arpa-ips">4</span>
100.3                   IN PTR          www.example.com.
253.2                   IN PTR          cups.example.com.</pre></div></div></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#data-arpa-ttl"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     $TTL defines the standard TTL that applies to all entries here.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#data-arpa-soa"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     The configuration file should activate reverse lookup for the network
     <code class="systemitem">192.168</code>. Given
     that the zone is called <code class="systemitem">168.192.in-addr.arpa</code>, it
     should not be added to the host names. Therefore, all host names are
     entered in their complete form—with their domain and with a
     <code class="literal">"."</code> at the end. The remaining entries correspond to
     those described for the previous <code class="systemitem">example.com</code>
     example.
    </p><p>
     See <a class="xref" href="#ex-welt-zone" title="The /var/lib/named/example.com.zone file">Example 39.6, “The /var/lib/named/example.com.zone file”</a> for detail on the entries within this
     record.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#data-arpa-inns"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     This line specifies the name server responsible for this zone. This time,
     however, the name is entered in its complete form with the domain and a
     <code class="literal">"."</code> at the end.
    </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#data-arpa-ips"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
     This, and the following lines, are the pointer records hinting at the IP
     addresses on the respective hosts. Only the last part of the IP address is
     entered at the beginning of the line, without the <code class="literal">"."</code>
     at the end. Appending the zone to this (without the
     <code class="systemitem">.in-addr.arpa</code>) results in the complete IP address
     in reverse order.
    </p></td></tr></table></div><p>
   Normally, zone transfers between different versions of BIND should be
   possible without any problems.
  </p></section><section class="sect1" id="sec-dns-dynupdate" data-id-title="Dynamic update of zone data"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">39.7 </span><span class="title-name">Dynamic update of zone data</span></span> <a title="Permalink" class="permalink" href="#sec-dns-dynupdate">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The term <span class="emphasis"><em>dynamic update</em></span> refers to operations by which
   entries in the zone files of a primary server are added, changed or deleted.
   This mechanism is described in RFC 2136. Dynamic update is configured
   individually for each zone entry by adding an optional
   <code class="systemitem">allow-update</code> or
   <code class="systemitem">update-policy</code> rule. Zones to update dynamically
   should not be edited by hand.
  </p><p>
   Transmit the entries to update to the server with the command
   <code class="command">nsupdate</code>. For the exact syntax of this command, check the
   man page for nsupdate (<code class="command">man</code> <code class="option">8
   nsupdate</code>). For security reasons, any such update should be
   performed using TSIG keys as described in <a class="xref" href="#sec-dns-tsig" title="39.8. Secure transactions">Section 39.8, “Secure transactions”</a>.
  </p></section><section class="sect1" id="sec-dns-tsig" data-id-title="Secure transactions"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">39.8 </span><span class="title-name">Secure transactions</span></span> <a title="Permalink" class="permalink" href="#sec-dns-tsig">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Secure transactions can be made with transaction signatures (TSIGs) based on
   shared secret keys (also called TSIG keys). This section describes how to
   generate and use such keys.
  </p><p>
   Secure transactions are needed for communication between different servers
   and for the dynamic update of zone data. Making the access control dependent
   on keys is much more secure than merely relying on IP addresses.
  </p><p>
   Generate a TSIG key with the following command (for details, see
   <code class="command">man</code> <code class="option">tsig-keygen</code>):
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> tsig-keygen -a hmac-md5 host1-host2 &gt; host1-host2.key</pre></div><p>
   This creates a file with the name <code class="filename">host1-host2.key</code> with
   contents that may look as follows:
  </p><div class="verbatim-wrap"><pre class="screen">key "host1-host2" {                       |
    algorithm hmac-md5;
    secret "oHpBLgtcZso6wxnRTWdJMA==";
};</pre></div><p>
   The file must be transferred to the remote host, preferably in a secure way
   (using scp, for example). To enable a secure communication between
   <code class="literal">host1</code> and <code class="literal">host2</code>, the key must be
   included in the <code class="filename">/etc/named.conf</code> file on both the local
   and the remote
   server.
  </p><div class="verbatim-wrap"><pre class="screen">key host1-host2 {
 algorithm hmac-md5;
 secret "ejIkuCyyGJwwuN3xAteKgg==";
};</pre></div><div id="id-1.3.7.4.10.10" data-id-title="File permissions of /etc/named.conf" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: File permissions of <code class="filename">/etc/named.conf</code></div><p>
    Make sure that the permissions of <code class="filename">/etc/named.conf</code> are
    properly restricted. The default for this file is <code class="literal">0640</code>,
    with the owner being <code class="systemitem">root</code> and the
    group <code class="systemitem">named</code>. As an alternative,
    move the keys to an extra file with specially limited permissions, which is
    then included from <code class="filename">/etc/named.conf</code>. To include an
    external file, use:
   </p><div class="verbatim-wrap"><pre class="screen">include  "filename"</pre></div><p>
    Replace <code class="option">filename</code> with an absolute path to your file with
    keys.
   </p></div><p>





   To enable the server <code class="literal">host1</code> to use the key for
   <code class="literal">host2</code> (which has the address <code class="literal">10.1.2.3</code>
   in this example), the server's <code class="filename">/etc/named.conf</code> must
   include the following rule:
  </p><div class="verbatim-wrap"><pre class="screen">server 10.1.2.3 {
  keys { host1-host2. ;};
};</pre></div><p>
   Analogous entries must be included in the configuration files of
   <code class="literal">host2</code>.
  </p><p>
   Add TSIG keys for any ACLs (access control lists, not to be confused with
   file system ACLs) that are defined for IP addresses and address ranges to
   enable transaction security. The corresponding entry could look like this:
  </p><div class="verbatim-wrap"><pre class="screen">allow-update { key host1-host2. ;};</pre></div><p>
   This topic is discussed in more detail in the <span class="emphasis"><em>BIND Administrator
   Reference Manual</em></span> under <code class="literal">update-policy</code>.
  </p></section><section class="sect1" id="sec-dns-dnssec" data-id-title="DNS security"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">39.9 </span><span class="title-name">DNS security</span></span> <a title="Permalink" class="permalink" href="#sec-dns-dnssec">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   DNSSEC, or DNS security, is described in RFC 2535. The tools available
   for DNSSEC are discussed in the BIND Manual.
  </p><p>
   A zone considered secure must have one or several zone keys associated with
   it. These are generated with <code class="command">dnssec-keygen</code>, as are the
   host keys. The DSA encryption algorithm is currently used to generate these
   keys. The public keys generated should be included in the corresponding zone
   file with an <code class="systemitem">$INCLUDE</code> rule.
  </p><p>
   With the command <code class="command">dnssec-signzone</code>, you can create sets of
   generated keys (<code class="literal">keyset-</code> files), transfer them to the
   parent zone in a secure manner, and sign them. This generates the files to
   include for each zone in <code class="filename">/etc/named.conf</code>.
  </p></section><section class="sect1" id="sec-dns-info" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">39.10 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-dns-info">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dns.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For more information, see the <span class="emphasis"><em>BIND Administrator Reference
   Manual</em></span> from the
   <code class="systemitem">bind-doc</code> package, which is
   installed under <code class="filename">/usr/share/doc/packages/bind/arm</code>.
   Consider additionally consulting the RFCs referenced by the manual and the
   manual pages included with BIND.
   <code class="filename">/usr/share/doc/packages/bind/README.SUSE</code> contains
   up-to-date information about BIND in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
  </p></section></section><section class="chapter" id="cha-dhcp" data-id-title="DHCP"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">40 </span><span class="title-name">DHCP</span></span> <a title="Permalink" class="permalink" href="#cha-dhcp">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    The purpose of the <span class="emphasis"><em>Dynamic Host Configuration Protocol</em></span>
    (DHCP) is to assign network settings centrally (from a server) rather than
    configuring them locally on every workstation. A host configured to use
    DHCP does not have control over its own static address. It is enabled to
    configure itself automatically according to directions from
    the server. If you use the NetworkManager on the client side, you do not need to
    configure the client. This is useful if you have changing environments and
    only one interface active at a time. Never use NetworkManager on a machine that runs
    a DHCP server.
   </p></div></div></div></div><div id="id-1.3.7.5.3" data-id-title="IBM Z: DHCP support" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: IBM Z: DHCP support</div><p>
   On IBM Z platforms, DHCP only works on interfaces using the OSA and
   OSA Express network cards. These cards are the only ones with a MAC, which
   is required for the DHCP autoconfiguration features.
  </p></div><p>
  One way to configure a DHCP server is to identify each client using the
  hardware address of its network card (which should usually be fixed),
  then supply that client with identical settings each time it connects to the
  server. DHCP can also be configured to assign addresses to each relevant
  client dynamically from an address pool set up for this purpose. In the
  latter case, the DHCP server tries to assign the same address to the client
  each time it receives a request, even over extended periods. This works only
  if the network does not have more clients than addresses.
 </p><p>
  DHCP makes life easier for system administrators. Any changes, even bigger
  ones, related to addresses and the network configuration can be
  implemented centrally by editing the server's configuration file. This is
  much more convenient than reconfiguring multiple workstations. It is also
  much easier to integrate machines, particularly new machines, into the
  network, because they can be given an IP address from the pool. Retrieving
  the appropriate network settings from a DHCP server is especially useful in
  case of laptops regularly used in different networks.
 </p><p>
  In this chapter, the DHCP server runs in the same subnet as the
  workstations, <code class="systemitem">192.168.2.0/24</code> with
  <code class="systemitem">192.168.2.1</code> as gateway. It has
  the fixed IP address <code class="systemitem">192.168.2.254</code> and
  serves two address ranges,
  <code class="systemitem">192.168.2.10</code> to
  <code class="systemitem">192.168.2.20</code> and
  <code class="systemitem">192.168.2.100</code> to
  <code class="systemitem">192.168.2.200</code>.
 </p><p>
  A DHCP server supplies not only the IP address and the netmask, but also the
  host name, domain name, gateway and name server addresses for the client to
  use. Besides that, DHCP allows several parameters to be
  configured in a centralized way, for example, a time server from which
  clients may poll the current time or even a print server.
 </p><section class="sect1" id="sec-dhcp-yast" data-id-title="Configuring a DHCP server with YaST"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">40.1 </span><span class="title-name">Configuring a DHCP server with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-dhcp-yast">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To install a DHCP server, start YaST and select
   <span class="guimenu">Software</span> › <span class="guimenu">Software
   Management</span>. Choose
   <span class="guimenu">Filter</span> › <span class="guimenu">Patterns</span> and select <span class="guimenu">DHCP and DNS
   Server</span>. Confirm the installation of the dependent packages to
   finish the installation process.
  </p><div id="id-1.3.7.5.8.3" data-id-title="LDAP support" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: LDAP support</div><p>
    The YaST DHCP module can be set up to store the server configuration
    locally (on the host that runs the DHCP server) or to have its
    configuration data managed by an LDAP server. To use LDAP, set
    up your LDAP environment before configuring the DHCP server.
   </p><p>
    For more information about LDAP, see <span class="intraxref">Book “Security and Hardening Guide”, Chapter 5 “LDAP with 389 Directory Server”</span>.
   </p></div><p>
   The YaST DHCP module (<code class="systemitem">yast2-dhcp-server</code>) allows
   you to set up your own DHCP server for the local network. The module can run
   in wizard mode or expert configuration mode.
  </p><section class="sect2" id="sec-dhcp-yast-init" data-id-title="Initial configuration (wizard)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">40.1.1 </span><span class="title-name">Initial configuration (wizard)</span></span> <a title="Permalink" class="permalink" href="#sec-dhcp-yast-init">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When the module is started for the first time, a wizard starts, prompting
    you to make a few basic decisions concerning server administration.
    Completing this initial setup produces a basic server configuration
    that should function in its essential aspects. The expert mode can be used
    to deal with more advanced configuration tasks. Proceed as follows:
   </p><div class="procedure" id="pro-dhcp-yast-init"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      
      
      Select the interface from the list to which the DHCP server should listen
      and click <span class="guimenu">Select</span> and then <span class="guimenu">Next</span>. See
      <a class="xref" href="#fig-yast2-dhcp-wiz1" title="DHCP server: card selection">Figure 40.1, “DHCP server: card selection”</a>.
     </p><div id="id-1.3.7.5.8.5.3.1.2" data-id-title="DHCP and firewalld" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: DHCP and <code class="command">firewalld</code></div><p>
       The option <span class="guimenu">Open Firewall for Selected
       Interfaces</span> does not (yet) support <code class="command">firewalld</code>
       in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP6</span></span>. To manually open the DHCP port, run
      </p><div class="verbatim-wrap"><pre class="screen">       <code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">firewall-cmd --zone=public --permanent --add-service=dhcp</code>
       <code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">firewall-cmd --reload</code></pre></div></div><div class="figure" id="fig-yast2-dhcp-wiz1"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dhcp_wiz1.png"><img src="images/yast2_dhcp_wiz1.png" width="75%" alt="DHCP server: card selection" title="DHCP server: card selection"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 40.1: </span><span class="title-name">DHCP server: card selection </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dhcp-wiz1">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></li><li class="step"><p>
      Use the check box to determine whether your DHCP settings should be
      automatically stored by an LDAP server. In the text boxes, provide the
      network specifics for all clients the DHCP server should manage. These
      specifics are the domain name, address of a time server, addresses of the
      primary and secondary name server, addresses of a print and a WINS server
      (for a mixed network with both Windows and Linux clients), gateway
      address, and lease time. See <a class="xref" href="#fig-yast2-dhcp-wiz2" title="DHCP server: global settings">Figure 40.2, “DHCP server: global settings”</a>.
     </p><div class="figure" id="fig-yast2-dhcp-wiz2"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dhcp_wiz2.png"><img src="images/yast2_dhcp_wiz2.png" width="75%" alt="DHCP server: global settings" title="DHCP server: global settings"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 40.2: </span><span class="title-name">DHCP server: global settings </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dhcp-wiz2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></li><li class="step"><p>
      Configure how dynamic IP addresses should be assigned to clients. To do
      so, specify an IP range from which the server can assign addresses to
      DHCP clients. All these addresses must be covered by the same netmask.
      Also specify the lease time during which a client may keep its IP address
      without needing to request an extension of the lease. Optionally, specify
      the maximum lease time—the period during which the server reserves
      an IP address for a particular client. See
      <a class="xref" href="#fig-yast2-dhcp-wiz3" title="DHCP server: dynamic DHCP">Figure 40.3, “DHCP server: dynamic DHCP”</a>.
     </p><div class="figure" id="fig-yast2-dhcp-wiz3"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dhcp_wiz3.png"><img src="images/yast2_dhcp_wiz3.png" width="75%" alt="DHCP server: dynamic DHCP" title="DHCP server: dynamic DHCP"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 40.3: </span><span class="title-name">DHCP server: dynamic DHCP </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dhcp-wiz3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></li><li class="step"><p>
      Define how the DHCP server should be started. Specify whether to start
      the DHCP server automatically when the system is booted or manually when
      needed (for example, for testing purposes). Click
      <span class="guimenu">Finish</span> to complete the configuration of the server.
      See <a class="xref" href="#fig-yast2-dhcp-start" title="DHCP server: start-up">Figure 40.4, “DHCP server: start-up”</a>.

     </p><div class="figure" id="fig-yast2-dhcp-start"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dhcp_start.png"><img src="images/yast2_dhcp_start.png" width="75%" alt="DHCP server: start-up" title="DHCP server: start-up"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 40.4: </span><span class="title-name">DHCP server: start-up </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dhcp-start">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></li><li class="step"><p>
      Instead of using dynamic DHCP in the way described in the preceding
      steps, you can also configure the server to assign addresses in
      quasi-static fashion. Use the text boxes provided in the lower part to
      specify a list of the clients to manage in this way. Specifically,
      provide the <span class="guimenu">Name</span> and the <span class="guimenu">IP Address</span>
      to give to such a client, the <span class="guimenu">Hardware Address</span>, and
      the <span class="guimenu">Network Type</span> (token ring or Ethernet). Modify the
      list of clients, which is shown in the upper part with
      <span class="guimenu">Add</span>, <span class="guimenu">Edit</span>, and <span class="guimenu">Delete from
      List</span>. See <a class="xref" href="#fig-yast2-dhcp-statdhcp" title="DHCP server: host management">Figure 40.5, “DHCP server: host management”</a>.
     </p><div class="figure" id="fig-yast2-dhcp-statdhcp"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dhcp_statdhcp.png"><img src="images/yast2_dhcp_statdhcp.png" width="75%" alt="DHCP server: host management" title="DHCP server: host management"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 40.5: </span><span class="title-name">DHCP server: host management </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dhcp-statdhcp">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></li></ol></div></div></section><section class="sect2" id="sec-dhcp-yast-expert" data-id-title="DHCP server configuration (expert)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">40.1.2 </span><span class="title-name">DHCP server configuration (expert)</span></span> <a title="Permalink" class="permalink" href="#sec-dhcp-yast-expert">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Besides the configuration method discussed earlier, there is also an
    expert configuration mode that allows you to change the DHCP server setup
    in every detail. Start the expert configuration by clicking <span class="guimenu">DHCP
    Server Expert Configuration</span> in the <span class="guimenu">Start-Up</span>
    dialog (see <a class="xref" href="#fig-yast2-dhcp-start" title="DHCP server: start-up">Figure 40.4, “DHCP server: start-up”</a>).
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.5.8.6.3.1"><span class="term">Chroot environment and declarations</span></dt><dd><p>
       In this first dialog, make the existing configuration editable by
       selecting <span class="guimenu">Start DHCP Server</span>. An important feature of
       the behavior of the DHCP server is its ability to run in a chroot
       environment, or chroot jail, to secure the server host. If the DHCP
       server is compromised by an outside attack, the attacker is still in the
       chroot jail, which prevents them from accessing the rest of the system.
       The lower part of the dialog displays a tree view with the declarations
       that have already been defined. Modify these with <span class="guimenu">Add</span>,
       <span class="guimenu">Delete</span> and
       <span class="guimenu">Edit</span>. Selecting <span class="guimenu">Advanced</span> takes you
       to additional expert dialogs. See
       <a class="xref" href="#fig-yast2-dhcp-chroot" title="DHCP server: chroot jail and declarations">Figure 40.6, “DHCP server: chroot jail and declarations”</a>. After selecting
       <span class="guimenu">Add</span>, define the type of declaration to add. With
       <span class="guimenu">Advanced</span>, view the log file of the server, configure
       TSIG key management, and adjust the configuration of the firewall
       according to the setup of the DHCP server.
      </p><div class="figure" id="fig-yast2-dhcp-chroot"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dhcp_chroot.png"><img src="images/yast2_dhcp_chroot.png" width="75%" alt="DHCP server: chroot jail and declarations" title="DHCP server: chroot jail and declarations"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 40.6: </span><span class="title-name">DHCP server: chroot jail and declarations </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dhcp-chroot">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></dd><dt id="id-1.3.7.5.8.6.3.2"><span class="term">Selecting the declaration type</span></dt><dd><p>
       The <span class="guimenu">Global Options</span> of the DHCP server are made up of
       several declarations. This dialog lets you set the declaration types
       <span class="guimenu">Subnet</span>, <span class="guimenu">Host</span>, <span class="guimenu">Shared
       Network</span>, <span class="guimenu">Group</span>, <span class="guimenu">Pool of
       Addresses</span>, and <span class="guimenu">Class</span>. This example shows
       the selection of a new subnet (see
       <a class="xref" href="#fig-yast2-dhcp-newdec" title="DHCP server: selecting a declaration type">Figure 40.7, “DHCP server: selecting a declaration type”</a>).
      </p><div class="figure" id="fig-yast2-dhcp-newdec"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dhcp_newdec.png"><img src="images/yast2_dhcp_newdec.png" width="75%" alt="DHCP server: selecting a declaration type" title="DHCP server: selecting a declaration type"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 40.7: </span><span class="title-name">DHCP server: selecting a declaration type </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dhcp-newdec">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></dd><dt id="id-1.3.7.5.8.6.3.3"><span class="term">Subnet configuration</span></dt><dd><p>
       This dialog allows you specify a new subnet with its IP address and
       netmask. In the middle part of the dialog, modify the DHCP server start
       options for the selected subnet using <span class="guimenu">Add</span>,
       <span class="guimenu">Edit</span>, and <span class="guimenu">Delete</span>. To set up
       dynamic DNS for the subnet, select <span class="guimenu">Dynamic DNS</span>.
      </p><div class="figure" id="fig-yast2-dhcp-sub"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dhcp_sub.png"><img src="images/yast2_dhcp_sub.png" width="75%" alt="DHCP server: configuring subnets" title="DHCP server: configuring subnets"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 40.8: </span><span class="title-name">DHCP server: configuring subnets </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dhcp-sub">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></dd><dt id="id-1.3.7.5.8.6.3.4"><span class="term">TSIG key management</span></dt><dd><p>
       If you chose to configure dynamic DNS in the previous dialog, you can
       now configure the key management for a secure zone transfer. Selecting
       <span class="guimenu">OK</span> takes you to another dialog in which to configure
       the interface for dynamic DNS (see
       <a class="xref" href="#fig-yast2-dhcp-dyndns" title="DHCP server: interface configuration for dynamic DNS">Figure 40.10, “DHCP server: interface configuration for dynamic DNS”</a>).
      </p><div class="figure" id="fig-yast2-dhcp-tsig"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dhcp_tsig.png"><img src="images/yast2_dhcp_tsig.png" width="75%" alt="DHCP server: TSIG configuration" title="DHCP server: TSIG configuration"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 40.9: </span><span class="title-name">DHCP server: TSIG configuration </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dhcp-tsig">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></dd><dt id="id-1.3.7.5.8.6.3.5"><span class="term">Dynamic DNS: interface configuration</span></dt><dd><p>
       You can now activate dynamic DNS for the subnet by selecting
       <span class="guimenu">Enable Dynamic DNS for This Subnet</span>. After doing so,
       use the drop-down box to activate the TSIG keys for forward and reverse
       zones, making sure that the keys are the same for the DNS and the DHCP
       server. With <span class="guimenu">Update Global Dynamic DNS Settings</span>,
       enable the automatic update and adjustment of the global DHCP server
       settings according to the dynamic DNS environment. Finally, define which
       forward and reverse zones should be updated per dynamic DNS, specifying
       the name of the primary name server for each of the two zones. Selecting
       <span class="guimenu">OK</span> returns to the subnet configuration dialog (see
       <a class="xref" href="#fig-yast2-dhcp-sub" title="DHCP server: configuring subnets">Figure 40.8, “DHCP server: configuring subnets”</a>). Selecting <span class="guimenu">OK</span>
       again returns to the original expert configuration dialog.
      </p><div class="figure" id="fig-yast2-dhcp-dyndns"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dhcp_dyndns.png"><img src="images/yast2_dhcp_dyndns.png" width="75%" alt="DHCP server: interface configuration for dynamic DNS" title="DHCP server: interface configuration for dynamic DNS"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 40.10: </span><span class="title-name">DHCP server: interface configuration for dynamic DNS </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dhcp-dyndns">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div><div id="id-1.3.7.5.8.6.3.5.2.3" data-id-title="ignore client-updates option" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: <code class="option">ignore client-updates</code> option</div><p>
      When enabling Dynamic DNS for a zone, YaST automatically adds the
      <code class="literal">ignore client-updates</code> option to improve client
      compatibility. The option can be disabled if it is not required.
    </p></div></dd><dt id="id-1.3.7.5.8.6.3.6"><span class="term">Network interface configuration</span></dt><dd><p>
       To define the interfaces the DHCP server should listen to and to adjust
       the firewall configuration, select <span class="guimenu">Advanced</span> › <span class="guimenu">Interface Configuration</span> from the expert configuration dialog. From the list of
       interfaces displayed, select one or more that should be attended by the
       DHCP server. If clients in all subnets need to be able to communicate
       with the server and the server host also runs a firewall, adjust the
       firewall accordingly.
       
       
      </p><div id="id-1.3.7.5.8.6.3.6.2.2" data-id-title="DHCP and firewalld" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: DHCP and <code class="command">firewalld</code></div><p>
        The option <span class="guimenu">Open Firewall for Selected
         Interfaces</span> does not (yet) support <code class="command">firewalld</code>
        in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <span class="productnumber"><span class="phrase">15 SP6</span></span>. To manually open the DHCP port, run
       </p><div class="verbatim-wrap"><pre class="screen">        <code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">firewall-cmd --zone=public --permanent --add-service=dhcp</code>
        <code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">firewall-cmd --reload</code></pre></div></div><div class="figure" id="fig-yast2-dhcp-fire"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_dhcp_fire.png"><img src="images/yast2_dhcp_fire.png" width="75%" alt="DHCP server: network interface and firewall" title="DHCP server: network interface and firewall"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 40.11: </span><span class="title-name">DHCP server: network interface and firewall </span></span><a title="Permalink" class="permalink" href="#fig-yast2-dhcp-fire">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></dd></dl></div><p>
    After completing all configuration steps, close the dialog with
    <span class="guimenu">OK</span>. The server is now started with its new
    configuration.
   </p></section></section><section class="sect1" id="sec-dhcp-soft" data-id-title="DHCP software packages"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">40.2 </span><span class="title-name">DHCP software packages</span></span> <a title="Permalink" class="permalink" href="#sec-dhcp-soft">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Both the DHCP server and the DHCP clients are available for
   <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. The DHCP server available is <code class="systemitem">dhcpd</code> (published by the Internet Systems
   Consortium).

   On the client side, there is <code class="systemitem">dhcp-client</code> (also from
   ISC) and tools coming with the <code class="systemitem">wicked</code> package.
  </p><p>
   By default, the <code class="systemitem">wicked</code> tools are installed with the
   services <code class="systemitem">wickedd-dhcp4</code> and
   <code class="systemitem">wickedd-dhcp6</code>. Both are launched automatically on
   each system boot to watch for a DHCP server. They do not need a
   configuration file to do their job and work out of the box in most standard
   setups. For more complex situations, use the ISC
   <code class="systemitem">dhcp-client</code>, which is controlled by the
   configuration files <code class="filename">/etc/dhclient.conf</code> and
   <code class="filename">/etc/dhclient6.conf</code>.
  </p></section><section class="sect1" id="sec-dhcp-server" data-id-title="The DHCP server dhcpd"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">40.3 </span><span class="title-name">The DHCP server dhcpd</span></span> <a title="Permalink" class="permalink" href="#sec-dhcp-server">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The core of any DHCP system is the dynamic host configuration protocol
   daemon. This server <span class="emphasis"><em>leases</em></span> addresses and watches how
   they are used, according to the settings defined in the configuration file
   <code class="filename">/etc/dhcpd.conf</code>. By changing the parameters and values
   in this file, a system administrator can influence the program's behavior in
   many ways. Look at the basic sample <code class="filename">/etc/dhcpd.conf</code>
   file in <a class="xref" href="#dat-dhcp-conf" title="The configuration file /etc/dhcpd.conf">Example 40.1, “The configuration file /etc/dhcpd.conf”</a>.
  </p><div class="example" id="dat-dhcp-conf" data-id-title="The configuration file /etc/dhcpd.conf"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 40.1: </span><span class="title-name">The configuration file /etc/dhcpd.conf </span></span><a title="Permalink" class="permalink" href="#dat-dhcp-conf">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">default-lease-time 600;         # 10 minutes
max-lease-time 7200;            # 2  hours

option domain-name "example.com";
option domain-name-servers 192.168.1.116;
option broadcast-address 192.168.2.255;
option routers 192.168.2.1;
option subnet-mask 255.255.255.0;

subnet 192.168.2.0 netmask 255.255.255.0
 {
  range 192.168.2.10 192.168.2.20;
  range 192.168.2.100 192.168.2.200;
 }</pre></div></div></div><p>
   This simple configuration file should be sufficient to get the DHCP server
   to assign IP addresses in the network. Make sure that a semicolon is
   inserted at the end of each line, because otherwise dhcpd is not started.
  </p><p>
   The sample file can be divided into three sections. The first one defines
   how many seconds an IP address is leased to a requesting client by default
   (<code class="literal">default-lease-time</code>) before it should apply for renewal.
   This section also includes a statement of the maximum period for which a
   machine may keep an IP address assigned by the DHCP server without applying
   for renewal (<code class="literal">max-lease-time</code>).
  </p><p>
   In the second part, certain basic network parameters are defined on a global
   level:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     The line <code class="literal">option domain-name</code> defines the default domain
     of your network.
    </p></li><li class="listitem"><p>
     With the entry <code class="literal">option domain-name-servers</code>, specify up
     to three values for the DNS servers used to resolve IP addresses into host
     names and vice versa. Ideally, configure a name server on your machine or
     somewhere else in your network before setting up DHCP. That name server
     should also define a host name for each dynamic address and vice versa. To
     learn how to configure your own name server, read
     <a class="xref" href="#cha-dns" title="Chapter 39. The domain name system">Chapter 39, <em>The domain name system</em></a>.
    </p></li><li class="listitem"><p>
     The line <code class="literal">option broadcast-address</code> defines the broadcast
     address the requesting client should use.
    </p></li><li class="listitem"><p>
     With <code class="literal">option routers</code>, set where the server should send
     data packets that cannot be delivered to a host on the local network
     (according to the source and target host address and the subnet mask
     provided). Especially in smaller networks, this router is
     identical to the Internet gateway.
    </p></li><li class="listitem"><p>
     With <code class="literal">option subnet-mask</code>, specify the netmask assigned
     to clients.
    </p></li></ul></div><p>
   The last section of the file defines a network, including a subnet mask. To
   finish, specify the address range that the DHCP daemon should use to assign
   IP addresses to interested clients. In <a class="xref" href="#dat-dhcp-conf" title="The configuration file /etc/dhcpd.conf">Example 40.1, “The configuration file /etc/dhcpd.conf”</a>,
   clients may be given any address between <code class="literal">192.168.2.10</code>
   and <code class="literal">192.168.2.20</code> or <code class="literal">192.168.2.100</code>
   and <code class="literal">192.168.2.200</code>.
  </p><p>
   After editing these few lines, you should be able to activate the DHCP
   daemon with the command <code class="command">systemctl start dhcpd</code>. It will be
   ready for use immediately. Use the command
   <code class="command">rcdhcpd</code> <code class="option">check-syntax</code>


   to perform a brief syntax check. If you encounter any unexpected problems
   with your configuration (the server aborts with an error or does not return
   <code class="literal">done</code> on start), you should be able to find out what has
   gone wrong by looking for information either in the main system log that can
   be queried with the command <code class="command">journalctl</code> (see
   <a class="xref" href="#cha-journalctl" title="Chapter 21. journalctl: query the systemd journal">Chapter 21, <em><code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal</em></a> for more information).
  </p><p>
   On a default <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> system, the DHCP daemon is started in a chroot
   environment for security reasons. The configuration files must be copied to
   the chroot environment so the daemon can find them. Normally, there is no
   need to worry about this because the command <code class="command">systemctl start dhcpd
   </code> automatically copies the files.
  </p><section class="sect2" id="sec-dhcp-statip" data-id-title="Clients with fixed IP addresses"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">40.3.1 </span><span class="title-name">Clients with fixed IP addresses</span></span> <a title="Permalink" class="permalink" href="#sec-dhcp-statip">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    DHCP can also be used to assign a predefined, static address to a specific
    client. Addresses assigned explicitly always take priority over dynamic
    addresses from the pool. A static address never expires in the way a
    dynamic address would, for example, if there were not enough addresses
    available and the server needed to redistribute them among clients.
   </p><p>
    To identify a client configured with a static address, dhcpd uses the
    hardware address (which is a globally unique, fixed numerical code
    consisting of six octet pairs) for the identification of all network
    devices (for example, <code class="literal">00:30:6E:08:EC:80</code>). If the respective
    lines, like the ones in <a class="xref" href="#dat-dhcp-conf-add" title="Additions to the configuration file">Example 40.2, “Additions to the configuration file”</a>, are added to
    the configuration file of <a class="xref" href="#dat-dhcp-conf" title="The configuration file /etc/dhcpd.conf">Example 40.1, “The configuration file /etc/dhcpd.conf”</a>, the DHCP daemon
    always assigns the same set of data to the corresponding client.
   </p><div class="example" id="dat-dhcp-conf-add" data-id-title="Additions to the configuration file"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 40.2: </span><span class="title-name">Additions to the configuration file </span></span><a title="Permalink" class="permalink" href="#dat-dhcp-conf-add">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">host jupiter {
hardware ethernet 00:30:6E:08:EC:80;
fixed-address 192.168.2.100;
}</pre></div></div></div><p>
    The name of the respective client (<code class="literal">host</code>
    <em class="replaceable">HOSTNAME</em>, here <code class="systemitem">jupiter</code>)
    is entered in the first line and the MAC address in the second line. On
    Linux hosts, find the MAC address with the command <code class="command">ip</code>
    <code class="option">link show</code> followed by the network device (for example,
    <code class="literal">eth0</code>). The output should contain something like
   </p><div class="verbatim-wrap"><pre class="screen">link/ether 00:30:6E:08:EC:80</pre></div><p>
    In the preceding example, a client with a network card having the MAC
    address <code class="literal">00:30:6E:08:EC:80</code> is assigned the IP address
    <code class="systemitem">192.168.2.100</code> and the host name
    <code class="literal">jupiter</code> automatically. The type of hardware to enter is
    <code class="literal">ethernet</code> in nearly all cases, although
    <code class="literal">token-ring</code>, which is often found on IBM systems, is also
    supported.
   </p></section><section class="sect2" id="sec-dhcp-sle" data-id-title="The SUSE Linux Enterprise Server version"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">40.3.2 </span><span class="title-name">The <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> version</span></span> <a title="Permalink" class="permalink" href="#sec-dhcp-sle">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To improve security, the <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> version of the ISC's DHCP server
    comes with the non-root/chroot patch by Ari Edelkind applied. This enables
    dhcpd to run with the user ID
    <code class="systemitem">nobody</code> and run in a chroot
    environment (<code class="filename">/var/lib/dhcp</code>). To make this possible,
    the configuration file <code class="filename">dhcpd.conf</code> must be located in
    <code class="filename">/var/lib/dhcp/etc</code>. The init script automatically
    copies the file to this directory when starting.
   </p><p>
    Control the server's behavior regarding this feature via entries in
    the file <code class="filename">/etc/sysconfig/dhcpd</code>. To run dhcpd without
    the chroot environment, set the variable
    <code class="systemitem">DHCPD_RUN_CHROOTED</code> in
    <code class="filename">/etc/sysconfig/dhcpd</code> to <span class="quote">“<span class="quote">no</span>”</span>.
   </p><p>
    To enable dhcpd to resolve host names even from within the chroot
    environment, the following configuration files must be copied as well:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <code class="filename">/etc/localtime</code>
     </p></li><li class="listitem"><p>
      <code class="filename">/etc/host.conf</code>
     </p></li><li class="listitem"><p>
      <code class="filename">/etc/hosts</code>
     </p></li><li class="listitem"><p>
      <code class="filename">/var/run/netconfig/resolv.conf</code>
     </p></li></ul></div><p>
    These files are copied to <code class="filename">/var/lib/dhcp/etc/</code> when
    starting the init script. Take these copies into account for any changes
    that they require if they are dynamically modified by scripts like
    <code class="filename">/etc/ppp/ip-up</code>. However, there should be no need to
    worry about this if the configuration file only specifies IP addresses
    (instead of host names).
   </p><p>
    If your configuration includes additional files that should be copied into
    the chroot environment, set these under the variable
    <code class="systemitem">DHCPD_CONF_INCLUDE_FILES</code> in the file
    <code class="filename">/etc/sysconfig/dhcpd</code>. To ensure that the DHCP logging
    facility keeps working even after a restart of the syslog daemon, there is
    an additional entry <code class="systemitem">SYSLOGD_ADDITIONAL_SOCKET_DHCP</code>
    in the file <code class="filename">/etc/sysconfig/syslog</code>.
   </p></section></section><section class="sect1" id="sec-dhcp-addinfo" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">40.4 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-dhcp-addinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_dhcp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   More information about DHCP is available at the Web site of the
   <span class="emphasis"><em>Internet Systems Consortium</em></span>
   (<a class="link" href="https://www.isc.org/dhcp/" target="_blank">https://www.isc.org/dhcp/</a>). Information is
   also available in the <code class="option">dhcpd</code>, <code class="option">dhcpd.conf</code>,
   <code class="option">dhcpd.leases</code>, and <code class="option">dhcp-options</code> man pages.
  </p></section></section><section class="chapter" id="cha-slp" data-id-title="SLP"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">41 </span><span class="title-name">SLP</span></span> <a title="Permalink" class="permalink" href="#cha-slp">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_slp.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Configuring a network client requires detailed knowledge about services
    provided over the network (such as printing or LDAP, for example). To make
    it easier to configure such services on a network client, the
    <span class="quote">“<span class="quote">service location protocol</span>”</span> (SLP) was developed. SLP makes the
    availability and configuration data of selected services known to all
    clients in the local network. Applications that support SLP can use this
    information to be configured automatically.
   </p></div></div></div></div><p>
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> supports installation using installation sources provided
  with SLP and contains many system services with integrated support for SLP.
  You can use SLP to provide networked clients with central functions, such as
  an installation server, file server, or print server on your system. Services
  that offer SLP support include cupsd, login, ntp, openldap2-client, postfix,
  rpasswd, rsyncd, saned, sshd (via fish), vnc, and ypserv.
 </p><p>
  All packages necessary to use SLP services on a network client are installed
  by default. However, to <span class="emphasis"><em>provide</em></span> services via
  SLP, check that the <code class="systemitem">openslp-server</code> package is
  installed.
 </p><section class="sect1" id="sec-slp-sl-fend" data-id-title="The SLP front-end slptool"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">41.1 </span><span class="title-name">The SLP front-end <code class="command">slptool</code></span></span> <a title="Permalink" class="permalink" href="#sec-slp-sl-fend">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_slp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <code class="command">slptool</code> is a command line tool to query and register SLP
   services. The query functions are useful for diagnostic purposes. The most
   important <code class="command">slptool</code> subcommands are listed below.
   <code class="command">slptool</code> <code class="option">--help</code> lists all available
   options and functions.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.6.5.3.1"><span class="term">findsrvtypes</span></dt><dd><p>
      List all service types available on the network.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>slptool findsrvtypes
service:install.suse:nfs
service:install.suse:ftp
service:install.suse:http
service:install.suse:smb
service:ssh
service:fish
service:YaST.installation.suse:vnc
service:smtp
service:domain
service:management-software.IBM:hardware-management-console
service:rsync
service:ntp
service:ypserv</pre></div></dd><dt id="id-1.3.7.6.5.3.2"><span class="term">findsrvs <em class="replaceable">SERVICE_TYPE</em>
    </span></dt><dd><p>
      List all servers providing <em class="replaceable">SERVICE_TYPE</em>
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>slptool findsrvs service:ntp
service:ntp://ntp.example.com:123,57810
service:ntp://ntp2.example.com:123,57810</pre></div></dd><dt id="id-1.3.7.6.5.3.3"><span class="term">
     findattrs <em class="replaceable">SERVICE_TYPE</em>//<em class="replaceable">HOST</em>
    </span></dt><dd><p>
      List attributes for <em class="replaceable">SERVICE_TYPE</em> on
      <em class="replaceable">HOST</em>
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>slptool findattrs service:ntp://ntp.example.com
(owner=tux),(email=tux@example.com)</pre></div></dd><dt id="id-1.3.7.6.5.3.4"><span class="term">
     register <em class="replaceable">SERVICE
     type</em>//<em class="replaceable">HOST</em>:<em class="replaceable">PORT</em>
     "(<em class="replaceable">ATTRIBUTE=VALUE</em>),(<em class="replaceable">ATTRIBUTE=VALUE</em>)"
    </span></dt><dd><p>
      Registers <em class="replaceable">SERVICE_TYPE</em> on
      <em class="replaceable">HOST</em> with an optional list of attributes
     </p><div class="verbatim-wrap"><pre class="screen">slptool register service:ntp://ntp.example.com:57810 \
"(owner=tux),(email=tux@example.com)"</pre></div></dd><dt id="id-1.3.7.6.5.3.5"><span class="term">
     deregister <em class="replaceable">SERVICE_TYPE</em>//<em class="replaceable">host</em>
    </span></dt><dd><p>
      Deregisters <em class="replaceable">SERVICE_TYPE</em> on
      <em class="replaceable">HOST</em>
     </p><div class="verbatim-wrap"><pre class="screen">slptool deregister service:ntp://ntp.example.com</pre></div></dd></dl></div><p>
   For more information run <code class="command">slptool --help</code>.
  </p></section><section class="sect1" id="sec-slp-sl-reg" data-id-title="Providing services via SLP"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">41.2 </span><span class="title-name">Providing services via SLP</span></span> <a title="Permalink" class="permalink" href="#sec-slp-sl-reg">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_slp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To provide SLP services, the SLP daemon
   (<code class="systemitem">slpd</code>) must be running. Like most
   system services in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>,
   <code class="systemitem">slpd</code> is controlled by a
   separate start script. After the installation, the daemon is inactive by
   default. To activate it for the current session, run <code class="command">sudo systemctl
   start slpd</code>. If <code class="systemitem">slpd</code> should
   be activated on system start-up, run <code class="command">sudo systemctl enable
   slpd</code>.
  </p><p>
   Many applications in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> have integrated SLP support via the
   <code class="literal">libslp</code> library. If a service has not been compiled with
   SLP support, use one of the following methods to make it available via SLP:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.6.6.4.1"><span class="term">Static registration with <code class="filename">/etc/slp.reg.d</code>
    </span></dt><dd><p>
      Create a separate registration file for each new service. The following
      example registers a scanner service:
     </p><div class="verbatim-wrap"><pre class="screen">## Register a saned service on this system
## en means english language
## 65535 disables the timeout, so the service registration does
## not need refreshes
service:scanner.sane://$HOSTNAME:6566,en,65535
watch-port-tcp=6566
description=SANE scanner daemon</pre></div><p>
      The most important line in this file is the <span class="emphasis"><em>service
      URL</em></span>, which begins with <code class="literal">service:</code>. This
      contains the service type (<code class="literal">scanner.sane</code>) and the
      address under which the service is available on the server.
      <em class="replaceable">$HOSTNAME</em> is automatically replaced with the
      full host name. The name of the TCP port on which the relevant service
      can be found follows, separated by a colon. Then enter the language in
      which the service should appear and the duration of registration in
      seconds. These should be separated from the service URL by commas. Set
      the value for the duration of registration between <code class="literal">0</code>
      and <code class="literal">65535</code>. <code class="literal">0</code> prevents registration.
      <code class="literal">65535</code> removes all restrictions.
     </p><p>
      The registration file also contains the two variables
      <code class="systemitem">watch-port-tcp</code> and
      <code class="systemitem">description</code>.
      <code class="systemitem">watch-port-tcp</code> links the SLP service
      announcement to whether the relevant service is active by having
      <code class="systemitem">slpd</code> check the status of the
      service. The second variable contains a more precise description of the
      service that is displayed in suitable browsers.
     </p><div id="id-1.3.7.6.6.4.1.2.5" data-id-title="YaST and SLP" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: YaST and SLP</div><p>
       Specific services brokered by YaST, such as an installation server or YOU
       server, perform this registration automatically when you activate SLP in
       the module dialogs. YaST then creates registration files for these
       services.
      </p></div></dd><dt id="id-1.3.7.6.6.4.2"><span class="term">Static registration with <code class="filename">/etc/slp.reg</code>
    </span></dt><dd><p>
      The only difference between this method and the procedure with
      <code class="filename">/etc/slp.reg.d</code> is that all services are grouped
      within a central file.
     </p></dd><dt id="id-1.3.7.6.6.4.3"><span class="term">Dynamic registration with <code class="command">slptool</code>
    </span></dt><dd><p>
      If a service needs to be registered dynamically without the need of
      configuration files, use the <code class="command">slptool</code> command line utility. The same
      utility can also be used to deregister an existing service offering
      without restarting <code class="systemitem">slpd</code>. See
      <a class="xref" href="#sec-slp-sl-fend" title="41.1. The SLP front-end slptool">Section 41.1, “The SLP front-end <code class="command">slptool</code>”</a> for details.
     </p></dd></dl></div><section class="sect2" id="sec-slp-sl-reg-install" data-id-title="Setting up an SLP installation server"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">41.2.1 </span><span class="title-name">Setting up an SLP installation server</span></span> <a title="Permalink" class="permalink" href="#sec-slp-sl-reg-install">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_slp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Announcing the installation data via SLP within your network makes the
    network installation much easier, since the installation data such as IP
    address of the server or the path to the installation media are
    automatically required via SLP query. <span class="phrase">Refer to
    <span class="intraxref">Book “Deployment Guide”, Chapter 17 “Setting up a network installation source”</span> for instructions.</span>
   </p></section></section><section class="sect1" id="sec-slp-info" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">41.3 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-slp-info">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_slp.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.6.7.2.1"><span class="term">RFC 2608, 2609, 2610</span></dt><dd><p>
      RFC 2608 generally deals with the definition of SLP. RFC 2609 deals with
      the syntax of the service URLs used in greater detail and RFC 2610 deals
      with DHCP via SLP.
     </p></dd><dt id="id-1.3.7.6.7.2.2"><span class="term"><a class="link" href="http://www.openslp.org" target="_blank">http://www.openslp.org</a>
    </span></dt><dd><p>
      The home page of the OpenSLP project.
     </p></dd><dt id="id-1.3.7.6.7.2.3"><span class="term"><code class="filename">/usr/share/doc/packages/openslp</code>
    </span></dt><dd><p>
      This directory contains the documentation for SLP coming with the
      <code class="systemitem">openslp-server</code> package, including a
      <code class="filename">README.SUSE</code> containing the <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> details,
      the RFCs, and two introductory HTML documents. Programmers who want to
      use the SLP functions find more information in the
      <span class="emphasis"><em>Programmers Guide</em></span> that is included in the
      <code class="systemitem">openslp-devel</code> package<span class="phrase"> that is provided with the SUSE Software Development Kit</span>.
     </p></dd></dl></div></section></section><section class="chapter" id="cha-apache2" data-id-title="The Apache HTTP server"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">42 </span><span class="title-name">The Apache HTTP server</span></span> <a title="Permalink" class="permalink" href="#cha-apache2">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    According to the surveys from <a class="link" href="https://www.netcraft.com/" target="_blank">https://www.netcraft.com/</a>
    and <a class="link" href="https://w3techs.com/" target="_blank">https://w3techs.com/</a>, the Apache HTTP Server
    (Apache) is one of the world's most popular Web servers. Developed by the
    Apache Software Foundation
    (<a class="link" href="https://www.apache.org/" target="_blank">https://www.apache.org/</a>), it is available for
    most operating systems. <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> includes Apache version 2.4. This
    chapter describes how to install, configure and operate Apache. It also
    shows how to use additional modules, such as SSL, and how to troubleshoot
    Apache.
   </p></div></div></div></div><section class="sect1" id="sec-apache2-quickstart" data-id-title="Quick start"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">42.1 </span><span class="title-name">Quick start</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-quickstart">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   This section helps you quickly configure and start Apache.
   You must be <code class="systemitem">root</code> to install and configure Apache.
  </p><section class="sect2" id="sec-apache-quickstart-requirements" data-id-title="Requirements"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.1.1 </span><span class="title-name">Requirements</span></span> <a title="Permalink" class="permalink" href="#sec-apache-quickstart-requirements">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Make sure the following requirements are met before trying to set up the
    Apache Web server:
   </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
      The machine's network is configured properly. For more information about
      this topic, refer to <a class="xref" href="#cha-network" title="Chapter 23. Basic networking">Chapter 23, <em>Basic networking</em></a>.
     </p></li><li class="listitem"><p>
      The machine's exact system time is maintained by synchronizing with a
      time server. This is necessary because parts of the HTTP protocol depend
      on the correct time. See <a class="xref" href="#cha-ntp" title="Chapter 38. Time synchronization with NTP">Chapter 38, <em>Time synchronization with NTP</em></a> to learn more about
      this topic.
     </p></li><li class="listitem"><p>
      The latest security updates are installed. If in doubt, run a YaST
      Online Update.
     </p></li><li class="listitem"><p>
      The default Web server port (<code class="literal">80</code>) is opened in the
      firewall. For this, configure <code class="systemitem">firewalld</code> to allow the service
      <code class="literal">http</code> in the public zone. See
      <span class="intraxref">Book “Security and Hardening Guide”, Chapter 23 “Masquerading and firewalls”, Section 23.4.3 “Configuring the firewall on the command line”</span> for details.
     </p></li></ol></div></section><section class="sect2" id="sec-apache2-quickstart-installation" data-id-title="Installation"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.1.2 </span><span class="title-name">Installation</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-quickstart-installation">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Apache on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is not installed by default. To install it with a
    standard, predefined configuration that runs <span class="quote">“<span class="quote">out of the box</span>”</span>,
    proceed as follows:
   </p><div class="procedure" id="id-1.3.7.7.3.4.3" data-id-title="Installing Apache with the default configuration"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 42.1: </span><span class="title-name">Installing Apache with the default configuration </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.7.3.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start YaST and select <span class="guimenu">Software</span> › <span class="guimenu">Software Management</span>.
     </p></li><li class="step"><p>
      Choose <span class="guimenu">Filter</span> › <span class="guimenu">Patterns</span> and select <span class="guimenu">Web and LAMP Server</span>.
     </p></li><li class="step"><p>
      Confirm the installation of the dependent packages to finish the
      installation process.
     </p></li></ol></div></div></section><section class="sect2" id="sec-apache-quickstart-start" data-id-title="Start"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.1.3 </span><span class="title-name">Start</span></span> <a title="Permalink" class="permalink" href="#sec-apache-quickstart-start">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can start Apache automatically at boot time or start it manually.
   </p><p>
    To make sure that Apache is automatically started during boot in the
    targets <code class="literal">multi-user.target</code> and
    <code class="literal">graphical.target</code>, execute the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl enable apache2.service</pre></div><p>
    For more information about the
    <code class="systemitem">systemd</code> targets in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
    and a description of the YaST <span class="guimenu">Services Manager</span>, refer to
    <a class="xref" href="#sec-boot-runlevel-edit" title="19.4. Managing services with YaST">Section 19.4, “Managing services with YaST”</a>.
   </p><p>
    To manually start Apache using the shell, run <code class="command">systemctl start
    apache2.service</code>.
   </p><div class="procedure" id="id-1.3.7.7.3.5.7" data-id-title="Checking if Apache is running"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 42.2: </span><span class="title-name">Checking if Apache is running </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.7.3.5.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
     If you do not receive error messages when starting Apache, this usually
     indicates that the Web server is running. To test this:
    </p><ol class="procedure" type="1"><li class="step"><p>
      Start a browser and open <a class="link" href="http://localhost/" target="_blank">http://localhost/</a>.
     </p><p>
      If Apache is up and running, you get a test page stating <span class="quote">“<span class="quote">It
      works!</span>”</span>.
     </p></li><li class="step"><p>
      If you do not see this page, refer to
      <a class="xref" href="#sec-apache2-troubleeshooting" title="42.9. Troubleshooting">Section 42.9, “Troubleshooting”</a>.
     </p></li></ol></div></div><p>
    Now that the Web server is running, you can add your own documents, adjust
    the configuration according to your needs, or add functionality by
    installing modules.
   </p></section></section><section class="sect1" id="sec-apache2-configuration" data-id-title="Configuring Apache"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">42.2 </span><span class="title-name">Configuring Apache</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> offers two configuration options:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <a class="xref" href="#sec-apache2-configuration-manually" title="42.2.2. Configuring Apache manually">Configuring Apache manually</a>
    </p></li><li class="listitem"><p>
     <a class="xref" href="#sec-apache2-configuration-yast" title="42.2.3. Configuring Apache with YaST">Configuring Apache with YaST</a>
    </p></li></ul></div><p>
   Manual configuration offers a higher level of detail, but lacks the
   convenience of the YaST GUI.
  </p><div id="id-1.3.7.7.4.5" data-id-title="Reload or restart Apache after configuration changes" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Reload or restart Apache after configuration changes</div><p>
    Most configuration changes require a reload or a restart of Apache
    to take effect. Manually reload Apache with <code class="command">systemctl reload
    apache2.service</code> or use one of the restart options as described in
    <a class="xref" href="#sec-apache2-start-stop" title="42.3. Starting and stopping Apache">Section 42.3, “Starting and stopping Apache”</a>.
   </p><p>
    If you configure Apache with YaST, this can be taken care of
    automatically if you set <span class="guimenu">HTTP Service</span> to
    <span class="guimenu">Enabled</span> as described in
    <a class="xref" href="#sec-apache2-configuration-yast-server-configuration" title="42.2.3.2. HTTP server configuration">Section 42.2.3.2, “HTTP server configuration”</a>.
   </p></div><section class="sect2" id="sec-apache2-configuration-manually-configfiles" data-id-title="Apache configuration files"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.2.1 </span><span class="title-name">Apache configuration files</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-manually-configfiles">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This section gives an overview of the Apache configuration files. If you
    use YaST for configuration, you do not need to touch these
    files—however, the information might be useful for you to switch to
    manual configuration later on.
   </p><p>
    Apache configuration files can be found in two different locations:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <a class="xref" href="#sec-apache2-configuration-manually-configfiles-etc-sysconfig-apache2" title="42.2.1.1. /etc/sysconfig/apache2"><code class="filename">/etc/sysconfig/apache2</code></a>
     </p></li><li class="listitem"><p>
      <a class="xref" href="#sec-apache2-configuration-manually-configfiles-etc-apache2" title="42.2.1.2. /etc/apache2/"><code class="filename">/etc/apache2/</code></a>
     </p></li></ul></div><section class="sect3" id="sec-apache2-configuration-manually-configfiles-etc-sysconfig-apache2" data-id-title="/etc/sysconfig/apache2"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">42.2.1.1 </span><span class="title-name"><code class="filename">/etc/sysconfig/apache2</code></span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-manually-configfiles-etc-sysconfig-apache2">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     <code class="filename">/etc/sysconfig/apache2</code> controls global Apache settings,
     like modules to load, additional configuration files to
     include, flags with which the server should be started, and flags that
     should be added to the command line. Every configuration option in this
     file is extensively documented and therefore not mentioned here. For a
     general-purpose Web server, the settings in
     <code class="filename">/etc/sysconfig/apache2</code> should be sufficient for any
     configuration needs.
    </p></section><section class="sect3" id="sec-apache2-configuration-manually-configfiles-etc-apache2" data-id-title="/etc/apache2/"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">42.2.1.2 </span><span class="title-name"><code class="filename">/etc/apache2/</code></span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-manually-configfiles-etc-apache2">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     <code class="filename">/etc/apache2/</code> hosts all configuration files for
     Apache. In the following, the purpose of each file is explained. Each file
     includes several configuration options (also called
     <span class="emphasis"><em>directives</em></span>). Every configuration option in these
     files is extensively documented and therefore not mentioned here.
    </p><p>
     The Apache configuration files are organized as follows:
    </p><div class="verbatim-wrap"><pre class="screen">/etc/apache2/
     |
     |- charset.conv
     |- conf.d/
     |   |
     |   |- *.conf
     |
     |- default-server.conf
     |- errors.conf
     |- global.conf
     |- httpd.conf
     |- listen.conf
     |- loadmodule.conf
     |- magic
     |- mime.types
     |- mod_*.conf
     |- protocols.conf
     |- server-tuning.conf
     |- ssl-global.conf
     |- ssl.*
     |- sysconfig.d
     |   |
     |   |- global.conf
     |   |- include.conf
     |   |- loadmodule.conf . .
     |
     |- uid.conf
     |- vhosts.d
     |   |- *.conf</pre></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Apache configuration files in /etc/apache2/ </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.7.4.6.6.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.7.7.4.6.6.5.2"><span class="term"><code class="filename">charset.conv</code></span></dt><dd><p>
        Specifies which character sets to use for different languages. Do not
        edit this file.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.3"><span class="term"><code class="filename">conf.d/*.conf</code></span></dt><dd><p>
        Configuration files added by other modules. These configuration files
        can be included into your virtual host configuration where needed. See
        <code class="filename">vhosts.d/vhost.template</code> for examples. By doing so,
        you can provide different module sets for different virtual hosts.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.4"><span class="term"><code class="filename">default-server.conf</code></span></dt><dd><p>
        Global configuration for all virtual hosts with reasonable defaults.
        Instead of changing the values, overwrite them with a virtual host
        configuration.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.5"><span class="term"><code class="filename">errors.conf</code></span></dt><dd><p>
        Defines how Apache responds to errors. To customize these messages for
        all virtual hosts, edit this file. Otherwise overwrite these directives
        in your virtual host configurations.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.6"><span class="term"><code class="filename">global.conf</code></span></dt><dd><p>
        General configuration of the main Web server process, such as the access
        path, error logs, or the level of logging.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.7"><span class="term"><code class="filename">httpd.conf</code></span></dt><dd><p>
        The main Apache server configuration file. Avoid changing this file. It
        primarily contains include statements and global settings. Overwrite
        global settings in the pertinent configuration files listed here.
        Change host-specific settings (such as document root) in your virtual
        host configuration.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.8"><span class="term"><code class="filename">listen.conf</code></span></dt><dd><p>
        Binds Apache to specific IP addresses and ports. Name-based virtual
        hosting is also configured here. For details, see
        <a class="xref" href="#sec-apache2-configuration-manually-vhost-named-vhosts" title="42.2.2.1.1. Name-based virtual hosts">Section 42.2.2.1.1, “Name-based virtual hosts”</a>.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.9"><span class="term"><code class="filename">magic</code></span></dt><dd><p>
        Data for the mime_magic module that helps Apache automatically
        determine the MIME type of an unknown file. Do not change this file.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.10"><span class="term"><code class="filename">mime.types</code></span></dt><dd><p>
        MIME types known by the system (this is a link to
        <code class="filename">/etc/mime.types</code>). Do not edit this file. If you
        need to add MIME types not listed here, add them to
        <code class="filename">mod_mime-defaults.conf</code>.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.11"><span class="term"><code class="filename">mod_*.conf</code></span></dt><dd><p>
        Configuration files for the modules that are installed by default.
        Refer to <a class="xref" href="#sec-apache2-modules" title="42.4. Installing, activating and configuring modules">Section 42.4, “Installing, activating and configuring modules”</a> for details.
        Configuration files for optional modules reside in the directory
        <code class="filename">conf.d</code>.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.12"><span class="term"><code class="filename">protocols.conf</code></span></dt><dd><p>
        Configuration directives for serving pages over HTTP2 connection.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.13"><span class="term"><code class="filename">server-tuning.conf</code></span></dt><dd><p>
        Contains configuration directives for the different MPMs (see
        <a class="xref" href="#sec-apache2-modules-mpm" title="42.4.4. Multiprocessing modules">Section 42.4.4, “Multiprocessing modules”</a>) and general configuration
        options that control Apache's performance. Properly test your Web
        server when making changes here.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.14"><span class="term"><code class="filename">ssl-global.conf</code> and <code class="filename">ssl.*</code></span></dt><dd><p>
        Global SSL configuration and SSL certificate data. Refer to
        <a class="xref" href="#sec-apache2-ssl" title="42.6. Setting up a secure Web server with SSL">Section 42.6, “Setting up a secure Web server with SSL”</a> for details.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.15"><span class="term"><code class="filename">sysconfig.d/*.conf</code></span></dt><dd><p>
        Configuration files automatically generated from
        <code class="filename">/etc/sysconfig/apache2</code>. Do not change any of these
        files—edit <code class="filename">/etc/sysconfig/apache2</code> instead.
        Do not put other configuration files in this directory.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.16"><span class="term"><code class="filename">uid.conf</code></span></dt><dd><p>
        Specifies under which user and group ID Apache runs. Do not change this
        file.
       </p></dd><dt id="id-1.3.7.7.4.6.6.5.17"><span class="term"><code class="filename">vhosts.d/*.conf</code></span></dt><dd><p>
        Your virtual host configuration should be located here. The directory
        contains template files for virtual hosts with and without SSL. Every
        file in this directory ending with <code class="filename">.conf</code> is
        automatically included in the Apache configuration. Refer to
        <a class="xref" href="#sec-apache2-configuration-manually-vhost" title="42.2.2.1. Virtual host configuration">Section 42.2.2.1, “Virtual host configuration”</a> for details.
       </p></dd></dl></div></section></section><section class="sect2" id="sec-apache2-configuration-manually" data-id-title="Configuring Apache manually"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.2.2 </span><span class="title-name">Configuring Apache manually</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-manually">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Configuring Apache manually involves editing plain text configuration files
    as user <code class="systemitem">root</code>.
   </p><section class="sect3" id="sec-apache2-configuration-manually-vhost" data-id-title="Virtual host configuration"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">42.2.2.1 </span><span class="title-name">Virtual host configuration</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-manually-vhost">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The term <span class="emphasis"><em>virtual host</em></span> refers to Apache's ability to
     serve multiple universal resource identifiers (URIs) from the same
     physical machine. This means that several domains, such as www.example.com and
     www.example.net, are run by a single Web server on one physical machine.
    </p><p>
     It is common practice to use virtual hosts to save administrative effort
     (only a single Web server needs to be maintained) and hardware expenses
     (each domain does not require a dedicated server). Virtual hosts can be
     name based, IP based, or port based.
    </p><p>
     To list all existing virtual hosts, use the command
     <code class="command">apache2ctl</code> <code class="option">-S</code>. This outputs a list
     showing the default server and all virtual hosts together with their IP
     addresses and listening ports. Furthermore, the list also contains an
     entry for each virtual host showing its location in the configuration
     files.
    </p><p>
     Virtual hosts can be configured via YaST as described in
     <a class="xref" href="#sec-apache2-configuration-yast-wizard-virtual-hosts" title="42.2.3.1.4. Virtual hosts">Section 42.2.3.1.4, “Virtual hosts”</a> or
     by manually editing a configuration file. By default, Apache in
     <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is prepared for one configuration file per virtual host in
     <code class="filename">/etc/apache2/vhosts.d/</code>. All files in this directory
     with the extension <code class="filename">.conf</code> are automatically included
     to the configuration. A basic template for a virtual host is provided in
     this directory (<code class="filename">vhost.template</code> or
     <code class="filename">vhost-ssl.template</code> for a virtual host with SSL
     support).
    </p><div id="id-1.3.7.7.4.7.3.6" data-id-title="Always create a virtual host configuration" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Always create a virtual host configuration</div><p>
      It is recommended to always create a virtual host configuration file,
      even if your Web server only hosts one domain. By doing so, you not only
      have the domain-specific configuration in one file, but you can always
      fall back to a working basic configuration by simply moving, deleting or
      renaming the configuration file for the virtual host. For the same
      reason, you should also create separate configuration files for each
      virtual host.
     </p><p>
      When using name-based virtual hosts, it is recommended to set up a default
      configuration that is used when a domain name does not match a virtual
      host configuration. The default virtual host is the one whose
      configuration is loaded first. Since the order of the configuration files
      is determined by file name, start the file name of the default virtual
      host configuration with an underscore character (<code class="literal">_</code>) to
      make sure it is loaded first (for example:
      <code class="filename">_default_vhost.conf</code>).
     </p></div><p>
     The
     <code class="systemitem">&lt;VirtualHost&gt;</code><code class="systemitem">&lt;/VirtualHost&gt;</code>
     block holds the information that applies to a particular domain. When
     Apache receives a client request for a defined virtual host, it uses the
     directives enclosed in this section. Almost all directives can be used in
     a virtual host context. See
     <a class="link" href="https://httpd.apache.org/docs/2.4/mod/quickreference.html" target="_blank">https://httpd.apache.org/docs/2.4/mod/quickreference.html</a>
     for further information about Apache's configuration directives.
    </p><section class="sect4" id="sec-apache2-configuration-manually-vhost-named-vhosts" data-id-title="Name-based virtual hosts"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">42.2.2.1.1 </span><span class="title-name">Name-based virtual hosts</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-manually-vhost-named-vhosts">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      With name-based virtual hosts, more than one Web site is served per IP
      address. Apache uses the host field in the HTTP header that is sent by
      the client to connect the request to a matching
      <code class="systemitem">ServerName</code> entry of one of the virtual host
      declarations. If no matching <code class="systemitem">ServerName</code> is
      found, the first specified virtual host is used as a default.
     </p><p>
      The first step is to create a <code class="literal">&lt;VirtualHost&gt;</code>
      block for each different name-based host that you want to serve. Inside
      each <code class="literal">&lt;VirtualHost&gt;</code> block, you will need at
      minimum a <code class="literal">ServerName</code> directive to designate which host
      is served and a <code class="literal">DocumentRoot</code> directive to show where
      in the file system the content for that host resides.
     </p><div class="example" id="ex-apache2-virtual-hosts-name-based" data-id-title="Basic examples of name-based VirtualHost entries"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 42.1: </span><span class="title-name">Basic examples of name-based <code class="systemitem">VirtualHost</code> entries </span></span><a title="Permalink" class="permalink" href="#ex-apache2-virtual-hosts-name-based">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;VirtualHost *:80&gt;
# This first-listed virtual host is also the default for *:80
ServerName www.example.com
ServerAlias example.com
DocumentRoot /srv/www/htdocs/domain
&lt;/VirtualHost&gt;

&lt;VirtualHost *:80&gt;
ServerName other.example.com
DocumentRoot /srv/www/htdocs/otherdomain
&lt;/VirtualHost&gt;</pre></div></div></div><p>
      The opening <code class="systemitem">VirtualHost</code> tag takes the IP address
      (or fully qualified domain name) as an argument in a name-based virtual
      host configuration. A port number directive is optional.
     </p><p>
      The wild card <span class="emphasis"><em>*</em></span> is also allowed as a substitute for
      the IP address. When using IPv6 addresses, the address must be included
      in square brackets.
     </p><div class="example" id="ex-apache-directives-virtualhost-name-based" data-id-title="Name-based VirtualHost directives"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 42.2: </span><span class="title-name">Name-based <code class="systemitem">VirtualHost</code> directives </span></span><a title="Permalink" class="permalink" href="#ex-apache-directives-virtualhost-name-based">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;VirtualHost 192.168.3.100:80&gt;
  ...
&lt;/VirtualHost&gt;

&lt;VirtualHost 192.168.3.100&gt;
  ...
&lt;/VirtualHost&gt;

&lt;VirtualHost *:80&gt;
  ...
&lt;/VirtualHost&gt;

&lt;VirtualHost *&gt;
  ...
&lt;/VirtualHost&gt;

&lt;VirtualHost [2002:c0a8:364::]&gt;
  ...
&lt;/VirtualHost&gt;</pre></div></div></div></section><section class="sect4" id="sec-apache2-configuration-manually-vhost-ip-vhosts" data-id-title="IP-based virtual hosts"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">42.2.2.1.2 </span><span class="title-name">IP-based virtual hosts</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-manually-vhost-ip-vhosts">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      This alternative virtual host configuration requires the setup of
      multiple IP addresses for a machine. One instance of Apache hosts several
      domains, each of which is assigned a different IP.
     </p><p>
      The physical server must have one IP address for each IP-based virtual
      host. If the machine does not have multiple network cards, virtual
      network interfaces (IP aliasing) can also be used.
     </p><p>
      The following example shows Apache running on a machine with the IP
      <code class="systemitem">192.168.3.100</code>, hosting two domains
      on the additional IP addresses
      <code class="systemitem">192.168.3.101</code> and
      <code class="systemitem">192.168.3.102</code>. A separate
      <code class="systemitem">VirtualHost</code> block is needed for every virtual
      server.
     </p><div class="example" id="ex-apache-directives-virtualhost-ip-based" data-id-title="IP-based VirtualHost directives"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 42.3: </span><span class="title-name">IP-based <code class="systemitem">VirtualHost</code> directives </span></span><a title="Permalink" class="permalink" href="#ex-apache-directives-virtualhost-ip-based">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;VirtualHost 192.168.3.101&gt;
  ...
&lt;/VirtualHost&gt;

&lt;VirtualHost 192.168.3.102&gt;
  ...
&lt;/VirtualHost&gt;</pre></div></div></div><p>
      Here, <code class="systemitem">VirtualHost</code> directives are only specified
      for interfaces other than <code class="systemitem">192.168.3.100</code>. When a
      <code class="systemitem">Listen</code> directive is also configured for
      <code class="systemitem">192.168.3.100</code>, a separate IP-based virtual host must
      be created to answer HTTP requests to that interface—otherwise the
      directives found in the default server configuration
      (<code class="filename">/etc/apache2/default-server.conf</code>) are applied.
     </p></section><section class="sect4" id="sec-apache2-configuration-manually-vhost-basic-configuration" data-id-title="Basic virtual host configuration"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">42.2.2.1.3 </span><span class="title-name">Basic virtual host configuration</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-manually-vhost-basic-configuration">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      At least the following directives should be in each virtual host
      configuration to set up a virtual host. See
      <code class="filename">/etc/apache2/vhosts.d/vhost.template</code> for more
      options.
     </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.7.4.7.3.10.3.1"><span class="term"><code class="systemitem">ServerName</code></span></dt><dd><p>
         The fully qualified domain name under which the host should be
         addressed.
        </p></dd><dt id="id-1.3.7.7.4.7.3.10.3.2"><span class="term"><code class="systemitem">DocumentRoot</code></span></dt><dd><p>
         Path to the directory from which Apache should serve files for this
         host. For security reasons, access to the entire file system is
         forbidden by default, so you must explicitly unlock this directory
         within a <code class="systemitem">Directory</code> container.
        </p></dd><dt id="id-1.3.7.7.4.7.3.10.3.3"><span class="term"><code class="systemitem">ServerAdmin</code></span></dt><dd><p>
         E-mail address of the server administrator. This address is, for
         example, shown on error pages Apache creates.
        </p></dd><dt id="id-1.3.7.7.4.7.3.10.3.4"><span class="term"><code class="systemitem">ErrorLog</code></span></dt><dd><p>
         The error log file for this virtual host. Although it is not necessary
         to create separate error log files for each virtual host, it is common
         practice to do so, because it makes the debugging of errors much
         easier. <code class="filename">/var/log/apache2/</code> is the default
         directory for Apache's log files.
        </p></dd><dt id="id-1.3.7.7.4.7.3.10.3.5"><span class="term"><code class="systemitem">CustomLog</code></span></dt><dd><p>
         The access log file for this virtual host. Although it is not
         necessary to create separate access log files for each virtual host,
         it is common practice to do so, because it allows the separate
         analysis of access statistics for each host.
         <code class="filename">/var/log/apache2/</code> is the default directory for
         Apache's log files.
        </p></dd></dl></div><p>
      As mentioned above, access to the whole file system is forbidden by
      default for security reasons. Therefore, explicitly unlock the
      directories in which you have placed the files Apache should
      serve, for example, the <code class="systemitem">DocumentRoot</code>:
     </p><div class="verbatim-wrap"><pre class="screen">&lt;Directory "/srv/www/www.example.com/htdocs"&gt;
  Require all granted
&lt;/Directory&gt;</pre></div><div id="id-1.3.7.7.4.7.3.10.6" data-id-title="Require all granted" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: <code class="literal">Require all granted</code></div><p>
       In previous versions of Apache, the statement <code class="literal">Require all
       granted</code> was expressed as:
      </p><div class="verbatim-wrap"><pre class="screen">Order allow,deny
Allow from all</pre></div><p>
       This old syntax is still supported by the
       <code class="literal">mod_access_compat</code> module.
      </p></div><p>
      The complete configuration file looks like this:
     </p><div class="example" id="ex-apache-directives-virtualhost-basic-configuration" data-id-title="Basic VirtualHost configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 42.4: </span><span class="title-name">Basic <code class="systemitem">VirtualHost</code> configuration </span></span><a title="Permalink" class="permalink" href="#ex-apache-directives-virtualhost-basic-configuration">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;VirtualHost 192.168.3.100&gt;
  ServerName www.example.com
  DocumentRoot /srv/www/www.example.com/htdocs
  ServerAdmin webmaster@example.com
  ErrorLog /var/log/apache2/www.example.com_log
  CustomLog /var/log/apache2/www.example.com-access_log common
  &lt;Directory "/srv/www/www.example.com/htdocs"&gt;
  Require all granted
  &lt;/Directory&gt;
&lt;/VirtualHost&gt;</pre></div></div></div></section></section></section><section class="sect2" id="sec-apache2-configuration-yast" data-id-title="Configuring Apache with YaST"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.2.3 </span><span class="title-name">Configuring Apache with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-yast">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  To configure your Web server with YaST, start YaST and select
  <span class="guimenu">Network Services</span> › <span class="guimenu">HTTP
  Server</span>. When starting the module for the first time,
  the <span class="guimenu">HTTP Server Wizard</span> starts, prompting you to make a few
  basic decisions concerning administration of the server. After having
  finished the wizard, the <span class="guimenu">HTTP Server Configuration</span> dialog
  starts each time you call the <span class="guimenu">HTTP Server</span> module. For more
  information, see
  <a class="xref" href="#sec-apache2-configuration-yast-server-configuration" title="42.2.3.2. HTTP server configuration">Section 42.2.3.2, “HTTP server configuration”</a>.
 </p><section class="sect3" id="sec-apache2-configuration-yast-wizard" data-id-title="HTTP server wizard"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">42.2.3.1 </span><span class="title-name">HTTP server wizard</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-yast-wizard">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The HTTP Server Wizard consists of five steps. In the last step of the
   dialog, you may enter the expert configuration mode to make even more
   specific settings.
  </p><section class="sect4" id="sec-apache2-configuration-yast-wizard-network-device" data-id-title="Network device selection"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">42.2.3.1.1 </span><span class="title-name">Network device selection</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-yast-wizard-network-device">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Here, specify the network interfaces and ports Apache uses to listen for
    incoming requests. You can select any combination of existing network
    interfaces and their respective IP addresses. Ports from all three ranges
    (well-known ports, registered ports, and dynamic or private ports) that are
    not reserved by other services can be used. The default setting is to
    listen on all network interfaces (IP addresses) on port
    <code class="systemitem">80</code>.
   </p><p>
    Check <span class="guimenu">Open Port In Firewall</span> to open the ports in the
    firewall that the Web server listens on. This is necessary to make the Web
    server available on the network, which can be a LAN, WAN, or the public
    Internet. Keeping the port closed is only useful in test situations where
    no external access to the Web server is necessary. If you have multiple
    network interfaces, click <span class="guimenu">Firewall Details</span> to specify on
    which interface(s) the port(s) should be opened.
   </p><p>
    Click <span class="guimenu">Next</span> to continue with the configuration.
   </p></section><section class="sect4" id="sec-apache2-configuration-yast-wizard-modules" data-id-title="Modules"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">42.2.3.1.2 </span><span class="title-name">Modules</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-yast-wizard-modules">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <span class="guimenu">Modules</span> configuration option allows for the
    activation or deactivation of the script languages that the Web server
    should support. For the activation or deactivation of other modules, refer
    to
    <a class="xref" href="#sec-apache2-configuration-yast-server-configuration-modules" title="42.2.3.2.2. Server modules">Section 42.2.3.2.2, “Server modules”</a>.
    Click <span class="guimenu">Next</span> to advance to the next dialog.
   </p></section><section class="sect4" id="sec-apache2-configuration-yast-wizard-default-host" data-id-title="Default host"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">42.2.3.1.3 </span><span class="title-name">Default host</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-yast-wizard-default-host">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This option pertains to the default Web server. As explained in
    <a class="xref" href="#sec-apache2-configuration-manually-vhost" title="42.2.2.1. Virtual host configuration">Section 42.2.2.1, “Virtual host configuration”</a>, Apache can
    serve multiple virtual hosts from a single physical machine. The first
    declared virtual host in the configuration file is commonly called the
    <span class="emphasis"><em>default host</em></span>. Each virtual host inherits the default
    host's configuration.
   </p><p>
    To edit the host settings (also called <span class="emphasis"><em>directives</em></span>),
    select the appropriate entry in the table then click
    <span class="guimenu">Edit</span>. To add new directives, click
    <span class="guimenu">Add</span>. To delete a directive, select it and click
    <span class="guimenu">Delete</span>.
   </p><div class="figure" id="fig-apache2-configuration-yast-host"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_apache_wizard3.png"><img src="images/yast2_apache_wizard3.png" alt="HTTP server wizard: default host" title="HTTP server wizard: default host"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 42.1: </span><span class="title-name">HTTP server wizard: default host </span></span><a title="Permalink" class="permalink" href="#fig-apache2-configuration-yast-host">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div><p>
    Here is list of the default settings of the server:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.7.4.8.4.5.6.1"><span class="term"><code class="systemitem">Document Root</code></span></dt><dd><p>
       Path to the directory from which Apache serves files for this host.
       <code class="filename">/srv/www/htdocs</code> is the default location.
      </p></dd><dt id="id-1.3.7.7.4.8.4.5.6.2"><span class="term"><code class="systemitem">Alias</code></span></dt><dd><p>
       Using <code class="systemitem">Alias</code> directives, URLs can be mapped to
       physical file system locations. This means that a certain path even
       outside the <code class="literal">Document Root</code> in the file system can be
       accessed via a URL aliasing that path.
      </p><p>
       The default <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> <code class="systemitem">Alias</code>
       <code class="filename">/icons</code> points to
       <code class="filename">/usr/share/apache2/icons</code> for the Apache icons
       displayed in the directory index view.
      </p></dd><dt id="id-1.3.7.7.4.8.4.5.6.3"><span class="term"><code class="systemitem">ScriptAlias</code></span></dt><dd><p>
       Similar to the <code class="systemitem">Alias</code> directive, the
       <code class="systemitem">ScriptAlias</code> directive maps a URL to a file
       system location. The difference is that
       <code class="systemitem">ScriptAlias</code> designates the target directory as
       a CGI location, meaning that CGI scripts should be executed in that
       location.
      </p></dd><dt id="id-1.3.7.7.4.8.4.5.6.4"><span class="term"><code class="systemitem">Directory</code></span></dt><dd><p>
       With <code class="systemitem">Directory</code> settings, you can enclose a
       group of configuration options that will only apply to the specified
       directory.
      </p><p>
       Access and display options for the directories
       <code class="filename">/srv/www/htdocs</code>,
       <code class="filename">/usr/share/apache2/icons</code> and
       <code class="filename">/srv/www/cgi-bin</code> are configured here. It should not
       be necessary to change the defaults.
      </p></dd><dt id="id-1.3.7.7.4.8.4.5.6.5"><span class="term"><code class="systemitem">Include</code></span></dt><dd><p>
       With include, additional configuration files can be specified. Two
       <code class="systemitem">Include</code> directives are already preconfigured:
       <code class="filename">/etc/apache2/conf.d/</code> is the directory containing
       the configuration files that come with external modules. With this
       directive, all files in this directory ending in
       <code class="filename">.conf</code> are included. With the second directive,
       <code class="filename">/etc/apache2/conf.d/apache2-manual.conf</code>, the
       <code class="filename">apache2-manual</code> configuration file is included.
      </p></dd><dt id="id-1.3.7.7.4.8.4.5.6.6"><span class="term"><code class="systemitem">Server Name</code></span></dt><dd><p>
       This specifies the default URL used by clients to contact the Web
       server. Use a fully qualified domain name (FQDN) to reach the Web server
       at <code class="literal">http://<em class="replaceable">FQDN</em>/</code> or its IP
       address. You cannot choose an arbitrary name here—the server must
       be <span class="quote">“<span class="quote">known</span>”</span> under this name.
      </p></dd><dt id="id-1.3.7.7.4.8.4.5.6.7"><span class="term"><code class="systemitem">Server Administrator E-Mail</code></span></dt><dd><p>
       E-mail address of the server administrator. This address is, for
       example, shown on error pages Apache creates.
      </p></dd></dl></div><p>
    After finishing with the <span class="guimenu">Default Host</span> step, click
    <span class="guimenu">Next</span> to continue with the configuration.
   </p></section><section class="sect4" id="sec-apache2-configuration-yast-wizard-virtual-hosts" data-id-title="Virtual hosts"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">42.2.3.1.4 </span><span class="title-name">Virtual hosts</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-yast-wizard-virtual-hosts">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In this step, the wizard displays a list of already configured virtual
    hosts (see <a class="xref" href="#sec-apache2-configuration-manually-vhost" title="42.2.2.1. Virtual host configuration">Section 42.2.2.1, “Virtual host configuration”</a>). If
    you have not made manual changes prior to starting the YaST HTTP wizard,
    no virtual host is present.
   </p><p>
    To add a host, click <span class="guimenu">Add</span> to open a dialog in which to
    enter basic information about the host, such as <span class="guimenu">Server
    Name</span>, <span class="guimenu">Server Contents Root</span>
    (<code class="systemitem">DocumentRoot</code>), and the <span class="guimenu">Administrator
    E-Mail</span>. <span class="guimenu">Server Resolution</span> is used to determine
    how a host is identified (name based or IP based). Specify the name or IP
    address with <span class="guimenu">Change Virtual Host ID</span>
   </p><p>
    Clicking <span class="guimenu">Next</span> advances to the second part of the virtual
    host configuration dialog.
   </p><p>
    In part two of the virtual host configuration you can specify whether to
    enable CGI scripts and which directory to use for these scripts. It is also
    possible to enable SSL. If you do so, you must specify the path to the
    certificate as well. See <a class="xref" href="#sec-apache2-ssl-configuration" title="42.6.2. Configuring Apache with SSL">Section 42.6.2, “Configuring Apache with SSL”</a>
    for details on SSL and certificates. With the <span class="guimenu">Directory
    Index</span> option, you can specify which file to display when the
    client requests a directory (by default, <code class="filename">index.html</code>).
    Add one or more file names (space-separated) to change this. With
    <span class="guimenu">Enable Public HTML</span>, the content of the users public
    directories
    (<code class="filename">~<em class="replaceable">USER</em>/public_html/</code>) is
    made available on the server under
    <code class="literal">http://www.example.com/~<em class="replaceable">USER</em></code>.
   </p><div id="id-1.3.7.7.4.8.4.6.6" data-id-title="Creating virtual hosts" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Creating virtual hosts</div><p>
     It is not possible to add virtual hosts at will. If using name-based
     virtual hosts, each host name must be resolved on the network. If using
     IP-based virtual hosts, you can assign only one host to each IP address
     available.
    </p></div></section><section class="sect4" id="sec-apache2-configuration-yast-wizard-summary" data-id-title="Summary"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">42.2.3.1.5 </span><span class="title-name">Summary</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-yast-wizard-summary">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This is the final step of the wizard. Here, determine how and when the
    Apache server is started: when booting or manually. Also see a short
    summary of the configuration made so far. If you are satisfied with your
    settings, click <span class="guimenu">Finish</span> to complete configuration. To
    change something, click <span class="guimenu">Back</span> until you have reached the
    desired dialog. Clicking <span class="guimenu">HTTP Server Expert
    Configuration</span> opens the dialog described in
    <a class="xref" href="#sec-apache2-configuration-yast-server-configuration" title="42.2.3.2. HTTP server configuration">Section 42.2.3.2, “HTTP server configuration”</a>.
   </p><div class="figure" id="fig-apache2-configuration-yast-summary"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_apache_wizard5.png"><img src="images/yast2_apache_wizard5.png" alt="HTTP server wizard: summary" title="HTTP server wizard: summary"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 42.2: </span><span class="title-name">HTTP server wizard: summary </span></span><a title="Permalink" class="permalink" href="#fig-apache2-configuration-yast-summary">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></section></section><section class="sect3" id="sec-apache2-configuration-yast-server-configuration" data-id-title="HTTP server configuration"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">42.2.3.2 </span><span class="title-name">HTTP server configuration</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-yast-server-configuration">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The <span class="guimenu">HTTP Server Configuration</span> dialog also lets you make
   even more adjustments to the configuration than the wizard (which only runs
   if you configure your Web server for the first time). It consists of four
   tabs described in the following. No configuration option you change here is
   effective immediately—you always must confirm your changes with
   <span class="guimenu">Finish</span> to make them effective. Clicking
   <span class="guimenu">Abort</span> leaves the configuration module and discards your
   changes.
  </p><section class="sect4" id="sec-apache2-configuration-yast-server-configuration-listen" data-id-title="Listen ports and addresses"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">42.2.3.2.1 </span><span class="title-name">Listen ports and addresses</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-yast-server-configuration-listen">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In <span class="guimenu">HTTP Service</span>, select whether Apache should be running
    (<span class="guimenu">Enabled</span>) or stopped (<span class="guimenu">Disabled</span>). In
    <span class="guimenu">Listen on Ports</span>, <span class="guimenu">Add</span>,
    <span class="guimenu">Edit</span>, or <span class="guimenu">Delete</span> addresses and ports
    on which the server should be available. The default is to listen on all
    interfaces on port <code class="literal">80</code>. You should always check
    <span class="guimenu">Open Port In Firewall</span>, because otherwise the Web server
    is not reachable from outside. Keeping the port closed is only useful in
    test situations where no external access to the Web server is necessary. If
    you have multiple network interfaces, click <span class="guimenu">Firewall
    Details</span> to specify on which interface(s) the port(s) should be
    opened.
   </p><p>
    With <span class="guimenu">Log Files</span>, watch either the access log file or the
    error log file. This is useful if you want to test your configuration. The
    log file opens in a separate window from which you can also restart or
    reload the Web server. For details, see
    <a class="xref" href="#sec-apache2-start-stop" title="42.3. Starting and stopping Apache">Section 42.3, “Starting and stopping Apache”</a>. These commands are effective
    immediately and their log messages are also displayed immediately.
   </p><div class="figure" id="fig-apache2-configuration-yast-server-configuration-listen"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_apache_config_listen.png"><img src="images/yast2_apache_config_listen.png" alt="HTTP server configuration: listen ports and addresses" title="HTTP server configuration: listen ports and addresses"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 42.3: </span><span class="title-name">HTTP server configuration: listen ports and addresses </span></span><a title="Permalink" class="permalink" href="#fig-apache2-configuration-yast-server-configuration-listen">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></section><section class="sect4" id="sec-apache2-configuration-yast-server-configuration-modules" data-id-title="Server modules"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">42.2.3.2.2 </span><span class="title-name">Server modules</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-yast-server-configuration-modules">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    You can change the status (enabled or disabled) of Apache2 modules by
    clicking <span class="guimenu">Toggle Status</span>. Click <span class="guimenu">Add
    Module</span> to add a new module that is already installed but not yet
    listed. Learn more about modules in <a class="xref" href="#sec-apache2-modules" title="42.4. Installing, activating and configuring modules">Section 42.4, “Installing, activating and configuring modules”</a>.
   </p><div class="figure" id="fig-apache2-configuration-yast-server-configuration-modules"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_apache_config_modules.png"><img src="images/yast2_apache_config_modules.png" alt="HTTP server configuration: server modules" title="HTTP server configuration: server modules"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 42.4: </span><span class="title-name">HTTP server configuration: server modules </span></span><a title="Permalink" class="permalink" href="#fig-apache2-configuration-yast-server-configuration-modules">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></section><section class="sect4" id="sec-apache2-configuration-yast-server-configuration-host" data-id-title="Main host or hosts"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">42.2.3.2.3 </span><span class="title-name">Main host or hosts</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-configuration-yast-server-configuration-host">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2_yast_i.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    These dialogs are identical to the ones already described. Refer to
    <a class="xref" href="#sec-apache2-configuration-yast-wizard-default-host" title="42.2.3.1.3. Default host">Section 42.2.3.1.3, “Default host”</a> and
    <a class="xref" href="#sec-apache2-configuration-yast-wizard-virtual-hosts" title="42.2.3.1.4. Virtual hosts">Section 42.2.3.1.4, “Virtual hosts”</a>.
   </p></section></section></section></section><section class="sect1" id="sec-apache2-start-stop" data-id-title="Starting and stopping Apache"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">42.3 </span><span class="title-name">Starting and stopping Apache</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-start-stop">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If configured with YaST as described in
   <a class="xref" href="#sec-apache2-configuration-yast" title="42.2.3. Configuring Apache with YaST">Section 42.2.3, “Configuring Apache with YaST”</a>, Apache is started at boot
   time in the <code class="systemitem">multi-user.target</code> and
   <code class="systemitem">graphical.target</code>. You can change this behavior
   using YaST's <span class="guimenu">Services Manager</span> or with the
   <code class="command">systemctl</code> command line tool (<code class="command">systemctl
   enable</code> or <code class="command">systemctl disable</code>).
  </p><p>
   To start, stop or manipulate Apache on a running system, use either the
   <code class="command">systemctl</code> or the <code class="command">apachectl</code> commands as
   described below.
  </p><p>
   For general information about <code class="command">systemctl</code> commands, refer
   to <a class="xref" href="#sec-boot-systemd-basics-services" title="19.2.1. Managing services in a running system">Section 19.2.1, “Managing services in a running system”</a>.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.7.5.5.1"><span class="term"><code class="command">systemctl status apache2.service</code></span></dt><dd><p>
      Checks if Apache is started.
     </p></dd><dt id="id-1.3.7.7.5.5.2"><span class="term"><code class="command">systemctl start apache2.service</code></span></dt><dd><p>
      Starts Apache if it is not already running.
     </p></dd><dt id="id-1.3.7.7.5.5.3"><span class="term"><code class="command">systemctl stop apache2.service</code></span></dt><dd><p>
      Stops Apache by terminating the parent process.
     </p></dd><dt id="id-1.3.7.7.5.5.4"><span class="term"><code class="command">systemctl restart apache2.service</code></span></dt><dd><p>
      Stops and then restarts Apache. Starts the Web server if it was not
      running before.
     </p></dd><dt id="id-1.3.7.7.5.5.5"><span class="term"><code class="command">systemctl try-restart apache2.service</code></span></dt><dd><p>
      Stops then restarts Apache only if it is already running.
     </p></dd><dt id="id-1.3.7.7.5.5.6"><span class="term"><code class="command">systemctl reload apache2.service</code></span></dt><dd><p>
      Stops the Web server by advising all forked Apache processes to first
      finish their requests before shutting down. As each process dies, it is
      replaced by a newly started one, resulting in a complete
      <span class="quote">“<span class="quote">restart</span>”</span> of Apache.
     </p><div id="id-1.3.7.7.5.5.6.2.2" data-id-title="Restarting Apache in production environments" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Restarting Apache in production environments</div><p>
       This command allows activating changes in the Apache configuration
       without causing connection break-offs.
      </p></div></dd><dt id="id-1.3.7.7.5.5.7"><span class="term"><code class="command">systemctl stop apache2.service</code></span></dt><dd><p>
      Stops the Web server after a defined period of time configured with
      <code class="systemitem">GracefulShutdownTimeout</code> to ensure that existing
      requests can be finished.
     </p></dd><dt id="id-1.3.7.7.5.5.8"><span class="term"><code class="command">apachectl configtest</code></span></dt><dd><p>
      Checks the syntax of the configuration files without affecting a running
      Web server. Because this check is forced every time the server is
      started, reloaded or restarted, it is usually not necessary to run the
      test explicitly (if a configuration error is found, the Web server is not
      started, reloaded or restarted).
     </p></dd><dt id="id-1.3.7.7.5.5.9"><span class="term"><code class="command">apachectl status</code> and <code class="command">apachectl fullstatus</code></span></dt><dd><p>
      Dumps a short or full status screen, respectively. Requires the module
      <code class="systemitem">mod_status</code> to be enabled and a text-based
      browser (such as <code class="command">links</code> or <code class="command">w3m</code>) to
      be installed. Besides that, <code class="literal">STATUS</code> must be
      added to <code class="systemitem">APACHE_SERVER_FLAGS</code> in the file
      <code class="filename">/etc/sysconfig/apache2</code>.
     </p></dd></dl></div><div id="id-1.3.7.7.5.6" data-id-title="Additional flags" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Additional flags</div><p>
    If you specify additional flags to the commands, these are passed through
    to the Web server.
   </p></div></section><section class="sect1" id="sec-apache2-modules" data-id-title="Installing, activating and configuring modules"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">42.4 </span><span class="title-name">Installing, activating and configuring modules</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-modules">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The Apache software is built in a modular fashion: all functionality except
   certain core tasks are handled by modules. This has progressed so far that even
   HTTP is processed by a module (<code class="systemitem">http_core</code>).
  </p><p>
   Apache modules can be compiled into the Apache binary at build time or be
   dynamically loaded at runtime. Refer to
   <a class="xref" href="#sec-apache2-modules-activating" title="42.4.2. Activation and deactivation">Section 42.4.2, “Activation and deactivation”</a> for details of how to load
   modules dynamically.
  </p><p>
   Apache modules are organized into the following categories:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.7.6.5.1"><span class="term">Base modules</span></dt><dd><p>
      Base modules are compiled into Apache by default. Apache in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
      has only <code class="systemitem">mod_so</code> (needed to load other modules)
      and <code class="systemitem">http_core</code> compiled in. All others are
      available as shared objects: rather than being included in the server
      binary itself, they can be included at runtime.
     </p></dd><dt id="id-1.3.7.7.6.5.2"><span class="term">Extension modules</span></dt><dd><p>
      Modules labeled as extensions are included in the Apache
      software package, but are usually not compiled into the server
      statically. In <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, they are available as shared objects that
      can be loaded into Apache at runtime.
     </p></dd><dt id="id-1.3.7.7.6.5.3"><span class="term">External modules</span></dt><dd><p>
      Modules labeled external are not included in the official Apache
      distribution. However, <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> provides several of them.
     </p></dd><dt id="id-1.3.7.7.6.5.4"><span class="term">Multiprocessing modules (MPMs)</span></dt><dd><p>
      MPMs are responsible for accepting and handling requests to the Web
      server, representing the core of the Web server software.
     </p></dd></dl></div><section class="sect2" id="sec-apache2-modules-installing" data-id-title="Module installation"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.4.1 </span><span class="title-name">Module installation</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-modules-installing">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you have done a default installation as described in
    <a class="xref" href="#sec-apache2-quickstart-installation" title="42.1.2. Installation">Section 42.1.2, “Installation”</a>, the following
    modules are already installed: all base and extension modules, the
    multiprocessing module Prefork MPM, and the external module
    <code class="systemitem">mod_python</code>.
   </p><p>
    You can install additional external modules by starting YaST and choosing
    <span class="guimenu">Software</span> › <span class="guimenu">Software
    Management</span>. Now choose
    <span class="guimenu">View</span> › <span class="guimenu">Search</span>
    and search for <code class="literal">apache</code>. Among other packages, the results
    list contains all available external Apache modules.
   </p></section><section class="sect2" id="sec-apache2-modules-activating" data-id-title="Activation and deactivation"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.4.2 </span><span class="title-name">Activation and deactivation</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-modules-activating">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Activate or deactivate particular modules either manually or with YaST.
    In YaST, script language modules (PHP 8 and Python) need to
    be enabled or disabled with the module configuration described in
    <a class="xref" href="#sec-apache2-configuration-yast-wizard" title="42.2.3.1. HTTP server wizard">Section 42.2.3.1, “HTTP server wizard”</a>. All other modules
    can be enabled or disabled as described in
    <a class="xref" href="#sec-apache2-configuration-yast-server-configuration-modules" title="42.2.3.2.2. Server modules">Section 42.2.3.2.2, “Server modules”</a>.
   </p><p>
    If you prefer to activate or deactivate the modules manually, use the
    commands <code class="command">a2enmod</code> <em class="replaceable">MODULE</em> or
    <code class="command">a2dismod</code> <em class="replaceable">MODULE</em>,
    respectively. <code class="command">a2enmod -l</code> outputs a list of all currently
    active modules.
   </p><div id="id-1.3.7.7.6.7.4" data-id-title="Including configuration files for external modules" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Including configuration files for external modules</div><p>
     If you have activated external modules manually, make sure to load their
     configuration files in all virtual host configurations. Configuration
     files for external modules are located under
     <code class="filename">/etc/apache2/conf.d/</code> and are loaded in
     <code class="filename">/etc/apache2/default-server.conf</code> by default. For more
     fine-grained control you can comment out the inclusion in
     <code class="filename">/etc/apache2/default-server.conf</code> and add it to
     specific virtual hosts only. See
     <code class="filename">/etc/apache2/vhosts.d/vhost.template</code> for examples.
    </p></div></section><section class="sect2" id="sec-apache2-modules-base-extension" data-id-title="Base and extension modules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.4.3 </span><span class="title-name">Base and extension modules</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-modules-base-extension">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    All base and extension modules are described in detail in the Apache
    documentation. Only a brief description of the most important modules is
    available here. Refer to
    <a class="link" href="https://httpd.apache.org/docs/2.4/mod/" target="_blank">http://httpd.apache.org/docs/2.4/mod/</a>
    to learn details about each module.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.7.6.8.3.1"><span class="term"><code class="systemitem">mod_actions</code></span></dt><dd><p>
       Provides methods to execute a script whenever a certain MIME type (such
       as <code class="systemitem">application/pdf</code>), a file with a specific
       extension (like <code class="filename">.rpm</code>), or a certain request method
       (such as <code class="systemitem">GET</code>) is requested. This module is
       enabled by default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.2"><span class="term"><code class="systemitem">mod_alias</code></span></dt><dd><p>
       Provides <code class="systemitem">Alias</code> and
       <code class="systemitem">Redirect</code> directives with which you can map a
       URL to a specific directory (<code class="systemitem">Alias</code>) or redirect
       a requested URL to another location. This module is enabled by default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.3"><span class="term"><code class="systemitem">mod_auth*</code></span></dt><dd><p>
       The authentication modules provide different authentication methods:
       basic authentication with <code class="systemitem">mod_auth_basic</code> or
       digest authentication with <code class="systemitem">mod_auth_digest</code>.
      </p><p>
       <code class="systemitem">mod_auth_basic</code> and
       <code class="systemitem">mod_auth_digest</code> must be combined with an
       authentication provider module, <code class="systemitem">mod_authn_*</code>
       (for example, <code class="systemitem">mod_authn_file</code> for text
       file–based authentication) and with an authorization module
       <code class="systemitem">mod_authz_*</code> (for example,
       <code class="systemitem">mod_authz_user</code> for user authorization).
      </p><p>
       More information about this topic is available in the
       <em class="citetitle">Authentication HOWTO</em> at
       <a class="link" href="https://httpd.apache.org/docs/2.4/howto/auth.html" target="_blank">https://httpd.apache.org/docs/2.4/howto/auth.html</a>.
      </p></dd><dt id="id-1.3.7.7.6.8.3.4"><span class="term"><code class="systemitem">mod_auth_openidc</code></span></dt><dd><p>
       <code class="systemitem">mod_auth_openidc</code> the only certified way to use
       OpenID Connect with the Apache HTTP server. (See
       <a class="link" href="https://openid.net/developers/certified-openid-connect-implementations/" target="_blank">https://openid.net/developers/certified-openid-connect-implementations/</a>.)
      </p></dd><dt id="id-1.3.7.7.6.8.3.5"><span class="term"><code class="systemitem">mod_autoindex</code></span></dt><dd><p>
       Autoindex generates directory listings when no index file (for example,
       <code class="filename">index.html</code>) is present. The look and feel of these
       indexes is configurable. This module is enabled by default. However,
       directory listings are disabled by default via the
       <code class="systemitem">Options</code> directive—overwrite this setting
       in your virtual host configuration. The default configuration file for
       this module is located at
       <code class="filename">/etc/apache2/mod_autoindex-defaults.conf</code>.
      </p></dd><dt id="id-1.3.7.7.6.8.3.6"><span class="term"><code class="systemitem">mod_cgi</code></span></dt><dd><p>
       <code class="systemitem">mod_cgi</code> is needed to execute CGI scripts. This
       module is enabled by default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.7"><span class="term"><code class="systemitem">mod_deflate</code></span></dt><dd><p>
       Using this module, Apache can be configured to compress given file types
       on the fly before delivering them.
      </p></dd><dt id="id-1.3.7.7.6.8.3.8"><span class="term"><code class="systemitem">mod_dir</code></span></dt><dd><p>
       <code class="systemitem">mod_dir</code> provides the
       <code class="systemitem">DirectoryIndex</code> directive with which you can
       configure which files are automatically delivered when a directory is
       requested (<code class="filename">index.html</code> by default). It also provides
       an automatic redirect to the correct URL when a directory request does
       not contain a trailing slash. This module is enabled by default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.9"><span class="term"><code class="systemitem">mod_env</code></span></dt><dd><p>
       Controls the environment that is passed to CGI scripts or SSI pages.
       Environment variables can be set or unset or passed from the shell that
       invoked the <code class="systemitem">httpd</code> process. This
       module is enabled by default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.10"><span class="term"><code class="systemitem">mod_expires</code></span></dt><dd><p>
       With <code class="systemitem">mod_expires</code>, you can control how often
       proxy and browser caches refresh your documents by sending an
       <code class="systemitem">Expires</code> header. This module is enabled by
       default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.11"><span class="term"><code class="systemitem">mod_http2</code></span></dt><dd><p>
       With <code class="systemitem">mod_http2</code>, Apache gains support for the
       HTTP/2 protocol. It can be enabled by specifying <code class="literal">Protocols h2
       http/1.1</code> in a <code class="systemitem">VirtualHost</code>.
      </p></dd><dt id="id-1.3.7.7.6.8.3.12"><span class="term"><code class="systemitem">mod_include</code></span></dt><dd><p>
       <code class="systemitem">mod_include</code> lets you use Server Side Includes
       (SSI), which provide a basic functionality to generate HTML pages
       dynamically. This module is enabled by default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.13"><span class="term"><code class="systemitem">mod_info</code></span></dt><dd><p>
       Provides a comprehensive overview of the server configuration under
       http://localhost/server-info/. For security reasons, you should always
       limit access to this URL. By default only
       <code class="systemitem">localhost</code> is allowed to
       access this URL. <code class="systemitem">mod_info</code> is configured at
       <code class="filename">/etc/apache2/mod_info.conf</code>.
      </p></dd><dt id="id-1.3.7.7.6.8.3.14"><span class="term"><code class="systemitem">mod_log_config</code></span></dt><dd><p>
       With this module, you can configure the look of the Apache log files.
       This module is enabled by default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.15"><span class="term"><code class="systemitem">mod_mime</code></span></dt><dd><p>
       The mime module ensures that a file is delivered with the correct MIME
       header based on the file name's extension (for example
       <code class="systemitem">text/html</code> for HTML documents). This module is
       enabled by default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.16"><span class="term"><code class="systemitem">mod_negotiation</code></span></dt><dd><p>
       Necessary for content negotiation. See
       <a class="link" href="https://httpd.apache.org/docs/2.4/content-negotiation.html" target="_blank">http://httpd.apache.org/docs/2.4/content-negotiation.html</a>
       for more information. This module is enabled by default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.17"><span class="term"><code class="systemitem">mod_rewrite</code></span></dt><dd><p>
       Provides the functionality of <code class="systemitem">mod_alias</code>, but
       offers more features and flexibility. With
       <code class="systemitem">mod_rewrite</code>, you can redirect URLs based on
       multiple rules, request headers, and more.
      </p></dd><dt id="id-1.3.7.7.6.8.3.18"><span class="term"><code class="systemitem">mod_setenvif</code></span></dt><dd><p>
       Sets environment variables based on details of the client's request,
       such as the browser string the client sends, or the client's IP address.
       This module is enabled by default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.19"><span class="term"><code class="systemitem">mod_spelling</code></span></dt><dd><p>
       <code class="systemitem">mod_spelling</code> attempts to automatically correct
       typographical errors in URLs, such as capitalization errors.
      </p></dd><dt id="id-1.3.7.7.6.8.3.20"><span class="term"><code class="systemitem">mod_ssl</code></span></dt><dd><p>
       Enables encrypted connections between Web server and clients. See
       <a class="xref" href="#sec-apache2-ssl" title="42.6. Setting up a secure Web server with SSL">Section 42.6, “Setting up a secure Web server with SSL”</a> for details. This module is enabled by
       default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.21"><span class="term"><code class="systemitem">mod_status</code></span></dt><dd><p>
       Provides information on server activity and performance under
       http://localhost/server-status/. For security reasons, you should always
       limit access to this URL. By default, only
       <code class="systemitem">localhost</code> is allowed to
       access this URL. <code class="systemitem">mod_status</code> is configured at
       <code class="filename">/etc/apache2/mod_status.conf</code>.
      </p></dd><dt id="id-1.3.7.7.6.8.3.22"><span class="term"><code class="systemitem">mod_suexec</code></span></dt><dd><p>
       <code class="systemitem">mod_suexec</code> lets you run CGI scripts under a
       different user and group. This module is enabled by default.
      </p></dd><dt id="id-1.3.7.7.6.8.3.23"><span class="term"><code class="systemitem">mod_userdir</code></span></dt><dd><p>
       Enables user-specific directories available under
       <code class="filename">~<em class="replaceable">USER</em>/</code>. The
       <code class="systemitem">UserDir</code> directive must be specified in the
       configuration. This module is enabled by default.
      </p></dd></dl></div></section><section class="sect2" id="sec-apache2-modules-mpm" data-id-title="Multiprocessing modules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.4.4 </span><span class="title-name">Multiprocessing modules</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-modules-mpm">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> provides two different multiprocessing modules (MPMs) for use
    with Apache:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <a class="xref" href="#sec-apache2-modules-mpm-prefork" title="42.4.4.1. Prefork MPM">Prefork MPM</a>
     </p></li><li class="listitem"><p>
      <a class="xref" href="#sec-apache2-modules-mpm-worker" title="42.4.4.2. Worker MPM">Worker MPM</a>
     </p></li></ul></div><section class="sect3" id="sec-apache2-modules-mpm-prefork" data-id-title="Prefork MPM"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">42.4.4.1 </span><span class="title-name">Prefork MPM</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-modules-mpm-prefork">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The prefork MPM implements a non-threaded, preforking Web server. It makes
     the Web server behave similarly to Apache version 1.x. In this version it
     isolates each request and handles it by forking a separate child process.
     Thus problematic requests cannot affect others, avoiding a lockup of the
     Web server.
    </p><p>
     While providing stability with this process-based approach, the prefork
     MPM consumes more system resources than its counterpart, the worker MPM.
     The prefork MPM is considered the default MPM for Unix-based operating
     systems.
    </p><div id="id-1.3.7.7.6.9.4.4" data-id-title="MPMs in this document" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: MPMs in this document</div><p>
      This document assumes Apache is used with the prefork MPM.
     </p></div></section><section class="sect3" id="sec-apache2-modules-mpm-worker" data-id-title="Worker MPM"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">42.4.4.2 </span><span class="title-name">Worker MPM</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-modules-mpm-worker">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The worker MPM provides a multi-threaded Web server. A thread is a
     <span class="quote">“<span class="quote">lighter</span>”</span> form of a process. The advantage of a thread over a
     process is its lower resource consumption. Instead of only forking child
     processes, the worker MPM serves requests by using threads with server
     processes. The preforked child processes are multi-threaded. This approach
     makes Apache perform better by consuming fewer system resources than the
     prefork MPM.
    </p><p>
     One major disadvantage is the stability of the worker MPM: if a thread
     becomes corrupt, all threads of a process can be affected. In the worst
     case, this may result in a server crash. Especially when using the Common
     Gateway Interface (CGI) with Apache under heavy load, internal server
     errors might occur because of threads being unable to communicate with
     system resources. Another argument against using the worker MPM with
     Apache is that not all available Apache modules are thread-safe and thus
     cannot be used with the worker MPM.
    </p><div id="id-1.3.7.7.6.9.5.4" data-id-title="Using PHP modules with MPMs" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Using PHP modules with MPMs</div><p>
      Not all available PHP modules are thread-safe. Using the worker MPM with
      <code class="systemitem">mod_php</code> is strongly discouraged.
     </p></div></section></section><section class="sect2" id="sec-apache2-modules-external" data-id-title="External modules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.4.5 </span><span class="title-name">External modules</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-modules-external">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Find a list of all external modules shipped with <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> here. Find
    the module's documentation in the listed directory.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.7.6.10.3.1"><span class="term"><code class="systemitem">mod_apparmor</code></span></dt><dd><p>
       Adds support to Apache to provide <span class="phrase">AppArmor</span> confinement to individual CGI
       scripts handled by modules like
       <code class="systemitem">mod_php8</code>.
      </p><table style="border: 0; " class="simplelist"><tr><td>
        Package Name: <code class="systemitem">apache2-mod_apparmor</code></td></tr><tr><td>
        More Information: <span class="intraxref">Book “Security and Hardening Guide”</span></td></tr></table></dd><dt id="id-1.3.7.7.6.10.3.2"><span class="term"><code class="systemitem">mod_php8</code></span></dt><dd><p>
       PHP is a server-side, cross-platform HTML embedded scripting language.
      </p><table style="border: 0; " class="simplelist"><tr><td>
        Package Name: <code class="systemitem">apache2-mod_php8</code></td></tr><tr><td>
        Configuration File: <code class="filename">/etc/apache2/conf.d/php8.conf</code></td></tr></table></dd><dt id="id-1.3.7.7.6.10.3.3"><span class="term"><code class="systemitem">mod_python</code></span></dt><dd><p>
       <code class="systemitem">mod_python</code> allows embedding Python within the
       Apache HTTP server for a considerable boost in performance and added
       flexibility in designing Web-based applications.
      </p><table style="border: 0; " class="simplelist"><tr><td>
        Package Name: <code class="systemitem">apache2-mod_python</code></td></tr><tr><td>
        More Information:
        <code class="filename">/usr/share/doc/packages/apache2-mod_python</code></td></tr></table></dd><dt id="id-1.3.7.7.6.10.3.4"><span class="term"><code class="systemitem">mod_security</code></span></dt><dd><p>
       <code class="systemitem">mod_security</code> provides a Web application
       firewall to protect Web applications from a range of attacks. It also
       enables HTTP traffic monitoring and real-time analysis.
      </p><table style="border: 0; " class="simplelist"><tr><td>
        Package Name: <code class="systemitem">apache2-mod_security2</code></td></tr><tr><td>
        Configuration File: <code class="filename">/etc/apache2/conf.d/mod_security2.conf</code></td></tr><tr><td>
        More Information: <code class="filename">/usr/share/doc/packages/apache2-mod_security2</code></td></tr><tr><td>
        Documentation: <a class="link" href="https://github.com/owasp-modsecurity/ModSecurity" target="_blank">https://github.com/owasp-modsecurity/ModSecurity</a></td></tr></table></dd></dl></div></section><section class="sect2" id="sec-apache2-modules-building-modules" data-id-title="Compilation"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.4.6 </span><span class="title-name">Compilation</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-modules-building-modules">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Apache can be extended by advanced users by writing custom modules. To
    develop modules for Apache or compile third-party modules, the package
    <code class="systemitem">apache2-devel</code> is required along with the
    corresponding development tools. <code class="systemitem">apache2-devel</code>
    also contains the <code class="command">apxs2</code> tools, which are necessary for
    compiling additional modules for Apache.
   </p><p>
    <code class="command">apxs2</code> enables the compilation and installation of
    modules from source code (including the required changes to the
    configuration files), which creates <span class="emphasis"><em>dynamic shared
    objects</em></span> (DSOs) that can be loaded into Apache at runtime.
   </p><p>
    The <code class="command">apxs2</code> binaries are located under
    <code class="filename">/usr/sbin</code>:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <code class="filename">/usr/sbin/apxs2</code>—suitable for building an
      extension module that works with any MPM. The installation location is
      <code class="filename">/usr/lib64/apache2</code>.
     </p></li><li class="listitem"><p>
      <code class="filename">/usr/sbin/apxs2-prefork</code>—suitable for prefork
      MPM modules. The installation location is
      <code class="filename">/usr/lib64/apache2-prefork</code>.
     </p></li><li class="listitem"><p>
      <code class="filename">/usr/sbin/apxs2-worker</code>—suitable for worker MPM
      modules. The installation location is
      <code class="filename">/usr/lib64/apache2-worker</code>.
     </p></li></ul></div><p>
    Install and activate a module from source code with the following commands:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> cd /path/to/module/source
<code class="prompt user">&gt; </code><code class="command">sudo</code> apxs2 -cia <em class="replaceable">MODULE</em>.c</pre></div><p>
    where <code class="option">-c</code> compiles the module, <code class="option">-i</code> installs
    it, and <code class="option">-a</code> activates it. Other options of
    <code class="command">apxs2</code> are described in the
    <code class="systemitem">apxs2(1)</code> man page.
   </p></section></section><section class="sect1" id="sec-apache2-cgi" data-id-title="Enabling CGI scripts"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">42.5 </span><span class="title-name">Enabling CGI scripts</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-cgi">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Apache's Common Gateway Interface (CGI) lets you create dynamic content with
   programs or scripts (CGI scripts). CGI scripts can be written
   in any programming language.
  </p><p>
   To enable Apache to deliver content created by CGI scripts,
   <code class="systemitem">mod_cgi</code> needs to be activated.
   <code class="systemitem">mod_alias</code> is also needed. Both modules are enabled
   by default. Refer to <a class="xref" href="#sec-apache2-modules-activating" title="42.4.2. Activation and deactivation">Section 42.4.2, “Activation and deactivation”</a> for
   details on activating modules.
  </p><div id="id-1.3.7.7.7.4" data-id-title="CGI security" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: CGI security</div><p>
    Allowing the server to execute CGI scripts is a potential security hole.
    Refer to <a class="xref" href="#sec-apache2-security" title="42.8. Avoiding security problems">Section 42.8, “Avoiding security problems”</a> for additional information.
   </p></div><section class="sect2" id="sec-apache2-cgi-configuration" data-id-title="Apache configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.5.1 </span><span class="title-name">Apache configuration</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-cgi-configuration">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, the execution of CGI scripts is only allowed in the
    directory <code class="filename">/srv/www/cgi-bin/</code>. This location is already
    configured to execute CGI scripts. If you have created a virtual host
    configuration (see
    <a class="xref" href="#sec-apache2-configuration-manually-vhost" title="42.2.2.1. Virtual host configuration">Section 42.2.2.1, “Virtual host configuration”</a>) and want to
    place your scripts in a host-specific directory, you must unlock and
    configure this directory.
   </p><div class="example" id="ex-apache2-cgi-configuration" data-id-title="VirtualHost CGI configuration"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 42.5: </span><span class="title-name">VirtualHost CGI configuration </span></span><a title="Permalink" class="permalink" href="#ex-apache2-cgi-configuration">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">ScriptAlias /cgi-bin/ "/srv/www/www.example.com/cgi-bin/"<span class="callout" id="co-apache2-cgi-script-alias">1</span>

&lt;Directory "/srv/www/www.example.com/cgi-bin/"&gt;
 Options +ExecCGI<span class="callout" id="co-apache2-cgi-options">2</span>
 AddHandler cgi-script .cgi .pl<span class="callout" id="co-apache2-cgi-handler">3</span>
 Require all granted<span class="callout" id="co-apache2-cgi-order">4</span>
&lt;/Directory&gt;</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-apache2-cgi-script-alias"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Tells Apache to handle all files within this directory as CGI scripts.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-apache2-cgi-options"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Enables CGI script execution
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-apache2-cgi-handler"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Tells the server to treat files with the extensions .pl and .cgi as CGI
       scripts. Adjust according to your needs.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-apache2-cgi-order"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       The <code class="systemitem">Require</code> directive controls the default
       access state. In this case, access is granted to the specified directory
       without limitation. For more information on authentication and
       authorization, see
       <a class="link" href="https://httpd.apache.org/docs/2.4/howto/auth.html" target="_blank">https://httpd.apache.org/docs/2.4/howto/auth.html</a>.
      </p></td></tr></table></div></div></div></section><section class="sect2" id="sec-apache2-cgi-example-script" data-id-title="Running an example script"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.5.2 </span><span class="title-name">Running an example script</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-cgi-example-script">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    CGI programming differs from <span class="quote">“<span class="quote">regular</span>”</span> programming in that the CGI programs
    and scripts must be preceded by a MIME-Type header such as
    <code class="literal">Content-type: text/html</code>. This header is sent to the
    client, so it understands what kind of content it receives. Secondly, the
    script's output must be something the client, usually a Web browser,
    understands—HTML or plain text or images, for example.
   </p><p>
    A simple test script available under
    <code class="filename">/usr/share/doc/packages/apache2/test-cgi</code> is part of
    the Apache package. It outputs the content of certain environment variables as
    plain text. Copy this script to either
    <code class="filename">/srv/www/cgi-bin/</code> or the script directory of your
    virtual host (<code class="filename">/srv/www/www.example.com/cgi-bin/</code>) and name it
    <code class="filename">test.cgi</code>. Edit the file to have
    <code class="literal">#!/bin/sh</code> as the first line.
   </p><p>
    Files accessible by the Web server should be owned by the user
    <code class="systemitem">root</code>. For additional information
    see <a class="xref" href="#sec-apache2-security" title="42.8. Avoiding security problems">Section 42.8, “Avoiding security problems”</a>. Because the Web server runs
    with a different user, the CGI scripts must be world-executable and
    world-readable. Change into the CGI directory and use the command
    <code class="command">chmod 755 test.cgi</code> to apply the proper permissions.
   </p><p>
    Now call <code class="literal">http://localhost/cgi-bin/test.cgi</code> or
    <code class="literal">http://www.example.com/cgi-bin/test.cgi</code>. You should see the
    <span class="quote">“<span class="quote">CGI/1.0 test script report</span>”</span>.
   </p></section><section class="sect2" id="sec-apache2-cgi-troubleshooting" data-id-title="CGI troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.5.3 </span><span class="title-name">CGI troubleshooting</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-cgi-troubleshooting">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you do not see the output of the test program but an error message
    instead, check the following:
   </p><div class="itemizedlist"><div class="title-container"><div class="itemizedlist-title-wrap"><div class="itemizedlist-title"><span class="title-number-name"><span class="title-name">CGI troubleshooting </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.7.7.7.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div><ul class="itemizedlist"><li class="listitem"><p>
      <span class="emphasis"><em>Have you reloaded the server after having changed the
      configuration?</em></span> If not, reload with <code class="command">systemctl reload
      apache2.service</code>.
     </p></li><li class="listitem"><p>
      <span class="emphasis"><em>If you have configured your custom CGI directory, is it
      configured properly?</em></span> If in doubt, try the script within the
      default CGI directory <code class="filename">/srv/www/cgi-bin/</code> and call it
      with <code class="literal">http://localhost/cgi-bin/test.cgi</code>.
     </p></li><li class="listitem"><p>
      <span class="emphasis"><em>Are the file permissions correct?</em></span> Change into the
      CGI directory and execute <code class="command">ls -l test.cgi</code>. The output
      should start with
     </p><div class="verbatim-wrap"><pre class="screen">-rwxr-xr-x  1 root root</pre></div></li><li class="listitem"><p>
      Make sure that the script does not contain programming errors. If you
      have not changed <code class="filename">test.cgi</code>, this should not be the
      case, but if you are using your own programs, always make sure that they
      do not contain programming errors.
     </p></li></ul></div></section></section><section class="sect1" id="sec-apache2-ssl" data-id-title="Setting up a secure Web server with SSL"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">42.6 </span><span class="title-name">Setting up a secure Web server with SSL</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-ssl">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Whenever sensitive data, such as credit card information, is transferred
   between Web server and client, it is desirable to have a secure, encrypted
   connection with authentication. <code class="systemitem">mod_ssl</code> provides
   strong encryption using the secure sockets layer (SSL) and transport layer
   security (TLS) protocols for HTTP communication between a client and the Web
   server. Using TLS/SSL, a private connection between Web server and client is
   established. Data integrity is ensured and client and server can
   authenticate each other.
  </p><p>
   For this purpose, the server sends an SSL certificate that holds information
   proving the server's valid identity before any request to a URL is answered.
   In turn, this guarantees that the server is the uniquely correct end point
   for the communication. Additionally, the certificate generates an encrypted
   connection between client and server that can transport information without
   the risk of exposing sensitive, plain-text content.
  </p><p>
   <code class="systemitem">mod_ssl</code> does not implement the TLS/SSL protocols
   itself, but acts as an interface between Apache and an SSL library. In
   <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, the OpenSSL library is used. OpenSSL is automatically
   installed with Apache.
  </p><p>
   The most visible effect of using <code class="systemitem">mod_ssl</code> with
   Apache is that URLs are prefixed with <code class="literal">https://</code> instead of
   <code class="literal">http://</code>.
  </p><section class="sect2" id="sec-apache2-ssl-certificate" data-id-title="Creating an SSL certificate"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.6.1 </span><span class="title-name">Creating an SSL certificate</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-ssl-certificate">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To use TLS/SSL with the Web server, you need to create an SSL certificate.
    This certificate is needed for the authorization between Web server and
    client, so that each party can identify the other party. To ensure
    the integrity of the certificate, it must be signed by a party every user
    trusts.
   </p><p>
    There are three types of certificates you can create: a
    <span class="quote">“<span class="quote">test</span>”</span> certificate for testing purposes only, a self-signed
    certificate for a defined circle of users that trust you, and a certificate
    signed by an independent, publicly known certificate authority (CA).
   </p><p>
    Creating a certificate is a two step process. First, a private key for the
    certificate authority is generated then the server certificate is signed
    with this key.
   </p><div id="id-1.3.7.7.8.6.5" data-id-title="More information" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: More information</div><p>
     To learn more about concepts and definitions of TLS/SSL, refer to
     <a class="link" href="https://httpd.apache.org/docs/2.4/ssl/ssl_intro.html" target="_blank">https://httpd.apache.org/docs/2.4/ssl/ssl_intro.html</a>.
    </p></div><section class="sect3" id="sec-apache2-ssl-certificate-test" data-id-title="Creating a test certificate"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">42.6.1.1 </span><span class="title-name">Creating a <span class="quote">“<span class="quote">test</span>”</span> certificate</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-ssl-certificate-test">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     To generate a test certificate, call the script
     <code class="command">/usr/bin/gensslcert</code>. It creates or overwrites the files
     listed below. Use <code class="command">gensslcert</code>'s optional switches to
     fine-tune the certificate. Call <code class="command">/usr/bin/gensslcert </code>
     <code class="option">-h</code> for more information.
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       <code class="filename">/etc/apache2/ssl.crt/ca.crt</code>
      </p></li><li class="listitem"><p>
       <code class="filename">/etc/apache2/ssl.crt/server.crt</code>
      </p></li><li class="listitem"><p>
       <code class="filename">/etc/apache2/ssl.key/server.key</code>
      </p></li><li class="listitem"><p>
       <code class="filename">/etc/apache2/ssl.csr/server.csr</code>
      </p></li></ul></div><p>
     A copy of <code class="filename">ca.crt</code> is also placed at
     <code class="filename">/srv/www/htdocs/CA.crt</code> for download.
    </p><div id="id-1.3.7.7.8.6.6.5" data-id-title="For testing purposes only" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: For testing purposes only</div><p>
      A test certificate should never be used on a production system. Only use
      it for testing purposes.
     </p></div></section><section class="sect3" id="sec-apache2-ssl-certificate-custom" data-id-title="Creating a self-signed certificate"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">42.6.1.2 </span><span class="title-name">Creating a self-signed certificate</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-ssl-certificate-custom">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     If you are setting up a secure Web server for an intranet or for a defined
     circle of users, it is sufficient to sign a certificate with your own
     certificate authority (CA). Visitors to such a site will see a warning like
     <span class="quote">“<span class="quote">this is an untrusted site</span>”</span>, as Web browsers do not recognize
     self-signed certificates.
    </p><div id="id-1.3.7.7.8.6.7.3" data-id-title="Self-signed certificates" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Self-signed certificates</div><p>
      Only use a self-signed certificate on a Web server that is accessed by
      people who know and trust you as a certificate authority. It is not
      recommended to use such a certificate for a public shop, for example.
     </p></div><p>
     First you need to generate a certificate signing request (CSR). You are
     going to use <code class="command">openssl</code>, with <code class="literal">PEM</code> as
     the certificate format. During this step, you will be asked for a
     passphrase, and to answer several questions. Remember the passphrase you
     enter as you will need it in the future.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> openssl req -new &gt; new.cert.csr
Generating a 1024 bit RSA private key
..++++++
.........++++++
writing new private key to 'privkey.pem'
Enter PEM pass phrase:<span class="callout" id="co-ssl-self-pass1">1</span>
Verifying - Enter PEM pass phrase:<span class="callout" id="co-ssl-self-pass2">2</span>
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:<span class="callout" id="co-ssl-self-country">3</span>
State or Province Name (full name) [Some-State]:<span class="callout" id="co-ssl-self-state">4</span>
Locality Name (eg, city) []:<span class="callout" id="co-ssl-self-city">5</span>
Organization Name (eg, company) [Internet Widgits Pty Ltd]:<span class="callout" id="co-ssl-self-org">6</span>
Organizational Unit Name (eg, section) []:<span class="callout" id="co-ssl-self-uname">7</span>
Common Name (for example server FQDN, or YOUR name) []:<span class="callout" id="co-ssl-self-cname">8</span>
Email Address []:<span class="callout" id="co-ssl-self-email">9</span>

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:<span class="callout" id="co-ssl-self-challenge">10</span>
An optional company name []:<span class="callout" id="co-ssl-self-optional">11</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ssl-self-pass1"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Fill in your passphrase.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ssl-self-pass2"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Fill it in once more (and remember it).
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ssl-self-country"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Fill in your 2 letter country code, such as <code class="literal">GB</code> or
       <code class="literal">CZ</code>.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ssl-self-state"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Fill in the name of the state where you live.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ssl-self-city"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Fill in the city name, such as <code class="literal">Prague</code>.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ssl-self-org"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Fill in the name of the organization you work for.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ssl-self-uname"><span class="callout">7</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Fill in your organization unit, or leave blank if you have none.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ssl-self-cname"><span class="callout">8</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Fill in either the domain name of the server, or your first and last
       name.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ssl-self-email"><span class="callout">9</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Fill in your work e-mail address.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ssl-self-challenge"><span class="callout">10</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Leave the challenge password empty, otherwise you need to enter it
       every time you restart the Apache Web server.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-ssl-self-optional"><span class="callout">11</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       Fill in the optional company name, or leave blank.
      </p></td></tr></table></div><p>
     Now you can generate the certificate. You are going to use
     <code class="command">openssl</code> again, and the format of the certificate is the
     default <code class="literal">PEM</code>.
    </p><div class="procedure" id="id-1.3.7.7.8.6.7.8" data-id-title="Generating the certificate"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 42.3: </span><span class="title-name">Generating the certificate </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.7.8.6.7.8">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       Export the private part of the key to <code class="filename">new.cert.key</code>.
       You will be prompted for the passphrase you entered when creating the
       certificate signing request (CSR).
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> openssl rsa -in privkey.pem -out new.cert.key</pre></div></li><li class="step"><p>
       Generate the public part of the certificate according to the information
       you filled out in the signing request. The <code class="option">-days</code> option
       specifies the length of time before the certificate expires. You can
       revoke a certificate, or replace one before it expires.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> openssl x509 -in new.cert.csr -out new.cert.cert -req \
-signkey new.cert.key -days 365</pre></div></li><li class="step"><p>
       Copy the certificate files to the relevant directories, so that the
       Apache server can read them. Make sure that the private key
       <code class="filename">/etc/apache2/ssl.key/server.key</code> is not
       world-readable, while the public PEM certificate
       <code class="filename">/etc/apache2/ssl.crt/server.crt</code> is.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> cp new.cert.cert /etc/apache2/ssl.crt/server.crt
<code class="prompt user">&gt; </code><code class="command">sudo</code> cp new.cert.key /etc/apache2/ssl.key/server.key</pre></div></li></ol></div></div><div id="id-1.3.7.7.8.6.7.9" data-id-title="Public certificate location" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Public certificate location</div><p>
      The last step is to copy the public certificate file from
      <code class="filename">/etc/apache2/ssl.crt/server.crt</code> to a location where
      your users can access it to incorporate it into the list of known and
      trusted CAs in their Web browsers. Otherwise a browser complains that the
      certificate was issued by an unknown authority.
     </p></div></section><section class="sect3" id="sec-apache2-ssl-certificate-official" data-id-title="Getting an officially signed certificate"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">42.6.1.3 </span><span class="title-name">Getting an officially signed certificate</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-ssl-certificate-official">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     There are several official certificate authorities that sign your
     certificates. The certificate is signed by a trustworthy third party, so
     can be fully trusted. Publicly operating secure Web servers usually have
     an officially signed certificate. A list of the most used Certificate
     Authorities (CAs) is available at
     <a class="link" href="https://en.wikipedia.org/wiki/Certificate_authority#Providers" target="_blank">https://en.wikipedia.org/wiki/Certificate_authority#Providers</a>.
    </p><p>
     When requesting an officially signed certificate, you do not send a
     certificate to the CA. Instead, issue a Certificate Signing Request

     (CSR). To create a CSR, run the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>openssl req -new -newkey rsa:2048 -nodes -keyout newkey.pem -out newreq.pem</pre></div><p>

     You are asked to enter a distinguished name. This requires you to answer a
     few questions, such as country name or organization name. Enter valid
     data—everything you enter here later shows up in the certificate and
     is checked. You do not need to answer every question. If one does not
     apply to you or you want to leave it blank, use <span class="quote">“<span class="quote">.</span>”</span>. Common
     name is the name of the CA itself—choose a significant name, such as
     <em class="replaceable">My company</em> CA. Last, a challenge password and
     an alternative company name must be entered.
    </p><p>
     Find the CSR in the directory from which you called the script. The file
     is named <code class="filename">newreq.pem</code>.
    </p></section></section><section class="sect2" id="sec-apache2-ssl-configuration" data-id-title="Configuring Apache with SSL"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.6.2 </span><span class="title-name">Configuring Apache with SSL</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-ssl-configuration">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The default port for TLS/SSL requests on the Web server side is 443. There
    is no conflict between a <span class="quote">“<span class="quote">regular</span>”</span> Apache listening on port 80
    and an TLS/SSL-enabled Apache listening on port 443. In fact, HTTP and
    HTTPS can be run with the same Apache instance. Usually separate virtual
    hosts are used to dispatch requests to port 80 and port 443 to separate
    virtual servers.
   </p><div id="id-1.3.7.7.8.7.3" data-id-title="Firewall configuration" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Firewall configuration</div><p>
     Do not forget to open the firewall for SSL-enabled Apache on port 443.
     This can be done with <code class="systemitem">firewalld</code> as described in
     <span class="intraxref">Book “Security and Hardening Guide”, Chapter 23 “Masquerading and firewalls”, Section 23.4.3 “Configuring the firewall on the command line”</span>.
    </p></div><p>
    The SSL module is enabled by default in the global server configuration. In
    case it has been disabled on your host, activate it with the following
    command: <code class="command">a2enmod ssl</code>. To finally enable SSL, the server
    needs to be started with the flag <span class="quote">“<span class="quote">SSL</span>”</span>. To do so, call
    <code class="command">a2enflag SSL</code> (case-sensitive!). If you have chosen to
    encrypt your server certificate with a password, you should also increase
    the value for <code class="systemitem">APACHE_TIMEOUT</code> in
    <code class="filename">/etc/sysconfig/apache2</code>, so you have enough time to
    enter the passphrase when Apache starts. Restart the server to make these
    changes active. A reload is not sufficient.
   </p><p>
    The virtual host configuration directory contains a template
    <code class="filename">/etc/apache2/vhosts.d/vhost-ssl.template</code> with
    SSL-specific directives that are extensively documented. Refer to
    <a class="xref" href="#sec-apache2-configuration-manually-vhost" title="42.2.2.1. Virtual host configuration">Section 42.2.2.1, “Virtual host configuration”</a> for the general
    virtual host configuration.
   </p><p>
    To get started, copy the template to
    <code class="filename">/etc/apache2/vhosts.d/<em class="replaceable">MYSSL-HOST</em>.conf</code>
    and edit it. Adjusting the values for the following directives should be
    sufficient:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <code class="systemitem">DocumentRoot</code>
     </p></li><li class="listitem"><p>
      <code class="systemitem">ServerName</code>
     </p></li><li class="listitem"><p>
      <code class="systemitem">ServerAdmin</code>
     </p></li><li class="listitem"><p>
      <code class="systemitem">ErrorLog</code>
     </p></li><li class="listitem"><p>
      <code class="systemitem">TransferLog</code>
     </p></li></ul></div><section class="sect3" id="sec-apache2-ssl-configuration-name-based" data-id-title="Name-based virtual hosts and SSL"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">42.6.2.1 </span><span class="title-name">Name-based virtual hosts and SSL</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-ssl-configuration-name-based">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     By default it is not possible to run multiple SSL-enabled virtual hosts on
     a server with only one IP address. Name-based virtual hosting requires
     that Apache knows which server name has been requested. The problem with
     SSL connections is, that such a request can only be read after the SSL
     connection has already been established (by using the default virtual
     host). As a result, users will receive a warning message stating that the
     certificate does not match the server name.
    </p><p>
     <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> comes with an extension to the SSL protocol called Server
     Name Indication (SNI) addresses this issue by sending the name of the
     virtual domain as part of the SSL negotiation. This enables the server to
     <span class="quote">“<span class="quote">switch</span>”</span> to the correct virtual domain early and present the
     browser the correct certificate.
    </p><p>
     SNI is enabled by default on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. To enable Name-Based Virtual
     Hosts for SSL, configure the server as described in
     <a class="xref" href="#sec-apache2-configuration-manually-vhost-named-vhosts" title="42.2.2.1.1. Name-based virtual hosts">Section 42.2.2.1.1, “Name-based virtual hosts”</a>
     (you need to use port <code class="literal">443</code> rather than port
     <code class="literal">80</code> with SSL).
    </p><div id="id-1.3.7.7.8.7.8.5" data-id-title="SNI browser support" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: SNI browser support</div><p>
      SNI must also be supported on the client side. However, SNI is supported
      by most browsers, except for certain older browsers. For more
      information, see
      <a class="link" href="https://en.wikipedia.org/wiki/Server_Name_Indication#Support" target="_blank">https://en.wikipedia.org/wiki/Server_Name_Indication#Support</a>.
     </p><p>
      To configure handling of non-SNI capable browsers, use the directive
      <code class="systemitem">SSLStrictSNIVHostCheck</code>. When set to
      <code class="literal">on</code> in the server configuration, non-SNI capable
      browser will be rejected for all virtual hosts. When set to
      <code class="literal">on</code> within a <code class="systemitem">VirtualHost</code>
      directive, access to this particular host will be rejected.
     </p><p>
      When set to <code class="literal">off</code> in the server configuration, the
      server will behave as if not having SNI support. SSL requests will be
      handled by the <span class="emphasis"><em>first</em></span> virtual host defined (for port
      443).
     </p></div></section></section></section><section class="sect1" id="sec-apache2-multiple-instances" data-id-title="Running multiple Apache instances on the same server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">42.7 </span><span class="title-name">Running multiple Apache instances on the same server</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-multiple-instances">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Running multiple Apache instances on the same server has several advantages
   over running multiple virtual hosts (see
   <a class="xref" href="#sec-apache2-configuration-manually-vhost" title="42.2.2.1. Virtual host configuration">Section 42.2.2.1, “Virtual host configuration”</a>):
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     When a virtual host needs to be disabled for a period of time, you need to
     change the Web server configuration and restart it so that the change takes
     effect.
    </p></li><li class="listitem"><p>
     In case of problems with one virtual host, you need to restart them all.
    </p></li></ul></div><p>
   You can run the default Apache instance as usual:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start apache2.service</pre></div><p>
   It reads the default <code class="filename">/etc/sysconfig/apache2</code> file. If
   the file is not present, or it is present but it does not set the
   <code class="systemitem">APACHE_HTTPD_CONF</code> variable, it reads
   <code class="filename">/etc/apache2/httpd.conf</code>.
  </p><p>
   To activate another Apache instance, run:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start apache2@<em class="replaceable">INSTANCE_NAME</em></pre></div><p>
   For example:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start apache2@example_web.org</pre></div><p>
   By default, the instance uses
   <code class="filename">/etc/apache2@example_web.org/httpd.conf</code> as a main
   configuration file, which can be overwritten by setting
   <code class="systemitem">APACHE_HTTPD_CONF</code> in
   <code class="filename">/etc/sysconfig/apache2@example_web.org</code>.
  </p><p>
   An example to set up an additional instance of Apache follows. You need to
   execute all the commands as <code class="systemitem">root</code>.
  </p><div class="procedure" id="id-1.3.7.7.9.13" data-id-title="Configuring an additional Apache instance"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 42.4: </span><span class="title-name">Configuring an additional Apache instance </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.7.9.13">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Create a new configuration file based on
     <code class="filename">/etc/sysconfig/apache2</code>, for example
     <code class="filename">/etc/sysconfig/apache2@example_web.org</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> cp /etc/sysconfig/apache2 /etc/sysconfig/apache2@example_web.org</pre></div></li><li class="step"><p>
     Edit the file <code class="filename">/etc/sysconfig/apache2@example_web.org</code>
     and change the line containing
    </p><div class="verbatim-wrap"><pre class="screen">APACHE_HTTPD_CONF</pre></div><p>
     to
    </p><div class="verbatim-wrap"><pre class="screen">APACHE_HTTPD_CONF="/etc/apache2/httpd@example_web.org.conf"</pre></div></li><li class="step"><p>
     Create the file
     <code class="filename">/etc/apache2/httpd@example_web.org.conf</code> based on
     <code class="filename">/etc/apache2/httpd.conf</code>.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> cp /etc/apache2/httpd.conf /etc/apache2/httpd@example_web.org.conf</pre></div></li><li class="step"><p>
     Edit <code class="filename">/etc/apache2/httpd@example_web.org.conf</code> and
     change
    </p><div class="verbatim-wrap"><pre class="screen">Include /etc/apache2/listen.conf</pre></div><p>
     to
    </p><div class="verbatim-wrap"><pre class="screen">Include /etc/apache2/listen@example_web.org.conf</pre></div><p>
     Review all the directives and change them to fit your needs. You
     may want to change
    </p><div class="verbatim-wrap"><pre class="screen">Include /etc/apache2/global.conf</pre></div><p>
     and create new <code class="filename">global@example_web.org.conf</code> for each
     instance. We suggest to change
    </p><div class="verbatim-wrap"><pre class="screen">ErrorLog /var/log/apache2/error_log</pre></div><p>
     to
    </p><div class="verbatim-wrap"><pre class="screen">ErrorLog /var/log/apache2/error@example_web.org_log</pre></div><p>
     to have separate logs for each instance.
    </p></li><li class="step"><p>
     Create <code class="filename">/etc/apache2/listen@example_web.org.conf</code> based
     on <code class="filename">/etc/apache2/listen.conf</code>.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> cp /etc/apache2/listen.conf /etc/apache2/listen@example_web.org.conf</pre></div></li><li class="step"><p>
     Edit <code class="filename">/etc/apache2/listen@example_web.org.conf</code> and
     change
    </p><div class="verbatim-wrap"><pre class="screen">Listen 80</pre></div><p>
     to the port number you want the new instance to run on, for example, 82:
    </p><div class="verbatim-wrap"><pre class="screen">Listen 82</pre></div><p>
     To run the new Apache instance over a secured protocol (see
     <a class="xref" href="#sec-apache2-ssl" title="42.6. Setting up a secure Web server with SSL">Section 42.6, “Setting up a secure Web server with SSL”</a>), change also the line
    </p><div class="verbatim-wrap"><pre class="screen">Listen 443</pre></div><p>
     for example, to
    </p><div class="verbatim-wrap"><pre class="screen">Listen 445</pre></div></li><li class="step"><p>
     Start the new Apache instance:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start apache2@example_web.org</pre></div></li><li class="step"><p>
     Check if the server is running by pointing your Web browser at
     <code class="literal">http://server_name:82</code>. If you previously changed the
     name of the error log file for the new instance, you can check it:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> tail -f /var/log/apache2/error@example_web.org_log</pre></div></li></ol></div></div><p>
   Here are several points to consider when setting up more Apache instances on
   the same server:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     The file
     <code class="filename">/etc/sysconfig/apache2@<em class="replaceable">INSTANCE_NAME</em></code>
     can include the same variables as
     <code class="filename">/etc/sysconfig/apache2</code>, including module loading and
     MPM setting.
    </p></li><li class="listitem"><p>
     The default Apache instance does not need to be running while other
     instances run.
    </p></li><li class="listitem"><p>
     The Apache helper utilities <code class="command">a2enmod</code>,
     <code class="command">a2dismod</code> and <code class="command">apachectl</code> operate on
     the default Apache instance if not specified otherwise with the
     <code class="systemitem">HTTPD_INSTANCE</code> environment variable. The
     following example
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> export HTTPD_INSTANCE=example_web.org
<code class="prompt user">&gt; </code><code class="command">sudo</code> a2enmod access_compat
<code class="prompt user">&gt; </code><code class="command">sudo</code> a2enmod status
<code class="prompt user">&gt; </code><code class="command">sudo</code> apachectl start</pre></div><p>
     will add <code class="systemitem">access_compat</code> and
     <code class="systemitem">status</code> modules to the
     <code class="systemitem">APACHE_MODULES</code> variable of
     <code class="filename">/etc/sysconfig/apache2@example_web.org</code>, and then
     start the <code class="literal">example_web.org</code> instance.
    </p></li></ul></div></section><section class="sect1" id="sec-apache2-security" data-id-title="Avoiding security problems"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">42.8 </span><span class="title-name">Avoiding security problems</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-security">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A Web server exposed to the public Internet requires an ongoing
   administrative effort. It is inevitable that security issues appear, both
   related to the software and to accidental misconfiguration. Here are several
   tips for how to deal with them.
  </p><section class="sect2" id="sec-apache2-security-up-to-date" data-id-title="Up-to-date software"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.8.1 </span><span class="title-name">Up-to-date software</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-security-up-to-date">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If there are vulnerabilities found in the Apache software, a security
    advisory will be issued by SUSE. It contains instructions for fixing the
    vulnerabilities, which in turn should be applied when possible. The SUSE
    security announcements are available from the following locations:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="formalpara-title">Web page. </span>
       <a class="link" href="https://www.suse.com/support/security/" target="_blank">https://www.suse.com/support/security/</a>
      </p></li><li class="listitem"><p><span class="formalpara-title">Mailing list archive. </span>
       <a class="link" href="https://lists.opensuse.org/archives/list/security-announce@lists.opensuse.org/" target="_blank">https://lists.opensuse.org/archives/list/security-announce@lists.opensuse.org/</a>
      </p></li><li class="listitem"><p><span class="formalpara-title">List of security announcements. </span>
       <a class="link" href="https://www.suse.com/support/update/" target="_blank">https://www.suse.com/support/update/</a>
      </p></li></ul></div></section><section class="sect2" id="sec-apache2-security-permissions" data-id-title="DocumentRoot permissions"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.8.2 </span><span class="title-name">DocumentRoot permissions</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-security-permissions">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    By default in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, the <code class="systemitem">DocumentRoot</code>
    directory <code class="filename">/srv/www/htdocs</code> and the CGI directory
    <code class="filename">/srv/www/cgi-bin</code> belong to the user and group
    <code class="systemitem">root</code>. You should not change these permissions. If
    the directories are writable for all, any user can place files into them.
    These files might then be executed by Apache with the permissions of
    <code class="systemitem">wwwrun</code>, which may give the user unintended access
    to file system resources. Use subdirectories of
    <code class="filename">/srv/www</code> to place the
    <code class="systemitem">DocumentRoot</code> and CGI directories for your virtual
    hosts and make sure that directories and files belong to user and group
    <code class="systemitem">root</code>.
   </p></section><section class="sect2" id="sec-apache2-security-filesystem" data-id-title="File system access"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.8.3 </span><span class="title-name">File system access</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-security-filesystem">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    By default, access to the whole file system is denied in
    <code class="filename">/etc/apache2/httpd.conf</code>. You should never overwrite
    these directives, but specifically enable access to all directories Apache
    should be able to read. For details, see
    <a class="xref" href="#sec-apache2-configuration-manually-vhost-basic-configuration" title="42.2.2.1.3. Basic virtual host configuration">Section 42.2.2.1.3, “Basic virtual host configuration”</a>.
    In doing so, ensure that no critical files, such as password or system
    configuration files, can be read from the outside.
   </p></section><section class="sect2" id="sec-apache2-security-cgi" data-id-title="CGI scripts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.8.4 </span><span class="title-name">CGI scripts</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-security-cgi">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Interactive scripts in PHP, SSI or any other programming language can
    run arbitrary commands and therefore present a general security
    issue. Scripts that will be executed from the server should only be
    installed from sources the server administrator trusts—allowing users
    to run their own scripts is generally not a good idea. It is also
    recommended to do security audits for all scripts.
   </p><p>
    To make the administration of scripts as easy as possible, it is common
    practice to limit the execution of CGI scripts to specific directories
    instead of globally allowing them. The directives
    <code class="systemitem">ScriptAlias</code> and <code class="systemitem">Option
    ExecCGI</code> are used for configuration. The <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> default
    configuration does not allow execution of CGI scripts from everywhere.
   </p><p>
    All CGI scripts run as the same user, so different scripts can potentially
    conflict with each other. The module suEXEC lets you run CGI scripts under
    a different user and group.
   </p></section><section class="sect2" id="sec-apache2-security-users" data-id-title="User directories"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.8.5 </span><span class="title-name">User directories</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-security-users">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When enabling user directories (with <code class="systemitem">mod_userdir</code>
    or <code class="systemitem">mod_rewrite</code>) you should strongly consider not
    allowing <code class="filename">.htaccess</code> files, which would allow users to
    overwrite security settings. At least you should limit the user's
    engagement by using the directive <code class="systemitem">AllowOverRide</code>.
    In <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, <code class="filename">.htaccess</code> files are enabled by
    default, but the user is not allowed to overwrite any
    <code class="systemitem">Option</code> directives when using
    <code class="systemitem">mod_userdir</code> (see the
    <code class="filename">/etc/apache2/mod_userdir.conf</code> configuration file).
   </p></section></section><section class="sect1" id="sec-apache2-troubleeshooting" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">42.9 </span><span class="title-name">Troubleshooting</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-troubleeshooting">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If Apache does not start, the Web page is not accessible, or users cannot
   connect to the Web server, it is important to find the cause of the problem.
   Here are typical places to look for error explanations and important
   things to check:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.7.11.3.1"><span class="term">Output of the <code class="systemitem">apache2.service</code> subcommand:</span></dt><dd><p>
      Instead of starting and stopping the Web server with the binary
      <code class="filename">/usr/sbin/apache2ctl</code>, rather use the
      <code class="command">systemctl</code> commands instead (described in
      <a class="xref" href="#sec-apache2-start-stop" title="42.3. Starting and stopping Apache">Section 42.3, “Starting and stopping Apache”</a>). <code class="command">systemctl
      status apache2.service</code> is verbose about errors, and it even
      provides tips and hints for fixing configuration errors.
     </p></dd><dt id="id-1.3.7.7.11.3.2"><span class="term">Log files and verbosity</span></dt><dd><p>
      In case of both fatal and nonfatal errors, check the Apache log files for
      causes, mainly the error log file located at
      <code class="filename">/var/log/apache2/error_log</code> by default. Additionally,
      you can control the verbosity of the logged messages with the
      <code class="systemitem">LogLevel</code> directive if more detail is needed in
      the log files.
     </p><div id="id-1.3.7.7.11.3.2.2.2" data-id-title="A simple test" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: A simple test</div><p>
       Watch the Apache log messages with the command <code class="command">tail -F
       /var/log/apache2/<em class="replaceable">MY_ERROR_LOG</em></code>. Then
       run <code class="command">systemctl restart apache2.service</code>. Now, try to
       connect with a browser and check the output.
      </p></div></dd><dt id="id-1.3.7.7.11.3.3"><span class="term">Firewall and ports</span></dt><dd><p>
      A common mistake is to not open the ports for Apache in the firewall
      configuration of the server. If you configure Apache with YaST, there
      is a separate option available to take care of this specific issue (see
      <a class="xref" href="#sec-apache2-configuration-yast" title="42.2.3. Configuring Apache with YaST">Section 42.2.3, “Configuring Apache with YaST”</a>). If you are configuring
      Apache manually, open firewall ports for HTTP and HTTPS via YaST's
      firewall module.
     </p></dd></dl></div><p>
   If the error cannot be tracked down with any of these, check the online
   Apache bug database at
   <a class="link" href="https://httpd.apache.org/bug_report.html" target="_blank">https://httpd.apache.org/bug_report.html</a>. Additionally,
   the Apache user community can be reached via a mailing list available at
   <a class="link" href="https://httpd.apache.org/userslist.html" target="_blank">https://httpd.apache.org/userslist.html</a>.
  </p></section><section class="sect1" id="sec-apache2-more-information" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">42.10 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-more-information">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The package <code class="systemitem">apache2-doc</code> contains the complete
   Apache manual in multiple localizations for local installation and reference.
   It is not installed by default—the quickest way to install it is to
   use the command <code class="command">zypper in apache2-doc</code>. Having been
   installed, the Apache manual is available at
   <a class="link" href="http://localhost/manual/" target="_blank">http://localhost/manual/</a>. You may also access it on the
   Web at <a class="link" href="https://httpd.apache.org/docs/2.4/" target="_blank">https://httpd.apache.org/docs/2.4/</a>. SUSE-specific
   configuration hints are available in the directory
   <code class="filename">/usr/share/doc/packages/apache2/README.*</code>.
  </p><section class="sect2" id="sec-apache2-more-information-apache22" data-id-title="Apache 2.4"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.10.1 </span><span class="title-name">Apache 2.4</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-more-information-apache22">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    For a list of new features in Apache 2.4, refer to
    <a class="link" href="https://httpd.apache.org/docs/2.4/new_features_2_4.html" target="_blank">https://httpd.apache.org/docs/2.4/new_features_2_4.html</a>.
    Information about upgrading from version 2.2 to 2.4 is available at
    <a class="link" href="https://httpd.apache.org/docs/2.4/upgrading.html" target="_blank">https://httpd.apache.org/docs/2.4/upgrading.html</a>.
   </p></section><section class="sect2" id="sec-apache2-more-information-modules" data-id-title="Apache modules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.10.2 </span><span class="title-name">Apache modules</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-more-information-modules">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    More information about external Apache modules that are briefly described
    in <a class="xref" href="#sec-apache2-modules-external" title="42.4.5. External modules">Section 42.4.5, “External modules”</a> is available at the
    following locations:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.7.12.4.3.1"><span class="term"><code class="systemitem">mod_apparmor</code></span></dt><dd><p>
       <a class="link" href="https://en.opensuse.org/SDB:AppArmor" target="_blank">https://en.opensuse.org/SDB:AppArmor</a>
      </p></dd><dt id="id-1.3.7.7.12.4.3.2"><span class="term"><code class="systemitem">mod_php8</code></span></dt><dd><p>
       <a class="link" href="https://www.php.net/manual/en/install.unix.apache2.php" target="_blank">https://www.php.net/manual/en/install.unix.apache2.php</a>
      </p><p>
       You can obtain detailed information about
       <code class="systemitem">mod_php8</code> configuration in its
       well-commented main configuration file
       <code class="filename">/etc/php8/apache2/php.ini</code>.
      </p></dd><dt id="id-1.3.7.7.12.4.3.3"><span class="term"><code class="systemitem">mod_python</code></span></dt><dd><p>
       <a class="link" href="https://modpython.org/" target="_blank">https://modpython.org/</a>
      </p></dd><dt id="id-1.3.7.7.12.4.3.4"><span class="term"><code class="systemitem">mod_security</code></span></dt><dd><p>
       <a class="link" href="https://github.com/owasp-modsecurity/ModSecurity" target="_blank">https://github.com/owasp-modsecurity/ModSecurity</a>
      </p></dd></dl></div></section><section class="sect2" id="sec-apache2-more-information-cgi" data-id-title="Development"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.10.3 </span><span class="title-name">Development</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-more-information-cgi">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    More information about developing Apache modules or about getting involved
    in the Apache Web server project are available at the following locations:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.7.12.5.3.1"><span class="term">Apache developer information</span></dt><dd><p>
       <a class="link" href="https://httpd.apache.org/dev/" target="_blank">https://httpd.apache.org/dev/</a>
      </p></dd><dt id="id-1.3.7.7.12.5.3.2"><span class="term">Apache developer documentation</span></dt><dd><p>
       <a class="link" href="https://httpd.apache.org/docs/2.4/developer/" target="_blank">https://httpd.apache.org/docs/2.4/developer/</a>
      </p></dd></dl></div></section><section class="sect2" id="sec-apache2-more-information-miscellaneous-sources" data-id-title="Miscellaneous sources"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">42.10.4 </span><span class="title-name">Miscellaneous sources</span></span> <a title="Permalink" class="permalink" href="#sec-apache2-more-information-miscellaneous-sources">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/apache2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you experience difficulties specific to Apache in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, take a
    look at the Technical Information Search at
    <a class="link" href="https://www.suse.com/support/" target="_blank">https://www.suse.com/support/</a>. The history of Apache is
    provided at
    <a class="link" href="https://httpd.apache.org/ABOUT_APACHE.html" target="_blank">https://httpd.apache.org/ABOUT_APACHE.html</a>. This page
    also explains why the server is called Apache.
   </p></section></section></section><section class="chapter" id="cha-ftp" data-id-title="Setting up an FTP server with YaST"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">43 </span><span class="title-name">Setting up an FTP server with YaST</span></span> <a title="Permalink" class="permalink" href="#cha-ftp">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ftp.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Using the YaST <span class="guimenu">FTP Server</span> module, you can configure
    your machine to function as an FTP (File Transfer Protocol) server.
    Anonymous and/or authenticated users can connect to your machine and
    download files using the FTP protocol. Depending on the configuration, they
    can also upload files to the FTP server. YaST uses vsftpd (Very Secure
    FTP Daemon).
   </p></div></div></div></div><p>
  If the YaST FTP Server module is not available in your system, install the
  <code class="systemitem">yast2-ftp-server</code> package. (For
  managing the FTP server from the command line, see 
  <a class="xref" href="#sec-yast-ftp-server" title="4.4.3.7. yast ftp-server">Section 4.4.3.7, “yast ftp-server”</a>.)
 </p><p>
  To configure the FTP server using YaST, follow these steps:
 </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    Open the YaST control center and choose <span class="guimenu">Network
    Services</span> › <span class="guimenu">FTP Server</span> or run the
    <code class="command">yast2 ftp-server</code> command as <code class="systemitem">root</code>.
   </p></li><li class="step"><p>
    If there is not any FTP server installed in your system, you are asked
    which server to install when the YaST FTP Server module starts. Choose
    the vsftpd server and confirm the dialog.
   </p></li><li class="step"><p>
    In the <span class="guimenu">Start-Up</span> dialog, configure the options for
    starting of the FTP server. For more information, see
    <a class="xref" href="#sec-ftp-start" title="43.1. Starting the FTP server">Section 43.1, “Starting the FTP server”</a>.
   </p><p>
    In the <span class="guimenu">General</span> dialog, configure FTP directories,
    welcome message, file creation masks and other parameters. For more
    information, see <a class="xref" href="#sec-ftp-general" title="43.2. FTP general settings">Section 43.2, “FTP general settings”</a>.
   </p><p>
    In the <span class="guimenu">Performance</span> dialog, set the parameters that
    affect the load on the FTP server. For more information, see
    <a class="xref" href="#sec-ftp-performance" title="43.3. FTP performance settings">Section 43.3, “FTP performance settings”</a>.
   </p><p>
    In the <span class="guimenu">Authentication</span> dialog, set whether the FTP server
    should be available for anonymous and/or authenticated users. For more
    information, see <a class="xref" href="#sec-ftp-auth" title="43.4. Authentication">Section 43.4, “Authentication”</a>.
   </p><p>
    In the <span class="guimenu">Expert Settings</span> dialog, configure the operation
    mode of the FTP server, SSL connections and firewall settings. For more
    information, see <a class="xref" href="#sec-ftp-expert" title="43.5. Expert settings">Section 43.5, “Expert settings”</a>.
   </p></li><li class="step"><p>
    Click <span class="guimenu">Finish</span> to save the configurations.
   </p></li></ol></div></div><section class="sect1" id="sec-ftp-start" data-id-title="Starting the FTP server"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">43.1 </span><span class="title-name">Starting the FTP server</span></span> <a title="Permalink" class="permalink" href="#sec-ftp-start">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ftp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In the <span class="guimenu">Service Start</span> frame of the <span class="guimenu">FTP
   Start-Up</span> dialog set the way the FTP server is started up. You can
   choose between starting the server automatically during the system boot and
   starting it manually. If the FTP server should be started only after an FTP
   connection request, choose <span class="guimenu">Via socket</span>.
  </p><p>
   The current status of the FTP server is shown in the <span class="guimenu">Switch On and
   Off</span> frame of the <span class="guimenu">FTP Start-Up</span> dialog. Start the
   FTP server by clicking <span class="guimenu">Start FTP Now</span>. To stop the server,
   click <span class="guimenu">Stop FTP Now</span>. After having changed the settings of
   the server click <span class="guimenu">Save Settings and Restart FTP Now</span>. Your
   configurations will be saved by leaving the configuration module with
   <span class="guimenu">Finish</span>.
  </p><div class="figure" id="fig-yast2-ftp-start-up"><div class="figure-contents"><div class="mediaobject"><a href="images/yast2_ftp-start-up.png"><img src="images/yast2_ftp-start-up.png" width="75%" alt="FTP server configuration — start-up" title="FTP server configuration — start-up"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 43.1: </span><span class="title-name">FTP server configuration — start-up </span></span><a title="Permalink" class="permalink" href="#fig-yast2-ftp-start-up">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ftp.xml" title="Edit source document"> </a></div></div></div></section><section class="sect1" id="sec-ftp-general" data-id-title="FTP general settings"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">43.2 </span><span class="title-name">FTP general settings</span></span> <a title="Permalink" class="permalink" href="#sec-ftp-general">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ftp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In the <span class="guimenu">General Settings</span> frame of the <span class="guimenu">FTP General
   Settings</span> dialog you can set the <span class="guimenu">Welcome message</span>
   which is shown after connecting to the FTP server.
  </p><p>
   If you check the <span class="guimenu">Chroot Everyone</span> option, all local users
   are placed in a chroot jail in their home directory after login. This option
   has security implications, especially if the users have upload permission or
   shell access, so be careful enabling this option.
  </p><p>
   If you check the <span class="guimenu">Verbose Logging</span> option, all FTP requests
   and responses are logged.
  </p><p>
   You can limit permissions of files created by anonymous and/or authenticated
   users with umask. Set the file creation mask for anonymous users in
   <span class="guimenu">Umask for Anonymous</span> and the file creation mask for
   authenticated users in <span class="guimenu">Umask for Authenticated Users</span>. The
   masks should be entered as octal numbers with a leading zero. For more
   information about umask, see the umask man page
   (<code class="command">man 1p umask</code>).
  </p><p>
   In the <span class="guimenu">FTP Directories</span> frame set the directories used for
   anonymous and authorized users. With <span class="guimenu">Browse</span>, you can
   select a directory to be used from the local file system. The default FTP
   directory for anonymous users is <code class="filename">/srv/ftp</code>. vsftpd does
   not allow this directory to be writable for all users. The subdirectory
   <code class="filename">upload</code> with write permissions for anonymous users is
   created instead.
  </p></section><section class="sect1" id="sec-ftp-performance" data-id-title="FTP performance settings"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">43.3 </span><span class="title-name">FTP performance settings</span></span> <a title="Permalink" class="permalink" href="#sec-ftp-performance">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ftp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In the <span class="guimenu">Performance</span> dialog set the parameters which affect
   the load on the FTP server. <span class="guimenu">Max Idle Time</span> is the maximum
   time (in minutes) the remote client may spend between FTP commands. In case
   of longer inactivity, the remote client is disconnected. <span class="guimenu">Max
   Clients for One IP</span> determines the maximum number of clients that
   can be connected from a single IP address. <span class="guimenu">Max Clients</span>
   determines the maximum number of clients that may be connected. Any
   additional clients are refused.
  </p><p>
   The maximum data transfer rate (in KB/s) is set in <span class="guimenu">Local Max
   Rate</span> for local authenticated users, and in <span class="guimenu">Anonymous Max
   Rate</span> for anonymous clients respectively. The default value for the
   rate settings is <code class="literal">0</code>, which means unlimited data transfer
   rate.
  </p></section><section class="sect1" id="sec-ftp-auth" data-id-title="Authentication"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">43.4 </span><span class="title-name">Authentication</span></span> <a title="Permalink" class="permalink" href="#sec-ftp-auth">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ftp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In the <span class="guimenu">Enable/Disable Anonymous and Local Users</span> frame of
   the <span class="guimenu">Authentication</span> dialog, you can set which users are
   allowed to access your FTP server. You can choose between the following
   options: granting access to anonymous users only, to authenticated users
   only (with accounts on the system) or to both types of users.
  </p><p>
   To allow users to upload files to the FTP server, check
   <span class="guimenu">Enable Upload</span> in the <span class="guimenu">Uploading</span> frame
   of the <span class="guimenu">Authentication</span> dialog. Here you can allow
   uploading or creating directories even for anonymous users by checking the
   respective box.
  </p><div id="id-1.3.7.8.9.4" data-id-title="vsftp—allowing file upload for anonymous users" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: vsftp—allowing file upload for anonymous users</div><p>
    If a vsftpd server is used and you want anonymous users to be able to
    upload files or create directories, a subdirectory with writing permissions
    for all users needs to be created in the anonymous FTP directory.
   </p></div></section><section class="sect1" id="sec-ftp-expert" data-id-title="Expert settings"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">43.5 </span><span class="title-name">Expert settings</span></span> <a title="Permalink" class="permalink" href="#sec-ftp-expert">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ftp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   An FTP server can run in active or in passive mode. By default the server
   runs in passive mode. To switch into active mode, deselect the <span class="guimenu">Enable
   Passive Mode</span> option in the <span class="guimenu">Expert Settings</span> dialog.
   You can also change the range of ports on the server used for the data
   stream by tweaking the <span class="guimenu">Min Port for Pas. Mode</span> and
   <span class="guimenu">Max Port for Pas. Mode</span> options.
  </p><p>
   If you want encrypted communication between clients and the server, you can
   <span class="guimenu">Enable SSL</span> and, additionally, <span class="guimenu">Enable
   TLS</span>. Specify the RSA certificate to be used for SSL encrypted
   connections.
  </p><div id="id-1.3.7.8.10.4" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
    By default, new versions of the <code class="systemitem">vsftpd
    </code> daemon have the TLS protocol older than version 1.2 disabled.
    If you use an FTP client that requires an older version of the TLS protocol,
    you need to add the following configuration to the
    <code class="filename">/etc/vsftpd.conf</code> file:
   </p><div class="verbatim-wrap"><pre class="screen">ssl_tlsv1 = YES
ssl_tlsv1_1 = YES</pre></div><p>
    Then restart the <code class="systemitem">vsftpd</code> daemon to
    reread the configuration:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl restart vsftpd.service</pre></div></div><p>
   If your system is protected by a firewall, check <span class="guimenu">Open Port in
   Firewall</span> to enable a connection to the FTP server.
  </p></section><section class="sect1" id="sec-ftp-info" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">43.6 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-ftp-info">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/yast2_ftp.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For more information about the FTP server read the manual pages of
   <code class="command">vsftpd</code> and <code class="command">vsftpd.conf</code>.
  </p></section></section><section class="chapter" id="cha-squid" data-id-title="Squid caching proxy server"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">44 </span><span class="title-name">Squid caching proxy server</span></span> <a title="Permalink" class="permalink" href="#cha-squid">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Squid is a widely used caching proxy server for Linux and Unix platforms.
    This means that it stores requested Internet objects, such as data on a Web
    or FTP server, on a machine that is closer to the requesting workstation
    than the server. It can be set up in multiple hierarchies to assure optimal
    response times and low bandwidth usage, even in modes that are transparent
    to end users.
   </p></div></div></div></div><p>
  Squid acts as a caching proxy server. It redirects object requests from
  clients (in this case, from Web browsers) to the server. When the requested
  objects arrive from the server, it delivers the objects to the client and
  keeps a copy of them in the hard disk cache. An advantage of caching is that
  several clients requesting the same object can be served from the hard disk
  cache. This enables clients to receive the data much faster than from the
  Internet. This procedure also reduces the network traffic.
 </p><p>
  Along with actual caching, Squid offers a wide range of features:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Distributing load over intercommunicating hierarchies of proxy servers
   </p></li><li class="listitem"><p>
    Defining strict access control lists for all clients accessing the proxy
    server
   </p></li><li class="listitem"><p>
    Allowing or denying access to specific Web pages using other applications
   </p></li><li class="listitem"><p>
    Generating statistics about frequently visited Web pages for the assessment
    of surfing habits
   </p></li></ul></div><p>
  Squid is not a generic proxy server. It normally proxies only HTTP
  connections. It supports the protocols FTP, Gopher, SSL and WAIS, but it
  does not support other Internet protocols, such as the news protocol, or
  video conferencing protocols. Because Squid only supports the UDP protocol to
  provide communication between different caches, many multimedia programs are
  not supported.
 </p><section class="sect1" id="sec-squid-cacheinfos" data-id-title="Facts about proxy servers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">44.1 </span><span class="title-name">Facts about proxy servers</span></span> <a title="Permalink" class="permalink" href="#sec-squid-cacheinfos">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   As a caching proxy server, Squid can be used in several ways. When combined
   with a firewall, it can help with security. Multiple proxies can be used
   together. It can also determine what types of objects should be cached and
   for how long.
  </p><section class="sect2" id="sec-squid-security" data-id-title="Squid and security"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.1.1 </span><span class="title-name">Squid and security</span></span> <a title="Permalink" class="permalink" href="#sec-squid-security">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    It is possible to use Squid together with a firewall to secure internal
    networks from the outside. The firewall denies all clients access to
    external services except Squid. All Web connections must be established by
    the proxy server. With this configuration, Squid fully controls Web
    access.
   </p><p>
    If the firewall configuration includes a demilitarized zone (DMZ), the
    proxy server should operate within this zone.
    <a class="xref" href="#sec-squid-proxyconfigtrans" title="44.6. Configuring a transparent proxy">Section 44.6, “Configuring a transparent proxy”</a> describes how to implement a
    <span class="emphasis"><em>transparent</em></span> proxy. This simplifies the configuration
    of the clients, because in this case, they do not need any information
    about the proxy server.
   </p></section><section class="sect2" id="sec-squid-morecaches" data-id-title="Multiple caches"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.1.2 </span><span class="title-name">Multiple caches</span></span> <a title="Permalink" class="permalink" href="#sec-squid-morecaches">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Several instances of Squid can be configured to exchange objects between
    them. This reduces the total system load and increases the chances of
    retrieving an object from the local network. It is also possible to
    configure cache hierarchies, so a cache can forward object requests to
    sibling caches or to a parent cache—causing it to request objects
    from another cache in the local network, or directly from the source.
   </p><p>
    Choosing the appropriate topology for the cache hierarchy is
    important, because it is not desirable to increase the overall traffic on
    the network. For a large network, it would make sense to configure a
    proxy server for every subnet and connect them to a parent proxy server,
    which in turn is connected to the caching proxy server of the ISP.
   </p><p>
    All this communication is handled by ICP (Internet cache protocol) running
    on top of the UDP protocol. Data transfers between caches are handled using
    HTTP (hypertext transmission protocol) based on TCP.
   </p><p>
    To find the most appropriate server from which to request objects, a cache
    sends an ICP request to all sibling proxies. The sibling proxies answer
    these requests via ICP responses. If the object was detected, they use the
    code <code class="literal">HIT</code>, if not, they use <code class="literal">MISS</code>.
   </p><p>
    If multiple <code class="literal">HIT</code> responses were found, the proxy server
    decides from which server to download, depending on factors such as which
    cache sent the fastest answer or which one is closer. If no satisfactory
    responses are received, the request is sent to the parent cache.
    
   </p><div id="id-1.3.7.9.7.4.7" data-id-title="How Squid avoids duplication of objects" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: How Squid avoids duplication of objects</div><p>
     To avoid duplication of objects in different caches in the network, other
     ICP protocols are used, such as CARP (cache array routing protocol) or
     HTCP (hypertext cache protocol). The more objects maintained in the
     network, the greater the possibility of finding the desired object.
    </p></div></section><section class="sect2" id="sec-squid-latching" data-id-title="Caching Internet objects"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.1.3 </span><span class="title-name">Caching Internet objects</span></span> <a title="Permalink" class="permalink" href="#sec-squid-latching">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Many objects available in the network are not static, such as dynamically
    generated pages and TLS/SSL-encrypted content. Objects like these are not
    cached because they change each time they are accessed.
    
   </p><p>
    To determine how long objects should remain in the cache, objects are
    assigned one of several states. Web and proxy servers find out the status
    of an object by adding headers to these objects, such as <span class="quote">“<span class="quote">Last
    modified</span>”</span> or <span class="quote">“<span class="quote">Expires</span>”</span> and the corresponding date.
    Other headers specifying that objects must not be cached can be used as
    well.
   </p><p>
    Objects in the cache are normally replaced, because of a lack of free disk
    space, using algorithms such as LRU (last recently used). This means that
    the proxy expunges those objects that have not been requested for the
    longest time.
   </p></section></section><section class="sect1" id="sec-squid-sysneeds" data-id-title="System requirements"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">44.2 </span><span class="title-name">System requirements</span></span> <a title="Permalink" class="permalink" href="#sec-squid-sysneeds">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   System requirements depend on the maximum network load that the
   system must bear. Therefore, examine load peaks, as during those times, load
   might be more than four times the day's average. When in doubt, slightly
   overestimate the system's requirements. Having Squid working close to the
   limit of its capabilities can lead to a severe loss in quality of service.
   The following sections point to system factors in order of significance:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
     RAM size
    </p></li><li class="listitem"><p>
     CPU speed/physical CPU cores
    </p></li><li class="listitem"><p>
     Size of the disk cache
    </p></li><li class="listitem"><p>
     Hard disks/SSDs and their architecture
    </p></li></ol></div><section class="sect2" id="sec-squid-ram" data-id-title="RAM"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.2.1 </span><span class="title-name">RAM</span></span> <a title="Permalink" class="permalink" href="#sec-squid-ram">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The amount of memory (RAM) required by Squid directly correlates with the
    number of objects in the cache. Random access memory is much faster than a
    hard disk/SSD. Therefore, it is important to have sufficient memory
    for the Squid process, because system performance is dramatically reduced
    if the swap disk is used.
   </p><p>
    Squid also stores cache object references and frequently requested objects
    in the main memory to speed up retrieval of this data. Besides that,
    there is other data that Squid needs to keep in memory, such as a table
    with all the IP addresses handled, an exact domain name cache, the most
    frequently requested objects, access control lists, buffers and more.
   </p></section><section class="sect2" id="sec-squid-cpu" data-id-title="CPU"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.2.2 </span><span class="title-name">CPU</span></span> <a title="Permalink" class="permalink" href="#sec-squid-cpu">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Squid is tuned to work best with lower processor core counts (4–8
    physical cores), with each providing high performance. Technologies
    providing virtual cores such as hyperthreading can hurt performance.
   </p><p>
    To make the best use of multiple CPU cores, it is necessary to set up
    multiple worker threads writing to different caching devices. By default,
    multi-core support is disabled.
   </p></section><section class="sect2" id="sec-squid-sysneeds-cache-size" data-id-title="Size of the disk cache"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.2.3 </span><span class="title-name">Size of the disk cache</span></span> <a title="Permalink" class="permalink" href="#sec-squid-sysneeds-cache-size">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    In a small cache, the probability of a <code class="literal">HIT</code> (finding the
    requested object already located there) is small, because the cache is
    easily filled and less requested objects are replaced by newer ones. If,
    for example, 1 GB is available for the cache and the users use up only
    10 MB per day surfing, it would take more than one hundred days to
    fill the cache.
   </p><p>
    The easiest way to determine the necessary cache size is to consider the
    maximum transfer rate of the connection. With a 1 Mbit/s connection,
    the maximum transfer rate is 128 KB/s. If all this traffic ended up in
    the cache, in one hour it would add up to 460 MB. Assuming that all
    this traffic is generated in only eight working hours, it would reach
    3.6 GB in one day. Because the connection is normally not used to its
    upper volume limit, it can be assumed that the total data volume handled by
    the cache is approximately 2 GB. Hence, in this example, 2 GB of
    disk space is required for Squid to keep one day's worth of browsing data
    cached.
   </p></section><section class="sect2" id="sec-squid-sysneeds-disk" data-id-title="Hard disk/SSD architecture"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.2.4 </span><span class="title-name">Hard disk/SSD architecture</span></span> <a title="Permalink" class="permalink" href="#sec-squid-sysneeds-disk">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Speed plays an important role in the caching process, so this factor
    deserves special attention. For hard disks/SSDs, this parameter is
    described as <span class="emphasis"><em>random seek time</em></span> or <span class="emphasis"><em>random read
    performance</em></span>, measured in milliseconds. Because the data blocks
    that Squid reads from or writes to the hard disk/SSD tend to be small, the
    seek time/read performance of the hard disk/SSD is more important than its
    data throughput.
   </p><p>
    For use as a proxy server, hard disks with high rotation speeds or SSDs are
    the best choice. When using hard disks, it can be better to use multiple
    smaller hard disks, each with a single cache directory to avoid excessive
    read times.
   </p><p>
    Using a RAID system allows increasing reliability at expense of speed.
    However, for performance reasons, avoid (software) RAID5 and similar
    settings.
   </p><p>
    In most cases, the choice of file system choice does not matter. However,
    using the mount option
    <code class="literal">noatime</code> can improve performance—Squid provides its
    own time stamps, so it does not need the file system to track access
    times.
   </p></section></section><section class="sect1" id="sec-squid-start" data-id-title="Basic usage of Squid"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">44.3 </span><span class="title-name">Basic usage of Squid</span></span> <a title="Permalink" class="permalink" href="#sec-squid-start">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Since <code class="systemitem">squid</code> is not installed by default on
   <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span>, make sure the package is installed on your system.
  </p><p>
   As Squid is preconfigured in <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, you can start it immediately
   after the installation. To avoid problems during the start-up, make sure that
   the network is connected to the Internet connection and has at least one
   name server. Using a dial-up connection with a dynamic DNS configuration may
   cause problems. In this case, specify at least the name server, as Squid does
   not start if it does not detect a DNS server in
   <code class="filename">/var/run/netconfig/resolv.conf</code>.
  </p><section class="sect2" id="sec-squid-start-commands" data-id-title="Starting Squid"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.3.1 </span><span class="title-name">Starting Squid</span></span> <a title="Permalink" class="permalink" href="#sec-squid-start-commands">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To start Squid, run the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl start squid</code></pre></div><p>
    To start Squid on system boot, enable the service
    with <code class="command">systemctl enable squid</code>.
   </p></section><section class="sect2" id="sec-squid-check" data-id-title="Checking whether Squid is working"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.3.2 </span><span class="title-name">Checking whether Squid is working</span></span> <a title="Permalink" class="permalink" href="#sec-squid-check">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   There are several ways to check whether Squid is running:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Using <code class="command">systemctl</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">systemctl status squid</code></pre></div><p>
      The output should indicate that Squid is
      <code class="literal">loaded</code> and <code class="literal">active (running)</code>.
     </p></li><li class="listitem"><p>
      Using Squid itself:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">squid -k check | echo $?</code></pre></div><p>
      The output should be <code class="literal">0</code>, but it can also contain
      additional messages, such as warnings.
     </p></li></ul></div><p>
    To test the functionality of Squid on the local system, choose one of the
    following options:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Use <code class="command">squidclient</code>, a command-line tool
      that outputs the response to a Web request, similar to
      <code class="command">wget</code> or <code class="command">curl</code>.
     </p><p>
      Unlike <code class="command">wget</code> or <code class="command">curl</code>,
      <code class="command">squidclient</code> automatically connects to the default proxy
      setup of Squid,
      <code class="literal">localhost:3128</code>. However, if you modified the
      configuration of Squid, you must configure
      <code class="command">squidclient</code> accordingly. For more information, see
      <code class="command">squidclient --help</code>.
     </p><div class="complex-example"><div class="example" id="ex-squidclient-request" data-id-title="A request with squidclient"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 44.1: </span><span class="title-name">A request with <code class="command">squidclient</code> </span></span><a title="Permalink" class="permalink" href="#ex-squidclient-request">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">squidclient http://www.example.org</code>
HTTP/1.1 200 OK
Cache-Control: max-age=604800
Content-Type: text/html
Date: Fri, 22 Jun 2016 12:00:00 GMT
Expires: Fri, 29 Jun 2016 12:00:00 GMT
Last-Modified: Fri, 09 Aug 2013 23:54:35 GMT
Server: ECS (iad/182A)
Vary: Accept-Encoding
X-Cache: HIT
x-ec-custom-error: 1
Content-Length: 1270
X-Cache: MISS from moon<span class="callout" id="co-squid-miss">1</span>
X-Cache-Lookup: MISS from moon:3128
Via: 1.1 moon (squid/3.5.16)<span class="callout" id="co-squid-via">2</span>
Connection: close

&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Example domain&lt;/title&gt;
[...]
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>
       The output shown in <a class="xref" href="#ex-squidclient-request" title="A request with squidclient">Example 44.1, “A request with <code class="command">squidclient</code>”</a> consists of two parts:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
         The protocol headers of the response (the lines before the blank line).
        </p></li><li class="listitem"><p>
         The actual content of the response (the lines after the blank line).
        </p></li></ol></div><p>
       To verify that Squid is used, refer to the selected header lines:
      </p><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-squid-miss"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         The value of the header <code class="literal">X-Cache</code> shows that the
         requested document was not in the Squid cache
         (<code class="literal">MISS</code>) of the computer
         <code class="systemitem">moon</code>.
        </p><p>
         The example above contains two <code class="literal">X-Cache</code> lines. The
         first <code class="literal">X-Cache</code> header can be safely ignored, as it is
         produced by the internal caching software of the originating Web
         server.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-squid-via"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
         The value of the header <code class="literal">Via</code> shows the HTTP
         version, the name of the computer, and the version of Squid in use.
        </p></td></tr></table></div></div></div></div></li><li class="listitem"><p>
      Using a browser: set up <code class="option">localhost</code> as the proxy and
      <code class="option">3128</code> as the port. Then load a page and check the
      response headers in the <span class="guimenu">Network</span> panel of the browser's
      <span class="emphasis"><em>Inspector</em></span> or <span class="emphasis"><em>Developer Tools</em></span>.
      The headers should be reproduced similarly to the way shown in
      <a class="xref" href="#ex-squidclient-request" title="A request with squidclient">Example 44.1, “A request with <code class="command">squidclient</code>”</a>.
     </p></li></ul></div><p>
    To allow users from the local system and other systems to access Squid and
    the Internet, change the entry in the configuration files
    <code class="filename">/etc/squid/squid.conf</code> from <code class="option">http_access deny
    all</code> to <code class="option">http_access allow all</code>. However, keep in
    mind that this makes Squid fully accessible to anyone. Therefore, define
    ACLs (access control lists) that control access to the proxy server. After
    modifying the configuration file, Squid must be reloaded or restarted. For
    more information on ACLs, see
    <a class="xref" href="#sec-squid-acl" title="44.5.2. Options for access controls">Section 44.5.2, “Options for access controls”</a>.
   </p><p>
    If Squid stops working after a short period of time, check whether there is
    an incorrect name server entry or whether the
    <code class="filename">/var/run/netconfig/resolv.conf</code> file is missing. Squid
    logs the cause of a start-up failure in the file
    <code class="filename">/var/log/squid/cache.log</code>.
   </p></section><section class="sect2" id="sec-squid-stop" data-id-title="Stopping, reloading, and restarting Squid"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.3.3 </span><span class="title-name">Stopping, reloading, and restarting Squid</span></span> <a title="Permalink" class="permalink" href="#sec-squid-stop">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    There are two ways to reload Squid:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Using <code class="command">systemctl</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl</code> reload squid</pre></div><p>
      or
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl</code> restart squid</pre></div></li><li class="listitem"><p>
      Using YaST:
     </p><p>
      In the Squid module, click the <span class="guimenu">Save Settings and Restart Squid
      Now</span> button.
     </p></li></ul></div><p>
    To stop Squid, use one of the following options:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Using <code class="command">systemctl</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl</code> stop squid</pre></div></li><li class="listitem"><p>
      Using YaST
     </p><p>
      In the Squid module click the <span class="guimenu">Stop Squid Now</span>. button.
     </p></li></ul></div><p>
    Shutting down Squid can take a while, because Squid waits up to half a
    minute before dropping the connections to the clients and writing its data
    to the disk (see <code class="option">shutdown_lifetime</code> option in
    <code class="filename">/etc/squid/squid.conf</code>),
   </p><div id="id-1.3.7.9.9.6.7" data-id-title="Terminating Squid" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Terminating Squid</div><p>
     Terminating Squid with <code class="command">kill</code> or
     <code class="command">killall</code> can damage the cache. To be able to restart
     Squid, damaged caches must be deleted.
    </p></div></section><section class="sect2" id="sec-squid-remove" data-id-title="Removing Squid"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.3.4 </span><span class="title-name">Removing Squid</span></span> <a title="Permalink" class="permalink" href="#sec-squid-remove">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Removing Squid from the system does not remove the cache hierarchy and log
    files. To remove them, delete the <code class="filename">/var/cache/squid</code>
    directory manually.
   </p></section><section class="sect2" id="sec-squid-start-local-dns" data-id-title="Local DNS server"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.3.5 </span><span class="title-name">Local DNS server</span></span> <a title="Permalink" class="permalink" href="#sec-squid-start-local-dns">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Setting up a local DNS server makes sense even if it does not manage its
    own domain. In that case, it acts as a caching-only name server, and it can also resolve DNS requests via the root name servers without requiring
    any special configuration (see <a class="xref" href="#sec-dns-bind" title="39.4. Starting the BIND name server">Section 39.4, “Starting the BIND name server”</a>). How this
    can be done depends on whether you chose dynamic DNS during the
    configuration of the Internet connection.
   </p><div class="variablelist"><dl class="variablelist"><dt id="vle-squid-dynamicdns"><span class="term">Dynamic DNS</span></dt><dd><p>
       Normally, with dynamic DNS, the DNS server is set by the provider when establishing the Internet connection and the local
       <code class="filename">/var/run/netconfig/resolv.conf</code> file is adjusted
       automatically. This behavior is specified in the
       <code class="filename">/etc/sysconfig/network/config</code> file using the
       <code class="constant">NETCONFIG_DNS_POLICY</code> sysconfig variable. Set
       <code class="constant">NETCONFIG_DNS_POLICY</code> to <code class="constant">""</code>
       with the YaST sysconfig editor.
      </p><p>
       Then add the local DNS server in the
       <code class="filename">/var/run/netconfig/resolv.conf</code> file with the IP
       address <code class="systemitem">127.0.0.1</code> for
       <code class="systemitem">localhost</code>. This way, Squid
       can always find the local name server when it starts.
      </p><p>
       To make the provider's name server accessible, specify it in the
       configuration file <code class="filename">/etc/named.conf</code> under
       <code class="systemitem">forwarders</code> along with its IP address. With
       dynamic DNS, this can be done automatically when establishing the
       connection by setting the sysconfig variable
       <code class="constant">NETCONFIG_DNS_POLICY</code> to <code class="constant">auto</code>.
      </p></dd><dt id="id-1.3.7.9.9.8.3.2"><span class="term">Static DNS</span></dt><dd><p>
       With static DNS, no automatic DNS adjustments take place while
       establishing a connection, so there is no need to change any sysconfig
       variables. However, you must specify the local DNS server in the file
       <code class="filename">/var/run/netconfig/resolv.conf</code> as described in
       <a class="xref" href="#vle-squid-dynamicdns">Dynamic DNS</a>. Additionally, the provider's
       static name server must be specified manually in the
       <code class="filename">/etc/named.conf</code> file under
       <code class="systemitem">forwarders</code> along with its IP address.
      </p></dd></dl></div><div id="id-1.3.7.9.9.8.4" data-id-title="DNS and firewall" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: DNS and firewall</div><p>
     If you have a firewall running, make sure DNS requests can pass through it.
    </p></div></section></section><section class="sect1" id="sec-squid-yast" data-id-title="The YaST Squid module"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">44.4 </span><span class="title-name">The YaST Squid module</span></span> <a title="Permalink" class="permalink" href="#sec-squid-yast">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The YaST Squid module contains the following tabs:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.9.10.3.1"><span class="term"><span class="guimenu">Start-Up</span></span></dt><dd><p>
      Specifies how Squid is started and which firewall port is open in which
      interfaces.
     </p></dd><dt id="id-1.3.7.9.10.3.2"><span class="term"><span class="guimenu">HTTP Ports</span></span></dt><dd><p>
      Define all ports for Squid to listen for HTTP requests from clients.
     </p></dd><dt id="id-1.3.7.9.10.3.3"><span class="term"><span class="guimenu">Refresh Patterns</span></span></dt><dd><p>
      Defines how Squid treats objects in the cache.
     </p></dd><dt id="id-1.3.7.9.10.3.4"><span class="term"><span class="guimenu">Cache Settings</span></span></dt><dd><p>
      Defines settings related to cache memory, maximum and minimum object
      size, and more.
     </p></dd><dt id="id-1.3.7.9.10.3.5"><span class="term"><span class="guimenu">Cache Directory</span></span></dt><dd><p>
      Defines the top-level directory for Squid to store cache swap files.
     </p></dd><dt id="id-1.3.7.9.10.3.6"><span class="term"><span class="guimenu">Access Control</span></span></dt><dd><p>
      Controls the access to the Squid server via ACL groups.
     </p></dd><dt id="id-1.3.7.9.10.3.7"><span class="term"><span class="guimenu">Logging and Timeout</span></span></dt><dd><p>
      Define paths to access, cache and cache store log files and
      connection timeouts and client lifetime.
     </p></dd><dt id="id-1.3.7.9.10.3.8"><span class="term"><span class="guimenu">Miscellaneous</span></span></dt><dd><p>
      Specifies language and mail address of administrator.
     </p></dd></dl></div></section><section class="sect1" id="sec-squid-configfile" data-id-title="The Squid configuration file"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">44.5 </span><span class="title-name">The Squid configuration file</span></span> <a title="Permalink" class="permalink" href="#sec-squid-configfile">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Squid proxy server settings are stored in the
   <code class="filename">/etc/squid/squid.conf</code> file. Although starting Squid for
   the first time does not require any changes to the file, external clients are
   initially denied access. The proxy is available for
   <code class="systemitem">localhost</code>. The default port is
   <code class="option">3128</code>. The preinstalled configuration file
   <code class="filename">/etc/squid/squid.conf</code> provides detailed information
   about the options and many examples.
  </p><p>
   Many entries are disabled using the comment character
   <code class="literal">#</code>. The relevant specifications can be found at the end of
   the line. The given values usually correlate with the default values, so
   removing the comment signs without changing any of the parameters usually
   has no effect. If possible, leave the commented lines as they are and insert
   the options along with the modified values in the line below. This way, the
   default values may easily be recovered and compared with the changes.
  </p><div id="id-1.3.7.9.11.4" data-id-title="Adapting the configuration file after an update" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Adapting the configuration file after an update</div><p>
    If you have updated from an earlier Squid version, it is recommended to
    edit the new <code class="filename">/etc/squid/squid.conf</code> and only apply the
    changes made in the previous file.
   </p><p>
    Sometimes, Squid options are added, removed or modified. Therefore, if you
    try to use the old <code class="filename">squid.conf</code>, Squid might stop
    working properly.
   </p></div><section class="sect2" id="sec-squid-configfile-general" data-id-title="General configuration options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.5.1 </span><span class="title-name">General configuration options</span></span> <a title="Permalink" class="permalink" href="#sec-squid-configfile-general">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The following is a list of a selection of configuration options for Squid.
    It is not exhaustive. The Squid package contains a full, lightly documented
    list of options in <code class="filename">/etc/squid/squid.conf.documented</code>.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.9.11.5.3.1"><span class="term"><code class="literal">http_port <em class="replaceable">PORT</em></code></span></dt><dd><p>
       This is the port on which Squid listens for client requests. The default
       port is <code class="option">3128</code>, but <code class="option">8080</code> is also common.
      </p></dd><dt id="id-1.3.7.9.11.5.3.2"><span class="term"><code class="literal">cache_peer <em class="replaceable">HOST_NAME</em> <em class="replaceable">TYPE</em> <em class="replaceable">PROXY_PORT</em> <em class="replaceable">ICP_PORT</em></code></span></dt><dd><p>
       This option allows creating a network of caches that work together. The
       cache peer is a computer that also hosts a network cache and stands in a
       relationship to your own. The type of relationship is specified as the
       <em class="replaceable">TYPE</em>. The type can either be
       <code class="literal">parent</code> or <code class="literal">sibling</code>.
      </p><p>
       As the <em class="replaceable">HOST_NAME</em>, specify the name or IP
       address of the proxy server to use. For
       <em class="replaceable">PROXY_PORT</em>, specify the port number for use
       in a browser (usually <code class="option">8080</code>). Set
       <em class="replaceable">ICP_PORT</em> to <code class="option">7</code> or, if the ICP
       port of the parent is not known and its use is irrelevant to the
       provider, to <code class="option">0</code>.
      </p><p>
       To make Squid behave like a Web browser instead of a proxy server,
       disable the use of the ICP protocol by appending the
       options <code class="option">default</code> and <code class="option">no-query</code>.
      </p></dd><dt id="id-1.3.7.9.11.5.3.3"><span class="term"><code class="literal">cache_mem <em class="replaceable">SIZE</em></code></span></dt><dd><p>
       This option defines the amount of memory Squid can use for the most
       frequent replies. The default is <code class="option">8 MB</code>. This does not
       specify the memory usage of Squid and may be exceeded.
      </p></dd><dt id="id-1.3.7.9.11.5.3.4"><span class="term"><code class="literal">cache_dir <em class="replaceable">STORAGE_TYPE</em> <em class="replaceable">CACHE_DIRECTORY</em> <em class="replaceable">CACHE_SIZE</em> <em class="replaceable">LEVEL_1_DIRECTORIES</em> <em class="replaceable">LEVEL_2_DIRECTORIES</em></code></span></dt><dd><p>
       The option <code class="literal">cache_dir</code> defines the directory for the
       disk cache. In the default configuration on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, Squid does
       not create a disk cache.
      </p><p>
       The placeholder <em class="replaceable">STORAGE_TYPE</em> can be one of
       the following:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         Directory-based storage types: <code class="literal">ufs</code>,
         <code class="literal">aufs</code> (the default), <code class="literal">diskd</code>. All
         three are variations of the storage format <code class="literal">ufs</code>.
         However, while <code class="literal">ufs</code> runs as part of the core Squid
         thread, <code class="literal">aufs</code> runs in a separate thread, and
         <code class="literal">diskd</code> uses a separate process. This means that the
         latter two types avoid blocking Squid because of disk I/O.
        </p></li><li class="listitem"><p>
         Database-based storage systems: <code class="literal">rock</code>. This storage
         format relies on a single database file, in which each object takes up
         one or more memory units of a fixed size (<span class="quote">“<span class="quote">slots</span>”</span>).
        </p></li></ul></div><p>
       In the following, only the parameters for storage types based on
       <code class="literal">ufs</code> are discussed. <code class="literal">rock</code> has
       different parameters.
      </p><p>
       The <em class="replaceable">CACHE_DIRECTORY</em> is the directory for the
       disk cache. By default, that is <code class="filename">/var/cache/squid</code>.
       <em class="replaceable">CACHE_SIZE</em> is the maximum size of that
       directory in megabytes; by default, this is set to 100 MB. Set it
       to between 50% and a maximum of 80% of available disk space.
      </p><p>
       The <em class="replaceable">LEVEL_1_DIRECTORIES</em> and
       <em class="replaceable">LEVEL_2_DIRECTORIES</em> values specify how many
       subdirectories are created in the
       <em class="replaceable">CACHE_DIRECTORY</em>. By default, 16
       subdirectories are created at the first level below
       <em class="replaceable">CACHE_DIRECTORY</em> and 256 within each of these.
       These values should only be increased with caution, because creating too
       many directories can lead to performance problems.
      </p><p>
       If you have several disks that share a cache, specify several
       <code class="option">cache_dir</code> lines.
      </p></dd><dt id="id-1.3.7.9.11.5.3.5"><span class="term"><code class="option">cache_access_log <em class="replaceable">LOG_FILE</em></code>, </span><span class="term"><code class="option">cache_log <em class="replaceable">LOG_FILE</em></code>, </span><span class="term"><code class="option">cache_store_log <em class="replaceable">LOG_FILE</em></code></span></dt><dd><p>
       These three options specify the paths where Squid logs all its actions.
       Normally, nothing needs to be changed here. If Squid is under heavy load, it might make sense to distribute the cache and the log
       files over several disks.
      </p></dd><dt id="id-1.3.7.9.11.5.3.6"><span class="term"><code class="option">client_netmask <em class="replaceable">NETMASK</em></code></span></dt><dd><p>
       This option allows masking IP addresses of clients in the log files by
       applying a subnet mask. For example, to set the last digit of the IP
       address to <code class="literal">0</code>, specify
       <code class="systemitem">255.255.255.0</code>.
      </p></dd><dt id="id-1.3.7.9.11.5.3.7"><span class="term"><code class="option">ftp_user <em class="replaceable">E-MAIL</em></code></span></dt><dd><p>
       This option allows setting the password that Squid should use for
       anonymous FTP login. Specify a valid e-mail address here, as 
       FTP servers check these for validity.
      </p></dd><dt id="id-1.3.7.9.11.5.3.8"><span class="term"><code class="option">cache_mgr <em class="replaceable">E-MAIL</em></code></span></dt><dd><p>
       When Squid crashes, it sends a message to the specified e-mail
       address. The default is <span class="emphasis"><em>webmaster</em></span>.
      </p></dd><dt id="id-1.3.7.9.11.5.3.9"><span class="term"><code class="option">logfile_rotate <em class="replaceable">VALUE</em></code></span></dt><dd><p>
       When used with <code class="command">squid</code> <code class="option">-k rotate</code>,
       <code class="command">squid</code> rotates log files. The files are numbered and, after reaching the specified value, the oldest file is
       overwritten. The default value is <code class="option">10</code> which rotates log
       files with the numbers 0 to 9.
      </p><p>
       However, on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, rotating log files is performed automatically
       using <code class="systemitem">logrotate</code> and the
       configuration file <code class="filename">/etc/logrotate.d/squid</code>.
      </p></dd><dt id="id-1.3.7.9.11.5.3.10"><span class="term"><code class="option">append_domain <em class="replaceable">DOMAIN</em></code></span></dt><dd><p>
       Use <span class="emphasis"><em>append_domain</em></span> to specify which domain to append
       automatically when none is given. Usually, your own domain is specified
       here, so pointing the browser to <span class="emphasis"><em>www</em></span> navigates to
       your own Web server.
      </p></dd><dt id="id-1.3.7.9.11.5.3.11"><span class="term"><code class="option">forwarded_for <em class="replaceable">STATE</em></code></span></dt><dd><p>
       If this option is set to <code class="literal">on</code>, it adds a line to the
       header similar to this:
      </p><div class="verbatim-wrap"><pre class="screen">X-Forwarded-For: 192.168.0.1</pre></div><p>
       If you set this option to <code class="literal">off</code>, Squid removes the IP
       address and the system name of the client from HTTP requests.
      </p></dd><dt id="id-1.3.7.9.11.5.3.12"><span class="term"><code class="option">negative_ttl <em class="replaceable">TIME</em></code>, </span><span class="term"><code class="option">negative_dns_ttl <em class="replaceable">TIME</em></code></span></dt><dd><p>
       If these options are configured, Squid caches certain types of failures,
       such as <code class="literal">404</code> responses. It then refuses to issue new
       requests, even if the resource becomes available.
      </p><p>
       By default, <code class="option">negative_ttl</code> is set to
       <code class="literal">0</code>, <code class="option">negative_dns_ttl</code> is set to
       <code class="literal">1 minutes</code>.

       This means that negative responses to Web requests are not cached by
       default, while negative responses to DNS requests are cached for 1
       minute.
      </p></dd><dt id="id-1.3.7.9.11.5.3.13"><span class="term"><code class="option">never_direct allow <em class="replaceable">ACL_NAME</em></code></span></dt><dd><p>
       To prevent Squid from accepting requests directly from the Internet, use
       the option <code class="literal">never_direct</code> to force connection to
       another proxy server. This must have previously been specified in
       <code class="option">cache_peer</code>. If <code class="literal">all</code> is specified as
       the <em class="replaceable">ACL_NAME</em>, all requests are forwarded
       directly to the <code class="literal">parent</code>. This can be necessary, for
       example, if you are using a provider that dictates the use of its
       proxies or denies its firewall direct Internet access.
      </p></dd></dl></div></section><section class="sect2" id="sec-squid-acl" data-id-title="Options for access controls"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">44.5.2 </span><span class="title-name">Options for access controls</span></span> <a title="Permalink" class="permalink" href="#sec-squid-acl">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Squid can control the access to the proxy server through Access Control
    Lists (ACL), lists with rules that are processed sequentially. ACLs must be
    defined before they can be used. Squid includes default ACLs, such as
    <code class="literal">all</code> and
    <code class="literal">localhost</code>. However, for an ACL to take effect, it must
    have a corresponding <code class="option">http_access</code> rule.
   </p><p>
    The syntax for the option <code class="option">acl</code> is as follows:
   </p><div class="verbatim-wrap"><pre class="screen">acl <em class="replaceable">ACL_NAME</em> <em class="replaceable">TYPE</em> <em class="replaceable">DATA</em></pre></div><p>
    The placeholders within this syntax stand for the following:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <em class="replaceable">ACL_NAME</em> can be any name.
     </p></li><li class="listitem"><p>
      For <em class="replaceable">TYPE</em>, select from the options available in
      the <code class="literal">ACCESS CONTROLS</code>
      section of the <code class="filename">/etc/squid/squid.conf</code> file.
     </p></li><li class="listitem"><p>
      The specification for <em class="replaceable">DATA</em> depends on the
      individual ACL type, for example, host names, IP addresses, or URLs.
     </p></li></ul></div><p>
    To add rules in the YaST Squid module, open the module and click the
    <span class="guimenu">Access Control</span> tab. Click <span class="guimenu">Add</span> under
    the ACL Groups list and enter the name of your rule, the type, and its
    parameters.
   </p><p>
    For more information on types of ACL rules, see the Squid documentation at
    <a class="link" href="https://www.squid-cache.org/Versions/v3/3.5/cfgman/acl.html" target="_blank">https://www.squid-cache.org/Versions/v3/3.5/cfgman/acl.html</a>.
   </p><div class="example" id="ex-squid-school" data-id-title="Defining ACL rules"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 44.2: </span><span class="title-name">Defining ACL rules </span></span><a title="Permalink" class="permalink" href="#ex-squid-school">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">acl mysurfers srcdomain .example.com <span class="callout" id="co-squid-school-surfer">1</span>
acl teachers src 192.168.1.0/255.255.255.0 <span class="callout" id="co-squid-school-teacher">2</span>
acl students src 192.168.7.0-192.168.9.0/255.255.255.0 <span class="callout" id="co-squid-school-student">3</span>
acl lunch time MTWHF 12:00-15:00 <span class="callout" id="co-squid-school-time">4</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-squid-school-surfer"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       This ACL defines <code class="literal">mysurfers</code> as all users coming from
       within <code class="literal">.example.com</code> (as determined by a reverse
       lookup for the IP).
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-squid-school-teacher"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       This ACL defines <code class="literal">teachers</code> as the users of computers
       with IP addresses starting with <code class="literal">192.168.1.</code>.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-squid-school-student"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       This ACL defines <code class="literal">students</code> as the users of the
       computer with IP addresses starting with <code class="literal">192.168.7.</code>,
       <code class="literal">192.168.8.</code>, or <code class="literal">192.168.9.</code>.
      </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-squid-school-time"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
       This ACL defines <code class="literal">lunch</code> as a time on the days Monday
       through Friday between noon and 3 p.m.
      </p></td></tr></table></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.9.11.6.10.1"><span class="term">http_access allow <em class="replaceable">ACL_NAME</em></span></dt><dd><p>
       <code class="option">http_access</code> defines who is allowed to use the proxy
       server and who can access what on the Internet. You need to define ACLs
       for this. The <code class="literal">localhost</code> and <code class="literal">all</code>
       ACLs have already been defined above, and you can deny or allow access to
       them via
       <code class="literal">deny</code> or <code class="literal">allow</code>. A list containing
       any number of <code class="option">http_access</code> entries can be created,
       processed from top to bottom. Depending on which occurs first, access is
       allowed or denied to the respective URL. The last entry should always be
       <code class="option">http_access deny all</code>. In the following example,
       <code class="literal">localhost</code> has free access to everything, while all
       other hosts are denied access:
      </p><div class="verbatim-wrap"><pre class="screen">http_access allow localhost
http_access deny all</pre></div><p>
       In another example using these rules, the group
       <code class="systemitem">teachers</code> always has access to
       the Internet. The group
       <code class="systemitem">students</code> only has access
       between Monday and Friday during lunch time:
      </p><div class="verbatim-wrap"><pre class="screen">http_access deny localhost
http_access allow teachers
http_access allow students lunch time
http_access deny all</pre></div><p>
       For better readability, specify all
       <code class="option">http_access</code> options as a block in the configuration file
       <code class="filename">/etc/squid/squid.conf</code>.
      </p></dd><dt id="id-1.3.7.9.11.6.10.2"><span class="term"><code class="option">url_rewrite_program <em class="replaceable">PATH</em></code></span></dt><dd><p>
       Use this option to specify a URL rewriter.
      </p></dd><dt id="id-1.3.7.9.11.6.10.3"><span class="term"><code class="option">auth_param basic program <em class="replaceable">PATH</em></code></span></dt><dd><p>
       If users must be authenticated on the proxy server, set a corresponding
       program, such as <code class="filename">/usr/sbin/pam_auth</code>. When accessing
       <code class="command">pam_auth</code> for the first time, the user is prompted to
       provide a user name and a password. Besides that, you need an ACL,
       so only clients with a valid login can use the Internet:
      </p><div class="verbatim-wrap"><pre class="screen">acl password proxy_auth REQUIRED

http_access allow password
http_access deny all</pre></div><p>
       In the <code class="option">acl proxy_auth</code> option, using
       <code class="literal">REQUIRED</code> means that all valid user names are
       accepted. <code class="literal">REQUIRED</code> can also be replaced with a list
       of permitted user names.
      </p></dd><dt id="id-1.3.7.9.11.6.10.4"><span class="term"><code class="option">ident_lookup_access allow <em class="replaceable">ACL_NAME</em></code></span></dt><dd><p>
       Use this option to enable an ident request action to find each user's
       identity for all clients defined by an ACL of the type
       <code class="literal">src</code>. To enable this for all clients, apply the
       predefined ACL
       <code class="literal">all</code> as the <em class="replaceable">ACL_NAME</em>.
      </p><p>
       All clients specified by <code class="option">ident_lookup_access</code> must run an
       ident daemon. On Linux, you can use
       <code class="systemitem">pidentd</code> (package
       <span class="package">pidentd</span>) as the ident daemon. To ensure that only
       clients with a successful ident lookup are permitted, define a
       corresponding ACL:
      </p><div class="verbatim-wrap"><pre class="screen">acl identhosts ident REQUIRED

http_access allow identhosts
http_access deny all</pre></div><p>
       Setting the <code class="option">acl identhosts ident</code> option to <code class="literal">REQUIRED</code> ensures that all valid user names are
       accepted. <code class="literal">REQUIRED</code> can also be replaced with a list
       of permitted user names.
      </p><p>
       Using <code class="literal">ident</code> can slow down access time, because ident
       lookups are repeated for each request.
      </p></dd></dl></div></section></section><section class="sect1" id="sec-squid-proxyconfigtrans" data-id-title="Configuring a transparent proxy"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">44.6 </span><span class="title-name">Configuring a transparent proxy</span></span> <a title="Permalink" class="permalink" href="#sec-squid-proxyconfigtrans">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A transparent proxy intercepts and answers the requests of the Web browser,
   so the Web browser receives the requested pages without knowing where they
   are coming from. As the name indicates, the entire process is transparent to
   the user.
  </p><p>
   The standard way of working with proxy servers is as follows: the Web browser
   sends requests to a certain port of the proxy server and the proxy always
   provides these required objects, regardless of whether they are in its
   cache. However, in the following cases using the transparent proxy mode of Squid makes
   sense:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     When for security reasons it is desirable for all clients to use a proxy
     server to access the Internet.
    </p></li><li class="listitem"><p>
     When all clients must use a proxy server, regardless of whether they are
     aware of it.
    </p></li><li class="listitem"><p>
     When the proxy server in a network is moved, but the existing clients need
     to retain their old configuration.
    </p></li></ul></div><div class="procedure" id="pro-squid-transparent-cli" data-id-title="Squid as a transparent proxy server (command line)"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 44.1: </span><span class="title-name">Squid as a transparent proxy server (command line) </span></span><a title="Permalink" class="permalink" href="#pro-squid-transparent-cli">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     In <code class="filename">/etc/squid/squid.conf</code>, add the parameter
     <code class="literal">transparent</code> to the line
     <code class="option">http_port</code>. You should then have 2 lines:
    </p><div class="verbatim-wrap"><pre class="screen">http_port 3128⎄
http_port 3128 transparent</pre></div></li><li class="step"><p>
     Restart Squid:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl restart squid</code></pre></div></li><li class="step" id="st-squid-transparent-cli-fwrules"><p>
     Set up the firewall to redirect HTTP traffic to the port given in
     <code class="option">http_proxy</code> (in the example above, it is port 3128). Then
     reload the firewall configuration. This assumes that the zone
     <code class="literal">internal</code> is assigned to your LAN interface.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">firewall-cmd</code> --permanent --zone=internal \
    --add-forward-port=port=80:proto=tcp:toport=3128:toaddr=<em class="replaceable">LAN_IP</em>
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">firewall-cmd</code> --permanent --zone=internal --add-port=3128/tcp
<code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">firewall-cmd</code> --reload</pre></div><p>
     Replace <em class="replaceable">LAN_IP</em> with the IP address of your LAN
     interface or the interface Squid is listening on.
    </p></li><li class="step"><p>
     To verify that everything is working properly, check the Squid log files
     in <code class="filename">/var/log/squid/access.log</code>.
    </p></li></ol></div></div></section><section class="sect1" id="sec-squid-cachemgr" data-id-title="Using the Squid cache manager CGI interface (cachemgr.cgi)"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">44.7 </span><span class="title-name">Using the Squid cache manager CGI interface (<code class="systemitem">cachemgr.cgi</code>)</span></span> <a title="Permalink" class="permalink" href="#sec-squid-cachemgr">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The Squid cache manager CGI interface (<code class="filename">cachemgr.cgi</code>) is
   a CGI utility for displaying statistics about the memory usage of a running
   Squid process. It also provides a convenient way to manage the cache and view
   statistics without logging the server.
  </p><div class="procedure" id="pro-squid-setup-cachemgr" data-id-title="Setting up cachemgr.cgi"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 44.2: </span><span class="title-name">Setting up <code class="systemitem">cachemgr.cgi</code> </span></span><a title="Permalink" class="permalink" href="#pro-squid-setup-cachemgr">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Make sure the Apache Web server is running on your system. Configure
     Apache as described in <a class="xref" href="#cha-apache2" title="Chapter 42. The Apache HTTP server">Chapter 42, <em>The Apache HTTP server</em></a>. In particular, see
     <a class="xref" href="#sec-apache2-cgi" title="42.5. Enabling CGI scripts">Section 42.5, “Enabling CGI scripts”</a>. To check whether Apache is already
     running, use:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl status apache2</code></pre></div><p>
     If the status is <code class="literal">inactive</code>, start Apache with the
     <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> default settings:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl start apache2</code></pre></div></li><li class="step"><p>
     Now enable <code class="systemitem">cachemgr.cgi</code> in
     Apache. To do this, create a configuration file for a
     <code class="literal">ScriptAlias</code>.
    </p><p>
     Create the file in the directory <code class="filename">/etc/apache2/conf.d</code>
     and name it <code class="filename">cachemgr.conf</code>. Add the following to the file:
    </p><div class="verbatim-wrap"><pre class="screen">ScriptAlias /squid/cgi-bin/ /usr/lib64/squid/

&lt;Directory "/usr/lib64/squid/"&gt;
Options +ExecCGI
AddHandler cgi-script .cgi
Require host <em class="replaceable">HOST_NAME</em>
&lt;/Directory&gt;</pre></div><p>
     Replace <em class="replaceable">HOST_NAME</em> with the host name of the
     computer you want to access
     <code class="systemitem">cachemgr.cgi</code> from. This allows
     only your computer to access
     <code class="systemitem">cachemgr.cgi</code>. To allow access
     from anywhere, use <code class="literal">Require all granted</code> instead.
    </p></li><li class="step"><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       If Squid and the Apache Web server run on the same computer, the
       <code class="filename">/etc/squid/squid.conf</code> configuration file requires no
       modifications. However, verify that the file contains the following
       lines:
      </p><div class="verbatim-wrap"><pre class="screen">http_access allow manager localhost
http_access deny manager</pre></div><p>
       This allows you to access the manager interface from your
       computer (<code class="literal">localhost</code>) only.
      </p></li><li class="listitem"><p>
       If Squid and the Apache Web server run on different computers, you need
       to add extra rules to allow access from the CGI script to Squid. Define
       an ACL for the server (replace <em class="replaceable">WEB_SERVER_IP</em>
       with the IP address of the Web server):
      </p><div class="verbatim-wrap"><pre class="screen">acl webserver src <em class="replaceable">WEB_SERVER_IP</em>/255.255.255.255</pre></div><p>
       Make sure the following rules are in the configuration file. Keep in mind
       that the order is important.
      </p><div class="verbatim-wrap"><pre class="screen">http_access allow manager localhost
http_access allow manager webserver
http_access deny manager</pre></div></li></ul></div></li><li class="step"><p><span class="step-optional">(Optional)</span> 
     Optionally, you can configure one or more passwords for
     <code class="systemitem">cachemgr.cgi</code>. This also gives you
     access to more actions such as closing the cache remotely or viewing more
     information about the cache. To enable access, configure the options
     <code class="option">cache_mgr</code> and <code class="option">cachemgr_passwd</code> with one
     or more password for the manager and a list of allowed actions.
    </p><p>
    The following example configuration enables viewing the index page, the
    menu, and 60-minute average of counters without authentication. The
    configuration also enables toggling offline mode using the password
    <code class="literal">secretpassword</code> and to disable everything else.
    </p><div class="verbatim-wrap"><pre class="screen">cache_mgr user
cachemgr_passwd none index menu 60min
cachemgr_passwd secretpassword offline_toggle
cachemgr_passwd disable all</pre></div><p>
     <code class="option">cache_mgr</code> defines a user name. <code class="option">cache_mgr</code>
     defines which actions are allowed using which password.
    </p><p>
     The keywords <code class="literal">none</code> and <code class="literal">disable</code> are
     special: <code class="literal">none</code> removes the need for a password,
     <code class="literal">disable</code> disables functionality outright.
    </p><p>
     The full list of actions can be best seen after logging in to
     <code class="systemitem">cachemgr.cgi</code>. To find out how
     the operation needs to be referenced in the configuration file, see the
     string after <code class="literal">&amp;operation=</code> in the URL of the action
     page. <code class="literal">all</code> is a special keyword meaning all actions.
    </p></li><li class="step"><p>
     Reload Squid and Apache to enable the changes:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> <code class="command">systemctl reload squid</code></pre></div></li><li class="step"><p>
     To view the statistics, go to the
     <code class="systemitem">cachemgr.cgi</code> page that you set
     up before. For example, it could be
     <code class="literal">http://webserver.example.org/squid/cgi-bin/cachemgr.cgi</code>.
    </p><p>
     Choose the right server. If a user name and password are configured,
     specify them. Click <span class="guimenu">Continue</span> and browse through the
     available statistics.
    </p></li></ol></div></div></section><section class="sect1" id="sec-squid-calamaris" data-id-title="Cache report generation with Calamaris"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">44.8 </span><span class="title-name">Cache report generation with Calamaris</span></span> <a title="Permalink" class="permalink" href="#sec-squid-calamaris">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Calamaris is a Perl script for generating reports of cache activity in ASCII
   or HTML format. It works with Squid access log files. This tool does
   not belong to the <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> default installation scope—to use it,
   install the
   <code class="systemitem">calamaris</code> package. Further info on Calamaris is
   available at <a class="link" href="https://cord.de/calamaris-english" target="_blank">https://cord.de/calamaris-english</a>.
  </p><p>
   Log in as <code class="systemitem">root</code>, then enter:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cat access1.log [access2.log access3.log] | calamaris <em class="replaceable">OPTIONS</em> &gt; reportfile</pre></div><p>
   When using more than one log file, make sure they are ordered
   chronologically, with older files listed first. This can be done either by
   listing the files one after the other as in the example above or by using
   <code class="filename">access{1..3}.log</code>.
  </p><p>
   <code class="command">calamaris</code> accepts the following options:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.9.14.7.1"><span class="term"><code class="option">-a</code></span></dt><dd><p>
      output all available reports
     </p></dd><dt id="id-1.3.7.9.14.7.2"><span class="term"><code class="option">-w</code></span></dt><dd><p>
      output as HTML report
     </p></dd><dt id="id-1.3.7.9.14.7.3"><span class="term"><code class="option">-l</code></span></dt><dd><p>
      include a message or logo in report header
     </p></dd></dl></div><p>
   Further information about options can be found in the program's
   man page with <code class="command">man</code> <code class="option">calamaris</code>.
  </p><p>
   A typical example is:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>cat access.log.{10..1} access.log | calamaris -a -w \
&gt; /usr/local/httpd/htdocs/Squid/squidreport.html</pre></div><p>
   This saves the report in the directory of the Web server. Apache is required
   to view the reports.
  </p></section><section class="sect1" id="sec-squid-moreinfo" data-id-title="More Information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">44.9 </span><span class="title-name">More Information</span></span> <a title="Permalink" class="permalink" href="#sec-squid-moreinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/net_proxy.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Visit the home page of Squid at
   <a class="link" href="https://www.squid-cache.org/" target="_blank">https://www.squid-cache.org/</a>. Here, find the
   <span class="quote">“<span class="quote">Squid User Guide</span>”</span> and an extensive collection of FAQs on
   Squid.
  </p><p>
   Squid mailing lists are available at
   <a class="link" href="https://www.squid-cache.org/Support/mailing-lists.html" target="_blank">https://www.squid-cache.org/Support/mailing-lists.html</a>.
  </p></section></section><section class="chapter" id="cha-wbem" data-id-title="Web Based Enterprise Management using SFCB"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">45 </span><span class="title-name">Web Based Enterprise Management using SFCB</span></span> <a title="Permalink" class="permalink" href="#cha-wbem">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect1" id="sec-wbem-intro" data-id-title="Introduction and basic concept"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">45.1 </span><span class="title-name">Introduction and basic concept</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-intro">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   SUSE® Linux Enterprise Server (SLES) provides a collection of open standards based tools for
   the unified management of disparate computing systems and environments. Our
   enterprise solutions implement the standards proposed by the Distributed
   Management Task Force. The following paragraphs describe their basic
   components.
  </p><p>
   Distributed Management Task Force, Inc (DMTF) is the industry organization
   which leads the development of management standards for enterprise and
   Internet environments. Their goal is to unify management standards and
   initiatives, and to enable more integrated, cost effective and interoperable
   management solutions. DMTF standards provide common system management
   components for control and communication. Their solutions are independent of
   platforms and technologies. <span class="emphasis"><em>Web Based Enterprise
   Management</em></span> and the <span class="emphasis"><em>Common Information Model</em></span>
   are two of their key technologies.
  </p><p>
   Web Based Enterprise Management (WBEM) is a set of management and Internet
   standard technologies. WBEM was developed to unify the management of
   enterprise computing environments. It provides the ability for the industry
   to deliver a well-integrated collection of management tools using Web
   technologies. WBEM consists of the following standards:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     A data model: the Common Information Model (CIM) standard
    </p></li><li class="listitem"><p>
     An encoding specification: CIM-XML Encoding Specification
    </p></li><li class="listitem"><p>
     A transport mechanism: CIM operations over HTTP
    </p></li></ul></div><p>
   The Common Information Model is a conceptual information model that describes
   system management. It is not bound to a particular implementation and
   enables the interchange of management information between management
   systems, networks, services and applications. There are two parts to CIM:
   the CIM Specification and the CIM Schema.
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     The <span class="emphasis"><em>CIM Specification</em></span> describes the language, naming
     and meta schema. The meta schema is a formal definition of the model. It
     defines the terms used to express the model and their usage and semantics.
     The elements of the meta schema are <span class="emphasis"><em>classes</em></span>,
     <span class="emphasis"><em>properties</em></span>, and <span class="emphasis"><em>methods</em></span>. The
     meta schema also supports <span class="emphasis"><em>indications</em></span> and
     <span class="emphasis"><em>associations</em></span> as types of
     <span class="emphasis"><em>classes</em></span>, and <span class="emphasis"><em>references</em></span> as types
     of <span class="emphasis"><em>properties</em></span>.
    </p></li><li class="listitem"><p>
     The <span class="emphasis"><em>CIM Schema</em></span> provides the actual model
     descriptions. It supplies a set of classes with properties and
     associations that provide a well understood conceptual framework within
     which it is possible to organize the available information about the
     managed environment.
    </p></li></ul></div><p>
   The Common Information Model Object Manager (CIMOM) is a CIM object manager
   or, more specifically, an application that manages objects according to the
   CIM standard. CIMOM manages communication between CIMOM providers and a CIM
   client, where the administrator manages the system.
  </p><p>
   <span class="emphasis"><em>CIMOM providers</em></span> are software performing specific tasks
   within the CIMOM that are requested by client applications. Each provider
   instruments one or more aspects of the CIMOM's schema. These providers
   interact directly with the hardware.
  </p><p>
   <span class="emphasis"><em>Standards Based Linux Instrumentation for Manageability
   (SBLIM)</em></span> is a collection of tools designed to support Web-Based
   Enterprise Management (WBEM). SUSE® Linux Enterprise Server uses the open source CIMOM (or CIM
   server) from the SBLIM project called <span class="emphasis"><em>Small Footprint CIM
   Broker</em></span> .
  </p><p>
   <span class="emphasis"><em>Small Footprint CIM Broker</em></span> is a CIM server intended for
   use in resource-limited or embedded environments. It is designed to be
   modular and lightweight at the same time. Its based on open standards and it
   supports CMPI providers, CIM-XML encoding, and <span class="emphasis"><em>Managed Object
   Format (MOF)</em></span>. It is highly configurable and performs stability
   even if the provider crashes. It is also easily accessible as it supports
   multiple transport protocols, such as HTTP, HTTPS, Unix domain sockets,
   Service Location Protocol (SLP), and Java Database Connectivity (JDBC).
  </p></section><section class="sect1" id="sec-wbem-setting" data-id-title="Setting up SFCB"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">45.2 </span><span class="title-name">Setting up SFCB</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-setting">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To set up the Small Footprint CIM Broker (SFCB) environment, make sure the
   <span class="guimenu">Web-Based Enterprise Management</span> pattern in YaST is
   selected during <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> installation. Alternatively, select it as a
   component to install on a server that is already running. Make sure the
   following packages are installed on your system:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.10.5.3.1"><span class="term">cim-schema, Common Information Model (CIM) schema</span></dt><dd><p>
      Contains the Common Information Model (CIM). CIM is a model for
      describing overall management information in a network or enterprise
      environments. CIM consists of a specification and a schema. The
      specification defines the details for integration with other management
      models. The schema provides the actual model descriptions.
     </p></dd><dt id="id-1.3.7.10.5.3.2"><span class="term">python2-pywbem</span></dt><dd><p>
      Contains a Python module for making CIM operation calls through the WBEM
      protocol to query and update managed objects.
     </p></dd><dt id="id-1.3.7.10.5.3.3"><span class="term">cmpi-provider-register, CIMOM neutral provider registration
        utility</span></dt><dd><p>
      Contains a utility allowing CMPI provider packages to register with
      whatever CIMOM happens to be present on the system.
     </p></dd><dt id="id-1.3.7.10.5.3.4"><span class="term">sblim-sfcb, small footprint CIM broker</span></dt><dd><p>
      Contains Small Footprint CIM Broker. It is a CIM server conforming to the
      CIM Operations over HTTP protocol. It is robust, with low resource
      consumption and, therefore, specifically suited for embedded and resource
      constrained environments. SFCB supports providers written against the
      Common Manageability Programming Interface (CMPI).
     </p></dd><dt id="id-1.3.7.10.5.3.5"><span class="term">sblim-sfcc</span></dt><dd><p>
      Contains Small Footprint CIM Client library runtime libraries.
     </p></dd><dt id="id-1.3.7.10.5.3.6"><span class="term">sblim-wbemcli</span></dt><dd><p>
      Contains WBEM command line interface. It is a stand-alone command line
      WBEM client especially suited for basic systems management tasks.
     </p></dd></dl></div><section class="sect2" id="sec-wbem-setting-daemon" data-id-title="Starting, stopping and checking status for SFCB"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">45.2.1 </span><span class="title-name">Starting, stopping and checking status for SFCB</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-setting-daemon">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    CIM server sfcbd daemon is installed together with Web-Based Enterprise
    Management software and is started by default at system start-up. The
    following table explains how to start, stop and check status for sfcbd.
   </p><div class="table" id="tab-wbem-setting-daemon-1" data-id-title="Commands for managing sfcbd"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 45.1: </span><span class="title-name">Commands for managing sfcbd </span></span><a title="Permalink" class="permalink" href="#tab-wbem-setting-daemon-1">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; "><colgroup><col class="1"/><col class="2"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
        <p>
         Task
        </p>
       </th><th style="border-bottom: 1px solid ; ">
        <p>
         Linux Command
        </p>
       </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; ">
        <p>
         Start sfcbd
        </p>
       </td><td>
        <p>
         Enter <code class="command">systemctl start sblim-sfcb.service</code> as <code class="systemitem">root</code> in the
         command line.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         Stop sfcbd
        </p>
       </td><td>
        <p>
         Enter <code class="command">systemctl stop sblim-sfcb.service</code> as <code class="systemitem">root</code> in the
         command line.
        </p>
       </td></tr><tr><td style="border-right: 1px solid ; ">
        <p>
         Check sfcbd status
        </p>
       </td><td>
        <p>
         Enter <code class="command">systemctl status sblim-sfcb.service</code> as <code class="systemitem">root</code> in the
         command line.
        </p>
       </td></tr></tbody></table></div></div></section><section class="sect2" id="sec-wbem-setting-secure" data-id-title="Ensuring secure access"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">45.2.2 </span><span class="title-name">Ensuring secure access</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-setting-secure">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The default setup of SFCB is  secure. However, check that the
    access to SFCB components is as secure as required for your organization.
   </p><section class="sect3" id="sec-wbem-setting-secure-cert" data-id-title="Certificates"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.2.2.1 </span><span class="title-name">Certificates</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-setting-secure-cert">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Secure Sockets Layers (SSL) transports require a certificate for secure
     communication to occur. When SFCB is installed, it has a self-signed
     certificate generated.
    </p><p>
     You can replace the path to the default certificate with a path to a
     commercial or self-signed one by changing the
     <code class="literal">sslCertificateFilePath: <em class="replaceable">PATH_FILENAME</em>
     </code> setting in <code class="filename">/etc/sfcb/sfcb.cfg</code>. The file
     must be in PEM format.
    </p><p>
     By default, SFCB expects a server certificate in the following location:
    </p><div class="verbatim-wrap"><pre class="screen">/etc/sfcb/server.pem</pre></div><p>
     To generate a new certificate, run the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> sh /usr/share/sfcb/genSslCert.sh
Generating SSL certificates in .
Generating a 2048 bit RSA private key
...................................................................+++
.+++
writing new private key to '/var/tmp/sfcb.0Bjt69/key.pem'
-----</pre></div><p>
     By default, the script generates certificates
     <code class="filename">client.pem</code> , <code class="filename">file.pem</code> and
     <code class="filename">server.pem</code> in the current working directory. If you
     want the script to generate the certificates in
     <code class="filename">/etc/sfcb</code> directory, you need to append the path to
     the command. If these files already exist, a warning message is displayed,
     and the old certificates are not overwritten.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> sh /usr/share/sfcb/genSslCert.sh /etc/sfcb
Generating SSL certificates in .
WARNING: server.pem SSL Certificate file already exists.
         old file will be kept intact.
WARNING: client.pem SSL Certificate trust store already exists.
         old file will be kept intact.</pre></div><p>
     You must remove the old certificates from the file system and run the
     command again.
    </p><p>
     To change the way SFCB uses certificates, see
     <a class="xref" href="#sec-wbem-setting-secure-auth" title="45.2.2.3. Authentication">Section 45.2.2.3, “Authentication”</a>.
    </p></section><section class="sect3" id="sec-wbem-setting-secure-ports" data-id-title="Ports"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.2.2.2 </span><span class="title-name">Ports</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-setting-secure-ports">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     By default, SFCB is configured to accept all communications through the
     secure port 5989. The following paragraphs explain the communication port
     setup and recommended configuration.
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.10.5.5.4.3.1"><span class="term">Port 5989 (secure)</span></dt><dd><p>
        The secure port that SFCB communications use via HTTPS services. This
        is the default. With this setting, all communications between the CIMOM
        and client applications are encrypted when sent over the Internet
        between servers and workstations. Users must authenticate with the
        client application to reach SFCB server. We recommend that you keep
        this setting. For the SFCB CIMOM to communicate with the necessary
        applications, this port must be open on routers and firewall rules if they
        are present between the client application and the nodes being
        monitored.
       </p></dd><dt id="id-1.3.7.10.5.5.4.3.2"><span class="term">Port 5988 (insecure)</span></dt><dd><p>
        The insecure port that SFCB communications use via HTTP services. This
        setting is disabled by default. With this setting, all communications
        between the CIMOM and client applications are open for review when sent
        over the Internet between servers and workstations by anyone, without
        any authentication. We recommend that you use this setting only when
        attempting to debug a problem with the CIMOM. When the problem is
        resolved, disable the non-secure port option back. For the SFCB CIMOM
        to communicate with the necessary applications that require non-secure
        access, this port must be open in routers and firewall rules between the
        client application and the nodes being monitored.
       </p></dd></dl></div><p>
     To change the default port assignments, see
     <a class="xref" href="#sec-wbem-setting-secure-ports" title="45.2.2.2. Ports">Section 45.2.2.2, “Ports”</a>.
    </p></section><section class="sect3" id="sec-wbem-setting-secure-auth" data-id-title="Authentication"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.2.2.3 </span><span class="title-name">Authentication</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-setting-secure-auth">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     SFCB supports HTTP basic authentication and authentication based on client
     certificates (HTTP over SSL connections). Basic HTTP authentication is
     enabled by specifying <code class="literal">doBasicAuth=true</code> in the SFCB
     configuration file ( <code class="filename">/etc/sfcb/sfcb.cfg</code> by
     default). SUSE® Linux Enterprise Server installation of SFCB supports Pluggable Authentication
     Modules (PAM) approach; therefore the local root user can authenticate to
     the SFCB CIMOM with local root user credentials.
    </p><p>
     If the <code class="literal">sslClientCertificate</code> configuration property is
     set to <code class="literal">accept</code> or <code class="literal">require</code>, the SFCB HTTP adapter will request a
     certificate from clients when connecting via HTTP over SSL (HTTPS). If
     <code class="literal">require</code> is specified, the client
     <span class="bold"><strong>must</strong></span> provide a valid certificate
     (according to the client trust store specified via
     <code class="literal">sslClientTrustStore</code>). If the client fails to do
     so, the connection will be rejected by the CIM server.
    </p><p>
     The setting <code class="literal">sslClientCertificate=accept</code> may not be
     obvious. It is useful if both basic and client certificate
     authentication are allowed. If the client can provide a valid certificate,
     HTTPS connection will be established and the basic authentication
     procedure will not be executed. If this function cannot verify the
     certificate, the HTTP basic authentication will take place instead.
    </p></section></section></section><section class="sect1" id="sec-wbem-config" data-id-title="SFCB CIMOM configuration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">45.3 </span><span class="title-name">SFCB CIMOM configuration</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   SFCB is a lightweight implementation of the CIM server, but it is also
   highly configurable. Several options can control its behavior. You can
   control the SFCB server in three ways:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     by setting appropriate environment variables
    </p></li><li class="listitem"><p>
     by using command line options
    </p></li><li class="listitem"><p>
     by changing its configuration file
    </p></li></ul></div><section class="sect2" id="sec-wbem-config-env" data-id-title="Environment variables"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">45.3.1 </span><span class="title-name">Environment variables</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-env">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Several environment variables directly affect the behavior of SFCB. You
    need to restart the SFCB daemon by <code class="command">systemctl restart
    sfcb</code> for these changes to take effect.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.10.6.4.3.1"><span class="term"><code class="literal">PATH</code>
     </span></dt><dd><p>
       Specifies the path to the <code class="systemitem">sfcbd</code> daemon and
       utilities.
      </p></dd><dt id="id-1.3.7.10.6.4.3.2"><span class="term"><code class="literal">LD_LIBRARY_PATH</code>
     </span></dt><dd><p>
       Specifies the path to the sfcb runtime libraries. Alternatively, you can
       add this path to the system-wide dynamic loader configuration file
       <code class="filename">/etc/ld.so.conf</code> .
      </p></dd><dt id="id-1.3.7.10.6.4.3.3"><span class="term"><code class="literal">SFCB_PAUSE_PROVIDER</code>
     </span></dt><dd><p>
       Specifies the provider name. The SFCB server pauses after the provider
       is loaded for the first time. You can then attach a runtime debugger to
       the provider's process for debugging purposes.
      </p></dd><dt id="id-1.3.7.10.6.4.3.4"><span class="term"><code class="literal">SFCB_PAUSE_CODEC</code>
     </span></dt><dd><p>
       Specifies the name of the SFCB codec (currently supports only
       <code class="literal">http</code>. The SFCB server pauses after the codec is
       loaded for the first time. You can then attach a runtime debugger to the
       process.
      </p></dd><dt id="id-1.3.7.10.6.4.3.5"><span class="term"><code class="literal">SFCB_TRACE</code>
     </span></dt><dd><p>
       Specifies the level of debug messages for SFCB. Valid values are 0 (no
       debug messages), or 1 (key debug messages) to 4 (all debug messages).
       Default is 1.
      </p></dd><dt id="id-1.3.7.10.6.4.3.6"><span class="term"><code class="literal">SFCB_TRACE_FILE</code>
     </span></dt><dd><p>
       By default, SFCB outputs its debug messages to standard error output
       (STDERR). Setting this variable causes the debug messages to be written
       to a specified file instead.
      </p></dd><dt id="id-1.3.7.10.6.4.3.7"><span class="term"><code class="literal">SBLIM_TRACE</code>
     </span></dt><dd><p>
       Specifies the level of debug messages for SBLIM providers. Valid values
       are 0 (no debug messages), or 1 (key debug messages) to 4 (all debug
       messages).
      </p></dd><dt id="id-1.3.7.10.6.4.3.8"><span class="term"><code class="literal">SBLIM_TRACE_FILE</code>
     </span></dt><dd><p>
       By default, SBLIM provider outputs its trace messages to STDERR. Setting
       this variable causes the trace messages to be written to a specified
       file instead.
      </p></dd></dl></div></section><section class="sect2" id="sec-wbem-config-cmdline" data-id-title="Command line options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">45.3.2 </span><span class="title-name">Command line options</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-cmdline">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <code class="systemitem">sfcbd</code>, the SFCB daemon, has several command line
    options that switch particular runtime features on or off. Enter these
    options when SFCB daemon starts.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.10.6.5.3.1"><span class="term"><code class="literal">-c, --config-file</code>=<em class="replaceable">FILE</em>
     </span></dt><dd><p>
       When SFCB daemon starts, it reads its configuration from
       <code class="filename">/etc/sfcb/sfcb.cfg</code> by default. With this option,
       you can specify an alternative configuration file.
      </p></dd><dt id="id-1.3.7.10.6.5.3.2"><span class="term"><code class="literal">-d, --daemon</code>
     </span></dt><dd><p>
       Forces sfcbd and its child processes to run in the background.
      </p></dd><dt id="id-1.3.7.10.6.5.3.3"><span class="term"><code class="literal">-s, --collect-stats</code>
     </span></dt><dd><p>
       Turns on runtime statistics collecting. sfcbd runtime statistics
       will be written to the <code class="filename">sfcbStat</code> file in the current
       working directory. By default, no statistics are collected.
      </p></dd><dt id="id-1.3.7.10.6.5.3.4"><span class="term"><code class="literal">-l, --syslog-level</code>=<em class="replaceable">LOGLEVEL</em>
     </span></dt><dd><p>
       Specifies the level of verbosity for the system logging facility.
       <em class="replaceable">LOGLEVEL</em> can be one of LOG_INFO, LOG_DEBUG
       or LOG_ERR, which is the default.
      </p></dd><dt id="id-1.3.7.10.6.5.3.5"><span class="term"><code class="literal">-k, --color-trace</code>=<em class="replaceable">LOGLEVEL</em>
     </span></dt><dd><p>
       Prints trace output in a different color per process for easier
       debugging.
      </p></dd><dt id="id-1.3.7.10.6.5.3.6"><span class="term"><code class="literal">-t, --trace-components</code>=<em class="replaceable">NUM</em>
     </span></dt><dd><p>
       Activates component-level tracing messages, where
       <em class="replaceable">NUM</em> is an OR-ed bitmask integer that defines
       which component to trace. After you specify <code class="option">-t ?</code>, it
       lists all the components and their associated integer bitmask:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sfcbd -t ?
---   Traceable Components:     Int       Hex
---            providerMgr:          1  0x0000001
---            providerDrv:          2  0x0000002
---             cimxmlProc:          4  0x0000004
---             httpDaemon:          8  0x0000008
---                upCalls:         16  0x0000010
---               encCalls:         32  0x0000020
---        ProviderInstMgr:         64  0x0000040
---       providerAssocMgr:        128  0x0000080
---              providers:        256  0x0000100
---            indProvider:        512  0x0000200
---       internalProvider:       1024  0x0000400
---             objectImpl:       2048  0x0000800
---                  xmlIn:       4096  0x0001000
---                 xmlOut:       8192  0x0002000
---                sockets:      16384  0x0004000
---              memoryMgr:      32768  0x0008000
---               msgQueue:      65536  0x0010000
---             xmlParsing:     131072  0x0020000
---         responseTiming:     262144  0x0040000
---              dbpdaemon:     524288  0x0080000
---                    slp:    1048576  0x0100000</pre></div><p>
       A useful value that reveals the internal functions of sfcbd but does not
       generate too many messages, is <code class="option">-t</code>
       <em class="replaceable">2019</em>.
      </p></dd></dl></div></section><section class="sect2" id="sec-wbem-config-confile" data-id-title="SFCB configuration file"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">45.3.3 </span><span class="title-name">SFCB configuration file</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    SFCB reads its runtime configuration from configuration file
    <code class="filename">/etc/sfcb/sfcb.cfg</code> after starting up. This behavior
    can be overridden using <code class="option">-c</code> option at start-up.
   </p><p>
    The configuration file contains <code class="option">option</code> :
    <em class="replaceable">VALUE</em> pairs, one per line.
   </p><p>
    Any setting that has the options commented out with a number sign (#) uses
    the default setting.
   </p><p>
    The following list of options may not be complete. See the content of
    <code class="filename">/etc/sfcb/sfcb.cfg</code> and
    <code class="filename">/usr/share/doc/packages/sblim-sfcb/README</code> for their
    complete list.
   </p><section class="sect3" id="sec-wbem-config-confile-1" data-id-title="httpPort"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.1 </span><span class="title-name">httpPort</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-1">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.6.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.6.2">#</a></h2></div><p>
     Specifies the local port value that sfcbd should listen to receive HTTP
     (insecure) requests from CIM clients. Default is <code class="literal">5988</code> .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.6.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.6.4">#</a></h2></div><p>
     <code class="literal">httpPort:</code> <em class="replaceable">PORT_NUMBER</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-2" data-id-title="enableHttp"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.2 </span><span class="title-name">enableHttp</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-2">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.7.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.7.2">#</a></h2></div><p>
     Specifies whether SFCB should accept HTTP client connections. Default is
     <code class="literal">false</code> .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.7.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.7.4">#</a></h2></div><p>
     <code class="literal">enableHttp:</code> <em class="replaceable">OPTION</em>
    </p><div class="informaltable"><table style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          Option
         </p>
        </th><th style="border-bottom: 1px solid ; ">
         <p>
          Description
         </p>
        </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          true
         </p>
        </td><td style="border-bottom: 1px solid ; ">
         <p>
          Enables HTTP connections.
         </p>
        </td></tr><tr><td style="border-right: 1px solid ; ">
         <p>
          false
         </p>
        </td><td>
         <p>
          Disables HTTP connections.
         </p>
        </td></tr></tbody></table></div></section><section class="sect3" id="sec-wbem-config-confile-3" data-id-title="httpProcs"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.3 </span><span class="title-name">httpProcs</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-3">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.8.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.8.2">#</a></h2></div><p>
     Specifies the maximum number of simultaneous HTTP client connections
     before new incoming HTTP requests are blocked. Default is
     <code class="literal">8</code> .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.8.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.8.4">#</a></h2></div><p>
     <code class="literal">httpProcs:</code>
     <em class="replaceable">MAX_NUMBER_OF_CONNECTIONS</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-3-5" data-id-title="httpUserSFCB, httpUser"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.4 </span><span class="title-name">httpUserSFCB, httpUser</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-3-5">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.9.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.9.2">#</a></h2></div><p>
     These options control what user the HTTP server will run under. If
     <code class="option">httpUserSFCB</code> is <code class="literal">true</code>, HTTP will run
     under the same user as the SFCB main process. If it is
     <code class="literal">false</code> the user name specified for
     <code class="option">httpUser</code> will be used. This setting is used for both HTTP
     and HTTPS servers. <code class="option">httpUser</code> <span class="emphasis"><em>must</em></span> be
     specified if <code class="option">httpUserSFCB</code> is set to
     <code class="literal">false</code>. the default is <code class="literal">true</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.9.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.9.4">#</a></h2></div><p>
     <code class="literal">httpUserSFCB: true</code>
    </p></section><section class="sect3" id="sec-wbem-config-confile-3-8" data-id-title="httpLocalOnly"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.5 </span><span class="title-name">httpLocalOnly</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-3-8">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.10.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.10.2">#</a></h2></div><p>
     Specifies whether to limit HTTP requests to localhost only. Default is
     <code class="literal">false</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.10.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.10.4">#</a></h2></div><p>
     <code class="literal">httpLocalOnly: false</code>
    </p></section><section class="sect3" id="sec-wbem-config-confile-4" data-id-title="httpsPort"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.6 </span><span class="title-name">httpsPort</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-4">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.11.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.11.2">#</a></h2></div><p>
     Specifies the local port value where sfcbd listens for HTTPS requests from
     CIM clients. Default is <code class="literal">5989</code> .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.11.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.11.4">#</a></h2></div><p>
     <code class="literal">httpsPort: port_number</code>
    </p></section><section class="sect3" id="sec-wbem-config-confile-5" data-id-title="enableHttps"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.7 </span><span class="title-name">enableHttps</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-5">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.12.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.12.2">#</a></h2></div><p>
     Specifies if SFCB will accept HTTPS client connections. Default is
     <code class="literal">true</code> .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.12.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.12.4">#</a></h2></div><p>
     <code class="literal">enableHttps: option</code>
    </p><div class="informaltable"><table style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          Option
         </p>
        </th><th style="border-bottom: 1px solid ; ">
         <p>
          Description
         </p>
        </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          true
         </p>
        </td><td style="border-bottom: 1px solid ; ">
         <p>
          Enables HTTPS connections.
         </p>
        </td></tr><tr><td style="border-right: 1px solid ; ">
         <p>
          false
         </p>
        </td><td>
         <p>
          Disables HTTPS connections.
         </p>
        </td></tr></tbody></table></div></section><section class="sect3" id="sec-wbem-config-confile-7" data-id-title="httpsProcs"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.8 </span><span class="title-name">httpsProcs</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-7">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.13.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.13.2">#</a></h2></div><p>
     Specifies the maximum number of simultaneous HTTPS client connections
     before new incoming HTTPS requests are blocked. Default is
     <code class="literal">8</code> .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.13.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.13.4">#</a></h2></div><p>
     <code class="literal">httpsProcs:</code> <em class="replaceable">MAX_NUMBER_OF_CONNECTIONS</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-8" data-id-title="enableInterOp"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.9 </span><span class="title-name">enableInterOp</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-8">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.14.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.14.2">#</a></h2></div><p>
     Specifies if SFCB will provide the <span class="emphasis"><em>interop</em></span> namespace
     for indication support. Default is <code class="literal">true</code> .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.14.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.14.4">#</a></h2></div><p>
     <code class="literal">enableInterOp:</code> <em class="replaceable">OPTION</em>
    </p><div class="informaltable"><table style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          Option
         </p>
        </th><th style="border-bottom: 1px solid ; ">
         <p>
          Description
         </p>
        </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          true
         </p>
        </td><td style="border-bottom: 1px solid ; ">
         <p>
          Enables interop namespace.
         </p>
        </td></tr><tr><td style="border-right: 1px solid ; ">
         <p>
          false
         </p>
        </td><td>
         <p>
          Disables interop namespace.
         </p>
        </td></tr></tbody></table></div></section><section class="sect3" id="sec-wbem-config-confile-9" data-id-title="provProcs"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.10 </span><span class="title-name">provProcs</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-9">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.15.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.15.2">#</a></h2></div><p>
     Specifies the maximum number of simultaneous provider processes. After
     this point, if a new incoming request requires loading a new provider,
     then one of the existing providers will first be automatically unloaded.
     Default is <code class="literal">32</code> .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.15.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.15.4">#</a></h2></div><p>
     <code class="literal">provProcs:</code> <em class="replaceable">MAX_NUMBER_OF_PROCS</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-10" data-id-title="doBasicAuth"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.11 </span><span class="title-name">doBasicAuth</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-10">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.16.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.16.2">#</a></h2></div><p>
     Switches basic authentication on or off based on the client user
     identifier before it accepts the request. Default value is
     <code class="literal">true</code> which means that basic client authentication is
     performed.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.16.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.16.4">#</a></h2></div><p>
     <code class="literal">doBasicAuth:</code> <em class="replaceable">OPTION</em>
    </p><div class="informaltable"><table style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          Option
         </p>
        </th><th style="border-bottom: 1px solid ; ">
         <p>
          Description
         </p>
        </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          true
         </p>
        </td><td style="border-bottom: 1px solid ; ">
         <p>
          Enables basic authentication.
         </p>
        </td></tr><tr><td style="border-right: 1px solid ; ">
         <p>
          false
         </p>
        </td><td>
         <p>
          Disables basic authentication.
         </p>
        </td></tr></tbody></table></div></section><section class="sect3" id="sec-wbem-config-confile-11" data-id-title="basicAuthLib"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.12 </span><span class="title-name">basicAuthLib</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-11">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.17.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.17.2">#</a></h2></div><p>
     Specifies the local library name. The SFCB server loads the library to
     authenticate the client user identifier. Default is
     <code class="literal">sfcBasicPAMAuthentication</code> .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.17.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.17.4">#</a></h2></div><p>
     <code class="literal">provProcs:</code> <em class="replaceable">MAX_NUMBER_OF_PROCS</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-12" data-id-title="useChunking"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.13 </span><span class="title-name">useChunking</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-12">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.18.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.18.2">#</a></h2></div><p>
     This option switches the use of HTTP/HTTPS <span class="quote">“<span class="quote">chunking</span>”</span> on or
     off. If switched on, the server will return large volumes of response data
     to the client in smaller <span class="quote">“<span class="quote">chunks</span>”</span>, rather than buffer the
     data and send it back all in one chunk. Default is <code class="literal">true</code>
     .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.18.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.18.4">#</a></h2></div><p>
     <code class="literal">useChunking:</code> <em class="replaceable">OPTION</em>
    </p><div class="informaltable"><table style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          Option
         </p>
        </th><th style="border-bottom: 1px solid ; ">
         <p>
          Description
         </p>
        </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          true
         </p>
        </td><td style="border-bottom: 1px solid ; ">
         <p>
          Enables HTTP/HTTPS data chunking.
         </p>
        </td></tr><tr><td style="border-right: 1px solid ; ">
         <p>
          false
         </p>
        </td><td>
         <p>
          Disables HTTP/HTTPS data chunking.
         </p>
        </td></tr></tbody></table></div></section><section class="sect3" id="sec-wbem-config-confile-13" data-id-title="keepaliveTimeout"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.14 </span><span class="title-name">keepaliveTimeout</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-13">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.19.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.19.2">#</a></h2></div><p>
     Specifies the maximum time in seconds that SFCB HTTP process waits between
     two requests on one connection before it terminates. Setting it to
     <code class="literal">0</code> disables HTTP keep-alive. Default is
     <code class="literal">0</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.19.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.19.4">#</a></h2></div><p>
     <code class="literal">keepaliveTimeout:</code> <em class="replaceable">SECS</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-14" data-id-title="keepaliveMaxRequest"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.15 </span><span class="title-name">keepaliveMaxRequest</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-14">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.20.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.20.2">#</a></h2></div><p>
     Specifies the maximum number of consecutive requests on one connection.
     Setting it to <code class="literal">0</code> disables HTTP keep-alive. Default value
     is <code class="literal">10</code> .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.20.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.20.4">#</a></h2></div><p>
     <code class="literal">keepaliveMaxRequest:</code> <em class="replaceable">NUMBER_OF_CONNECTIONS</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-15" data-id-title="registrationDir"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.16 </span><span class="title-name">registrationDir</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-15">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.21.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.21.2">#</a></h2></div><p>
     Specifies the registration directory, which contains the provider
     registration data, the staging area, and the static repository. Default is
     <code class="filename">/var/lib/sfcb/registration</code> .
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.21.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.21.4">#</a></h2></div><p>
     <code class="literal">registrationDir:</code> <em class="replaceable">DIR</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-16" data-id-title="providerDirs"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.17 </span><span class="title-name">providerDirs</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-16">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.22.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.22.2">#</a></h2></div><p>
     Specifies a space-separated list of directories where SFCB is searching
     for provider libraries. Default is <code class="filename">/usr/lib64 /usr/lib64
     /usr/lib64/cmpi</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.22.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.22.4">#</a></h2></div><p>
     <code class="literal">providerDirs:</code> <em class="replaceable">DIR</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-17" data-id-title="providerSampleInterval"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.18 </span><span class="title-name">providerSampleInterval</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-17">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.23.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.23.2">#</a></h2></div><p>
     Specifies the interval in seconds at which the provider manager is
     checking for idle providers. Default is <code class="literal">30</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.23.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.23.4">#</a></h2></div><p>
     <code class="literal">providerSampleInterval:</code> <em class="replaceable">SECS</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-18" data-id-title="providerTimeoutInterval"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.19 </span><span class="title-name">providerTimeoutInterval</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-18">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.24.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.24.2">#</a></h2></div><p>
     Specifies the interval in seconds before an idle provider gets unloaded by
     the provider manager. Default is <code class="literal">60</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.24.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.24.4">#</a></h2></div><p>
     <code class="literal">providerTimeoutInterval:</code> <em class="replaceable">SECS</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-19" data-id-title="providerAutoGroup"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.20 </span><span class="title-name">providerAutoGroup</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-19">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.25.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.25.2">#</a></h2></div><p>
     If the provider registration file does not specify any other group, and
     the option is set to <code class="literal">true</code>, all providers in the
     same shared library are executed in the same process.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.25.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.25.4">#</a></h2></div><p>
     <code class="literal">providerAutoGroup:</code> <em class="replaceable">OPTION</em>
    </p><div class="informaltable"><table style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          Option
         </p>
        </th><th style="border-bottom: 1px solid ; ">
         <p>
          Description
         </p>
        </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          true
         </p>
        </td><td style="border-bottom: 1px solid ; ">
         <p>
          Enables grouping of providers.
         </p>
        </td></tr><tr><td style="border-right: 1px solid ; ">
         <p>
          false
         </p>
        </td><td>
         <p>
          Disables grouping of providers.
         </p>
        </td></tr></tbody></table></div></section><section class="sect3" id="sec-wbem-config-confile-20" data-id-title="sslCertificateFilePath"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.21 </span><span class="title-name">sslCertificateFilePath</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-20">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.26.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.26.2">#</a></h2></div><p>
     Specifies the name of the file that contains the server certificate. The
     file must be in PEM (Privacy Enhanced Mail, RFC 1421 and RFC 1424) format.
     This file is only required if <code class="literal">enableHttps</code> is set to
     <code class="literal">true</code>. Default is
     <code class="filename">/etc/sfcb/server.pem</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.26.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.26.4">#</a></h2></div><p>
     <code class="literal">sslCertificateFilePath:</code> <em class="replaceable">PATH</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-21" data-id-title="sslKeyFilePath"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.22 </span><span class="title-name">sslKeyFilePath</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-21">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.27.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.27.2">#</a></h2></div><p>
     Specifies the name of the file that contains the private key for the
     server certificate. The file must be in PEM format and may not be
     protected by passphrase. This file is only required if
     <code class="literal">enableHttps</code> is set to <code class="literal">true</code>. Default
     is <code class="filename">/etc/sfcb/file.pem</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.27.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.27.4">#</a></h2></div><p>
     <code class="literal">sslKeyFilePath:</code> <em class="replaceable">PATH</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-22" data-id-title="sslClientTrustStore"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.23 </span><span class="title-name">sslClientTrustStore</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-22">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.28.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.28.2">#</a></h2></div><p>
     Specifies the name of the file that contains either the CA or self-signed
     certificates of the clients. This file must be in PEM format and is only
     required if <code class="literal">sslClientCertificate</code> is set to
     <code class="literal">accept</code> or <code class="literal">require</code>. Default is
     <code class="filename">/etc/sfcb/client.pem</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.28.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.28.4">#</a></h2></div><p>
     <code class="literal">sslClientTrustStore:</code> <em class="replaceable">PATH</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-23" data-id-title="sslClientCertificate"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.24 </span><span class="title-name">sslClientCertificate</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-23">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.29.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.29.2">#</a></h2></div><p>
     Specifies the way SFCB handles client certificate based authentication. If
     set to <code class="literal">ignore</code>, it will not request a certificate from
     the client. If set to <code class="literal">accept</code> it will request a
     certificate from the client but will not fail if the client does not
     present one. If set to <code class="literal">require</code>, it will refuse the
     client connection if the client does not present a certificate. Default
     value is <code class="literal">ignore</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.29.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.29.4">#</a></h2></div><p>
     <code class="literal">sslClientCertificate:</code> <em class="replaceable">OPTION</em>
    </p><div class="informaltable"><table style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          Option
         </p>
        </th><th style="border-bottom: 1px solid ; ">
         <p>
          Description
         </p>
        </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          ignore
         </p>
        </td><td style="border-bottom: 1px solid ; ">
         <p>
          Disables requesting a client certificate.
         </p>
        </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
         <p>
          accept
         </p>
        </td><td style="border-bottom: 1px solid ; ">
         <p>
          Disables requesting a client certificate.
         </p>
         <p>
          Will not fail if no certificate is present.
         </p>
        </td></tr><tr><td style="border-right: 1px solid ; ">
         <p>
          require
         </p>
        </td><td>
         <p>
          Refuses the client connection without a valid certificate.
         </p>
        </td></tr></tbody></table></div></section><section class="sect3" id="sec-wbem-config-confile-24" data-id-title="certificateAuthLib"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.25 </span><span class="title-name">certificateAuthLib</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-24">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.30.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.30.2">#</a></h2></div><p>
     Specifies the name of the local library to request for the user
     authentication based on client certificate. This is only requested if
     <code class="literal">sslClientCertificate</code> is not set to
     <code class="literal">ignore</code>. Default value is
     <code class="filename">sfcCertificateAuthentication</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.30.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.30.4">#</a></h2></div><p>
     <code class="literal">certificateAuthLib:</code> <em class="replaceable">FILE</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-25" data-id-title="traceLevel"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.26 </span><span class="title-name">traceLevel</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-25">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.31.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.31.2">#</a></h2></div><p>
     Specifies the trace level for SFCB. You can override it by setting
     environment variable <code class="literal">SFCB_TRACE_LEVEL</code>. Default value is
     <code class="literal">0</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.31.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.31.4">#</a></h2></div><p>
     <code class="literal">traceLevel:</code> <em class="replaceable">NUM_LEVEL</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-26" data-id-title="traceMask"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.27 </span><span class="title-name">traceMask</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-26">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.32.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.32.2">#</a></h2></div><p>
     Specifies the trace mask for SFCB. you can override it by the command line
     option <code class="option">--trace-components</code>. Default value is
     <code class="literal">0</code>.
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.32.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.32.4">#</a></h2></div><p>
     <code class="literal">traceMask:</code> <em class="replaceable">MASK</em>
    </p></section><section class="sect3" id="sec-wbem-config-confile-27" data-id-title="traceFile"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.3.3.28 </span><span class="title-name">traceFile</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-config-confile-27">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.33.2"><span class="name">Purpose</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.33.2">#</a></h2></div><p>
     Specifies the trace file for SFCB. You can override it by setting
     environment variable <code class="literal">SFCB_TRACE_FILE</code>. Default value is
     <code class="literal">stderr</code> (standard error output).
    </p><div class="sect1 bridgehead"><h2 class="title" id="id-1.3.7.10.6.6.33.4"><span class="name">Syntax</span><a title="Permalink" class="permalink" href="#id-1.3.7.10.6.6.33.4">#</a></h2></div><p>
     <code class="literal">traceFile:</code> <em class="replaceable">OUTPUT</em>
    </p></section></section></section><section class="sect1" id="sec-wbem-advanced" data-id-title="Advanced SFCB tasks"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">45.4 </span><span class="title-name">Advanced SFCB tasks</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-advanced">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   This chapter covers more advanced topics related to SFCB usage. To
   understand them, you need to have basic knowledge of the Linux file system
   and experience with the Linux command line. This chapter includes the
   following tasks:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Installing CMPI providers
    </p></li><li class="listitem"><p>
     Testing SFCB
    </p></li><li class="listitem"><p>
     Using <code class="command">wbemcli</code> CIM client
    </p></li></ul></div><section class="sect2" id="sec-wbem-advanced-cmpinst" data-id-title="Installing CMPI providers"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">45.4.1 </span><span class="title-name">Installing CMPI providers</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-advanced-cmpinst">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To install a CMPI provider, you need to make sure that its shared library
    is copied into one of the directories specified by
    <code class="literal">providerDirs</code> configuration option, see
    <a class="xref" href="#sec-wbem-config-confile-16" title="45.3.3.17. providerDirs">Section 45.3.3.17, “providerDirs”</a>. The provider must also be
    properly registered using <code class="command">sfcbstage</code> and
    <code class="command">sfcbrepos</code> commands.
   </p><p>
    The provider package is prepared for SFCB, so that its installation
    takes care of the proper registration. Most SBLIM providers are prepared
    for SFCB.
   </p><section class="sect3" id="sec-wbem-advanced-cmpinst-crep" data-id-title="Class repository"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.4.1.1 </span><span class="title-name">Class repository</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-advanced-cmpinst-crep">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     <span class="emphasis"><em>Class repository</em></span> is a place where SFCB stores
     information about CIM classes. It consists of a directory tree
     with namespace components. Typical CIM namespaces are
     <code class="literal">root/cimv2</code> or <code class="literal">root/interop</code>, which
     respectively translate to the class repository directory path on the file
     system
    </p><p>
     <code class="filename">/var/lib/sfcb/registration/repository/root/cimv2</code>
    </p><p>
     and
    </p><p>
     <code class="filename">/var/lib/sfcb/registration/repository/root/interop</code>
    </p><p>
     Each namespace directory contains the file
     <code class="filename">classSchemas</code>. The file has a compiled binary
     representation of all the CIM classes registered under that namespace. It
     also contains necessary information about their CIM superclasses.
    </p><p>
     Each namespace directory may contain a file
     <code class="filename">qualifiers</code> which contains all qualifiers for the
     namespace. When sfcbd restarts, the class provider will scan the directory
     <code class="filename">/var/lib/sfcb/registration/repository/</code> and all its
     subdirectories to determine the registered namespaces. Then
     <code class="filename">classSchemas</code> files are decoded and the class
     hierarchy for each namespace is built.
    </p></section><section class="sect3" id="sec-wbem-advanced-cmpinst-classadd" data-id-title="Adding new classes"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">45.4.1.2 </span><span class="title-name">Adding new classes</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-advanced-cmpinst-classadd">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     SFCB cannot make live CIM class manipulations. You need to add, change or
     remove classes offline and restart SFCB service with <code class="command">systemctl
     restart sfcb</code> to register the changes.
    </p><p>
     To store providers class and registration information, SFCB uses a place
     called <span class="emphasis"><em>staging area</em></span>. On SUSE® Linux Enterprise Server systems, it is the
     directory structure under <code class="filename">/var/lib/sfcb/stage/</code>.
    </p><p>
     To add a new provider, you need to:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       Copy the provider class definition files to the
       <code class="filename">./mofs</code> subdirectory of staging area directory
       (<code class="filename">/var/lib/sfcb/stage/mofs</code>).
      </p></li><li class="listitem"><p>
       Copy a registration file which contains the name of the class or classes
       and type of provider, and the name of the executable library file into
       the <code class="filename">./regs</code> subdirectory.
      </p></li></ul></div><p>
     There are two default <span class="quote">“<span class="quote">mof</span>”</span> (class definition) files in the
     staging directory: <code class="filename">indication.mof</code> and
     <code class="filename">interop.mof</code>. MOF files under the root stage directory
     <code class="filename">/var/lib/sfcb/stage/mofs</code> will be copied into each
     namespace after running <code class="filename">sfcbrepos</code> command. The
     <code class="filename">interop.mof</code> will only be compiled into the
     <span class="emphasis"><em>interop</em></span> namespace.
    </p><p>
     The directory layout may look like the following example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ls /var/lib/sfcb/stage
default.reg  mofs  regs</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ls /var/lib/sfcb/stage/mofs
indication.mof  root</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ls /var/lib/sfcb/stage/mofs/root
cimv2  interop  suse  virt</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ls -1 /var/lib/sfcb/stage/mofs/root/cimv2 | less
Linux_ABIParameter.mof
Linux_BaseIndication.mof
Linux_Base.mof
Linux_DHCPElementConformsToProfile.mof
Linux_DHCPEntity.mof
[..]
OMC_StorageSettingWithHints.mof
OMC_StorageVolumeDevice.mof
OMC_StorageVolume.mof
OMC_StorageVolumeStorageSynchronized.mof
OMC_SystemStorageCapabilities.mof</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ls -1 /var/lib/sfcb/stage/mofs/root/interop
ComputerSystem.mof
ElementConformsToProfile.mof
HostSystem.mof
interop.mof
Linux_DHCPElementConformsToProfile.mof
[..]
OMC_SMIElementSoftwareIdentity.mof
OMC_SMISubProfileRequiresProfile.mof
OMC_SMIVolumeManagementSoftware.mof
ReferencedProfile.mof
RegisteredProfile.mof</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>ls -1 /var/lib/sfcb/stage/regs
AllocationCapabilities.reg
Linux_ABIParameter.reg
Linux_BaseIndication.reg
Linux_DHCPGlobal.reg
Linux_DHCPRegisteredProfile.reg
[..]
OMC_Base.sfcb.reg
OMC_CopyServices.sfcb.reg
OMC_PowerManagement.sfcb.reg
OMC_Server.sfcb.reg
RegisteredProfile.reg</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>cat /var/lib/sfcb/stage/regs/Linux_DHCPRegisteredProfile.reg
[Linux_DHCPRegisteredProfile]
   provider: Linux_DHCPRegisteredProfileProvider
   location: cmpiLinux_DHCPRegisteredProfile
   type: instance
   namespace: root/interop
#
[Linux_DHCPElementConformsToProfile]
   provider: Linux_DHCPElementConformsToProfileProvider
   location: cmpiLinux_DHCPElementConformsToProfile
   type: instance association
   namespace: root/cimv2
#
[Linux_DHCPElementConformsToProfile]
   provider: Linux_DHCPElementConformsToProfileProvider
   location: cmpiLinux_DHCPElementConformsToProfile
   type: instance association
   namespace: root/interop</pre></div><p>
     SFCB uses a custom provider registration file for each provider.
    </p><div id="id-1.3.7.10.7.4.5.16" data-id-title="SBLIM providers registration files" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: SBLIM providers registration files</div><p>
      All SBLIM providers on the SBLIM Web site already include a registration
      file that is used to generate the .reg file for SFCB.
     </p></div><p>
     The format of SFCB registration file is:
    </p><div class="verbatim-wrap"><pre class="screen">[&lt;class-name&gt;]
   provider: &lt;provide-name&gt;
   location: &lt;library-name&gt;
   type: [instance] [association] [method] [indication]
   group: &lt;group-name&gt;
   unload: never
   namespace: &lt;namespace-for-class&gt; ...</pre></div><p>
     where:
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.7.10.7.4.5.20.1"><span class="term"><code class="literal">&lt;class-name&gt;</code>
      </span></dt><dd><p>
        The CIM class name (required)
       </p></dd><dt id="id-1.3.7.10.7.4.5.20.2"><span class="term"><code class="literal">&lt;provider-name&gt;</code>
      </span></dt><dd><p>
        The CMPI provider name (required)
       </p></dd><dt id="id-1.3.7.10.7.4.5.20.3"><span class="term"><code class="literal">&lt;location-name&gt;</code>
      </span></dt><dd><p>
        The name of the provider library (required)
       </p></dd><dt id="id-1.3.7.10.7.4.5.20.4"><span class="term"><code class="literal">type</code>
      </span></dt><dd><p>
        The type of the provider (required). This can be any combination of:
        <code class="literal">instance</code>, <code class="literal">association</code>,
        <code class="literal">method</code> or <code class="literal">indication</code>.
       </p></dd><dt id="id-1.3.7.10.7.4.5.20.5"><span class="term"><code class="literal">&lt;group-name&gt;</code>
      </span></dt><dd><p>
        Multiple providers can be grouped together and run under a single
        process to further minimize runtime resources. All providers registered
        under the same &lt;group-name&gt; will be executed under the same
        process. By default each provider will be run as a separate process.
       </p></dd><dt id="id-1.3.7.10.7.4.5.20.6"><span class="term"><code class="literal">unload</code>
      </span></dt><dd><p>
        Specifies the unload policy for the provider. Currently the only
        supported option is <code class="option">never</code>, which specifies that the
        provider will not be monitored for idle times and will never be
        unloaded. By default each provider will be unloaded when its idle times
        exceed the value specified in the configuration file.
       </p></dd><dt id="id-1.3.7.10.7.4.5.20.7"><span class="term"><code class="literal">namespace</code>
      </span></dt><dd><p>
        List of namespaces for which this provider can be executed. This is
        required, although for most providers this will be
        <code class="literal">root/cimv2</code>.
       </p></dd></dl></div><p>
     Once all the class definitions and provider registration files are stored
     in the staging area, you need to rebuild the SFCB class repository with
     the command <code class="command">sfcbrepos</code> <code class="option">-f</code>.
    </p><p>
     You can add, change or remove classes this way. After rebuilding the class
     repository, restart SFCB with command <code class="command">systemctl restart
     sfcb</code>.
    </p><p>
     Alternatively, the SFCB package contains a utility that will copy provider
     class mof files and registration files to the correct locations in the
     staging area.
    </p><p>
     <code class="command">sfcbstage</code> <code class="option">-r</code> <code class="literal">[provider.reg]
     [class1.mof] [class2.mof] ...</code>
    </p><p>
     After running this command you still need to rebuild the class repository
     and restart SFCB service.
    </p></section></section><section class="sect2" id="sec-wbem-advanced-testing" data-id-title="Testing SFCB"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">45.4.2 </span><span class="title-name">Testing SFCB</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-advanced-testing">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The SFCB package includes two testing scripts: <code class="command">wbemcat</code>
    and <code class="command">xmltest</code>.
   </p><p>
    <code class="command">wbemcat</code> sends raw CIM-XML data via HTTP protocol to the
    specified SFCB host (localhost by default) listening on port 5988. Then it
    displays the returned results. The following file contains the CIM-XML
    representation of a standard EnumerateClasses request:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;CIM CIMVERSION="2.0" DTDVERSION="2.0"&gt;
  &lt;MESSAGE ID="4711" PROTOCOLVERSION="1.0"&gt;
    &lt;SIMPLEREQ&gt;
      &lt;IMETHODCALL NAME="EnumerateClasses"&gt;
        &lt;LOCALNAMESPACEPATH&gt;
          &lt;NAMESPACE NAME="root"/&gt;
          &lt;NAMESPACE NAME="cimv2"/&gt;
        &lt;/LOCALNAMESPACEPATH&gt;
        &lt;IPARAMVALUE NAME="ClassName"&gt;
          &lt;CLASSNAME NAME=""/&gt;
        &lt;/IPARAMVALUE&gt;
        &lt;IPARAMVALUE NAME="DeepInheritance"&gt;
          &lt;VALUE&gt;TRUE&lt;/VALUE&gt;
        &lt;/IPARAMVALUE&gt;
        &lt;IPARAMVALUE NAME="LocalOnly"&gt;
          &lt;VALUE&gt;FALSE&lt;/VALUE&gt;
        &lt;/IPARAMVALUE&gt;
        &lt;IPARAMVALUE NAME="IncludeQualifiers"&gt;
          &lt;VALUE&gt;FALSE&lt;/VALUE&gt;
        &lt;/IPARAMVALUE&gt;
        &lt;IPARAMVALUE NAME="IncludeClassOrigin"&gt;
          &lt;VALUE&gt;TRUE&lt;/VALUE&gt;
        &lt;/IPARAMVALUE&gt;
      &lt;/IMETHODCALL&gt;
    &lt;/SIMPLEREQ&gt;
  &lt;/MESSAGE&gt;
&lt;/CIM&gt;</pre></div><p>
    Sending this request to SFCB CIMOM returns a list of all supported classes
    for which there is a registered provider. Suppose you save the file as
    <code class="filename">cim_xml_test.xml</code>.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>wbemcat cim_xml_test.xml | less
HTTP/1.1 200 OK
Content-Type: application/xml; charset="utf-8"
Content-Length: 337565
Cache-Control: no-cache
CIMOperation: MethodResponse

&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;CIM CIMVERSION="2.0" DTDVERSION="2.0"&gt;
&lt;MESSAGE ID="4711" PROTOCOLVERSION="1.0"&gt;
&lt;SIMPLERSP&gt;
&lt;IMETHODRESPONSE NAME="EnumerateClasses"&gt;
[..]
&lt;CLASS NAME="Linux_DHCPParamsForEntity" SUPERCLASS="CIM_Component"&gt;
&lt;PROPERTY.REFERENCE NAME="GroupComponent" REFERENCECLASS="Linux_DHCPEntity"&gt;
&lt;/PROPERTY.REFERENCE&gt;
&lt;PROPERTY.REFERENCE NAME="PartComponent" REFERENCECLASS="Linux_DHCPParams"&gt;
&lt;/PROPERTY.REFERENCE&gt;
&lt;/CLASS&gt;
&lt;/IRETURNVALUE&gt;
&lt;/IMETHODRESPONSE&gt;
&lt;/SIMPLERSP&gt;
&lt;/MESSAGE&gt;
&lt;/CIM&gt;</pre></div><p>
    The classes listed will vary depending on what providers are installed on
    your system.
   </p><p>
    The second script <code class="command">xmltest</code> is also used to send a raw
    CIM-XML test file to the SFCB CIMOM. It then compares the returned results
    against a previously saved <span class="quote">“<span class="quote">OK</span>”</span> result file. If there does not
    yet exist a corresponding <span class="quote">“<span class="quote">OK</span>”</span> file, it will be created for
    later use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>xmltest cim_xml_test.xml
Running test cim_xml_test.xml ... OK
        Saving response as cim_xml_test.OK
<code class="prompt root"># </code>xmltest cim_xml_test.xml
Running test cim_xml_test.xml ... Passed</pre></div></section><section class="sect2" id="sec-wbem-advanced-wbemcli" data-id-title="Command line CIM client: wbemcli"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">45.4.3 </span><span class="title-name">Command line CIM client: wbemcli</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-advanced-wbemcli">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Besides <code class="command">wbemcat</code> and <code class="command">xmltest</code>,
    the SBLIM project includes a more advanced command line CIM client
    <code class="command">wbemcli</code>. The client is used to send CIM requests to SFCB
    server and display returned results. It is independent of CIMOM library and
    can be used with all WBEM compliant implementations.
   </p><p>
    For example, if you need to list all the classes implemented by SBLIM
    providers registered to your SFCB, send the <span class="quote">“<span class="quote">EnumerateClasses</span>”</span>
    (ec) request to SFCB:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>wbemcli -dx ec http://localhost/root/cimv2
To server: &lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;CIM CIMVERSION="2.0" DTDVERSION="2.0"&gt;
&lt;MESSAGE ID="4711" PROTOCOLVERSION="1.0"&gt;&lt;SIMPLEREQ&gt;&lt;IMETHODCALL \
    NAME="EnumerateClasses"&gt;&lt;LOCALNAMESPACEPATH&gt;&lt;NAMESPACE NAME="root"&gt; \
    &lt;/NAMESPACE&gt;&lt;NAMESPACE NAME="cimv2"&gt;&lt;/NAMESPACE&gt; \
    &lt;/LOCALNAMESPACEPATH&gt;
&lt;IPARAMVALUE NAME="DeepInheritance"&gt;&lt;VALUE&gt;TRUE&lt;/VALUE&gt; \
    &lt;/IPARAMVALUE&gt;
&lt;IPARAMVALUE NAME="LocalOnly"&gt;&lt;VALUE&gt;FALSE&lt;/VALUE&gt;&lt;/IPARAMVALUE&gt;
&lt;IPARAMVALUE NAME="IncludeQualifiers"&gt;&lt;VALUE&gt;FALSE&lt;/VALUE&gt; \
    &lt;/IPARAMVALUE&gt;
&lt;IPARAMVALUE NAME="IncludeClassOrigin"&gt;&lt;VALUE&gt;TRUE&lt;/VALUE&gt; \
    &lt;/IPARAMVALUE&gt;
&lt;/IMETHODCALL&gt;&lt;/SIMPLEREQ&gt;
&lt;/MESSAGE&gt;&lt;/CIM&gt;
From server: Content-Type: application/xml; charset="utf-8"
From server: Content-Length: 337565
From server: Cache-Control: no-cache
From server: CIMOperation: MethodResponse
From server: &lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;CIM CIMVERSION="2.0" DTDVERSION="2.0"&gt;
&lt;MESSAGE ID="4711" PROTOCOLVERSION="1.0"&gt;
&lt;SIMPLERSP&gt;
&lt;IMETHODRESPONSE NAME="EnumerateClasses"&gt;
&lt;IRETURNVALUE&gt;
&lt;CLASS NAME="CIM_ResourcePool" SUPERCLASS="CIM_LogicalElement"&gt;
&lt;PROPERTY NAME="Generation" TYPE="uint64"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="ElementName" TYPE="string"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="Description" TYPE="string"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="Caption" TYPE="string"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="InstallDate" TYPE="datetime"&gt;
&lt;/PROPERTY&gt;
[..]
&lt;CLASS NAME="Linux_Ext4FileSystem" SUPERCLASS="CIM_UnixLocalFileSystem"&gt;
&lt;PROPERTY NAME="FSReservedCapacity" TYPE="uint64"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="TotalInodes" TYPE="uint64"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="FreeInodes" TYPE="uint64"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="ResizeIncrement" TYPE="uint64"&gt;
&lt;VALUE&gt;0&lt;/VALUE&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="IsFixedSize" TYPE="uint16"&gt;
&lt;VALUE&gt;0&lt;/VALUE&gt;
&lt;/PROPERTY&gt;
[..]</pre></div><p>
    The <code class="option">-dx</code> option shows you the actual XML sent to SFCB by
    <code class="command">wbemcli</code> and the actual XML received. In the above
    example, the first of many returned classes was
    <code class="literal">CIM_ResourcePool</code> followed by
    <code class="literal">Linux_Ext4FileSystem</code>. Similar entries will appear for
    all other registered classes.
   </p><p>
    If you omit the <code class="option">-dx</code> option, <code class="command">wbemcli</code>
    will display only a compact representation of the returned data:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>wbemcli ec http://localhost/root/cimv2
localhost:5988/root/cimv2:CIM_ResourcePool Generation=,ElementName=, \
    Description=,Caption=,InstallDate=,Name=,OperationalStatus=, \
    StatusDescriptions=,Status=,HealthState=,PrimaryStatus=, \
    DetailedStatus=,OperatingStatus=,CommunicationStatus=,InstanceID=, \
    PoolID=,Primordial=,Capacity=,Reserved=,ResourceType=, \
    OtherResourceType=,ResourceSubType=, \AllocationUnits=
localhost:5988/root/cimv2:Linux_Ext4FileSystem FSReservedCapacity=, \
    TotalInodes=,FreeInodes=,ResizeIncrement=,IsFixedSize=,NumberOfFiles=, \
    OtherPersistenceType=,PersistenceType=,FileSystemType=,ClusterSize=, \
    MaxFileNameLength=,CodeSet=,CasePreserved=,CaseSensitive=, \
    CompressionMethod=,EncryptionMethod=,ReadOnly=,AvailableSpace=, \
    FileSystemSize=,BlockSize=,Root=,Name=,CreationClassName=,CSName=, \
    CSCreationClassName=,Generation=,ElementName=,Description=,Caption=, \
    InstanceID=,InstallDate=,OperationalStatus=,StatusDescriptions=, \
    Status=,HealthState=,PrimaryStatus=,DetailedStatus=,OperatingStatus= \
    ,CommunicationStatus=,EnabledState=,OtherEnabledState=,RequestedState= \
    ,EnabledDefault=,TimeOfLastStateChange=,AvailableRequestedStates=, \
    TransitioningToState=,PercentageSpaceUse=
    [..]</pre></div></section></section><section class="sect1" id="sec-wbem-moreinfo" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">45.5 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-wbem-moreinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">For more details about WBEM and SFCB, see the following sources: </span></span><a title="Permalink" class="permalink" href="#id-1.3.7.10.8.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_wbem.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.7.10.8.2.2"><span class="term"><a class="link" href="https://www.dmtf.org" target="_blank">https://www.dmtf.org</a>
    </span></dt><dd><p>
      Distributed Management Task Force Web site
     </p></dd><dt id="id-1.3.7.10.8.2.3"><span class="term"><a class="link" href="https://www.dmtf.org/standards/wbem/" target="_blank">https://www.dmtf.org/standards/wbem/</a>
    </span></dt><dd><p>
      Web-Based Enterprise Management (WBEM) Web site
     </p></dd><dt id="id-1.3.7.10.8.2.4"><span class="term"><a class="link" href="https://www.dmtf.org/standards/cim/" target="_blank">https://www.dmtf.org/standards/cim/</a>
    </span></dt><dd><p>
      Common Information Model (CIM) Web site
     </p></dd></dl></div></section></section></div><div class="part" id="part-trouble" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part VI </span><span class="title-name">Troubleshooting </span></span><a title="Permalink" class="permalink" href="#part-trouble">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/book_administration.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="#cha-adminhelp"><span class="title-number">46 </span><span class="title-name">Help and documentation</span></a></span></li><dd class="toc-abstract"><p>
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> comes with several sources of information and documentation,
  available online or integrated into your installed system.
 </p></dd><li><span class="chapter"><a href="#cha-adm-support"><span class="title-number">47 </span><span class="title-name">Gathering system information for support</span></a></span></li><dd class="toc-abstract"><p>
    For a quick overview of all relevant system information of a machine,
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> offers the
    <code class="systemitem">hostinfo</code> package. It also helps
    system administrators to check for tainted kernels (that are not supported)
    or any third-party packages installed on a machine.
   </p><p>
    In case of problems, a detailed system report may be created with either
    the <code class="command">supportconfig</code> command line tool or the YaST
    <span class="guimenu">Support</span> module. Both collect information about the
    system such as: current kernel version, hardware, installed packages,
    partition setup, and much more. The result is a TAR archive of files. After
    opening a Service Request (SR), you can upload the TAR archive to Global
    Technical Support. It helps to locate the issue you reported and to
    assist you in solving the problem.
   </p><p>
    Additionally, you can analyze the <code class="command">supportconfig</code> output
    for known issues to help resolve problems faster. For this purpose,
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> provides both an appliance and a command line tool for
    <code class="literal">Supportconfig Analysis</code> (SCA).
   </p></dd><li><span class="chapter"><a href="#cha-trouble"><span class="title-number">48 </span><span class="title-name">Common problems and their solutions</span></a></span></li><dd class="toc-abstract"><p>
    This chapter describes a range of potential problems and their solutions.
    Even if your situation is not precisely listed, there may be one
    similar enough to offer hints to the solution of your problem.
  </p></dd></ul></div><section class="chapter" id="cha-adminhelp" data-id-title="Help and documentation"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">46 </span><span class="title-name">Help and documentation</span></span> <a title="Permalink" class="permalink" href="#cha-adminhelp">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/help_admin.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> comes with several sources of information and documentation,
  available online or integrated into your installed system.
 </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.8.2.4.1"><span class="term">Product Documentation</span></dt><dd><p>
      Extensive documentation for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is available at <a class="link" href="https://documentation.suse.com/#sles" target="_blank">https://documentation.suse.com/#sles</a>. Topics covered range from
      deployment, upgrade and system administration to virtualization, system
      tuning and security, among others.
    </p><p>
      At <a class="link" href="https://documentation.suse.com/sbp-supported.html" target="_blank">https://documentation.suse.com/sbp-supported.html</a>,
      you can find SUSE's best practice series of documents covering hands-on
      documentation on implementation scenarios. At <a class="link" href="https://documentation.suse.com/trd-supported.html" target="_blank">https://documentation.suse.com/trd-supported.html</a>, our
      technical reference documentation series provides guides on deploying
      solution components from SUSE and its partners.
    </p></dd><dt id="id-1.3.8.2.4.2"><span class="term">Documentation in <code class="filename">/usr/share/doc</code></span></dt><dd><p>
     This directory holds release notes for your system (in the subdirectory
     <code class="filename">release-notes</code>). It also contains information of
     installed packages in the subdirectory <code class="filename">packages</code>. Find
     more detailed information in <a class="xref" href="#sec-help-onboard-docdir" title="46.1. Documentation directory">Section 46.1, “Documentation directory”</a>.
    </p></dd><dt id="id-1.3.8.2.4.3"><span class="term">Man pages and info pages for shell commands</span></dt><dd><p>
     When working with the shell, you do not need to know the options of the
     commands by heart. Traditionally, the shell provides integrated help by
     means of man pages and info pages. Read more in
     <a class="xref" href="#sec-help-onboard-manpages" title="46.2. Man pages">Section 46.2, “Man pages”</a> and
     <a class="xref" href="#sec-help-onboard-infopages" title="46.3. Info pages">Section 46.3, “Info pages”</a>.
    </p></dd><dt id="id-1.3.8.2.4.4"><span class="term">Desktop help center</span></dt><dd><p>
     The help center of the GNOME desktop (Help) provides central access to
     the GNOME desktop documentation.
    </p></dd><dt id="id-1.3.8.2.4.5"><span class="term">Separate help packages for certain applications</span></dt><dd><p>
     When installing new software with YaST, the software documentation is
     normally installed automatically and appears in the help center of your
     desktop. However, certain applications, such as GIMP, may have different
     online help packages that can be installed separately with YaST and do
     not integrate into the help centers.
    </p></dd></dl></div><section class="sect1" id="sec-help-onboard-docdir" data-id-title="Documentation directory"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">46.1 </span><span class="title-name">Documentation directory</span></span> <a title="Permalink" class="permalink" href="#sec-help-onboard-docdir">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/help_admin.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The traditional directory to find documentation on your installed Linux
    system is <code class="filename">/usr/share/doc</code>. The directory contains the
    release notes and information about the packages installed on your system,
    plus manuals and more.
  </p><div id="id-1.3.8.2.5.3" data-id-title="Contents depend on installed packages" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Contents depend on installed packages</div><p>
    In the Linux world, manuals and other kinds of documentation are
    available in the form of packages, like software. How much and which
    information you find in <code class="filename">/usr/share/doc</code> also depends
    on the (documentation) packages installed. If you cannot find the
    subdirectories mentioned here, check if the respective packages are
    installed on your system and add them with YaST, if needed.
   </p></div><section class="sect2" id="sec-help-onboard-docdir-releasenotes" data-id-title="Release notes"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">46.1.1 </span><span class="title-name">Release notes</span></span> <a title="Permalink" class="permalink" href="#sec-help-onboard-docdir-releasenotes">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/help_admin.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     We provide HTML, PDF, RTF and text versions of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> release
     notes. They are available on your installed system under
     <code class="filename">/usr/share/doc/release-notes/</code> or online at your
     product-specific Web page at <a class="link" href="https://www.suse.com/releasenotes/index.html" target="_blank">https://www.suse.com/releasenotes/index.html</a>.
   </p></section><section class="sect2" id="sec-help-onboard-docdir-pkg" data-id-title="Package documentation"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">46.1.2 </span><span class="title-name">Package documentation</span></span> <a title="Permalink" class="permalink" href="#sec-help-onboard-docdir-pkg">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/help_admin.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Under <code class="filename">packages</code>, find the documentation
    that is included in the software packages installed on your system. For
    every package, a subdirectory
    <code class="filename">/usr/share/doc/packages/<em class="replaceable">PACKAGENAME</em></code>
    is created. It often contains README files for the package and sometimes
    examples, configuration files, or additional scripts. The following list
    introduces typical files to be found under
    <code class="filename">/usr/share/doc/packages</code>. None of these entries are
    mandatory and many packages only include a few of them.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.8.2.5.5.3.1"><span class="term"><code class="filename">AUTHORS</code>
     </span></dt><dd><p>
       List of the main developers.
      </p></dd><dt id="id-1.3.8.2.5.5.3.2"><span class="term"><code class="filename">BUGS</code>
     </span></dt><dd><p>
       Known bugs or malfunctions. May also contain a link to a Bugzilla Web
       page where you can search all bugs.
      </p></dd><dt id="id-1.3.8.2.5.5.3.3"><span class="term"><code class="filename">CHANGES</code>
     , </span><span class="term"><code class="filename">ChangeLog</code>
     </span></dt><dd><p>
       Summary of changes from version to version. It is interesting for
       developers, because it is detailed.
      </p></dd><dt id="id-1.3.8.2.5.5.3.4"><span class="term"><code class="filename">COPYING</code>
     , </span><span class="term"><code class="filename">LICENSE</code>
     </span></dt><dd><p>
       Licensing information.
      </p></dd><dt id="id-1.3.8.2.5.5.3.5"><span class="term"><code class="filename">FAQ</code>
     </span></dt><dd><p>
       Question and answers collected from mailing lists or newsgroups.
      </p></dd><dt id="id-1.3.8.2.5.5.3.6"><span class="term"><code class="filename">INSTALL</code>
     </span></dt><dd><p>
       How to install this package on your system. As the package is already
       installed by the time you get to read this file, you can safely ignore
       the contents of this file.
      </p></dd><dt id="id-1.3.8.2.5.5.3.7"><span class="term"><code class="filename">README</code>, <code class="filename">README.*</code>
     </span></dt><dd><p>
       General information on the software. For example, for what purpose and
       how to use it.
      </p></dd><dt id="id-1.3.8.2.5.5.3.8"><span class="term"><code class="filename">TODO</code>
     </span></dt><dd><p>
       Features planned for the future.
      </p></dd><dt id="id-1.3.8.2.5.5.3.9"><span class="term"><code class="filename">MANIFEST</code>
     </span></dt><dd><p>
       List of files with a brief summary.
      </p></dd><dt id="id-1.3.8.2.5.5.3.10"><span class="term"><code class="filename">NEWS</code>
     </span></dt><dd><p>
       Description of what is new in this version.
      </p></dd></dl></div></section></section><section class="sect1" id="sec-help-onboard-manpages" data-id-title="Man pages"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">46.2 </span><span class="title-name">Man pages</span></span> <a title="Permalink" class="permalink" href="#sec-help-onboard-manpages">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/help_admin.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Man pages are an essential part of any Linux system. They explain the usage
   of a command and all available options and parameters. Man pages can be
   accessed with <code class="command">man</code> followed by the name of the command,
   for example, <code class="command">man ls</code>.
  </p><p>
   Man pages are displayed directly in the shell. To navigate them, move up and
   down with <span class="keycap">Page ↑</span> and <span class="keycap">Page ↓</span>.
   Move between the beginning and the end of a document with
   <span class="keycap">Home</span> and <span class="keycap">End</span>. End this viewing
   mode by pressing <span class="keycap">Q</span>. Learn more about the
   <code class="command">man</code> command itself with <code class="command">man man</code>. Man
   pages are sorted in categories as shown in
   <a class="xref" href="#tab-help-mancategory" title="Man pages—categories and descriptions">Table 46.1, “Man pages—categories and descriptions”</a> (taken from the man page for man
   itself).
  </p><div class="table" id="tab-help-mancategory" data-id-title="Man pages—categories and descriptions"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 46.1: </span><span class="title-name">Man pages—categories and descriptions </span></span><a title="Permalink" class="permalink" href="#tab-help-mancategory">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/help_admin.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Number
       </p>
      </th><th style="border-bottom: 1px solid ; ">
       <p>
        Description
       </p>
      </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        1
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Executable programs or shell commands
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        2
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        System calls (functions provided by the kernel)
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        3
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Library calls (functions within program libraries)
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        4
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Special files (normally found in <code class="filename">/dev</code>)
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        5
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        File formats and conventions (<code class="filename">/etc/fstab</code>)
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        6
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Games
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        7
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Miscellaneous (including macro packages and conventions), for example,
        man(7), groff(7)
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        8
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        System administration commands (normally only for <code class="systemitem">root</code>)
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        9
       </p>
      </td><td>
       <p>
        Kernel routines (nonstandard)
       </p>
      </td></tr></tbody></table></div></div><p>
   Each man page consists of several parts labeled <em class="citetitle">NAME</em>,
   <em class="citetitle">SYNOPSIS</em>, <em class="citetitle">DESCRIPTION</em>,
   <em class="citetitle">SEE ALSO</em>, <em class="citetitle">LICENSING</em>, and
   <em class="citetitle">AUTHOR</em>. There may be additional sections available
   depending on the type of command.
  </p></section><section class="sect1" id="sec-help-onboard-infopages" data-id-title="Info pages"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">46.3 </span><span class="title-name">Info pages</span></span> <a title="Permalink" class="permalink" href="#sec-help-onboard-infopages">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/help_admin.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Info pages are another important source of information on your system.
   normally, they are more detailed than man pages. They consist of more than
   command line options and contain sometimes whole tutorials or reference
   documentation. To view the info page for a certain command, enter
   <code class="command">info</code> followed by the name of the command, for example,
   <code class="command">info ls</code>. You can browse an info page with a viewer
   directly in the shell and display the different sections, called
   <span class="quote">“<span class="quote">nodes</span>”</span>. Use <span class="keycap">Space</span> to move forward and
   <span class="keycap">&lt;—</span> to move backward. Within a node, you can also
   browse with <span class="keycap">Page ↑</span> and <span class="keycap">Page ↓</span>
   but only <span class="keycap">Space</span> and <span class="keycap">&lt;—</span>
   takes you also to the previous or subsequent node. Press <span class="keycap">Q</span>
   to end the viewing mode. Not every command comes with an info page and vice
   versa.
  </p></section><section class="sect1" id="sec-help-online" data-id-title="Online resources"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">46.4 </span><span class="title-name">Online resources</span></span> <a title="Permalink" class="permalink" href="#sec-help-online">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/help_admin.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For an overview of
   all documentation available for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> check out the
   product-specific documentation Web pages at
   <span class="phrase"><a class="link" href="https://documentation.suse.com/" target="_blank">https://documentation.suse.com/</a></span>.
  </p><p>
   If you are searching for additional product-related information, you can
   also refer to the following Web sites:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.8.2.8.4.1"><span class="term">SUSE technical support</span></dt><dd><p>
      The SUSE Technical Support can be found at
      <a class="link" href="https://www.suse.com/support/" target="_blank">https://www.suse.com/support/</a> if you have questions
      or need solutions for technical problems.
     </p></dd><dt id="id-1.3.8.2.8.4.2"><span class="term">User community</span></dt><dd><p>
      <a class="link" href="https://www.rancher.com/community" target="_blank">SUSE and Rancher Community</a>
     </p></dd><dt id="id-1.3.8.2.8.4.3"><span class="term">SUSE blog</span></dt><dd><p>
      The SUSE blog offers articles, tips, Q and A:
      <a class="link" href="https://www.suse.com/c/blog/" target="_blank">https://www.suse.com/c/blog/</a>
     </p></dd><dt id="id-1.3.8.2.8.4.4"><span class="term">GNOME documentation</span></dt><dd><p>
      Documentation for GNOME users, administrators and developers is
      available at <a class="link" href="https://help.gnome.org/" target="_blank">https://help.gnome.org/</a>.
     </p></dd><dt id="id-1.3.8.2.8.4.5"><span class="term">The Linux documentation project</span></dt><dd><p>
      The Linux Documentation Project (TLDP) is run by a team of volunteers who
      write Linux-related documentation (see
      <a class="link" href="https://tldp.org/" target="_blank">https://tldp.org/</a>). It is a
      comprehensive documentation resource for Linux. The set of documents
      contains tutorials for beginners, but is mainly focused on experienced
      users and professional system administrators. TLDP publishes HOWTOs,
      FAQs and guides (handbooks) under a free license. Parts of the
      documentation from TLDP are also available on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
     </p></dd></dl></div></section></section><section class="chapter" id="cha-adm-support" data-id-title="Gathering system information for support"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">47 </span><span class="title-name">Gathering system information for support</span></span> <a title="Permalink" class="permalink" href="#cha-adm-support">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    For a quick overview of all relevant system information of a machine,
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> offers the
    <code class="systemitem">hostinfo</code> package. It also helps
    system administrators to check for tainted kernels (that are not supported)
    or any third-party packages installed on a machine.
   </p><p>
    In case of problems, a detailed system report may be created with either
    the <code class="command">supportconfig</code> command line tool or the YaST
    <span class="guimenu">Support</span> module. Both collect information about the
    system such as: current kernel version, hardware, installed packages,
    partition setup, and much more. The result is a TAR archive of files. After
    opening a Service Request (SR), you can upload the TAR archive to Global
    Technical Support. It helps to locate the issue you reported and to
    assist you in solving the problem.
   </p><p>
    Additionally, you can analyze the <code class="command">supportconfig</code> output
    for known issues to help resolve problems faster. For this purpose,
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> provides both an appliance and a command line tool for
    <code class="literal">Supportconfig Analysis</code> (SCA).
   </p></div></div></div></div><section class="sect1" id="sec-admsupport-hostinfo" data-id-title="Displaying current system information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">47.1 </span><span class="title-name">Displaying current system information</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-hostinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For a quick and easy overview of all relevant system information when
   logging in to a server, use the package
   <code class="systemitem">hostinfo</code>. After it has been
   installed on a machine, the console displays the following information to
   any <code class="systemitem">root</code> user that logs in to this machine:
  </p><div class="example" id="ex-support-hostinfo" data-id-title="Output of hostinfo when logging in as root"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 47.1: </span><span class="title-name">Output of <code class="command">hostinfo</code> when logging in as <code class="systemitem">root</code> </span></span><a title="Permalink" class="permalink" href="#ex-support-hostinfo">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">Welcome to SUSE Linux Enterprise Server 15 SP2 Snapshot8 (x86_64) - Kernel \r (\l).


Distribution:             SUSE Linux Enterprise Server <span class="productnumber"><span class="phrase">15 SP6</span></span>
Current As Of:            Mon 11 March 2024 10:11:51 AM CET
Hostname:                 localhost
Kernel Version:           6.4.0-150600.9-default
 Architecture:            x86_64
 Installed:               Fri 08 March 2024 04:45:50 PM CET
 Status:                  Not Tainted
Last Installed Package:   Mon 11 March 2024 10:02:13 AM CET
 Patches Needed:          0
 Security:                0
 3rd Party Packages:      6
Network Interfaces
 eth0:                    192.168.2/24 2002:c0a8:20a::/64
Memory
 Total/Free/Avail:        7.4Gi/6.4Gi/6.8Gi (91% Avail)
CPU Load Average:         7 (3%) with 2 CPUs</pre></div></div></div><p>
   In case the output shows a <code class="literal">tainted</code> kernel status, see
   <a class="xref" href="#sec-admsupport-kernel" title="47.6. Support of kernel modules">Section 47.6, “Support of kernel modules”</a> for more details.
  </p></section><section class="sect1" id="sec-admsupport-supportconfig" data-id-title="Collecting system information with supportconfig"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">47.2 </span><span class="title-name">Collecting system information with supportconfig</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-supportconfig">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To create a TAR archive with detailed system information that you can hand
   over to Global Technical Support, use either:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>the command <code class="command">supportconfig</code> or, </p></li><li class="listitem"><p>the YaST <span class="guimenu">Support</span> module.</p></li></ul></div><p>
   The command line tool is provided by the
   package <code class="systemitem">supportutils</code> which is installed by default.
   The YaST <span class="guimenu">Support</span> module is also based on the command
   line tool.
  </p><p>
   Certain packages integrate Supportconfig plug-ins. When Supportconfig is
   executed, all plug-ins are executed as well and create one or more result
   files for the archive. The benefit is that only topics with a specific 
   plug-in are checked. Supportconfig plug-ins are stored in the 
   directory <code class="filename">/usr/lib/supportconfig/plugins/</code>.
  </p><section class="sect2" id="sec-admsupport-supportconfig-sr" data-id-title="Creating a service request number"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.2.1 </span><span class="title-name">Creating a service request number</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-supportconfig-sr">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Supportconfig archives can be generated at any time. However, for
    handing over the Supportconfig data to Global Technical Support, you need
    to generate a service request number first. You need it to upload the
    archive to support.
   </p><p>
    To create a service request, go to
    <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a> and follow the
    instructions on the screen. Write down the service request number.
   </p><div id="id-1.3.8.3.4.6.4" data-id-title="Privacy statement" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Privacy statement</div><p>
     SUSE treats system reports as confidential data. For
     details about our privacy commitment, see <a class="link" href="https://www.suse.com/company/policies/privacy/" target="_blank">https://www.suse.com/company/policies/privacy/</a>.
    </p></div></section><section class="sect2" id="sec-admsupport-supportconfig-upload" data-id-title="Upload targets"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.2.2 </span><span class="title-name">Upload targets</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-supportconfig-upload">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    After having created a service request number, you can upload your
    Supportconfig archives to Global Technical Support as described in
    <a class="xref" href="#pro-admsupport-submit-yast" title="Submitting information to support with YaST">Procedure 47.1, “Submitting information to support with YaST”</a> or
    <a class="xref" href="#pro-admsupport-submit-cli" title="Submitting information to support from command line">Procedure 47.2, “Submitting information to support from command line”</a>. Use one of the following
    upload targets:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     
      North America: FTP <a class="link" href="ftp://support-ftp.us.suse.com/incoming/" target="_blank">ftp://support-ftp.us.suse.com/incoming/</a>
     </p></li><li class="listitem"><p>
      EMEA, Europe, the Middle East and Africa: FTP
      <a class="link" href="ftp://support-ftp.emea.suse.com/incoming" target="_blank">ftp://support-ftp.emea.suse.com/incoming</a>
     </p></li></ul></div><p>
    Alternatively, you can manually attach the TAR archive to your service
    request using the service request URL:
    <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a>.
   </p></section><section class="sect2" id="sec-admsupport-yast" data-id-title="Creating a supportconfig archive with YaST"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.2.3 </span><span class="title-name">Creating a supportconfig archive with YaST</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-yast">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To use YaST to gather your system information, proceed as follows:
    
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Start YaST and open the <span class="guimenu">Support</span> module.
     </p><div class="informalfigure"><div class="mediaobject"><a href="images/yast2_support_main.png"><img src="images/yast2_support_main.png" width="60%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
      Click <span class="guimenu">Create report tarball</span>.
     </p></li><li class="step"><p>
      In the next window, select one of the Supportconfig options from the
      radio button list. <span class="guimenu">Use Custom (Expert) Settings</span> is
      preselected by default. To test the report function first,
      use <span class="guimenu">Only gather a minimum amount of info</span>. For
      additional information on the other options, refer to the
      <code class="command">supportconfig</code> man page.
     </p><p>
      Click <span class="guimenu">Next</span>.
     </p></li><li class="step" id="st-supportconfig-contact"><p>
      Enter your contact information. It is saved in the
      <code class="filename">basic-environment.txt</code> file and included in the
      created archive.
     </p></li><li class="step" id="st-supportconfig-upload-target"><p>
      To submit the archive to Global Technical Support, provide the required <span class="guimenu">Upload
      Information</span>. YaST automatically suggests an
      upload server. To modify it, refer to
      <a class="xref" href="#sec-admsupport-supportconfig-upload" title="47.2.2. Upload targets">Section 47.2.2, “Upload targets”</a> for details of
      which upload servers are available.
     </p><p>
      To submit the archive later, leave the
      <span class="guimenu">Upload Information</span> empty.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Next</span> to start the information collection process.
     </p><div class="informalfigure"><div class="mediaobject"><a href="images/yast2_support_conf.png"><img src="images/yast2_support_conf.png" width="80%" alt="Image" title="Image"/></a></div></div><p>
      After the process is finished, click <span class="guimenu">Next</span>.
     </p></li><li class="step"><p>
      To review the collected data, select the desired file from <span class="guimenu">File
      Name</span> to view its contents in YaST. To remove a file from the
      TAR archive before submitting it to support, use <span class="guimenu">Remove from
      Data</span>. Press <span class="guimenu">Next</span>.
     </p></li><li class="step"><p>
      Save the TAR archive. If you started the YaST module as <code class="systemitem">root</code>
      user, YaST prompts to save the archive to <code class="filename">/var/log</code>
      (otherwise, to your home directory). The file name format is
      <code class="filename">scc_<em class="replaceable">HOST</em>_<em class="replaceable">DATE</em>_<em class="replaceable">TIME</em>.tbz</code>.
     </p></li><li class="step"><p>
      To upload the archive to support directly, make sure <span class="guimenu">Upload log
      files tarball to URL</span> is activated. The <span class="guimenu">Upload
      Target</span> shown here is the one that YaST suggests in <a class="xref" href="#st-supportconfig-upload-target" title="Step 5">Step 5</a>. To modify the upload target,
      check which upload servers are available in <a class="xref" href="#sec-admsupport-supportconfig-upload" title="47.2.2. Upload targets">Section 47.2.2, “Upload targets”</a>.
     </p></li><li class="step"><p>
      To skip the upload, deactivate <span class="guimenu">Upload log files
      tarball to URL</span>.
     </p></li><li class="step"><p>
      Confirm the changes to close the YaST module.
     </p></li></ol></div></div></section><section class="sect2" id="sec-admsupport-cli" data-id-title="Creating a supportconfig archive from command line"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.2.4 </span><span class="title-name">Creating a supportconfig archive from command line</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-cli">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The following procedure shows how to create a Supportconfig archive, but
    without submitting it to support directly. For uploading it, you need to
    run the command with certain options as described in
    <a class="xref" href="#pro-admsupport-submit-cli" title="Submitting information to support from command line">Procedure 47.2, “Submitting information to support from command line”</a>.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Open a shell and become <code class="systemitem">root</code>.
     </p></li><li class="step"><p>
      Run <code class="command">supportconfig</code>. It is enough to
      run this tool without any options. However, the most common options
      are displayed in the following list:
     </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.8.3.4.9.3.2.2.1"><span class="term"><code class="option">-E <em class="replaceable">MAIL</em></code>, </span><span class="term"><code class="option">-N <em class="replaceable">NAME</em></code>, </span><span class="term"><code class="option">-O <em class="replaceable">COMPANY</em></code>, </span><span class="term"><code class="option">-P <em class="replaceable">PHONE</em></code></span></dt><dd><p>
         Sets your contact data: e-mail address (<code class="option">-E</code>), company
         name (<code class="option">-O</code>), your name (<code class="option">-N</code>), and
         your phone number (<code class="option">-P</code>).
        </p></dd><dt id="id-1.3.8.3.4.9.3.2.2.2"><span class="term"><code class="option">-i <em class="replaceable">KEYWORDS</em></code>, </span><span class="term"><code class="option">-F</code></span></dt><dd><p>
         Limits the features to check. The placeholder <em class="replaceable">KEYWORDS</em>
         is a comma separated list of case-sensitive keywords. Get a list
         of all keywords with <code class="command">supportconfig -F</code>.
        </p></dd><dt id="id-1.3.8.3.4.9.3.2.2.3"><span class="term"><code class="option">-r <em class="replaceable">SRNUMBER</em></code></span></dt><dd><p>
         Defines your service request number when uploading the generated
         TAR archive.
        </p></dd></dl></div></li><li class="step"><p>
      Wait for the tool to complete the operation.
     </p></li><li class="step"><p>
      The default archive location is <code class="filename">/var/log</code>, with the
      file name format being
      <code class="filename">scc_<em class="replaceable">HOST</em>_<em class="replaceable">DATE</em>_<em class="replaceable">TIME</em>.tbz</code>
     </p></li></ol></div></div></section><section class="sect2" id="sec-admsupport-supportconfig-log" data-id-title="Understanding the output of supportconfig"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.2.5 </span><span class="title-name">Understanding the output of <code class="command">supportconfig</code></span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-supportconfig-log">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Whether you run <code class="command">supportconfig</code> through YaST or directly,
    the script gives you a summary of what it did.
   </p><div class="verbatim-wrap"><pre class="screen">                     Support Utilities - Supportconfig
                          Script Version: 3.0-98 
                          Script Date: 2017 06 01
[...]
Gathering system information
  Data Directory:    /var/log/scc_d251_180201_1525 <span class="callout" id="co-admsupport-script-datadir">1</span>

  Basic Server Health Check...                 Done <span class="callout" id="co-admsupport-script-done">2</span>
  RPM Database...                              Done <a class="xref" href="#co-admsupport-script-done"><span class="callout">2</span></a>
  Basic Environment...                         Done <a class="xref" href="#co-admsupport-script-done"><span class="callout">2</span></a>
  System Modules...                            Done <a class="xref" href="#co-admsupport-script-done"><span class="callout">2</span></a>
[...]
  File System List...                          Skipped <span class="callout" id="co-admsupport-script-skipped">3</span>
[...]
  Command History...                           Excluded <span class="callout" id="co-admsupport-script-excluded">4</span>
[...]
  Supportconfig Plugins:                       1 <span class="callout" id="co-admsupport-script-plugin">5</span>
    Plugin: pstree...                          Done
[...]
Creating Tar Ball

==[ DONE ]===================================================================
  Log file tar ball: /var/log/scc_d251_180201_1525.txz <span class="callout" id="co-admsupport-script-archive">6</span>
  Log file size:     732K
  Log file md5sum:   bf23e0e15e9382c49f92cbce46000d8b
=============================================================================</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-datadir"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      The temporary data directory to store the results. This directory is
      archived as tar file, see <a class="xref" href="#co-admsupport-script-archive"><span class="callout">6</span></a>.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-done"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      The feature was enabled (either by default or selected manually) and
      executed successfully. The result is stored in a file (see <a class="xref" href="#tab-admsupport-features-and-filenames" title="Comparison of features and file names in the TAR archive">Table 47.1, “Comparison of features and file names in the TAR archive”</a>).
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-skipped"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      The feature was skipped because files of one or more RPM packages
      were changed.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-excluded"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      The feature was excluded because it was deselected via the <code class="option">-x</code>
      option.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-plugin"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      The script found one plug-in and executes the plug-in
      <code class="command">pstree</code>. The plug-in was found in the directory
      <code class="filename">/usr/lib/supportconfig/plugins/</code>.
      See the man page for details.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-admsupport-script-archive"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      The tar file name of the archive, by default compressed with <code class="command">xz</code>.
     </p></td></tr></table></div></section><section class="sect2" id="sec-admsupport-options" data-id-title="Common supportconfig options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.2.6 </span><span class="title-name">Common supportconfig options</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-options">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The <code class="command">supportconfig</code> utility is usually called without any
    options. Display a list of all options with
    <code class="command">supportconfig</code> <code class="option">-h</code> or refer to the man
    page. The following list gives a brief overview of common use cases:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.8.3.4.11.3.1"><span class="term">Reducing the size of the information being gathered</span></dt><dd><p>
       Use the minimal option (<code class="option">-m</code>):
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -m</pre></div></dd><dt id="id-1.3.8.3.4.11.3.2"><span class="term">Limiting the information to a specific topic</span></dt><dd><p>
       If you have already localized a problem  that relates
       to a specific area or feature set only, you should limit the collected
       information to the specific area for the next
       <code class="command">supportconfig</code> run. For example, if you detected
       problems with LVM and want to test a recent change that you did to the
       LVM configuration. In that case it makes sense to gather the minimum
       Supportconfig information around LVM only:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -i LVM</pre></div><p>
       Additional keywords can be separated through commas. For example,
       an additional disk test:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -i LVM,DISK</pre></div><p>
       For a complete list of feature keywords that you can use for limiting
       the collected information to a specific area, run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -F</pre></div></dd><dt id="id-1.3.8.3.4.11.3.3"><span class="term">Including additional contact information in the output:</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -E tux@example.org -N "Tux Penguin" -O "Penguin Inc." ...</pre></div><p>
       (all in one line)
      </p></dd><dt id="id-1.3.8.3.4.11.3.4"><span class="term">Collecting already rotated log files</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -l</pre></div><p>
       This is especially useful in high logging environments or after a kernel
       crash when syslog rotates the log files after a reboot.
      </p></dd></dl></div></section><section class="sect2" id="sec-admsupport-log" data-id-title="Overview of the archive content"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.2.7 </span><span class="title-name">Overview of the archive content</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-log">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The TAR archive contains all the results from the features.
    The set of features can be limited through the <code class="option">-i</code>
    option (see <a class="xref" href="#sec-admsupport-options" title="47.2.6. Common supportconfig options">Section 47.2.6, “Common supportconfig options”</a>).
   </p><p>
    To list the content of the archive, use the following <code class="command">tar</code>
    command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">tar</code> xf /var/log/scc_earth_180131_1545.tbz</pre></div><p>
    The following file names are always available inside the TAR archive:
   </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Minimum files in archive </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.3.4.12.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.8.3.4.12.6.2"><span class="term"><code class="filename">basic-environment.txt</code></span></dt><dd><p>Contains the date when this script was executed and system information
       like version of the distribution, hypervisor information, and more.
      </p></dd><dt id="id-1.3.8.3.4.12.6.3"><span class="term"><code class="filename">basic-health-check.txt</code></span></dt><dd><p>
       Contains basic health checks like uptime, virtual memory statistics,
       free memory and hard disk, checks for zombie processes, and more.
      </p></dd><dt id="id-1.3.8.3.4.12.6.4"><span class="term"><code class="filename">hardware.txt</code></span></dt><dd><p>
       Contains basic hardware checks like information about the CPU architecture,
       list of all connected hardware, interrupts, I/O ports, kernel boot messages,
       and more.
      </p></dd><dt id="id-1.3.8.3.4.12.6.5"><span class="term"><code class="filename">messages.txt</code></span></dt><dd><p>
       Contains log messages from the system journal.
      </p></dd><dt id="id-1.3.8.3.4.12.6.6"><span class="term"><code class="filename">rpm.txt</code></span></dt><dd><p>Contains a list of all installed RPM packages, the name,
      where they are coming from, and their versions.</p></dd><dt id="id-1.3.8.3.4.12.6.7"><span class="term"><code class="filename">summary.xml</code></span></dt><dd><p>Contains information in XML format like distribution,
      the version, and product specific fragments.</p></dd><dt id="id-1.3.8.3.4.12.6.8"><span class="term"><code class="filename">supportconfig.txt</code></span></dt><dd><p>
       Contains information about the <code class="command">supportconfig</code> script
       itself.
      </p></dd><dt id="id-1.3.8.3.4.12.6.9"><span class="term"><code class="filename">y2log.txt</code></span></dt><dd><p>
       Contains YaST specific information like specific packages, configuration
       files, and log files.
      </p></dd></dl></div><p>
    <a class="xref" href="#tab-admsupport-features-and-filenames" title="Comparison of features and file names in the TAR archive">Table 47.1, “Comparison of features and file names in the TAR archive”</a> lists all available
    features and their file names. Further service packs can extend the list,
    as can plug-ins.
   </p><div class="table" id="tab-admsupport-features-and-filenames" data-id-title="Comparison of features and file names in the TAR archive"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 47.1: </span><span class="title-name">Comparison of features and file names in the TAR archive </span></span><a title="Permalink" class="permalink" href="#tab-admsupport-features-and-filenames">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Feature</th><th style="border-bottom: 1px solid ; ">File name</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">APPARMOR</em></td><td style="border-bottom: 1px solid ; "><code class="filename">security-apparmor.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">AUDIT</em></td><td style="border-bottom: 1px solid ; "><code class="filename">security-audit.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">AUTOFS</em></td><td style="border-bottom: 1px solid ; "><code class="filename">fs-autofs.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">BOOT</em></td><td style="border-bottom: 1px solid ; "><code class="filename">boot.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">BTRFS</em></td><td style="border-bottom: 1px solid ; "><code class="filename">fs-btrfs.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DAEMONS</em></td><td style="border-bottom: 1px solid ; "><code class="filename">systemd.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">CIMOM</em></td><td style="border-bottom: 1px solid ; "><code class="filename">cimom.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">CRASH</em></td><td style="border-bottom: 1px solid ; "><code class="filename">crash.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">CRON</em></td><td style="border-bottom: 1px solid ; "><code class="filename">cron.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DHCP</em></td><td style="border-bottom: 1px solid ; "><code class="filename">dhcp.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DISK</em></td><td style="border-bottom: 1px solid ; "><code class="filename">fs-diskio.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DNS</em></td><td style="border-bottom: 1px solid ; "><code class="filename">dns.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DOCKER</em></td><td style="border-bottom: 1px solid ; "><code class="filename">docker.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">DRBD</em></td><td style="border-bottom: 1px solid ; "><code class="filename">drbd.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">ENV</em></td><td style="border-bottom: 1px solid ; "><code class="filename">env.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">ETC</em></td><td style="border-bottom: 1px solid ; "><code class="filename">etc.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">HA</em></td><td style="border-bottom: 1px solid ; "><code class="filename">ha.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">HAPROXY</em></td><td style="border-bottom: 1px solid ; "><code class="filename">haproxy.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">HISTORY</em></td><td style="border-bottom: 1px solid ; "><code class="filename">shell_history.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">IB</em></td><td style="border-bottom: 1px solid ; "><code class="filename">ib.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">IMAN</em></td><td style="border-bottom: 1px solid ; "><code class="filename">novell-iman.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">ISCSI</em></td><td style="border-bottom: 1px solid ; "><code class="filename">fs-iscsi.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">LDAP</em></td><td style="border-bottom: 1px solid ; "><code class="filename">ldap.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">LIVEPATCH</em></td><td style="border-bottom: 1px solid ; "><code class="filename">kernel-livepatch.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">LVM</em></td><td style="border-bottom: 1px solid ; "><code class="filename">lvm.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">MEM</em></td><td style="border-bottom: 1px solid ; "><code class="filename">memory.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">MOD</em></td><td style="border-bottom: 1px solid ; "><code class="filename">modules.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">MPIO</em></td><td style="border-bottom: 1px solid ; "><code class="filename">mpio.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">NET</em></td><td style="border-bottom: 1px solid ; "><code class="filename">network-*.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">NFS</em></td><td style="border-bottom: 1px solid ; "><code class="filename">nfs.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">NTP</em></td><td style="border-bottom: 1px solid ; "><code class="filename">ntp.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">NVME</em></td><td style="border-bottom: 1px solid ; "><code class="filename">nvme.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">OCFS2</em></td><td style="border-bottom: 1px solid ; "><code class="filename">ocfs2.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">OFILES</em></td><td style="border-bottom: 1px solid ; "><code class="filename">open-files.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">PRINT</em></td><td style="border-bottom: 1px solid ; "><code class="filename">print.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">PROC</em></td><td style="border-bottom: 1px solid ; "><code class="filename">proc.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SAR</em></td><td style="border-bottom: 1px solid ; "><code class="filename">sar.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SLERT</em></td><td style="border-bottom: 1px solid ; "><code class="filename">slert.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SLP</em></td><td style="border-bottom: 1px solid ; "><code class="filename">slp.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SMT</em></td><td style="border-bottom: 1px solid ; "><code class="filename">smt.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SMART</em></td><td style="border-bottom: 1px solid ; "><code class="filename">fs-smartmon.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SMB</em></td><td style="border-bottom: 1px solid ; "><code class="filename">samba.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SRAID</em></td><td style="border-bottom: 1px solid ; "><code class="filename">fs-softraid.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SSH</em></td><td style="border-bottom: 1px solid ; "><code class="filename">ssh.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SSSD</em></td><td style="border-bottom: 1px solid ; "><code class="filename">sssd.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SYSCONFIG</em></td><td style="border-bottom: 1px solid ; "><code class="filename">sysconfig.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">SYSFS</em></td><td style="border-bottom: 1px solid ; "><code class="filename">sysfs.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">TRANSACTIONAL</em></td><td style="border-bottom: 1px solid ; "><code class="filename">transactional-update.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">TUNED</em></td><td style="border-bottom: 1px solid ; "><code class="filename">tuned.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">UDEV</em></td><td style="border-bottom: 1px solid ; "><code class="filename">udev.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">UFILES</em></td><td style="border-bottom: 1px solid ; "><code class="filename">fs-files-additional.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">UP</em></td><td style="border-bottom: 1px solid ; "><code class="filename">updates.txt</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><em class="parameter">WEB</em></td><td style="border-bottom: 1px solid ; "><code class="filename">web.txt</code></td></tr><tr><td style="border-right: 1px solid ; "><em class="parameter">X</em></td><td><code class="filename">x.txt</code></td></tr></tbody></table></div></div></section></section><section class="sect1" id="sec-admsupport-submit" data-id-title="Submitting information to Global Technical Support"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">47.3 </span><span class="title-name">Submitting information to Global Technical Support</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-submit">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Use the YaST <span class="guimenu">Support</span> module or the
   <code class="command">supportconfig</code> command line utility to submit system
   information to the Global Technical Support. When you experience a server
   issue and want the support's assistance, you will need to open a service
   request first. For details, see
   <a class="xref" href="#sec-admsupport-supportconfig-sr" title="47.2.1. Creating a service request number">Section 47.2.1, “Creating a service request number”</a>.
  </p><p>
   The following examples use <em class="replaceable">12345678901</em> as a
   placeholder for your service request number. Replace
   <em class="replaceable">12345678901</em> with the service request number you
   created in <a class="xref" href="#sec-admsupport-supportconfig-sr" title="47.2.1. Creating a service request number">Section 47.2.1, “Creating a service request number”</a>.
  </p><div class="procedure" id="pro-admsupport-submit-yast" data-id-title="Submitting information to support with YaST"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 47.1: </span><span class="title-name">Submitting information to support with YaST </span></span><a title="Permalink" class="permalink" href="#pro-admsupport-submit-yast">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
    The following procedure assumes that you have already created a
    Supportconfig archive, but have not uploaded it yet. Make sure to have
    included your contact information in the archive as described in
    <a class="xref" href="#sec-admsupport-yast" title="47.2.3. Creating a supportconfig archive with YaST">Section 47.2.3, “Creating a supportconfig archive with YaST”</a>,
    <a class="xref" href="#st-supportconfig-contact" title="Step 4">Step 4</a>.
    For instructions on how to generate and submit a Supportconfig archive in
    one go, see <a class="xref" href="#sec-admsupport-yast" title="47.2.3. Creating a supportconfig archive with YaST">Section 47.2.3, “Creating a supportconfig archive with YaST”</a>.
   </p><ol class="procedure" type="1"><li class="step"><p>
     Start YaST and open the <span class="guimenu">Support</span> module.
    </p></li><li class="step"><p>
     Click <span class="guimenu">Upload</span>.
    </p></li><li class="step"><p>
     In <span class="guimenu">Package with log files</span> specify the path to the
     existing Supportconfig archive or <span class="guimenu">Browse</span> for it.
    </p></li><li class="step" id="st-supportcfg-submit-upltarget"><p>
     YaST automatically proposes an upload server. To modify it,
     refer to <a class="xref" href="#sec-admsupport-supportconfig-upload" title="47.2.2. Upload targets">Section 47.2.2, “Upload targets”</a> for details
     of which upload servers are available.
    </p><div class="informalfigure"><div class="mediaobject"><a href="images/yast2_support_conf_upload.png"><img src="images/yast2_support_conf_upload.png" width="60%" alt="Image" title="Image"/></a></div></div><p>
     
     Proceed with <span class="guimenu">Next</span>.
    </p></li><li class="step"><p>
     Click <span class="guimenu">Finish</span>.
    </p></li></ol></div></div><div class="procedure" id="pro-admsupport-submit-cli" data-id-title="Submitting information to support from command line"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 47.2: </span><span class="title-name">Submitting information to support from command line </span></span><a title="Permalink" class="permalink" href="#pro-admsupport-submit-cli">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
    The following procedure assumes that you have already created a
    Supportconfig archive, but have not uploaded it yet. For instructions on
    how to generate and submit a Supportconfig archive in one go, see
    <a class="xref" href="#sec-admsupport-yast" title="47.2.3. Creating a supportconfig archive with YaST">Section 47.2.3, “Creating a supportconfig archive with YaST”</a>.
   </p><ol class="procedure" type="1"><li class="step"><p>
     Servers with Internet connectivity:
    </p><ol type="a" class="substeps"><li class="step"><p>
       To use the default upload target, run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -ur <em class="replaceable">12345678901</em></pre></div></li><li class="step"><p>
       For the secure upload target, use the following:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -ar <em class="replaceable">12345678901</em></pre></div></li></ol></li><li class="step"><p>
     Servers <span class="emphasis"><em>without</em></span> Internet connectivity
    </p><ol type="a" class="substeps"><li class="step"><p>
       Run the following:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -r <em class="replaceable">12345678901</em></pre></div></li><li class="step"><p>
       Manually upload the
       <code class="filename">/var/log/scc_<em class="replaceable">SR12345678901</em>*tbz</code>
       archive to one of our FTP servers. Which one to use depends on your
       location in the world. For an overview, see
       <a class="xref" href="#sec-admsupport-supportconfig-upload" title="47.2.2. Upload targets">Section 47.2.2, “Upload targets”</a>.
      </p></li></ol></li><li class="step"><p>
     After the TAR archive arrives in the incoming directory of our FTP server,
     it becomes automatically attached to your service request.
    </p></li></ol></div></div></section><section class="sect1" id="sec-admsupport-sca" data-id-title="Analyzing system information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">47.4 </span><span class="title-name">Analyzing system information</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   System reports created with <code class="command">supportconfig</code> can be analyzed
   for known issues to help resolve problems faster. For this purpose,
   <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> provides both an appliance and a command line tool for
   <code class="literal">Supportconfig Analysis</code> (SCA). The SCA appliance is a
   server-side tool which is non-interactive. The SCA tool
   (<code class="command">scatool</code> provided by the package
   <span class="package">sca-server-report</span>) runs on the client-side and is
   executed from command line. Both tools analyze Supportconfig archives from
   affected servers. The initial server analysis takes place on the SCA
   appliance or the workstation on which <code class="command">scatool</code> is
   running. No analysis cycles happen on the production server.
  </p><p>
   Both the appliance and the command line tool additionally need
   product-specific patterns that enable them to analyze the Supportconfig
   output for the associated products. Each pattern is a script that parses and
   evaluates a Supportconfig archive for one known issue. The patterns are
   available as RPM packages.
  </p><p>
   You can also develop your own patterns as briefly described in
   <a class="xref" href="#sec-admsupport-sca-patterns" title="47.4.3. Developing custom analysis patterns">Section 47.4.3, “Developing custom analysis patterns”</a>.
  </p><section class="sect2" id="sec-admsupport-sca-tool" data-id-title="SCA command line tool"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.4.1 </span><span class="title-name">SCA command line tool</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-tool">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The SCA command line tool lets you analyze a local machine using both
    <code class="command">supportconfig</code> and the analysis patterns for the specific
    product that is installed on the local machine. The tool creates an HTML
    report showing its analysis results. For an example, see
    <a class="xref" href="#fig-scatool-html" title="HTML report generated by SCA tool">Figure 47.1, “HTML report generated by SCA tool”</a>.
   </p><div class="figure" id="fig-scatool-html"><div class="figure-contents"><div class="mediaobject"><a href="images/sca_tool_report_html.png"><img src="images/sca_tool_report_html.png" width="100%" alt="HTML report generated by SCA tool" title="HTML report generated by SCA tool"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 47.1: </span><span class="title-name">HTML report generated by SCA tool </span></span><a title="Permalink" class="permalink" href="#fig-scatool-html">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div><p>
    The <code class="command">scatool</code> command is provided by the
    <span class="package">sca-server-report</span> package. It is
    not installed by default. Additionally, you need the
    <span class="package">sca-patterns-base</span> package and any
    of the product-specific
    <span class="package">sca-patterns-*</span> packages that
    matches the product installed on the machine where you want to run the
    <code class="command">scatool</code> command.
   </p><p>
    Execute the <code class="command">scatool</code> command either as <code class="systemitem">root</code> user or
    with <code class="command">sudo</code>. When calling the SCA tool, either
    analyze an existing <code class="command">supportconfig</code> TAR archive or
    let it generate and analyze a new archive in one go. The tool also provides
    an interactive console with tab completion. It is possible to run
    <code class="command">supportconfig</code> on an external machine and to execute the
    subsequent analysis on the local machine.
   </p><p>
    Find a few example commands below:
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.8.3.6.5.7.1"><span class="term"><code class="command">sudo scatool</code><code class="option">-s</code>
     </span></dt><dd><p>
       Calls <code class="command">supportconfig</code> and generates a new Supportconfig
       archive on the local machine. Analyzes the archive for known issues by
       applying the SCA analysis patterns that match the installed product.
       Displays the path to the HTML report that is generated from the results
       of the analysis. It is written to the same directory where the
       Supportconfig archive can be found.
      </p></dd><dt id="id-1.3.8.3.6.5.7.2"><span class="term"><code class="command">sudo scatool </code><code class="option">-s</code> <code class="option">-o</code> <em class="replaceable">/opt/sca/reports/</em> 
     </span></dt><dd><p>
       Same as <code class="command">sudo scatool</code> <code class="option">-s</code>, only that
       the HTML report is written to the path specified with
       <code class="option">-o</code>.
      </p></dd><dt id="id-1.3.8.3.6.5.7.3"><span class="term"><code class="command">sudo scatool </code><code class="option">-a</code> <em class="replaceable">PATH_TO_TARBALL_OR_DIR</em> 
     </span></dt><dd><p>
       Analyzes the specified Supportconfig archive file (or the specified
       directory to where the Supportconfig archive has been extracted). The
       generated HTML report is saved in the same location as the Supportconfig
       archive or directory.
      </p></dd><dt id="id-1.3.8.3.6.5.7.4"><span class="term"><code class="command">sudo scatool </code><code class="option">-a</code> <em class="replaceable">SLES_SERVER.COMPANY.COM</em> 
     </span></dt><dd><p>
       Establishes an SSH connection to an external server
       <em class="replaceable">SLES_SERVER.COMPANY.COM</em> and runs
       <code class="command">supportconfig</code> on the server. The Supportconfig
       archive is then copied back to the local machine and is analyzed there.
       The generated HTML report is saved to the default
       <code class="filename">/var/log</code> directory. (Only the Supportconfig archive
       is created on <em class="replaceable">SLES_SERVER.COMPANY.COM</em>).
      </p></dd><dt id="id-1.3.8.3.6.5.7.5"><span class="term"><code class="command">sudo scatool</code><code class="option">-c</code>
     </span></dt><dd><p>
       Starts the interactive console for <code class="command">scatool</code>. Press
       <span class="keycap">→|</span> twice to see the available commands.
      </p></dd></dl></div><p>
    For further options and information, run <code class="command">sudo scatool -h</code>
    or see the <code class="command">scatool</code> man page.
   </p></section><section class="sect2" id="sec-admsupport-sca-appliance" data-id-title="SCA appliance"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.4.2 </span><span class="title-name">SCA appliance</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you decide to use the SCA appliance for analyzing the Supportconfig
    archives, configure a dedicated server (or virtual machine) as
    the SCA appliance server. The SCA appliance server can then be used to
    analyze Supportconfig archives from all machines in your enterprise running
    SUSE Linux Enterprise Server or SUSE Linux Enterprise Desktop. You can simply upload Supportconfig archives to the
    appliance server for analysis. Interaction is not required. In a MariaDB
    database, the SCA appliance keeps track of all Supportconfig archives that
    have been analyzed . You can read the SCA reports directly from the
    appliance Web interface. Alternatively, you can have the appliance send the
    HTML report to any administrative user via e-mail. For details, see
    <a class="xref" href="#sec-admsupport-sca-appliance-config-mail" title="47.4.2.5.4. Sending SCA reports via e-mail">Section 47.4.2.5.4, “Sending SCA reports via e-mail”</a>.
   </p><section class="sect3" id="sec-admsupport-sca-appliance-installquick" data-id-title="Installation quick start"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">47.4.2.1 </span><span class="title-name">Installation quick start</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-installquick">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     To install and set up the SCA appliance in a fast way from the
     command line, follow the instructions here. The procedure is intended for
     experts and focuses on the bare installation and setup commands. For more
     information, refer to the more detailed description in
     <a class="xref" href="#sec-admsupport-sca-appliance-pre" title="47.4.2.2. Prerequisites">Section 47.4.2.2, “Prerequisites”</a> to
     <a class="xref" href="#sec-admsupport-sca-appliance-install" title="47.4.2.3. Installation and basic setup">Section 47.4.2.3, “Installation and basic setup”</a>.
    </p><div class="itemizedlist"><div class="title-container"><div class="itemizedlist-title-wrap"><div class="itemizedlist-title"><span class="title-number-name"><span class="title-name">Prerequisites </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.3.6.6.3.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><ul class="itemizedlist"><li class="listitem"><p>
       Web and LAMP Pattern
      </p></li><li class="listitem"><p>
       Web and Scripting Module (you must register the machine to be able to
       select this module).
      </p></li></ul></div><div id="id-1.3.8.3.6.6.3.4" data-id-title="root privileges required" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: <code class="systemitem">root</code> privileges required</div><p>
      All commands in the following procedure must be run as <code class="systemitem">root</code>.
     </p></div><div class="procedure" id="id-1.3.8.3.6.6.3.5" data-id-title="Installation using anonymous FTP for upload"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 47.3: </span><span class="title-name">Installation using anonymous FTP for upload </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.3.6.6.3.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
      After the appliance is set up and running, no more manual interaction is
      required. This way of setting up the appliance is therefore ideal for
      using cron jobs to create and upload Supportconfig archives.
     </p><ol class="procedure" type="1"><li class="step"><p>
       On the machine on which to install the appliance, log in to a console
       and execute the following commands (make sure to accept the recommended packages):
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install sca-appliance-* sca-patterns-* \
vsftpd yast2 yast2-ftp-server
<code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl enable apache2
<code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start apache2
<code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl enable vsftpd
<code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start vsftpd
<code class="prompt user">&gt; </code><code class="command">sudo</code> yast ftp-server</pre></div></li><li class="step"><p>
       In YaST FTP Server, select <span class="guimenu">Authentication</span> › <span class="guimenu">Enable Upload</span> › <span class="guimenu">Anonymous Can Upload</span> › <span class="guimenu">Finish</span> › <span class="guimenu">Yes</span> to <span class="guimenu">Create
       /srv/ftp/upload</span>.
      </p></li><li class="step"><p>
       Execute the following commands:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl enable mysql
<code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start mysql
<code class="prompt user">&gt; </code><code class="command">sudo</code> mysql_secure_installation
<code class="prompt user">&gt; </code><code class="command">sudo</code> setup-sca -f</pre></div><p>
       The mysql_secure_installation will create a MariaDB <code class="systemitem">root</code> password.
      </p></li></ol></div></div><div class="procedure" id="id-1.3.8.3.6.6.3.6" data-id-title="Installation using SCP/tmp for upload"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 47.4: </span><span class="title-name">Installation using SCP/tmp for upload </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.3.6.6.3.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
      This way of setting up the appliance requires manual interaction when
      typing the SSH password.
     </p><ol class="procedure" type="1"><li class="step"><p>
       On the machine on which to install the appliance, log in to a console.
      </p></li><li class="step"><p>
       Execute the following commands:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install sca-appliance-* sca-patterns-*
<code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl enable apache2
<code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start apache2
<code class="prompt user">&gt; </code><code class="command">sudo</code> sudo systemctl enable mysql
<code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start mysql
<code class="prompt user">&gt; </code><code class="command">sudo</code> mysql_secure_installation
<code class="prompt user">&gt; </code><code class="command">sudo</code> setup-sca</pre></div></li></ol></div></div></section><section class="sect3" id="sec-admsupport-sca-appliance-pre" data-id-title="Prerequisites"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">47.4.2.2 </span><span class="title-name">Prerequisites</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-pre">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     To run an SCA appliance server, you need the following prerequisites:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       All <code class="systemitem">sca-appliance-*</code> packages.
      </p></li><li class="listitem"><p>
       The <code class="systemitem">sca-patterns-base</code> package.
       Additionally, any of the product-specific
       <code class="systemitem">sca-patterns-*</code> for the type of
       Supportconfig archives that you want to analyze with the appliance.
      </p></li><li class="listitem"><p>
       Apache
      </p></li><li class="listitem"><p>
       PHP
      </p></li><li class="listitem"><p>
       MariaDB
      </p></li><li class="listitem"><p>
       anonymous FTP server (optional)
      </p></li></ul></div></section><section class="sect3" id="sec-admsupport-sca-appliance-install" data-id-title="Installation and basic setup"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">47.4.2.3 </span><span class="title-name">Installation and basic setup</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-install">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     As listed in <a class="xref" href="#sec-admsupport-sca-appliance-pre" title="47.4.2.2. Prerequisites">Section 47.4.2.2, “Prerequisites”</a>, the SCA
     appliance has several dependencies on other packages. Therefore, you need
     to take preparatory steps before installing and setting up the SCA appliance
     server:
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       For Apache and MariaDB, install the <code class="systemitem">Web</code> and
       <code class="systemitem">LAMP</code> installation patterns.
      </p></li><li class="step"><p>
       Set up Apache, MariaDB, and optionally an anonymous FTP server.
       <span class="phrase"> For more information, see
       <a class="xref" href="#cha-apache2" title="Chapter 42. The Apache HTTP server">Chapter 42, <em>The Apache HTTP server</em></a> and <a class="xref" href="#cha-ftp" title="Chapter 43. Setting up an FTP server with YaST">Chapter 43, <em>Setting up an FTP server with YaST</em></a>. </span>
      </p></li><li class="step"><p>
       Configure Apache and MariaDB to start at boot time:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl enable apache2 mysql</pre></div></li><li class="step"><p>
       Start both services:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl start apache2 mysql</pre></div></li></ol></div></div><p>
     Now you can install the SCA appliance and set it up as described in
     <a class="xref" href="#pro-sca-appl-install" title="Installing and configuring the SCA appliance">Procedure 47.5, “Installing and configuring the SCA appliance”</a>.
    </p><div class="procedure" id="pro-sca-appl-install" data-id-title="Installing and configuring the SCA appliance"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 47.5: </span><span class="title-name">Installing and configuring the SCA appliance </span></span><a title="Permalink" class="permalink" href="#pro-sca-appl-install">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
      After installing the packages, use the <code class="command">setup-sca</code>
      script for the basic configuration of the MariaDB administration and
      report database that is used by the SCA appliance.
     </p><p>
      It can be used to configure the following options you have for uploading
      the Supportconfig archives from your machines to the SCA appliance:
     </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        <code class="command">scp</code>
       </p></li><li class="listitem"><p>
        anonymous FTP server
       </p></li></ul></div><ol class="procedure" type="1"><li class="step"><p>
       Install the appliance and the SCA base-pattern library:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install sca-appliance-* sca-patterns-base</pre></div></li><li class="step"><p>
       Additionally, install the pattern packages for the types of
       Supportconfig archives you want to analyze. For example, if you have
       SUSE Linux Enterprise Server 12 and SUSE Linux Enterprise Server 15 servers in your environment, install both the
       <code class="systemitem">sca-patterns-sle12</code> and
       <code class="systemitem">sca-patterns-sle15</code> packages.
      </p><p>
       To install all available patterns:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper install sca-patterns-*</pre></div></li><li class="step"><p>
       For basic setup of the SCA appliance, use the
       <code class="command">setup-sca</code> script. How to call it depends on how you
       want to upload the Supportconfig archives to the SCA appliance server:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         If you have configured an anonymous FTP server that uses the
         <code class="filename">/srv/ftp/upload</code> directory, execute the setup
         script with the <code class="option">-f</code> option. Follow the instructions
         on the screen:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> setup-sca -f</pre></div><div id="id-1.3.8.3.6.6.5.5.7.2.1.3" data-id-title="FTP server using another directory" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: FTP server using another directory</div><p>
          If your FTP server uses another directory than
          <code class="filename">/srv/ftp/upload</code>, adjust the following
          configuration files first to make them point to the correct
          directory: <code class="filename">/etc/sca/sdagent.conf</code> and
          <code class="filename">/etc/sca/sdbroker.conf</code> .
         </p></div></li><li class="listitem"><p>
         To upload Supportconfig files to the
         <code class="filename">/tmp</code> directory of the SCA appliance server via
         <code class="command">scp</code>, call the setup script without any parameters.
         Follow the instructions on the screen:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> setup-sca</pre></div></li></ul></div><p>
       The setup script runs a few checks regarding its requirements and
       configures the needed components. It will prompt you for two passwords:
       the MySQL <code class="systemitem">root</code> password of the MariaDB that you have set up, and a
       Web user password with which to log in to the Web interface of the SCA
       appliance.
      </p></li><li class="step"><p>
       Enter the existing MariaDB <code class="systemitem">root</code> password. It will allow the SCA
       appliance to connect to the MariaDB.
      </p></li><li class="step"><p>
       Define a password for the Web user. It will be written to
       <code class="filename">/srv/www/htdocs/sca/web-config.php</code> and will be set
       as the password for the user
       <code class="systemitem">scdiag</code>. Both user name and
       password can be changed at any time later, see
       <a class="xref" href="#sec-admsupport-sca-appliance-config-passwd" title="47.4.2.5.1. Password for the Web interface">Section 47.4.2.5.1, “Password for the Web interface”</a>.
      </p></li></ol></div></div><p>
     After successful installation and setup, the SCA appliance is ready for
     use, see <a class="xref" href="#sec-admsupport-sca-appliance-use" title="47.4.2.4. Using the SCA appliance">Section 47.4.2.4, “Using the SCA appliance”</a>. However, you
     should modify options such as changing the password for the Web
     interface, changing the source for the SCA pattern updates, enabling
     archiving mode or configuring e-mail notifications. For details on that,
     see <a class="xref" href="#sec-admsupport-sca-appliance-config" title="47.4.2.5. Customizing the SCA appliance">Section 47.4.2.5, “Customizing the SCA appliance”</a>.
    </p><div id="id-1.3.8.3.6.6.5.7" data-id-title="Data protection" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Data protection</div><p>
      As the reports on the SCA appliance server contain security-relevant
      information, make sure to protect the data on the SCA appliance server
      against unauthorized access.
     </p></div></section><section class="sect3" id="sec-admsupport-sca-appliance-use" data-id-title="Using the SCA appliance"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">47.4.2.4 </span><span class="title-name">Using the SCA appliance</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-use">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     You can upload existing Supportconfig archives to the SCA appliance
     manually or create new Supportconfig archives and upload them to the SCA
     appliance in one step. Uploading can be done via FTP or SCP. For both, you
     need to know the URL where the SCA appliance can be reached. For upload
     via FTP, an FTP server needs to be configured for the SCA appliance, see
     <a class="xref" href="#pro-sca-appl-install" title="Installing and configuring the SCA appliance">Procedure 47.5, “Installing and configuring the SCA appliance”</a>.
    </p><section class="sect4" id="sec-admsupport-sca-appliance-use-upload" data-id-title="Uploading supportconfig archives to the SCA appliance"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">47.4.2.4.1 </span><span class="title-name">Uploading supportconfig archives to the SCA appliance</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-use-upload">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        For creating a Supportconfig archive and uploading it via (anonymous)
        FTP:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -U “ftp://<em class="replaceable">SCA-APPLIANCE.COMPANY.COM</em>/upload”</pre></div></li><li class="listitem"><p>
        For creating a Supportconfig archive and uploading it via SCP:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> supportconfig -U “scp://<em class="replaceable">SCA-APPLIANCE.COMPANY.COM</em>/tmp”</pre></div><p>
        You will be prompted for the <code class="systemitem">root</code> user password of the server
        running the SCA appliance.
       </p></li><li class="listitem"><p>
        To manually upload one or multiple archives, copy the
        existing archive files (located
        at<code class="filename">/var/log/scc_*.tbz</code>) to the SCA appliance. As
        target, use either the appliance server's <code class="filename">/tmp</code>
        directory or the <code class="filename">/srv/ftp/upload</code> directory (if FTP
        is configured for the SCA appliance server).
       </p></li></ul></div></section><section class="sect4" id="sec-admsupport-sca-appliance-use-view" data-id-title="Viewing SCA reports"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">47.4.2.4.2 </span><span class="title-name">Viewing SCA reports</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-use-view">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      SCA reports can be viewed from any machine that has a browser installed
      and can access the report index page of the SCA appliance.
     </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
        Start a Web browser and make sure that JavaScript and cookies are
        enabled.
       </p></li><li class="step"><p>
        As a URL, enter the report index page of the SCA appliance.
       </p><div class="verbatim-wrap"><pre class="screen">https://sca-appliance.company.com/sca</pre></div><p>
        If in doubt, ask your system administrator.
       </p></li><li class="step"><p>
        You will be prompted for a user name and a password to log in.
       </p><div class="figure" id="fig-sca-appl-html"><div class="figure-contents"><div class="mediaobject"><a href="images/sca_appl_report_html.png"><img src="images/sca_appl_report_html.png" width="100%" alt="HTML report generated by SCA appliance" title="HTML report generated by SCA appliance"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 47.2: </span><span class="title-name">HTML report generated by SCA appliance </span></span><a title="Permalink" class="permalink" href="#fig-sca-appl-html">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></li><li class="step"><p>
        After logging in, click the date of the report you want to read.
       </p></li><li class="step"><p>
        Click the <span class="guimenu">Basic Health</span> category first to expand it.
       </p></li><li class="step"><p>
        In the <span class="guimenu">Message</span> column, click an individual entry.

        This opens the corresponding article in the SUSE Knowledge base. Read
        the proposed solution and follow the instructions.
       </p></li><li class="step"><p>
        If the <span class="guimenu">Solutions</span> column of the
        <span class="guimenu">Supportconfig Analysis Report</span> shows any additional
        entries, click them. Read the proposed solution and follow the
        instructions.
       </p></li><li class="step"><p>
        Check the SUSE Knowledge base
        (<a class="link" href="https://www.suse.com/support/kb/" target="_blank">https://www.suse.com/support/kb/</a>) for results that
        directly relate to the problem identified by SCA. Work at resolving
        them.
       </p></li><li class="step"><p>
        Check for results that can be addressed proactively to avoid future
        problems.
       </p></li></ol></div></div></section></section><section class="sect3" id="sec-admsupport-sca-appliance-config" data-id-title="Customizing the SCA appliance"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">47.4.2.5 </span><span class="title-name">Customizing the SCA appliance</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-config">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The following sections show how to change the password for the Web
     interface, how to change the source for the SCA pattern updates, how to
     enable archiving mode, and how to configure e-mail notifications.
    </p><section class="sect4" id="sec-admsupport-sca-appliance-config-passwd" data-id-title="Password for the Web interface"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">47.4.2.5.1 </span><span class="title-name">Password for the Web interface</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-config-passwd">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The SCA Appliance Web interface requires a user name and password for
      logging in. The default user name is <code class="literal">scdiag</code> and the
      default password is <code class="literal">linux</code> (if not specified otherwise,
      see <a class="xref" href="#pro-sca-appl-install" title="Installing and configuring the SCA appliance">Procedure 47.5, “Installing and configuring the SCA appliance”</a>). Change the default password
      to a secure password at the earliest possibility. You can also modify the
      user name.
     </p><div class="procedure" id="pro-sca-passwd-change" data-id-title="Changing user name or password for the Web interface"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 47.6: </span><span class="title-name">Changing user name or password for the Web interface </span></span><a title="Permalink" class="permalink" href="#pro-sca-passwd-change">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
        Log in as <code class="systemitem">root</code> user at the system console of the SCA appliance
        server.
       </p></li><li class="step"><p>
        Open <code class="filename">/srv/www/htdocs/sca/web-config.php</code> in an
        editor.
       </p></li><li class="step"><p>
        Change the values of <code class="literal">$username</code> and
        <code class="literal">$password</code> as desired.
       </p></li><li class="step"><p>
        Save the file and exit.
       </p></li></ol></div></div></section><section class="sect4" id="sec-admsupport-sca-appliance-config-upd" data-id-title="Updates of SCA patterns"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">47.4.2.5.2 </span><span class="title-name">Updates of SCA patterns</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-config-upd">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      By default, all <code class="systemitem">sca-patterns-*</code>
      packages are updated regularly by a <code class="systemitem">root</code> cron job that executes the
      <code class="filename">sdagent-patterns</code> script nightly, which in turn runs
      <code class="command">zypper update sca-patterns-*</code>. A regular system update
      will update all SCA appliance and pattern packages. To update the SCA
      appliance and patterns manually, run:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> zypper update sca-*</pre></div><p>
      The updates are installed from the SUSE Linux Enterprise <span class="productnumber"><span class="phrase">15 SP6</span></span> update
      repository by default. You can change the source for the updates to an
      RMT server, if desired. When <code class="filename">sdagent-patterns</code> runs
      <code class="command">zypper update sca-patterns-*</code>, it gets the updates from
      the currently configured update channel. If that channel is located on an
      RMT server, the packages will be pulled from there.
     </p><div class="procedure" id="id-1.3.8.3.6.6.7.4.5" data-id-title="Disabling automatic updates of SCA patterns"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 47.7: </span><span class="title-name">Disabling automatic updates of SCA patterns </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.3.6.6.7.4.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
        Log in as <code class="systemitem">root</code> user at the system console of the SCA appliance
        server.
       </p></li><li class="step"><p>

        Open <code class="filename">/etc/sca/sdagent-patterns.conf</code> in an editor.
       </p></li><li class="step"><p>
        Change the entry
       </p><div class="verbatim-wrap"><pre class="screen">UPDATE_FROM_PATTERN_REPO=1</pre></div><p>
        to
       </p><div class="verbatim-wrap"><pre class="screen">UPDATE_FROM_PATTERN_REPO=0</pre></div></li><li class="step"><p>
        Save the file and exit. The machine does not require any restart to
        apply the change.
       </p></li></ol></div></div></section><section class="sect4" id="sec-admsupport-sca-appliance-config-archive" data-id-title="Archiving mode"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">47.4.2.5.3 </span><span class="title-name">Archiving mode</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-config-archive">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      All Supportconfig archives are deleted from the SCA appliance after they
      have been analyzed and their results have been stored in the MariaDB
      database. However, for troubleshooting purposes it can be useful to keep
      copies of Supportconfig archives from a machine. By default, archiving
      mode is disabled.
     </p><div class="procedure" id="id-1.3.8.3.6.6.7.5.3" data-id-title="Enabling archiving mode in the SCA appliance"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 47.8: </span><span class="title-name">Enabling archiving mode in the SCA appliance </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.3.6.6.7.5.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
        Log in as <code class="systemitem">root</code> user at the system console of the SCA appliance
        server.
       </p></li><li class="step"><p>
        Open <code class="filename">/etc/sca/sdagent.conf</code> in an editor.
       </p></li><li class="step"><p>
        Change the entry
       </p><div class="verbatim-wrap"><pre class="screen">ARCHIVE_MODE=0</pre></div><p>
        to
       </p><div class="verbatim-wrap"><pre class="screen">ARCHIVE_MODE=1</pre></div></li><li class="step"><p>
        Save the file and exit. The machine does not require any restart to
        apply the change.
       </p></li></ol></div></div><p>
      After having enabled archive mode, the SCA appliance will save the
      Supportconfig files to the <code class="filename">/var/log/archives/saved</code>
      directory, instead of deleting them.
     </p></section><section class="sect4" id="sec-admsupport-sca-appliance-config-mail" data-id-title="Sending SCA reports via e-mail"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">47.4.2.5.4 </span><span class="title-name">Sending SCA reports via e-mail</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-config-mail">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The SCA appliance can e-mail a report HTML file for each Supportconfig
      analyzed. This feature is disabled by default. When enabling it, you can
      define a list of e-mail addresses to which the reports should be sent.
      Define a level of status messages that trigger the sending of reports
      (<code class="literal">STATUS_NOTIFY_LEVEL</code>).
     </p><div class="variablelist" id="vl-sca-mails-notify-level" data-id-title="Possible values for STATUS_NOTIFY_LEVEL"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Possible values for <code class="literal">STATUS_NOTIFY_LEVEL</code> </span></span><a title="Permalink" class="permalink" href="#vl-sca-mails-notify-level">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.3.8.3.6.6.7.6.3.2"><span class="term">$STATUS_OFF</span></dt><dd><p>
         Deactivate sending of HTML reports.
        </p></dd><dt id="id-1.3.8.3.6.6.7.6.3.3"><span class="term">$STATUS_CRITICAL</span></dt><dd><p>
         Send only SCA reports that include a CRITICAL.
        </p></dd><dt id="id-1.3.8.3.6.6.7.6.3.4"><span class="term">$STATUS_WARNING </span></dt><dd><p>
         Send only SCA reports that include a WARNING or CRITICAL.
        </p></dd><dt id="id-1.3.8.3.6.6.7.6.3.5"><span class="term">$STATUS_RECOMMEND</span></dt><dd><p>
         Send only SCA reports that include a RECOMMEND, WARNING or CRITICAL.
        </p></dd><dt id="id-1.3.8.3.6.6.7.6.3.6"><span class="term">$STATUS_SUCCESS</span></dt><dd><p>
         Send SCA reports that include a SUCCESS, RECOMMEND, WARNING or
         CRITICAL.
        </p></dd></dl></div><div class="procedure" id="id-1.3.8.3.6.6.7.6.4" data-id-title="Configuring e-mail notifications for SCA reports"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 47.9: </span><span class="title-name">Configuring e-mail notifications for SCA reports </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.3.6.6.7.6.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
        Log in as <code class="systemitem">root</code> user at the system console of the SCA appliance
        server.
       </p></li><li class="step"><p>
        Open <code class="filename">/etc/sca/sdagent.conf</code> in an editor.
       </p></li><li class="step"><p>
        Search for the entry <code class="systemitem">STATUS_NOTIFY_LEVEL</code>. By
        default, it is set to <code class="literal">$STATUS_OFF</code> (e-mail
        notifications are disabled).
       </p></li><li class="step"><p>
        To enable e-mail notifications, change <code class="literal">$STATUS_OFF</code>
        to the level of status messages that you want to have e-mail reports
        for, for example:
       </p><div class="verbatim-wrap"><pre class="screen">STATUS_NOTIFY_LEVEL=$STATUS_SUCCESS</pre></div><p>
        For details, see <a class="xref" href="#vl-sca-mails-notify-level" title="Possible values for STATUS_NOTIFY_LEVEL">Possible values for <code class="literal">STATUS_NOTIFY_LEVEL</code></a>.
       </p></li><li class="step"><p>
        To define the list of recipients to which the reports should be sent:
       </p><ol type="a" class="substeps"><li class="step"><p>
          Search for the entry <code class="literal">EMAIL_REPORT='root'</code>.
         </p></li><li class="step"><p>
          Replace <code class="literal">root</code> with a list of e-mail addresses to
          which SCA reports should be sent. The e-mail addresses must be
          separated by spaces. For example:
         </p><div class="verbatim-wrap"><pre class="screen">EMAIL_REPORT='tux@my.company.com wilber@your.company.com'</pre></div></li></ol></li><li class="step"><p>
        Save the file and exit. The machine does not require any restart to
        apply the changes. All future SCA reports will be e-mailed to the
        specified addresses.
       </p></li></ol></div></div></section></section><section class="sect3" id="sec-admsupport-sca-appliance-backup" data-id-title="Backing up and restoring the database"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">47.4.2.6 </span><span class="title-name">Backing up and restoring the database</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-appliance-backup">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     To back up and restore the MariaDB database that stores the SCA reports,
     use the <code class="command">scadb</code> command as described
     below. <code class="command">scadb</code> is provided by the package
     <span class="package">sca-appliance-broker</span>.
    </p><div class="procedure" id="id-1.3.8.3.6.6.8.3" data-id-title="Backing up the database"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 47.10: </span><span class="title-name">Backing up the database </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.3.6.6.8.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
       Log in as <code class="systemitem">root</code> user at the system console of the server running
       the SCA appliance.
      </p></li><li class="step"><p>
       Put the appliance into maintenance mode by executing:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>scadb maint</pre></div></li><li class="step"><p>
       Start the backup with:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>scadb backup</pre></div><p>
       The data is saved to a TAR archive:
       <code class="filename">sca-backup-*sql.gz</code>.
      </p></li><li class="step"><p>
       If you are using the pattern creation database to develop your own
       patterns (see <a class="xref" href="#sec-admsupport-sca-patterns" title="47.4.3. Developing custom analysis patterns">Section 47.4.3, “Developing custom analysis patterns”</a>), back up
       this data, too:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>sdpdb backup</pre></div><p>
       The data is saved to a TAR archive:
       <code class="filename">sdp-backup-*sql.gz</code>.
      </p></li><li class="step"><p>
       Copy the following data to another machine or an external storage
       medium:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         <code class="filename">sca-backup-*sql.gz</code>
        </p></li><li class="listitem"><p>
         <code class="filename">sdp-backup-*sql.gz</code>
        </p></li><li class="listitem"><p>
         <code class="filename">/usr/lib/sca/patterns/local</code> (only needed if you
         have created custom patterns)
        </p></li></ul></div></li><li class="step"><p>
       Reactivate the SCA appliance with:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>scadb reset agents</pre></div></li></ol></div></div><div class="procedure" id="id-1.3.8.3.6.6.8.4" data-id-title="Restoring the database"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 47.11: </span><span class="title-name">Restoring the database </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.3.6.6.8.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
      To restore the database from your backup, proceed as follows:
     </p><ol class="procedure" type="1"><li class="step"><p>
       Log in as <code class="systemitem">root</code> user at the system console of the server running
       the SCA appliance.
      </p></li><li class="step"><p>
       Copy the newest <code class="filename">sca-backup-*sql.gz</code> and
       <code class="filename">sdp-backup-*sql.gz</code> TAR archives to the SCA
       appliance server.
      </p></li><li class="step"><p>
       To decompress the files, run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>gzip -d *-backup-*sql.gz</pre></div></li><li class="step"><p>
       To import the data into the database, execute:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>scadb import sca-backup-*sql</pre></div></li><li class="step"><p>
       If you are using the pattern creation database to create your own
       patterns, also import the following data with:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>sdpdb import sdp-backup-*sql</pre></div></li><li class="step"><p>
       If you are using custom patterns, also restore
       <code class="filename">/usr/lib/sca/patterns/local</code> from your backup data.
      </p></li><li class="step"><p>
       Reactivate the SCA appliance with:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>scadb reset agents</pre></div></li><li class="step"><p>
       Update the pattern modules in the database with:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>sdagent-patterns -u</pre></div></li></ol></div></div></section></section><section class="sect2" id="sec-admsupport-sca-patterns" data-id-title="Developing custom analysis patterns"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.4.3 </span><span class="title-name">Developing custom analysis patterns</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-sca-patterns">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The SCA appliance comes with a complete pattern development environment
    (the SCA Pattern Database) that enables you to develop your own, custom
    patterns. Patterns can be written in any programming language. To make them
    available for the Supportconfig analysis process, they need to be saved to
    <code class="filename">/usr/lib/sca/patterns/local</code> and to be made executable.
    Both the SCA appliance and the SCA tool will then run the custom patterns
    against new Supportconfig archives as part of the analysis report. For
    detailed instructions on how to create (and test) your own patterns, see
    <a class="link" href="https://www.suse.com/c/sca-pattern-development/" target="_blank">https://www.suse.com/c/sca-pattern-development/</a>.
   </p></section></section><section class="sect1" id="sec-admsupport-install" data-id-title="Gathering information during the installation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">47.5 </span><span class="title-name">Gathering information during the installation</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-install">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   During the installation, <code class="command">supportconfig</code> is not available.
   However, you can collect log files from YaST by using
   <code class="command">save_y2logs</code>. This command will create a
   <code class="filename">.tar.xz</code> archive in the directory
   <code class="filename">/tmp</code>.
  </p><p>
   If issues appear early during installation, you may be able to gather
   information from the log file created by
   <code class="command">linuxrc</code>. <code class="command">linuxrc</code> is a small command
   that runs before YaST starts. This log file is available at
   <code class="filename">/var/log/linuxrc.log</code>.
  </p><div id="id-1.3.8.3.7.4" data-id-title="Installation log files not available in the installed system" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Installation log files not available in the installed system</div><p>
    The log files available during the installation are not available in the
    installed system anymore. Properly save the installation log files while
    the installer is still running.
   </p></div></section><section class="sect1" id="sec-admsupport-kernel" data-id-title="Support of kernel modules"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">47.6 </span><span class="title-name">Support of kernel modules</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-kernel">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   An important requirement for every enterprise operating system is the level
   of support you receive for your environment. Kernel modules are the most
   relevant connector between hardware (<span class="quote">“<span class="quote">controllers</span>”</span>) and the
   operating system. Every kernel module in SUSE Linux Enterprise has a
   <code class="literal">supported</code> flag that can take three possible values:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <span class="quote">“<span class="quote">yes</span>”</span>, thus <code class="literal">supported</code>
    </p></li><li class="listitem"><p>
     <span class="quote">“<span class="quote">external</span>”</span>, thus <code class="literal">supported</code>
    </p></li><li class="listitem"><p>
     (empty, not set), thus <code class="literal">unsupported</code>
    </p></li></ul></div><p>
   The following rules apply:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     All modules of a self-recompiled kernel are by default marked as
     unsupported.
    </p></li><li class="listitem"><p>
     Kernel modules supported by SUSE partners and delivered using
     <code class="literal">SUSE SolidDriver Program</code> are marked
     <span class="quote">“<span class="quote">external</span>”</span>.
    </p></li><li class="listitem"><p>
     If the <code class="literal">supported</code> flag is not set, loading this module
     will taint the kernel. Tainted kernels are not supported. Unsupported
     Kernel modules are included in an extra RPM package
     (<code class="systemitem">kernel-<em class="replaceable">FLAVOR</em>-extra</code>).
     That package is only available for SUSE Linux Enterprise Desktop and the SUSE Linux Enterprise Workstation Extension.
     Those kernels will not be loaded by default
     (<em class="replaceable">FLAVOR</em>=<code class="literal">default</code>|<code class="literal">xen</code>|...).
     Besides, these unsupported modules are not available in the installer,
     and the
     <code class="systemitem">kernel-<em class="replaceable">FLAVOR</em>-extra</code>
     package is not part of the SUSE Linux Enterprise media.
    </p></li><li class="listitem"><p>
     Kernel modules not provided under a license compatible to the license of
     the Linux kernel also taint the kernel. For details, see the state of
     <code class="filename">/proc/sys/kernel/tainted</code>.
    </p></li></ul></div><section class="sect2" id="sec-admsupport-kernel-background" data-id-title="Technical background"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.6.1 </span><span class="title-name">Technical background</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-kernel-background">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Linux kernel: The value of
      <code class="filename">/proc/sys/kernel/unsupported</code> defaults to
      <code class="literal">2</code> on SUSE Linux Enterprise <span class="productnumber"><span class="phrase">15 SP6</span></span> (<code class="literal">do not warn in
      syslog when loading unsupported modules</code>). This default is used
      in the installer and in the installed system.
     </p></li><li class="listitem"><p>
      <code class="command">modprobe</code>: The <code class="command">modprobe</code> utility for
      checking module dependencies and loading modules appropriately checks for
      the value of the <code class="literal">supported</code> flag. If the value is
      <span class="quote">“<span class="quote">yes</span>”</span> or <span class="quote">“<span class="quote">external</span>”</span> the module will be loaded,
      otherwise it will not. For information on how to override this behavior,
      see <a class="xref" href="#sec-admsupport-kernel-unsupported" title="47.6.2. Working with unsupported modules">Section 47.6.2, “Working with unsupported modules”</a>.
     </p><div id="id-1.3.8.3.8.6.3.2.2" data-id-title="Support" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Support</div><p>
       SUSE does not generally support the removal of storage modules via
       <code class="command">modprobe -r</code>.
      </p></div></li></ul></div></section><section class="sect2" id="sec-admsupport-kernel-unsupported" data-id-title="Working with unsupported modules"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">47.6.2 </span><span class="title-name">Working with unsupported modules</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-kernel-unsupported">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    While general supportability is important, situations can occur where
    loading an unsupported module is required. For example, for testing or
    debugging purposes, or if your hardware vendor provides a hotfix.
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      To override the default, copy
      <code class="filename">/lib/modprobe.d/10-unsupported-modules.conf</code> to
      <code class="filename">/etc/modprobe.d/10-unsupported-modules.conf</code> and
      change the value of the variable
      <code class="varname">allow_unsupported_modules</code> from <code class="literal">0</code> to
      <code class="literal">1</code>. Do not edit
      <code class="filename">/lib/modprobe.d/10-unsupported-modules.conf</code> directly;
      any changes will be overwritten whenever the
      <span class="package">suse-module-tools</span> package is updated.
     </p><p>
      If an unsupported module is needed in the initrd, do not forget to run
      <code class="command">dracut</code> <code class="option">-f</code> to update the initrd.
     </p><p>
      If you only want to try loading a module once, you can use the
      <code class="option">--allow-unsupported-modules</code> option with
      <code class="command">modprobe</code>. For more information, see the comments in
      <code class="filename">/lib/modprobe.d/10-unsupported-modules.conf</code> and the
      <code class="command">modprobe</code> man page.
     </p></li><li class="listitem"><p>
      During installation, unsupported modules may be added through driver
      update disks, and they will be loaded. To enforce loading of unsupported
      modules during boot and afterward, use the kernel command line option
      <code class="option">oem-modules</code>. While installing and initializing the
      <code class="systemitem">suse-module-tools</code> package, the
      kernel flag <code class="literal">TAINT_NO_SUPPORT</code>
      (<code class="filename">/proc/sys/kernel/tainted</code>) will be evaluated. If the
      kernel is already tainted, <code class="literal">allow_unsupported_modules</code>
      will be enabled. This will prevent unsupported modules from failing in
      the system being installed. If no unsupported modules are present during
      installation and the other special kernel command line option
      (<code class="option">oem-modules=1</code>) is not used, the default still is to
      disallow unsupported modules.
     </p></li></ul></div><p>
    Remember that loading and running unsupported modules will make the kernel
    and the whole system unsupported by SUSE.
   </p></section></section><section class="sect1" id="sec-admsupport-moreinfo" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">47.7 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="#sec-admsupport-moreinfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/adm_support.xml" title="Edit source document"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <code class="command">man supportconfig</code>—The
     <code class="command">supportconfig</code> man page.
    </p></li><li class="listitem"><p>
     <code class="command">man supportconfig.conf</code>—The man page of the
     Supportconfig configuration file.
    </p></li><li class="listitem"><p>
     <code class="command">man scatool</code>—The <code class="command">scatool</code> man
     page.
    </p></li><li class="listitem"><p>
     <code class="command">man scadb</code>—The <code class="command">scadb</code> man page.
    </p></li><li class="listitem"><p>
     <code class="command">man setup-sca</code>—The <code class="command">setup-sca</code>
     man page.
    </p></li><li class="listitem"><p>
     <a class="link" href="https://mariadb.com/kb/en/" target="_blank">https://mariadb.com/kb/en/</a>—The MariaDB
     documentation.
    </p></li><li class="listitem"><p>
     <a class="link" href="https://httpd.apache.org/docs/" target="_blank">https://httpd.apache.org/docs/</a> and
     <a class="xref" href="#cha-apache2" title="Chapter 42. The Apache HTTP server">Chapter 42, <em>The Apache HTTP server</em></a>—Documentation about the Apache Web
     server.
    </p></li><li class="listitem"><p>
     <a class="xref" href="#cha-ftp" title="Chapter 43. Setting up an FTP server with YaST">Chapter 43, <em>Setting up an FTP server with YaST</em></a>—Documentation of how to set up an FTP
     server.
    </p></li><li class="listitem"><p>
     <a class="link" href="https://www.suse.com/c/sca-pattern-development/" target="_blank">https://www.suse.com/c/sca-pattern-development/</a>—Instructions
     on how to create (and test) your own SCA patterns.
    </p></li><li class="listitem"><p>
     <a class="link" href="https://www.suse.com/c/basic-server-health-check-supportconfig/" target="_blank">https://www.suse.com/c/basic-server-health-check-supportconfig/</a>—A
     Basic Server Health Check with Supportconfig.
    </p></li><li class="listitem"><p>
     <a class="link" href="https://community.microfocus.com/img/gw/groupwise/w/tips/34308/create-your-own-supportconfig-plugin" target="_blank">https://community.microfocus.com/img/gw/groupwise/w/tips/34308/create-your-own-supportconfig-plugin</a>—Create
     Your Own Supportconfig Plugin.
    </p></li><li class="listitem"><p>
     <a class="link" href="https://www.suse.com/c/creating-a-central-supportconfig-repository/" target="_blank">https://www.suse.com/c/creating-a-central-supportconfig-repository/</a>—Creating a Central Supportconfig Repository.
    </p><p>
     
    </p></li></ul></div></section></section><section class="chapter" id="cha-trouble" data-id-title="Common problems and their solutions"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">48 </span><span class="title-name">Common problems and their solutions</span></span> <a title="Permalink" class="permalink" href="#cha-trouble">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    This chapter describes a range of potential problems and their solutions.
    Even if your situation is not precisely listed, there may be one
    similar enough to offer hints to the solution of your problem.
  </p><section class="sect1" id="sec-trouble-info" data-id-title="Finding and gathering information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">48.1 </span><span class="title-name">Finding and gathering information</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-info">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Linux reports things in a detailed way. There are several places to look
      when you encounter problems with your system. Most of them are standard
      to Linux systems, and several are relevant to <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>
      systems. Most log files can be viewed with YaST (<span class="guimenu">Miscellaneous</span> › <span class="guimenu">Start-Up Log</span>).
    </p><p>
      YaST offers the possibility to collect all system information needed by
      the support team. Use <span class="guimenu">Other</span> › <span class="guimenu">Support</span> and
      select the problem category. When all information is gathered, attach it
      to your support request.
    </p><p>
      A list of the most frequently checked log files follows with the
      description of their typical purpose. Paths containing
      <code class="filename">~</code> refer to the current user's home directory.
    </p><div class="table" id="tab-trouble-info" data-id-title="Log files"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 48.1: </span><span class="title-name">Log files </span></span><a title="Permalink" class="permalink" href="#tab-trouble-info">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                Log File
              </p>
            </th><th style="border-bottom: 1px solid ; ">
              <p>
                Description
              </p>
            </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">~/.xsession-errors</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Messages from the desktop applications currently running.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/var/log/apparmor/</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Log files from AppArmor, see <span class="intraxref">Book “Security and Hardening Guide”</span>
                for detailed information.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/var/log/audit/audit.log</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Log file from Audit to track any access to files, directories,
                or resources of your system, and trace system calls. See
                <span class="intraxref">Book “Security and Hardening Guide”</span> for detailed information.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/var/log/mail.*</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Messages from the mail system.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/var/log/NetworkManager</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Log file from NetworkManager to collect problems with network
                connectivity
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/var/log/samba/</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Directory containing Samba server and client log messages.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/var/log/warn</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                All messages from the kernel and system log daemon with the
                <span class="quote">“<span class="quote">warning</span>”</span> level or higher.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/var/log/wtmp</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Binary file containing user login records for the current
                machine session. View it with <code class="command">last</code>.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/var/log/Xorg.*.log</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Start-up and runtime log files from the X Window
                System. It is useful for debugging failed X start-ups.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/var/log/YaST2/</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Directory containing YaST's actions and their results.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; ">
              <p>
                <code class="filename">/var/log/zypper.log</code>
              </p>
            </td><td>
              <p>
                Log file of Zypper.
              </p>
            </td></tr></tbody></table></div></div><p>
      Apart from log files, your machine also supplies you with information
      about the running system. See
      <a class="xref" href="#tab-trouble-system" title="System information with the /proc file system">Table 48.2: System information with the <code class="filename">/proc</code> file system</a>
    </p><div class="table" id="tab-trouble-system" data-id-title="System information with the /proc file system"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 48.2: </span><span class="title-name">System information with the <code class="filename">/proc</code> file system </span></span><a title="Permalink" class="permalink" href="#tab-trouble-system">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                File
              </p>
            </th><th style="border-bottom: 1px solid ; ">
              <p>
                Description
              </p>
            </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/proc/cpuinfo</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Contains processor information, including its type, make,
                model, and performance.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/proc/dma</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Shows which DMA channels are currently being used.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/proc/interrupts</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Shows which interrupts are in use, and how many of each have
                been in use.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/proc/iomem</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Displays the status of I/O (input/output) memory.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/proc/ioports</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Shows which I/O ports are in use at the moment.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/proc/meminfo</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Displays memory status.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/proc/modules</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Displays the individual modules.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/proc/mounts</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Displays devices currently mounted.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/proc/partitions</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Shows the partitioning of all hard disks.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; ">
              <p>
                <code class="filename">/proc/version</code>
              </p>
            </td><td>
              <p>
                Displays the current version of Linux.
              </p>
            </td></tr></tbody></table></div></div><p>
      Apart from the <code class="filename">/proc</code> file system, the Linux kernel
      exports information with the <code class="literal">sysfs</code> module, an
      in-memory file system. This module represents kernel objects, their
      attributes and relationships. For more information about
      <code class="literal">sysfs</code>, see the context of udev in
      <a class="xref" href="#cha-udev" title="Chapter 29. Dynamic kernel device management with udev">Chapter 29, <em>Dynamic kernel device management with <code class="systemitem">udev</code></em></a>.
      <a class="xref" href="#tab-trouble-sysfs" title="System information with the /sys file system">Table 48.3</a>
      contains an overview of the most common directories under
      <code class="filename">/sys</code>.
    </p><div class="table" id="tab-trouble-sysfs" data-id-title="System information with the /sys file system"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 48.3: </span><span class="title-name">System information with the <code class="filename">/sys</code> file system </span></span><a title="Permalink" class="permalink" href="#tab-trouble-sysfs">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                File
              </p>
            </th><th style="border-bottom: 1px solid ; ">
              <p>
                Description
              </p>
            </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/sys/block</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Contains subdirectories for each block device discovered in the
                system. Generally, these are mostly disk type devices.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/sys/bus</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Contains subdirectories for each physical bus type.
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <code class="filename">/sys/class</code>
              </p>
            </td><td style="border-bottom: 1px solid ; ">
              <p>
                Contains subdirectories grouped together as a functional types
                of devices (like graphics, net, printer, etc.)
              </p>
            </td></tr><tr><td style="border-right: 1px solid ; ">
              <p>
                <code class="filename">/sys/device</code>
              </p>
            </td><td>
              <p>
                Contains the global device hierarchy.
              </p>
            </td></tr></tbody></table></div></div><p>
      Linux comes with several tools for system analysis and monitoring. See
      <span class="intraxref">Book “System Analysis and Tuning Guide”, Chapter 2 “System monitoring utilities”</span> for a selection of the most important ones
      used in system diagnostics.
    </p><p>
      Each of the following scenarios begins with a header describing the
      problem followed by a paragraph or two offering suggested solutions,
      available references for more detailed solutions, and cross-references to
      other scenarios that are related.
    </p></section><section class="sect1" id="sec-trouble-boot" data-id-title="Boot problems"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">48.2 </span><span class="title-name">Boot problems</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-boot">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Boot problems are situations when your system does not boot properly
      (does not boot to the expected target and login screen).
    </p><section class="sect2" id="sec-trouble-boot-nogrub" data-id-title="The GRUB 2 boot loader fails to load"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.2.1 </span><span class="title-name">The GRUB 2 boot loader fails to load</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-boot-nogrub">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        If the hardware is functioning properly, it is possible that the boot
        loader is corrupted and Linux cannot start on the machine. In this
        case, it is necessary to repair the boot loader. To do so, you need to
        start the Rescue System as described in
        <a class="xref" href="#sec-trouble-data-recover-rescue" title="48.5.2. Using the rescue system">Section 48.5.2, “Using the rescue system”</a> and follow the
        instructions in <a class="xref" href="#sec-trouble-data-recover-rescue-grub" title="48.5.2.4. Modifying and re-installing the boot loader">Section 48.5.2.4, “Modifying and re-installing the boot loader”</a>.
      </p><p>
        Alternatively, you can use the Rescue System to fix the boot loader as
        follows. Boot your machine from the installation media. In the boot
        screen, choose <span class="guimenu">More</span> › <span class="guimenu">Boot Linux
        System</span>. Select the disk containing the installed
        system and kernel with the default kernel options.
      </p><p>
        When the system is booted, start YaST and switch to
        <span class="guimenu">System</span> › <span class="guimenu">Boot
        Loader</span>. Make sure that the <span class="guimenu">Write
        generic Boot Code to MBR</span> option is enabled, and click
        <span class="guimenu">OK</span>. This fixes the corrupted boot loader by
        overwriting it, or installs the boot loader if it is missing.
      </p><p>
        Other reasons for the machine not booting may be BIOS-related:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.8.4.5.3.6.1"><span class="term">BIOS settings</span></dt><dd><p>
              Check your BIOS for references to your hard disk. GRUB 2 may
              simply not be started if the hard disk itself cannot be found
              with the current BIOS settings.
            </p></dd><dt id="id-1.3.8.4.5.3.6.2"><span class="term">BIOS boot order</span></dt><dd><p>
              Check whether your system's boot order includes the hard disk. If
              the hard disk option was not enabled, your system may install
              properly, but fails to boot when access to the hard disk is
              required.
            </p></dd></dl></div></section><section class="sect2" id="sec-trouble-boot-prompt" data-id-title="No graphical login"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.2.2 </span><span class="title-name">No graphical login</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-boot-prompt">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        If the machine starts, but does not boot into the graphical login
        manager, anticipate problems either with the choice of the default
        systemd target or the configuration of the X Window System. To check
        the current systemd default target run the command <code class="command">sudo
        systemctl get-default</code>. If the value returned is
        <span class="emphasis"><em>not</em></span> <code class="literal">graphical.target</code>, run the
        command <code class="command">sudo systemctl isolate graphical.target</code>. If
        the graphical login screen starts, log in and start <span class="guimenu">YaST</span> › <span class="guimenu">System</span> › <span class="guimenu">Services Manager</span> and set the
        <span class="guimenu">Default System Target</span> to <span class="guimenu">Graphical
        Interface</span>. From now on the system should boot into the
        graphical login screen.
      </p><p>
        If the graphical login screen does not start even if having booted or
        switched to the graphical target, your desktop or X Window software may
        be misconfigured or corrupted. Examine the log files at
        <code class="filename">/var/log/Xorg.*.log</code> for detailed messages from the
        X server as it attempted to start. If the desktop fails during start,
        it may log error messages to the system journal that can be queried
        with the command <code class="command">journalctl</code> (see
        <a class="xref" href="#cha-journalctl" title="Chapter 21. journalctl: query the systemd journal">Chapter 21, <em><code class="command">journalctl</code>: query the <code class="systemitem">systemd</code> journal</em></a> for more information). If these error
        messages hint at a configuration problem in the X server, try to fix
        these issues. If the graphical system still does not come up, consider
        reinstalling the graphical desktop.
      </p></section><section class="sect2" id="sec-trouble-boot-btrfs" data-id-title="Root Btrfs partition cannot be mounted"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.2.3 </span><span class="title-name">Root Btrfs partition cannot be mounted</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-boot-btrfs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        If a <code class="systemitem">btrfs</code> root partition
        becomes corrupted, try the following options:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
            Mount the partition with the <code class="option">-o recovery</code> option.
          </p></li><li class="listitem"><p>
            If that fails, run <code class="command">btrfs-zero-log</code> on your root
            partition.
          </p></li></ul></div></section><section class="sect2" id="sec-trouble-boot-forcecheck" data-id-title="Force checking root partitions"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.2.4 </span><span class="title-name">Force checking root partitions</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-boot-forcecheck">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        If the root partition becomes corrupted, use the parameter
        <em class="parameter">forcefsck</em> on the boot prompt. This passes the
        option <code class="option">-f</code> (force) to the <code class="command">fsck</code>
        command.
      </p></section><section class="sect2" id="sec-trouble-boot-disable-swap" data-id-title="Disable swap to enable booting"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.2.5 </span><span class="title-name">Disable swap to enable booting</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-boot-disable-swap">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        When a swap device is not available and the system cannot enable it
        during boot, booting may fail. Try disabling all swap devices by
        appending the following options to the kernel command line:
      </p><div class="verbatim-wrap"><pre class="screen">systemd.device_wants_unit=off systemd.mask=swap.target</pre></div><p>
        You may also try disabling specific swap devices:
      </p><div class="verbatim-wrap"><pre class="screen">systemd.mask=dev-sda1.swap</pre></div></section><section class="sect2" id="sec-trouble-boot-dual-boot" data-id-title="GRUB 2 fails during reboot on a dual-boot system"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.2.6 </span><span class="title-name">GRUB 2 fails during reboot on a dual-boot system</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-boot-dual-boot">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        If GRUB 2 fails during reboot, disable the <code class="option">Fast Boot</code>
        setting in the BIOS.
      </p></section></section><section class="sect1" id="sec-trouble-login" data-id-title="Login problems"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">48.3 </span><span class="title-name">Login problems</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-login">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Login problems occur when your system refuses to accept the user name and
      password, or accepts them but then fails to start the graphic desktop,
      produces errors, or drops to a command line, for example.
    </p><section class="sect2" id="sec-trouble-login-no" data-id-title="Valid user name and password combinations fail"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.3.1 </span><span class="title-name">Valid user name and password combinations fail</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-login-no">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        This often occurs when the system is configured to use network
        authentication or directory services and cannot retrieve results from
        its configured servers. The <code class="systemitem">root</code> user is the only local user that
        can still log in to these machines. The following
        are common reasons a machine appears functional but cannot process
        logins correctly:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
            The network is not working. For further directions on this, turn to
            <a class="xref" href="#sec-trouble-netconfig" title="48.4. Network problems">Section 48.4, “Network problems”</a>.
          </p></li><li class="listitem"><p>
            DNS is not working at the moment (which prevents GNOME from
            working and the system from making validated requests to secure
            servers). One indication that this is the case is that the machine
            takes a long time to respond to any action. Find more information
            about this topic in <a class="xref" href="#sec-trouble-netconfig" title="48.4. Network problems">Section 48.4, “Network problems”</a>.
          </p></li><li class="listitem"><p>
            If the system is configured to use Kerberos, the system's local
            time may have drifted past the accepted variance with the Kerberos
            server time (this is typically 300 seconds). If NTP (network time
            protocol) is not working properly or local NTP servers are not
            working, Kerberos authentication ceases to function because it
            depends on common clock synchronization across the network.
          </p></li><li class="listitem"><p>
            The system's authentication configuration is misconfigured. Check
            the PAM configuration files involved for any typographical errors
            or misordering of directives. For additional background information
            about PAM and the syntax of the configuration files involved, refer
            to <span class="intraxref">Book “Security and Hardening Guide”, Chapter 2 “Authentication with PAM”</span>.
          </p></li><li class="listitem"><p>
            The home partition is encrypted. Find more information about this
            topic in <a class="xref" href="#sec-trouble-login-encrypted" title="48.3.3. Login to encrypted home partition fails">Section 48.3.3, “Login to encrypted home partition fails”</a>.
          </p></li></ul></div><p>
        In cases that do not involve external network problems, the solution is
        to log in as <code class="systemitem">root</code> and repair the configuration. If you cannot log
        in to the running system, reboot it into the rescue mode as outlined in
        <a class="xref" href="#proc-rescue-mode" title="Entering rescue mode">Procedure 18.3, “Entering rescue mode”</a>.
       </p></section><section class="sect2" id="sec-trouble-login-pw" data-id-title="Valid user name and password not accepted"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.3.2 </span><span class="title-name">Valid user name and password not accepted</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-login-pw">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        This is by far the most common problem users encounter, because there
        are many reasons this can occur. Depending on whether you use local
        user management and authentication or network authentication, login
        failures occur for different reasons.
      </p><p>
        Local user management can fail for the following reasons:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
            The user may have entered the wrong password.
          </p></li><li class="listitem"><p>
            The user's home directory containing the desktop configuration
            files is corrupted or write protected.
          </p></li><li class="listitem"><p>
            There may be problems with the X Window System authenticating this
            particular user, especially if the user's home directory has been
            used with another Linux distribution before installing the current
            one.
          </p></li></ul></div><p>
        To locate the reason for a local login failure, proceed as follows:
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Check whether the user remembered their password correctly before
            you start debugging the whole authentication mechanism. If the user
            may have not have remembered their password correctly, use the
            YaST User Management module to change the user's password. Pay
            attention to the <span class="keycap">Caps Lock</span> key and unlock it, if
            necessary.
          </p></li><li class="step"><p>
            Log in as <code class="systemitem">root</code> and check the system journal with
            <code class="command">journalctl -e</code> for error messages of the login
            process and of PAM.
          </p></li><li class="step"><p>
            Try to log in from a console (using <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>). If this is successful, the blame
            cannot be put on PAM, because it is possible to authenticate this
            user on this machine. Try to locate any problems with the X Window
            System or the GNOME desktop. For more information, refer to
            <a class="xref" href="#sec-trouble-login-dk" title="48.3.4. GNOME desktop has issues">Section 48.3.4, “GNOME desktop has issues”</a>.
          </p></li><li class="step"><p>
            If the user's home directory has been used with another Linux
            distribution, remove the <code class="filename">Xauthority</code> file in
            the user's home. Use a console login via <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> and run <code class="command">rm
            .Xauthority</code> as this user. This should eliminate X
            authentication problems for this user. Try graphical login again.
          </p></li><li class="step"><p>
            If the desktop could not start because of corrupt configuration
            files, proceed with <a class="xref" href="#sec-trouble-login-dk" title="48.3.4. GNOME desktop has issues">Section 48.3.4, “GNOME desktop has issues”</a>.
          </p></li></ol></div></div><p>
        In the following, common reasons a network authentication for a
        particular user may fail on a specific machine are listed:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
            The user may have entered the wrong password.
          </p></li><li class="listitem"><p>
            The user name exists in the machine's local authentication files
            and is also provided by a network authentication system, causing
            conflicts.
          </p></li><li class="listitem"><p>
            The home directory exists but is corrupt or unavailable. Perhaps it
            is write protected or is on a server that is inaccessible at the
            moment.
          </p></li><li class="listitem"><p>
            The user does not have permission to log in to that particular host
            in the authentication system.
          </p></li><li class="listitem"><p>
            The machine has changed host names, for whatever reason, and the
            user does not have permission to log in to that host.
          </p></li><li class="listitem"><p>
            The machine cannot reach the authentication server or directory
            server that contains that user's information.
          </p></li><li class="listitem"><p>
            There may be problems with the X Window System authenticating this
            particular user, especially if the user's home has been used with
            another Linux distribution before installing the current one.
          </p></li></ul></div><p>
        To locate the cause of the login failures with network authentication,
        proceed as follows:
      </p><div class="procedure" id="proc-trouble-login-pw"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Check whether the user remembered their password correctly before
            you start debugging the whole authentication mechanism.
          </p></li><li class="step"><p>
            Determine the directory server which the machine relies on for
            authentication and make sure that it is up and running and properly
            communicating with the other machines.
          </p></li><li class="step"><p>
            Determine that the user's user name and password work on other
            machines to make sure that their authentication data exists and is
            properly distributed.
          </p></li><li class="step"><p>
            See if another user can log in to the misbehaving machine. If
            another user can log in without difficulty or if <code class="systemitem">root</code> can log
            in, log in and examine the system journal with the <code class="command">journalctl
            -e</code> &gt; file. Locate the time stamps that correspond to
            the login attempts and determine if PAM has produced any error
            messages.
          </p></li><li class="step"><p>
            Try to log in from a console (using <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>). If this is successful, the
            problem is not with PAM or the directory server on which the user's
            home is hosted, because it is possible to authenticate this user on
            this machine. Try to locate any problems with the X Window System
            or the GNOME desktop. For more information, refer to
            <a class="xref" href="#sec-trouble-login-dk" title="48.3.4. GNOME desktop has issues">Section 48.3.4, “GNOME desktop has issues”</a>.
          </p></li><li class="step"><p>
            If the user's home directory has been used with another Linux
            distribution, remove the <code class="filename">Xauthority</code> file in
            the user's home. Use a console login via <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> and run <code class="command">rm
            .Xauthority</code> as this user. This should eliminate X
            authentication problems for this user. Try graphical login again.
          </p></li><li class="step"><p>
            If the desktop could not start because of corrupt configuration
            files, proceed with <a class="xref" href="#sec-trouble-login-dk" title="48.3.4. GNOME desktop has issues">Section 48.3.4, “GNOME desktop has issues”</a>.
          </p></li></ol></div></div></section><section class="sect2" id="sec-trouble-login-encrypted" data-id-title="Login to encrypted home partition fails"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.3.3 </span><span class="title-name">Login to encrypted home partition fails</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-login-encrypted">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        It is recommended to use an encrypted home partition for laptops. If
        you cannot log in to your laptop, the reason might be that your
        partition could not be unlocked.
      </p><p>
        During the boot time, you need to enter the passphrase to unlock your
        encrypted partition. If you do not enter it, the boot process
        continues, leaving the partition locked.
      </p><p>
        To unlock your encrypted partition, proceed as follows:
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Switch to the text console with <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>.
          </p></li><li class="step"><p>
            Become <code class="systemitem">root</code>.
          </p></li><li class="step"><p>
            Restart the unlocking process again with:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>systemctl restart home.mount</pre></div></li><li class="step"><p>
            Enter your passphrase to unlock your encrypted partition.
          </p></li><li class="step"><p>
            Exit the text console and switch back to the login screen with
            <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F7</span>.
          </p></li><li class="step"><p>
            Log in as usual.
          </p></li></ol></div></div></section><section class="sect2" id="sec-trouble-login-dk" data-id-title="GNOME desktop has issues"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.3.4 </span><span class="title-name">GNOME desktop has issues</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-login-dk">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        If you are experiencing issues with the GNOME desktop, there are
        several ways to troubleshoot the misbehaving graphical desktop
        environment. The recommended procedure described below offers the
        safest option to fix a broken GNOME desktop.
      </p><div class="procedure" id="id-1.3.8.4.6.6.3" data-id-title="Troubleshooting GNOME"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 48.1: </span><span class="title-name">Troubleshooting GNOME </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.4.6.6.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Launch YaST and switch to <span class="guimenu">Security and Users</span>.
          </p></li><li class="step"><p>
            Open the <span class="guimenu">User and Group Management</span> dialog and
            click <span class="guimenu">Add</span>.
          </p></li><li class="step"><p>
            Fill out the required fields and click <span class="guimenu">OK</span> to
            create a new user.
          </p></li><li class="step"><p>
            Log out and log in as the new user. This gives you a fresh GNOME
            environment.
          </p></li><li class="step"><p>
            Copy individual subdirectories from the
            <code class="filename">~/.local/</code> and <code class="filename">~/.config/</code>
            directories of the old user account to the respective directories
            of the new user account.
          </p><p>
            Log out and log in again as the new user after every copy operation
            to check whether GNOME still works correctly.
          </p></li><li class="step"><p>
            Repeat the previous step until you find the configuration file that
            breaks GNOME.
          </p></li><li class="step"><p>
            Log in as the old user, and move the offending configuration file
            to a different location. Log out and log in again as the old user.
          </p></li><li class="step"><p>
            Delete the previously created user.
          </p></li></ol></div></div></section></section><section class="sect1" id="sec-trouble-netconfig" data-id-title="Network problems"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">48.4 </span><span class="title-name">Network problems</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-netconfig">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Many problems of your system may be network-related, although the symptoms
      look different. For example, the reason for a system not allowing users to
      log in may be a network problem. This section introduces a simple
      checklist you can apply to identify the cause of any network problem
      encountered.
    </p><div class="procedure" id="proc-trouble-config-net" data-id-title="How to identify network problems"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 48.2: </span><span class="title-name">How to identify network problems </span></span><a title="Permalink" class="permalink" href="#proc-trouble-config-net">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
        When checking the network connection of your machine, proceed as
        follows:
      </p><ol class="procedure" type="1"><li class="step"><p>
          If you use an Ethernet connection, check the hardware first. Make
          sure that your network cable is properly plugged into your computer
          and router (or hub, etc.). The control lights next to your Ethernet
          connector are normally both be active.
        </p><p>
          If the connection fails, check whether your network cable works with
          another machine. If it does, your network card causes the failure. If
          hubs or switches are included in your network setup, they may be
          faulty, as well.
        </p></li><li class="step"><p>
          If using a wireless connection, check whether the wireless link can
          be established by other machines. If not, contact the wireless
          network's administrator.
        </p></li><li class="step"><p>
          When you have checked your basic network connectivity, try to find
          out which service is not responding. Gather the address information
          of all network servers needed in your setup. Either look them up in
          the appropriate YaST module or ask your system administrator. The
          following list gives typical network servers involved in a setup
          together with the symptoms of an outage.
        </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.8.4.7.3.5.2.1"><span class="term">DNS (name service)</span></dt><dd><p>
                A broken or malfunctioning name service affects the network's
                functionality in many ways. If the local machine relies on any
                network servers for authentication and these servers cannot be
                found because of name resolution issues, users would not even
                be able to log in. Machines in the network managed by a broken
                name server would not be able to <span class="quote">“<span class="quote">see</span>”</span> each other
                and communicate.
              </p></dd><dt id="id-1.3.8.4.7.3.5.2.2"><span class="term">NTP (time service)</span></dt><dd><p>
                A malfunctioning or broken NTP service could affect Kerberos
                authentication and X server functionality.
              </p></dd><dt id="id-1.3.8.4.7.3.5.2.3"><span class="term">NFS (file service)</span></dt><dd><p>
                If any application needs data stored in an NFS mounted
                directory, it cannot start or function properly if this service
                was down or misconfigured. In the worst case scenario, a user's
                personal desktop configuration would not come up if their home
                directory containing the <code class="filename">.gconf</code>
                subdirectory could not be found because of a faulty NFS server.
              </p></dd><dt id="id-1.3.8.4.7.3.5.2.4"><span class="term">Samba (file service)</span></dt><dd><p>
                If any application needs data stored in a directory on a faulty
                Samba server, it cannot start or function properly.
              </p></dd><dt id="id-1.3.8.4.7.3.5.2.5"><span class="term">NIS (user management)</span></dt><dd><p>
                If your <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> system relies on a faulty NIS server to
                provide the user data, users cannot log in to this machine.
              </p></dd><dt id="id-1.3.8.4.7.3.5.2.6"><span class="term">LDAP (user management)</span></dt><dd><p>
                If your <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> system relies on a faulty LDAP server to
                provide the user data, users cannot log in to this machine.
              </p></dd><dt id="id-1.3.8.4.7.3.5.2.7"><span class="term">Kerberos (authentication)</span></dt><dd><p>
                Authentication does not work and login to any machine fails.
              </p></dd><dt id="id-1.3.8.4.7.3.5.2.8"><span class="term">CUPS (network printing)</span></dt><dd><p>
                Users cannot print.
              </p></dd></dl></div></li><li class="step"><p>
          Check whether the network servers are running and whether your
          network setup allows you to establish a connection:
        </p><div id="id-1.3.8.4.7.3.6.2" data-id-title="Limitations" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Limitations</div><p>
            The debugging procedure described below only applies to a simple
            network server/client setup that does not involve any internal
            routing. It assumes both server and client are members of the same
            subnet without the need for additional routing.
          </p></div><ol type="a" class="substeps"><li class="step"><p>
              Use <code class="command">ping</code>
              <em class="replaceable">IP_ADDRESS/HOSTNAME</em> (replace with the
              host name or IP address of the server) to check whether each one
              of them is up and responding to the network. If this command is
              successful, it tells you that the host you were looking for is up
              and running and that the name service for your network is
              configured correctly.
            </p><p>
              If ping fails with <code class="literal">destination host
              unreachable</code>, either your system or the desired server
              is not properly configured or down. Check whether your system is
              reachable by running <code class="command">ping</code> <em class="replaceable">IP
              address</em> or <em class="replaceable">YOUR_HOSTNAME</em>
              from another machine. If you can reach your machine from another
              machine, it is the server that is not running or not configured
              correctly.
            </p><p>
              If ping fails with <code class="literal">unknown host</code>, the name
              service is not configured correctly or the host name used was
              incorrect. For further checks on this matter, refer to
              <a class="xref" href="#st-trouble-config-net-host" title="Step 4.b">Step 4.b</a>.
              If ping still fails, either your network card is not configured
              correctly or your network hardware is faulty.
            </p></li><li class="step" id="st-trouble-config-net-host"><p>
              Use <code class="command">host</code> <em class="replaceable">HOSTNAME</em>
              to check whether the host name of the server you are trying to
              connect to is properly translated into an IP address and vice
              versa. If this command returns the IP address of this host, the
              name service is up and running. If the <code class="command">host</code>
              command fails, check all network configuration files relating to
              name and address resolution on your host:
            </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.8.4.7.3.6.3.2.2.1"><span class="term"><code class="filename">/var/run/netconfig/resolv.conf</code></span></dt><dd><p>
                    This file is used to keep track of the name server and
                    domain you are currently using. It is a symbolic link to
                    <code class="filename">/run/netconfig/resolv.conf</code> and is
                    usually automatically adjusted by YaST or DHCP. Make sure
                    that this file has the following structure and all network
                    addresses and domain names are correct:
                  </p><div class="verbatim-wrap"><pre class="screen">search <em class="replaceable">FULLY_QUALIFIED_DOMAIN_NAME</em>
nameserver <em class="replaceable">IPADDRESS_OF_NAMESERVER</em></pre></div><p>
                    This file can contain more than one name server address,
                    but at least one of them must be correct to provide name
                    resolution to your host. If needed, adjust this file using
                    the YaST Network Settings module (Hostname/DNS tab).
                  </p><p>
                    If your network connection is handled via DHCP, enable DHCP
                    to change host name and name service information by
                    selecting <span class="guimenu">Set Hostname via DHCP</span> (can be
                    set globally for any interface or per interface) and
                    <span class="guimenu">Update Name Servers and Search List via
                    DHCP</span> in the YaST Network Settings module
                    (Hostname/DNS tab).
                  </p></dd><dt id="id-1.3.8.4.7.3.6.3.2.2.2"><span class="term"><code class="filename">/etc/nsswitch.conf</code></span></dt><dd><p>
                    This file tells Linux where to look for name service
                    information. It should look like this:
                  </p><div class="verbatim-wrap"><pre class="screen"> ...
hosts: files dns
networks: files dns
...</pre></div><p>
                    The <code class="option">dns</code> entry is vital. It tells Linux to
                    use an external name server. Normally, these entries are
                    automatically managed by YaST, but it would be prudent to
                    check.
                  </p><p>
                    If all the relevant entries on the host are correct, let
                    your system administrator check the DNS server
                    configuration for the correct zone information.
                    <span class="phrase">For detailed information about DNS,
                    refer to <a class="xref" href="#cha-dns" title="Chapter 39. The domain name system">Chapter 39, <em>The domain name system</em></a>.</span> If you have
                    made sure that the DNS configuration of your host and the
                    DNS server are correct, proceed with checking the
                    configuration of your network and network device.
                  </p></dd></dl></div></li><li class="step"><p>
              If your system cannot establish a connection to a network server
              and you have excluded name service problems from the list of
              possible culprits, check the configuration of your network card.
            </p><p>
              Use the command <code class="command">ip addr show</code>
              <em class="replaceable">NETWORK_DEVICE</em> to check whether this
              device was properly configured. Make sure that the <code class="option">inet
              address</code> with the netmask
              (<code class="literal">/<em class="replaceable">MASK</em></code>) is
              configured correctly. An error in the IP address or a missing bit
              in your network mask would render your network configuration
              unusable. If necessary, perform this check on the server as well.
            </p></li><li class="step"><p>
              If the name service and network hardware are properly configured
              and running, but certain external network connections still get
              long timeouts or fail entirely, use
              <code class="command">traceroute</code>
              <em class="replaceable">FULLY_QUALIFIED_DOMAIN_NAME</em> (executed
              as <code class="systemitem">root</code>) to track the network route these requests are
              taking. This command lists any gateway (hop) that a request from
              your machine passes on its way to its destination. It lists the
              response time of each hop and whether this hop is reachable. Use
              a combination of traceroute and ping to track down the culprit
              and let the administrators know.
            </p></li></ol></li></ol></div></div><p>
      When you have identified the cause of your network trouble, you can
      resolve it yourself (if the problem is located on your machine) or let
      the system administrators of your network know about your findings so
      they can reconfigure the services or repair the necessary systems.
    </p><section class="sect2" id="sec-trouble-networkmanager" data-id-title="NetworkManager problems"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.4.1 </span><span class="title-name">NetworkManager problems</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-networkmanager">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        If you have a problem with network connectivity, narrow it down as
        described in <a class="xref" href="#proc-trouble-config-net" title="How to identify network problems">Procedure 48.2, “How to identify network problems”</a>. If NetworkManager looks
        suspicious, proceed as follows to get logs providing hints on why NetworkManager
        fails:
      </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Open a shell and log in as <code class="systemitem">root</code>.
          </p></li><li class="step"><p>
            Restart the NetworkManager:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> systemctl restart NetworkManager</pre></div></li><li class="step"><p>
            Open a Web page, for example,
            <a class="link" href="https://www.opensuse.org" target="_blank">https://www.opensuse.org</a> as normal user to see,
            if you can connect.
          </p></li><li class="step"><p>
            Collect any information about the state of NetworkManager in
            <code class="filename">/var/log/NetworkManager</code>.
          </p></li></ol></div></div><p>
        For more information about NetworkManager, refer to
        <a class="xref" href="#cha-nm" title="Chapter 31. Using NetworkManager">Chapter 31, <em>Using NetworkManager</em></a>.
      </p></section></section><section class="sect1" id="sec-trouble-data" data-id-title="Data problems"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">48.5 </span><span class="title-name">Data problems</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-data">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Data problems are when the machine may or may not boot properly but, in
      either case, it is clear that there is data corruption on the system and
      that the system needs to be recovered. These situations call for a backup
      of your critical data, enabling you to recover the system state from
      before your system failed.
    </p><section class="sect2" id="sec-trouble-data-partitions" data-id-title="Managing partition images"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.5.1 </span><span class="title-name">Managing partition images</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-data-partitions">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Sometimes you need to perform a backup from an entire partition or even
        hard disk. Linux comes with the <code class="command">dd</code> tool which can
        create an exact copy of your disk. Combined with
        <code class="command">gzip</code> you save space.
      </p><div class="procedure" id="id-1.3.8.4.8.3.3" data-id-title="Backing up and restoring hard disks"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 48.3: </span><span class="title-name">Backing up and restoring hard disks </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.4.8.3.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/troubleshooting.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
            Start a Shell as user <code class="systemitem">root</code>.
          </p></li><li class="step"><p>
            Select your source device. Typically this is something like
            <code class="filename">/dev/sda</code> (labeled as
            <em class="replaceable">SOURCE</em>).
          </p></li><li class="step"><p>
            Decide where you want to store your image (labeled as
            <em class="replaceable">BACKUP_PATH</em>). It must be different from
            your source device. In other words: if you make a backup from
            <code class="filename">/dev/sda</code>, your image file must not to be
            stored under <code class="filename">/dev/sda</code>.
          </p></li><li class="step"><p>
            Run the commands to create a compressed image file:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>dd if=/dev/<em class="replaceable">SOURCE</em> | gzip &gt; /<em class="replaceable">BACKUP_PATH</em>/image.gz</pre></div></li><li class="step"><p>
            Restore the hard disk with the following commands:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>gzip -dc /<em class="replaceable">BACKUP_PATH</em>/image.gz | dd of=/dev/<em class="replaceable">SOURCE</em></pre></div></li></ol></div></div><p>
        If you only need to back up a partition, replace the
        <em class="replaceable">SOURCE</em> placeholder with your respective
        partition. In this case, your image file can lie on the same hard disk,
        but on a different partition.
      </p></section><section class="sect2" id="sec-trouble-data-recover-rescue" data-id-title="Using the rescue system"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">48.5.2 </span><span class="title-name">Using the rescue system</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-data-recover-rescue">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  There are several reasons a system could fail to come up and run properly. A
  corrupted file system following a system crash, corrupted configuration
  files, or a corrupted boot loader configuration are the most common ones.
 </p><p>
  To help you to resolve these situations, <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> contains a rescue
  system that you can boot. The rescue system is a small Linux system that can
  be loaded into a RAM disk and mounted as root file system, allowing you to
  access your Linux partitions from the outside. Using the rescue system, you
  can recover or modify any important aspect of your system.
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Manipulate any type of configuration file.
   </p></li><li class="listitem"><p>
    Check the file system for defects and start automatic repair processes.
   </p></li><li class="listitem"><p>
    Access the installed system in a <span class="quote">“<span class="quote">change root</span>”</span> environment.
   </p></li><li class="listitem"><p>
    Check, modify, and re-install the boot loader configuration.
   </p></li><li class="listitem"><p>
    Recover from a badly installed device driver or unusable kernel.
   </p></li><li class="listitem"><p>
    Resize partitions using the parted command. Find more information about
    this tool at the GNU Parted Web site
    <a class="link" href="https://www.gnu.org/software/parted/parted.html" target="_blank">https://www.gnu.org/software/parted/parted.html</a>.
   </p></li></ul></div><p>
  The rescue system can be loaded from various sources and locations. The
  simplest option is to boot the rescue system from the original installation
  medium.
 </p><div id="id-1.3.8.4.8.4.7" data-id-title="IBM Z: starting the rescue system" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: IBM Z: starting the rescue system</div><p>
   On IBM Z the installation system can be used for rescue purposes. To
   start the rescue system follow the instructions in
   <a class="xref" href="#sec-zseries-rescue" title="48.6. IBM Z: using initrd as a rescue system">Section 48.6, “IBM Z: using initrd as a rescue system”</a>.
  </p></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    Insert the installation medium into your DVD drive.
   </p></li><li class="step"><p>
    Reboot the system.
   </p></li><li class="step"><p>
    At the boot screen, press <span class="keycap">F4</span> and choose
    <span class="guimenu">DVD-ROM</span>. Then choose <span class="guimenu">Rescue System</span>
    from the main menu.
   </p></li><li class="step"><p>
    Enter <code class="literal">root</code> at the <code class="literal">Rescue:</code> prompt. A
    password is not required.
   </p></li></ol></div></div><div class="procedure" id="proc-trouble-data-recover-rescue-network"><div class="procedure-contents"><p>
   If your hardware setup does not include a DVD drive, you can boot the rescue
   system from a network source. The following example applies to a remote boot
   scenario—if using another boot medium, such as a DVD, modify the
   <code class="filename">info</code> file accordingly and boot as you would for a
   normal installation.
  </p><ol class="procedure" type="1"><li class="step"><p>
    Enter the configuration of your PXE boot setup and add the lines
    <code class="literal">install=<em class="replaceable">PROTOCOL</em>://<em class="replaceable">INSTSOURCE</em></code>
    and <code class="literal">rescue=1</code>. If you need to start the repair system,
    use <code class="literal">repair=1</code> instead. As with a normal installation,
    <em class="replaceable">PROTOCOL</em> stands for any of the supported network
    protocols (NFS, HTTP, FTP, etc.) and <em class="replaceable">INSTSOURCE</em>
    for the path to your network installation source.
   </p></li><li class="step"><p>
    Boot the system using <span class="quote">“<span class="quote">Wake on LAN</span>”</span><span class="phrase">, as
    described in <span class="intraxref">Book “Deployment Guide”, Chapter 18 “Preparing network boot environment”, Section 18.5 “Using wake-on-LAN for remote wakeups”</span></span>.
   </p></li><li class="step"><p>
    Enter <code class="literal">root</code> at the <code class="literal">Rescue:</code> prompt. A
    password is not required.
   </p></li></ol></div></div><p>
  When you have entered the rescue system, you can use the virtual consoles
  that can be reached with
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> to
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F6</span>.
 </p><p>
  A shell and other useful utilities, such as the mount program, are
  available in the <code class="filename">/bin</code> directory. The
  <code class="filename">/sbin</code> directory contains important file and network
  utilities for reviewing and repairing the file system. This directory also
  contains the most important binaries for system maintenance, such as
  <code class="command">fdisk</code>, <code class="command">mkfs</code>, <code class="command">mkswap</code>,
  <code class="command">mount</code>, and <code class="command">shutdown</code>,
  <code class="command">ip</code> and <code class="command">ss</code> for maintaining the network.
  The directory <code class="filename">/usr/bin</code> contains the vi editor, find,
  less, and SSH.
 </p><p>
  To see the system messages, either use the command <code class="command">dmesg</code>
  or view the system log with <code class="command">journalctl</code>.
 </p><section class="sect3" id="sec-trouble-data-recover-rescue-file" data-id-title="Checking and manipulating configuration files"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">48.5.2.1 </span><span class="title-name">Checking and manipulating configuration files</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-data-recover-rescue-file">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   As an example for a configuration that might be fixed using the rescue
   system, imagine you have a broken configuration file that prevents the
   system from booting properly. You can fix this using the rescue system.
  </p><div class="procedure"><div class="procedure-contents"><p>
    To manipulate a configuration file, proceed as follows:
   </p><ol class="procedure" type="1"><li class="step"><p>
     Start the rescue system using one of the methods described above.
    </p></li><li class="step"><p>
     To mount a root file system located under <code class="filename">/dev/sda6</code>
     to the rescue system, use the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> mount /dev/sda6 /mnt</pre></div><p>
     All directories of the system are now located under
     <code class="filename">/mnt</code>
    </p></li><li class="step"><p>
     Change the directory to the mounted root file system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> cd /mnt</pre></div></li><li class="step"><p>
     Open the problematic configuration file in the vi editor. Adjust and save
     the configuration.
    </p></li><li class="step"><p>
     Unmount the root file system from the rescue system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> umount /mnt</pre></div></li><li class="step"><p>
     Reboot the machine.
    </p></li></ol></div></div></section><section class="sect3" id="sec-trouble-data-recover-rescue-filesystem" data-id-title="Repairing and checking file systems"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">48.5.2.2 </span><span class="title-name">Repairing and checking file systems</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-data-recover-rescue-filesystem">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Generally, file systems cannot be repaired on a running system. If you
    encounter serious problems, you may not even be able to mount your root
    file system and the system boot may end with a <span class="quote">“<span class="quote">kernel panic</span>”</span>.
    In this case, the only way is to repair the system from the outside. The
    system contains the <code class="command">fsck</code> utility to check and repair
    multiple file system types, such as <code class="literal">ext2</code>,
    <code class="literal">ext3</code>, <code class="literal">ext4</code>, <code class="literal">msdos</code>,
    and <code class="literal">vfat</code>. Use the <code class="option">-t</code> option to specify
    which file system to check.
  </p><p>
    The following command checks all <code class="literal">ext4</code> file systems found
    in the <code class="filename">/etc/fstab</code> specification:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> fsck -t ext4 -A</pre></div><div id="id-1.3.8.4.8.4.14.5" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip</div><p>
    For Btrfs, you can use the <code class="command">btrfs check</code> command found in
    the <span class="package">btrfsprogs</span> package.
  </p><p>
    Find topics about the Btrfs file system in the following
    places:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        The Storage Administration Guide includes <a class="link" href="https://documentation.suse.com/sles/html/SLES-all/cha-filesystems.html#sec-filesystems-major-btrfs" target="_blank">https://documentation.suse.com/sles/html/SLES-all/cha-filesystems.html#sec-filesystems-major-btrfs</a>
        and <a class="link" href="https://documentation.suse.com/sles/html/SLES-all/cha-resize-fs.html#sec-resize-fs-btrfs" target="_blank">https://documentation.suse.com/sles/html/SLES-all/cha-resize-fs.html#sec-resize-fs-btrfs</a>
        sections.
      </p></li><li class="listitem"><p>
        The following article describes how to recover from Btrfs 
        errors <a class="link" href="https://www.suse.com/support/kb/doc/?id=000018769" target="_blank">https://www.suse.com/support/kb/doc/?id=000018769</a>.
      </p></li><li class="listitem"><p>
        The following article includes links to multiple Btrfs-related topics
        <a class="link" href="https://www.suse.com/support/kb/doc/?id=000018779" target="_blank">https://www.suse.com/support/kb/doc/?id=000018779</a>.
      </p></li><li class="listitem"><p>
        The <code class="command">man 8 btrfs-check</code> man page details all options
        of the <code class="command">btrfs check</code> command.
      </p></li></ul></div></div></section><section class="sect3" id="sec-trouble-data-recover-rescue-access" data-id-title="Accessing the installed system"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">48.5.2.3 </span><span class="title-name">Accessing the installed system</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-data-recover-rescue-access">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If you need to access the installed system from the rescue system, you need
   to do this in a <span class="emphasis"><em>change root</em></span> environment. For example,
   to modify the boot loader configuration, or to execute a hardware
   configuration utility.
  </p><p>
   To set up a change root environment based on the installed system, proceed
   as follows:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><div id="id-1.3.8.4.8.4.15.4.1.1" data-id-title="Import LVM volume groups" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Import LVM volume groups</div><p>
      If you are using an LVM setup (refer to <span class="intraxref">Book “Storage Administration Guide”</span> for more
      general details), import all existing volume groups to be able to
      find and mount the device(s):
     </p><div class="verbatim-wrap"><pre class="screen"><code class="systemitem">root</code>vgimport -a</pre></div></div><p>
     Run <code class="command">lsblk</code> to check which node corresponds to the root
     partition. It is <code class="filename">/dev/sda2</code> in our example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>lsblk
NAME        MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT
sda           8:0    0 149,1G  0 disk
├─sda1        8:1    0     2G  0 part  [SWAP]
├─sda2        8:2    0    20G  0 part  /
└─sda3        8:3    0   127G  0 part
  └─cr_home 254:0    0   127G  0 crypt /home</pre></div></li><li class="step"><p>
     Mount the root partition from the installed system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> mount /dev/sda2 /mnt</pre></div></li><li class="step"><p>
     Mount <code class="filename">/proc</code>, <code class="filename">/dev</code>, and
     <code class="filename">/sys</code> partitions:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> mount -t proc none /mnt/proc
<code class="prompt user">&gt; </code><code class="command">sudo</code> mount --rbind /dev /mnt/dev
<code class="prompt user">&gt; </code><code class="command">sudo</code> mount --rbind /sys /mnt/sys</pre></div></li><li class="step"><p>
     Now you can <span class="quote">“<span class="quote">change root</span>”</span> into the new environment, keeping
     the <code class="systemitem">bash</code> shell:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>chroot /mnt /bin/bash</pre></div></li><li class="step"><p>
     Finally, mount the remaining partitions from the installed system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>mount -a</pre></div></li><li class="step"><p>
     Now you have access to the installed system. Before rebooting the system,
     unmount the partitions with <code class="command">umount</code> <code class="option">-a</code>
     and leave the <span class="quote">“<span class="quote">change root</span>”</span> environment with
     <code class="command">exit</code>.
    </p></li></ol></div></div><div id="id-1.3.8.4.8.4.15.5" data-id-title="Limitations" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Limitations</div><p>
    Although you have full access to the files and applications of the
    installed system, there are some limitations. The kernel that is running is
    the one that was booted with the rescue system, not with the change root
    environment. It only supports essential hardware and it is not possible to
    add kernel modules from the installed system unless the kernel versions are
    identical. Always check the version of the currently running (rescue)
    kernel with <code class="command">uname -r</code> and then find out if a matching
    subdirectory exists in the <code class="filename">/lib/modules</code> directory in
    the change root environment. If yes, you can use the installed modules,
    otherwise you need to supply their correct versions on other media, such as
    a flash disk. Most often the rescue kernel version differs from the
    installed one — then you cannot simply access a sound card, for
    example. It is also not possible to start a graphical user interface.
   </p><p>
    Also note that you leave the <span class="quote">“<span class="quote">change root</span>”</span> environment when
    you switch the console with
    <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> to
    <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F6</span>.
   </p></div></section><section class="sect3" id="sec-trouble-data-recover-rescue-grub" data-id-title="Modifying and re-installing the boot loader"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">48.5.2.4 </span><span class="title-name">Modifying and re-installing the boot loader</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-data-recover-rescue-grub">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Sometimes a system cannot boot because the boot loader configuration is
   corrupted. The start-up routines cannot, for example, translate physical
   drives to the actual locations in the Linux file system without a working
   boot loader.
  </p><p>
   To check the boot loader configuration and re-install the boot loader,
   proceed as follows:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Perform the necessary steps to access the installed system as described in
     <a class="xref" href="#sec-trouble-data-recover-rescue-access" title="48.5.2.3. Accessing the installed system">Section 48.5.2.3, “Accessing the installed system”</a>.
    </p></li><li class="step"><p>
     Check that the GRUB 2 boot loader is installed on the system. If not,
     install the package <code class="systemitem">grub2</code> and run
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> grub2-install /dev/sda</pre></div></li><li class="step"><p>
     Check whether the following files are correctly configured according to
     the GRUB 2 configuration principles outlined in
     <a class="xref" href="#cha-grub2" title="Chapter 18. The boot loader GRUB 2">Chapter 18, <em>The boot loader GRUB 2</em></a> and apply fixes if necessary.
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       <code class="filename">/etc/default/grub</code>
      </p></li><li class="listitem"><p>
       <code class="filename">/boot/grub2/device.map</code>
      </p></li><li class="listitem"><p>
       <code class="filename">/boot/grub2/grub.cfg</code> (this file is generated, do
       not edit)
      </p></li><li class="listitem"><p>
       <code class="filename">/etc/sysconfig/bootloader</code>
      </p></li></ul></div></li><li class="step"><p>
     Re-install the boot loader using the following command sequence:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> grub2-mkconfig -o /boot/grub2/grub.cfg</pre></div></li><li class="step"><p>
     Unmount the partitions, log out of the <span class="quote">“<span class="quote">change root</span>”</span>
     environment, and reboot the system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>umount -a
exit
reboot</pre></div></li></ol></div></div></section><section class="sect3" id="sec-trouble-data-recover-rescue-dud" data-id-title="Fixing kernel installation"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">48.5.2.5 </span><span class="title-name">Fixing kernel installation</span></span> <a title="Permalink" class="permalink" href="#sec-trouble-data-recover-rescue-dud">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/system_repair.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A kernel update may introduce a new bug which can impact the operation of
   your system. For example a driver for a piece of hardware in your system may
   be faulty, which prevents you from accessing and using it. In this case,
   revert to the last working kernel (if available on the system) or install
   the original kernel from the installation media.
  </p><div id="id-1.3.8.4.8.4.17.3" data-id-title="How to keep last kernels after update" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: How to keep last kernels after update</div><p>
    To prevent failures to boot after a faulty kernel update, use the kernel
    multiversion feature and tell <code class="systemitem">libzypp</code> which
    kernels you want to keep after the update.
   </p><p>
    For example to always keep the last two kernels and the currently running
    one, add
   </p><div class="verbatim-wrap"><pre class="screen">multiversion.kernels = latest,latest-1,running</pre></div><p>
    to the <code class="filename">/etc/zypp/zypp.conf</code> file. See
    <a class="xref" href="#cha-tuning-multikernel" title="Chapter 27. Installing multiple kernel versions">Chapter 27, <em>Installing multiple kernel versions</em></a> for more information.
   </p></div><p>
   A similar case is when you need to re-install or update a broken driver for
   a device not supported by <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. For example when a hardware vendor
   uses a specific device, such as a hardware RAID controller, which needs a
   binary driver to be recognized by the operating system. The vendor typically
   releases a Driver Update Disk (DUD) with the fixed or updated version of the
   required driver.
  </p><p>
   In both cases you need to access the installed system in the rescue mode and
   fix the kernel related problem, otherwise the system may fail to boot
   correctly:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Boot from the <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> installation media.
    </p></li><li class="step"><p>
     If you are recovering after a faulty kernel update, skip this step. If you
     need to use a driver update disk (DUD), press <span class="keycap">F6</span> to load
     the driver update after the boot menu appears, and choose the path or URL
     to the driver update and confirm with <span class="guimenu">Yes</span>.
    </p></li><li class="step"><p>
     Choose <span class="guimenu">Rescue System</span> from the boot menu and press
     <span class="keycap">Enter</span>. If you chose to use DUD, you will be asked to
     specify where the driver update is stored.
    </p></li><li class="step"><p>
     Enter <code class="literal">root</code> at the <code class="literal">Rescue:</code> prompt. A
     password is not required.
    </p></li><li class="step"><p>
     Manually mount the target system and <span class="quote">“<span class="quote">change root</span>”</span> into the
     new environment. For more information, see
     <a class="xref" href="#sec-trouble-data-recover-rescue-access" title="48.5.2.3. Accessing the installed system">Section 48.5.2.3, “Accessing the installed system”</a>.
    </p></li><li class="step"><p>
     If using DUD, install/re-install/update the faulty device driver package.
     Always make sure the installed kernel version exactly matches the version
     of the driver you are installing.
    </p><p>
     If fixing faulty kernel update installation, you can install the original
     kernel from the installation media with the following procedure.
    </p><ol type="a" class="substeps"><li class="step"><p>
       Identify your DVD device with <code class="command">hwinfo --cdrom</code> and
       mount it with <code class="command">mount /dev/sr0 /mnt</code>.
      </p></li><li class="step"><p>
       Navigate to the directory where your kernel files are stored on the DVD,
       for example <code class="command">cd /mnt/suse/x86_64/</code>.
      </p></li><li class="step"><p>
       Install required <code class="systemitem">kernel-*</code>,
       <code class="systemitem">kernel-*-base</code>, and
       <code class="systemitem">kernel-*-extra</code> packages of your flavor with the
       <code class="command">rpm -i</code> command.
      </p></li></ol></li><li class="step"><p>
     Update configuration files and reinitialize the boot loader if needed. For
     more information, see
     <a class="xref" href="#sec-trouble-data-recover-rescue-grub" title="48.5.2.4. Modifying and re-installing the boot loader">Section 48.5.2.4, “Modifying and re-installing the boot loader”</a>.
    </p></li><li class="step"><p>
     Remove any bootable media from the system drive and reboot.
    </p></li></ol></div></div></section></section></section><section class="sect1" id="sec-zseries-rescue" data-id-title="IBM Z: using initrd as a rescue system"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">48.6 </span><span class="title-name">IBM Z: using initrd as a rescue system</span></span> <a title="Permalink" class="permalink" href="#sec-zseries-rescue">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zseries_rescue_initrd.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  If the kernel of the SUSE® Linux Enterprise Server for IBM Z is upgraded or modified, it
  is possible to reboot the system accidentally in an inconsistent state, so
  standard procedures of IPLing the installed system fail. In such a case, you
  may use the installation system for rescue purposes.
 </p><p>
  IPL the SUSE Linux Enterprise Server for IBM Z installation system as described in
  <span class="intraxref">Book “Deployment Guide”, Chapter 5 “Installation on IBM Z and LinuxONE”, Section 5.3 “Preparing for installation”</span>. Choose <span class="guimenu">Start
  Installation</span> and enter all required parameters. After the
  installation system has loaded and you are asked which display type to use to
  control the installation, select <code class="literal">SSH</code>. Now you can log in
  to the system with SSH as <code class="systemitem">root</code> without a password.
 </p><p>
  In this state, no disks are configured. You need to configure them before you
  can proceed.
 </p><div class="procedure" id="id-1.3.8.4.9.6" data-id-title="Configuring DASDs"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 48.4: </span><span class="title-name">Configuring DASDs </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.4.9.6">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zseries_rescue_initrd.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    Configure DASDs with the following command:
   </p><div class="verbatim-wrap"><pre class="screen">dasd_configure 0.0.0150 1 0</pre></div><p>
    0.0.0150 is the channel to which the DASD is connected. The
    <code class="literal">1</code> means activate the disk (a <code class="literal">0</code> at
    this place would deactivate the disk). The <code class="literal">0</code> stands for
    <span class="quote">“<span class="quote">no DIAG mode</span>”</span> for the disk (a <code class="literal">1</code> here would
    enable DAIG access to the disk).
   </p></li><li class="step"><p>
    Now the DASD is online (check with <code class="command">cat /proc/partitions</code>)
    and can used for subsequent commands.
   </p></li></ol></div></div><div class="procedure" id="id-1.3.8.4.9.7" data-id-title="Configuring a zFCP disk"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 48.5: </span><span class="title-name">Configuring a zFCP disk </span></span><a title="Permalink" class="permalink" href="#id-1.3.8.4.9.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zseries_rescue_initrd.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
    To configure a zFCP disk, it is necessary to first configure the zFCP
    adapter. Do this with the following command:
   </p><div class="verbatim-wrap"><pre class="screen">zfcp_host_configure 0.0.4000 1</pre></div><p>
    <code class="literal">0.0.4000</code> is the channel to which the adapter is attached
    and <code class="literal">1</code> stands for activate (a <code class="literal">0</code> here
    would deactivate the adapter).
   </p></li><li class="step"><p>
    After the adapter is activated, a disk can be configured. Do this with the
    following command:
   </p><div class="verbatim-wrap"><pre class="screen">zfcp_disk_configure 0.0.4000 1234567887654321 8765432100000000  1</pre></div><p>
    <code class="literal">0.0.4000</code> is the previously-used channel ID,
    <code class="literal">1234567887654321</code> is the WWPN (World wide Port Number),
    and <code class="literal">8765432100000000</code> is the LUN (logical unit number).
    The <code class="literal">1</code> stands for activating the disk (a
    <code class="literal">0</code> here would deactivate the disk).
   </p></li><li class="step"><p>
    Now the zFCP disk is online (check with <code class="command">cat
    /proc/partitions</code>) and can used for subsequent commands.
   </p></li></ol></div></div><p>
  Now the rescue system is fully set up and you can start repairing the
  installed system. See <a class="xref" href="#sec-trouble-data-recover-rescue" title="48.5.2. Using the rescue system">Section 48.5.2, “Using the rescue system”</a> for
  instructions on how to repair the most common issues.
 </p></section><section class="sect1" id="sec-zseries-boot-new-kernel" data-id-title="IBM Z: After a kernel update the system boots into the previous kernel"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">48.7 </span><span class="title-name">IBM Z: After a kernel update the system boots into the previous kernel</span></span> <a title="Permalink" class="permalink" href="#sec-zseries-boot-new-kernel">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/zseries_boot_new_kernel.xml" title="Edit source document"> </a></div></div></div></div></div><p>
 Installing a new kernel version on an IBM Z system does not automatically
 update the <code class="literal">stage 1</code> zipl loader. This means that after a restart the system
 boots into the old kernel. And if secure boot is enabled, booting fails when
 the old kernel is signed with a signing key that has been retracted by, for example, a
 shim update at the same time.
 </p><p>
 To solve the problem, refresh zipl to make it aware of the new kernel version.
 To do this, run the following command after you install the new kernel:
 </p><div class="verbatim-wrap"><pre class="screen">grub2-emu --kexec</pre></div><p>
 In the grub2 boot menu, choose the new kernel to reboot. Run the command above
 the second time for the changes to take effect. Finally, run the following
 command to reinstall the boot loader:
 </p><div class="verbatim-wrap"><pre class="screen">update-bootloader --reinit</pre></div></section></section></div><section class="appendix" id="app-nwscheme" data-id-title="An example network"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">A </span><span class="title-name">An example network</span></span> <a title="Permalink" class="permalink" href="#app-nwscheme">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/network_scheme.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  This example network is used across all network-related chapters of the
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> documentation.
 </p><div class="informalfigure"><div class="mediaobject"><a href="images/network_schema.png"><img src="images/network_schema.png" width="100%" alt="Image" title="Image"/></a></div></div></section><div class="legal-section"><section class="appendix" id="id-1.3.10" data-id-title="GNU licenses"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">B </span><span class="title-name">GNU licenses</span></span> <a title="Permalink" class="permalink" href="#id-1.3.10">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_legal.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  This appendix contains the GNU Free Documentation License version 1.2.
 </p><section class="sect1" id="id-1.3.10.4" data-id-title="GNU Free Documentation License"><div class="titlepage"><div><div><div class="title-container"><h2 class="title legal"><span class="title-number-name"><span class="title-name">GNU Free Documentation License</span></span> <a title="Permalink" class="permalink" href="#id-1.3.10.4">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/main/xml/common_license_gfdl1.2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Copyright (C) 2000, 2001, 2002 Free Software Foundation, Inc. 51 Franklin St,
  Fifth Floor, Boston, MA 02110-1301 USA. Everyone is permitted to copy and
  distribute verbatim copies of this license document, but changing it is not
  allowed.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.4"><span class="name">
    0. PREAMBLE
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.4">#</a></h5></div><p>
  The purpose of this License is to make a manual, textbook, or other
  functional and useful document "free" in the sense of freedom: to assure
  everyone the effective freedom to copy and redistribute it, with or without
  modifying it, either commercially or non-commercially. Secondarily, this
  License preserves for the author and publisher a way to get credit for their
  work, while not being considered responsible for modifications made by
  others.
 </p><p>
  This License is a kind of "copyleft", which means that derivative works of
  the document must themselves be free in the same sense. It complements the
  GNU General Public License, which is a copyleft license designed for free
  software.
 </p><p>
  We have designed this License to use it for manuals for free software,
  because free software needs free documentation: a free program should come
  with manuals providing the same freedoms that the software does. But this
  License is not limited to software manuals; it can be used for any textual
  work, regardless of subject matter or whether it is published as a printed
  book. We recommend this License principally for works whose purpose is
  instruction or reference.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.8"><span class="name">
    1. APPLICABILITY AND DEFINITIONS
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.8">#</a></h5></div><p>
  This License applies to any manual or other work, in any medium, that
  contains a notice placed by the copyright holder saying it can be distributed
  under the terms of this License. Such a notice grants a world-wide,
  royalty-free license, unlimited in duration, to use that work under the
  conditions stated herein. The "Document", below, refers to any such manual or
  work. Any member of the public is a licensee, and is addressed as "you". You
  accept the license if you copy, modify or distribute the work in a way
  requiring permission under copyright law.
 </p><p>
  A "Modified Version" of the Document means any work containing the Document
  or a portion of it, either copied verbatim, or with modifications and/or
  translated into another language.
 </p><p>
  A "Secondary Section" is a named appendix or a front-matter section of the
  Document that deals exclusively with the relationship of the publishers or
  authors of the Document to the Document's overall subject (or to related
  matters) and contains nothing that could fall directly within that overall
  subject. (Thus, if the Document is in part a textbook of mathematics, a
  Secondary Section may not explain any mathematics.) The relationship could be
  a matter of historical connection with the subject or with related matters,
  or of legal, commercial, philosophical, ethical or political position
  regarding them.
 </p><p>
  The "Invariant Sections" are certain Secondary Sections whose titles are
  designated, as being those of Invariant Sections, in the notice that says
  that the Document is released under this License. If a section does not fit
  the above definition of Secondary then it is not allowed to be designated as
  Invariant. The Document may contain zero Invariant Sections. If the Document
  does not identify any Invariant Sections then there are none.
 </p><p>
  The "Cover Texts" are certain short passages of text that are listed, as
  Front-Cover Texts or Back-Cover Texts, in the notice that says that the
  Document is released under this License. A Front-Cover Text may be at most 5
  words, and a Back-Cover Text may be at most 25 words.
 </p><p>
  A "Transparent" copy of the Document means a machine-readable copy,
  represented in a format whose specification is available to the general
  public, that is suitable for revising the document straightforwardly with
  generic text editors or (for images composed of pixels) generic paint
  programs or (for drawings) some widely available drawing editor, and that is
  suitable for input to text formatters or for automatic translation to a
  variety of formats suitable for input to text formatters. A copy made in an
  otherwise Transparent file format whose markup, or absence of markup, has
  been arranged to thwart or discourage subsequent modification by readers is
  not Transparent. An image format is not Transparent if used for any
  substantial amount of text. A copy that is not "Transparent" is called
  "Opaque".
 </p><p>
  Examples of suitable formats for Transparent copies include plain ASCII
  without markup, Texinfo input format, LaTeX input format, SGML or XML using a
  publicly available DTD, and standard-conforming simple HTML, PostScript or
  PDF designed for human modification. Examples of transparent image formats
  include PNG, XCF and JPG. Opaque formats include proprietary formats that can
  be read and edited only by proprietary word processors, SGML or XML for which
  the DTD and/or processing tools are not generally available, and the
  machine-generated HTML, PostScript or PDF produced by some word processors
  for output purposes only.
 </p><p>
  The "Title Page" means, for a printed book, the title page itself, plus such
  following pages as are needed to hold, legibly, the material this License
  requires to appear in the title page. For works in formats which do not have
  any title page as such, "Title Page" means the text near the most prominent
  appearance of the work's title, preceding the beginning of the body of the
  text.
 </p><p>
  A section "Entitled XYZ" means a named subunit of the Document whose title
  either is precisely XYZ or contains XYZ in parentheses following text that
  translates XYZ in another language. (Here XYZ stands for a specific section
  name mentioned below, such as "Acknowledgements", "Dedications",
  "Endorsements", or "History".) To "Preserve the Title" of such a section when
  you modify the Document means that it remains a section "Entitled XYZ"
  according to this definition.
 </p><p>
  The Document may include Warranty Disclaimers next to the notice which states
  that this License applies to the Document. These Warranty Disclaimers are
  considered to be included by reference in this License, but only as regards
  disclaiming warranties: any other implication that these Warranty Disclaimers
  may have is void and has no effect on the meaning of this License.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.19"><span class="name">
    2. VERBATIM COPYING
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.19">#</a></h5></div><p>
  You may copy and distribute the Document in any medium, either commercially
  or non-commercially, provided that this License, the copyright notices, and
  the license notice saying this License applies to the Document are reproduced
  in all copies, and that you add no other conditions whatsoever to those of
  this License. You may not use technical measures to obstruct or control the
  reading or further copying of the copies you make or distribute. However, you
  may accept compensation in exchange for copies. If you distribute a large
  enough number of copies you must also follow the conditions in section 3.
 </p><p>
  You may also lend copies, under the same conditions stated above, and you may
  publicly display copies.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.22"><span class="name">
    3. COPYING IN QUANTITY
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.22">#</a></h5></div><p>
  If you publish printed copies (or copies in media that commonly have printed
  covers) of the Document, numbering more than 100, and the Document's license
  notice requires Cover Texts, you must enclose the copies in covers that
  carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the
  front cover, and Back-Cover Texts on the back cover. Both covers must also
  clearly and legibly identify you as the publisher of these copies. The front
  cover must present the full title with all words of the title equally
  prominent and visible. You may add other material on the covers in addition.
  Copying with changes limited to the covers, as long as they preserve the
  title of the Document and satisfy these conditions, can be treated as
  verbatim copying in other respects.
 </p><p>
  If the required texts for either cover are too voluminous to fit legibly, you
  should put the first ones listed (as many as fit reasonably) on the actual
  cover, and continue the rest onto adjacent pages.
 </p><p>
  If you publish or distribute Opaque copies of the Document numbering more
  than 100, you must either include a machine-readable Transparent copy along
  with each Opaque copy, or state in or with each Opaque copy a
  computer-network location from which the general network-using public has
  access to download using public-standard network protocols a complete
  Transparent copy of the Document, free of added material. If you use the
  latter option, you must take reasonably prudent steps, when you begin
  distribution of Opaque copies in quantity, to ensure that this Transparent
  copy will remain thus accessible at the stated location until at least one
  year after the last time you distribute an Opaque copy (directly or through
  your agents or retailers) of that edition to the public.
 </p><p>
  It is requested, but not required, that you contact the authors of the
  Document well before redistributing any large number of copies, to give them
  a chance to provide you with an updated version of the Document.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.27"><span class="name">
    4. MODIFICATIONS
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.27">#</a></h5></div><p>
  You may copy and distribute a Modified Version of the Document under the
  conditions of sections 2 and 3 above, provided that you release the Modified
  Version under precisely this License, with the Modified Version filling the
  role of the Document, thus licensing distribution and modification of the
  Modified Version to whoever possesses a copy of it. In addition, you must do
  these things in the Modified Version:
 </p><div class="orderedlist"><ol class="orderedlist" type="A"><li class="listitem"><p>
    Use in the Title Page (and on the covers, if any) a title distinct from
    that of the Document, and from those of previous versions (which should, if
    there were any, be listed in the History section of the Document). You may
    use the same title as a previous version if the original publisher of that
    version gives permission.
   </p></li><li class="listitem"><p>
    List on the Title Page, as authors, one or more persons or entities
    responsible for authorship of the modifications in the Modified Version,
    together with at least five of the principal authors of the Document (all
    of its principal authors, if it has fewer than five), unless they release
    you from this requirement.
   </p></li><li class="listitem"><p>
    State on the Title page the name of the publisher of the Modified Version,
    as the publisher.
   </p></li><li class="listitem"><p>
    Preserve all the copyright notices of the Document.
   </p></li><li class="listitem"><p>
    Add an appropriate copyright notice for your modifications adjacent to the
    other copyright notices.
   </p></li><li class="listitem"><p>
    Include, immediately after the copyright notices, a license notice giving
    the public permission to use the Modified Version under the terms of this
    License, in the form shown in the Addendum below.
   </p></li><li class="listitem"><p>
    Preserve in that license notice the full lists of Invariant Sections and
    required Cover Texts given in the Document's license notice.
   </p></li><li class="listitem"><p>
    Include an unaltered copy of this License.
   </p></li><li class="listitem"><p>
    Preserve the section Entitled "History", Preserve its Title, and add to it
    an item stating at least the title, year, new authors, and publisher of the
    Modified Version as given on the Title Page. If there is no section
    Entitled "History" in the Document, create one stating the title, year,
    authors, and publisher of the Document as given on its Title Page, then add
    an item describing the Modified Version as stated in the previous sentence.
   </p></li><li class="listitem"><p>
    Preserve the network location, if any, given in the Document for public
    access to a Transparent copy of the Document, and likewise the network
    locations given in the Document for previous versions it was based on.
    These may be placed in the "History" section. You may omit a network
    location for a work that was published at least four years before the
    Document itself, or if the original publisher of the version it refers to
    gives permission.
   </p></li><li class="listitem"><p>
    For any section Entitled "Acknowledgements" or "Dedications", Preserve the
    Title of the section, and preserve in the section all the substance and
    tone of each of the contributor acknowledgements and/or dedications given
    therein.
   </p></li><li class="listitem"><p>
    Preserve all the Invariant Sections of the Document, unaltered in their
    text and in their titles. Section numbers or the equivalent are not
    considered part of the section titles.
   </p></li><li class="listitem"><p>
    Delete any section Entitled "Endorsements". Such a section may not be
    included in the Modified Version.
   </p></li><li class="listitem"><p>
    Do not retitle any existing section to be Entitled "Endorsements" or to
    conflict in title with any Invariant Section.
   </p></li><li class="listitem"><p>
    Preserve any Warranty Disclaimers.
   </p></li></ol></div><p>
  If the Modified Version includes new front-matter sections or appendices that
  qualify as Secondary Sections and contain no material copied from the
  Document, you may at your option designate some or all of these sections as
  invariant. To do this, add their titles to the list of Invariant Sections in
  the Modified Version's license notice. These titles must be distinct from any
  other section titles.
 </p><p>
  You may add a section Entitled "Endorsements", provided it contains nothing
  but endorsements of your Modified Version by various parties--for example,
  statements of peer review or that the text has been approved by an
  organization as the authoritative definition of a standard.
 </p><p>
  You may add a passage of up to five words as a Front-Cover Text, and a
  passage of up to 25 words as a Back-Cover Text, to the end of the list of
  Cover Texts in the Modified Version. Only one passage of Front-Cover Text and
  one of Back-Cover Text may be added by (or through arrangements made by) any
  one entity. If the Document already includes a cover text for the same cover,
  previously added by you or by arrangement made by the same entity you are
  acting on behalf of, you may not add another; but you may replace the old
  one, on explicit permission from the previous publisher that added the old
  one.
 </p><p>
  The author(s) and publisher(s) of the Document do not by this License give
  permission to use their names for publicity for or to assert or imply
  endorsement of any Modified Version.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.34"><span class="name">
    5. COMBINING DOCUMENTS
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.34">#</a></h5></div><p>
  You may combine the Document with other documents released under this
  License, under the terms defined in section 4 above for modified versions,
  provided that you include in the combination all of the Invariant Sections of
  all of the original documents, unmodified, and list them all as Invariant
  Sections of your combined work in its license notice, and that you preserve
  all their Warranty Disclaimers.
 </p><p>
  The combined work need only contain one copy of this License, and multiple
  identical Invariant Sections may be replaced with a single copy. If there are
  multiple Invariant Sections with the same name but different contents, make
  the title of each such section unique by adding at the end of it, in
  parentheses, the name of the original author or publisher of that section if
  known, or else a unique number. Make the same adjustment to the section
  titles in the list of Invariant Sections in the license notice of the
  combined work.
 </p><p>
  In the combination, you must combine any sections Entitled "History" in the
  various original documents, forming one section Entitled "History"; likewise
  combine any sections Entitled "Acknowledgements", and any sections Entitled
  "Dedications". You must delete all sections Entitled "Endorsements".
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.38"><span class="name">
    6. COLLECTIONS OF DOCUMENTS
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.38">#</a></h5></div><p>
  You may make a collection consisting of the Document and other documents
  released under this License, and replace the individual copies of this
  License in the various documents with a single copy that is included in the
  collection, provided that you follow the rules of this License for verbatim
  copying of each of the documents in all other respects.
 </p><p>
  You may extract a single document from such a collection, and distribute it
  individually under this License, provided you insert a copy of this License
  into the extracted document, and follow this License in all other respects
  regarding verbatim copying of that document.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.41"><span class="name">
    7. AGGREGATION WITH INDEPENDENT WORKS
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.41">#</a></h5></div><p>
  A compilation of the Document or its derivatives with other separate and
  independent documents or works, in or on a volume of a storage or
  distribution medium, is called an "aggregate" if the copyright resulting from
  the compilation is not used to limit the legal rights of the compilation's
  users beyond what the individual works permit. When the Document is included
  in an aggregate, this License does not apply to the other works in the
  aggregate which are not themselves derivative works of the Document.
 </p><p>
  If the Cover Text requirement of section 3 is applicable to these copies of
  the Document, then if the Document is less than one half of the entire
  aggregate, the Document's Cover Texts may be placed on covers that bracket
  the Document within the aggregate, or the electronic equivalent of covers if
  the Document is in electronic form. Otherwise they must appear on printed
  covers that bracket the whole aggregate.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.44"><span class="name">
    8. TRANSLATION
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.44">#</a></h5></div><p>
  Translation is considered a kind of modification, so you may distribute
  translations of the Document under the terms of section 4. Replacing
  Invariant Sections with translations requires special permission from their
  copyright holders, but you may include translations of some or all Invariant
  Sections in addition to the original versions of these Invariant Sections.
  You may include a translation of this License, and all the license notices in
  the Document, and any Warranty Disclaimers, provided that you also include
  the original English version of this License and the original versions of
  those notices and disclaimers. In case of a disagreement between the
  translation and the original version of this License or a notice or
  disclaimer, the original version will prevail.
 </p><p>
  If a section in the Document is Entitled "Acknowledgements", "Dedications",
  or "History", the requirement (section 4) to Preserve its Title (section 1)
  will typically require changing the actual title.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.47"><span class="name">
    9. TERMINATION
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.47">#</a></h5></div><p>
  You may not copy, modify, sublicense, or distribute the Document except as
  expressly provided for under this License. Any other attempt to copy, modify,
  sublicense or distribute the Document is void, and will automatically
  terminate your rights under this License. However, parties who have received
  copies, or rights, from you under this License will not have their licenses
  terminated so long as such parties remain in full compliance.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.49"><span class="name">
    10. FUTURE REVISIONS OF THIS LICENSE
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.49">#</a></h5></div><p>
  The Free Software Foundation may publish new, revised versions of the GNU
  Free Documentation License from time to time. Such new versions will be
  similar in spirit to the present version, but may differ in detail to address
  new problems or concerns. See
  <a class="link" href="https://www.gnu.org/copyleft/" target="_blank">https://www.gnu.org/copyleft/</a>.
 </p><p>
  Each version of the License is given a distinguishing version number. If the
  Document specifies that a particular numbered version of this License "or any
  later version" applies to it, you have the option of following the terms and
  conditions either of that specified version or of any later version that has
  been published (not as a draft) by the Free Software Foundation. If the
  Document does not specify a version number of this License, you may choose
  any version ever published (not as a draft) by the Free Software Foundation.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.3.10.4.52"><span class="name">
    ADDENDUM: How to use this License for your documents
  </span><a title="Permalink" class="permalink" href="#id-1.3.10.4.52">#</a></h5></div><div class="verbatim-wrap"><pre class="screen">Copyright (c) YEAR YOUR NAME.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled “GNU
Free Documentation License”.</pre></div><p>
  If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
  replace the “with...Texts.” line with this:
 </p><div class="verbatim-wrap"><pre class="screen">with the Invariant Sections being LIST THEIR TITLES, with the
Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</pre></div><p>
  If you have Invariant Sections without Cover Texts, or some other combination
  of the three, merge those two alternatives to suit the situation.
 </p><p>
  If your document contains nontrivial examples of program code, we recommend
  releasing these examples in parallel under your choice of free software
  license, such as the GNU General Public License, to permit their use in free
  software.
 </p></section></section></div></section></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>