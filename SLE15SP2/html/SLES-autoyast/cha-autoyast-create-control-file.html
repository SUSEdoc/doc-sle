<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLES 15 SP2 | AutoYaST Guide | Creating an AutoYaST Control File</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Creating an AutoYaST Control File | SLES 15 SP2"/>
<meta name="description" content="To create the control file, you need to collect information about the systems you are going to install. This includes hardware data and network infor…"/>
<meta name="product-name" content="SUSE Linux Enterprise Server"/>
<meta name="product-number" content="15 SP2"/>
<meta name="book-title" content="AutoYaST Guide"/>
<meta name="chapter-title" content="Chapter 3. Creating an AutoYaST Control File"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="fs@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE Linux Enterprise Server 15 SP2"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="AutoYaST Guide"/>
<meta property="og:description" content="Automate SLES installation with AutoYaST"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="AutoYaST Guide"/>
<meta name="twitter:description" content="Automate SLES installation with AutoYaST"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Creating an AutoYaST Control File",
  
    "description": "Creating an AutoYaST Control File",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-06-05T00:00+02:00",
      
    "datePublished": "2020-07-21T00:00+02:00",
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-autoyast-control-file.html" title="Chapter 2. The AutoYaST Control File"/><link rel="next" href="part-configuration.html" title="Part II. AutoYaST Configuration Examples"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sle/edit/maintenance/SLE15SP2/xml/ay_create_control_file.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">AutoYaST Guide</a><span> / </span><a class="crumb" href="part-control.html">Understanding and Creating the AutoYaST Control File</a><span> / </span><a class="crumb" href="cha-autoyast-create-control-file.html">Creating an AutoYaST Control File</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">AutoYaST Guide</div><ol><li><a href="cha-intro-to-autoyast.html" class=" "><span class="title-number">1 </span><span class="title-name">Introduction to AutoYaST</span></a></li><li class="active"><a href="part-control.html" class="has-children you-are-here"><span class="title-number">I </span><span class="title-name">Understanding and Creating the AutoYaST Control File</span></a><ol><li><a href="cha-autoyast-control-file.html" class=" "><span class="title-number">2 </span><span class="title-name">The AutoYaST Control File</span></a></li><li><a href="cha-autoyast-create-control-file.html" class=" you-are-here"><span class="title-number">3 </span><span class="title-name">Creating an AutoYaST Control File</span></a></li></ol></li><li><a href="part-configuration.html" class="has-children "><span class="title-number">II </span><span class="title-name">AutoYaST Configuration Examples</span></a><ol><li><a href="cha-configuration-installation-options.html" class=" "><span class="title-number">4 </span><span class="title-name">Configuration and Installation Options</span></a></li></ol></li><li><a href="part-rules-classes.html" class="has-children "><span class="title-number">III </span><span class="title-name">Managing Mass Installations with Rules and Classes</span></a><ol><li><a href="rulesandclass.html" class=" "><span class="title-number">5 </span><span class="title-name">Rules and Classes</span></a></li></ol></li><li><a href="bk05pt04.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Understanding the Auto-Installation Process</span></a><ol><li><a href="Invoking.html" class=" "><span class="title-number">6 </span><span class="title-name">The Auto-Installation Process</span></a></li></ol></li><li><a href="bk05pt05.html" class="has-children "><span class="title-number">V </span><span class="title-name">Uses for AutoYaST on Installed Systems</span></a><ol><li><a href="InstalledSystem.html" class=" "><span class="title-number">7 </span><span class="title-name">Running AutoYaST in an Installed System</span></a></li></ol></li><li><a href="bk05pt06.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Appendices</span></a><ol><li><a href="handlingrules.html" class=" "><span class="title-number">A </span><span class="title-name">Handling Rules</span></a></li><li><a href="app-ay-faq.html" class=" "><span class="title-number">B </span><span class="title-name">AutoYaST FAQ—Frequently Asked Questions</span></a></li><li><a href="appendix-linuxrc.html" class=" "><span class="title-number">C </span><span class="title-name">Advanced <code class="command">linuxrc</code> Options</span></a></li><li><a href="appendix-ay-12vs15.html" class=" "><span class="title-number">D </span><span class="title-name">
  Differences Between AutoYaST Profiles in SLE <span class="phrase">12</span> and 15
 </span></a></li></ol></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-autoyast-create-control-file" data-id-title="Creating an AutoYaST Control File"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15 SP2</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Creating an AutoYaST Control File</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE15SP2/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect1" id="Autoinstallation-collectInfo" data-id-title="Collecting Information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.1 </span><span class="title-name">Collecting Information</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#Autoinstallation-collectInfo">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE15SP2/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To create the control file, you need to collect information about the
    systems you are going to install. This includes hardware data and
    network information among other things. Make sure you have the following
    information about the machines you want to install:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Hard disk types and sizes
     </p></li><li class="listitem"><p>
      Graphical interface and attached monitor, if any
     </p></li><li class="listitem"><p>
      Network interface and MAC address if known (for example, when using
      DHCP)
     </p></li></ul></div><p>
    Also verify that both <span class="package">autoyast2-installation</span> and 
    <span class="package">autoyast2</span> are installed.
   </p></section><section class="sect1" id="CreateProfile-CMS" data-id-title="Using the Configuration Management System (CMS)"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.2 </span><span class="title-name">Using the Configuration Management System (CMS)</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-CMS">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE15SP2/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To create the control file for one or more computers, a configuration
    interface based on YaST is provided. This system depends on
    existing modules which are usually used to configure a computer in
    regular operation mode, for example, after <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is
    installed.
   </p><p>
    The configuration management system lets you easily create control files and
    manage a repository of configurations for use in a networked environment
    with multiple clients.
   </p><div class="figure" id="id-1.7.3.3.4.4"><div class="figure-contents"><div class="mediaobject"><a href="images/autoyast2-maindialog.png"><img src="images/autoyast2-maindialog.png" alt="Configuration System" title="Configuration System"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 3.1: </span><span class="title-name">Configuration System </span></span><a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#id-1.7.3.3.4.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE15SP2/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div><section class="sect2" id="CreateProfile-CMS-new" data-id-title="Creating a New Control File"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.2.1 </span><span class="title-name">Creating a New Control File</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-CMS-new">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE15SP2/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The easiest way to create an AutoYaST profile is to use an existing
      <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> system as a template. On an already installed system,
      launch <span class="guimenu">YaST</span> › <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation Configuration</span>. Then
      select <span class="guimenu">Tools</span> › <span class="guimenu">Create Reference
       Profile</span> from the menu. Choose the system
      components you want to include in the profile. Alternatively, create a
      profile containing the complete system configuration by launching
      <span class="guimenu">YaST</span> › <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation Cloning System</span> or
      running <code class="command">sudo yast clone_system</code> from the command line.
     </p><p>
      Both methods will create the file
      <code class="filename">/root/autoinst.xml</code>. The cloned profile can be used
      to set up an identical clone of the system it was created from. However,
      you usually want to adjust the file to allow for installing multiple
      machines that are very similar, but not identical. This can be done by
      adjusting the profile with your favorite text/XML editor.
     </p><p>
     With some exceptions, almost all resources of the control file can be
     configured using the configuration management system. The system offers
     flexibility and the configuration of some resources is identical to the
     one available in the YaST control center. In addition to the
     existing and familiar modules new interfaces were created for special
     and complex configurations, for example for partitioning, general
     options and software.
    </p><p>
     Furthermore, using a CMS guarantees the validity of the resulting
     control file and its direct use for starting automated installation.
    </p><p>
     Make sure the configuration system is installed (package
     <code class="systemitem">autoyast2</code>) and call it using
     the YaST control center or as root with the following command
     (make sure the <code class="envar">DISPLAY</code> variable is set correctly to
     start the graphical user interface instead of the text-based one):
    </p><div class="verbatim-wrap"><pre class="screen">/sbin/yast2 autoyast</pre></div></section></section><section class="sect1" id="CreateProfile-Manual" data-id-title="Creating/Editing a Control File Manually"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.3 </span><span class="title-name">Creating/Editing a Control File Manually</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-Manual">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE15SP2/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If editing the control file manually, make sure it has a valid syntax.  To
    check the syntax, use the tools already available on the distribution. For
    example, to verify that the file is well-formed (has a valid XML
    structure), use the utility <code class="command">xmllint</code> available with the
    <code class="systemitem">libxml2</code> package:
   </p><div class="verbatim-wrap"><pre class="screen">xmllint &lt;control file&gt;</pre></div><p>
    If the control file is not well formed, for example, if a tag is not
    closed, <code class="command">xmllint</code> will report the errors.
   </p><p>
    To validate the control file, use the tool <code class="command">jing</code> from the
    package with the same name. During validation, misplaced or missing tags and
    attributes and wrong attribute values are detected. <span class="phrase">The
    <span class="package">jing</span> package is provided with the SUSE Software Development Kit.</span>
   </p><div class="verbatim-wrap"><pre class="screen">jing /usr/share/YaST2/schema/autoyast/rng/profile.rng &lt;control file&gt;</pre></div><p>
    <code class="literal">/usr/share/YaST2/schema/autoyast/rng/profile.rng</code> is
    provided by the package <code class="literal">yast2-schema</code>. This file
    describes the syntax and classes of an AutoYaST profile.
   </p><p>
    Before going on with the autoinstallation, fix any errors resulting from
    such checks. The autoinstallation process cannot be started with an
    invalid and not well-formed control file.
   </p><p>
    You can use any XML editor available on your system or any text editor
    with XML support (for example, Emacs, Vim). However, it is not optimal
    to create the control file manually for many machines and it should only
    be seen as an interface between the autoinstallation engine and the
    Configuration Management System (CMS).
   </p><div id="id-1.7.3.3.5.10" data-id-title="Using Emacs as an XML Editor" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Using Emacs as an XML Editor</div><p>
     The built-in nxml-mode turns Emacs into a fully-fledged XML editor with
     automatic tag completion and validation. Refer to the Emacs help for
     instructions on how to set up nxml-mode.
    </p></div></section><section class="sect1" id="CreateProfile-XSLT" data-id-title="Creating a Control File via Script with XSLT"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3.4 </span><span class="title-name">Creating a Control File via Script with XSLT</span></span> <a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#CreateProfile-XSLT">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE15SP2/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you have a template and want to change a few things via script or
    command line, use an XSLT processor like <code class="literal">xsltproc</code>.
    For example, if you have an AutoYaST control file and want to fill out
    the host name via script for any reason. (If doing this often, you
    should consider scripting it.)
   </p><p>
    First, create an XSL file:
   </p><div class="example" id="id-1.7.3.3.6.4" data-id-title="Example File for Replacing the Host Name/Domain by Script"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 3.1: </span><span class="title-name">Example File for Replacing the Host Name/Domain by Script </span></span><a title="Permalink" class="permalink" href="cha-autoyast-create-control-file.html#id-1.7.3.3.6.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sle/edit/maintenance/SLE15SP2/xml/ay_create_control_file.xml" title="Edit source document"> </a></div></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:y2="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"
  xmlns="http://www.suse.com/1.0/yast2ns"
  version="1.0"&gt;
  &lt;xsl:output method="xml" encoding="UTF-8" indent="yes" omit-xml-declaration="no" cdata-section-elements="source"/&gt;

  &lt;!-- the parameter names --&gt;
  &lt;xsl:param name="hostname"/&gt;
  &lt;xsl:param name="domain"/&gt;

  &lt;xsl:template match="/"&gt;
    &lt;xsl:apply-templates select="@*|node()"/&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="y2:dns"&gt;
    &lt;xsl:copy&gt;
      &lt;!-- where to copy the parameters --&gt;
      &lt;domain&gt;&lt;xsl:value-of select="string($domain)"/&gt;&lt;/domain&gt;
      &lt;hostname&gt;&lt;xsl:value-of select="string($hostname)"/&gt;&lt;/hostname&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;


  &lt;xsl:template match="@*|node()" &gt;
    &lt;xsl:copy&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</pre></div></div></div><p>
    This file expects the host name and the domain name as parameters from
    the user.
   </p><div class="verbatim-wrap"><pre class="screen">&lt;xsl:param name="hostname"/&gt;
&lt;xsl:param name="domain"/&gt;</pre></div><p>
    There will be a copy of those parameters in the DNS section of the
    control file. This means that if there already is a domain element in the
    DNS section, you will get a second one, which will cause conflicts.
   </p><p>
    For more information about XSLT, go to the official Web page
    <a class="link" href="http://www.w3.org/TR/xslt" target="_blank">www.w3.org/TR/xslt</a>
   </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-autoyast-control-file.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 2 </span>The AutoYaST Control File</span></a> </div><div><a class="pagination-link next" href="part-configuration.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Part II </span>AutoYaST Configuration Examples</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-autoyast-create-control-file.html#Autoinstallation-collectInfo"><span class="title-number">3.1 </span><span class="title-name">Collecting Information</span></a></span></li><li><span class="sect1"><a href="cha-autoyast-create-control-file.html#CreateProfile-CMS"><span class="title-number">3.2 </span><span class="title-name">Using the Configuration Management System (CMS)</span></a></span></li><li><span class="sect1"><a href="cha-autoyast-create-control-file.html#CreateProfile-Manual"><span class="title-number">3.3 </span><span class="title-name">Creating/Editing a Control File Manually</span></a></span></li><li><span class="sect1"><a href="cha-autoyast-create-control-file.html#CreateProfile-XSLT"><span class="title-number">3.4 </span><span class="title-name">Creating a Control File via Script with XSLT</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>